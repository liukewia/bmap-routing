(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+QRC":function(Dn,ft,Ae){"use strict";var Wt=Ae("E9nw"),rr={"text/plain":"Text","text/html":"Url",default:"Text"},st="Copy to clipboard: #{key}, Enter";function ye(Ye){var Ut=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return Ye.replace(/#{\s*key\s*}/g,Ut)}function At(Ye,Ut){var St,ce,Ne,Q,Oe,pt,Lt=!1;Ut||(Ut={}),St=Ut.debug||!1;try{Ne=Wt(),Q=document.createRange(),Oe=document.getSelection(),pt=document.createElement("span"),pt.textContent=Ye,pt.style.all="unset",pt.style.position="fixed",pt.style.top=0,pt.style.clip="rect(0, 0, 0, 0)",pt.style.whiteSpace="pre",pt.style.webkitUserSelect="text",pt.style.MozUserSelect="text",pt.style.msUserSelect="text",pt.style.userSelect="text",pt.addEventListener("copy",function(xe){if(xe.stopPropagation(),Ut.format)if(xe.preventDefault(),typeof xe.clipboardData=="undefined"){St&&console.warn("unable to use e.clipboardData"),St&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var Lr=rr[Ut.format]||rr.default;window.clipboardData.setData(Lr,Ye)}else xe.clipboardData.clearData(),xe.clipboardData.setData(Ut.format,Ye);Ut.onCopy&&(xe.preventDefault(),Ut.onCopy(xe.clipboardData))}),document.body.appendChild(pt),Q.selectNodeContents(pt),Oe.addRange(Q);var Er=document.execCommand("copy");if(!Er)throw new Error("copy command was unsuccessful");Lt=!0}catch(xe){St&&console.error("unable to copy using execCommand: ",xe),St&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(Ut.format||"text",Ye),Ut.onCopy&&Ut.onCopy(window.clipboardData),Lt=!0}catch(Lr){St&&console.error("unable to copy using clipboardData: ",Lr),St&&console.error("falling back to prompt"),ce=ye("message"in Ut?Ut.message:st),window.prompt(ce,Ye)}}finally{Oe&&(typeof Oe.removeRange=="function"?Oe.removeRange(Q):Oe.removeAllRanges()),pt&&document.body.removeChild(pt),Ne()}return Lt}Dn.exports=At},"/qDX":function(Dn,ft,Ae){},"0GZW":function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("W1EI"),st=Wt.__importDefault(Ae("s+10")),ye=Wt.__importDefault(Ae("Gytx")),At=Ae("g8eg"),Ye=["click","dblclick","rightclick","mousedown","mouseup","mouseout","mouseover","mousemove","remove","lineupdate"],Ut={enableMassClear:["enableMassClear","disableMassClear"],enableEditing:["enableEditing","disableEditing"]},St=function(ce){Wt.__extends(Ne,ce);function Ne(Q){var Oe=ce.call(this,Q)||this;return Oe.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","enableMassClear","enableEditing","enableClicking"],Oe}return Ne.prototype.componentDidUpdate=function(Q){var Oe=this.props,pt=Oe.strokeColor,Lt=Oe.strokeWeight,Er=Oe.strokeOpacity,xe=Oe.strokeStyle,Lr=Oe.fillColor,Hn=Oe.fillOpacity,bo=Q.strokeColor,Cr=Q.strokeWeight,Lo=Q.strokeOpacity,Ui=Q.strokeStyle,mi=Q.fillColor,Ko=Q.fillOpacity,ro=!ye.default(pt,bo),ia=!ye.default(Lt,Cr),Xt=!ye.default(Er,Lo),vt=!ye.default(xe,Ui),Dr=!ye.default(Lr,mi),Br=!ye.default(Hn,Ko);(ro||ia||Xt||vt||Dr||Br)&&this.overlay.setOptions(this.getOptions()),this.onDataUpdate(Q)},Ne.prototype.componentDidMount=function(){this.initialize()},Ne.prototype.componentWillUnmount=function(){this.destroy()},Ne.prototype.destroy=function(){this.overlay&&(this.map.removeOverlay(this.overlay),this.instance=this.overlay=void 0)},Ne.prototype.initialize=function(){var Q=this.map=this.getMap();if(!!Q){this.destroy(),this.instance=this.overlay=this.getOverlay(),Q.addOverlay(this.overlay);var Oe;if(this.overlay instanceof BMapGL.Polyline||this.overlay instanceof BMapGL.Polygon){var pt=this.overlay.getPath();Oe=Q.getViewport(pt,this.props.viewportOptions||{})}else if(this.overlay instanceof BMapGL.Circle){var Lt=this.overlay.getBounds();Oe=Q.getViewport(Lt,this.props.viewportOptions||{})}Oe&&this.props.autoViewport&&Q.setViewport(Oe)}},Ne.prototype.getOverlay=function(){throw new Error("Method getOverlay not implemented.")},Ne.prototype.onDataUpdate=function(Q){throw new Error("Method onDataUpdate not implemented.")},Ne.contextType=At.MapContext,Ne}(rr.Component);ft.default=st.default(St,Ye,Ut)},"0uCz":function(Dn,ft,Ae){"use strict";window._hmt=window._hmt||[],function(){var Wt=document.createElement("script");Wt.src="https://hm.baidu.com/hm.js?b97569d26a525941d8d163729d284198";var rr=document.getElementsByTagName("script")[0];rr.parentNode.insertBefore(Wt,rr)}()},"3Ree":function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.ViewContext=void 0;var Wt=Ae("mrSG"),rr=Ae("4K7L"),st=Wt.__importStar(Ae("q1tI")),ye=Ae("W1EI"),At=Ae("g8eg");ft.ViewContext=st.default.createContext({view:void 0});var Ye=function(Ut){Wt.__extends(St,Ut);function St(ce){return Ut.call(this,ce)||this}return St.prototype.componentDidMount=function(){this.initialize(),this.forceUpdate()},St.prototype.componentWillUnmount=function(){this.view&&(this.view.destroy(),this.view=null)},St.prototype.componentDidUpdate=function(ce){(!this.map||!this.view)&&this.initialize()},St.prototype.initialize=function(){var ce=this.map=this.getMap();if(!(!ce||this.view)&&!this.view){var Ne=[],Q=this.props.effects;Q&&Q.length&&Q.forEach(function(Oe){Oe==="bloom"?Ne.push(new rr.BloomEffect):Oe==="bright"?Ne.push(new rr.BrightEffect):Oe==="blur"&&Ne.push(new rr.BlurEffect)}),this.view=new rr.View({effects:Ne,map:ce})}},St.prototype.renderChildren=function(ce){var Ne=this;if(!(!ce||!this.map||!this.view))return st.default.Children.map(ce,function(Q){if(!!Q)return typeof Q.type=="string"?Q:st.default.cloneElement(Q,{map:Ne.map,view:Ne.view})})},St.prototype.render=function(){return st.default.createElement(st.Fragment,null,st.default.createElement(ft.ViewContext.Provider,{value:{map:this.map,view:this.view}},this.renderChildren(this.props.children)))},St.contextType=At.MapContext,St}(ye.Component);ft.default=Ye},"3RkO":function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});function Wt(rr){if(typeof rr=="string")return rr;if(!!rr)return rr.displayName||rr.name||"Component"}ft.default=Wt},"4K7L":function(Dn,ft,Ae){(function(Wt){function rr(st,ye,At){for(var Ye=ye.length,Ut=new Uint8Array(3*Ye/4-(ye[Ye-2]=="="?2:ye[Ye-1]=="="?1:0)),St=new Uint8Array(130),ce=0;64>ce;ce++)St["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(ce)]=ce;for(var Ne=ce=0;ce<Ye;ce+=4){var Q=St[ye.charCodeAt(ce+1)],Oe=St[ye.charCodeAt(ce+2)];Ut[Ne++]=St[ye.charCodeAt(ce)]<<2|Q>>4,Ut[Ne++]=(Q&15)<<4|Oe>>2,Ut[Ne++]=(Oe&3)<<6|St[ye.charCodeAt(ce+3)]&63}return At&&!st?WebAssembly.instantiate(Ut,At):At||st?(st=new WebAssembly.Module(Ut),At?new WebAssembly.Instance(st,At):st):WebAssembly.compile(Ut)}(function(st,ye){ye(ft)})(this,function(st){function ye(m){this.options=m||{},this.paneName=this.options.paneName||"labelPane",this.zIndex=this.options.zIndex||1,this._map=m.map,this._lastDrawTime=null,this.show()}function At(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}function Ye(m,o){return o={exports:{}},m(o,o.exports),o.exports}function Ut(m,o){return function(c){return o(m(c))}}function St(m){var o=function(s){return s==null?s:(1<arguments.length&&(s=Array.prototype.slice.call(arguments)),m(s))};return"conversion"in m&&(o.conversion=m.conversion),o}function ce(m){var o=function(s){if(s==null)return s;1<arguments.length&&(s=Array.prototype.slice.call(arguments));var h=m(s);if((typeof h=="undefined"?"undefined":Ta(h))==="object")for(var f=h.length,x=0;x<f;x++)h[x]=Math.round(h[x]);return h};return"conversion"in m&&(o.conversion=m.conversion),o}function Ne(m,o){if(!(this instanceof Ne))return new Ne(m,o);if(o&&o in rg&&(o=null),o&&!(o in nu))throw Error("Unknown model: "+o);if(typeof m=="undefined")this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(m instanceof Ne)this.model=m.model,this.color=m.color.slice(),this.valpha=m.valpha;else if(typeof m=="string"){if(o=cp.get(m),o===null)throw Error("Unable to parse color from string: "+m);this.model=o.model;var c=nu[this.model].channels;this.color=o.value.slice(0,c),this.valpha=typeof o.value[c]=="number"?o.value[c]:1}else if(m.length)this.model=o||"rgb",c=nu[this.model].channels,o=Rl.call(m,0,c),this.color=Lt(o,c),this.valpha=typeof m[c]=="number"?m[c]:1;else if(typeof m=="number")m&=16777215,this.model="rgb",this.color=[m>>16&255,m>>8&255,m&255],this.valpha=1;else{if(this.valpha=1,o=Fa(m),"alpha"in m&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof m.alpha=="number"?m.alpha:0),o=o.sort().join(""),!(o in mf))throw Error("Unable to parse color from object: "+ti(m));this.model=mf[o],c=nu[this.model].labels;var s=[];for(o=0;o<c.length;o++)s.push(m[c[o]]);this.color=Lt(s)}if(iu[this.model])for(c=nu[this.model].channels,o=0;o<c;o++)(m=iu[this.model][o])&&(this.color[o]=m(this.color[o]));this.valpha=Math.max(0,Math.min(1,this.valpha)),Ee&&Ee(this)}function Q(m){return function(o){return Number(o.toFixed(m))}}function Oe(m,o,c){return m=Array.isArray(m)?m:[m],m.forEach(function(s){(iu[s]||(iu[s]=[]))[o]=c}),m=m[0],function(s){if(arguments.length){c&&(s=c(s));var h=this[m]();return h.color[o]=s,h}return h=this[m]().color[o],c&&(h=c(h)),h}}function pt(m){return function(o){return Math.max(0,Math.min(m,o))}}function Lt(m,o){for(var c=0;c<o;c++)typeof m[c]!="number"&&(m[c]=0);return m}function Er(m){return m*Math.PI/180}function xe(m){return m/Math.PI*180}function Lr(m){return Math.pow(2,Math.ceil(Math.log(m)/Math.LN2))}function Hn(m){return Math.pow(2,Math.floor(Math.log(m)/Math.LN2))}function bo(m,o){return 1e-8>Math.abs(m-o)}function Cr(){}function Lo(m,o){for(var c in o)m[c]=o[c]}function Ui(m,o){this.lng=m,this.lat=o}function mi(m,o){this.x=m,this.y=o}function Ko(m,o){var c=document.createElement("canvas");return m&&(c.width=m),o&&(c.height=o),c}function ro(m){m=m||{},this.gradient=m.gradient||{"0.25":"rgba(0, 0, 255, 1)","0.55":"rgba(0, 255, 0, 1)","0.85":"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=m.maxSize===void 0?35:m.maxSize,this.minSize=m.minSize||0,this.max=m.max||100,this.min=m.min||0,this.initPalette()}function ia(m){this.options=m||{},this._initialize()}function Xt(m,o,c,s,h){var f=1-m,x=1-m;return f*f*f*o+3*x*x*m*c+3*(1-m)*m*m*s+m*m*m*h}function vt(m){this.WORLD_SIZE_MC_HALF=20037726372307256e-9,this.WORLD_SIZE_MC=2*this.WORLD_SIZE_MC_HALF,this.options=m||{},this._initialize()}function Dr(m,o){return m&&o?Math.round(Math.sqrt(Math.pow(m.lng-o.lng,2)+Math.pow(m.lat-o.lat,2))):0}function Br(m){return m=m.split("|"),m[0]=m[0].split(","),{lng:parseFloat(m[0][0]),lat:parseFloat(m[0][1])}}function Gr(m){for(var o=m.length;0<=--o;)m[o]=0}function kr(m,o,c,s,h){this.static_tree=m,this.extra_bits=o,this.extra_base=c,this.elems=s,this.max_length=h,this.has_stree=m&&m.length}function Nr(m,o){this.dyn_tree=m,this.max_code=0,this.stat_desc=o}function wr(m,o,c,s,h){this.good_length=m,this.max_lazy=o,this.nice_length=c,this.max_chain=s,this.func=h}function Jr(){this.strm=null,this.status=0,this.pending_buf=null,this.wrap=this.pending=this.pending_out=this.pending_buf_size=0,this.gzhead=null,this.gzindex=0,this.method=el,this.last_flush=-1,this.w_mask=this.w_bits=this.w_size=0,this.window=null,this.window_size=0,this.head=this.prev=null,this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ws(this.dyn_ltree),ws(this.dyn_dtree),ws(this.bl_tree),this.bl_desc=this.d_desc=this.l_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ws(this.heap),this.heap_max=this.heap_len=0,this.depth=new Uint16Array(573),ws(this.depth),this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function Tn(m){m=this.options=ih.assign({level:sg,method:Cv,chunkSize:16384,windowBits:15,memLevel:8,strategy:nl},m||{}),m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&16>m.windowBits&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yv,this.strm.avail_out=0;var o=xl.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(o!==ag)throw Error(Ki[o]);if(m.header&&xl.deflateSetHeader(this.strm,m.header),m.dictionary){if(m=typeof m.dictionary=="string"?su.string2buf(m.dictionary):Ef.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,o=xl.deflateSetDictionary(this.strm,m),o!==ag)throw Error(Ki[o]);this._dict_set=!0}}function fa(m,o){if(o=new Tn(o),o.push(m,!0),o.err)throw o.msg||Ki[o.err];return o.result}function Ja(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.total=this.check=this.dmax=this.flags=0,this.head=null,this.wnext=this.whave=this.wsize=this.wbits=0,this.window=null,this.extra=this.offset=this.length=this.bits=this.hold=0,this.distcode=this.lencode=null,this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.distdyn=this.lendyn=null,this.was=this.back=this.sane=0}function ki(m){var o=this.options=ih.assign({chunkSize:65536,windowBits:15,to:""},m||{});if(o.raw&&0<=o.windowBits&&16>o.windowBits&&(o.windowBits=-o.windowBits,o.windowBits===0&&(o.windowBits=-15)),!(0<=o.windowBits&&16>o.windowBits)||m&&m.windowBits||(o.windowBits+=32),15<o.windowBits&&48>o.windowBits&&(o.windowBits&15)==0&&(o.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yv,this.strm.avail_out=0,m=Eu.inflateInit2(this.strm,o.windowBits),m!==Dh||(this.header=new g0,Eu.inflateGetHeader(this.strm,this.header),o.dictionary&&(typeof o.dictionary=="string"?o.dictionary=su.string2buf(o.dictionary):Ap.call(o.dictionary)==="[object ArrayBuffer]"&&(o.dictionary=new Uint8Array(o.dictionary)),o.raw&&(m=Eu.inflateSetDictionary(this.strm,o.dictionary),m!==Dh))))throw Error(Ki[m])}function vs(m,o){if(o=new ki(o),o.push(m),o.err)throw o.msg||Ki[o.err];return o.result}function Bc(m,o){for(var c=["webgl2","experimental-webgl2","webgl","experimental-webgl"],s=void 0,h=0;h<c.length;h++)try{if(s=m.getContext(c[h],{alpha:!0,premultipliedAlpha:!1,preserveDrawingBuffer:o.preserveDrawingBuffer||!1}))break}catch(f){}return s}function fu(m,o,c){c=vi({TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"REPEAT",TEXTURE_WRAP_T:"REPEAT"},c);var s=m.createTexture();m.bindTexture(m.TEXTURE_2D,s),m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,!0),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,o);for(var h in c)m.texParameteri(m.TEXTURE_2D,m[h],m[c[h]]);return m.bindTexture(m.TEXTURE_2D,null),s}function Or(m,o,c,s){if((typeof o=="undefined"?"undefined":Ta(o))==="object")o=fu(m,o,s),c(o,null);else{var h=new Image;h.crossOrigin="anonymous",h.onload=function(){var f=Hn(h.width),x=Hn(h.height),g=document.createElement("canvas");g.width=f,g.height=x,g.getContext("2d").drawImage(h,0,0,f,x),h=g,f=fu(m,h,s),c(f,h)},h.src=o}}function Sl(m,o,c){c=c||2;var s=o&&o.length,h=s?o[0]*c:m.length,f=Yp(m,0,h,c,!0),x=[];if(!f||f.next===f.prev)return x;var g;if(s){var _=c;s=[];var L,F=0;for(L=o.length;F<L;F++){var M=o[F]*_,E=F<L-1?o[F+1]*_:m.length;M=Yp(m,M,E,_,!1),M===M.next&&(M.steiner=!0),s.push(ul(M))}for(s.sort(Kh),F=0;F<s.length;F++)_=s[F],o=f,(o=wh(_,o))&&(_=Ia(o,_),Zl(o,o.next),Zl(_,_.next)),f=Zl(f,f.next)}if(m.length>80*c){var P=g=m[0],O=s=m[1];for(_=c;_<h;_+=c)F=m[_],o=m[_+1],F<P&&(P=F),o<O&&(O=o),F>g&&(g=F),o>s&&(s=o);g=Math.max(g-P,s-O),g=g!==0?1/g:0}return $r(f,x,c,P,O,g),x}function Yp(m,o,c,s,h){if(h===0<Uc(m,o,c,s))for(h=o;h<c;h+=s)var f=Ud(h,m[h],m[h+1],f);else for(h=c-s;h>=o;h-=s)f=Ud(h,m[h],m[h+1],f);return f&&ss(f,f.next)&&(zu(f),f=f.next),f}function Zl(m,o){if(!m)return m;o||(o=m);do{var c=!1;if(m.steiner||!ss(m,m.next)&&_i(m.prev,m,m.next)!==0)m=m.next;else{if(zu(m),m=o=m.prev,m===m.next)break;c=!0}}while(c||m!==o);return o}function $r(m,o,c,s,h,f,x){if(m){if(!x&&f){var g=m,_=g;do _.z===null&&(_.z=ei(_.x,_.y,s,h,f)),_.prevZ=_.prev,_=_.nextZ=_.next;while(_!==g);_.prevZ.nextZ=null,_.prevZ=null,g=_;var L,F,M,E,P=1;do{_=g;var O=g=null;for(F=0;_;){F++;var B=_;for(L=M=0;L<P&&(M++,B=B.nextZ,B);L++);for(E=P;0<M||0<E&&B;)M!==0&&(E===0||!B||_.z<=B.z)?(L=_,_=_.nextZ,M--):(L=B,B=B.nextZ,E--),O?O.nextZ=L:g=L,L.prevZ=O,O=L;_=B}O.nextZ=null,P*=2}while(1<F)}for(g=m;m.prev!==m.next;){if(_=m.prev,B=m.next,f)O=oa(m,s,h,f);else e:if(O=m,F=O.prev,M=O,P=O.next,0<=_i(F,M,P))O=!1;else{for(L=O.next.next;L!==O.prev;){if(ko(F.x,F.y,M.x,M.y,P.x,P.y,L.x,L.y)&&0<=_i(L.prev,L,L.next)){O=!1;break e}L=L.next}O=!0}if(O)o.push(_.i/c),o.push(m.i/c),o.push(B.i/c),zu(m),g=m=B.next;else if(m=B,m===g){if(!x)$r(Zl(m),o,c,s,h,f,1);else if(x===1){m=Zl(m),x=o,g=c,_=m;do B=_.prev,O=_.next.next,!ss(B,O)&&qa(B,_,_.next,O)&&_a(B,O)&&_a(O,B)&&(x.push(B.i/g),x.push(_.i/g),x.push(O.i/g),zu(_),zu(_.next),_=m=O),_=_.next;while(_!==m);m=Zl(_),$r(m,o,c,s,h,f,2)}else if(x===2)e:{x=m;do{for(g=x.next.next;g!==x.prev;){if(_=x.i!==g.i){if(_=x,B=g,O=_.next.i!==B.i&&_.prev.i!==B.i){t:{O=_;do{if(O.i!==_.i&&O.next.i!==_.i&&O.i!==B.i&&O.next.i!==B.i&&qa(O,O.next,_,B)){O=!0;break t}O=O.next}while(O!==_);O=!1}O=!O}if(O){if(O=_a(_,B)&&_a(B,_)){O=_,F=!1,M=(_.x+B.x)/2,P=(_.y+B.y)/2;do O.y>P!=O.next.y>P&&O.next.y!==O.y&&M<(O.next.x-O.x)*(P-O.y)/(O.next.y-O.y)+O.x&&(F=!F),O=O.next;while(O!==_);O=F}O=O&&(_i(_.prev,_,B.prev)||_i(_,B.prev,B))||ss(_,B)&&0<_i(_.prev,_,_.next)&&0<_i(B.prev,B,B.next)}_=O}if(_){m=Ia(x,g),x=Zl(x,x.next),m=Zl(m,m.next),$r(x,o,c,s,h,f),$r(m,o,c,s,h,f);break e}g=g.next}x=x.next}while(x!==m)}break}}}}function oa(m,o,c,s){var h=m.prev,f=m.next;if(0<=_i(h,m,f))return!1;var x=h.x>m.x?h.x>f.x?h.x:f.x:m.x>f.x?m.x:f.x,g=h.y>m.y?h.y>f.y?h.y:f.y:m.y>f.y?m.y:f.y,_=ei(h.x<m.x?h.x<f.x?h.x:f.x:m.x<f.x?m.x:f.x,h.y<m.y?h.y<f.y?h.y:f.y:m.y<f.y?m.y:f.y,o,c,s);for(o=ei(x,g,o,c,s),c=m.prevZ,s=m.nextZ;c&&c.z>=_&&s&&s.z<=o;){if(c!==m.prev&&c!==m.next&&ko(h.x,h.y,m.x,m.y,f.x,f.y,c.x,c.y)&&0<=_i(c.prev,c,c.next)||(c=c.prevZ,s!==m.prev&&s!==m.next&&ko(h.x,h.y,m.x,m.y,f.x,f.y,s.x,s.y)&&0<=_i(s.prev,s,s.next)))return!1;s=s.nextZ}for(;c&&c.z>=_;){if(c!==m.prev&&c!==m.next&&ko(h.x,h.y,m.x,m.y,f.x,f.y,c.x,c.y)&&0<=_i(c.prev,c,c.next))return!1;c=c.prevZ}for(;s&&s.z<=o;){if(s!==m.prev&&s!==m.next&&ko(h.x,h.y,m.x,m.y,f.x,f.y,s.x,s.y)&&0<=_i(s.prev,s,s.next))return!1;s=s.nextZ}return!0}function Kh(m,o){return m.x-o.x}function wh(m,o){var c=o,s=m.x,h=m.y,f=-Infinity;do{if(h<=c.y&&h>=c.next.y&&c.next.y!==c.y){var x=c.x+(h-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(x<=s&&x>f){if(f=x,x===s){if(h===c.y)return c;if(h===c.next.y)return c.next}var g=c.x<c.next.x?c:c.next}}c=c.next}while(c!==o);if(!g)return null;if(s===f)return g;o=g,x=g.x;var _=g.y,L=Infinity;c=g;do{if(s>=c.x&&c.x>=x&&s!==c.x&&ko(h<_?s:f,h,x,_,h<_?f:s,h,c.x,c.y)){var F=Math.abs(h-c.y)/(s-c.x),M;if((M=_a(c,m))&&!(M=F<L)&&(M=F===L)&&!(M=c.x>g.x)&&(M=c.x===g.x)){M=g;var E=c;M=0>_i(M.prev,M,E.prev)&&0>_i(E.next,M,M.next)}M&&(g=c,L=F)}c=c.next}while(c!==o);return g}function ei(m,o,c,s,h){return m=32767*(m-c)*h,o=32767*(o-s)*h,m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,(m|m<<1)&1431655765|((o|o<<1)&1431655765)<<1}function ul(m){var o=m,c=m;do(o.x<c.x||o.x===c.x&&o.y<c.y)&&(c=o),o=o.next;while(o!==m);return c}function ko(m,o,c,s,h,f,x,g){return 0<=(h-x)*(o-g)-(m-x)*(f-g)&&0<=(m-x)*(s-g)-(c-x)*(o-g)&&0<=(c-x)*(f-g)-(h-x)*(s-g)}function _i(m,o,c){return(o.y-m.y)*(c.x-o.x)-(o.x-m.x)*(c.y-o.y)}function ss(m,o){return m.x===o.x&&m.y===o.y}function qa(m,o,c,s){var h=Bu(_i(m,o,c)),f=Bu(_i(m,o,s)),x=Bu(_i(c,s,m)),g=Bu(_i(c,s,o));return!!(h!==f&&x!==g||h===0&&zc(m,c,o)||f===0&&zc(m,s,o)||x===0&&zc(c,m,s)||g===0&&zc(c,o,s))}function zc(m,o,c){return o.x<=Math.max(m.x,c.x)&&o.x>=Math.min(m.x,c.x)&&o.y<=Math.max(m.y,c.y)&&o.y>=Math.min(m.y,c.y)}function Bu(m){return 0<m?1:0>m?-1:0}function _a(m,o){return 0>_i(m.prev,m,m.next)?0<=_i(m,o,m.next)&&0<=_i(m,m.prev,o):0>_i(m,o,m.prev)||0>_i(m,m.next,o)}function Ia(m,o){var c=new Kl(m.i,m.x,m.y),s=new Kl(o.i,o.x,o.y),h=m.next,f=o.prev;return m.next=o,o.prev=m,c.next=h,h.prev=c,s.next=c,c.prev=s,f.next=s,s.prev=f,s}function Ud(m,o,c,s){return m=new Kl(m,o,c),s?(m.next=s.next,m.prev=s,s.next.prev=m,s.next=m):(m.prev=m,m.next=m),m}function zu(m){m.next.prev=m.prev,m.prev.next=m.next,m.prevZ&&(m.prevZ.nextZ=m.nextZ),m.nextZ&&(m.nextZ.prevZ=m.prevZ)}function Kl(m,o,c){this.i=m,this.x=o,this.y=c,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Uc(m,o,c,s){for(var h=0,f=c-s;o<c;o+=s)h+=(m[f]-m[o])*(m[o+1]+m[f+1]),f=o;return h}function Qa(m){try{return Md.createObjectURL(new Blob([m],{type:"application/javascript"}))}catch(c){var o=new Mv;return o.append(m),Md.createObjectURL(o.getBlob(type))}}function Uu(m,o){this.shapeLayer=m,this.gl=o,this.initData()}function fc(m,o,c,s){var h=[];return s=s*Math.PI/180,h[0]=(m-c[0])*Math.cos(s)-(o-c[1])*Math.sin(s)+c[0],h[1]=(m-c[0])*Math.sin(s)+(o-c[1])*Math.cos(s)+c[1],h}function dc(m){var o=0,c=0,s=!0,h=!1,f=void 0;try{for(var x=Os(m),g;!(s=(g=x.next()).done);s=!0){var _=g.value;o+=_.w*_.h,c=Math.max(c,_.w)}}catch(B){h=!0,f=B}finally{try{!s&&x.return&&x.return()}finally{if(h)throw f}}m.sort(function(B,X){return X.h-B.h}),c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),c),h:Infinity}],h=s=0,f=!0,x=!1,g=void 0;try{for(var L=Os(m),F;!(f=(F=L.next()).done);f=!0)for(var M=F.value,E=c.length-1;0<=E;E--){var P=c[E];if(!(M.w>P.w||M.h>P.h)){if(M.x=P.x,M.y=P.y,h=Math.max(h,M.y+M.h),s=Math.max(s,M.x+M.w),M.w===P.w&&M.h===P.h){var O=c.pop();E<c.length&&(c[E]=O)}else M.h===P.h?(P.x+=M.w,P.w-=M.w):(M.w!==P.w&&c.push({x:P.x+M.w,y:P.y,w:P.w-M.w,h:M.h}),P.y+=M.h,P.h-=M.h);break}}}catch(B){x=!0,g=B}finally{try{!f&&L.return&&L.return()}finally{if(x)throw g}}return{w:s,h,fill:o/(s*h)||0}}function ku(){Df=!0;for(var m=0;64>m;++m)Lu[m]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m],Zs["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(m)]=m;Zs[45]=62,Zs[95]=63}function Gg(m,o,c){for(var s=[],h=o;h<c;h+=3)o=(m[h]<<16)+(m[h+1]<<8)+m[h+2],s.push(Lu[o>>18&63]+Lu[o>>12&63]+Lu[o>>6&63]+Lu[o&63]);return s.join("")}function kc(m){Df||ku();for(var o=m.length,c=o%3,s="",h=[],f=0,x=o-c;f<x;f+=16383)h.push(Gg(m,f,f+16383>x?x:f+16383));return c===1?(m=m[o-1],s+=Lu[m>>2],s+=Lu[m<<4&63],s+="=="):c===2&&(m=(m[o-2]<<8)+m[o-1],s+=Lu[m>>10],s+=Lu[m>>4&63],s+=Lu[m<<2&63],s+="="),h.push(s),h.join("")}function Tr(m,o,c,s,h){var f=8*h-s-1,x=(1<<f)-1,g=x>>1,_=-7;h=c?h-1:0;var L=c?-1:1,F=m[o+h];for(h+=L,c=F&(1<<-_)-1,F>>=-_,_+=f;0<_;c=256*c+m[o+h],h+=L,_-=8);for(f=c&(1<<-_)-1,c>>=-_,_+=s;0<_;f=256*f+m[o+h],h+=L,_-=8);if(c===0)c=1-g;else{if(c===x)return f?NaN:Infinity*(F?-1:1);f+=Math.pow(2,s),c-=g}return(F?-1:1)*f*Math.pow(2,c-s)}function kd(m,o,c,s,h,f){var x,g=8*f-h-1,_=(1<<g)-1,L=_>>1,F=h===23?Math.pow(2,-24)-Math.pow(2,-77):0;f=s?0:f-1;var M=s?1:-1,E=0>o||o===0&&0>1/o?1:0;for(o=Math.abs(o),isNaN(o)||o===Infinity?(o=isNaN(o)?1:0,s=_):(s=Math.floor(Math.log(o)/Math.LN2),1>o*(x=Math.pow(2,-s))&&(s--,x*=2),o=1<=s+L?o+F/x:o+F*Math.pow(2,1-L),2<=o*x&&(s++,x/=2),s+L>=_?(o=0,s=_):1<=s+L?(o=(o*x-1)*Math.pow(2,h),s+=L):(o=o*Math.pow(2,L-1)*Math.pow(2,h),s=0));8<=h;m[c+f]=o&255,f+=M,o/=256,h-=8);for(s=s<<h|o,g+=h;0<g;m[c+f]=s&255,f+=M,s/=256,g-=8);m[c+f-M]|=128*E}function Jl(m,o){if((Ir.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<o)throw new RangeError("Invalid typed array length");return Ir.TYPED_ARRAY_SUPPORT?(m=new Uint8Array(o),m.__proto__=Ir.prototype):(m===null&&(m=new Ir(o)),m.length=o),m}function Ir(m,o,c){if(!(Ir.TYPED_ARRAY_SUPPORT||this instanceof Ir))return new Ir(m,o,c);if(typeof m=="number"){if(typeof o=="string")throw Error("If encoding is specified then the first argument must be a string");return Jh(this,m)}return Hc(this,m,o,c)}function Hc(m,o,c,s){if(typeof o=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer!="undefined"&&o instanceof ArrayBuffer){if(o.byteLength,0>c||o.byteLength<c)throw new RangeError("'offset' is out of bounds");if(o.byteLength<c+(s||0))throw new RangeError("'length' is out of bounds");return o=c===void 0&&s===void 0?new Uint8Array(o):s===void 0?new Uint8Array(o,c):new Uint8Array(o,c,s),Ir.TYPED_ARRAY_SUPPORT?(m=o,m.__proto__=Ir.prototype):m=_h(m,o),m}if(typeof o=="string"){if(s=m,m=c,(typeof m!="string"||m==="")&&(m="utf8"),!Ir.isEncoding(m))throw new TypeError('"encoding" must be a valid string encoding');return c=s0(o,m)|0,s=Jl(s,c),o=s.write(o,m),o!==c&&(s=s.slice(0,o)),s}return cl(m,o)}function Hd(m){if(typeof m!="number")throw new TypeError('"size" argument must be a number');if(0>m)throw new RangeError('"size" argument must not be negative')}function Jh(m,o){if(Hd(o),m=Jl(m,0>o?0:Tl(o)|0),!Ir.TYPED_ARRAY_SUPPORT)for(var c=0;c<o;++c)m[c]=0;return m}function _h(m,o){var c=0>o.length?0:Tl(o.length)|0;m=Jl(m,c);for(var s=0;s<c;s+=1)m[s]=o[s]&255;return m}function cl(m,o){if(pc(o)){var c=Tl(o.length)|0;return m=Jl(m,c),m.length===0||o.copy(m,0,0,c),m}if(o){if(typeof ArrayBuffer!="undefined"&&o.buffer instanceof ArrayBuffer||"length"in o)return(c=typeof o.length!="number")||(c=o.length,c=c!==c),c?Jl(m,0):_h(m,o);if(o.type==="Buffer"&&Id(o.data))return _h(m,o.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Tl(m){if(m>=(Ir.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(Ir.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return m|0}function pc(m){return!(m==null||!m._isBuffer)}function s0(m,o){if(pc(m))return m.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(m)||m instanceof ArrayBuffer))return m.byteLength;typeof m!="string"&&(m=""+m);var c=m.length;if(c===0)return 0;for(var s=!1;;)switch(o){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return Kp(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return Vg(m).length;default:if(s)return Kp(m).length;o=(""+o).toLowerCase(),s=!0}}function Zp(m,o,c){var s=!1;if((o===void 0||0>o)&&(o=0),o>this.length||((c===void 0||c>this.length)&&(c=this.length),0>=c)||(c>>>=0,o>>>=0,c<=o))return"";for(m||(m="utf8");;)switch(m){case"hex":for(m=o,o=c,c=this.length,(!m||0>m)&&(m=0),(!o||0>o||o>c)&&(o=c),s="",c=m;c<o;++c)m=s,s=this[c],s=16>s?"0"+s.toString(16):s.toString(16),s=m+s;return s;case"utf8":case"utf-8":return jg(this,o,c);case"ascii":for(m="",c=Math.min(this.length,c);o<c;++o)m+=String.fromCharCode(this[o]&127);return m;case"latin1":case"binary":for(m="",c=Math.min(this.length,c);o<c;++o)m+=String.fromCharCode(this[o]);return m;case"base64":return o=o===0&&c===this.length?kc(this):kc(this.slice(o,c)),o;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(o=this.slice(o,c),c="",m=0;m<o.length;m+=2)c+=String.fromCharCode(o[m]+256*o[m+1]);return c;default:if(s)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),s=!0}}function $a(m,o,c){var s=m[o];m[o]=m[c],m[c]=s}function ev(m,o,c,s,h){if(m.length===0)return-1;if(typeof c=="string"?(s=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648),c=+c,isNaN(c)&&(c=h?0:m.length-1),0>c&&(c=m.length+c),c>=m.length){if(h)return-1;c=m.length-1}else if(0>c)if(h)c=0;else return-1;if(typeof o=="string"&&(o=Ir.from(o,s)),pc(o))return o.length===0?-1:tv(m,o,c,s,h);if(typeof o=="number")return o&=255,Ir.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(m,o,c):Uint8Array.prototype.lastIndexOf.call(m,o,c):tv(m,[o],c,s,h);throw new TypeError("val must be string, number or Buffer")}function tv(m,o,c,s,h){function f(L,F){return x===1?L[F]:L.readUInt16BE(F*x)}var x=1,g=m.length,_=o.length;if(s!==void 0&&(s=String(s).toLowerCase(),s==="ucs2"||s==="ucs-2"||s==="utf16le"||s==="utf-16le")){if(2>m.length||2>o.length)return-1;x=2,g/=2,_/=2,c/=2}if(h)for(s=-1;c<g;c++)if(f(m,c)===f(o,s===-1?0:c-s)){if(s===-1&&(s=c),c-s+1===_)return s*x}else s!==-1&&(c-=c-s),s=-1;else for(c+_>g&&(c=g-_);0<=c;c--){for(g=!0,s=0;s<_;s++)if(f(m,c+s)!==f(o,s)){g=!1;break}if(g)return c}return-1}function jg(m,o,c){c=Math.min(m.length,c);for(var s=[];o<c;){var h=m[o],f=null,x=239<h?4:223<h?3:191<h?2:1;if(o+x<=c)switch(x){case 1:128>h&&(f=h);break;case 2:var g=m[o+1];(g&192)==128&&(h=(h&31)<<6|g&63,127<h&&(f=h));break;case 3:g=m[o+1];var _=m[o+2];(g&192)==128&&(_&192)==128&&(h=(h&15)<<12|(g&63)<<6|_&63,2047<h&&(55296>h||57343<h)&&(f=h));break;case 4:g=m[o+1],_=m[o+2];var L=m[o+3];(g&192)==128&&(_&192)==128&&(L&192)==128&&(h=(h&15)<<18|(g&63)<<12|(_&63)<<6|L&63,65535<h&&1114112>h&&(f=h))}f===null?(f=65533,x=1):65535<f&&(f-=65536,s.push(f>>>10&1023|55296),f=56320|f&1023),s.push(f),o+=x}if(m=s.length,m<=Ff)s=String.fromCharCode.apply(String,s);else{for(c="",o=0;o<m;)c+=String.fromCharCode.apply(String,s.slice(o,o+=Ff));s=c}return s}function ls(m,o,c){if(m%1!=0||0>m)throw new RangeError("offset is not uint");if(m+o>c)throw new RangeError("Trying to access beyond buffer length")}function hl(m,o,c,s,h,f){if(!pc(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>h||o<f)throw new RangeError('"value" argument is out of bounds');if(c+s>m.length)throw new RangeError("Index out of range")}function va(m,o,c,s){0>o&&(o=65535+o+1);for(var h=0,f=Math.min(m.length-c,2);h<f;++h)m[c+h]=(o&255<<8*(s?h:1-h))>>>8*(s?h:1-h)}function Ho(m,o,c,s){0>o&&(o=4294967295+o+1);for(var h=0,f=Math.min(m.length-c,4);h<f;++h)m[c+h]=o>>>8*(s?h:3-h)&255}function rv(m,o,c,s,h,f){if(c+s>m.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range")}function nv(m,o,c,s,h){return h||rv(m,o,c,4,34028234663852886e22,-34028234663852886e22),kd(m,o,c,s,23,4),c+4}function iv(m,o,c,s,h){return h||rv(m,o,c,8,17976931348623157e292,-17976931348623157e292),kd(m,o,c,s,52,8),c+8}function Kp(m,o){o=o||Infinity;for(var c,s=m.length,h=null,f=[],x=0;x<s;++x){if(c=m.charCodeAt(x),55295<c&&57344>c){if(!h){if(56319<c){-1<(o-=3)&&f.push(239,191,189);continue}else if(x+1===s){-1<(o-=3)&&f.push(239,191,189);continue}h=c;continue}if(56320>c){-1<(o-=3)&&f.push(239,191,189),h=c;continue}c=(h-55296<<10|c-56320)+65536}else h&&-1<(o-=3)&&f.push(239,191,189);if(h=null,128>c){if(0>--o)break;f.push(c)}else if(2048>c){if(0>(o-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(o-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(o-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point")}return f}function Gc(m){for(var o=[],c=0;c<m.length;++c)o.push(m.charCodeAt(c)&255);return o}function Vg(m){if(m=(m.trim?m.trim():m.replace(/^\s+|\s+$/g,"")).replace(Ev,""),2>m.length)m="";else for(;m.length%4!=0;)m+="=";Df||ku();var o=m.length;if(0<o%4)throw Error("Invalid string. Length must be a multiple of 4");var c=m[o-2]==="="?2:m[o-1]==="="?1:0,s=new Ip(3*o/4-c),h=0<c?o-4:o,f=0;for(o=0;o<h;o+=4){var x=Zs[m.charCodeAt(o)]<<18|Zs[m.charCodeAt(o+1)]<<12|Zs[m.charCodeAt(o+2)]<<6|Zs[m.charCodeAt(o+3)];s[f++]=x>>16&255,s[f++]=x>>8&255,s[f++]=x&255}return c===2?(x=Zs[m.charCodeAt(o)]<<2|Zs[m.charCodeAt(o+1)]>>4,s[f++]=x&255):c===1&&(x=Zs[m.charCodeAt(o)]<<10|Zs[m.charCodeAt(o+1)]<<4|Zs[m.charCodeAt(o+2)]>>2,s[f++]=x>>8&255,s[f++]=x&255),s}function Gd(m,o,c,s){for(var h=0;h<s&&!(h+c>=o.length||h>=m.length);++h)o[h+c]=m[h];return h}function Wg(m){return!!m.constructor&&typeof m.constructor.isBuffer=="function"&&m.constructor.isBuffer(m)}function Il(m,o){var c=[];return m.forEach(function(s){c.push(o?-s:s,s)}),c}function jd(m){for(var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,c=[],s=0;s<m-1;s++){var h=2*(s+o);c.push(h,h+1,h+2),c.push(h+2,h+1,h+3)}return c}function Zf(m){return function(o,c,s){return o=c+m,c=s.length-1,s[0<c?0>o?0:o>c?c:o:o<c?c:0<o?0:o]}}function Hu(m){if(!m[0]||!m[0].length)return m;for(var o=m[0].length,c=[],s=0,h=0;h<m.length;h++)for(var f=0;f<o;f++)c[s++]=m[h][f];return c}function Jp(){for(var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],o=[],c=0,s=0;s<m.length;s++){var h=m[s];if(0<s){var f=m[s-1];c+=Math.sqrt(Math.pow(h[0]-f[0],2)+Math.pow(h[1]-f[1],2))}o.push(c)}return{arr:o,total:c}}function Xg(){var m=document.createElement("canvas");m.width=m.height=32;var o=m.getContext("2d");return{canvas:m,ctx:o}}function jc(){var m=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{}).color,o=Xg(),c=o.canvas;return o=o.ctx,o.save(),o.moveTo(0,0),o.lineTo(20,0),o.lineTo(32,16),o.lineTo(20,32),o.lineTo(0,32),o.lineTo(10,16),o.fillStyle=m||"#fff",o.fill(),o.restore(),c}function Go(m,o){return ni.set(m,-o[1],o[0])}function Fo(m,o,c){return ni.sub(m,o,c),ni.normalize(m,m),m}function l0(m){var o,c;this.promise=new m(function(s,h){if(o!==void 0||c!==void 0)throw TypeError("Bad Promise constructor");o=s,c=h}),this.resolve=ed(o),this.reject=ed(c)}function u0(m,o,c){return c=Math.PI/180*(60*c+30),[m.x+o*Math.cos(c),m.y+o*Math.sin(c)]}function ov(m,o,c){for(var s={},h=[],f=m.length,x=o/2/Math.sin(Math.PI/3),g=1.5*x,_=1,L=0;L<f;++L){var F=m[L].geometry.coordinates;c&&(F=c(F));var M=+F[0],E=+F[1];if(!isNaN(M)&&!isNaN(E)){F=Math.round(E/=g);var P=Math.round(M=M/o-(F&1)/2),O=E-F;if(1<3*Math.abs(O)){var B=M-P,X=P+(M<P?-1:1)/2,W=F+(E<F?-1:1);M-=X,E-=W,B*B+O*O>M*M+E*E&&(P=X+(F&1?1:-1)/2,F=W)}O=P+"-"+F,(B=s[O])?(B.count+=m[L].count||1,_=Math.max(_,B.count)):(s[O]={center:{x:(P+(F&1)/2)*o,y:F*g},count:m[L].count||1},h.push(s[O]))}}return h.max=_,h.r=x,h}function av(m,o,c,s){switch(s){case 5122:return new Int16Array(m,o,c);case 5123:return new Uint16Array(m,o,c);case 5124:return new Int32Array(m,o,c);case 5125:return new Uint32Array(m,o,c);case 5126:return new Float32Array(m,o,c);default:return null}}function Vd(m){return av(m.bufferView.data,m.byteOffset,m.count*ci[m.type],m.componentType)}function Yg(m){var o="",c=m.lastIndexOf("/");return c!==-1&&(o=m.substring(0,c+1)),o}function sv(m,o){var c=new XMLHttpRequest;c.overrideMimeType("application/json"),c.open("GET",m,!0),c.onreadystatechange=function(){c.readyState==4&&c.status=="200"&&o(c.responseText,this)},c.send(null)}function gc(m,o){var c=new XMLHttpRequest;c.responseType="arraybuffer",c.open("GET",m,!0),c.onreadystatechange=function(){if(c.readyState==4&&c.status=="200"){var s=c.response;s&&o&&o(s)}},c.send(null)}function lv(m,o,c){var s=new Image;s.crossOrigin="Anonymous",s.src=m,s.onload=function(){c(s,o)}}function uv(m){function o(Gt,Vt){c.uniform1i(Gt,Vt.index),c.activeTexture(c.TEXTURE0+Vt.index),Gt=_e.glTF.textures[Vt.index],c.bindTexture(c.TEXTURE_2D,Gt.texture),c.bindSampler(Vt.index,Gt.sampler?Gt.sampler.sampler:x)}var c=m.gl,s=0,h=[];m=c.canvas;var f=function(Vt,Pn,Mn){for(this.glTFScene=Vt,this.glTF=Pn,this.id=Mn,this.rootTransform=jr.create(),this.nodeMatrix=Array(Pn.nodes.length),Vt=0,Pn=this.nodeMatrix.length;Vt<Pn;Vt++)this.nodeMatrix[Vt]=jr.create()},x=c.createSampler();c.samplerParameteri(x,c.TEXTURE_MIN_FILTER,c.NEAREST_MIPMAP_LINEAR),c.samplerParameteri(x,c.TEXTURE_MAG_FILTER,c.LINEAR),c.samplerParameteri(x,c.TEXTURE_WRAP_S,c.REPEAT),c.samplerParameteri(x,c.TEXTURE_WRAP_T,c.REPEAT),c.bindVertexArray(null),c.bindVertexArray(null);var g={HAS_SKIN:1,SKIN_VEC8:2,HAS_BASECOLORMAP:4,HAS_NORMALMAP:8,HAS_METALROUGHNESSMAP:16,HAS_OCCLUSIONMAP:32,HAS_EMISSIVEMAP:64},_={},L=function(){this.flags=0,this.programObject=null};L.prototype.hasSkin=function(){return this.flags&g.HAS_SKIN},L.prototype.hasBaseColorMap=function(){return this.flags&g.HAS_BASECOLORMAP},L.prototype.hasNormalMap=function(){return this.flags&g.HAS_NORMALMAP},L.prototype.hasMetalRoughnessMap=function(){return this.flags&g.HAS_METALROUGHNESSMAP},L.prototype.hasOcclusionMap=function(){return this.flags&g.HAS_OCCLUSIONMAP},L.prototype.hasEmissiveMap=function(){return this.flags&g.HAS_EMISSIVEMAP},L.prototype.defineMacro=function(Gt){g[Gt]!==void 0&&(this.flags|=g[Gt])},L.prototype.compile=function(){var Gt=_[this.flags];if(Gt)this.programObject=Gt;else{var Vt=Gt="";this.flags&g.HAS_SKIN&&(Gt+=`#define HAS_SKIN
`),this.flags&g.SKIN_VEC8&&(Gt+=`#define SKIN_VEC8
`),this.flags&g.HAS_BASECOLORMAP&&(Vt+=`#define HAS_BASECOLORMAP
`),this.flags&g.HAS_NORMALMAP&&(Vt+=`#define HAS_NORMALMAP
`),this.flags&g.HAS_METALROUGHNESSMAP&&(Vt+=`#define HAS_METALROUGHNESSMAP
`),this.flags&g.HAS_OCCLUSIONMAP&&(Vt+=`#define HAS_OCCLUSIONMAP
`),this.flags&g.HAS_EMISSIVEMAP&&(Vt+=`#define HAS_EMISSIVEMAP
`),Gt=Ks.createProgram(c,`#version 300 es
`+Gt+`#define POSITION_LOCATION 0
#define NORMAL_LOCATION 1
#define TEXCOORD_0_LOCATION 2
#define JOINTS_0_LOCATION 3
#define JOINTS_1_LOCATION 5
#define WEIGHTS_0_LOCATION 4
#define WEIGHTS_1_LOCATION 6
#define TANGENT_LOCATION 7
precision highp float;precision highp int;uniform mat4 u_MVP;uniform mat4 u_MV;uniform mat4 u_MVNormal;
#ifdef HAS_SKIN
uniform JointMatrix{mat4 matrix[65];}u_jointMatrix;
#endif
layout(location=POSITION_LOCATION)in vec3 position;layout(location=NORMAL_LOCATION)in vec3 normal;layout(location=TEXCOORD_0_LOCATION)in vec2 uv;
#ifdef HAS_SKIN
layout(location=JOINTS_0_LOCATION)in vec4 joint0;layout(location=WEIGHTS_0_LOCATION)in vec4 weight0;
#ifdef SKIN_VEC8
layout(location=JOINTS_1_LOCATION)in vec4 joint1;layout(location=WEIGHTS_1_LOCATION)in vec4 weight1;
#endif
#endif
out vec3 v_position;out vec3 v_normal;out vec2 v_uv;void main(){
#ifdef HAS_SKIN
mat4 skinMatrix=weight0.x*u_jointMatrix.matrix[int(joint0.x)]+weight0.y*u_jointMatrix.matrix[int(joint0.y)]+weight0.z*u_jointMatrix.matrix[int(joint0.z)]+weight0.w*u_jointMatrix.matrix[int(joint0.w)];
#ifdef SKIN_VEC8
skinMatrix+=weight1.x*u_jointMatrix.matrix[int(joint1.x)]+weight1.y*u_jointMatrix.matrix[int(joint1.y)]+weight1.z*u_jointMatrix.matrix[int(joint1.z)]+weight1.w*u_jointMatrix.matrix[int(joint1.w)];
#endif
#endif
v_uv=uv;
#ifdef HAS_SKIN
v_normal=normalize((u_MVNormal*transpose(inverse(skinMatrix))*vec4(normal,0)).xyz);vec4 pos=u_MV*skinMatrix*vec4(position,1.0);gl_Position=u_MVP*skinMatrix*vec4(position,1.0);
#else
v_normal=normalize((u_MVNormal*vec4(normal,0)).xyz);vec4 pos=u_MV*vec4(position,1.0);gl_Position=u_MVP*vec4(position,1.0);
#endif
v_position=vec3(pos.xyz)/pos.w;}`,`#version 300 es
`+Vt+`#define FRAG_COLOR_LOCATION 0
precision highp float;precision highp int;uniform sampler2D u_brdfLUT;uniform vec4 u_baseColorFactor;
#ifdef HAS_BASECOLORMAP
uniform sampler2D u_baseColorTexture;
#endif
#ifdef HAS_NORMALMAP
uniform sampler2D u_normalTexture;uniform float u_normalTextureScale;
#endif
#ifdef HAS_EMISSIVEMAP
uniform sampler2D u_emissiveTexture;uniform vec3 u_emissiveFactor;
#endif
#ifdef HAS_METALROUGHNESSMAP
uniform sampler2D u_metallicRoughnessTexture;
#endif
uniform float u_metallicFactor;uniform float u_roughnessFactor;
#ifdef HAS_OCCLUSIONMAP
uniform sampler2D u_occlusionTexture;uniform float u_occlusionStrength;
#endif
in vec3 v_position;in vec3 v_normal;in vec2 v_uv;layout(location=FRAG_COLOR_LOCATION)out vec4 frag_color;struct PBRInfo{float NdotL;float NdotV;float NdotH;float LdotH;float VdotH;float perceptualRoughness;float metalness;vec3 reflectance0;vec3 reflectance90;float alphaRoughness;vec3 diffuseColor;vec3 specularColor;};const float M_PI=3.141592653589793;const float c_MinRoughness=0.04;vec3 getNormal(){vec3 pos_dx=dFdx(v_position);vec3 pos_dy=dFdy(v_position);vec3 tex_dx=dFdx(vec3(v_uv,0.0));vec3 tex_dy=dFdy(vec3(v_uv,0.0));vec3 t=(tex_dy.t*pos_dx-tex_dx.t*pos_dy)/(tex_dx.s*tex_dy.t-tex_dy.s*tex_dx.t);vec3 ng=v_normal;t=normalize(t-ng*dot(ng,t));vec3 b=normalize(cross(ng,t));mat3 tbn=mat3(t,b,ng);
#ifdef HAS_NORMALMAP
vec3 n=texture(u_normalTexture,v_uv).rgb;n=normalize(tbn*((2.0*n-1.0)*vec3(u_normalTextureScale,u_normalTextureScale,1.0)));
#else
vec3 n=tbn[2].xyz;
#endif
return n;}vec3 getIBLContribution(PBRInfo pbrInputs,vec3 n,vec3 reflection){float mipCount=10.0;float lod=(pbrInputs.perceptualRoughness*mipCount);vec3 brdf=texture(u_brdfLUT,vec2(pbrInputs.NdotV,1.0-pbrInputs.perceptualRoughness)).rgb;vec3 diffuseLight=vec3(0.6,0.6,0.6);vec3 specularLight=vec3(0.6,0.6,0.6);vec3 diffuse=diffuseLight*pbrInputs.diffuseColor;vec3 specular=specularLight*(pbrInputs.specularColor*brdf.x+brdf.y);return diffuse+specular;}vec3 diffuse(PBRInfo pbrInputs){return pbrInputs.diffuseColor/M_PI;}vec3 specularReflection(PBRInfo pbrInputs){return pbrInputs.reflectance0+(pbrInputs.reflectance90-pbrInputs.reflectance0)*pow(clamp(1.0-pbrInputs.VdotH,0.0,1.0),5.0);}float geometricOcclusion(PBRInfo pbrInputs){float NdotL=pbrInputs.NdotL;float NdotV=pbrInputs.NdotV;float r=pbrInputs.alphaRoughness;float attenuationL=2.0*NdotL/(NdotL+sqrt(r*r+(1.0-r*r)*(NdotL*NdotL)));float attenuationV=2.0*NdotV/(NdotV+sqrt(r*r+(1.0-r*r)*(NdotV*NdotV)));return attenuationL*attenuationV;}float microfacetDistribution(PBRInfo pbrInputs){float roughnessSq=pbrInputs.alphaRoughness*pbrInputs.alphaRoughness;float f=(pbrInputs.NdotH*roughnessSq-pbrInputs.NdotH)*pbrInputs.NdotH+1.0;return roughnessSq/(M_PI*f*f);}void main(){float perceptualRoughness=u_roughnessFactor;float metallic=u_metallicFactor;
#ifdef HAS_METALROUGHNESSMAP
vec4 mrSample=texture(u_metallicRoughnessTexture,v_uv);perceptualRoughness=mrSample.g*perceptualRoughness;metallic=mrSample.b*metallic;
#endif
perceptualRoughness=clamp(perceptualRoughness,c_MinRoughness,1.0);metallic=clamp(metallic,0.0,1.0);float alphaRoughness=perceptualRoughness*perceptualRoughness;
#ifdef HAS_BASECOLORMAP
vec4 baseColor=texture(u_baseColorTexture,v_uv)*u_baseColorFactor;
#else
vec4 baseColor=u_baseColorFactor;
#endif
vec3 f0=vec3(0.04);vec3 diffuseColor=baseColor.rgb*(vec3(1.0)-f0);diffuseColor*=1.0-metallic;vec3 specularColor=mix(f0,baseColor.rgb,metallic);float reflectance=max(max(specularColor.r,specularColor.g),specularColor.b);float reflectance90=clamp(reflectance*25.0,0.0,1.0);vec3 specularEnvironmentR0=specularColor.rgb;vec3 specularEnvironmentR90=vec3(1.0,1.0,1.0)*reflectance90;vec3 n=getNormal();vec3 v=normalize(-v_position);vec3 l=normalize(vec3(1.0,1.0,1.0));vec3 h=normalize(l+v);vec3 reflection=-normalize(reflect(v,n));float NdotL=clamp(dot(n,l),0.001,1.0);float NdotV=abs(dot(n,v))+0.001;float NdotH=clamp(dot(n,h),0.0,1.0);float LdotH=clamp(dot(l,h),0.0,1.0);float VdotH=clamp(dot(v,h),0.0,1.0);PBRInfo pbrInputs=PBRInfo(NdotL,NdotV,NdotH,LdotH,VdotH,perceptualRoughness,metallic,specularEnvironmentR0,specularEnvironmentR90,alphaRoughness,diffuseColor,specularColor);vec3 F=specularReflection(pbrInputs);float G=geometricOcclusion(pbrInputs);float D=microfacetDistribution(pbrInputs);vec3 diffuseContrib=(1.0-F)*diffuse(pbrInputs);vec3 specContrib=max(vec3(0.0),F*G*D/(4.0*NdotL*NdotV));vec3 color=NdotL*(diffuseContrib+specContrib);color+=getIBLContribution(pbrInputs,n,reflection);
#ifdef HAS_OCCLUSIONMAP
float ao=texture(u_occlusionTexture,v_uv).r;color=mix(color,color*ao,u_occlusionStrength);
#endif
#ifdef HAS_EMISSIVEMAP
vec3 emissive=texture(u_emissiveTexture,v_uv).rgb*u_emissiveFactor;color+=emissive;
#endif
frag_color=vec4(color,baseColor.a);}`),this.programObject={program:Gt,uniformLocations:{},uniformBlockIndices:{}},this.flags&g.HAS_SKIN&&(this.programObject.uniformBlockIndices.JointMatrix=c.getUniformBlockIndex(Gt,"JointMatrix")),Vt=this.programObject.uniformLocations,Vt.MVP=c.getUniformLocation(Gt,"u_MVP"),Vt.MVNormal=c.getUniformLocation(Gt,"u_MVNormal"),Vt.MV=c.getUniformLocation(Gt,"u_MV"),Vt.baseColorFactor=c.getUniformLocation(Gt,"u_baseColorFactor"),Vt.metallicFactor=c.getUniformLocation(Gt,"u_metallicFactor"),Vt.roughnessFactor=c.getUniformLocation(Gt,"u_roughnessFactor"),this.flags&g.HAS_BASECOLORMAP&&(Vt.baseColorTexture=c.getUniformLocation(Gt,"u_baseColorTexture")),this.flags&g.HAS_NORMALMAP&&(Vt.normalTexture=c.getUniformLocation(Gt,"u_normalTexture"),Vt.normalTextureScale=c.getUniformLocation(Gt,"u_normalTextureScale")),this.flags&g.HAS_METALROUGHNESSMAP&&(Vt.metallicRoughnessTexture=c.getUniformLocation(Gt,"u_metallicRoughnessTexture")),this.flags&g.HAS_OCCLUSIONMAP&&(Vt.occlusionTexture=c.getUniformLocation(Gt,"u_occlusionTexture"),Vt.occlusionStrength=c.getUniformLocation(Gt,"u_occlusionStrength")),this.flags&g.HAS_EMISSIVEMAP&&(Vt.emissiveTexture=c.getUniformLocation(Gt,"u_emissiveTexture"),Vt.emissiveFactor=c.getUniformLocation(Gt,"u_emissiveFactor")),c.useProgram(null),_[this.flags]=this.programObject}};var F=1,M=In.create(),E=jr.create();Xa.create();var P=[];c.enable(c.CULL_FACE),c.cullFace(c.BACK),c.frontFace(c.CCW);var O=!0;c.enable(c.DEPTH_TEST),c.depthFunc(c.LEQUAL);var B=B||{},X=null;In.create();var W=jr.create();jr.perspective(W,.785,m.width/m.height,.01,100),jr.create();var U=jr.create(),q=jr.create(),he=jr.create();jr.create();var ge,_e,Se=[1,1,1,1],$e=B.drawPrimitive=function(Gt,Vt){if(zr){q=U=zr.matrix,jr.invert(he,U),jr.transpose(he,he),Vt=Se;var Pn=Gt.shader,Mn=Gt.material;if(Mn!==null){var Rn=Mn.pbrMetallicRoughness;Vt=Rn.baseColorFactor,Gt.material.doubleSided===O&&((O=!Gt.material.doubleSided)?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE))}X!=Gt.shader.programObject&&(X=Gt.shader.programObject,c.useProgram(X.program)),Mn&&(Pn.hasBaseColorMap()&&o(X.uniformLocations.baseColorTexture,Rn.baseColorTexture),Pn.hasNormalMap()&&(o(X.uniformLocations.normalTexture,Mn.normalTexture),c.uniform1f(X.uniformLocations.normalTextureScale,Mn.normalTexture.scale)),Pn.hasMetalRoughnessMap()&&o(X.uniformLocations.metallicRoughnessTexture,Rn.metallicRoughnessTexture),c.uniform1f(X.uniformLocations.metallicFactor,Rn.metallicFactor),c.uniform1f(X.uniformLocations.roughnessFactor,Rn.roughnessFactor),Pn.hasOcclusionMap()&&(o(X.uniformLocations.occlusionTexture,Mn.occlusionTexture),c.uniform1f(X.uniformLocations.occlusionStrength,Mn.occlusionTexture.strength)),Pn.hasEmissiveMap()&&(o(X.uniformLocations.emissiveTexture,Mn.emissiveTexture),c.uniform3fv(X.uniformLocations.emissiveFactor,Mn.emissiveFactor))),Pn.hasSkin()&&c.uniformBlockBinding(X.program,X.uniformBlockIndices.JointMatrix,ge),c.activeTexture(c.TEXTURE0+29),c.bindTexture(c.TEXTURE_2D,null),c.uniform4fv(X.uniformLocations.baseColorFactor,Vt),c.uniformMatrix4fv(X.uniformLocations.MV,!1,U),c.uniformMatrix4fv(X.uniformLocations.MVP,!1,q),c.uniformMatrix4fv(X.uniformLocations.MVNormal,!1,he),c.bindVertexArray(Gt.vertexArray),Gt.indices!==null?c.drawElements(Gt.mode,Gt.indicesLength,Gt.indicesComponentType,Gt.indicesOffset):c.drawArrays(Gt.mode,Gt.drawArraysOffset,Gt.drawArraysCount),c.bindVertexArray(null)}},Be=jr.create(),lt=jr.create(),kt=B.drawNode=function(Gt,Vt,Pn,Mn){if(Vt=Pn[Vt],Mn!==void 0?jr.mul(Vt,Mn,Gt.matrix):jr.copy(Vt,Gt.matrix),Gt.skin!==null){var Rn=Gt.skin;ge=Rn.uniformBlockID;var gi=Gt.skin.joints;for(jr.invert(lt,Vt),Mn=0,Xo=gi.length;Mn<Xo;Mn++){var os=gi[Mn];jr.mul(Be,Pn[os.nodeID],Rn.inverseBindMatrix[Mn]),jr.mul(Be,lt,Be),Rn.jointMatrixUnidormBufferData.set(Be,16*Mn)}c.bindBuffer(c.UNIFORM_BUFFER,Rn.jointMatrixUniformBuffer),c.bufferSubData(c.UNIFORM_BUFFER,0,Rn.jointMatrixUnidormBufferData,0,Rn.jointMatrixUnidormBufferData.length)}var Xo;if(Gt.mesh!==null)for(Rn=Gt.mesh,Mn=0,Xo=Rn.primitives.length;Mn<Xo;Mn++)$e(Rn.primitives[Mn],Vt);for(Gt.skin!==null&&c.bindBuffer(c.UNIFORM_BUFFER,null),Mn=0,Xo=Gt.children.length;Mn<Xo;Mn++)kt(Gt.children[Mn],Gt.children[Mn].nodeID,Pn,Vt)},cr=B.drawScene=function(Gt){var Vt=Gt.glTF;if(Vt.animations){var Pn=Vt.animations[s],Mn,Rn=0;for(Mn=Pn.samplers.length;Rn<Mn;Rn++)Pn.samplers[Rn].getValue(Ar);for(Rn=0,Mn=Pn.channels.length;Rn<Mn;Rn++){var gi=Pn.channels[Rn],os=gi.sampler,Xo=Vt.nodes[gi.target.nodeID];switch(gi.target.path){case"rotation":Qo.copy(Xo.rotation,os.curValue);break;case"translation":In.copy(Xo.translation,os.curValue);break;case"scale":In.copy(Xo.scale,os.curValue)}Xo.updateMatrixFromTRS()}}for(Pn=0,Vt=Gt.glTFScene.nodes.length;Pn<Vt;Pn++)kt(Gt.glTFScene.nodes[Pn],Gt.glTFScene.nodes[Pn].nodeID,Gt.nodeMatrix,Gt.rootTransform)},Ur=performance.now(),Ar=0,zr;return{setupScene:function(Vt,Pn){function Mn(Tm,Pd){if(Tm!==void 0){var Rc=Tm.bufferView;return Rc.target===null?(c.bindBuffer(c.ARRAY_BUFFER,Rc.buffer),c.bufferData(c.ARRAY_BUFFER,Rc.data,c.STATIC_DRAW)):c.bindBuffer(Rc.target,Rc.buffer),Tm.prepareVertexAttrib(Pd,c),!0}return!1}var Rn;if(Vt.animations){var gi=0;for(Rn=Vt.animations.length;gi<Rn;gi++)h.add(Vt.animations[gi].name||gi)}s=0,gi=Vt.scenes[Vt.defaultScene],In.fromValues(1.2*gi.boundingBox.transform[0],0,0),In.create(),Pn?Pn=P[Pn.id]=new f(gi,Vt,Pn.id):(Pn=new f(gi,Vt,P.length),P.push(Pn)),P.length===1&&(jr.identity(E),F=1/Math.max(gi.boundingBox.transform[0],Math.max(gi.boundingBox.transform[5],gi.boundingBox.transform[10])),jr.getTranslation(M,gi.boundingBox.transform),In.scale(M,M,-1),M[0]+=-.5*gi.boundingBox.transform[0],M[1]+=-.5*gi.boundingBox.transform[5],M[2]+=-.5*gi.boundingBox.transform[10],F*=.5,E[0]=F,E[5]=F,E[10]=F,jr.translate(E,E,M),In.set(M,0,0,-1.5),F=1);var os;for(gi=0,Rn=Vt.bufferViews.length;gi<Rn;gi++){var Xo=Vt.bufferViews[gi];Xo.createBuffer(c),Xo.bindData(c)}if(Vt.textures)for(gi=0,Rn=Vt.textures.length;gi<Rn;gi++){var $o=Vt.textures[gi];$o.createTexture(c)}if(Vt.samplers)for(gi=0,Rn=Vt.samplers.length;gi<Rn;gi++)$o=Vt.samplers[gi],$o.createSampler(c);if(Vt.skins)for(gi=0,Rn=Vt.skins.length;gi<Rn;gi++)$o=Vt.skins[gi],$o.jointMatrixUniformBuffer=c.createBuffer(),c.bindBufferBase(c.UNIFORM_BUFFER,$o.uniformBlockID,$o.jointMatrixUniformBuffer),c.bindBuffer(c.UNIFORM_BUFFER,$o.jointMatrixUniformBuffer),c.bufferData(c.UNIFORM_BUFFER,$o.jointMatrixUnidormBufferData,c.DYNAMIC_DRAW),c.bufferSubData(c.UNIFORM_BUFFER,0,$o.jointMatrixUnidormBufferData),c.bindBuffer(c.UNIFORM_BUFFER,null);var Lv=0;for(os=Vt.meshes.length;Lv<os;Lv++)for($o=Vt.meshes[Lv],gi=0,Rn=$o.primitives.length;gi<Rn;++gi){var Ra=$o.primitives[gi];Ra.shader=new L,Ra.vertexArray=Xo=c.createVertexArray(),c.bindVertexArray(Xo),Mn(Ra.attributes.POSITION,0),Mn(Ra.attributes.NORMAL,1),Mn(Ra.attributes.TEXCOORD_0,2),Mn(Ra.attributes.JOINTS_0,3)&&Mn(Ra.attributes.WEIGHTS_0,4)&&Ra.shader.defineMacro("HAS_SKIN"),Mn(Ra.attributes.JOINTS_1,5)&&Mn(Ra.attributes.WEIGHTS_1,6)&&Ra.shader.defineMacro("SKIN_VEC8"),Ra.indices!==null&&(Xo=Vt.accessors[Ra.indices],Xo=Xo.bufferView,Xo.target===null?(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,Xo.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,Xo.data,c.STATIC_DRAW)):c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,Xo.buffer)),c.bindVertexArray(null),c.bindBuffer(c.ARRAY_BUFFER,null),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null),(Xo=Ra.material)&&(Xo.pbrMetallicRoughness.baseColorTexture&&Ra.shader.defineMacro("HAS_BASECOLORMAP"),Xo.pbrMetallicRoughness.metallicRoughnessTexture&&Ra.shader.defineMacro("HAS_METALROUGHNESSMAP"),Xo.normalTexture&&Ra.shader.defineMacro("HAS_NORMALMAP"),Xo.occlusionTexture&&Ra.shader.defineMacro("HAS_OCCLUSIONMAP"),Xo.emissiveTexture&&Ra.shader.defineMacro("HAS_EMISSIVEMAP")),Ra.shader.compile()}return Pn},render:B.render=function(Gt){zr=Gt,Gt=new Date().getTime();var Vt,Pn=0;for(Vt=P.length;Pn<Vt;Pn++)_e=P[Pn],cr(P[Pn]);X=null,Ar=.001*(Gt-Ur)}}}function Da(m){this.options=m=m||{},m.colors=m.colors||["rgba(0,192,73,0.99609375)","rgba(242,48,48,0.99609375)","rgba(255,159,25,0.99609375)"];var o=m.colors;this.drawTogether=!0,this.parseColors(o),this.tileSize=256,this.ratio=window.devicePixelRatio,this.cache={},m.getTileUrl&&(this.getTileUrl=m.getTileUrl),this._loadCount={}}function ka(m){var o=m/2,c=m+o,s=new Ko(2*c,2*c),h=s.getContext("2d");return h.shadowBlur=o,h.shadowColor="black",h.shadowOffsetX=h.shadowOffsetY=1e4,h.beginPath(),h.arc(c-1e4,c-1e4,m,0,2*Math.PI,!0),h.closePath(),h.fill(),s}var Kf=window.BMapGL||window.BMap;Kf&&Kf.Overlay&&(ye.prototype=new Kf.Overlay),ye.prototype.initialize=function(m){this._map=m;var o=this.canvas=document.createElement("canvas"),c=this.ctx=this.canvas.getContext("2d");o.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";",this.adjustSize(),this.adjustRatio(c),m.getContainer().appendChild(o);var s=this;return m.addEventListener("resize",function(){s.adjustSize(),s._draw()}),this.canvas},ye.prototype.adjustSize=function(){var m=this._map.getSize(),o=this.canvas;o.width=m.width,o.height=m.height,o.style.width=o.width+"px",o.style.height=o.height+"px"},ye.prototype.adjustRatio=function(m){var o=(window.devicePixelRatio||1)/(m.backingStorePixelRatio||m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1),c=m.canvas.width,s=m.canvas.height;m.canvas.width=c*o,m.canvas.height=s*o,m.canvas.style.width=c+"px",m.canvas.style.height=s+"px",m.scale(o,o)},ye.prototype.draw=function(){this._draw.apply(this,arguments)},ye.prototype._draw=function(){this.dispatchEvent("draw"),this.options.update&&this.options.update.apply(this,arguments)},ye.prototype.getContainer=function(){return this.canvas},ye.prototype.show=function(){this.canvas||this._map.addOverlay(this),this.canvas.style.display="block"},ye.prototype.hide=function(){this.canvas.style.display="none"},ye.prototype.setZIndex=function(m){this.canvas.style.zIndex=m},ye.prototype.getZIndex=function(){return this.zIndex};var Jf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Wt!="undefined"?Wt:typeof self!="undefined"?self:{},c0=Ye(function(m,o){o.__esModule=!0,o.default=function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}}),qr=At(c0),ql=function(o){if(o==null)throw TypeError("Can't call method on  "+o);return o},Zg={}.hasOwnProperty,ta=function(o,c){return Zg.call(o,c)},Kg={}.toString,mc=function(o){return Kg.call(o).slice(8,-1)},qf=Object("z").propertyIsEnumerable(0)?Object:function(m){return mc(m)=="String"?m.split(""):Object(m)},vc=function(o){return qf(ql(o))},Wd=Math.ceil,qp=Math.floor,qh=function(o){return isNaN(o=+o)?0:(0<o?qp:Wd)(o)},Vc=Math.min,Xd=function(o){return 0<o?Vc(qh(o),9007199254740991):0},cv=Math.max,h0=Math.min,ra=Ye(function(m){m=m.exports={version:"2.6.5"},typeof __e=="number"&&(__e=m)}),Mi=Ye(function(m){m=m.exports=typeof window!="undefined"&&Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")(),typeof __g=="number"&&(__g=m)}),Qf=Ye(function(m){var o=Mi["__core-js_shared__"]||(Mi["__core-js_shared__"]={});(m.exports=function(c,s){return o[c]||(o[c]=s!==void 0?s:{})})("versions",[]).push({version:ra.version,mode:"pure",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),hv=0,f0=Math.random(),Qp=function(o){return"Symbol(".concat(o===void 0?"":o,")_",(++hv+f0).toString(36))},fv=Qf("keys"),Yd=function(o){return fv[o]||(fv[o]=Qp(o))},d0=function(m){return function(o,c,s){o=vc(o);var h=Xd(o.length);if(s=qh(s),s=0>s?cv(s+h,0):h0(s,h),m&&c!=c){for(;h>s;)if(c=o[s++],c!=c)return!0}else for(;h>s;s++)if((m||s in o)&&o[s]===c)return m||s||0;return!m&&-1}}(!1),Qh=Yd("IE_PROTO"),du=function(o,c){o=vc(o);var s=0,h=[],f;for(f in o)f!=Qh&&ta(o,f)&&h.push(f);for(;c.length>s;)ta(o,f=c[s++])&&(~d0(h,f)||h.push(f));return h},$f="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),$h=Object.keys||function(m){return du(m,$f)},ed=function(o){if(typeof o!="function")throw TypeError(o+" is not a function!");return o},Bs=function(o,c,s){if(ed(o),c===void 0)return o;switch(s){case 1:return function(h){return o.call(c,h)};case 2:return function(h,f){return o.call(c,h,f)};case 3:return function(h,f,x){return o.call(c,h,f,x)}}return function(){return o.apply(c,arguments)}},zs=function(o){return typeof o=="object"?o!==null:typeof o=="function"},Ha=function(o){if(!zs(o))throw TypeError(o+" is not an object!");return o},yc=function(o){try{return!!o()}catch(c){return!0}},so=!yc(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),jo=Mi.document,Zd=zs(jo)&&zs(jo.createElement),$p=!so&&!yc(function(){return Object.defineProperty(Zd?jo.createElement("div"):{},"a",{get:function(){return 7}}).a!=7}),fl=function(o,c){if(!zs(o))return o;var s,h;if(c&&typeof(s=o.toString)=="function"&&!zs(h=s.call(o))||typeof(s=o.valueOf)=="function"&&!zs(h=s.call(o))||!c&&typeof(s=o.toString)=="function"&&!zs(h=s.call(o)))return h;throw TypeError("Can't convert object to primitive value")},Gu=Object.defineProperty,Us={f:so?Object.defineProperty:function(m,o,c){if(Ha(m),o=fl(o,!0),Ha(c),$p)try{return Gu(m,o,c)}catch(s){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(m[o]=c.value),m}},El=function(o,c){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:c}},pu=so?function(m,o,c){return Us.f(m,o,El(1,c))}:function(m,o,c){return m[o]=c,m},gu=function m(o,c,s){var h=o&m.F,f=o&m.G,x=o&m.S,g=o&m.P,_=o&m.B,L=o&m.W,F=f?ra:ra[c]||(ra[c]={}),M=F.prototype;x=f?Mi:x?Mi[c]:(Mi[c]||{}).prototype;var E;f&&(s=c);for(E in s)if(c=!h&&x&&x[E]!==void 0,!c||!ta(F,E)){var P=c?x[E]:s[E];F[E]=f&&typeof x[E]!="function"?s[E]:_&&c?Bs(P,Mi):L&&x[E]==P?function(O){var B=function(W,U,q){if(this instanceof O){switch(arguments.length){case 0:return new O;case 1:return new O(W);case 2:return new O(W,U)}return new O(W,U,q)}return O.apply(this,arguments)};return B.prototype=O.prototype,B}(P):g&&typeof P=="function"?Bs(Function.call,P):P,g&&((F.virtual||(F.virtual={}))[E]=P,o&m.R&&M&&!M[E]&&pu(M,E,P))}};gu.F=1,gu.G=2,gu.S=4,gu.P=8,gu.B=16,gu.W=32,gu.U=64,gu.R=128;var Xr=gu,Wc=function(o,c){var s=(ra.Object||{})[o]||Object[o],h={};h[o]=c(s),Xr(Xr.S+Xr.F*yc(function(){s(1)}),"Object",h)};Wc("keys",function(){return function(m){return $h(Object(ql(m)))}});var Xc=ra.Object.keys,ef=Ye(function(m){m.exports={default:Xc,__esModule:!0}}),Fa=At(ef),Yi=Object.getOwnPropertySymbols,ks={}.propertyIsEnumerable,da=Object.assign,Kd=!da||yc(function(){var m={},o={},c=Symbol();return m[c]=7,"abcdefghijklmnopqrst".split("").forEach(function(s){o[s]=s}),da({},m)[c]!=7||Object.keys(da({},o)).join("")!="abcdefghijklmnopqrst"})?function(m,o){for(var c=Object(ql(m)),s=arguments.length,h=1,f=Yi,x=ks;s>h;)for(var g=qf(arguments[h++]),_=f?$h(g).concat(f(g)):$h(g),L=_.length,F=0,M;L>F;)x.call(g,M=_[F++])&&(c[M]=g[M]);return c}:da;Xr(Xr.S+Xr.F,"Object",{assign:Kd});var mu=ra.Object.assign,Mh=Ye(function(m){m.exports={default:mu,__esModule:!0}}),vi=At(Mh),Ps=Yd("IE_PROTO"),Jd=Object.prototype,Ma=Object.getPrototypeOf||function(m){return m=Object(ql(m)),ta(m,Ps)?m[Ps]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?Jd:null};Wc("getPrototypeOf",function(){return function(m){return Ma(Object(ql(m)))}});var td=ra.Object.getPrototypeOf,xc=Ye(function(m){m.exports={default:td,__esModule:!0}}),nn=At(xc);Xr(Xr.S+Xr.F*!so,"Object",{defineProperty:Us.f});var Sh=ra.Object,rd=function(o,c,s){return Sh.defineProperty(o,c,s)},Ci=Ye(function(m){m.exports={default:rd,__esModule:!0}}),Jo=At(Ci),Yc=Ye(function(m,o){o.__esModule=!0;var c=Ci&&Ci.__esModule?Ci:{default:Ci};o.default=function(){function s(h,f){for(var x=0;x<f.length;x++){var g=f[x];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),(0,c.default)(h,g.key,g)}}return function(h,f,x){return f&&s(h.prototype,f),x&&s(h,x),h}}()}),on=At(Yc),Rs={},nd=so?Object.defineProperties:function(m,o){Ha(m);for(var c=$h(o),s=c.length,h=0,f;s>h;)Us.f(m,f=c[h++],o[f]);return m},id=Mi.document,od=id&&id.documentElement,tf=Yd("IE_PROTO"),Zc=function(){},bl=function(){var o=Zd?jo.createElement("iframe"):{},c=$f.length;for(o.style.display="none",od.appendChild(o),o.src="javascript:",o=o.contentWindow.document,o.open(),o.write("<script>document.F=Object</script>"),o.close(),bl=o.F;c--;)delete bl.prototype[$f[c]];return bl()},vu=Object.create||function(m,o){if(m!==null){Zc.prototype=Ha(m);var c=new Zc;Zc.prototype=null,c[tf]=m}else c=bl();return o===void 0?c:nd(c,o)},Ea=Ye(function(m){var o=Qf("wks"),c=Mi.Symbol,s=typeof c=="function";(m.exports=function(h){return o[h]||(o[h]=s&&c[h]||(s?c:Qp)("Symbol."+h))}).store=o}),qd=Us.f,Ac=Ea("toStringTag"),Cc=function(o,c,s){o&&!ta(o=s?o:o.prototype,Ac)&&qd(o,Ac,{configurable:!0,value:c})},wc={};pu(wc,Ea("iterator"),function(){return this});var Qd=function(o,c,s){o.prototype=vu(wc,{next:El(1,s)}),Cc(o,c+" Iterator")},$d=Ea("iterator"),rf=!([].keys&&"next"in[].keys()),Jg=function(){return this},ep=function(o,c,s,h,f,x,g){Qd(s,c,h),h=function(q){return!rf&&q in M?M[q]:function(){return new s(this,q)}};var _=c+" Iterator",L=f=="values",F=!1,M=o.prototype,E=M[$d]||M["@@iterator"]||f&&M[f],P=E||h(f),O=f?L?h("entries"):P:void 0,B=c=="Array"&&M.entries||E,X;if(B&&(o=Ma(B.call(new o)),o!==Object.prototype&&o.next&&Cc(o,_,!0)),L&&E&&E.name!=="values"&&(F=!0,P=function(){return E.call(this)}),g&&(rf||F||!M[$d])&&pu(M,$d,P),Rs[c]=P,Rs[_]=Jg,f){var W={values:L?P:h("values"),keys:x?P:h("keys"),entries:O};if(g)for(X in W)X in M||pu(M,X,W[X]);else Xr(Xr.P+Xr.F*(rf||F),c,W)}return W},Ql=function(m){return function(o,c){o=String(ql(o)),c=qh(c);var s=o.length,h;if(0>c||c>=s)return m?"":void 0;var f=o.charCodeAt(c);return 55296>f||56319<f||c+1===s||56320>(h=o.charCodeAt(c+1))||57343<h?m?o.charAt(c):f:m?o.slice(c,c+2):(f-55296<<10)+(h-56320)+65536}}(!0);ep(String,"String",function(m){this._t=String(m),this._i=0},function(){var m=this._t,o=this._i;return o>=m.length?{value:void 0,done:!0}:(m=Ql(m,o),this._i+=m.length,{value:m,done:!1})});var dl=function(o,c){return{value:c,done:!!o}};ep(Array,"Array",function(m,o){this._t=vc(m),this._i=0,this._k=o},function(){var m=this._t,o=this._k,c=this._i++;return!m||c>=m.length?(this._t=void 0,dl(1)):o=="keys"?dl(0,c):o=="values"?dl(0,m[c]):dl(0,[c,m[c]])},"values"),Rs.Arguments=Rs.Array;for(var aa=Ea("toStringTag"),nf="CSSRuleList CSSStyleDeclaration CSSValueList ClientRectList DOMRectList DOMStringList DOMTokenList DataTransferItemList FileList HTMLAllCollection HTMLCollection HTMLFormElement HTMLSelectElement MediaList MimeTypeArray NamedNodeMap NodeList PaintRequestList Plugin PluginArray SVGLengthList SVGNumberList SVGPathSegList SVGPointList SVGStringList SVGTransformList SourceBufferList StyleSheetList TextTrackCueList TextTrackList TouchList".split(" "),tp=0;tp<nf.length;tp++){var ad=nf[tp],rp=Mi[ad],of=rp&&rp.prototype;of&&!of[aa]&&pu(of,aa,ad),Rs[ad]=Rs.Array}var sd={f:Ea},dv=sd.f("iterator"),pl=Ye(function(m){m.exports={default:dv,__esModule:!0}});At(pl);var ld=Ye(function(m){var o=Qp("meta"),c=Us.f,s=0,h=Object.isExtensible||function(){return!0},f=!yc(function(){return h(Object.preventExtensions({}))}),x=function(L){c(L,o,{value:{i:"O"+ ++s,w:{}}})},g=m.exports={KEY:o,NEED:!1,fastKey:function(L,F){if(!zs(L))return typeof L=="symbol"?L:(typeof L=="string"?"S":"P")+L;if(!ta(L,o)){if(!h(L))return"F";if(!F)return"E";x(L)}return L[o].i},getWeak:function(L,F){if(!ta(L,o)){if(!h(L))return!0;if(!F)return!1;x(L)}return L[o].w},onFreeze:function(L){return f&&g.NEED&&h(L)&&!ta(L,o)&&x(L),L}}}),pv=Us.f,ud=function(o){var c=ra.Symbol||(ra.Symbol={});o.charAt(0)=="_"||o in c||pv(c,o,{value:sd.f(o)})},ju=Array.isArray||function(m){return mc(m)=="Array"},Hs=$f.concat("length","prototype"),af=Object.getOwnPropertyNames||function(m){return du(m,Hs)},np=af,sf={}.toString,cd=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],yu=function(o){if(cd&&sf.call(o)=="[object Window]")try{var c=np(o)}catch(s){c=cd.slice()}else c=np(vc(o));return c},gl=Object.getOwnPropertyDescriptor,xu={f:so?gl:function(m,o){if(m=vc(m),o=fl(o,!0),$p)try{return gl(m,o)}catch(c){}if(ta(m,o))return El(!ks.call(m,o),m[o])}},ip=ld.KEY,hd=xu.f,Au=Us.f,lf=yu,Qs=Mi.Symbol,_c=Mi.JSON,dt=_c&&_c.stringify,zt=Ea("_hidden"),Nt=Ea("toPrimitive"),un={}.propertyIsEnumerable,Kn=Qf("symbol-registry"),Ri=Qf("symbols"),lo=Qf("op-symbols"),wi=Object.prototype,Sa=typeof Qs=="function",Kc=Mi.QObject,Ga=!Kc||!Kc.prototype||!Kc.prototype.findChild,Vu=so&&yc(function(){return vu(Au({},"a",{get:function(){return Au(this,"a",{value:7}).a}})).a!=7})?function(m,o,c){var s=hd(wi,o);s&&delete wi[o],Au(m,o,c),s&&m!==wi&&Au(wi,o,s)}:Au,uf=function(o){var c=Ri[o]=vu(Qs.prototype);return c._k=o,c},Gs=Sa&&typeof Qs.iterator=="symbol"?function(m){return typeof m=="symbol"}:function(m){return m instanceof Qs},js=function m(o,c,s){return o===wi&&m(lo,c,s),Ha(o),c=fl(c,!0),Ha(s),ta(Ri,c)?(s.enumerable?(ta(o,zt)&&o[zt][c]&&(o[zt][c]=!1),s=vu(s,{enumerable:El(0,!1)})):(ta(o,zt)||Au(o,zt,El(1,{})),o[zt][c]=!0),Vu(o,c,s)):Au(o,c,s)},Wu=function(o,c){Ha(o);var s=c=vc(c),h=$h(s),f=Yi;if(f){f=f(s);for(var x=ks,g=0,_;f.length>g;)x.call(s,_=f[g++])&&h.push(_)}s=0,_=h.length;for(var L;_>s;)js(o,L=h[s++],c[L]);return o},Ni=function(o){var c=un.call(this,o=fl(o,!0));return this===wi&&ta(Ri,o)&&!ta(lo,o)?!1:c||!ta(this,o)||!ta(Ri,o)||ta(this,zt)&&this[zt][o]?c:!0},eg=function(o,c){if(o=vc(o),c=fl(c,!0),o!==wi||!ta(Ri,c)||ta(lo,c)){var s=hd(o,c);return!s||!ta(Ri,c)||ta(o,zt)&&o[zt][c]||(s.enumerable=!0),s}},Th=function(o){o=lf(vc(o));for(var c=[],s=0,h;o.length>s;)ta(Ri,h=o[s++])||h==zt||h==ip||c.push(h);return c},cf=function(o){var c=o===wi;o=lf(c?lo:vc(o));for(var s=[],h=0,f;o.length>h;)ta(Ri,f=o[h++])&&(c?ta(wi,f):1)&&s.push(Ri[f]);return s};Sa||(Qs=function(){if(this instanceof Qs)throw TypeError("Symbol is not a constructor!");var o=Qp(0<arguments.length?arguments[0]:void 0),c=function s(h){this===wi&&s.call(lo,h),ta(this,zt)&&ta(this[zt],o)&&(this[zt][o]=!1),Vu(this,o,El(1,h))};return so&&Ga&&Vu(wi,o,{configurable:!0,set:c}),uf(o)},pu(Qs.prototype,"toString",function(){return this._k}),xu.f=eg,Us.f=js,af=yu=Th,ks=Ni,Yi=cf,sd.f=function(m){return uf(Ea(m))}),Xr(Xr.G+Xr.W+Xr.F*!Sa,{Symbol:Qs});for(var Vs="hasInstance isConcatSpreadable iterator match replace search species split toPrimitive toStringTag unscopables".split(" "),Xu=0;Vs.length>Xu;)Ea(Vs[Xu++]);for(var op=$h(Ea.store),Mc=0;op.length>Mc;)ud(op[Mc++]);Xr(Xr.S+Xr.F*!Sa,"Symbol",{for:function(o){return ta(Kn,o+="")?Kn[o]:Kn[o]=Qs(o)},keyFor:function(o){if(!Gs(o))throw TypeError(o+" is not a symbol!");for(var c in Kn)if(Kn[c]===o)return c},useSetter:function(){Ga=!0},useSimple:function(){Ga=!1}}),Xr(Xr.S+Xr.F*!Sa,"Object",{create:function(o,c){return c===void 0?vu(o):Wu(vu(o),c)},defineProperty:js,defineProperties:Wu,getOwnPropertyDescriptor:eg,getOwnPropertyNames:Th,getOwnPropertySymbols:cf}),_c&&Xr(Xr.S+Xr.F*(!Sa||yc(function(){var m=Qs();return dt([m])!="[null]"||dt({a:m})!="{}"||dt(Object(m))!="{}"})),"JSON",{stringify:function(o){for(var c=[o],s=1,h;arguments.length>s;)c.push(arguments[s++]);if(h=s=c[1],(zs(s)||o!==void 0)&&!Gs(o))return ju(s)||(s=function(x,g){if(typeof h=="function"&&(g=h.call(this,x,g)),!Gs(g))return g}),c[1]=s,dt.apply(_c,c)}}),Qs.prototype[Nt]||pu(Qs.prototype,Nt,Qs.prototype.valueOf),Cc(Qs,"Symbol"),Cc(Math,"Math",!0),Cc(Mi.JSON,"JSON",!0),ud("asyncIterator"),ud("observable");var Sc=ra.Symbol,$l=Ye(function(m){m.exports={default:Sc,__esModule:!0}}),hf=At($l),Ll=Ye(function(m,o){o.__esModule=!0,m=pl&&pl.__esModule?pl:{default:pl};var c=$l&&$l.__esModule?$l:{default:$l},s=typeof c.default=="function"&&typeof m.default=="symbol"?function(h){return typeof h}:function(h){return h&&typeof c.default=="function"&&h.constructor===c.default&&h!==c.default.prototype?"symbol":typeof h};o.default=typeof c.default=="function"&&s(m.default)==="symbol"?function(h){return typeof h=="undefined"?"undefined":s(h)}:function(h){return h&&typeof c.default=="function"&&h.constructor===c.default&&h!==c.default.prototype?"symbol":typeof h=="undefined"?"undefined":s(h)}}),Ta=At(Ll),qg=Ye(function(m,o){o.__esModule=!0;var c=Ll&&Ll.__esModule?Ll:{default:Ll};o.default=function(s,h){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||(typeof h=="undefined"?"undefined":(0,c.default)(h))!=="object"&&typeof h!="function"?s:h}}),Fn=At(qg),Qg=Object.setPrototypeOf||("__proto__"in{}?function(m,o,c){try{c=Bs(Function.call,xu.f(Object.prototype,"__proto__").set,2),c(m,[]),o=!(m instanceof Array)}catch(s){o=!0}return function(s,h){if(Ha(s),!zs(h)&&h!==null)throw TypeError(h+": can't set as prototype!");return o?s.__proto__=h:c(s,h),s}}({},!1):void 0);Xr(Xr.S,"Object",{setPrototypeOf:Qg});var Zi=ra.Object.setPrototypeOf,ja=Ye(function(m){m.exports={default:Zi,__esModule:!0}});At(ja),Xr(Xr.S,"Object",{create:vu});var ap=ra.Object,$g=function(o,c){return ap.create(o,c)},em=Ye(function(m){m.exports={default:$g,__esModule:!0}}),sp=At(em),fd=Ye(function(m,o){function c(x){return x&&x.__esModule?x:{default:x}}o.__esModule=!0;var s=c(ja),h=c(em),f=c(Ll);o.default=function(x,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof g=="undefined"?"undefined":(0,f.default)(g)));x.prototype=(0,h.default)(g&&g.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),g&&(s.default?(0,s.default)(x,g):x.__proto__=g)}}),_n=At(fd),zn=Ea("toStringTag"),Cu=mc(function(){return arguments}())=="Arguments",Tc=function(o){var c;if(o===void 0)var s="Undefined";else{if(o===null)var h="Null";else{e:{var f=o=Object(o);try{h=f[zn];break e}catch(x){}h=void 0}h=typeof(s=h)=="string"?s:Cu?mc(o):(c=mc(o))=="Object"&&typeof o.callee=="function"?"Arguments":c}s=h}return s},tm=Ea("iterator"),ml=ra.isIterable=function(m){return m=Object(m),m[tm]!==void 0||"@@iterator"in m||Rs.hasOwnProperty(Tc(m))},ba=Ye(function(m){m.exports={default:ml,__esModule:!0}});At(ba);var us=Ea("iterator"),ff=ra.getIteratorMethod=function(m){if(m!=null)return m[us]||m["@@iterator"]||Rs[Tc(m)]},Yu=ra.getIterator=function(m){var o=ff(m);if(typeof o!="function")throw TypeError(m+" is not iterable!");return Ha(o.call(m))},cs=Ye(function(m){m.exports={default:Yu,__esModule:!0}}),Os=At(cs),wu=Ye(function(m,o){o.__esModule=!0;var c=ba&&ba.__esModule?ba:{default:ba},s=cs&&cs.__esModule?cs:{default:cs};o.default=function(){return function(h,f){if(Array.isArray(h))return h;if((0,c.default)(Object(h))){var x=[],g=!0,_=!1,L=void 0;try{for(var F=(0,s.default)(h),M;!(g=(M=F.next()).done)&&(x.push(M.value),!f||x.length!==f);g=!0);}catch(E){_=!0,L=E}finally{try{!g&&F.return&&F.return()}finally{if(_)throw L}}return x}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),Hi=At(wu),_u=function(o,c,s,h){try{return h?c(Ha(s)[0],s[1]):c(s)}catch(f){throw c=o.return,c!==void 0&&Ha(c.call(o)),f}},Ws=Ea("iterator"),Pl=Array.prototype,$s=Ea("iterator"),Zu=!1;try{[7][$s]().return=function(){Zu=!0}}catch(m){}var yo=function(o,c){if(!c&&!Zu)return!1;var s=!1;try{c=[7];var h=c[$s]();h.next=function(){return{done:s=!0}},c[$s]=function(){return h},o(c)}catch(f){}return s};Xr(Xr.S+Xr.F*!yo(function(m){}),"Array",{from:function(o){var c=Object(ql(o)),s=typeof this=="function"?this:Array,h=arguments.length,f=1<h?arguments[1]:void 0,x=f!==void 0,g=0,_=ff(c),L;if(x&&(f=Bs(f,2<h?arguments[2]:void 0,2)),_!=null&&(s!=Array||_===void 0||Rs.Array!==_&&Pl[Ws]!==_))for(c=_.call(c),s=new s;!(L=c.next()).done;g++)h=s,_=g,L=x?_u(c,f,[L.value,g],!0):L.value,_ in h?Us.f(h,_,El(0,L)):h[_]=L;else for(h=Xd(c.length),s=new s(h);h>g;g++){_=s,L=g;var F=x?f(c[g],g):c[g];L in _?Us.f(_,L,El(0,F)):_[L]=F}return s.length=g,s}});var rm=ra.Array.from,eu=Ye(function(m){m.exports={default:rm,__esModule:!0}}),dd=At(eu),tg=Ye(function(m,o){o.__esModule=!0;var c=eu&&eu.__esModule?eu:{default:eu};o.default=function(s){if(Array.isArray(s)){for(var h=0,f=Array(s.length);h<s.length;h++)f[h]=s[h];return f}return(0,c.default)(s)}}),Vi=At(tg),Ih=ld.onFreeze;Wc("freeze",function(m){return function(o){return m&&zs(o)?m(Ih(o)):o}});var Mu=ra.Object.freeze,nm=Ye(function(m){m.exports={default:Mu,__esModule:!0}}),Ee=At(nm),Jc=ra.JSON||(ra.JSON={stringify:JSON.stringify}),lp=function(o){return Jc.stringify.apply(Jc,arguments)},tu=Ye(function(m){m.exports={default:lp,__esModule:!0}}),ti=At(tu),ru={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},im=xu.f;Wc("getOwnPropertyDescriptor",function(){return function(m,o){return im(vc(m),o)}});var gv=ra.Object,qc=function(o,c){return gv.getOwnPropertyDescriptor(o,c)},df=Ye(function(m){m.exports={default:qc,__esModule:!0}}),La=At(df),up=Ye(function(m){var o=Array.prototype.concat,c=Array.prototype.slice,s=m.exports=function(h){for(var f=[],x=0,g=h.length;x<g;x++){var _=h[x],L=(L=_)&&typeof L!="string"?L instanceof Array||Array.isArray(L)||0<=L.length&&(L.splice instanceof Function||La(L,L.length-1)&&L.constructor.name!=="String"):!1;L?f=o.call(f,c.call(_)):f.push(_)}return f};s.wrap=function(h){return function(){return h(s(arguments))}}}),cp=Ye(function(m){function o(x,g,_){return Math.min(Math.max(g,x),_)}function c(x){return x=x.toString(16).toUpperCase(),2>x.length?"0"+x:x}var s={},h;for(h in ru)ru.hasOwnProperty(h)&&(s[ru[h]]=h);var f=m.exports={to:{},get:{}};f.get=function(x){switch(x.substring(0,3).toLowerCase()){case"hsl":x=f.get.hsl(x);var g="hsl";break;case"hwb":x=f.get.hwb(x),g="hwb";break;default:x=f.get.rgb(x),g="rgb"}return x?{model:g,value:x}:null},f.get.rgb=function(x){if(!x)return null;var g=/^#([a-f0-9]{3,4})$/i,_=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,L=/^rgba?\(\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,F=/(\D+)/,M=[0,0,0,1],E;if(E=x.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(g=E[2],E=E[1],x=0;3>x;x++)_=2*x,M[x]=parseInt(E.slice(_,_+2),16);g&&(M[3]=Math.round(parseInt(g,16)/255*100)/100)}else if(E=x.match(g)){for(E=E[1],g=E[3],x=0;3>x;x++)M[x]=parseInt(E[x]+E[x],16);g&&(M[3]=Math.round(parseInt(g+g,16)/255*100)/100)}else if(E=x.match(_)){for(x=0;3>x;x++)M[x]=parseInt(E[x+1],0);E[4]&&(M[3]=parseFloat(E[4]))}else if(E=x.match(L)){for(x=0;3>x;x++)M[x]=Math.round(2.55*parseFloat(E[x+1]));E[4]&&(M[3]=parseFloat(E[4]))}else return(E=x.match(F))?E[1]==="transparent"?[0,0,0,0]:(M=ru[E[1]],M?(M[3]=1,M):null):null;for(x=0;3>x;x++)M[x]=o(M[x],0,255);return M[3]=o(M[3],0,1),M},f.get.hsl=function(x){if(!x)return null;var g=x.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(g){var _=parseFloat(g[4]);x=(parseFloat(g[1])+360)%360;var L=o(parseFloat(g[2]),0,100);return g=o(parseFloat(g[3]),0,100),_=o(isNaN(_)?1:_,0,1),[x,L,g,_]}return null},f.get.hwb=function(x){if(!x)return null;var g=x.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(g){var _=parseFloat(g[4]);x=(parseFloat(g[1])%360+360)%360;var L=o(parseFloat(g[2]),0,100);return g=o(parseFloat(g[3]),0,100),_=o(isNaN(_)?1:_,0,1),[x,L,g,_]}return null},f.to.hex=function(){var x=up(arguments);return"#"+c(x[0])+c(x[1])+c(x[2])+(1>x[3]?c(Math.round(255*x[3])):"")},f.to.rgb=function(){var x=up(arguments);return 4>x.length||x[3]===1?"rgb("+Math.round(x[0])+", "+Math.round(x[1])+", "+Math.round(x[2])+")":"rgba("+Math.round(x[0])+", "+Math.round(x[1])+", "+Math.round(x[2])+", "+x[3]+")"},f.to.rgb.percent=function(){var x=up(arguments),g=Math.round(x[0]/255*100),_=Math.round(x[1]/255*100),L=Math.round(x[2]/255*100);return 4>x.length||x[3]===1?"rgb("+g+"%, "+_+"%, "+L+"%)":"rgba("+g+"%, "+_+"%, "+L+"%, "+x[3]+")"},f.to.hsl=function(){var x=up(arguments);return 4>x.length||x[3]===1?"hsl("+x[0]+", "+x[1]+"%, "+x[2]+"%)":"hsla("+x[0]+", "+x[1]+"%, "+x[2]+"%, "+x[3]+")"},f.to.hwb=function(){var x=up(arguments),g="";return 4<=x.length&&x[3]!==1&&(g=", "+x[3]),"hwb("+x[0]+", "+x[1]+"%, "+x[2]+"%"+g+")"},f.to.keyword=function(x){return s[x.slice(0,3)]}}),pf=Ye(function(m){var o={};for(h in ru)ru.hasOwnProperty(h)&&(o[ru[h]]=h);var c=m.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},s;for(s in c)if(c.hasOwnProperty(s)){if(!("channels"in c[s]))throw Error("missing channels property: "+s);if(!("labels"in c[s]))throw Error("missing channel labels property: "+s);if(c[s].labels.length!==c[s].channels)throw Error("channel and label counts mismatch: "+s);m=c[s].channels;var h=c[s].labels;delete c[s].channels,delete c[s].labels,Object.defineProperty(c[s],"channels",{value:m}),Object.defineProperty(c[s],"labels",{value:h})}c.rgb.hsl=function(f){var x=f[0]/255,g=f[1]/255,_=f[2]/255;f=Math.min(x,g,_);var L=Math.max(x,g,_),F=L-f,M;return L===f?M=0:x===L?M=(g-_)/F:g===L?M=2+(_-x)/F:_===L&&(M=4+(x-g)/F),M=Math.min(60*M,360),0>M&&(M+=360),x=(f+L)/2,[M,100*(L===f?0:.5>=x?F/(L+f):F/(2-L-f)),100*x]},c.rgb.hsv=function(f){var x,g=f[0]/255,_=f[1]/255,L=f[2]/255,F=Math.max(g,_,L),M=F-Math.min(g,_,L);if(M===0)var E=x=0;else{x=M/F,f=(F-g)/6/M+.5;var P=(F-_)/6/M+.5;M=(F-L)/6/M+.5,g===F?E=M-P:_===F?E=1/3+f-M:L===F&&(E=2/3+P-f),0>E?E+=1:1<E&&--E}return[360*E,100*x,100*F]},c.rgb.hwb=function(f){var x=f[0],g=f[1],_=f[2];f=c.rgb.hsl(f)[0];var L=1/255*Math.min(x,Math.min(g,_));return _=1-1/255*Math.max(x,Math.max(g,_)),[f,100*L,100*_]},c.rgb.cmyk=function(f){var x=f[0]/255,g=f[1]/255;f=f[2]/255;var _=Math.min(1-x,1-g,1-f);return[100*((1-x-_)/(1-_)||0),100*((1-g-_)/(1-_)||0),100*((1-f-_)/(1-_)||0),100*_]},c.rgb.keyword=function(f){var x=o[f];if(x)return x;x=Infinity;var g;for(g in ru)if(ru.hasOwnProperty(g)){var _=ru[g];if(_=Math.pow(f[0]-_[0],2)+Math.pow(f[1]-_[1],2)+Math.pow(f[2]-_[2],2),_<x){x=_;var L=g}}return L},c.keyword.rgb=function(f){return ru[f]},c.rgb.xyz=function(f){var x=f[0]/255,g=f[1]/255;return f=f[2]/255,x=.04045<x?Math.pow((x+.055)/1.055,2.4):x/12.92,g=.04045<g?Math.pow((g+.055)/1.055,2.4):g/12.92,f=.04045<f?Math.pow((f+.055)/1.055,2.4):f/12.92,[100*(.4124*x+.3576*g+.1805*f),100*(.2126*x+.7152*g+.0722*f),100*(.0193*x+.1192*g+.9505*f)]},c.rgb.lab=function(f){var x=c.rgb.xyz(f);f=x[0];var g=x[1];return x=x[2],f/=95.047,g/=100,x/=108.883,f=.008856<f?Math.pow(f,1/3):7.787*f+16/116,g=.008856<g?Math.pow(g,1/3):7.787*g+16/116,x=.008856<x?Math.pow(x,1/3):7.787*x+16/116,[116*g-16,500*(f-g),200*(g-x)]},c.hsl.rgb=function(f){var x=f[0]/360,g=f[1]/100;if(f=f[2]/100,g===0){var _=255*f;return[_,_,_]}g=.5>f?f*(1+g):f+g-f*g,f=2*f-g;for(var L=[0,0,0],F=0;3>F;F++)_=x+1/3*-(F-1),0>_&&_++,1<_&&_--,_=1>6*_?f+6*(g-f)*_:1>2*_?g:2>3*_?f+(g-f)*(2/3-_)*6:f,L[F]=255*_;return L},c.hsl.hsv=function(f){var x=f[0],g=f[1]/100;f=f[2]/100;var _=g,L=Math.max(f,.01);return f*=2,g*=1>=f?f:2-f,_*=1>=L?L:2-L,[x,100*(f===0?2*_/(L+_):2*g/(f+g)),(f+g)/2*100]},c.hsv.rgb=function(f){var x=f[0]/60,g=f[1]/100;f=f[2]/100;var _=Math.floor(x)%6,L=x-Math.floor(x);x=255*f*(1-g);var F=255*f*(1-g*L);switch(g=255*f*(1-g*(1-L)),f*=255,_){case 0:return[f,g,x];case 1:return[F,f,x];case 2:return[x,f,g];case 3:return[x,F,f];case 4:return[g,x,f];case 5:return[f,x,F]}},c.hsv.hsl=function(f){var x=f[0],g=f[1]/100;f=f[2]/100;var _=Math.max(f,.01),L=(2-g)*_;return _=g*_/(1>=L?L:2-L)||0,[x,100*_,(2-g)*f/2*100]},c.hwb.rgb=function(f){var x=f[0]/360,g=f[1]/100;f=f[2]/100;var _=g+f;switch(1<_&&(g/=_,f/=_),_=Math.floor(6*x),f=1-f,x=6*x-_,(_&1)!=0&&(x=1-x),x=g+x*(f-g),_){default:case 6:case 0:_=f;var L=x;break;case 1:_=x,L=f;break;case 2:_=g,L=f,g=x;break;case 3:_=g,L=x,g=f;break;case 4:_=x,L=g,g=f;break;case 5:_=f,L=g,g=x}return[255*_,255*L,255*g]},c.cmyk.rgb=function(f){var x=f[3]/100;return[255*(1-Math.min(1,f[0]/100*(1-x)+x)),255*(1-Math.min(1,f[1]/100*(1-x)+x)),255*(1-Math.min(1,f[2]/100*(1-x)+x))]},c.xyz.rgb=function(f){var x=f[0]/100,g=f[1]/100,_=f[2]/100;f=3.2406*x+-1.5372*g+-.4986*_;var L=-.9689*x+1.8758*g+.0415*_;return x=.0557*x+-.204*g+1.057*_,f=.0031308<f?1.055*Math.pow(f,1/2.4)-.055:12.92*f,L=.0031308<L?1.055*Math.pow(L,1/2.4)-.055:12.92*L,x=.0031308<x?1.055*Math.pow(x,1/2.4)-.055:12.92*x,f=Math.min(Math.max(0,f),1),L=Math.min(Math.max(0,L),1),x=Math.min(Math.max(0,x),1),[255*f,255*L,255*x]},c.xyz.lab=function(f){var x=f[0],g=f[1];return f=f[2],x/=95.047,g/=100,f/=108.883,x=.008856<x?Math.pow(x,1/3):7.787*x+16/116,g=.008856<g?Math.pow(g,1/3):7.787*g+16/116,f=.008856<f?Math.pow(f,1/3):7.787*f+16/116,[116*g-16,500*(x-g),200*(g-f)]},c.lab.xyz=function(f){var x=f[1],g=f[2];f=(f[0]+16)/116,x=x/500+f,g=f-g/200;var _=Math.pow(f,3),L=Math.pow(x,3),F=Math.pow(g,3);return[95.047*(.008856<L?L:(x-16/116)/7.787),100*(.008856<_?_:(f-16/116)/7.787),108.883*(.008856<F?F:(g-16/116)/7.787)]},c.lab.lch=function(f){var x=f[0],g=f[1];f=f[2];var _=360*Math.atan2(f,g)/2/Math.PI;return 0>_&&(_+=360),[x,Math.sqrt(g*g+f*f),_]},c.lch.lab=function(f){var x=f[0],g=f[1];return f=f[2]/360*2*Math.PI,[x,g*Math.cos(f),g*Math.sin(f)]},c.rgb.ansi16=function(f){var x=f[0],g=f[1],_=f[2],L=1 in arguments?arguments[1]:c.rgb.hsv(f)[2];return L=Math.round(L/50),L===0?30:(x=30+(Math.round(_/255)<<2|Math.round(g/255)<<1|Math.round(x/255)),L===2&&(x+=60),x)},c.hsv.ansi16=function(f){return c.rgb.ansi16(c.hsv.rgb(f),f[2])},c.rgb.ansi256=function(f){var x=f[0],g=f[1];return f=f[2],x===g&&g===f?8>x?16:248<x?231:Math.round((x-8)/247*24)+232:16+36*Math.round(x/255*5)+6*Math.round(g/255*5)+Math.round(f/255*5)},c.ansi16.rgb=function(f){var x=f%10;return x===0||x===7?(50<f&&(x+=3.5),x=x/10.5*255,[x,x,x]):(f=.5*(~~(50<f)+1),[(x&1)*f*255,(x>>1&1)*f*255,(x>>2&1)*f*255])},c.ansi256.rgb=function(f){if(232<=f){var x=10*(f-232)+8;return[x,x,x]}f-=16,x=Math.floor(f/36)/5*255;var g=Math.floor((f%=36)/6)/5*255;return[x,g,f%6/5*255]},c.rgb.hex=function(f){return f=(((Math.round(f[0])&255)<<16)+((Math.round(f[1])&255)<<8)+(Math.round(f[2])&255)).toString(16).toUpperCase(),"000000".substring(f.length)+f},c.hex.rgb=function(f){if(f=f.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i),!f)return[0,0,0];var x=f[0];return f[0].length===3&&(x=x.split("").map(function(g){return g+g}).join("")),f=parseInt(x,16),[f>>16&255,f>>8&255,f&255]},c.rgb.hcg=function(f){var x=f[0]/255,g=f[1]/255;f=f[2]/255;var _=Math.max(Math.max(x,g),f),L=Math.min(Math.min(x,g),f),F=_-L;return[(0>=F?0:_===x?(g-f)/F%6:_===g?2+(f-x)/F:(x-g)/F+8)/6%1*360,100*F,100*(1>F?L/(1-F):0)]},c.hsl.hcg=function(f){var x=f[1]/100,g=f[2]/100,_=0;return x=.5>g?2*x*g:2*x*(1-g),1>x&&(_=(g-.5*x)/(1-x)),[f[0],100*x,100*_]},c.hsv.hcg=function(f){var x=f[2]/100,g=f[1]/100*x,_=0;return 1>g&&(_=(x-g)/(1-g)),[f[0],100*g,100*_]},c.hcg.rgb=function(f){var x=f[1]/100,g=f[2]/100;if(x===0)return[255*g,255*g,255*g];var _=[0,0,0];f=f[0]/360%1*6;var L=f%1,F=1-L;switch(Math.floor(f)){case 0:_[0]=1,_[1]=L,_[2]=0;break;case 1:_[0]=F,_[1]=1,_[2]=0;break;case 2:_[0]=0,_[1]=1,_[2]=L;break;case 3:_[0]=0,_[1]=F,_[2]=1;break;case 4:_[0]=L,_[1]=0,_[2]=1;break;default:_[0]=1,_[1]=0,_[2]=F}return g*=1-x,[255*(x*_[0]+g),255*(x*_[1]+g),255*(x*_[2]+g)]},c.hcg.hsv=function(f){var x=f[1]/100,g=x+f[2]/100*(1-x),_=0;return 0<g&&(_=x/g),[f[0],100*_,100*g]},c.hcg.hsl=function(f){var x=f[1]/100,g=f[2]/100*(1-x)+.5*x,_=0;return 0<g&&.5>g?_=x/(2*g):.5<=g&&1>g&&(_=x/(2*(1-g))),[f[0],100*_,100*g]},c.hcg.hwb=function(f){var x=f[1]/100,g=x+f[2]/100*(1-x);return[f[0],100*(g-x),100*(1-g)]},c.hwb.hcg=function(f){var x=1-f[2]/100,g=x-f[1]/100,_=0;return 1>g&&(_=(x-g)/(1-g)),[f[0],100*g,100*_]},c.apple.rgb=function(f){return[f[0]/65535*255,f[1]/65535*255,f[2]/65535*255]},c.rgb.apple=function(f){return[f[0]/255*65535,f[1]/255*65535,f[2]/255*65535]},c.gray.rgb=function(f){return[f[0]/100*255,f[0]/100*255,f[0]/100*255]},c.gray.hsl=c.gray.hsv=function(f){return[0,0,f[0]]},c.gray.hwb=function(f){return[0,100,f[0]]},c.gray.cmyk=function(f){return[0,0,0,f[0]]},c.gray.lab=function(f){return[f[0],0,0]},c.gray.hex=function(f){return f=Math.round(f[0]/100*255)&255,f=((f<<16)+(f<<8)+f).toString(16).toUpperCase(),"000000".substring(f.length)+f},c.rgb.gray=function(f){return[(f[0]+f[1]+f[2])/3/255*100]}}),Ku=function(o){for(var c={},s=Fa(pf),h=s.length,f=0;f<h;f++)c[s[f]]={distance:-1,parent:null};for(s=[o],c[o].distance=0;s.length;){o=s.pop(),h=Fa(pf[o]),f=h.length;for(var x=0;x<f;x++){var g=h[x],_=c[g];_.distance===-1&&(_.distance=c[o].distance+1,_.parent=o,s.unshift(g))}}for(s={},o=Fa(c),h=o.length,f=0;f<h;f++){var L=o[f];if(c[L].parent!==null){x=L,g=c,_=[g[L].parent,L];var F=pf[g[L].parent][L];for(L=g[L].parent;g[L].parent;)_.unshift(g[L].parent),F=Ut(pf[g[L].parent][L],F),L=g[L].parent;F.conversion=_,s[x]=F}}return s},gf={};Fa(pf).forEach(function(m){gf[m]={},Object.defineProperty(gf[m],"channels",{value:pf[m].channels}),Object.defineProperty(gf[m],"labels",{value:pf[m].labels});var o=Ku(m);Fa(o).forEach(function(c){var s=o[c];gf[m][c]=ce(s),gf[m][c].raw=St(s)})});var nu=gf,Rl=[].slice,rg=["keyword","gray","hex"],mf={};Fa(nu).forEach(function(m){mf[Rl.call(nu[m].labels).sort().join("")]=m});var iu={};Ne.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(o){var c=this.model in cp.to?this:this.rgb();return c=c.round(typeof o=="number"?o:1),o=c.valpha===1?c.color:c.color.concat(this.valpha),cp.to[c.model](o)},percentString:function(o){return o=this.rgb().round(typeof o=="number"?o:1),o=o.valpha===1?o.color:o.color.concat(this.valpha),cp.to.rgb.percent(o)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var o={},c=nu[this.model].channels,s=nu[this.model].labels,h=0;h<c;h++)o[s[h]]=this.color[h];return this.valpha!==1&&(o.alpha=this.valpha),o},unitArray:function(){var o=this.rgb().color;return o[0]/=255,o[1]/=255,o[2]/=255,this.valpha!==1&&o.push(this.valpha),o},unitObject:function(){var o=this.rgb().object();return o.r/=255,o.g/=255,o.b/=255,this.valpha!==1&&(o.alpha=this.valpha),o},round:function(o){return o=Math.max(o||0,0),new Ne(this.color.map(Q(o)).concat(this.valpha),this.model)},alpha:function(o){return arguments.length?new Ne(this.color.concat(Math.max(0,Math.min(1,o))),this.model):this.valpha},red:Oe("rgb",0,pt(255)),green:Oe("rgb",1,pt(255)),blue:Oe("rgb",2,pt(255)),hue:Oe(["hsl","hsv","hsl","hwb","hcg"],0,function(m){return(m%360+360)%360}),saturationl:Oe("hsl",1,pt(100)),lightness:Oe("hsl",2,pt(100)),saturationv:Oe("hsv",1,pt(100)),value:Oe("hsv",2,pt(100)),chroma:Oe("hcg",1,pt(100)),gray:Oe("hcg",2,pt(100)),white:Oe("hwb",1,pt(100)),wblack:Oe("hwb",2,pt(100)),cyan:Oe("cmyk",0,pt(100)),magenta:Oe("cmyk",1,pt(100)),yellow:Oe("cmyk",2,pt(100)),black:Oe("cmyk",3,pt(100)),x:Oe("xyz",0,pt(100)),y:Oe("xyz",1,pt(100)),z:Oe("xyz",2,pt(100)),l:Oe("lab",0,pt(100)),a:Oe("lab",1),b:Oe("lab",2),keyword:function(o){return arguments.length?new Ne(o):nu[this.model].keyword(this.color)},hex:function(o){return arguments.length?new Ne(o):cp.to.hex(this.rgb().round().color)},rgbNumber:function(){var o=this.rgb().color;return(o[0]&255)<<16|(o[1]&255)<<8|o[2]&255},luminosity:function(){for(var o=this.rgb().color,c=[],s=0;s<o.length;s++){var h=o[s]/255;c[s]=.03928>=h?h/12.92:Math.pow((h+.055)/1.055,2.4)}return .2126*c[0]+.7152*c[1]+.0722*c[2]},contrast:function(o){var c=this.luminosity();return o=o.luminosity(),c>o?(c+.05)/(o+.05):(o+.05)/(c+.05)},level:function(o){return o=this.contrast(o),7.1<=o?"AAA":4.5<=o?"AA":""},isDark:function(){var o=this.rgb().color;return 128>(299*o[0]+587*o[1]+114*o[2])/1e3},isLight:function(){return!this.isDark()},negate:function(){for(var o=this.rgb(),c=0;3>c;c++)o.color[c]=255-o.color[c];return o},lighten:function(o){var c=this.hsl();return c.color[2]+=c.color[2]*o,c},darken:function(o){var c=this.hsl();return c.color[2]-=c.color[2]*o,c},saturate:function(o){var c=this.hsl();return c.color[1]+=c.color[1]*o,c},desaturate:function(o){var c=this.hsl();return c.color[1]-=c.color[1]*o,c},whiten:function(o){var c=this.hwb();return c.color[1]+=c.color[1]*o,c},blacken:function(o){var c=this.hwb();return c.color[2]+=c.color[2]*o,c},grayscale:function(){var o=this.rgb().color;return o=.3*o[0]+.59*o[1]+.11*o[2],Ne.rgb(o,o,o)},fade:function(o){return this.alpha(this.valpha-this.valpha*o)},opaquer:function(o){return this.alpha(this.valpha+this.valpha*o)},rotate:function(o){var c=this.hsl(),s=c.color[0];return s=(s+o)%360,c.color[0]=0>s?360+s:s,c},mix:function(o,c){if(!o||!o.rgb)throw Error('Argument to "mix" was not a Color instance, but rather an instance of '+(typeof o=="undefined"?"undefined":Ta(o)));o=o.rgb();var s=this.rgb();c=c===void 0?.5:c;var h=2*c-1,f=o.alpha()-s.alpha();return h=((h*f==-1?h:(h+f)/(1+h*f))+1)/2,f=1-h,Ne.rgb(h*o.red()+f*s.red(),h*o.green()+f*s.green(),h*o.blue()+f*s.blue(),o.alpha()*c+s.alpha()*(1-c))}},Fa(nu).forEach(function(m){if(rg.indexOf(m)===-1){var o=nu[m].channels;Ne.prototype[m]=function(){if(this.model===m)return new Ne(this);if(arguments.length)return new Ne(arguments,m);var c=typeof arguments[o]=="number"?o:this.valpha,s=nu[this.model][m].raw(this.color);return s=Array.isArray(s)?s:[s],new Ne(s.concat(c),m)},Ne[m]=function(c){return typeof c=="number"&&(c=Lt(Rl.call(arguments),o)),new Ne(c,m)}}}),Lo(Ui.prototype,{equals:function(o){return this.lat===o.lat&&this.lng===o.lng},clone:function(){return new Ui(this.lat,this.lng)},getLngSpan:function(o){return o=Math.abs(o-this.lng),180<o&&(o=360-o),o},sub:function(o){return new Ui(this.lat-o.lat,this.lng-o.lng)},toString:function(){return"Point"}}),Lo(Cr,{EARTHRADIUS:637099681e-2,MCBAND:[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,1704480524535203,-10338987376042340,26112667856603880,-35149669176653700,26595700718403920,-10725012454188240,1800819912950474,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],getDistanceByMC:function(o,c){if(!o||!c||(o=this.convertMC2LL(o),!o))return 0;var s=this.toRadians(o.lng);if(o=this.toRadians(o.lat),c=this.convertMC2LL(c),!c)return 0;var h=this.toRadians(c.lng);return c=this.toRadians(c.lat),this.getDistance(s,h,o,c)},getDistanceByLL:function(o,c){if(!o||!c)return 0;o.lng=this.getLoop(o.lng,-180,180),o.lat=this.getRange(o.lat,-74,74),c.lng=this.getLoop(c.lng,-180,180),c.lat=this.getRange(c.lat,-74,74);var s=this.toRadians(o.lng),h=this.toRadians(o.lat);return o=this.toRadians(c.lng),c=this.toRadians(c.lat),this.getDistance(s,o,h,c)},convertMC2LL:function(o){if(o==null)return new Ui(0,0);if(180>o.lng&&-180<o.lng&&90>o.lat&&-90<o.lat)return o;for(var c=new Ui(Math.abs(o.lng),Math.abs(o.lat)),s=0;s<this.MCBAND.length;s++)if(c.lat>=this.MCBAND[s]){var h=this.MC2LL[s];break}return o=this.convertor(o,h),o=new Ui(o.lng.toFixed(6),o.lat.toFixed(6))},convertLL2MC:function(o){if(o==null)return new Ui(0,0);if(180<o.lng||-180>o.lng||90<o.lat||-90>o.lat)return o;o.lng=this.getLoop(o.lng,-180,180),o.lat=this.getRange(o.lat,-74,74);for(var c=new Ui(o.lng,o.lat),s=0;s<this.LLBAND.length;s++)if(c.lat>=this.LLBAND[s]){var h=this.LL2MC[s];break}if(!h){for(s=0;s<this.LLBAND.length;s++)if(c.lat<=-this.LLBAND[s]){h=this.LL2MC[s];break}}return o=this.convertor(o,h),o=new Ui(Number(o.lng.toFixed(2)),Number(o.lat.toFixed(2)))},convertor:function(o,c){if(o&&c){var s=c[0]+c[1]*Math.abs(o.lng),h=Math.abs(o.lat)/c[9];return c=c[2]+c[3]*h+c[4]*h*h+c[5]*h*h*h+c[6]*h*h*h*h+c[7]*h*h*h*h*h+c[8]*h*h*h*h*h*h,s*=0>o.lng?-1:1,c*=0>o.lat?-1:1,new Ui(s,c)}},getDistance:function(o,c,s,h){return this.EARTHRADIUS*Math.acos(Math.sin(s)*Math.sin(h)+Math.cos(s)*Math.cos(h)*Math.cos(c-o))},toRadians:function(o){return Math.PI*o/180},toDegrees:function(o){return 180*o/Math.PI},getRange:function(o,c,s){return c!=null&&(o=Math.max(o,c)),s!=null&&(o=Math.min(o,s)),o},getLoop:function(o,c,s){for(;o>s;)o-=s-c;for(;o<c;)o+=s-c;return o}}),Lo(Cr.prototype,{lngLatToMercator:function(o){return Cr.convertLL2MC(o)},lngLatToPoint:function(o){return o=Cr.convertLL2MC(o),new mi(o.lng,o.lat)},mercatorToLngLat:function(o){return Cr.convertMC2LL(o)},pointToLngLat:function(o){return o=new Ui(o.x,o.y),Cr.convertMC2LL(o)},pointToPixel:function(o,c,s,h,f){if(o)return o=this.lngLatToMercator(o,f),c=this.getZoomUnits(c),new mi(Math.round((o.lng-s.lng)/c+h.width/2),Math.round((s.lat-o.lat)/c+h.height/2))},pixelToPoint:function(o,c,s,h,f){if(o)return c=this.getZoomUnits(c),o=new Ui(s.lng+c*(o.x-h.width/2),s.lat-c*(o.y-h.height/2)),this.mercatorToLngLat(o,f)},getZoomUnits:function(o){return Math.pow(2,18-o)}}),ro.prototype.setMax=function(m){this.max=m||100},ro.prototype.setMin=function(m){this.min=m||0},ro.prototype.setMaxSize=function(m){this.maxSize=m||35},ro.prototype.setMinSize=function(m){this.minSize=m||0},ro.prototype.initPalette=function(){var m=this.gradient,o=this.paletteCtx=new Ko(256,1).getContext("2d"),c=o.createLinearGradient(0,0,256,1);Fa(m).forEach(function(s){c.addColorStop(parseFloat(s),m[s])}),o.fillStyle=c,o.fillRect(0,0,256,1),o.imageData=o.getImageData(0,0,256,1).data},ro.prototype.getColor=function(m){return m=this.getImageData(m),"rgba("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]/256+")"},ro.prototype.getImageData=function(m){var o=this.paletteCtx.imageData;if(m===void 0)return o;var c=this.max,s=this.min;return m>c&&(m=c),m<s&&(m=s),m=4*Math.floor((m-s)/(c-s)*255),[o[m],o[m+1],o[m+2],o[m+3]]},ro.prototype.getSize=function(m){var o=this.max,c=this.min,s=this.maxSize,h=this.minSize;return m>o&&(m=o),m<c&&(m=c),h+(m-c)/(o-c)*(s-h)},ia.prototype._initialize=function(){this.v0=this._normalizaCoord(this.options.start),this.v3=this._normalizaCoord(this.options.end),this.v1=this._getControlPoint(this.v0,this.v3,4),this.v2=this._getControlPoint(this.v3,this.v0,5),this.v0[2]||(this.v0[2]=0),this.v3[2]||(this.v3[2]=0)},ia.prototype.setOptions=function(m){this.options=m||{},this._initialize()},ia.prototype.getPoints=function(m){m===void 0&&(m=20);for(var o=[],c=0;c<=m;c++)o.push(this._getPoint(c/m));return o},ia.prototype._normalizaCoord=function(m){return m?(m=Cr.convertLL2MC({lng:Number(m[0]),lat:Number(m[1])}),[m.lng,m.lat]):[]},ia.prototype._getControlPoint=function(m,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1;return[].concat(Vi(this._getQuarter(m,o)),[this._getDistance(m,o)/c])},ia.prototype._getQuarter=function(m,o){return[(3*m[0]+o[0])/4,(3*m[1]+o[1])/4]},ia.prototype._getDistance=function(m,o){return Math.sqrt(Math.pow(m[0]-o[0],2)+Math.pow(m[1]-o[1],2))},ia.prototype._getPoint=function(m){var o=[],c=this.v0,s=this.v1,h=this.v2,f=this.v3;return o.push(Xt(m,c[0],s[0],h[0],f[0]),Xt(m,c[1],s[1],h[1],f[1]),Xt(m,c[2],s[2],h[2],f[2])),o},vt.prototype._initialize=function(){this.points=this.options.points||this.options.point||[],this.greatCirclePoints=[];for(var m=[],o=0;o<this.points.length;o++){var c=this._normalizaCoord(this.points[o]);c&&m.push(c)}this.points=m},vt.prototype.setOptions=function(m){this.options=m||{},this._initialize()},vt.prototype.getPoints=function(){if(this.greatCirclePoints.length===0)for(var m=0;m<this.points.length-1;m++)this._calcGreatCirclePoints(this.points[m],this.points[m+1]);return this.greatCirclePoints},vt.prototype._normalizaCoord=function(m){if(!m)return null;m instanceof Array&&(m={lng:Number(m[0]),lat:Number(m[1])});var o=Cr.convertLL2MC(m);return m=Cr.convertMC2LL(m),o.latLng=m,o},vt.prototype._calcGreatCirclePoints=function(m,o){var c=m.latLng,s=o.latLng;if(!bo(c.lng,s.lng)||!bo(c.lat,s.lat)){var h=Cr.getDistance(Er(c.lng),Er(c.lat),Er(s.lng),Er(s.lat));if(!(25e4>h)){h=Math.round(h/15e4);var f=this._calcAngularDistance(c,s);this.greatCirclePoints.push([m.lng,m.lat]);for(var x=0;x<h;x++){var g=this._calcMiddlePoint(c,s,x/h,f);g=Cr.convertLL2MC(g);var _=Dr(g,m);30037726<_&&(g.lng=g.lng<m.lng?g.lng+this.WORLD_SIZE_MC:g.lng-this.WORLD_SIZE_MC),this.greatCirclePoints.push([g.lng,g.lat]),m=g}_=Dr(o,m),30037726<_&&(o.lng=o.lng<m.lng?o.lng+this.WORLD_SIZE_MC:o.lng-this.WORLD_SIZE_MC),this.greatCirclePoints.push([o.lng,o.lat])}}},vt.prototype._calcAngularDistance=function(m,o){var c=Er(m.lat),s=Er(o.lat);return m=Er(m.lng),o=Er(o.lng),Math.acos(Math.sin(c)*Math.sin(s)+Math.cos(c)*Math.cos(s)*Math.cos(Math.abs(o-m)))},vt.prototype._calcMiddlePoint=function(m,o,c,s){var h=o.lat,f=m.lng;o=o.lng,m=Er(m.lat),h=Er(h),f=Er(f);var x=Er(o);return o=Math.sin((1-c)*s)/Math.sin(s),s=Math.sin(c*s)/Math.sin(s),c=o*Math.cos(m)*Math.cos(f)+s*Math.cos(h)*Math.cos(x),f=o*Math.cos(m)*Math.sin(f)+s*Math.cos(h)*Math.sin(x),m=Math.atan2(o*Math.sin(m)+s*Math.sin(h),Math.sqrt(Math.pow(c,2)+Math.pow(f,2))),new Ui(xe(Math.atan2(f,c)),xe(m))};var mv=function(){function m(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};qr(this,m),this.options=o,this._initialize()}return on(m,[{key:"_initialize",value:function(){this.points=this.options.points}},{key:"_normalizaCoord",value:function(c){return c?(c instanceof Array&&(c={lng:Number(c[0]),lat:Number(c[1])}),Cr.convertLL2MC(c)):null}},{key:"setOptions",value:function(){this.options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},this._initialize()}},{key:"getPoints",value:function(c){for(var s=[],h=this.points,f=0;f<h.length-1;f++){var x=this.getCurveByTwoPoints(this._normalizaCoord(h[f]),this._normalizaCoord(h[f+1]),c);x&&0<x.length&&(s=s.concat(x))}return s}},{key:"getCurveByTwoPoints",value:function(c,s){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:20;if(!c||!s)return null;var f=[],x=0;if((typeof s=="undefined"?"undefined":Ta(s))===void 0)typeof f=="undefined"||Ta(f);else{var g=parseFloat(c.lat),_=parseFloat(s.lat),L=parseFloat(c.lng),F=parseFloat(s.lng);F>L&&180<parseFloat(F-L)&&0>L&&(L=parseFloat(360+L),F=parseFloat(360+F));var M=0;if(_===g)var E=0,P=L-F;else F===L?(E=Math.PI/2,P=g-_):(E=Math.atan((_-g)/(F-L)),P=(_-g)/Math.sin(E));for(M===0&&(M=E+Math.PI/5),P/=2,E=P*Math.cos(M)+L,M=P*Math.sin(M)+g,P=0;P<h+1;P++){var O=L*(1-2*x+x*x)+E*(2*x-2*x*x)+F*x*x,B=s.lng;f.push([0>c.lng&&0<B?O-360:O,g*(1-2*x+x*x)+M*(2*x-2*x*x)+_*x*x]),x+=1/h}return f}}}]),m}(),pd=[{n:"\u5317\u4EAC",g:"116.395645,39.929986|12"},{n:"\u4E0A\u6D77",g:"121.487899,31.249162|12"},{n:"\u5929\u6D25",g:"117.210813,39.14393|12"},{n:"\u91CD\u5E86",g:"106.530635,29.544606|12"}],Qc=[{n:"\u5B89\u5FBD",g:"117.216005,31.859252|8",cities:[{n:"\u5408\u80A5",g:"117.282699,31.866942|12"},{n:"\u5B89\u5E86",g:"117.058739,30.537898|13"},{n:"\u868C\u57E0",g:"117.35708,32.929499|13"},{n:"\u4EB3\u5DDE",g:"115.787928,33.871211|13"},{n:"\u5DE2\u6E56",g:"117.88049,31.608733|13"},{n:"\u6C60\u5DDE",g:"117.494477,30.660019|14"},{n:"\u6EC1\u5DDE",g:"118.32457,32.317351|13"},{n:"\u961C\u9633",g:"115.820932,32.901211|13"},{n:"\u6DEE\u5317",g:"116.791447,33.960023|13"},{n:"\u6DEE\u5357",g:"117.018639,32.642812|13"},{n:"\u9EC4\u5C71",g:"118.29357,29.734435|13"},{n:"\u516D\u5B89",g:"116.505253,31.755558|13"},{n:"\u9A6C\u978D\u5C71",g:"118.515882,31.688528|13"},{n:"\u5BBF\u5DDE",g:"116.988692,33.636772|13"},{n:"\u94DC\u9675",g:"117.819429,30.94093|14"},{n:"\u829C\u6E56",g:"118.384108,31.36602|12"},{n:"\u5BA3\u57CE",g:"118.752096,30.951642|13"}]},{n:"\u798F\u5EFA",g:"117.984943,26.050118|8",cities:[{n:"\u798F\u5DDE",g:"119.330221,26.047125|12"},{n:"\u9F99\u5CA9",g:"117.017997,25.078685|13"},{n:"\u5357\u5E73",g:"118.181883,26.643626|13"},{n:"\u5B81\u5FB7",g:"119.542082,26.656527|14"},{n:"\u8386\u7530",g:"119.077731,25.44845|13"},{n:"\u6CC9\u5DDE",g:"118.600362,24.901652|12"},{n:"\u4E09\u660E",g:"117.642194,26.270835|14"},{n:"\u53A6\u95E8",g:"118.103886,24.489231|12"},{n:"\u6F33\u5DDE",g:"117.676205,24.517065|12"}]},{n:"\u7518\u8083",g:"102.457625,38.103267|6",cities:[{n:"\u5170\u5DDE",g:"103.823305,36.064226|12"},{n:"\u767D\u94F6",g:"104.171241,36.546682|13"},{n:"\u5B9A\u897F",g:"104.626638,35.586056|13"},{n:"\u7518\u5357\u5DDE",g:"102.917442,34.992211|14"},{n:"\u5609\u5CEA\u5173",g:"98.281635,39.802397|13"},{n:"\u91D1\u660C",g:"102.208126,38.516072|13"},{n:"\u9152\u6CC9",g:"98.508415,39.741474|13"},{n:"\u4E34\u590F\u5DDE",g:"103.215249,35.598514|13"},{n:"\u9647\u5357",g:"104.934573,33.39448|14"},{n:"\u5E73\u51C9",g:"106.688911,35.55011|13"},{n:"\u5E86\u9633",g:"107.644227,35.726801|13"},{n:"\u5929\u6C34",g:"105.736932,34.584319|13"},{n:"\u6B66\u5A01",g:"102.640147,37.933172|13"},{n:"\u5F20\u6396",g:"100.459892,38.93932|13"}]},{n:"\u5E7F\u4E1C",g:"113.394818,23.408004|8",cities:[{n:"\u5E7F\u5DDE",g:"113.30765,23.120049|12"},{n:"\u6F6E\u5DDE",g:"116.630076,23.661812|13"},{n:"\u4E1C\u839E",g:"113.763434,23.043024|12"},{n:"\u4F5B\u5C71",g:"113.134026,23.035095|13"},{n:"\u6CB3\u6E90",g:"114.713721,23.757251|12"},{n:"\u60E0\u5DDE",g:"114.410658,23.11354|12"},{n:"\u6C5F\u95E8",g:"113.078125,22.575117|13"},{n:"\u63ED\u9633",g:"116.379501,23.547999|13"},{n:"\u8302\u540D",g:"110.931245,21.668226|13"},{n:"\u6885\u5DDE",g:"116.126403,24.304571|13"},{n:"\u6E05\u8FDC",g:"113.040773,23.698469|13"},{n:"\u6C55\u5934",g:"116.72865,23.383908|13"},{n:"\u6C55\u5C3E",g:"115.372924,22.778731|14"},{n:"\u97F6\u5173",g:"113.594461,24.80296|13"},{n:"\u6DF1\u5733",g:"114.025974,22.546054|12"},{n:"\u9633\u6C5F",g:"111.97701,21.871517|14"},{n:"\u4E91\u6D6E",g:"112.050946,22.937976|13"},{n:"\u6E5B\u6C5F",g:"110.365067,21.257463|13"},{n:"\u8087\u5E86",g:"112.479653,23.078663|13"},{n:"\u4E2D\u5C71",g:"113.42206,22.545178|12"},{n:"\u73E0\u6D77",g:"113.562447,22.256915|13"}]},{n:"\u5E7F\u897F",g:"108.924274,23.552255|7",cities:[{n:"\u5357\u5B81",g:"108.297234,22.806493|12"},{n:"\u767E\u8272",g:"106.631821,23.901512|13"},{n:"\u5317\u6D77",g:"109.122628,21.472718|13"},{n:"\u5D07\u5DE6",g:"107.357322,22.415455|14"},{n:"\u9632\u57CE\u6E2F",g:"108.351791,21.617398|15"},{n:"\u6842\u6797",g:"110.26092,25.262901|12"},{n:"\u8D35\u6E2F",g:"109.613708,23.103373|13"},{n:"\u6CB3\u6C60",g:"108.069948,24.699521|14"},{n:"\u8D3A\u5DDE",g:"111.552594,24.411054|14"},{n:"\u6765\u5BBE",g:"109.231817,23.741166|14"},{n:"\u67F3\u5DDE",g:"109.422402,24.329053|12"},{n:"\u94A6\u5DDE",g:"108.638798,21.97335|13"},{n:"\u68A7\u5DDE",g:"111.305472,23.485395|13"},{n:"\u7389\u6797",g:"110.151676,22.643974|14"}]},{n:"\u8D35\u5DDE",g:"106.734996,26.902826|8",cities:[{n:"\u8D35\u9633",g:"106.709177,26.629907|12"},{n:"\u5B89\u987A",g:"105.92827,26.228595|13"},{n:"\u6BD5\u8282\u5730\u533A",g:"105.300492,27.302612|14"},{n:"\u516D\u76D8\u6C34",g:"104.852087,26.591866|13"},{n:"\u94DC\u4EC1\u5730\u533A",g:"109.196161,27.726271|14"},{n:"\u9075\u4E49",g:"106.93126,27.699961|13"},{n:"\u9ED4\u897F\u5357\u5DDE",g:"104.900558,25.095148|11"},{n:"\u9ED4\u4E1C\u5357\u5DDE",g:"107.985353,26.583992|11"},{n:"\u9ED4\u5357\u5DDE",g:"107.523205,26.264536|11"}]},{n:"\u6D77\u5357",g:"109.733755,19.180501|9",cities:[{n:"\u6D77\u53E3",g:"110.330802,20.022071|13"},{n:"\u767D\u6C99",g:"109.358586,19.216056|12"},{n:"\u4FDD\u4EAD",g:"109.656113,18.597592|12"},{n:"\u660C\u6C5F",g:"109.0113,19.222483|12"},{n:"\u510B\u5DDE",g:"109.413973,19.571153|13"},{n:"\u6F84\u8FC8",g:"109.996736,19.693135|13"},{n:"\u4E1C\u65B9",g:"108.85101,18.998161|13"},{n:"\u5B9A\u5B89",g:"110.32009,19.490991|13"},{n:"\u743C\u6D77",g:"110.414359,19.21483|13"},{n:"\u743C\u4E2D",g:"109.861849,19.039771|12"},{n:"\u4E50\u4E1C",g:"109.062698,18.658614|12"},{n:"\u4E34\u9AD8",g:"109.724101,19.805922|13"},{n:"\u9675\u6C34",g:"109.948661,18.575985|12"},{n:"\u4E09\u4E9A",g:"109.522771,18.257776|12"},{n:"\u5C6F\u660C",g:"110.063364,19.347749|13"},{n:"\u4E07\u5B81",g:"110.292505,18.839886|13"},{n:"\u6587\u660C",g:"110.780909,19.750947|13"},{n:"\u4E94\u6307\u5C71",g:"109.51775,18.831306|13"}]},{n:"\u6CB3\u5317",g:"115.661434,38.61384|7",cities:[{n:"\u77F3\u5BB6\u5E84",g:"114.522082,38.048958|12"},{n:"\u4FDD\u5B9A",g:"115.49481,38.886565|13"},{n:"\u6CA7\u5DDE",g:"116.863806,38.297615|13"},{n:"\u627F\u5FB7",g:"117.933822,40.992521|14"},{n:"\u90AF\u90F8",g:"114.482694,36.609308|13"},{n:"\u8861\u6C34",g:"115.686229,37.746929|13"},{n:"\u5ECA\u574A",g:"116.703602,39.518611|13"},{n:"\u79E6\u7687\u5C9B",g:"119.604368,39.945462|12"},{n:"\u5510\u5C71",g:"118.183451,39.650531|13"},{n:"\u90A2\u53F0",g:"114.520487,37.069531|13"},{n:"\u5F20\u5BB6\u53E3",g:"114.893782,40.811188|13"}]},{n:"\u6CB3\u5357",g:"113.486804,34.157184|7",cities:[{n:"\u90D1\u5DDE",g:"113.649644,34.75661|12"},{n:"\u5B89\u9633",g:"114.351807,36.110267|12"},{n:"\u9E64\u58C1",g:"114.29777,35.755426|13"},{n:"\u7126\u4F5C",g:"113.211836,35.234608|13"},{n:"\u5F00\u5C01",g:"114.351642,34.801854|13"},{n:"\u6D1B\u9633",g:"112.447525,34.657368|12"},{n:"\u6F2F\u6CB3",g:"114.046061,33.576279|13"},{n:"\u5357\u9633",g:"112.542842,33.01142|13"},{n:"\u5E73\u9876\u5C71",g:"113.300849,33.745301|13"},{n:"\u6FEE\u9633",g:"115.026627,35.753298|12"},{n:"\u4E09\u95E8\u5CE1",g:"111.181262,34.78332|13"},{n:"\u5546\u4E18",g:"115.641886,34.438589|13"},{n:"\u65B0\u4E61",g:"113.91269,35.307258|13"},{n:"\u4FE1\u9633",g:"114.085491,32.128582|13"},{n:"\u8BB8\u660C",g:"113.835312,34.02674|13"},{n:"\u5468\u53E3",g:"114.654102,33.623741|13"},{n:"\u9A7B\u9A6C\u5E97",g:"114.049154,32.983158|13"}]},{n:"\u9ED1\u9F99\u6C5F",g:"128.047414,47.356592|6",cities:[{n:"\u54C8\u5C14\u6EE8",g:"126.657717,45.773225|12"},{n:"\u5927\u5E86",g:"125.02184,46.596709|12"},{n:"\u5927\u5174\u5B89\u5CAD\u5730\u533A",g:"124.196104,51.991789|10"},{n:"\u9E64\u5C97",g:"130.292472,47.338666|13"},{n:"\u9ED1\u6CB3",g:"127.50083,50.25069|14"},{n:"\u9E21\u897F",g:"130.941767,45.32154|13"},{n:"\u4F73\u6728\u65AF",g:"130.284735,46.81378|12"},{n:"\u7261\u4E39\u6C5F",g:"129.608035,44.588521|13"},{n:"\u4E03\u53F0\u6CB3",g:"131.019048,45.775005|14"},{n:"\u9F50\u9F50\u54C8\u5C14",g:"123.987289,47.3477|13"},{n:"\u53CC\u9E2D\u5C71",g:"131.171402,46.655102|13"},{n:"\u7EE5\u5316",g:"126.989095,46.646064|13"},{n:"\u4F0A\u6625",g:"128.910766,47.734685|14"}]},{n:"\u6E56\u5317",g:"112.410562,31.209316|8",cities:[{n:"\u6B66\u6C49",g:"114.3162,30.581084|12"},{n:"\u9102\u5DDE",g:"114.895594,30.384439|14"},{n:"\u6069\u65BD",g:"109.517433,30.308978|14"},{n:"\u9EC4\u5188",g:"114.906618,30.446109|14"},{n:"\u9EC4\u77F3",g:"115.050683,30.216127|13"},{n:"\u8346\u95E8",g:"112.21733,31.042611|13"},{n:"\u8346\u5DDE",g:"112.241866,30.332591|12"},{n:"\u6F5C\u6C5F",g:"112.768768,30.343116|13"},{n:"\u795E\u519C\u67B6\u6797\u533A",g:"110.487231,31.595768|13"},{n:"\u5341\u5830",g:"110.801229,32.636994|13"},{n:"\u968F\u5DDE",g:"113.379358,31.717858|13"},{n:"\u5929\u95E8",g:"113.12623,30.649047|13"},{n:"\u4ED9\u6843",g:"113.387448,30.293966|13"},{n:"\u54B8\u5B81",g:"114.300061,29.880657|13"},{n:"\u8944\u9633",g:"112.176326,32.094934|12"},{n:"\u5B5D\u611F",g:"113.935734,30.927955|13"},{n:"\u5B9C\u660C",g:"111.310981,30.732758|13"}]},{n:"\u6E56\u5357",g:"111.720664,27.695864|7",cities:[{n:"\u957F\u6C99",g:"112.979353,28.213478|12"},{n:"\u5E38\u5FB7",g:"111.653718,29.012149|12"},{n:"\u90F4\u5DDE",g:"113.037704,25.782264|13"},{n:"\u8861\u9633",g:"112.583819,26.898164|13"},{n:"\u6000\u5316",g:"109.986959,27.557483|13"},{n:"\u5A04\u5E95",g:"111.996396,27.741073|13"},{n:"\u90B5\u9633",g:"111.461525,27.236811|13"},{n:"\u6E58\u6F6D",g:"112.935556,27.835095|13"},{n:"\u6E58\u897F\u5DDE",g:"109.745746,28.317951|14"},{n:"\u76CA\u9633",g:"112.366547,28.588088|13"},{n:"\u6C38\u5DDE",g:"111.614648,26.435972|13"},{n:"\u5CB3\u9633",g:"113.146196,29.378007|13"},{n:"\u5F20\u5BB6\u754C",g:"110.48162,29.124889|13"},{n:"\u682A\u6D32",g:"113.131695,27.827433|13"}]},{n:"\u6C5F\u82CF",g:"119.368489,33.013797|8",cities:[{n:"\u5357\u4EAC",g:"118.778074,32.057236|12"},{n:"\u5E38\u5DDE",g:"119.981861,31.771397|12"},{n:"\u6DEE\u5B89",g:"119.030186,33.606513|12"},{n:"\u8FDE\u4E91\u6E2F",g:"119.173872,34.601549|12"},{n:"\u5357\u901A",g:"120.873801,32.014665|12"},{n:"\u82CF\u5DDE",g:"120.619907,31.317987|12"},{n:"\u5BBF\u8FC1",g:"118.296893,33.95205|13"},{n:"\u6CF0\u5DDE",g:"119.919606,32.476053|13"},{n:"\u65E0\u9521",g:"120.305456,31.570037|12"},{n:"\u5F90\u5DDE",g:"117.188107,34.271553|12"},{n:"\u76D0\u57CE",g:"120.148872,33.379862|12"},{n:"\u626C\u5DDE",g:"119.427778,32.408505|13"},{n:"\u9547\u6C5F",g:"119.455835,32.204409|13"}]},{n:"\u6C5F\u897F",g:"115.676082,27.757258|7",cities:[{n:"\u5357\u660C",g:"115.893528,28.689578|12"},{n:"\u629A\u5DDE",g:"116.360919,27.954545|13"},{n:"\u8D63\u5DDE",g:"114.935909,25.845296|13"},{n:"\u5409\u5B89",g:"114.992039,27.113848|13"},{n:"\u666F\u5FB7\u9547",g:"117.186523,29.303563|12"},{n:"\u4E5D\u6C5F",g:"115.999848,29.71964|13"},{n:"\u840D\u4E61",g:"113.859917,27.639544|13"},{n:"\u4E0A\u9976",g:"117.955464,28.457623|13"},{n:"\u65B0\u4F59",g:"114.947117,27.822322|13"},{n:"\u5B9C\u6625",g:"114.400039,27.81113|13"},{n:"\u9E70\u6F6D",g:"117.03545,28.24131|13"}]},{n:"\u5409\u6797",g:"126.262876,43.678846|7",cities:[{n:"\u957F\u6625",g:"125.313642,43.898338|12"},{n:"\u767D\u57CE",g:"122.840777,45.621086|13"},{n:"\u767D\u5C71",g:"126.435798,41.945859|13"},{n:"\u5409\u6797",g:"126.564544,43.871988|12"},{n:"\u8FBD\u6E90",g:"125.133686,42.923303|13"},{n:"\u56DB\u5E73",g:"124.391382,43.175525|12"},{n:"\u677E\u539F",g:"124.832995,45.136049|13"},{n:"\u901A\u5316",g:"125.94265,41.736397|13"},{n:"\u5EF6\u8FB9",g:"129.485902,42.896414|13"}]},{n:"\u8FBD\u5B81",g:"122.753592,41.6216|8",cities:[{n:"\u6C88\u9633",g:"123.432791,41.808645|12"},{n:"\u978D\u5C71",g:"123.007763,41.118744|13"},{n:"\u672C\u6EAA",g:"123.778062,41.325838|12"},{n:"\u671D\u9633",g:"120.446163,41.571828|13"},{n:"\u5927\u8FDE",g:"121.593478,38.94871|12"},{n:"\u4E39\u4E1C",g:"124.338543,40.129023|12"},{n:"\u629A\u987A",g:"123.92982,41.877304|12"},{n:"\u961C\u65B0",g:"121.660822,42.01925|14"},{n:"\u846B\u82A6\u5C9B",g:"120.860758,40.74303|13"},{n:"\u9526\u5DDE",g:"121.147749,41.130879|13"},{n:"\u8FBD\u9633",g:"123.172451,41.273339|14"},{n:"\u76D8\u9526",g:"122.073228,41.141248|13"},{n:"\u94C1\u5CAD",g:"123.85485,42.299757|13"},{n:"\u8425\u53E3",g:"122.233391,40.668651|13"}]},{n:"\u5185\u8499\u53E4",g:"114.415868,43.468238|5",cities:[{n:"\u547C\u548C\u6D69\u7279",g:"111.660351,40.828319|12"},{n:"\u963F\u62C9\u5584\u76DF",g:"105.695683,38.843075|14"},{n:"\u5305\u5934",g:"109.846239,40.647119|12"},{n:"\u5DF4\u5F66\u6DD6\u5C14",g:"107.423807,40.76918|12"},{n:"\u8D64\u5CF0",g:"118.930761,42.297112|12"},{n:"\u9102\u5C14\u591A\u65AF",g:"109.993706,39.81649|12"},{n:"\u547C\u4F26\u8D1D\u5C14",g:"119.760822,49.201636|12"},{n:"\u901A\u8FBD",g:"122.260363,43.633756|12"},{n:"\u4E4C\u6D77",g:"106.831999,39.683177|13"},{n:"\u4E4C\u5170\u5BDF\u5E03",g:"113.112846,41.022363|12"},{n:"\u9521\u6797\u90ED\u52D2\u76DF",g:"116.02734,43.939705|11"},{n:"\u5174\u5B89\u76DF",g:"122.048167,46.083757|11"}]},{n:"\u5B81\u590F",g:"106.155481,37.321323|8",cities:[{n:"\u94F6\u5DDD",g:"106.206479,38.502621|12"},{n:"\u56FA\u539F",g:"106.285268,36.021523|13"},{n:"\u77F3\u5634\u5C71",g:"106.379337,39.020223|13"},{n:"\u5434\u5FE0",g:"106.208254,37.993561|14"},{n:"\u4E2D\u536B",g:"105.196754,37.521124|14"}]},{n:"\u9752\u6D77",g:"96.202544,35.499761|7",cities:[{n:"\u897F\u5B81",g:"101.767921,36.640739|12"},{n:"\u679C\u6D1B\u5DDE",g:"100.223723,34.480485|11"},{n:"\u6D77\u4E1C\u5730\u533A",g:"102.085207,36.51761|11"},{n:"\u6D77\u5317\u5DDE",g:"100.879802,36.960654|11"},{n:"\u6D77\u5357\u5DDE",g:"100.624066,36.284364|11"},{n:"\u6D77\u897F\u5DDE",g:"97.342625,37.373799|11"},{n:"\u9EC4\u5357\u5DDE",g:"102.0076,35.522852|11"},{n:"\u7389\u6811\u5DDE",g:"97.013316,33.00624|14"}]},{n:"\u5C71\u4E1C",g:"118.527663,36.09929|8",cities:[{n:"\u6D4E\u5357",g:"117.024967,36.682785|12"},{n:"\u6EE8\u5DDE",g:"117.968292,37.405314|12"},{n:"\u4E1C\u8425",g:"118.583926,37.487121|12"},{n:"\u5FB7\u5DDE",g:"116.328161,37.460826|12"},{n:"\u83CF\u6CFD",g:"115.46336,35.26244|13"},{n:"\u6D4E\u5B81",g:"116.600798,35.402122|13"},{n:"\u83B1\u829C",g:"117.684667,36.233654|13"},{n:"\u804A\u57CE",g:"115.986869,36.455829|12"},{n:"\u4E34\u6C82",g:"118.340768,35.072409|12"},{n:"\u9752\u5C9B",g:"120.384428,36.105215|12"},{n:"\u65E5\u7167",g:"119.50718,35.420225|12"},{n:"\u6CF0\u5B89",g:"117.089415,36.188078|13"},{n:"\u5A01\u6D77",g:"122.093958,37.528787|13"},{n:"\u6F4D\u574A",g:"119.142634,36.716115|12"},{n:"\u70DF\u53F0",g:"121.309555,37.536562|12"},{n:"\u67A3\u5E84",g:"117.279305,34.807883|13"},{n:"\u6DC4\u535A",g:"118.059134,36.804685|12"}]},{n:"\u5C71\u897F",g:"112.515496,37.866566|7",cities:[{n:"\u592A\u539F",g:"112.550864,37.890277|12"},{n:"\u957F\u6CBB",g:"113.120292,36.201664|12"},{n:"\u5927\u540C",g:"113.290509,40.113744|12"},{n:"\u664B\u57CE",g:"112.867333,35.499834|13"},{n:"\u664B\u4E2D",g:"112.738514,37.693362|13"},{n:"\u4E34\u6C7E",g:"111.538788,36.099745|13"},{n:"\u5415\u6881",g:"111.143157,37.527316|14"},{n:"\u6714\u5DDE",g:"112.479928,39.337672|13"},{n:"\u5FFB\u5DDE",g:"112.727939,38.461031|12"},{n:"\u9633\u6CC9",g:"113.569238,37.869529|13"},{n:"\u8FD0\u57CE",g:"111.006854,35.038859|13"}]},{n:"\u9655\u897F",g:"109.503789,35.860026|7",cities:[{n:"\u897F\u5B89",g:"108.953098,34.2778|12"},{n:"\u5B89\u5EB7",g:"109.038045,32.70437|13"},{n:"\u5B9D\u9E21",g:"107.170645,34.364081|12"},{n:"\u6C49\u4E2D",g:"107.045478,33.081569|13"},{n:"\u5546\u6D1B",g:"109.934208,33.873907|13"},{n:"\u94DC\u5DDD",g:"108.968067,34.908368|13"},{n:"\u6E2D\u5357",g:"109.483933,34.502358|13"},{n:"\u54B8\u9633",g:"108.707509,34.345373|13"},{n:"\u5EF6\u5B89",g:"109.50051,36.60332|13"},{n:"\u6986\u6797",g:"109.745926,38.279439|12"}]},{n:"\u56DB\u5DDD",g:"102.89916,30.367481|7",cities:[{n:"\u6210\u90FD",g:"104.067923,30.679943|12"},{n:"\u963F\u575D\u5DDE",g:"102.228565,31.905763|15"},{n:"\u5DF4\u4E2D",g:"106.757916,31.869189|14"},{n:"\u8FBE\u5DDE",g:"107.494973,31.214199|14"},{n:"\u5FB7\u9633",g:"104.402398,31.13114|13"},{n:"\u7518\u5B5C\u5DDE",g:"101.969232,30.055144|15"},{n:"\u5E7F\u5B89",g:"106.63572,30.463984|13"},{n:"\u5E7F\u5143",g:"105.819687,32.44104|13"},{n:"\u4E50\u5C71",g:"103.760824,29.600958|13"},{n:"\u51C9\u5C71\u5DDE",g:"102.259591,27.892393|14"},{n:"\u6CF8\u5DDE",g:"105.44397,28.89593|14"},{n:"\u5357\u5145",g:"106.105554,30.800965|13"},{n:"\u7709\u5C71",g:"103.84143,30.061115|13"},{n:"\u7EF5\u9633",g:"104.705519,31.504701|12"},{n:"\u5185\u6C5F",g:"105.073056,29.599462|13"},{n:"\u6500\u679D\u82B1",g:"101.722423,26.587571|14"},{n:"\u9042\u5B81",g:"105.564888,30.557491|12"},{n:"\u96C5\u5B89",g:"103.009356,29.999716|13"},{n:"\u5B9C\u5BBE",g:"104.633019,28.769675|13"},{n:"\u8D44\u9633",g:"104.63593,30.132191|13"},{n:"\u81EA\u8D21",g:"104.776071,29.359157|13"}]},{n:"\u897F\u85CF",g:"89.137982,31.367315|6",cities:[{n:"\u62C9\u8428",g:"91.111891,29.662557|13"},{n:"\u963F\u91CC\u5730\u533A",g:"81.107669,30.404557|11"},{n:"\u660C\u90FD\u5730\u533A",g:"97.185582,31.140576|15"},{n:"\u6797\u829D\u5730\u533A",g:"94.349985,29.666941|11"},{n:"\u90A3\u66F2\u5730\u533A",g:"92.067018,31.48068|14"},{n:"\u65E5\u5580\u5219\u5730\u533A",g:"88.891486,29.269023|14"},{n:"\u5C71\u5357\u5730\u533A",g:"91.750644,29.229027|11"}]},{n:"\u65B0\u7586",g:"85.614899,42.127001|6",cities:[{n:"\u4E4C\u9C81\u6728\u9F50",g:"87.564988,43.84038|12"},{n:"\u963F\u62C9\u5C14",g:"81.291737,40.61568|13"},{n:"\u963F\u514B\u82CF\u5730\u533A",g:"80.269846,41.171731|12"},{n:"\u963F\u52D2\u6CF0\u5730\u533A",g:"88.137915,47.839744|13"},{n:"\u5DF4\u97F3\u90ED\u695E",g:"86.121688,41.771362|12"},{n:"\u535A\u5C14\u5854\u62C9\u5DDE",g:"82.052436,44.913651|11"},{n:"\u660C\u5409\u5DDE",g:"87.296038,44.007058|13"},{n:"\u54C8\u5BC6\u5730\u533A",g:"93.528355,42.858596|13"},{n:"\u548C\u7530\u5730\u533A",g:"79.930239,37.116774|13"},{n:"\u5580\u4EC0\u5730\u533A",g:"75.992973,39.470627|12"},{n:"\u514B\u62C9\u739B\u4F9D",g:"84.88118,45.594331|13"},{n:"\u514B\u5B5C\u52D2\u82CF\u5DDE",g:"76.137564,39.750346|11"},{n:"\u77F3\u6CB3\u5B50",g:"86.041865,44.308259|13"},{n:"\u5854\u57CE\u5730\u533A",g:"82.974881,46.758684|12"},{n:"\u56FE\u6728\u8212\u514B",g:"79.198155,39.889223|13"},{n:"\u5410\u9C81\u756A\u5730\u533A",g:"89.181595,42.96047|13"},{n:"\u4E94\u5BB6\u6E20",g:"87.565449,44.368899|13"},{n:"\u4F0A\u7281\u5DDE",g:"81.297854,43.922248|11"}]},{n:"\u4E91\u5357",g:"101.592952,24.864213|7",cities:[{n:"\u6606\u660E",g:"102.714601,25.049153|12"},{n:"\u4FDD\u5C71",g:"99.177996,25.120489|13"},{n:"\u695A\u96C4\u5DDE",g:"101.529382,25.066356|13"},{n:"\u5927\u7406\u5DDE",g:"100.223675,25.5969|14"},{n:"\u5FB7\u5B8F\u5DDE",g:"98.589434,24.44124|14"},{n:"\u8FEA\u5E86\u5DDE",g:"99.713682,27.831029|14"},{n:"\u7EA2\u6CB3\u5DDE",g:"103.384065,23.367718|11"},{n:"\u4E3D\u6C5F",g:"100.229628,26.875351|13"},{n:"\u4E34\u6CA7",g:"100.092613,23.887806|14"},{n:"\u6012\u6C5F\u5DDE",g:"98.859932,25.860677|14"},{n:"\u666E\u6D31",g:"100.980058,22.788778|14"},{n:"\u66F2\u9756",g:"103.782539,25.520758|12"},{n:"\u662D\u901A",g:"103.725021,27.340633|13"},{n:"\u6587\u5C71",g:"104.089112,23.401781|14"},{n:"\u897F\u53CC\u7248\u7EB3",g:"100.803038,22.009433|13"},{n:"\u7389\u6EAA",g:"102.545068,24.370447|13"}]},{n:"\u6D59\u6C5F",g:"119.957202,29.159494|8",cities:[{n:"\u676D\u5DDE",g:"120.219375,30.259244|12"},{n:"\u6E56\u5DDE",g:"120.137243,30.877925|12"},{n:"\u5609\u5174",g:"120.760428,30.773992|13"},{n:"\u91D1\u534E",g:"119.652576,29.102899|12"},{n:"\u4E3D\u6C34",g:"119.929576,28.4563|13"},{n:"\u5B81\u6CE2",g:"121.579006,29.885259|12"},{n:"\u8862\u5DDE",g:"118.875842,28.95691|12"},{n:"\u7ECD\u5174",g:"120.592467,30.002365|13"},{n:"\u53F0\u5DDE",g:"121.440613,28.668283|13"},{n:"\u6E29\u5DDE",g:"120.690635,28.002838|12"},{n:"\u821F\u5C71",g:"122.169872,30.03601|13"}]}],hs=[{n:"\u9999\u6E2F",g:"114.186124,22.293586|11"},{n:"\u6FB3\u95E8",g:"113.557519,22.204118|13"},{n:"\u53F0\u6E7E",g:"120.961454,23.80406|8"}],vf=void 0,ou=function(){if(vf!==void 0)return vf;var m=navigator.userAgent,o="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";");vf=!1;for(var c=0;c<o.length;c++)if(0<m.indexOf(o[c])){vf=!0;break}return vf}(),gd=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),yf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ol=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),hp=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Su=Array(576);Gr(Su);var xf=Array(60);Gr(xf);var Eh=Array(512);Gr(Eh);var bh=Array(256);Gr(bh);var Lh=Array(29);Gr(Lh);var Af=Array(30);Gr(Af);var Cf=void 0,md=void 0,Ph=void 0,Tu=function(o,c){o.pending_buf[o.pending++]=c&255,o.pending_buf[o.pending++]=c>>>8&255},ys=function(o,c,s){o.bi_valid>16-s?(o.bi_buf|=c<<o.bi_valid&65535,Tu(o,o.bi_buf),o.bi_buf=c>>16-o.bi_valid,o.bi_valid+=s-16):(o.bi_buf|=c<<o.bi_valid&65535,o.bi_valid+=s)},xs=function(o,c,s){ys(o,s[2*c],s[2*c+1])},$c=function(o,c){var s=0;do s|=o&1,o>>>=1,s<<=1;while(0<--c);return s>>>1},Pa=function(o,c,s){var h=Array(16),f=0,x;for(x=1;15>=x;x++)h[x]=f=f+s[x-1]<<1;for(s=0;s<=c;s++)f=o[2*s+1],f!==0&&(o[2*s]=$c(h[f]++,f))},As=function(o){var c;for(c=0;286>c;c++)o.dyn_ltree[2*c]=0;for(c=0;30>c;c++)o.dyn_dtree[2*c]=0;for(c=0;19>c;c++)o.bl_tree[2*c]=0;o.dyn_ltree[512]=1,o.opt_len=o.static_len=0,o.last_lit=o.matches=0},eh=function(o){8<o.bi_valid?Tu(o,o.bi_buf):0<o.bi_valid&&(o.pending_buf[o.pending++]=o.bi_buf),o.bi_buf=0,o.bi_valid=0},au=function(o,c,s,h){var f=2*c,x=2*s;return o[f]<o[x]||o[f]===o[x]&&h[c]<=h[s]},Va=function(o,c,s){for(var h=o.heap[s],f=s<<1;f<=o.heap_len&&(f<o.heap_len&&au(c,o.heap[f+1],o.heap[f],o.depth)&&f++,!au(c,h,o.heap[f],o.depth));)o.heap[s]=o.heap[f],s=f,f<<=1;o.heap[s]=h},ng=function(o,c,s){var h=0;if(o.last_lit!==0)do{var f=o.pending_buf[o.d_buf+2*h]<<8|o.pending_buf[o.d_buf+2*h+1],x=o.pending_buf[o.l_buf+h];if(h++,f===0)xs(o,x,c);else{var g=bh[x];xs(o,g+256+1,c);var _=gd[g];_!==0&&(x-=Lh[g],ys(o,x,_)),f--,g=256>f?Eh[f]:Eh[256+(f>>>7)],xs(o,g,s),_=yf[g],_!==0&&(f-=Af[g],ys(o,f,_))}}while(h<o.last_lit);xs(o,256,c)},wf=function(o,c){var s=c.dyn_tree,h=c.stat_desc.static_tree,f=c.stat_desc.has_stree,x=c.stat_desc.elems,g,_=-1;for(o.heap_len=0,o.heap_max=573,g=0;g<x;g++)s[2*g]!==0?(o.heap[++o.heap_len]=_=g,o.depth[g]=0):s[2*g+1]=0;for(;2>o.heap_len;){var L=o.heap[++o.heap_len]=2>_?++_:0;s[2*L]=1,o.depth[L]=0,o.opt_len--,f&&(o.static_len-=h[2*L+1])}for(c.max_code=_,g=o.heap_len>>1;1<=g;g--)Va(o,s,g);L=x;do g=o.heap[1],o.heap[1]=o.heap[o.heap_len--],Va(o,s,1),h=o.heap[1],o.heap[--o.heap_max]=g,o.heap[--o.heap_max]=h,s[2*L]=s[2*g]+s[2*h],o.depth[L]=(o.depth[g]>=o.depth[h]?o.depth[g]:o.depth[h])+1,s[2*g+1]=s[2*h+1]=L,o.heap[1]=L++,Va(o,s,1);while(2<=o.heap_len);o.heap[--o.heap_max]=o.heap[1],g=c.dyn_tree,L=c.max_code,h=c.stat_desc.static_tree,f=c.stat_desc.has_stree,x=c.stat_desc.extra_bits;var F=c.stat_desc.extra_base,M=c.stat_desc.max_length,E,P=0;for(E=0;15>=E;E++)o.bl_count[E]=0;for(g[2*o.heap[o.heap_max]+1]=0,c=o.heap_max+1;573>c;c++){var O=o.heap[c];if(E=g[2*g[2*O+1]+1]+1,E>M&&(E=M,P++),g[2*O+1]=E,!(O>L)){o.bl_count[E]++;var B=0;O>=F&&(B=x[O-F]);var X=g[2*O];o.opt_len+=X*(E+B),f&&(o.static_len+=X*(h[2*O+1]+B))}}if(P!==0){do{for(E=M-1;o.bl_count[E]===0;)E--;o.bl_count[E]--,o.bl_count[E+1]+=2,o.bl_count[M]--,P-=2}while(0<P);for(E=M;E!==0;E--)for(O=o.bl_count[E];O!==0;)h=o.heap[--c],h>L||(g[2*h+1]!==E&&(o.opt_len+=(E-g[2*h+1])*g[2*h],g[2*h+1]=E),O--)}Pa(s,_,o.bl_count)},Ic=function(o,c,s){var h,f=-1,x=c[1],g=0,_=7,L=4;for(x===0&&(_=138,L=3),c[2*(s+1)+1]=65535,h=0;h<=s;h++){var F=x;x=c[2*(h+1)+1],++g<_&&F===x||(g<L?o.bl_tree[2*F]+=g:F!==0?(F!==f&&o.bl_tree[2*F]++,o.bl_tree[32]++):10>=g?o.bl_tree[34]++:o.bl_tree[36]++,g=0,f=F,x===0?(_=138,L=3):F===x?(_=6,L=3):(_=7,L=4))}},th=function(o,c,s){var h,f=-1,x=c[1],g=0,_=7,L=4;for(x===0&&(_=138,L=3),h=0;h<=s;h++){var F=x;if(x=c[2*(h+1)+1],!(++g<_&&F===x)){if(g<L)do xs(o,F,o.bl_tree);while(--g!=0);else F!==0?(F!==f&&(xs(o,F,o.bl_tree),g--),xs(o,16,o.bl_tree),ys(o,g-3,2)):10>=g?(xs(o,17,o.bl_tree),ys(o,g-3,3)):(xs(o,18,o.bl_tree),ys(o,g-11,7));g=0,f=F,x===0?(_=138,L=3):F===x?(_=6,L=3):(_=7,L=4)}}},fs=function(o){var c=4093624447,s;for(s=0;31>=s;s++,c>>>=1)if(c&1&&o.dyn_ltree[2*s]!==0)return 0;if(o.dyn_ltree[18]!==0||o.dyn_ltree[20]!==0||o.dyn_ltree[26]!==0)return 1;for(s=32;256>s;s++)if(o.dyn_ltree[2*s]!==0)return 1;return 0},vd=!1,_f=function(o,c,s,h){ys(o,h?1:0,3),eh(o),Tu(o,s),Tu(o,~s),o.pending_buf.set(o.window.subarray(c,c+s),o.pending),o.pending+=s},Rh=function(o,c,s,h){var f=o&65535|0;o=o>>>16&65535|0;for(var x;s!==0;){x=2e3<s?2e3:s,s-=x;do f=f+c[h++]|0,o=o+f|0;while(--x);f%=65521,o%=65521}return f|o<<16|0},p0=new Uint32Array(function(){for(var m,o=[],c=0;256>c;c++){m=c;for(var s=0;8>s;s++)m=m&1?3988292384^m>>>1:m>>>1;o[c]=m}return o}()),Cs=function(o,c,s,h){for(s=h+s,o^=-1;h<s;h++)o=o>>>8^p0[(o^c[h])&255];return o^-1},Ki={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ri={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},qo=function(o,c,s){return o.pending_buf[o.d_buf+2*o.last_lit]=c>>>8&255,o.pending_buf[o.d_buf+2*o.last_lit+1]=c&255,o.pending_buf[o.l_buf+o.last_lit]=s&255,o.last_lit++,c===0?o.dyn_ltree[2*s]++:(o.matches++,c--,o.dyn_ltree[2*(bh[s]+256+1)]++,o.dyn_dtree[2*(256>c?Eh[c]:Eh[256+(c>>>7)])]++),o.last_lit===o.lit_bufsize-1},po=ri.Z_NO_FLUSH,fp=ri.Z_PARTIAL_FLUSH,ds=ri.Z_FULL_FLUSH,vl=ri.Z_FINISH,xi=ri.Z_BLOCK,Un=ri.Z_OK,Ju=ri.Z_STREAM_END,sa=ri.Z_STREAM_ERROR,Wa=ri.Z_DATA_ERROR,Ds=ri.Z_BUF_ERROR,Ec=ri.Z_DEFAULT_COMPRESSION,yl=ri.Z_FILTERED,Dl=ri.Z_HUFFMAN_ONLY,Mf=ri.Z_RLE,om=ri.Z_FIXED,yd=ri.Z_DEFAULT_STRATEGY,dp=ri.Z_UNKNOWN,el=ri.Z_DEFLATED,tl=function(o,c){return o.msg=Ki[c],c},ws=function(o){for(var c=o.length;0<=--c;)o[c]=0},rh=function(o,c,s){return(c<<o.hash_shift^s)&o.hash_mask},uo=function(o){var c=o.state,s=c.pending;s>o.avail_out&&(s=o.avail_out),s!==0&&(o.output.set(c.pending_buf.subarray(c.pending_out,c.pending_out+s),o.next_out),o.next_out+=s,c.pending_out+=s,o.total_out+=s,o.avail_out-=s,c.pending-=s,c.pending===0&&(c.pending_out=0))},ya=function(o,c){var s=0<=o.block_start?o.block_start:-1,h=o.strstart-o.block_start,f=0;if(0<o.level){for(o.strm.data_type===2&&(o.strm.data_type=fs(o)),wf(o,o.l_desc),wf(o,o.d_desc),Ic(o,o.dyn_ltree,o.l_desc.max_code),Ic(o,o.dyn_dtree,o.d_desc.max_code),wf(o,o.bl_desc),f=18;3<=f&&o.bl_tree[2*hp[f]+1]===0;f--);o.opt_len+=3*(f+1)+14;var x=o.opt_len+3+7>>>3,g=o.static_len+3+7>>>3;g<=x&&(x=g)}else x=g=h+5;if(h+4<=x&&s!==-1)_f(o,s,h,c);else if(o.strategy===4||g===x)ys(o,2+(c?1:0),3),ng(o,Su,xf);else{for(ys(o,4+(c?1:0),3),s=o.l_desc.max_code+1,h=o.d_desc.max_code+1,f+=1,ys(o,s-257,5),ys(o,h-1,5),ys(o,f-4,4),x=0;x<f;x++)ys(o,o.bl_tree[2*hp[x]+1],3);th(o,o.dyn_ltree,s-1),th(o,o.dyn_dtree,h-1),ng(o,o.dyn_ltree,o.dyn_dtree)}As(o),c&&eh(o),o.block_start=o.strstart,uo(o.strm)},_r=function(o,c){o.pending_buf[o.pending++]=c},xd=function(o,c){o.pending_buf[o.pending++]=c>>>8&255,o.pending_buf[o.pending++]=c&255},ig=function(o,c){var s=o.max_chain_length,h=o.strstart,f=o.prev_length,x=o.nice_match,g=o.strstart>o.w_size-262?o.strstart-(o.w_size-262):0,_=o.window,L=o.w_mask,F=o.prev,M=o.strstart+258,E=_[h+f-1],P=_[h+f];o.prev_length>=o.good_match&&(s>>=2),x>o.lookahead&&(x=o.lookahead);do{var O=c;if(_[O+f]===P&&_[O+f-1]===E&&_[O]===_[h]&&_[++O]===_[h+1]){for(h+=2,O++;_[++h]===_[++O]&&_[++h]===_[++O]&&_[++h]===_[++O]&&_[++h]===_[++O]&&_[++h]===_[++O]&&_[++h]===_[++O]&&_[++h]===_[++O]&&_[++h]===_[++O]&&h<M;);if(O=258-(M-h),h=M-258,O>f){if(o.match_start=c,f=O,O>=x)break;E=_[h+f-1],P=_[h+f]}}}while((c=F[c&L])>g&&--s!=0);return f<=o.lookahead?f:o.lookahead},Sf=function(o){var c=o.w_size,s;do{var h=o.window_size-o.lookahead-o.strstart;if(o.strstart>=c+(c-262)){o.window.set(o.window.subarray(c,c+c),0),o.match_start-=c,o.strstart-=c,o.block_start-=c;var f=s=o.hash_size;do{var x=o.head[--f];o.head[f]=x>=c?x-c:0}while(--s);f=s=c;do x=o.prev[--f],o.prev[f]=x>=c?x-c:0;while(--s);h+=c}if(o.strm.avail_in===0)break;f=o.strm,s=o.window,x=o.strstart+o.lookahead;var g=f.avail_in;if(g>h&&(g=h),g===0?s=0:(f.avail_in-=g,s.set(f.input.subarray(f.next_in,f.next_in+g),x),f.state.wrap===1?f.adler=Rh(f.adler,s,g,x):f.state.wrap===2&&(f.adler=Cs(f.adler,s,g,x)),f.next_in+=g,f.total_in+=g,s=g),o.lookahead+=s,3<=o.lookahead+o.insert)for(h=o.strstart-o.insert,o.ins_h=o.window[h],o.ins_h=rh(o,o.ins_h,o.window[h+1]);o.insert&&(o.ins_h=rh(o,o.ins_h,o.window[h+3-1]),o.prev[h&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=h,h++,o.insert--,!(3>o.lookahead+o.insert)););}while(262>o.lookahead&&o.strm.avail_in!==0)},pp=function(o,c){for(var s;;){if(262>o.lookahead){if(Sf(o),262>o.lookahead&&c===po)return 1;if(o.lookahead===0)break}if(s=0,3<=o.lookahead&&(o.ins_h=rh(o,o.ins_h,o.window[o.strstart+3-1]),s=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),s!==0&&o.strstart-s<=o.w_size-262&&(o.match_length=ig(o,s)),3<=o.match_length)if(s=qo(o,o.strstart-o.match_start,o.match_length-3),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&3<=o.lookahead){o.match_length--;do o.strstart++,o.ins_h=rh(o,o.ins_h,o.window[o.strstart+3-1]),o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart;while(--o.match_length!=0);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=rh(o,o.ins_h,o.window[o.strstart+1]);else s=qo(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(s&&(ya(o,!1),o.strm.avail_out===0))return 1}return o.insert=2>o.strstart?o.strstart:2,c===vl?(ya(o,!0),o.strm.avail_out===0?3:4):o.last_lit&&(ya(o,!1),o.strm.avail_out===0)?1:2},Tf=function(o,c){for(var s,h;;){if(262>o.lookahead){if(Sf(o),262>o.lookahead&&c===po)return 1;if(o.lookahead===0)break}if(s=0,3<=o.lookahead&&(o.ins_h=rh(o,o.ins_h,o.window[o.strstart+3-1]),s=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=2,s!==0&&o.prev_length<o.max_lazy_match&&o.strstart-s<=o.w_size-262&&(o.match_length=ig(o,s),5>=o.match_length&&(o.strategy===yl||o.match_length===3&&4096<o.strstart-o.match_start)&&(o.match_length=2)),3<=o.prev_length&&o.match_length<=o.prev_length){h=o.strstart+o.lookahead-3,s=qo(o,o.strstart-1-o.prev_match,o.prev_length-3),o.lookahead-=o.prev_length-1,o.prev_length-=2;do++o.strstart<=h&&(o.ins_h=rh(o,o.ins_h,o.window[o.strstart+3-1]),o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart);while(--o.prev_length!=0);if(o.match_available=0,o.match_length=2,o.strstart++,s&&(ya(o,!1),o.strm.avail_out===0))return 1}else if(o.match_available){if((s=qo(o,0,o.window[o.strstart-1]))&&ya(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return 1}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(qo(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=2>o.strstart?o.strstart:2,c===vl?(ya(o,!0),o.strm.avail_out===0?3:4):o.last_lit&&(ya(o,!1),o.strm.avail_out===0)?1:2},og=function(o,c){for(var s,h,f,x=o.window;;){if(258>=o.lookahead){if(Sf(o),258>=o.lookahead&&c===po)return 1;if(o.lookahead===0)break}if(o.match_length=0,3<=o.lookahead&&0<o.strstart&&(h=o.strstart-1,s=x[h],s===x[++h]&&s===x[++h]&&s===x[++h])){for(f=o.strstart+258;s===x[++h]&&s===x[++h]&&s===x[++h]&&s===x[++h]&&s===x[++h]&&s===x[++h]&&s===x[++h]&&s===x[++h]&&h<f;);o.match_length=258-(f-h),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(3<=o.match_length?(s=qo(o,1,o.match_length-3),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(s=qo(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),s&&(ya(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,c===vl?(ya(o,!0),o.strm.avail_out===0?3:4):o.last_lit&&(ya(o,!1),o.strm.avail_out===0)?1:2},nh=function(o,c){for(var s;;){if(o.lookahead===0&&(Sf(o),o.lookahead===0)){if(c===po)return 1;break}if(o.match_length=0,s=qo(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,s&&(ya(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,c===vl?(ya(o,!0),o.strm.avail_out===0?3:4):o.last_lit&&(ya(o,!1),o.strm.avail_out===0)?1:2},Xs=[new wr(0,0,0,0,function(m,o){var c=65535;for(c>m.pending_buf_size-5&&(c=m.pending_buf_size-5);;){if(1>=m.lookahead){if(Sf(m),m.lookahead===0&&o===po)return 1;if(m.lookahead===0)break}m.strstart+=m.lookahead,m.lookahead=0;var s=m.block_start+c;if((m.strstart===0||m.strstart>=s)&&(m.lookahead=m.strstart-s,m.strstart=s,ya(m,!1),m.strm.avail_out===0)||m.strstart-m.block_start>=m.w_size-262&&(ya(m,!1),m.strm.avail_out===0))return 1}return m.insert=0,o===vl?(ya(m,!0),m.strm.avail_out===0?3:4):(m.strstart>m.block_start&&ya(m,!1),1)}),new wr(4,4,8,4,pp),new wr(4,5,16,8,pp),new wr(4,6,32,32,pp),new wr(4,4,16,16,Tf),new wr(8,16,32,32,Tf),new wr(8,16,128,128,Tf),new wr(8,32,128,256,Tf),new wr(32,128,258,1024,Tf),new wr(32,258,258,4096,Tf)],vv=function(o){if(!o||!o.state)return tl(o,sa);o.total_in=o.total_out=0,o.data_type=dp;var c=o.state;if(c.pending=0,c.pending_out=0,0>c.wrap&&(c.wrap=-c.wrap),c.status=c.wrap?42:113,o.adler=c.wrap===2?0:1,c.last_flush=po,!vd){var s,h,f;for(o=Array(16),f=h=0;28>f;f++)for(Lh[f]=h,s=0;s<1<<gd[f];s++)bh[h++]=f;for(bh[h-1]=f,f=h=0;16>f;f++)for(Af[f]=h,s=0;s<1<<yf[f];s++)Eh[h++]=f;for(h>>=7;30>f;f++)for(Af[f]=h<<7,s=0;s<1<<yf[f]-7;s++)Eh[256+h++]=f;for(s=0;15>=s;s++)o[s]=0;for(s=0;143>=s;)Su[2*s+1]=8,s++,o[8]++;for(;255>=s;)Su[2*s+1]=9,s++,o[9]++;for(;279>=s;)Su[2*s+1]=7,s++,o[7]++;for(;287>=s;)Su[2*s+1]=8,s++,o[8]++;for(Pa(Su,287,o),s=0;30>s;s++)xf[2*s+1]=5,xf[2*s]=$c(s,5);Cf=new kr(Su,gd,257,286,15),md=new kr(xf,yf,0,30,15),Ph=new kr([],Ol,0,19,7),vd=!0}return c.l_desc=new Nr(c.dyn_ltree,Cf),c.d_desc=new Nr(c.dyn_dtree,md),c.bl_desc=new Nr(c.bl_tree,Ph),c.bi_buf=0,c.bi_valid=0,As(c),Un},rl=function(o){var c=vv(o);return c===Un&&(o=o.state,o.window_size=2*o.w_size,ws(o.head),o.max_lazy_match=Xs[o.level].max_lazy,o.good_match=Xs[o.level].good_length,o.nice_match=Xs[o.level].nice_length,o.max_chain_length=Xs[o.level].max_chain,o.strstart=0,o.block_start=0,o.lookahead=0,o.insert=0,o.match_length=o.prev_length=2,o.match_available=0,o.ins_h=0),c},gp=function(o,c,s,h,f,x){if(!o)return sa;var g=1;if(c===Ec&&(c=6),0>h?(g=0,h=-h):15<h&&(g=2,h-=16),1>f||9<f||s!==el||8>h||15<h||0>c||9<c||0>x||x>om)return tl(o,sa);h===8&&(h=9);var _=new Jr;return o.state=_,_.strm=o,_.wrap=g,_.gzhead=null,_.w_bits=h,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=f+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<f+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=c,_.strategy=x,_.method=s,rl(o)},xl={deflateInit:function(o,c){return gp(o,c,el,15,8,yd)},deflateInit2:gp,deflateReset:rl,deflateResetKeep:vv,deflateSetHeader:function(o,c){return!o||!o.state||o.state.wrap!==2?sa:(o.state.gzhead=c,Un)},deflate:function(o,c){if(!o||!o.state||c>xi||0>c)return o?tl(o,sa):sa;var s=o.state;if(!o.output||!o.input&&o.avail_in!==0||s.status===666&&c!==vl)return tl(o,o.avail_out===0?Ds:sa);s.strm=o;var h=s.last_flush;if(s.last_flush=c,s.status===42)if(s.wrap===2)o.adler=0,_r(s,31),_r(s,139),_r(s,8),s.gzhead?(_r(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),_r(s,s.gzhead.time&255),_r(s,s.gzhead.time>>8&255),_r(s,s.gzhead.time>>16&255),_r(s,s.gzhead.time>>24&255),_r(s,s.level===9?2:s.strategy>=Dl||2>s.level?4:0),_r(s,s.gzhead.os&255),s.gzhead.extra&&s.gzhead.extra.length&&(_r(s,s.gzhead.extra.length&255),_r(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(o.adler=Cs(o.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(_r(s,0),_r(s,0),_r(s,0),_r(s,0),_r(s,0),_r(s,s.level===9?2:s.strategy>=Dl||2>s.level?4:0),_r(s,3),s.status=113);else{var f=el+(s.w_bits-8<<4)<<8;f|=(s.strategy>=Dl||2>s.level?0:6>s.level?1:s.level===6?2:3)<<6,s.strstart!==0&&(f|=32),s.status=113,xd(s,f+(31-f%31)),s.strstart!==0&&(xd(s,o.adler>>>16),xd(s,o.adler&65535)),o.adler=1}if(s.status===69)if(s.gzhead.extra){for(f=s.pending;s.gzindex<(s.gzhead.extra.length&65535)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>f&&(o.adler=Cs(o.adler,s.pending_buf,s.pending-f,f)),uo(o),f=s.pending,s.pending!==s.pending_buf_size));)_r(s,s.gzhead.extra[s.gzindex]&255),s.gzindex++;s.gzhead.hcrc&&s.pending>f&&(o.adler=Cs(o.adler,s.pending_buf,s.pending-f,f)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(s.status===73)if(s.gzhead.name){f=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>f&&(o.adler=Cs(o.adler,s.pending_buf,s.pending-f,f)),uo(o),f=s.pending,s.pending===s.pending_buf_size)){var x=1;break}x=s.gzindex<s.gzhead.name.length?s.gzhead.name.charCodeAt(s.gzindex++)&255:0,_r(s,x)}while(x!==0);s.gzhead.hcrc&&s.pending>f&&(o.adler=Cs(o.adler,s.pending_buf,s.pending-f,f)),x===0&&(s.gzindex=0,s.status=91)}else s.status=91;if(s.status===91)if(s.gzhead.comment){f=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>f&&(o.adler=Cs(o.adler,s.pending_buf,s.pending-f,f)),uo(o),f=s.pending,s.pending===s.pending_buf_size)){x=1;break}x=s.gzindex<s.gzhead.comment.length?s.gzhead.comment.charCodeAt(s.gzindex++)&255:0,_r(s,x)}while(x!==0);s.gzhead.hcrc&&s.pending>f&&(o.adler=Cs(o.adler,s.pending_buf,s.pending-f,f)),x===0&&(s.status=103)}else s.status=103;if(s.status===103&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&uo(o),s.pending+2<=s.pending_buf_size&&(_r(s,o.adler&255),_r(s,o.adler>>8&255),o.adler=0,s.status=113)):s.status=113),s.pending!==0){if(uo(o),o.avail_out===0)return s.last_flush=-1,Un}else if(o.avail_in===0&&(c<<1)-(4<c?9:0)<=(h<<1)-(4<h?9:0)&&c!==vl)return tl(o,Ds);if(s.status===666&&o.avail_in!==0)return tl(o,Ds);if(o.avail_in!==0||s.lookahead!==0||c!==po&&s.status!==666){if(h=s.strategy===Dl?nh(s,c):s.strategy===Mf?og(s,c):Xs[s.level].func(s,c),(h===3||h===4)&&(s.status=666),h===1||h===3)return o.avail_out===0&&(s.last_flush=-1),Un;if(h===2&&(c===fp?(ys(s,2,3),xs(s,256,Su),s.bi_valid===16?(Tu(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):8<=s.bi_valid&&(s.pending_buf[s.pending++]=s.bi_buf&255,s.bi_buf>>=8,s.bi_valid-=8)):c!==xi&&(_f(s,0,0,!1),c===ds&&(ws(s.head),s.lookahead===0&&(s.strstart=0,s.block_start=0,s.insert=0))),uo(o),o.avail_out===0))return s.last_flush=-1,Un}return c!==vl?Un:0>=s.wrap?Ju:(s.wrap===2?(_r(s,o.adler&255),_r(s,o.adler>>8&255),_r(s,o.adler>>16&255),_r(s,o.adler>>24&255),_r(s,o.total_in&255),_r(s,o.total_in>>8&255),_r(s,o.total_in>>16&255),_r(s,o.total_in>>24&255)):(xd(s,o.adler>>>16),xd(s,o.adler&65535)),uo(o),0<s.wrap&&(s.wrap=-s.wrap),s.pending!==0?Un:Ju)},deflateEnd:function(o){if(!o||!o.state)return sa;var c=o.state.status;return c!==42&&c!==69&&c!==73&&c!==91&&c!==103&&c!==113&&c!==666?tl(o,sa):(o.state=null,c===113?tl(o,Wa):Un)},deflateSetDictionary:function(o,c){var s=c.length;if(!o||!o.state)return sa;var h=o.state,f=h.wrap;if(f===2||f===1&&h.status!==42||h.lookahead)return sa;if(f===1&&(o.adler=Rh(o.adler,c,s,0)),h.wrap=0,s>=h.w_size){f===0&&(ws(h.head),h.strstart=0,h.block_start=0,h.insert=0);var x=new Uint8Array(h.w_size);x.set(c.subarray(s-h.w_size,s),0),c=x,s=h.w_size}x=o.avail_in;var g=o.next_in,_=o.input;for(o.avail_in=s,o.next_in=0,o.input=c,Sf(h);3<=h.lookahead;){c=h.strstart,s=h.lookahead-2;do h.ins_h=rh(h,h.ins_h,h.window[c+3-1]),h.prev[c&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=c,c++;while(--s);h.strstart=c,h.lookahead=2,Sf(h)}return h.strstart+=h.lookahead,h.block_start=h.strstart,h.insert=h.lookahead,h.lookahead=0,h.match_length=h.prev_length=2,h.match_available=0,o.next_in=g,o.input=_,o.avail_in=x,h.wrap=f,Un},deflateInfo:"pako deflate (from Nodeca project)"},ih={assign:function(o){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var s=c.shift();if(s){if((typeof s=="undefined"?"undefined":Ta(s))!=="object")throw new TypeError(s+"must be non-object");for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(o[h]=s[h])}}return o},flattenChunks:function(o){for(var c=0,s=0,h=o.length;s<h;s++)c+=o[s].length;c=new Uint8Array(c),h=s=0;for(var f=o.length;s<f;s++){var x=o[s];c.set(x,h),h+=x.length}return c}},If=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(m){If=!1}for(var oh=new Uint8Array(256),qu=0;256>qu;qu++)oh[qu]=252<=qu?6:248<=qu?5:240<=qu?4:224<=qu?3:192<=qu?2:1;oh[254]=oh[254]=1;var su={string2buf:function(o){var c,s,h=o.length,f=0;for(c=0;c<h;c++){var x=o.charCodeAt(c);if((x&64512)==55296&&c+1<h){var g=o.charCodeAt(c+1);(g&64512)==56320&&(x=65536+(x-55296<<10)+(g-56320),c++)}f+=128>x?1:2048>x?2:65536>x?3:4}var _=new Uint8Array(f);for(c=s=0;s<f;c++)x=o.charCodeAt(c),(x&64512)==55296&&c+1<h&&(g=o.charCodeAt(c+1),(g&64512)==56320&&(x=65536+(x-55296<<10)+(g-56320),c++)),128>x?_[s++]=x:(2048>x?_[s++]=192|x>>>6:(65536>x?_[s++]=224|x>>>12:(_[s++]=240|x>>>18,_[s++]=128|x>>>12&63),_[s++]=128|x>>>6&63),_[s++]=128|x&63);return _},buf2string:function(o,c){var s,h,f=c||o.length;for(c=Array(2*f),s=h=0;s<f;){var x=o[s++];if(128>x)c[h++]=x;else{var g=oh[x];if(4<g)c[h++]=65533,s+=g-1;else{for(x&=g===2?31:g===3?15:7;1<g&&s<f;)x=x<<6|o[s++]&63,g--;1<g?c[h++]=65533:65536>x?c[h++]=x:(x-=65536,c[h++]=55296|x>>10&1023,c[h++]=56320|x&1023)}}}if(o=h,65534>o&&c.subarray&&If)c=String.fromCharCode.apply(null,c.length===o?c:c.subarray(0,o));else{for(s="",h=0;h<o;h++)s+=String.fromCharCode(c[h]);c=s}return c},utf8border:function(o,c){c=c||o.length,c>o.length&&(c=o.length);for(var s=c-1;0<=s&&(o[s]&192)==128;)s--;return 0>s||s===0?c:s+oh[o[s]]>c?s:c}},yv=function(){this.input=null,this.total_in=this.avail_in=this.next_in=0,this.output=null,this.total_out=this.avail_out=this.next_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ef=Object.prototype.toString,Gi=ri.Z_NO_FLUSH,xv=ri.Z_SYNC_FLUSH,am=ri.Z_FULL_FLUSH,mp=ri.Z_FINISH,ag=ri.Z_OK,Av=ri.Z_STREAM_END,sg=ri.Z_DEFAULT_COMPRESSION,nl=ri.Z_DEFAULT_STRATEGY,Cv=ri.Z_DEFLATED;Tn.prototype.push=function(m,o){var c=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(o=o===~~o?o:o===!0?mp:Gi,typeof m=="string"?c.input=su.string2buf(m):Ef.call(m)==="[object ArrayBuffer]"?c.input=new Uint8Array(m):c.input=m,c.next_in=0,c.avail_in=c.input.length;;)if(c.avail_out===0&&(c.output=new Uint8Array(s),c.next_out=0,c.avail_out=s),(o===xv||o===am)&&6>=c.avail_out)this.onData(c.output.subarray(0,c.next_out)),c.avail_out=0;else{if(m=xl.deflate(c,o),m===Av)return 0<c.next_out&&this.onData(c.output.subarray(0,c.next_out)),m=xl.deflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===ag;if(c.avail_out===0)this.onData(c.output);else if(0<o&&0<c.next_out)this.onData(c.output.subarray(0,c.next_out)),c.avail_out=0;else if(c.avail_in===0)break}return!0},Tn.prototype.onData=function(m){this.chunks.push(m)},Tn.prototype.onEnd=function(m){m===ag&&(this.result=ih.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};var vp=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lg=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wv=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),bf=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),es=function(o,c,s,h,f,x,g,_){var L=_.bits,F,M,E,P,O,B,X=0,W=new Uint16Array(16),U=new Uint16Array(16),q,he=0;for(F=0;15>=F;F++)W[F]=0;for(M=0;M<h;M++)W[c[s+M]]++;var ge=L;for(E=15;1<=E&&W[E]===0;E--);if(ge>E&&(ge=E),E===0)return f[x++]=20971520,f[x++]=20971520,_.bits=1,0;for(L=1;L<E&&W[L]===0;L++);for(ge<L&&(ge=L),F=P=1;15>=F;F++)if(P<<=1,P-=W[F],0>P)return-1;if(0<P&&(o===0||E!==1))return-1;for(U[1]=0,F=1;15>F;F++)U[F+1]=U[F]+W[F];for(M=0;M<h;M++)c[s+M]!==0&&(g[U[c[s+M]]++]=M);if(o===0)var _e=q=g,Se=19;else o===1?(_e=vp,X-=257,q=lg,he-=257,Se=256):(_e=wv,q=bf,Se=-1);M=O=0,F=L;var $e=x;h=ge,U=0;var Be=-1,lt=1<<ge,kt=lt-1;if(o===1&&852<lt||o===2&&592<lt)return 1;for(;;){var cr=F-U;if(g[M]<Se)var Ur=0,Ar=g[M];else g[M]>Se?(Ur=q[he+g[M]],Ar=_e[X+g[M]]):(Ur=96,Ar=0);P=1<<F-U,L=B=1<<h;do B-=P,f[$e+(O>>U)+B]=cr<<24|Ur<<16|Ar|0;while(B!==0);for(P=1<<F-1;O&P;)P>>=1;if(P!==0?(O&=P-1,O+=P):O=0,M++,--W[F]==0){if(F===E)break;F=c[s+g[M]]}if(F>ge&&(O&kt)!==Be){for(U===0&&(U=ge),$e+=L,h=F-U,P=1<<h;h+U<E&&(P-=W[h+U],!(0>=P));)h++,P<<=1;if(lt+=1<<h,o===1&&852<lt||o===2&&592<lt)return 1;Be=O&kt,f[Be]=ge<<24|h<<16|$e-x|0}}return O!==0&&(f[$e+O]=F-U<<24|4194304),_.bits=ge,0},ts=ri.Z_FINISH,Qi=ri.Z_BLOCK,ah=ri.Z_TREES,Iu=ri.Z_OK,Oh=ri.Z_STREAM_END,ug=ri.Z_NEED_DICT,Fl=ri.Z_STREAM_ERROR,yp=ri.Z_DATA_ERROR,cg=ri.Z_MEM_ERROR,sh=ri.Z_BUF_ERROR,hg=ri.Z_DEFLATED,Qu=function(o){return(o>>>24&255)+(o>>>8&65280)+((o&65280)<<8)+((o&255)<<24)},sm=function(o){if(!o||!o.state)return Fl;var c=o.state;return o.total_in=o.total_out=c.total=0,o.msg="",c.wrap&&(o.adler=c.wrap&1),c.mode=1,c.last=0,c.havedict=0,c.dmax=32768,c.head=null,c.hold=0,c.bits=0,c.lencode=c.lendyn=new Int32Array(852),c.distcode=c.distdyn=new Int32Array(592),c.sane=1,c.back=-1,Iu},Lf=function(o){if(!o||!o.state)return Fl;var c=o.state;return c.wsize=0,c.whave=0,c.wnext=0,sm(o)},lm=function(o,c){if(!o||!o.state)return Fl;var s=o.state;if(0>c){var h=0;c=-c}else h=(c>>4)+1,48>c&&(c&=15);return c&&(8>c||15<c)?Fl:(s.window!==null&&s.wbits!==c&&(s.window=null),s.wrap=h,s.wbits=c,Lf(o))},um=function(o,c){if(!o)return Fl;var s=new Ja;return o.state=s,s.window=null,c=lm(o,c),c!==Iu&&(o.state=null),c},xp=!0,fg=void 0,dg=void 0,cm=function(o,c,s,h){var f=o.state;return f.window===null&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new Uint8Array(f.wsize)),h>=f.wsize?(f.window.set(c.subarray(s-f.wsize,s),0),f.wnext=0,f.whave=f.wsize):(o=f.wsize-f.wnext,o>h&&(o=h),f.window.set(c.subarray(s-h,s-h+o),f.wnext),(h-=o)?(f.window.set(c.subarray(s-h,s),0),f.wnext=h,f.whave=f.wsize):(f.wnext+=o,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=o))),0},Eu={inflateReset:Lf,inflateReset2:lm,inflateResetKeep:sm,inflateInit:function(o){return um(o,15)},inflateInit2:um,inflate:function(o,c){var s=new Uint8Array(4),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!o||!o.state||!o.output||!o.input&&o.avail_in!==0)return Fl;var f=o.state;f.mode===12&&(f.mode=13);var x=o.next_out,g=o.output,_=o.avail_out,L=o.next_in,F=o.input,M=o.avail_in,E=f.hold,P=f.bits,O=M,B=_,X=Iu;e:for(;;)switch(f.mode){case 1:if(f.wrap===0){f.mode=13;break}for(;16>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}if(f.wrap&2&&E===35615){f.check=0,s[0]=E&255,s[1]=E>>>8&255,f.check=Cs(f.check,s,2,0),P=E=0,f.mode=2;break}if(f.flags=0,f.head&&(f.head.done=!1),!(f.wrap&1)||(((E&255)<<8)+(E>>8))%31){o.msg="incorrect header check",f.mode=30;break}if((E&15)!==hg){o.msg="unknown compression method",f.mode=30;break}E>>>=4,P-=4;var W=(E&15)+8;if(f.wbits===0)f.wbits=W;else if(W>f.wbits){o.msg="invalid window size",f.mode=30;break}f.dmax=1<<f.wbits,o.adler=f.check=1,f.mode=E&512?10:12,P=E=0;break;case 2:for(;16>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}if(f.flags=E,(f.flags&255)!==hg){o.msg="unknown compression method",f.mode=30;break}if(f.flags&57344){o.msg="unknown header flags set",f.mode=30;break}f.head&&(f.head.text=E>>8&1),f.flags&512&&(s[0]=E&255,s[1]=E>>>8&255,f.check=Cs(f.check,s,2,0)),P=E=0,f.mode=3;case 3:for(;32>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}f.head&&(f.head.time=E),f.flags&512&&(s[0]=E&255,s[1]=E>>>8&255,s[2]=E>>>16&255,s[3]=E>>>24&255,f.check=Cs(f.check,s,4,0)),P=E=0,f.mode=4;case 4:for(;16>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}f.head&&(f.head.xflags=E&255,f.head.os=E>>8),f.flags&512&&(s[0]=E&255,s[1]=E>>>8&255,f.check=Cs(f.check,s,2,0)),P=E=0,f.mode=5;case 5:if(f.flags&1024){for(;16>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}f.length=E,f.head&&(f.head.extra_len=E),f.flags&512&&(s[0]=E&255,s[1]=E>>>8&255,f.check=Cs(f.check,s,2,0)),P=E=0}else f.head&&(f.head.extra=null);f.mode=6;case 6:if(f.flags&1024){var U=f.length;if(U>M&&(U=M),U&&(f.head&&(W=f.head.extra_len-f.length,f.head.extra||(f.head.extra=new Uint8Array(f.head.extra_len)),f.head.extra.set(F.subarray(L,L+U),W)),f.flags&512&&(f.check=Cs(f.check,F,U,L)),M-=U,L+=U,f.length-=U),f.length)break e}f.length=0,f.mode=7;case 7:if(f.flags&2048){if(M===0)break e;U=0;do W=F[L+U++],f.head&&W&&65536>f.length&&(f.head.name+=String.fromCharCode(W));while(W&&U<M);if(f.flags&512&&(f.check=Cs(f.check,F,U,L)),M-=U,L+=U,W)break e}else f.head&&(f.head.name=null);f.length=0,f.mode=8;case 8:if(f.flags&4096){if(M===0)break e;U=0;do W=F[L+U++],f.head&&W&&65536>f.length&&(f.head.comment+=String.fromCharCode(W));while(W&&U<M);if(f.flags&512&&(f.check=Cs(f.check,F,U,L)),M-=U,L+=U,W)break e}else f.head&&(f.head.comment=null);f.mode=9;case 9:if(f.flags&512){for(;16>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}if(E!==(f.check&65535)){o.msg="header crc mismatch",f.mode=30;break}P=E=0}f.head&&(f.head.hcrc=f.flags>>9&1,f.head.done=!0),o.adler=f.check=0,f.mode=12;break;case 10:for(;32>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}o.adler=f.check=Qu(E),P=E=0,f.mode=11;case 11:if(f.havedict===0)return o.next_out=x,o.avail_out=_,o.next_in=L,o.avail_in=M,f.hold=E,f.bits=P,ug;o.adler=f.check=1,f.mode=12;case 12:if(c===Qi||c===ah)break e;case 13:if(f.last){E>>>=P&7,P-=P&7,f.mode=27;break}for(;3>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}switch(f.last=E&1,E>>>=1,--P,E&3){case 0:f.mode=14;break;case 1:if(U=f,xp){for(fg=new Int32Array(512),dg=new Int32Array(32),W=0;144>W;)U.lens[W++]=8;for(;256>W;)U.lens[W++]=9;for(;280>W;)U.lens[W++]=7;for(;288>W;)U.lens[W++]=8;for(es(1,U.lens,0,288,fg,0,U.work,{bits:9}),W=0;32>W;)U.lens[W++]=5;es(2,U.lens,0,32,dg,0,U.work,{bits:5}),xp=!1}if(U.lencode=fg,U.lenbits=9,U.distcode=dg,U.distbits=5,f.mode=20,c===ah){E>>>=2,P-=2;break e}break;case 2:f.mode=17;break;case 3:o.msg="invalid block type",f.mode=30}E>>>=2,P-=2;break;case 14:for(E>>>=P&7,P-=P&7;32>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}if((E&65535)!=(E>>>16^65535)){o.msg="invalid stored block lengths",f.mode=30;break}if(f.length=E&65535,P=E=0,f.mode=15,c===ah)break e;case 15:f.mode=16;case 16:if(U=f.length){if(U>M&&(U=M),U>_&&(U=_),U===0)break e;g.set(F.subarray(L,L+U),x),M-=U,L+=U,_-=U,x+=U,f.length-=U;break}f.mode=12;break;case 17:for(;14>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}if(f.nlen=(E&31)+257,E>>>=5,P-=5,f.ndist=(E&31)+1,E>>>=5,P-=5,f.ncode=(E&15)+4,E>>>=4,P-=4,286<f.nlen||30<f.ndist){o.msg="too many length or distance symbols",f.mode=30;break}f.have=0,f.mode=18;case 18:for(;f.have<f.ncode;){for(;3>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}f.lens[h[f.have++]]=E&7,E>>>=3,P-=3}for(;19>f.have;)f.lens[h[f.have++]]=0;if(f.lencode=f.lendyn,f.lenbits=7,U={bits:f.lenbits},X=es(0,f.lens,0,19,f.lencode,0,f.work,U),f.lenbits=U.bits,X){o.msg="invalid code lengths set",f.mode=30;break}f.have=0,f.mode=19;case 19:for(;f.have<f.nlen+f.ndist;){for(;;){var q=f.lencode[E&(1<<f.lenbits)-1];if(U=q>>>24,q&=65535,U<=P)break;if(M===0)break e;M--,E+=F[L++]<<P,P+=8}if(16>q)E>>>=U,P-=U,f.lens[f.have++]=q;else{if(q===16){for(W=U+2;P<W;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}if(E>>>=U,P-=U,f.have===0){o.msg="invalid bit length repeat",f.mode=30;break}W=f.lens[f.have-1],U=3+(E&3),E>>>=2,P-=2}else if(q===17){for(W=U+3;P<W;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}E>>>=U,P-=U,W=0,U=3+(E&7),E>>>=3,P-=3}else{for(W=U+7;P<W;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}E>>>=U,P-=U,W=0,U=11+(E&127),E>>>=7,P-=7}if(f.have+U>f.nlen+f.ndist){o.msg="invalid bit length repeat",f.mode=30;break}for(;U--;)f.lens[f.have++]=W}}if(f.mode===30)break;if(f.lens[256]===0){o.msg="invalid code -- missing end-of-block",f.mode=30;break}if(f.lenbits=9,U={bits:f.lenbits},X=es(1,f.lens,0,f.nlen,f.lencode,0,f.work,U),f.lenbits=U.bits,X){o.msg="invalid literal/lengths set",f.mode=30;break}if(f.distbits=6,f.distcode=f.distdyn,U={bits:f.distbits},X=es(2,f.lens,f.nlen,f.ndist,f.distcode,0,f.work,U),f.distbits=U.bits,X){o.msg="invalid distances set",f.mode=30;break}if(f.mode=20,c===ah)break e;case 20:f.mode=21;case 21:if(6<=M&&258<=_){o.next_out=x,o.avail_out=_,o.next_in=L,o.avail_in=M,f.hold=E,f.bits=P,F=o;var he=F.state;g=F.next_in;var ge=F.input;L=g+(F.avail_in-5),x=F.next_out;var _e=F.output;M=x-(B-F.avail_out),_=x+(F.avail_out-257),E=he.dmax,P=he.wsize,U=he.whave,W=he.wnext;var Se=he.window,$e=he.hold,Be=he.bits;q=he.lencode;var lt=he.distcode,kt=(1<<he.lenbits)-1,cr=(1<<he.distbits)-1;t:do{15>Be&&($e+=ge[g++]<<Be,Be+=8,$e+=ge[g++]<<Be,Be+=8);var Ur=q[$e&kt];r:for(;;){var Ar=Ur>>>24;if($e>>>=Ar,Be-=Ar,Ar=Ur>>>16&255,Ar===0)_e[x++]=Ur&65535;else if(Ar&16){var zr=Ur&65535;(Ar&=15)&&(Be<Ar&&($e+=ge[g++]<<Be,Be+=8),zr+=$e&(1<<Ar)-1,$e>>>=Ar,Be-=Ar),15>Be&&($e+=ge[g++]<<Be,Be+=8,$e+=ge[g++]<<Be,Be+=8),Ur=lt[$e&cr];n:for(;;){if(Ar=Ur>>>24,$e>>>=Ar,Be-=Ar,Ar=Ur>>>16&255,Ar&16){if(Ur&=65535,Ar&=15,Be<Ar&&($e+=ge[g++]<<Be,Be+=8,Be<Ar&&($e+=ge[g++]<<Be,Be+=8)),Ur+=$e&(1<<Ar)-1,Ur>E){F.msg="invalid distance too far back",he.mode=30;break t}if($e>>>=Ar,Be-=Ar,Ar=x-M,Ur>Ar){if(Ar=Ur-Ar,Ar>U&&he.sane){F.msg="invalid distance too far back",he.mode=30;break t}var Gt=0,Vt=Se;if(W===0){if(Gt+=P-Ar,Ar<zr){zr-=Ar;do _e[x++]=Se[Gt++];while(--Ar);Gt=x-Ur,Vt=_e}}else if(W<Ar){if(Gt+=P+W-Ar,Ar-=W,Ar<zr){zr-=Ar;do _e[x++]=Se[Gt++];while(--Ar);if(Gt=0,W<zr){Ar=W,zr-=Ar;do _e[x++]=Se[Gt++];while(--Ar);Gt=x-Ur,Vt=_e}}}else if(Gt+=W-Ar,Ar<zr){zr-=Ar;do _e[x++]=Se[Gt++];while(--Ar);Gt=x-Ur,Vt=_e}for(;2<zr;)_e[x++]=Vt[Gt++],_e[x++]=Vt[Gt++],_e[x++]=Vt[Gt++],zr-=3;zr&&(_e[x++]=Vt[Gt++],1<zr&&(_e[x++]=Vt[Gt++]))}else{Gt=x-Ur;do _e[x++]=_e[Gt++],_e[x++]=_e[Gt++],_e[x++]=_e[Gt++],zr-=3;while(2<zr);zr&&(_e[x++]=_e[Gt++],1<zr&&(_e[x++]=_e[Gt++]))}}else if((Ar&64)==0){Ur=lt[(Ur&65535)+($e&(1<<Ar)-1)];continue n}else{F.msg="invalid distance code",he.mode=30;break t}break}}else if((Ar&64)==0){Ur=q[(Ur&65535)+($e&(1<<Ar)-1)];continue r}else{Ar&32?he.mode=12:(F.msg="invalid literal/length code",he.mode=30);break t}break}}while(g<L&&x<_);zr=Be>>3,g-=zr,Be-=zr<<3,F.next_in=g,F.next_out=x,F.avail_in=g<L?5+(L-g):5-(g-L),F.avail_out=x<_?257+(_-x):257-(x-_),he.hold=$e&(1<<Be)-1,he.bits=Be,x=o.next_out,g=o.output,_=o.avail_out,L=o.next_in,F=o.input,M=o.avail_in,E=f.hold,P=f.bits,f.mode===12&&(f.back=-1);break}for(f.back=0;q=f.lencode[E&(1<<f.lenbits)-1],U=q>>>24,W=q>>>16&255,q&=65535,!(U<=P);){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}if(W&&(W&240)==0){for(Se=U,$e=W,Be=q;q=f.lencode[Be+((E&(1<<Se+$e)-1)>>Se)],U=q>>>24,W=q>>>16&255,q&=65535,!(Se+U<=P);){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}E>>>=Se,P-=Se,f.back+=Se}if(E>>>=U,P-=U,f.back+=U,f.length=q,W===0){f.mode=26;break}if(W&32){f.back=-1,f.mode=12;break}if(W&64){o.msg="invalid literal/length code",f.mode=30;break}f.extra=W&15,f.mode=22;case 22:if(f.extra){for(W=f.extra;P<W;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}f.length+=E&(1<<f.extra)-1,E>>>=f.extra,P-=f.extra,f.back+=f.extra}f.was=f.length,f.mode=23;case 23:for(;q=f.distcode[E&(1<<f.distbits)-1],U=q>>>24,W=q>>>16&255,q&=65535,!(U<=P);){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}if((W&240)==0){for(Se=U,$e=W,Be=q;q=f.distcode[Be+((E&(1<<Se+$e)-1)>>Se)],U=q>>>24,W=q>>>16&255,q&=65535,!(Se+U<=P);){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}E>>>=Se,P-=Se,f.back+=Se}if(E>>>=U,P-=U,f.back+=U,W&64){o.msg="invalid distance code",f.mode=30;break}f.offset=q,f.extra=W&15,f.mode=24;case 24:if(f.extra){for(W=f.extra;P<W;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}f.offset+=E&(1<<f.extra)-1,E>>>=f.extra,P-=f.extra,f.back+=f.extra}if(f.offset>f.dmax){o.msg="invalid distance too far back",f.mode=30;break}f.mode=25;case 25:if(_===0)break e;if(U=B-_,f.offset>U){if(U=f.offset-U,U>f.whave&&f.sane){o.msg="invalid distance too far back",f.mode=30;break}U>f.wnext?(U-=f.wnext,W=f.wsize-U):W=f.wnext-U,U>f.length&&(U=f.length),Se=f.window}else Se=g,W=x-f.offset,U=f.length;U>_&&(U=_),_-=U,f.length-=U;do g[x++]=Se[W++];while(--U);f.length===0&&(f.mode=21);break;case 26:if(_===0)break e;g[x++]=f.length,_--,f.mode=21;break;case 27:if(f.wrap){for(;32>P;){if(M===0)break e;M--,E|=F[L++]<<P,P+=8}if(B-=_,o.total_out+=B,f.total+=B,B&&(o.adler=f.check=f.flags?Cs(f.check,g,B,x-B):Rh(f.check,g,B,x-B)),B=_,(f.flags?E:Qu(E))!==f.check){o.msg="incorrect data check",f.mode=30;break}P=E=0}f.mode=28;case 28:if(f.wrap&&f.flags){for(;32>P;){if(M===0)break e;M--,E+=F[L++]<<P,P+=8}if(E!==(f.total&4294967295)){o.msg="incorrect length check",f.mode=30;break}P=E=0}f.mode=29;case 29:X=Oh;break e;case 30:X=yp;break e;case 31:return cg;default:return Fl}return o.next_out=x,o.avail_out=_,o.next_in=L,o.avail_in=M,f.hold=E,f.bits=P,(f.wsize||B!==o.avail_out&&30>f.mode&&(27>f.mode||c!==ts))&&cm(o,o.output,o.next_out,B-o.avail_out),O-=o.avail_in,B-=o.avail_out,o.total_in+=O,o.total_out+=B,f.total+=B,f.wrap&&B&&(o.adler=f.check=f.flags?Cs(f.check,g,B,o.next_out-B):Rh(f.check,g,B,o.next_out-B)),o.data_type=f.bits+(f.last?64:0)+(f.mode===12?128:0)+(f.mode===20||f.mode===15?256:0),(O===0&&B===0||c===ts)&&X===Iu&&(X=sh),X},inflateEnd:function(o){if(!o||!o.state)return Fl;var c=o.state;return c.window&&(c.window=null),o.state=null,Iu},inflateGetHeader:function(o,c){return!o||!o.state||(o=o.state,(o.wrap&2)==0)?Fl:(o.head=c,c.done=!1,Iu)},inflateSetDictionary:function(o,c){var s=c.length;if(!o||!o.state)return Fl;var h=o.state;if(h.wrap!==0&&h.mode!==11)return Fl;if(h.mode===11){var f=Rh(1,c,s,0);if(f!==h.check)return yp}return cm(o,c,s,s)?(h.mode=31,cg):(h.havedict=1,Iu)},inflateInfo:"pako inflate (from Nodeca project)"},g0=function(){this.os=this.xflags=this.time=this.text=0,this.extra=null,this.extra_len=0,this.comment=this.name="",this.hcrc=0,this.done=!1},Ap=Object.prototype.toString,il=ri.Z_NO_FLUSH,$u=ri.Z_FINISH,Dh=ri.Z_OK,hm=ri.Z_STREAM_END,Nl=ri.Z_NEED_DICT,lh=ri.Z_STREAM_ERROR,ec=ri.Z_DATA_ERROR,Cp=ri.Z_MEM_ERROR;ki.prototype.push=function(m,o){var c=this.strm,s=this.options.chunkSize,h=this.options.dictionary;if(this.ended)return!1;var f=o===~~o?o:o===!0?$u:il;for(Ap.call(m)==="[object ArrayBuffer]"?c.input=new Uint8Array(m):c.input=m,c.next_in=0,c.avail_in=c.input.length;;){for(c.avail_out===0&&(c.output=new Uint8Array(s),c.next_out=0,c.avail_out=s),o=Eu.inflate(c,f),o===Nl&&h&&(o=Eu.inflateSetDictionary(c,h),o===Dh?o=Eu.inflate(c,f):o===ec&&(o=Nl));0<c.avail_in&&o===hm&&0<c.state.wrap&&m[c.next_in]!==0;)Eu.inflateReset(c),o=Eu.inflate(c,f);switch(o){case lh:case ec:case Nl:case Cp:return this.onEnd(o),this.ended=!0,!1}var x=c.avail_out;if(c.next_out&&(c.avail_out===0||o===hm))if(this.options.to==="string"){var g=su.utf8border(c.output,c.next_out),_=c.next_out-g,L=su.buf2string(c.output,g);c.next_out=_,c.avail_out=s-_,_&&c.output.set(c.output.subarray(g,g+_),0),this.onData(L)}else this.onData(c.output.length===c.next_out?c.output:c.output.subarray(0,c.next_out));if(o!==Dh||x!==0){if(o===hm){o=Eu.inflateEnd(this.strm),this.onEnd(o),this.ended=!0;break}if(c.avail_in===0)break}}return!0},ki.prototype.onData=function(m){this.chunks.push(m)},ki.prototype.onEnd=function(m){m===Dh&&(this.result=this.options.to==="string"?this.chunks.join(""):ih.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};var fm={Deflate:Tn,deflate:fa,deflateRaw:function(o,c){return c=c||{},c.raw=!0,fa(o,c)},gzip:function(o,c){return c=c||{},c.gzip=!0,fa(o,c)},Inflate:ki,inflate:vs,inflateRaw:function(o,c){return c=c||{},c.raw=!0,vs(o,c)},ungzip:vs,constants:ri},Ad=function(){function m(o){qr(this,m),this._visible=!0,this.options=this.getCommonDefaultOptions(),this.options=vi(this.options,this.getDefaultOptions()),this.autoUpdate=!1,this.options=vi(this.options,o),this.options.data&&(this.data=this.options.data,delete this.options.data)}return on(m,[{key:"getCommonDefaultOptions",value:function(){return{}}},{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(c){}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy()}},{key:"show",value:function(){this._visible=!0}},{key:"hide",value:function(){this._visible=!1}},{key:"render",value:function(){}},{key:"setData",value:function(c,s){s=s||{},this.data=c,this.onDataChanged&&this.onDataChanged(this.getData()),this.onChanged&&this.onChanged(this.getOptions(),this.getData(),s),s.autoRender!==!1&&this.webglLayer&&this.webglLayer.render()}},{key:"getData",value:function(){return this.data||[]}},{key:"setOptions",value:function(c){c=c||{};var s=vi({},this.getOptions());vi(this.options,c),this.onOptionsChanged&&this.onOptionsChanged(this.getOptions(),s),this.onChanged&&this.onChanged(this.getOptions(),this.getData()),c.data?(this.setData(c.data),delete c.data):this.webglLayer&&this.webglLayer.render()}},{key:"getOptions",value:function(){return this.options||{}}},{key:"onOptionsChanged",value:function(c,s){}},{key:"onDataChanged",value:function(c){}},{key:"onChanged",value:function(c,s){}},{key:"onDestroy",value:function(){}},{key:"lnglatToMercator",value:function(c,s){}},{key:"setWebglLayer",value:function(c){this.webglLayer=c}},{key:"getWebglLayer",value:function(){return this.webglLayer}},{key:"isRequestAnimation",value:function(){return this.autoUpdate}}]),m}(),ui=function(){function m(o,c,s){qr(this,m),this.options=c,this.gl=o,s&&(this.map=s.map),s=this.getVertexShader(c.vertexShader);var h=this.getFragmentShader(c.fragmentShader);c=o.createShader(o.VERTEX_SHADER),o.shaderSource(c,s),o.compileShader(c),o.getShaderParameter(c,o.COMPILE_STATUS)?(s=o.createShader(o.FRAGMENT_SHADER),o.shaderSource(s,h),o.compileShader(s),o.getShaderParameter(s,o.COMPILE_STATUS)?(h=o.createProgram(),o.attachShader(h,c),o.attachShader(h,s),o.deleteShader(c),o.deleteShader(s),o.linkProgram(h),o.getProgramParameter(h,o.LINK_STATUS)?c=h:(c="Shader program failed to link.  The error log is:"+o.getProgramInfoLog(h),console.error(c),c=-1)):(c="Fragment shader failed to compile.  The error log is:"+o.getShaderInfoLog(s),console.error(c),c=-1)):(c="Vertex shader failed to compile.  The error log is:"+o.getShaderInfoLog(c),console.error(c),c=-1),c=this.program=c,s={},h=o.getProgramParameter(c,o.ACTIVE_ATTRIBUTES);for(var f=0;f<h;f++){var x=o.getActiveAttrib(c,f);s[x.name]=o.getAttribLocation(c,x.name)}f={},x={};for(var g=o.getProgramParameter(c,o.ACTIVE_UNIFORMS),_=0;_<g;_++){var L=o.getActiveUniform(c,_);f[L.name]=o.getUniformLocation(c,L.name),x[L.name]=L.type}this.parameter=o={attributes:s,numAttributes:h,uniformsType:x,uniforms:f},this.attributes=o.attributes,this.uniforms=o.uniforms,this.parameter=o}return on(m,[{key:"getVertexShader",value:function(c){var s="";return this.map&&this.map.type==="cesium"&&(s=`#define LOG_DEPTH
`),s+=`#ifdef LOG_DEPTH
uniform float currentFrustumX;varying float v_depthFromNearPlusOne;
#endif
uniform vec2 MAPV_resolution;
#if defined(PICK)
uniform bool uIsPickRender;attribute vec3 aPickColor;uniform vec3 uPickedColor;varying vec4 vPickColor;uniform bool uEnablePicked;bool mapvIsPicked(){return uEnablePicked&&aPickColor==uPickedColor;}
#endif
void afterMain(){
#if defined(LOG_DEPTH)
v_depthFromNearPlusOne=(gl_Position.w-currentFrustumX)+1.0;gl_Position.z=clamp(gl_Position.z/gl_Position.w,-1.0,1.0)*gl_Position.w;
#endif
#if defined(PICK)
vPickColor=vec4(aPickColor,0.0);if(mapvIsPicked()){vPickColor.a=1.0;}
#endif
}`,c=this.getDefines()+s+c,c=c.replace("void main","void originMain"),c+"void main() {originMain(); afterMain();}"}},{key:"getFragmentShader",value:function(c){var s="";return this.map&&this.map.type==="cesium"&&(s=`#define LOG_DEPTH
`),s+=`#if defined(LOG_DEPTH)
#extension GL_EXT_frag_depth : enable
#endif
precision highp float;uniform vec2 MAPV_resolution;uniform bool uIsPickRender;
#if defined(PICK)
varying vec4 vPickColor;bool mapvIsPicked(){return vPickColor.a==1.0;}
#endif
#if defined(LOG_DEPTH)
uniform float oneOverLog2FarDepthFromNearPlusOne;uniform float farDepthFromNearPlusOne;varying float v_depthFromNearPlusOne;void writeLogDepth(float depth){if(depth<=0.9999999||depth>farDepthFromNearPlusOne){discard;}gl_FragDepthEXT=log2(depth)*oneOverLog2FarDepthFromNearPlusOne;}
#endif
void afterMain(){
#if defined(PICK)
if(uIsPickRender){gl_FragColor=vec4(vPickColor.rgb,1.0);return;}
#endif
#if defined(LOG_DEPTH)
writeLogDepth(v_depthFromNearPlusOne);
#endif
}`,c=this.getDefines()+s+c,c=c.replace("void main","void originMain"),c+"void main() {originMain(); afterMain();}"}},{key:"getDefines",value:function(){var c="",s=this.options.defines;if(s)for(var h=0;h<s.length;h++)c+="#define "+s[h]+`
`;return c}},{key:"use",value:function(c,s){this.gl=c,c.useProgram(this.program),this.map&&this.map.type==="cesium"&&this.setUniforms({currentFrustumX:this.map.map.scene.camera.frustum.near,oneOverLog2FarDepthFromNearPlusOne:this.map.map.scene.context.uniformState.oneOverLog2FarDepthFromNearPlusOne,farDepthFromNearPlusOne:this.map.map.scene.context.uniformState.farDepthFromNearPlusOne}),this.uniforms.MAPV_resolution&&this.setUniforms({MAPV_resolution:[c.canvas.width,c.canvas.height]})}},{key:"setUniform",value:function(c,s){var h=this.gl,f=this.uniforms[c];if(f)switch(this.parameter.uniformsType[c]){case h.FLOAT:h.uniform1f(f,s);break;case h.FLOAT_VEC2:h.uniform2f(f,s[0],s[1]);break;case h.FLOAT_VEC3:h.uniform3f(f,s[0],s[1],s[2]);break;case h.FLOAT_VEC4:h.uniform4f(f,s[0],s[1],s[2],s[3]);break;case h.SAMPLER_2D:case h.SAMPLER_CUBE:h.activeTexture(h["TEXTURE"+this.textureIndex]),h.uniform1i(f,this.textureIndex),h.bindTexture(h.TEXTURE_2D,s),this.textureIndex++;break;case h.INT:case h.BOOL:h.uniform1i(f,s);break;case h.INT_VEC2:case h.BOOL_VEC2:h.uniform2i(f,s[0],s[1]);break;case h.INT_VEC3:case h.BOOL_VEC3:h.uniform3i(f,s[0],s[1],s[2]);break;case h.INT_VEC4:case h.BOOL_VEC4:h.uniform4i(f,s[0],s[1],s[2],s[3]);break;case h.FLOAT_MAT2:h.uniformMatrix2fv(f,!1,s);break;case h.FLOAT_MAT3:h.uniformMatrix3fv(f,!1,s);break;case h.FLOAT_MAT4:h.uniformMatrix4fv(f,!1,s);break;default:console.error("Unrecognized uniform type: "+c)}else console.warn("Unrecognized uniform type: "+c)}},{key:"setUniforms",value:function(c){this.textureIndex=0;for(var s in c)this.setUniform(s,c[s])}}]),m}(),Bl=function(o,c,s,h){var f=s?s.call(h,o,c):void 0;if(f!==void 0)return!!f;if(o===c)return!0;if((typeof o=="undefined"?"undefined":Ta(o))!=="object"||!o||(typeof c=="undefined"?"undefined":Ta(c))!=="object"||!c)return!1;var x=Fa(o),g=Fa(c);if(x.length!==g.length)return!1;g=Object.prototype.hasOwnProperty.bind(c);for(var _=0;_<x.length;_++){if(f=x[_],!g(f))return!1;var L=o[f],F=c[f];if(f=s?s.call(h,L,F,f):void 0,f===!1||f===void 0&&L!==F)return!1}return!0},pg=function(){function m(o){qr(this,m),this.options=o,this.gl=o.gl,this.savedState=[],this.currentState=this.getDefaultState()}return on(m,[{key:"setDefaultState",value:function(){this.setState()}},{key:"getDefaultState",value:function(){var c=this.gl;return{blend:!1,blendEquation:c.FUNC_ADD,blendFunc:[c.ONE,c.ZERO],depthMask:!0,depthTest:!0,depthFunc:c.LEQUAL,polygonOffset:[0,0],cullFace:!1,stencilTest:!1}}},{key:"getRealState",value:function(){var c=this.gl;return{blend:c.getParameter(c.BLEND),blendEquation:c.getParameter(c.BLEND_EQUATION),depthMask:c.getParameter(c.DEPTH_WRITEMASK),depthTest:c.getParameter(c.DEPTH_TEST),depthFunc:c.getParameter(c.DEPTH_FUNC),polygonOffset:[c.getParameter(c.POLYGON_OFFSET_FACTOR),c.getParameter(c.POLYGON_OFFSET_UNITS)],cullFace:c.getParameter(c.CULL_FACE),stencilTest:c.getParameter(c.STENCIL_TEST)}}},{key:"getCurrentState",value:function(){return this.currentState}},{key:"save",value:function(){this.savedState.push(this.getCurrentState())}},{key:"restore",value:function(){var c=this.savedState.pop();this.setState(c,{force:!0})}},{key:"setState",value:function(c){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};c=vi(this.getDefaultState(),c),this.setBlend(c,s),this.setDepth(c,s),this.setCullFace(c,s),this.setPolygonOffset(c,s),this.setStencil(c,s),this.currentState=c}},{key:"setBlend",value:function(c,s){var h=this.gl,f=this.getCurrentState();((s=s.force)||!Bl(c.blend,f.blend))&&(c.blend?h.enable(h.BLEND):h.disable(h.BLEND)),!s&&Bl(c.blendEquation,f.blendEquation)||h.blendEquation(c.blendEquation),!s&&Bl(c.blendFunc,f.blendFunc)||h.blendFunc(c.blendFunc[0],c.blendFunc[1])}},{key:"setDepth",value:function(c,s){var h=this.gl,f=this.getCurrentState();((s=s.force)||!Bl(c.depthTest,f.depthTest))&&(c.depthTest?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST)),(s||!Bl(c.depthMask,f.depthMask))&&(c.depthMask?h.depthMask(!0):h.depthMask(!1)),!s&&Bl(c.depthFunc,f.depthFunc)||h.depthFunc(c.depthFunc)}},{key:"setPolygonOffset",value:function(c,s){var h=this.gl,f=this.getCurrentState();(s.force||!Bl(c.polygonOffset,f.polygonOffset))&&(c.polygonOffset[0]!==0&&c.polygonOffset[1]!==0?h.enable(h.POLYGON_OFFSET_FILL):h.disable(h.POLYGON_OFFSET_FILL),h.polygonOffset(c.polygonOffset[0],c.polygonOffset[1]))}},{key:"setCullFace",value:function(c,s){var h=this.gl,f=this.getCurrentState();(s.force||!Bl(c.cullFace,f.cullFace))&&(c.cullFace?(h.enable(h.CULL_FACE),h.cullFace(h.BACK)):h.disable(h.CULL_FACE))}},{key:"setStencil",value:function(c,s){var h=this.gl,f=this.getCurrentState();(s.force||!Bl(c.stencilTest,f.stencilTest))&&(c.stencilTest?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST))}}]),m}(),Qr=function(){function m(o){qr(this,m),this.options=o,this.gl=o.gl,this.buffer=this.gl.createBuffer(),o.data&&this.updateData(o.data)}return on(m,[{key:"updateData",value:function(c){var s=this.options,h=this.gl;this.bind(),h.bufferData(h[s.target],c,h[s.usage])}},{key:"bind",value:function(c){c=c||this.gl,c.bindBuffer(c[this.options.target],this.buffer)}},{key:"unBind",value:function(c){c=c||this.gl,c.bindBuffer(c[this.options.target],null)}},{key:"destroy",value:function(){this.buffer=null}}]),m}(),uh={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FLOAT:4},la=function(){function m(o){for(qr(this,m),this.options=o,this.attributes=o.attributes,this.gl=o.gl,this.program=o.program,o=this.stride=0;o<this.attributes.length;o++)this.stride+=uh[this.attributes[o].type]*this.attributes[o].size}return on(m,[{key:"setVertexAttribPointers",value:function(){for(var c=this.gl,s=this.program,h=0;h<this.attributes.length;h++){var f=this.attributes[h],x=s.attributes[f.name];x!==void 0&&(f.buffer.bind(c),c.vertexAttribPointer(x,f.size,c[f.type],f.normalize||!1,f.stride!==void 0?f.stride:this.stride,f.offset),c.enableVertexAttribArray(x))}}},{key:"bind",value:function(){this.setVertexAttribPointers()}},{key:"destroy",value:function(){}}]),m}(),ps=function m(o,c,s){qr(this,m),c=c||o.canvas.width,s=s||o.canvas.height;var h=o.createFramebuffer(),f=o.createTexture();o.bindTexture(o.TEXTURE_2D,f),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,c,s,0,o.RGBA,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),h.texture=f;var x=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,x),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,c,s),h.depthBuffer=x,o.bindFramebuffer(o.FRAMEBUFFER,h),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,f,0),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,x),c=o.checkFramebufferStatus(o.FRAMEBUFFER),o.FRAMEBUFFER_COMPLETE===c&&(o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindTexture(o.TEXTURE_2D,null),o.bindRenderbuffer(o.RENDERBUFFER,null),this.framebuffer=h)},Fh=function(){function m(o){qr(this,m),this.options={},vi(this.options,o),this.vertex=[-1,1,0,-1,-1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0],this.sampleCoord=[0,1,0,0,1,1,1,1,0,0,1,0]}return on(m,[{key:"getOptions",value:function(){return this.options}},{key:"onResize",value:function(c){}},{key:"render",value:function(c){var s=c.gl;c=c.texture;var h=this.programSample;s.useProgram(h.program);var f=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,f);var x=[-1,-1,0,-1,1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0];s.bufferData(s.ARRAY_BUFFER,new Float32Array(x),s.STATIC_DRAW),s.enableVertexAttribArray(h.attributes.aPos),s.vertexAttribPointer(h.attributes.aPos,3,s.FLOAT,!1,0,0),f=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,f),s.bufferData(s.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,1,1,1,0,0,1,0]),s.STATIC_DRAW),s.enableVertexAttribArray(h.attributes.aTextureCoord),s.vertexAttribPointer(h.attributes.aTextureCoord,2,s.FLOAT,!1,0,0),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,c),s.uniform1i(h.uniforms.uSampler,0),s.drawArrays(s.TRIANGLES,0,x.length/3)}}]),m}(),gg=function(m){function o(c){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c))}return _n(o,m),on(o,[{key:"getProgram",value:function(s){return this.programSample||(this.programSample=new ui(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(void){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision highp float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;vec4 fxaa_2_0(sampler2D tex,vec2 fragCoord,vec2 resolution,vec2 v_rgbNW,vec2 v_rgbNE,vec2 v_rgbSW,vec2 v_rgbSE,vec2 v_rgbM){vec4 color;mediump vec2 inverseVP=vec2(1.0/resolution.x,1.0/resolution.y);vec3 rgbNW=texture2D(tex,v_rgbNW).xyz;vec3 rgbNE=texture2D(tex,v_rgbNE).xyz;vec3 rgbSW=texture2D(tex,v_rgbSW).xyz;vec3 rgbSE=texture2D(tex,v_rgbSE).xyz;vec4 texColor=texture2D(tex,v_rgbM);vec3 rgbM=texColor.xyz;vec3 luma=vec3(0.299,0.587,0.114);float lumaNW=dot(rgbNW,luma);float lumaNE=dot(rgbNE,luma);float lumaSW=dot(rgbSW,luma);float lumaSE=dot(rgbSE,luma);float lumaM=dot(rgbM,luma);float lumaMin=min(lumaM,min(min(lumaNW,lumaNE),min(lumaSW,lumaSE)));float lumaMax=max(lumaM,max(max(lumaNW,lumaNE),max(lumaSW,lumaSE)));mediump vec2 dir;dir.x=-((lumaNW+lumaNE)-(lumaSW+lumaSE));dir.y=((lumaNW+lumaSW)-(lumaNE+lumaSE));float dirReduce=max((lumaNW+lumaNE+lumaSW+lumaSE)*(0.25*1.0/8.0),1.0/128.0);float rcpDirMin=1.0/(min(abs(dir.x),abs(dir.y))+dirReduce);dir=min(vec2(8.0,8.0),max(vec2(-8.0,-8.0),dir*rcpDirMin))*inverseVP;vec3 rgbA=0.5*(texture2D(tex,fragCoord*inverseVP+dir*(1.0/3.0-0.5)).xyz+texture2D(tex,fragCoord*inverseVP+dir*(2.0/3.0-0.5)).xyz);vec3 rgbB=rgbA*0.5+0.25*(texture2D(tex,fragCoord*inverseVP+dir*-0.5).xyz+texture2D(tex,fragCoord*inverseVP+dir*0.5).xyz);float lumaB=dot(rgbB,luma);if((lumaB<lumaMin)||(lumaB>lumaMax)){color=vec4(rgbA,texColor.a);}else{color=vec4(rgbB,texColor.a);}return color;}void texcoords_3_1(vec2 fragCoord,vec2 resolution,out vec2 v_rgbNW,out vec2 v_rgbNE,out vec2 v_rgbSW,out vec2 v_rgbSE,out vec2 v_rgbM){vec2 inverseVP=1.0/resolution.xy;v_rgbNW=(fragCoord+vec2(-1.0,-1.0))*inverseVP;v_rgbNE=(fragCoord+vec2(1.0,-1.0))*inverseVP;v_rgbSW=(fragCoord+vec2(-1.0,1.0))*inverseVP;v_rgbSE=(fragCoord+vec2(1.0,1.0))*inverseVP;v_rgbM=vec2(fragCoord*inverseVP);}vec4 apply_1_2(sampler2D tex,vec2 fragCoord,vec2 resolution){mediump vec2 v_rgbNW;mediump vec2 v_rgbNE;mediump vec2 v_rgbSW;mediump vec2 v_rgbSE;mediump vec2 v_rgbM;texcoords_3_1(fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);return fxaa_2_0(tex,fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);}void main(void){vec2 fragCoord=vTextureCoord*canvasSize;gl_FragColor=apply_1_2(uSampler,fragCoord,canvasSize);}"})),this.programSample}},{key:"render",value:function(s){var h=s.gl;s=s.texture,this.getOptions(),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var f=this.getProgram(h);h.useProgram(f.program);var x=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,x),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.vertex),h.STATIC_DRAW),h.enableVertexAttribArray(f.attributes.aPos),h.vertexAttribPointer(f.attributes.aPos,3,h.FLOAT,!1,0,0),x=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,x),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.sampleCoord),h.STATIC_DRAW),h.enableVertexAttribArray(f.attributes.aTextureCoord),h.vertexAttribPointer(f.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,s),h.uniform1i(f.uniforms.uSampler,1),h.uniform2fv(f.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.bindBuffer(h.ARRAY_BUFFER,null),h.useProgram(null)}}]),o}(Fh),Cd=function(m){function o(c){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c))}return _n(o,m),on(o,[{key:"getProgram",value:function(s){if(this.program1||(this.program1=new ui(s,{vertexShader:"attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];void SMAAEdgeDetectionVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);vOffset[2]=texcoord.xyxy+resolution.xyxy*vec4(-2.0,0.0,0.0,2.0);}void main(){vUv=uv;SMAAEdgeDetectionVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:`precision highp float;
#define SMAA_THRESHOLD 0.1
uniform sampler2D tDiffuse;varying vec2 vUv;varying vec4 vOffset[3];vec4 SMAAColorEdgeDetectionPS(vec2 texcoord,vec4 offset[3],sampler2D colorTex){vec2 threshold=vec2(SMAA_THRESHOLD,SMAA_THRESHOLD);vec4 delta;vec3 C=texture2D(colorTex,texcoord).rgb;vec3 Cleft=texture2D(colorTex,offset[0].xy).rgb;vec3 t=abs(C-Cleft);delta.x=max(max(t.r,t.g),t.b);vec3 Ctop=texture2D(colorTex,offset[0].zw).rgb;t=abs(C-Ctop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0,1.0))==0.0)discard;vec3 Cright=texture2D(colorTex,offset[1].xy).rgb;t=abs(C-Cright);delta.z=max(max(t.r,t.g),t.b);vec3 Cbottom=texture2D(colorTex,offset[1].zw).rgb;t=abs(C-Cbottom);delta.w=max(max(t.r,t.g),t.b);float maxDelta=max(max(max(delta.x,delta.y),delta.z),delta.w);vec3 Cleftleft=texture2D(colorTex,offset[2].xy).rgb;t=abs(C-Cleftleft);delta.z=max(max(t.r,t.g),t.b);vec3 Ctoptop=texture2D(colorTex,offset[2].zw).rgb;t=abs(C-Ctoptop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(max(maxDelta,delta.z),delta.w);edges.xy*=step(0.5*maxDelta,delta.xy);return vec4(edges,0.0,0.0);}void main(){gl_FragColor=SMAAColorEdgeDetectionPS(vUv,vOffset,tDiffuse);}`})),this.program2||(this.program2=new ui(s,{vertexShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;void SMAABlendingWeightCalculationVS(vec2 texcoord){vPixcoord=texcoord/resolution;vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-0.25,0.125,1.25,0.125);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(-0.125,0.25,-0.125,-1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*resolution.xxyy*float(SMAA_MAX_SEARCH_STEPS);}void main(){vUv=uv;SMAABlendingWeightCalculationVS(vUv);gl_Position=vec4(position,1.0);}`,fragmentShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )
uniform sampler2D tDiffuse;uniform sampler2D tArea;uniform sampler2D tSearch;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;vec2 round(vec2 x){return sign(x)*floor(abs(x)+0.5);}float SMAASearchLength(sampler2D searchTex,vec2 e,float bias,float scale){e.r=bias+e.r*scale;return 255.0*texture2D(searchTex,e,0.0).r;}float SMAASearchXLeft(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){/***@PSEUDO_GATHER4*This texcoord has been offset by(-0.25,-0.125)in the vertex shader to*sample between edge,thus fetching four edges in a row.*Sampling with different offsets in each direction allows to disambiguate*which edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(2.0,0.0)*resolution;if(!(texcoord.x>end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x+=0.25*resolution.x;texcoord.x+=resolution.x;texcoord.x+=2.0*resolution.x;texcoord.x-=resolution.x*SMAASearchLength(searchTex,e,0.0,0.5);return texcoord.x;}float SMAASearchXRight(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(2.0,0.0)*resolution;if(!(texcoord.x<end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x-=0.25*resolution.x;texcoord.x-=resolution.x;texcoord.x-=2.0*resolution.x;texcoord.x+=resolution.x*SMAASearchLength(searchTex,e,0.5,0.5);return texcoord.x;}float SMAASearchYUp(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(0.0,2.0)*resolution;if(!(texcoord.y>end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y-=0.25*resolution.y;texcoord.y-=resolution.y;texcoord.y-=2.0*resolution.y;texcoord.y+=resolution.y*SMAASearchLength(searchTex,e.gr,0.0,0.5);return texcoord.y;}float SMAASearchYDown(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(0.0,2.0)*resolution;if(!(texcoord.y<end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y+=0.25*resolution.y;texcoord.y+=resolution.y;texcoord.y+=2.0*resolution.y;texcoord.y-=resolution.y*SMAASearchLength(searchTex,e.gr,0.5,0.5);return texcoord.y;}vec2 SMAAArea(sampler2D areaTex,vec2 dist,float e1,float e2,float offset){vec2 texcoord=float(SMAA_AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texcoord=SMAA_AREATEX_PIXEL_SIZE*texcoord+(0.5*SMAA_AREATEX_PIXEL_SIZE);texcoord.y+=SMAA_AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTex,texcoord,0.0).rg;}vec4 SMAABlendingWeightCalculationPS(vec2 texcoord,vec2 pixcoord,vec4 offset[3],sampler2D edgesTex,sampler2D areaTex,sampler2D searchTex,ivec4 subsampleIndices){vec4 weights=vec4(0.0,0.0,0.0,0.0);vec2 e=texture2D(edgesTex,texcoord).rg;if(e.g>0.0){vec2 d;vec2 coords;coords.x=SMAASearchXLeft(edgesTex,searchTex,offset[0].xy,offset[2].x);coords.y=offset[1].y;d.x=coords.x;float e1=texture2D(edgesTex,coords,0.0).r;coords.x=SMAASearchXRight(edgesTex,searchTex,offset[0].zw,offset[2].y);d.y=coords.x;d=d/resolution.x-pixcoord.x;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(1,0)).r;weights.rg=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.y));}if(e.r>0.0){vec2 d;vec2 coords;coords.y=SMAASearchYUp(edgesTex,searchTex,offset[1].xy,offset[2].z);coords.x=offset[0].x;d.x=coords.y;float e1=texture2D(edgesTex,coords,0.0).g;coords.y=SMAASearchYDown(edgesTex,searchTex,offset[1].zw,offset[2].w);d.y=coords.y;d=d/resolution.y-pixcoord.y;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(0,1)).g;weights.ba=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.x));}return weights;}void main(){gl_FragColor=SMAABlendingWeightCalculationPS(vUv,vPixcoord,vOffset,tDiffuse,tArea,tSearch,ivec4(0.0));}`})),this.program3||(this.program3=new ui(s,{vertexShader:"precision highp float;uniform vec2 resolution;attribute vec3 position;attribute vec2 uv;varying vec2 vUv;varying vec4 vOffset[2];void SMAANeighborhoodBlendingVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);}void main(){vUv=uv;SMAANeighborhoodBlendingVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:"precision highp float;uniform sampler2D tDiffuse;uniform sampler2D tColor;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[2];vec4 SMAANeighborhoodBlendingPS(vec2 texcoord,vec4 offset[2],sampler2D colorTex,sampler2D blendTex){vec4 a;a.xz=texture2D(blendTex,texcoord).xz;a.y=texture2D(blendTex,offset[1].zw).g;a.w=texture2D(blendTex,offset[1].xy).a;if(dot(a,vec4(1.0,1.0,1.0,1.0))<1e-5){return texture2D(colorTex,texcoord,0.0);}else{vec2 offset;offset.x=a.a>a.b ? a.a :-a.b;offset.y=a.g>a.r ?-a.g : a.r;if(abs(offset.x)>abs(offset.y)){offset.y=0.0;}else{offset.x=0.0;}vec4 C=texture2D(colorTex,texcoord,0.0);texcoord+=sign(offset)*resolution;vec4 Cop=texture2D(colorTex,texcoord,0.0);float s=abs(offset.x)>abs(offset.y)? abs(offset.x): abs(offset.y);C.xyz=pow(C.xyz,vec3(2.2));Cop.xyz=pow(Cop.xyz,vec3(2.2));vec4 mixed=mix(C,Cop,s);mixed.xyz=pow(mixed.xyz,vec3(1.0/2.2));return mixed;}}void main(){gl_FragColor=SMAANeighborhoodBlendingPS(vUv,vOffset,tColor,tDiffuse);}"})),!this.vertexBuffer||!this.sampleBuffer){this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord));var h=[{stride:12,name:"position",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"uv",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}];this.vertexArray1=new la({gl:s,program:this.program1,attributes:h}),this.vertexArray2=new la({gl:s,program:this.program2,attributes:h}),this.vertexArray3=new la({gl:s,program:this.program3,attributes:h})}return{program1:this.program1,program2:this.program2,program3:this.program3}}},{key:"onResize",value:function(s){this.collectBrightBuffer=new ps(s),this.bloomBuffer=new ps(s)}},{key:"getExtraFbo",value:function(s){return this.collectBrightBuffer||(this.collectBrightBuffer=new ps(s)),this.bloomBuffer||(this.bloomBuffer=new ps(s)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(s){var h=s.gl,f=s.texture;s=s.fbo,this.getOptions(),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var x=this.getProgram(h),g=x.program1,_=x.program2;x=x.program3;var L=this.getExtraFbo(h),F=L.collectBrightBuffer;L=L.bloomBuffer;var M=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,M),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.vertex),h.STATIC_DRAW),h.enableVertexAttribArray(g.attributes.position),h.vertexAttribPointer(g.attributes.position,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(_.attributes.position),h.vertexAttribPointer(_.attributes.position,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(x.attributes.position),h.vertexAttribPointer(x.attributes.position,3,h.FLOAT,!1,0,0),M=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,M),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.sampleCoord),h.STATIC_DRAW),h.enableVertexAttribArray(g.attributes.uv),h.vertexAttribPointer(g.attributes.uv,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(_.attributes.uv),h.vertexAttribPointer(_.attributes.uv,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(x.attributes.uv),h.vertexAttribPointer(x.attributes.uv,2,h.FLOAT,!1,0,0),h.useProgram(g.program),h.bindFramebuffer(h.FRAMEBUFFER,F),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,f),h.uniform1i(g.uniforms.tDiffuse,2),h.uniform2fv(g.uniforms.resolution,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(_.program),h.bindFramebuffer(h.FRAMEBUFFER,L),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,F.texture),h.uniform1i(_.uniforms.uSampler,2),h.uniform2fv(_.uniforms.resolution,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(x.program),h.bindFramebuffer(h.FRAMEBUFFER,s),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,f),h.uniform1i(x.uniforms.tDiffuse,2),h.activeTexture(h.TEXTURE3),h.bindTexture(h.TEXTURE_2D,L.texture),h.uniform1i(x.uniforms.tColor,3),h.uniform2fv(x.uniforms.resolution,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.bindBuffer(h.ARRAY_BUFFER,null),h.useProgram(null)}},{key:"getAreaTexture",value:function(){return"data:image/png;base64,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"}},{key:"getSearchTexture",value:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAIAAADiVupLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrs00EKgAAIRNEZ739mTQoiwmhRi4L/FiKiu9ERISkzbXdTVV3H4WhfOG6ehl1rNR7qDSF8hwkVcJXt+3A//I0Nv0GoCBUAAAAAAMA/LAIMAB+Dcg2OE2zsAAAAAElFTkSuQmCC"}}]),o}(Fh),_v=function(m){function o(c){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c))}return _n(o,m),on(o,[{key:"getProgram",value:function(s){return this.programSample||(this.programSample=new ui(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){float fStep=1.0/512.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;gl_FragColor=blurSample;}"}),this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord)),this.vertexArray=new la({gl:s,program:this.programSample,attributes:[{stride:12,name:"aPos",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"aTextureCoord",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}]})),this.programSample}},{key:"render",value:function(s){var h=s.gl;s=s.texture,h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var f=this.getProgram(h);f.use(h),this.vertexArray.bind(),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,s),h.uniform1i(f.uniforms.uSampler,1),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3)}}]),o}(Fh),dm=function(m){function o(c){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c))}return _n(o,m),on(o,[{key:"getProgram",value:function(s){return this.programBright||(this.programBright=new ui(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-(1.0-threshold)/5.0));float brightness=dot(color.rgb,vec3(0.2126,0.7152,0.0722));if(brightness>threshold){color=lightColor;}else{color=vec4(0.0);}gl_FragColor=color;}"})),this.programBloom||(this.programBloom=new ui(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new ui(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord);vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(s){this.collectBrightBuffer=new ps(s),this.bloomBuffer=new ps(s)}},{key:"getExtraFbo",value:function(s){return this.collectBrightBuffer||(this.collectBrightBuffer=new ps(s)),this.bloomBuffer||(this.bloomBuffer=new ps(s)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(s){var h=s.gl,f=s.texture;s=s.fbo;var x=this.getOptions();h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var g=this.getProgram(h),_=g.programBright,L=g.programBloom;g=g.programResult;var F=this.getExtraFbo(h),M=F.collectBrightBuffer;F=F.bloomBuffer;var E=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,E),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.vertex),h.STATIC_DRAW),h.enableVertexAttribArray(_.attributes.aPos),h.vertexAttribPointer(_.attributes.aPos,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(L.attributes.aPos),h.vertexAttribPointer(L.attributes.aPos,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(g.attributes.aPos),h.vertexAttribPointer(g.attributes.aPos,3,h.FLOAT,!1,0,0),E=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,E),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.sampleCoord),h.STATIC_DRAW),h.enableVertexAttribArray(_.attributes.aTextureCoord),h.vertexAttribPointer(_.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(L.attributes.aTextureCoord),h.vertexAttribPointer(L.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(g.attributes.aTextureCoord),h.vertexAttribPointer(g.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.useProgram(_.program),h.bindFramebuffer(h.FRAMEBUFFER,M),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,f),h.uniform1i(_.uniforms.uSampler,1),h.uniform1f(_.uniforms.threshold,x.threshold||0),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(L.program),h.bindFramebuffer(h.FRAMEBUFFER,F),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,M.texture),h.uniform1i(L.uniforms.uSampler,1),h.uniform1i(L.uniforms.isVertical,!0),h.uniform1f(L.uniforms.blurSize,x.blurSize||2),h.uniform1f(L.uniforms.devicePixelRatio,window.devicePixelRatio),h.uniform2fv(L.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(L.program),h.bindFramebuffer(h.FRAMEBUFFER,M),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,F.texture),h.uniform1i(L.uniforms.uSampler,1),h.uniform1i(L.uniforms.isVertical,!1),h.uniform1f(L.uniforms.blurSize,x.blurSize||2),h.uniform1f(L.uniforms.devicePixelRatio,window.devicePixelRatio),h.uniform2fv(L.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(g.program),h.bindFramebuffer(h.FRAMEBUFFER,s),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,f),h.uniform1i(g.uniforms.originalTexture,1),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,M.texture),h.uniform1i(g.uniforms.bloomTexture,0),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.bindBuffer(h.ARRAY_BUFFER,null),h.useProgram(null)}}]),o}(Fh),ch=function(m){function o(c){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c))}return _n(o,m),on(o,[{key:"getProgram",value:function(s){return this.programBright||(this.programBright=new ui(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-threshold));gl_FragColor=lightColor;}"})),this.programBloom||(this.programBloom=new ui(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new ui(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;uniform float toneScale;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord)*toneScale;vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(s){this.collectBrightBuffer=new ps(s),this.bloomBuffer=new ps(s)}},{key:"getExtraFbo",value:function(s){return this.collectBrightBuffer||(this.collectBrightBuffer=new ps(s)),this.bloomBuffer||(this.bloomBuffer=new ps(s)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(s){var h=s.gl,f=s.texture;s=s.fbo;var x=this.getOptions(),g="clarity"in x?x.clarity:1;g=Math.max(0,g),g=Math.min(1,g),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var _=this.getProgram(h),L=_.programBright,F=_.programBloom;_=_.programResult;var M=this.getExtraFbo(h),E=M.collectBrightBuffer;M=M.bloomBuffer;var P=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,P),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.vertex),h.STATIC_DRAW),h.enableVertexAttribArray(L.attributes.aPos),h.vertexAttribPointer(L.attributes.aPos,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(F.attributes.aPos),h.vertexAttribPointer(F.attributes.aPos,3,h.FLOAT,!1,0,0),h.enableVertexAttribArray(_.attributes.aPos),h.vertexAttribPointer(_.attributes.aPos,3,h.FLOAT,!1,0,0),P=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,P),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.sampleCoord),h.STATIC_DRAW),h.enableVertexAttribArray(L.attributes.aTextureCoord),h.vertexAttribPointer(L.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(F.attributes.aTextureCoord),h.vertexAttribPointer(F.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.enableVertexAttribArray(_.attributes.aTextureCoord),h.vertexAttribPointer(_.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.useProgram(L.program),h.bindFramebuffer(h.FRAMEBUFFER,E),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,f),h.uniform1i(L.uniforms.uSampler,1),h.uniform1f(L.uniforms.threshold,x.threshold||0),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(F.program),h.bindFramebuffer(h.FRAMEBUFFER,M),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,E.texture),h.uniform1i(F.uniforms.uSampler,1),h.uniform1i(F.uniforms.isVertical,!0),h.uniform1f(F.uniforms.blurSize,x.blurSize||2),h.uniform1f(F.uniforms.devicePixelRatio,window.devicePixelRatio),h.uniform2fv(F.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(F.program),h.bindFramebuffer(h.FRAMEBUFFER,E),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,M.texture),h.uniform1i(F.uniforms.uSampler,1),h.uniform1i(F.uniforms.isVertical,!1),h.uniform1f(F.uniforms.blurSize,x.blurSize||2),h.uniform1f(F.uniforms.devicePixelRatio,window.devicePixelRatio),h.uniform2fv(F.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.useProgram(_.program),h.bindFramebuffer(h.FRAMEBUFFER,s),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,f),h.uniform1i(_.uniforms.originalTexture,1),h.uniform1f(_.uniforms.toneScale,g),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,E.texture),h.uniform1i(_.uniforms.bloomTexture,0),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3),h.bindBuffer(h.ARRAY_BUFFER,null),h.useProgram(null)}}]),o}(Fh),mg=function(m){function o(c){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c))}return _n(o,m),on(o,[{key:"getProgram",value:function(s){return this.programSample||(this.programSample=new ui(s,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;void main(){float fStep=1.0/312.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;float desX=abs((gl_FragCoord.x-canvasSize.x/2.0)/(canvasSize.x/2.0));float desY=abs((gl_FragCoord.y-canvasSize.y/2.0)/(canvasSize.y/2.0));float factor=max(desX,desY);gl_FragColor=(sample22*(1.0-factor)+blurSample*factor);}"})),this.programSample}},{key:"render",value:function(s){var h=s.gl;s=s.texture;var f=this.getProgram(h);h.useProgram(f.program);var x=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,x),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.vertex),h.STATIC_DRAW),h.enableVertexAttribArray(f.attributes.aPos),h.vertexAttribPointer(f.attributes.aPos,3,h.FLOAT,!1,0,0),x=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,x),h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.sampleCoord),h.STATIC_DRAW),h.enableVertexAttribArray(f.attributes.aTextureCoord),h.vertexAttribPointer(f.attributes.aTextureCoord,2,h.FLOAT,!1,0,0),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,s),h.uniform1i(f.uniforms.uSampler,1),h.uniform2fv(f.uniforms.canvasSize,[h.canvas.width,h.canvas.height]),h.drawArrays(h.TRIANGLES,0,this.vertex.length/3)}}]),o}(Fh),hh=function(){function m(o){qr(this,m),this.gl=o,this.effects=[],this.initFbo()}return on(m,[{key:"addEffect",value:function(c){this.effects.push(c)}},{key:"removeEffect",value:function(c){}},{key:"setEffects",value:function(c){this.effects=c}},{key:"onResize",value:function(){this.initFbo();var c=this.gl,s=this.effects;if(s&&1<s.length)for(var h=1;h<s.length;h++){var f=s[h];f.onResize&&f.onResize(c)}}},{key:"initFbo",value:function(){var c=this.gl;c&&(this.fbo=[new ps(c),new ps(c)])}},{key:"destroy",value:function(){this.effects=[],this.fbo=[],this.gl=null}},{key:"render",value:function(){var c=this.gl,s=this.effects;if(s&&0<s.length)for(var h={},f=0;f<s.length;f++){var x=this.fbo[f%2].framebuffer;f===s.length-1&&(x=null),c.bindFramebuffer(c.FRAMEBUFFER,x);var g=[0,0,0,0];c.clearColor(g[0],g[1],g[2],g[3]),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),s[f].render({isPickRender:!1,gl:c,texture:h.texture,fbo:x}),h=x}}}]),m}(),xo=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.pickedColor=[-1,-1,-1],c}return _n(o,m),on(o,[{key:"getCommonDefaultOptions",value:function(){return{zIndex:0,zoomThreshold:[0,30],repeat:!1,enablePicked:!1,autoSelect:!1,selectedIndex:-1,selectedColor:"rgba(20, 20, 200, 1.0)"}}},{key:"commonInitialize",value:function(s){var h=this.getOptions();this.gl=s,h.enablePicked&&(this.pickBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}))}},{key:"getCommonAttributes",value:function(){var s=[];return this.getOptions().enablePicked&&s.push({name:"aPickColor",buffer:this.pickBuffer,size:3,type:"FLOAT",stride:12,offset:0}),s}},{key:"getProperty",value:function(s,h,f){return Object.prototype.toString.call(h)==="[object Function]"?h(f):(h=f[s]||h,"properties"in f&&s in f.properties&&(h=f.properties[s]),h)}},{key:"normizedColor",value:function(s){var h=s;return s instanceof Array||(h=Ne(s).unitArray()),h[3]===void 0&&(h[3]=1),h}},{key:"normizedPoint",value:function(s){var h=this.getPointOffset();if(!s||!s[0]||!s[1])return[h[0],h[1],0];var f=Number(s[0]),x=Number(s[1]);-180<=f&&180>=f&&-90<=x&&90>=x&&(x=this.webglLayer.map.lnglatToMercator(f,x),f=x[0],x=x[1]);var g=Number(s[2])||0;return this.webglLayer&&this.webglLayer.options.mapType==="cesium"&&window.Cesium?(f=this.convertLngLat([f,x]),g=window.Cesium.Cartesian3.fromDegrees(f[0],f[1],g),f=g.x,x=g.y,g=g.z):this.webglLayer&&this.webglLayer.options.mapType==="bmapgl"&&this.webglLayer.map.map.mapType==="B_EARTH_MAP"&&(f=this.convertLngLat([f,x]),g=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:f[0],lat:f[1]}),f=g.x,x=g.y,g=g.z),3<s.length?[f-h[0],x-h[1],g].concat(Vi(s.slice(3))):[f-h[0],x-h[1],g]}},{key:"convertLngLat",value:function(s){return[s[0]/2003750834e-2*180,180/Math.PI*(2*Math.atan(Math.exp(s[1]/2003750834e-2*180*Math.PI/180))-Math.PI/2)]}},{key:"getPointOffset",value:function(){var s=[0,0],h=this.getOptions();return this.webglLayer&&this.webglLayer.options.pointOffset?s=this.webglLayer.options.pointOffset:h.pointOffset&&(s=h.pointOffset),s}},{key:"indexToRgb",value:function(s){s++;var h=Math.floor(s/65536);s-=65536*h;var f=Math.floor(s/256);return[s-256*f,f,h]}},{key:"rgbToIndex",value:function(s){return s[0]+256*s[1]+65536*s[2]-1}},{key:"getCommonUniforms",value:function(s){s=s.isPickRender;var h=this.getOptions(),f={};if(h.enablePicked){var x=0<=h.selectedIndex?h.selectedIndex:-1;x=h.autoSelect?this.pickedColor:this.indexToRgb(x),f=vi(f,{uSelectedColor:this.normizedColor(h.selectedColor),uEnablePicked:h.enablePicked,uPickedColor:x.map(function(g){return g/255}),uIsPickRender:!!s})}return f}},{key:"pick",value:function(s,h){var f=this.gl,x=this.webglLayer._dpr;this.webglLayer.saveFramebuffer(),this.webglLayer.bindFramebuffer(this.webglLayer.pickFBO),this.webglLayer.clear(),this.render({gl:f,isPickRender:!0,matrix:this.webglLayer.matrix,projectionMatrix:this.webglLayer.projectionMatrix,viewMatrix:this.webglLayer.viewMatrix,orthoMatrix:this.webglLayer.orthoMatrix});var g=new Uint8Array(4);return f.readPixels(s*x,f.canvas.height-h*x,1,1,f.RGBA,f.UNSIGNED_BYTE,g),s=this.rgbToIndex(g),h=this.getData(),this.pickedColor=[g[0],g[1],g[2]],this.webglLayer.restoreFramebuffer(),{dataIndex:s,dataItem:h[s]}}},{key:"setGLState",value:function(s){this.webglLayer.stateManager.setState(s)}},{key:"addMultipleCoords",value:function(s,h,f){if(!this.options.repeat||!this.webglLayer||this.webglLayer.options.mapType!=="bmapgl"||this.webglLayer.map.map.mapType==="B_EARTH_MAP")return[s];var x=this.webglLayer.map.map;h=h||x.getZoom();var g=f?x.worldSize(h):4007545274461451e-8;if(h=function(B){return[[B[0]-g,B[1],B[2]||0],[B[0]+g,B[1],B[2]||0]]},s instanceof Array&&!(s[0]instanceof Array))return h=h(s),h=Hi(h,2),[s,h[0],h[1]];if(s instanceof Array&&s[0]instanceof Array&&!(s[0][0]instanceof Array)){f=[],x=[];for(var _=0;_<s.length;_++){var L=h(s[_]);L=Hi(L,2);var F=L[1];f.push(L[0]),x.push(F)}return[s,f,x]}for(f=[],x=[],_=0;_<s.length;_++){L=[],F=[];for(var M=0;M<s[_].length;M++){var E=h(s[_][M]);E=Hi(E,2);var P=E[1];L.push(E[0]),F.push(P)}f.push(L),x.push(F)}return[s,f,x]}}]),o}(Ad),pm=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.bufferData=[],c.initializeTime=new Date,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{size:10,unit:"px",color:"blue",antialias:!0}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.program=new ui(this.gl,{vertexShader:`attribute vec3 aPos;attribute float aSize;attribute float aIndex;attribute vec4 aColor;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;float x=aPos.x;float y=aPos.y;float z=aPos.z*uZoomUnits;vSize=aSize*uZoomUnits;if(aIndex==1.0){x+=vSize;y-=vSize;}else if(aIndex==2.0){x-=vSize;y+=vSize;}else if(aIndex==3.0){x+=vSize;y+=vSize;}else{x-=vSize;y-=vSize;}vPosition=vec4(aPos.xyz,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float lineWidth;uniform float uAntiAliasing;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>vSize){discard;}vec4 color=vColor;if(uAntiAliasing==1.0&&d>0.9*vSize&&d<=vSize){color.a*=1.0-smoothstep(0.9*vSize,vSize,d);}gl_FragColor=color;}",defines:h.enablePicked?["PICK"]:[]},this),this.buffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{stride:36,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:36,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:12},{stride:36,name:"aIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:16},{stride:36,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:20}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"onChanged",value:function(s,h){this.gl&&h&&(this.uniforms={},this.data=h,this.processData(),s.enablePicked&&this.parsePickData(h))}},{key:"processData",value:function(){var s=this,h=[],f=[];this.data.forEach(function(x,g){var _=x.color||s.options.color,L=x.size||s.options.size;_=s.normizedColor(_),x=s.normizedPoint(x.geometry.coordinates);for(var F=0;4>F;F++)h.push(x[0],x[1],x[2]||0,L,F),h.push(_[0],_[1],_[2],_[3]);_=4*g,0<g&&f.push(_-1,_),f.push(_,_+1,_+2,_+3)}),this.bufferData=h,this.indexData=f,this.buffer.updateData(new Float32Array(h)),this.indexBuffer.updateData(new Uint32Array(f))}},{key:"parsePickData",value:function(s){var h=[];if(this.getOptions().enablePicked){for(var f=0;f<s.length;f++){var x=this.indexToRgb(f);h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255)}this.pickBuffer.updateData(new Float32Array(h))}}},{key:"render",value:function(s){var h=this.program,f=s.gl,x=s.matrix;this.setGLState({blend:!0,blendEquation:f.FUNC_ADD,blendFunc:[f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA]}),h.use(f),this.vertexArray.bind(),this.indexBuffer.bind();var g=this.map.getZoomUnits();vi(this.uniforms,this.getCommonUniforms(s),{uZoomUnits:this.options.unit==="px"?g:1,uMatrix:x,uAntiAliasing:this.options.antialias?1:0}),h.setUniforms(this.uniforms),f.drawElements(f.TRIANGLE_STRIP,this.indexData.length,f.UNSIGNED_INT,0)}}]),o}(xo),zl={wave:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;varying float vWidth;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}vec4 color=vColor;float R=vRadius;float center=vSize;float time=vStartTime+uTime;float alpha=sin((R-d)/R*trail*2.0*3.14+time/duration);if(d<=center){if(uAntiAliasing==1.0&&d>0.9*center&&d<=center){if(alpha>=0.5){color.a=0.9;}else{color.a=1.0-smoothstep(0.9*center,center,d);}}}else{if(alpha>=0.5){color.a=0.9;if(uAntiAliasing==1.0){if(alpha>=0.5&&alpha<=0.6){color.a*=smoothstep(0.0,0.1,alpha-0.5);}if(d>=0.98*R&&d<=R){color.a*=1.0-smoothstep(0.98,1.0,d/R);}}}else{color.a=0.0;}}gl_FragColor=color;}",bubble:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;varying float vWidth;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}float time=vStartTime+uTime;float range=mod(time,(duration+trail));float percent=0.0;if(range<=duration){percent=range/duration;}else{percent=1.0;}float center=vSize;float R=vRadius;float r=R*percent;vec4 color=vColor;if(d<=center){if(uAntiAliasing==1.0&&d>0.9*center&&d<=center){color.a=1.0-smoothstep(0.9*center,center,d);}}else{if(d<r){color.a=smoothstep(0.1,0.9,pow(d/r,2.0)*0.9);if(uAntiAliasing==1.0&&d>=0.9*r&&d<=r){color.a*=1.0-smoothstep(0.9,1.0,d/r);}if(range>duration){color.a*=1.0-(range-duration)/trail;}}else{color.a=0.0;}}gl_FragColor=color;}",breath:"varying vec4 vPosition;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}vec4 color=vColor;if(uAntiAliasing==1.0&&d>0.9*vRadius&&d<=vRadius){color.a=1.0-smoothstep(0.9*vRadius,vRadius,d);}float time=vStartTime+uTime;float range=mod(time,(duration+trail));float percent=0.0;if(range<=duration){percent=range/duration;}else{percent=1.0;}color.a*=abs(1.0-percent*2.0)+0.2;gl_FragColor=color;}"},vg=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.autoUpdate=!0,c.bufferData=[],c.initializeTime=new Date,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,type:"bubble",size:10,duration:1,trail:1,unit:"px",random:!0,color:"blue",antialias:!0,radius:function(h){return 2*h}}}},{key:"initialize",value:function(s){this.gl=s,this.program=new ui(this.gl,{vertexShader:`attribute vec3 aPos;attribute float aSize;attribute float aIndex;attribute vec4 aColor;attribute float aStartTime;attribute float aRadius;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vWidth;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vStartTime=aStartTime;vSize=aSize*uZoomUnits;vRadius=aRadius*uZoomUnits;float x=aPos.x;float y=aPos.y;float z=aPos.z*uZoomUnits;float R=vRadius;if(aIndex==1.0){x+=R;y-=R;}else if(aIndex==2.0){x-=R;y+=R;}else if(aIndex==3.0){x+=R;y+=R;}else{x-=R;y-=R;}vPosition=vec4(aPos.xy,z,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:zl[this.options.type]||"bubble",defines:this.options.enablePicked?["PICK"]:[]},this),this.buffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});var h=[{stride:44,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:44,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:12},{stride:44,name:"aIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:16},{stride:44,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:20},{stride:44,name:"aRadius",buffer:this.buffer,size:1,type:"FLOAT",offset:36},{stride:44,name:"aStartTime",buffer:this.buffer,size:1,type:"FLOAT",offset:40}];h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"onChanged",value:function(s,h){this.gl&&h&&(this.uniforms={duration:s.duration,trail:s.trail},this.data=h,this.processData(),s.enablePicked&&this.parsePickData(h))}},{key:"processData",value:function(){var s=this,h=[],f=[];this.data.forEach(function(x,g){var _=x.size||s.options.size,L=x.radius||s.options.radius||1.618*_;typeof L=="function"&&(L=L(_));var F=x.color||s.options.color;F=s.normizedColor(F),x=s.normizedPoint(x.geometry.coordinates);for(var M=s.options.random?Math.random()*s.data.length*9999:0,E=0;4>E;E++)h.push(x[0],x[1],x[2]||0,_,E),h.push(F[0],F[1],F[2],F[3]),h.push(L),h.push(M);_=4*g,0<g&&f.push(_-1,_),f.push(_,_+1,_+2,_+3)}),this.bufferData=h,this.indexData=f,this.buffer.updateData(new Float32Array(h)),this.indexBuffer.updateData(new Uint32Array(f))}},{key:"parsePickData",value:function(s){var h=[];if(this.getOptions().enablePicked){for(var f=0;f<s.length;f++){var x=this.indexToRgb(f);h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255),h.push(x[0]/255,x[1]/255,x[2]/255)}this.pickBuffer.updateData(new Float32Array(h))}}},{key:"render",value:function(s){var h=this.getOptions(),f=this.program,x=s.gl,g=s.matrix;f.use(x);var _=this.map.getZoomUnits();vi(this.uniforms,this.getCommonUniforms(s),{uTime:(new Date-this.initializeTime)/1e3,uZoomUnits:h.unit==="m"?1:_,uMatrix:g,uAntiAliasing:h.antialias?1:0}),f.setUniforms(this.uniforms),this.setGLState({blend:!0,blendEquation:x.FUNC_ADD,blendFunc:[x.SRC_ALPHA,x.ONE_MINUS_SRC_ALPHA],depthTest:h.depthTest,depthMask:h.depthWrite}),0<this.indexData.length&&(this.vertexArray.bind(),this.indexBuffer.bind(),x.drawElements(x.TRIANGLE_STRIP,this.indexData.length,x.UNSIGNED_INT,0))}}]),o}(xo),gm=Fa(zl),mm=Ye(function(m,o){o.__esModule=!0;var c=xc&&xc.__esModule?xc:{default:xc},s=df&&df.__esModule?df:{default:df};o.default=function h(f,x,g){f===null&&(f=Function.prototype);var _=(0,s.default)(f,x);if(_===void 0){if(f=(0,c.default)(f),f!==null)return h(f,x,g)}else return"value"in _?_.value:(x=_.get,x===void 0?void 0:x.call(g))}}),tc=At(mm),lu=Ye(function(m,o){Object.defineProperty(o,"__esModule",{value:!0}),o.setMatrixArrayType=function(f){o.ARRAY_TYPE=s=f},o.toRadian=function(f){return f*h},o.equals=function(f,x){return Math.abs(f-x)<=c*Math.max(1,Math.abs(f),Math.abs(x))},o.RANDOM=o.ARRAY_TYPE=o.EPSILON=void 0;var c=1e-6;o.EPSILON=c;var s=typeof Float32Array!="undefined"?Float32Array:Array;o.ARRAY_TYPE=s,o.RANDOM=Math.random;var h=Math.PI/180});At(lu);var yg=Ye(function(m,o){function c(f,x,g){var _=x[0],L=x[1],F=x[2];x=x[3];var M=g[0],E=g[1],P=g[2];return g=g[3],f[0]=_*M+F*E,f[1]=L*M+x*E,f[2]=_*P+F*g,f[3]=L*P+x*g,f}function s(f,x,g){return f[0]=x[0]-g[0],f[1]=x[1]-g[1],f[2]=x[2]-g[2],f[3]=x[3]-g[3],f}Object.defineProperty(o,"__esModule",{value:!0}),o.create=function(){var f=new h.ARRAY_TYPE(4);return h.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f},o.clone=function(f){var x=new h.ARRAY_TYPE(4);return x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3],x},o.copy=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f},o.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f},o.fromValues=function(f,x,g,_){var L=new h.ARRAY_TYPE(4);return L[0]=f,L[1]=x,L[2]=g,L[3]=_,L},o.set=function(f,x,g,_,L){return f[0]=x,f[1]=g,f[2]=_,f[3]=L,f},o.transpose=function(f,x){if(f===x){var g=x[1];f[1]=x[2],f[2]=g}else f[0]=x[0],f[1]=x[2],f[2]=x[1],f[3]=x[3];return f},o.invert=function(f,x){var g=x[0],_=x[1],L=x[2];x=x[3];var F=g*x-L*_;return F?(F=1/F,f[0]=x*F,f[1]=-_*F,f[2]=-L*F,f[3]=g*F,f):null},o.adjoint=function(f,x){var g=x[0];return f[0]=x[3],f[1]=-x[1],f[2]=-x[2],f[3]=g,f},o.determinant=function(f){return f[0]*f[3]-f[2]*f[1]},o.multiply=c,o.rotate=function(f,x,g){var _=x[0],L=x[1],F=x[2];x=x[3];var M=Math.sin(g);return g=Math.cos(g),f[0]=_*g+F*M,f[1]=L*g+x*M,f[2]=_*-M+F*g,f[3]=L*-M+x*g,f},o.scale=function(f,x,g){var _=x[1],L=x[2],F=x[3],M=g[0];return g=g[1],f[0]=x[0]*M,f[1]=_*M,f[2]=L*g,f[3]=F*g,f},o.fromRotation=function(f,x){var g=Math.sin(x);return x=Math.cos(x),f[0]=x,f[1]=g,f[2]=-g,f[3]=x,f},o.fromScaling=function(f,x){return f[0]=x[0],f[1]=0,f[2]=0,f[3]=x[1],f},o.str=function(f){return"mat2("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"},o.frob=function(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2))},o.LDU=function(f,x,g,_){return f[2]=_[2]/_[0],g[0]=_[0],g[1]=_[1],g[3]=_[3]-f[2]*g[1],[f,x,g]},o.add=function(f,x,g){return f[0]=x[0]+g[0],f[1]=x[1]+g[1],f[2]=x[2]+g[2],f[3]=x[3]+g[3],f},o.subtract=s,o.exactEquals=function(f,x){return f[0]===x[0]&&f[1]===x[1]&&f[2]===x[2]&&f[3]===x[3]},o.equals=function(f,x){var g=f[0],_=f[1],L=f[2];f=f[3];var F=x[0],M=x[1],E=x[2];return x=x[3],Math.abs(g-F)<=h.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(_-M)<=h.EPSILON*Math.max(1,Math.abs(_),Math.abs(M))&&Math.abs(L-E)<=h.EPSILON*Math.max(1,Math.abs(L),Math.abs(E))&&Math.abs(f-x)<=h.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))},o.multiplyScalar=function(f,x,g){return f[0]=x[0]*g,f[1]=x[1]*g,f[2]=x[2]*g,f[3]=x[3]*g,f},o.multiplyScalarAndAdd=function(f,x,g,_){return f[0]=x[0]+g[0]*_,f[1]=x[1]+g[1]*_,f[2]=x[2]+g[2]*_,f[3]=x[3]+g[3]*_,f},o.sub=o.mul=void 0;var h=function(f){if(f&&f.__esModule)return f;var x={};if(f!=null){for(var g in f)if(Object.prototype.hasOwnProperty.call(f,g)){var _=Jo&&La?La(f,g):{};_.get||_.set?Jo(x,g,_):x[g]=f[g]}}return x.default=f,x}(lu);o.mul=c,o.sub=s});At(yg);var bu=Ye(function(m,o){function c(f,x,g){var _=x[0],L=x[1],F=x[2],M=x[3],E=x[4];x=x[5];var P=g[0],O=g[1],B=g[2],X=g[3],W=g[4];return g=g[5],f[0]=_*P+F*O,f[1]=L*P+M*O,f[2]=_*B+F*X,f[3]=L*B+M*X,f[4]=_*W+F*g+E,f[5]=L*W+M*g+x,f}function s(f,x,g){return f[0]=x[0]-g[0],f[1]=x[1]-g[1],f[2]=x[2]-g[2],f[3]=x[3]-g[3],f[4]=x[4]-g[4],f[5]=x[5]-g[5],f}Object.defineProperty(o,"__esModule",{value:!0}),o.create=function(){var f=new h.ARRAY_TYPE(6);return h.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[4]=0,f[5]=0),f[0]=1,f[3]=1,f},o.clone=function(f){var x=new h.ARRAY_TYPE(6);return x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3],x[4]=f[4],x[5]=f[5],x},o.copy=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f[4]=x[4],f[5]=x[5],f},o.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=0,f[5]=0,f},o.fromValues=function(f,x,g,_,L,F){var M=new h.ARRAY_TYPE(6);return M[0]=f,M[1]=x,M[2]=g,M[3]=_,M[4]=L,M[5]=F,M},o.set=function(f,x,g,_,L,F,M){return f[0]=x,f[1]=g,f[2]=_,f[3]=L,f[4]=F,f[5]=M,f},o.invert=function(f,x){var g=x[0],_=x[1],L=x[2],F=x[3],M=x[4];x=x[5];var E=g*F-_*L;return E?(E=1/E,f[0]=F*E,f[1]=-_*E,f[2]=-L*E,f[3]=g*E,f[4]=(L*x-F*M)*E,f[5]=(_*M-g*x)*E,f):null},o.determinant=function(f){return f[0]*f[3]-f[1]*f[2]},o.multiply=c,o.rotate=function(f,x,g){var _=x[0],L=x[1],F=x[2],M=x[3],E=x[4];x=x[5];var P=Math.sin(g);return g=Math.cos(g),f[0]=_*g+F*P,f[1]=L*g+M*P,f[2]=_*-P+F*g,f[3]=L*-P+M*g,f[4]=E,f[5]=x,f},o.scale=function(f,x,g){var _=x[1],L=x[2],F=x[3],M=x[4],E=x[5],P=g[0];return g=g[1],f[0]=x[0]*P,f[1]=_*P,f[2]=L*g,f[3]=F*g,f[4]=M,f[5]=E,f},o.translate=function(f,x,g){var _=x[0],L=x[1],F=x[2],M=x[3],E=x[4];x=x[5];var P=g[0];return g=g[1],f[0]=_,f[1]=L,f[2]=F,f[3]=M,f[4]=_*P+F*g+E,f[5]=L*P+M*g+x,f},o.fromRotation=function(f,x){var g=Math.sin(x);return x=Math.cos(x),f[0]=x,f[1]=g,f[2]=-g,f[3]=x,f[4]=0,f[5]=0,f},o.fromScaling=function(f,x){return f[0]=x[0],f[1]=0,f[2]=0,f[3]=x[1],f[4]=0,f[5]=0,f},o.fromTranslation=function(f,x){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=x[0],f[5]=x[1],f},o.str=function(f){return"mat2d("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+")"},o.frob=function(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2)+Math.pow(f[4],2)+Math.pow(f[5],2)+1)},o.add=function(f,x,g){return f[0]=x[0]+g[0],f[1]=x[1]+g[1],f[2]=x[2]+g[2],f[3]=x[3]+g[3],f[4]=x[4]+g[4],f[5]=x[5]+g[5],f},o.subtract=s,o.multiplyScalar=function(f,x,g){return f[0]=x[0]*g,f[1]=x[1]*g,f[2]=x[2]*g,f[3]=x[3]*g,f[4]=x[4]*g,f[5]=x[5]*g,f},o.multiplyScalarAndAdd=function(f,x,g,_){return f[0]=x[0]+g[0]*_,f[1]=x[1]+g[1]*_,f[2]=x[2]+g[2]*_,f[3]=x[3]+g[3]*_,f[4]=x[4]+g[4]*_,f[5]=x[5]+g[5]*_,f},o.exactEquals=function(f,x){return f[0]===x[0]&&f[1]===x[1]&&f[2]===x[2]&&f[3]===x[3]&&f[4]===x[4]&&f[5]===x[5]},o.equals=function(f,x){var g=f[0],_=f[1],L=f[2],F=f[3],M=f[4];f=f[5];var E=x[0],P=x[1],O=x[2],B=x[3],X=x[4];return x=x[5],Math.abs(g-E)<=h.EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(_-P)<=h.EPSILON*Math.max(1,Math.abs(_),Math.abs(P))&&Math.abs(L-O)<=h.EPSILON*Math.max(1,Math.abs(L),Math.abs(O))&&Math.abs(F-B)<=h.EPSILON*Math.max(1,Math.abs(F),Math.abs(B))&&Math.abs(M-X)<=h.EPSILON*Math.max(1,Math.abs(M),Math.abs(X))&&Math.abs(f-x)<=h.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))},o.sub=o.mul=void 0;var h=function(f){if(f&&f.__esModule)return f;var x={};if(f!=null){for(var g in f)if(Object.prototype.hasOwnProperty.call(f,g)){var _=Jo&&La?La(f,g):{};_.get||_.set?Jo(x,g,_):x[g]=f[g]}}return x.default=f,x}(lu);o.mul=c,o.sub=s});At(bu);var Nh=Ye(function(m,o){function c(f,x,g){var _=x[0],L=x[1],F=x[2],M=x[3],E=x[4],P=x[5],O=x[6],B=x[7];x=x[8];var X=g[0],W=g[1],U=g[2],q=g[3],he=g[4],ge=g[5],_e=g[6],Se=g[7];return g=g[8],f[0]=X*_+W*M+U*O,f[1]=X*L+W*E+U*B,f[2]=X*F+W*P+U*x,f[3]=q*_+he*M+ge*O,f[4]=q*L+he*E+ge*B,f[5]=q*F+he*P+ge*x,f[6]=_e*_+Se*M+g*O,f[7]=_e*L+Se*E+g*B,f[8]=_e*F+Se*P+g*x,f}function s(f,x,g){return f[0]=x[0]-g[0],f[1]=x[1]-g[1],f[2]=x[2]-g[2],f[3]=x[3]-g[3],f[4]=x[4]-g[4],f[5]=x[5]-g[5],f[6]=x[6]-g[6],f[7]=x[7]-g[7],f[8]=x[8]-g[8],f}Object.defineProperty(o,"__esModule",{value:!0}),o.create=function(){var f=new h.ARRAY_TYPE(9);return h.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f},o.fromMat4=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[4],f[4]=x[5],f[5]=x[6],f[6]=x[8],f[7]=x[9],f[8]=x[10],f},o.clone=function(f){var x=new h.ARRAY_TYPE(9);return x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3],x[4]=f[4],x[5]=f[5],x[6]=f[6],x[7]=f[7],x[8]=f[8],x},o.copy=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f[4]=x[4],f[5]=x[5],f[6]=x[6],f[7]=x[7],f[8]=x[8],f},o.fromValues=function(f,x,g,_,L,F,M,E,P){var O=new h.ARRAY_TYPE(9);return O[0]=f,O[1]=x,O[2]=g,O[3]=_,O[4]=L,O[5]=F,O[6]=M,O[7]=E,O[8]=P,O},o.set=function(f,x,g,_,L,F,M,E,P,O){return f[0]=x,f[1]=g,f[2]=_,f[3]=L,f[4]=F,f[5]=M,f[6]=E,f[7]=P,f[8]=O,f},o.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},o.transpose=function(f,x){if(f===x){var g=x[1],_=x[2],L=x[5];f[1]=x[3],f[2]=x[6],f[3]=g,f[5]=x[7],f[6]=_,f[7]=L}else f[0]=x[0],f[1]=x[3],f[2]=x[6],f[3]=x[1],f[4]=x[4],f[5]=x[7],f[6]=x[2],f[7]=x[5],f[8]=x[8];return f},o.invert=function(f,x){var g=x[0],_=x[1],L=x[2],F=x[3],M=x[4],E=x[5],P=x[6],O=x[7];x=x[8];var B=x*M-E*O,X=-x*F+E*P,W=O*F-M*P,U=g*B+_*X+L*W;return U?(U=1/U,f[0]=B*U,f[1]=(-x*_+L*O)*U,f[2]=(E*_-L*M)*U,f[3]=X*U,f[4]=(x*g-L*P)*U,f[5]=(-E*g+L*F)*U,f[6]=W*U,f[7]=(-O*g+_*P)*U,f[8]=(M*g-_*F)*U,f):null},o.adjoint=function(f,x){var g=x[0],_=x[1],L=x[2],F=x[3],M=x[4],E=x[5],P=x[6],O=x[7];return x=x[8],f[0]=M*x-E*O,f[1]=L*O-_*x,f[2]=_*E-L*M,f[3]=E*P-F*x,f[4]=g*x-L*P,f[5]=L*F-g*E,f[6]=F*O-M*P,f[7]=_*P-g*O,f[8]=g*M-_*F,f},o.determinant=function(f){var x=f[3],g=f[4],_=f[5],L=f[6],F=f[7],M=f[8];return f[0]*(M*g-_*F)+f[1]*(-M*x+_*L)+f[2]*(F*x-g*L)},o.multiply=c,o.translate=function(f,x,g){var _=x[0],L=x[1],F=x[2],M=x[3],E=x[4],P=x[5],O=x[6],B=x[7];x=x[8];var X=g[0];return g=g[1],f[0]=_,f[1]=L,f[2]=F,f[3]=M,f[4]=E,f[5]=P,f[6]=X*_+g*M+O,f[7]=X*L+g*E+B,f[8]=X*F+g*P+x,f},o.rotate=function(f,x,g){var _=x[0],L=x[1],F=x[2],M=x[3],E=x[4],P=x[5],O=x[6],B=x[7];x=x[8];var X=Math.sin(g);return g=Math.cos(g),f[0]=g*_+X*M,f[1]=g*L+X*E,f[2]=g*F+X*P,f[3]=g*M-X*_,f[4]=g*E-X*L,f[5]=g*P-X*F,f[6]=O,f[7]=B,f[8]=x,f},o.scale=function(f,x,g){var _=g[0];return g=g[1],f[0]=_*x[0],f[1]=_*x[1],f[2]=_*x[2],f[3]=g*x[3],f[4]=g*x[4],f[5]=g*x[5],f[6]=x[6],f[7]=x[7],f[8]=x[8],f},o.fromTranslation=function(f,x){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=x[0],f[7]=x[1],f[8]=1,f},o.fromRotation=function(f,x){var g=Math.sin(x);return x=Math.cos(x),f[0]=x,f[1]=g,f[2]=0,f[3]=-g,f[4]=x,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},o.fromScaling=function(f,x){return f[0]=x[0],f[1]=0,f[2]=0,f[3]=0,f[4]=x[1],f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},o.fromMat2d=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=0,f[3]=x[2],f[4]=x[3],f[5]=0,f[6]=x[4],f[7]=x[5],f[8]=1,f},o.fromQuat=function(f,x){var g=x[0],_=x[1],L=x[2];x=x[3];var F=g+g,M=_+_,E=L+L;g*=F;var P=_*F;_*=M;var O=L*F,B=L*M;return L*=E,F*=x,M*=x,x*=E,f[0]=1-_-L,f[3]=P-x,f[6]=O+M,f[1]=P+x,f[4]=1-g-L,f[7]=B-F,f[2]=O-M,f[5]=B+F,f[8]=1-g-_,f},o.normalFromMat4=function(f,x){var g=x[0],_=x[1],L=x[2],F=x[3],M=x[4],E=x[5],P=x[6],O=x[7],B=x[8],X=x[9],W=x[10],U=x[11],q=x[12],he=x[13],ge=x[14];x=x[15];var _e=g*E-_*M,Se=g*P-L*M,$e=g*O-F*M,Be=_*P-L*E,lt=_*O-F*E,kt=L*O-F*P,cr=B*he-X*q,Ur=B*ge-W*q;B=B*x-U*q;var Ar=X*ge-W*he;return X=X*x-U*he,W=W*x-U*ge,U=_e*W-Se*X+$e*Ar+Be*B-lt*Ur+kt*cr,U?(U=1/U,f[0]=(E*W-P*X+O*Ar)*U,f[1]=(P*B-M*W-O*Ur)*U,f[2]=(M*X-E*B+O*cr)*U,f[3]=(L*X-_*W-F*Ar)*U,f[4]=(g*W-L*B+F*Ur)*U,f[5]=(_*B-g*X-F*cr)*U,f[6]=(he*kt-ge*lt+x*Be)*U,f[7]=(ge*$e-q*kt-x*Se)*U,f[8]=(q*lt-he*$e+x*_e)*U,f):null},o.projection=function(f,x,g){return f[0]=2/x,f[1]=0,f[2]=0,f[3]=0,f[4]=-2/g,f[5]=0,f[6]=-1,f[7]=1,f[8]=1,f},o.str=function(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"},o.frob=function(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2)+Math.pow(f[4],2)+Math.pow(f[5],2)+Math.pow(f[6],2)+Math.pow(f[7],2)+Math.pow(f[8],2))},o.add=function(f,x,g){return f[0]=x[0]+g[0],f[1]=x[1]+g[1],f[2]=x[2]+g[2],f[3]=x[3]+g[3],f[4]=x[4]+g[4],f[5]=x[5]+g[5],f[6]=x[6]+g[6],f[7]=x[7]+g[7],f[8]=x[8]+g[8],f},o.subtract=s,o.multiplyScalar=function(f,x,g){return f[0]=x[0]*g,f[1]=x[1]*g,f[2]=x[2]*g,f[3]=x[3]*g,f[4]=x[4]*g,f[5]=x[5]*g,f[6]=x[6]*g,f[7]=x[7]*g,f[8]=x[8]*g,f},o.multiplyScalarAndAdd=function(f,x,g,_){return f[0]=x[0]+g[0]*_,f[1]=x[1]+g[1]*_,f[2]=x[2]+g[2]*_,f[3]=x[3]+g[3]*_,f[4]=x[4]+g[4]*_,f[5]=x[5]+g[5]*_,f[6]=x[6]+g[6]*_,f[7]=x[7]+g[7]*_,f[8]=x[8]+g[8]*_,f},o.exactEquals=function(f,x){return f[0]===x[0]&&f[1]===x[1]&&f[2]===x[2]&&f[3]===x[3]&&f[4]===x[4]&&f[5]===x[5]&&f[6]===x[6]&&f[7]===x[7]&&f[8]===x[8]},o.equals=function(f,x){var g=f[0],_=f[1],L=f[2],F=f[3],M=f[4],E=f[5],P=f[6],O=f[7];f=f[8];var B=x[0],X=x[1],W=x[2],U=x[3],q=x[4],he=x[5],ge=x[6],_e=x[7];return x=x[8],Math.abs(g-B)<=h.EPSILON*Math.max(1,Math.abs(g),Math.abs(B))&&Math.abs(_-X)<=h.EPSILON*Math.max(1,Math.abs(_),Math.abs(X))&&Math.abs(L-W)<=h.EPSILON*Math.max(1,Math.abs(L),Math.abs(W))&&Math.abs(F-U)<=h.EPSILON*Math.max(1,Math.abs(F),Math.abs(U))&&Math.abs(M-q)<=h.EPSILON*Math.max(1,Math.abs(M),Math.abs(q))&&Math.abs(E-he)<=h.EPSILON*Math.max(1,Math.abs(E),Math.abs(he))&&Math.abs(P-ge)<=h.EPSILON*Math.max(1,Math.abs(P),Math.abs(ge))&&Math.abs(O-_e)<=h.EPSILON*Math.max(1,Math.abs(O),Math.abs(_e))&&Math.abs(f-x)<=h.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))},o.sub=o.mul=void 0;var h=function(f){if(f&&f.__esModule)return f;var x={};if(f!=null){for(var g in f)if(Object.prototype.hasOwnProperty.call(f,g)){var _=Jo&&La?La(f,g):{};_.get||_.set?Jo(x,g,_):x[g]=f[g]}}return x.default=f,x}(lu);o.mul=c,o.sub=s});At(Nh);var Bh=Ye(function(m,o){function c(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}function s(g,_,L){var F=_[0],M=_[1],E=_[2],P=_[3],O=_[4],B=_[5],X=_[6],W=_[7],U=_[8],q=_[9],he=_[10],ge=_[11],_e=_[12],Se=_[13],$e=_[14];_=_[15];var Be=L[0],lt=L[1],kt=L[2],cr=L[3];return g[0]=Be*F+lt*O+kt*U+cr*_e,g[1]=Be*M+lt*B+kt*q+cr*Se,g[2]=Be*E+lt*X+kt*he+cr*$e,g[3]=Be*P+lt*W+kt*ge+cr*_,Be=L[4],lt=L[5],kt=L[6],cr=L[7],g[4]=Be*F+lt*O+kt*U+cr*_e,g[5]=Be*M+lt*B+kt*q+cr*Se,g[6]=Be*E+lt*X+kt*he+cr*$e,g[7]=Be*P+lt*W+kt*ge+cr*_,Be=L[8],lt=L[9],kt=L[10],cr=L[11],g[8]=Be*F+lt*O+kt*U+cr*_e,g[9]=Be*M+lt*B+kt*q+cr*Se,g[10]=Be*E+lt*X+kt*he+cr*$e,g[11]=Be*P+lt*W+kt*ge+cr*_,Be=L[12],lt=L[13],kt=L[14],cr=L[15],g[12]=Be*F+lt*O+kt*U+cr*_e,g[13]=Be*M+lt*B+kt*q+cr*Se,g[14]=Be*E+lt*X+kt*he+cr*$e,g[15]=Be*P+lt*W+kt*ge+cr*_,g}function h(g,_,L){var F=_[0],M=_[1],E=_[2],P=_[3],O=F+F,B=M+M,X=E+E;_=F*O;var W=F*B;F*=X;var U=M*B;return M*=X,E*=X,O*=P,B*=P,P*=X,g[0]=1-(U+E),g[1]=W+P,g[2]=F-B,g[3]=0,g[4]=W-P,g[5]=1-(_+E),g[6]=M+O,g[7]=0,g[8]=F+B,g[9]=M-O,g[10]=1-(_+U),g[11]=0,g[12]=L[0],g[13]=L[1],g[14]=L[2],g[15]=1,g}function f(g,_,L){return g[0]=_[0]-L[0],g[1]=_[1]-L[1],g[2]=_[2]-L[2],g[3]=_[3]-L[3],g[4]=_[4]-L[4],g[5]=_[5]-L[5],g[6]=_[6]-L[6],g[7]=_[7]-L[7],g[8]=_[8]-L[8],g[9]=_[9]-L[9],g[10]=_[10]-L[10],g[11]=_[11]-L[11],g[12]=_[12]-L[12],g[13]=_[13]-L[13],g[14]=_[14]-L[14],g[15]=_[15]-L[15],g}Object.defineProperty(o,"__esModule",{value:!0}),o.create=function(){var g=new x.ARRAY_TYPE(16);return x.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=0,g[12]=0,g[13]=0,g[14]=0),g[0]=1,g[5]=1,g[10]=1,g[15]=1,g},o.clone=function(g){var _=new x.ARRAY_TYPE(16);return _[0]=g[0],_[1]=g[1],_[2]=g[2],_[3]=g[3],_[4]=g[4],_[5]=g[5],_[6]=g[6],_[7]=g[7],_[8]=g[8],_[9]=g[9],_[10]=g[10],_[11]=g[11],_[12]=g[12],_[13]=g[13],_[14]=g[14],_[15]=g[15],_},o.copy=function(g,_){return g[0]=_[0],g[1]=_[1],g[2]=_[2],g[3]=_[3],g[4]=_[4],g[5]=_[5],g[6]=_[6],g[7]=_[7],g[8]=_[8],g[9]=_[9],g[10]=_[10],g[11]=_[11],g[12]=_[12],g[13]=_[13],g[14]=_[14],g[15]=_[15],g},o.fromValues=function(g,_,L,F,M,E,P,O,B,X,W,U,q,he,ge,_e){var Se=new x.ARRAY_TYPE(16);return Se[0]=g,Se[1]=_,Se[2]=L,Se[3]=F,Se[4]=M,Se[5]=E,Se[6]=P,Se[7]=O,Se[8]=B,Se[9]=X,Se[10]=W,Se[11]=U,Se[12]=q,Se[13]=he,Se[14]=ge,Se[15]=_e,Se},o.set=function(g,_,L,F,M,E,P,O,B,X,W,U,q,he,ge,_e,Se){return g[0]=_,g[1]=L,g[2]=F,g[3]=M,g[4]=E,g[5]=P,g[6]=O,g[7]=B,g[8]=X,g[9]=W,g[10]=U,g[11]=q,g[12]=he,g[13]=ge,g[14]=_e,g[15]=Se,g},o.identity=c,o.transpose=function(g,_){if(g===_){var L=_[1],F=_[2],M=_[3],E=_[6],P=_[7],O=_[11];g[1]=_[4],g[2]=_[8],g[3]=_[12],g[4]=L,g[6]=_[9],g[7]=_[13],g[8]=F,g[9]=E,g[11]=_[14],g[12]=M,g[13]=P,g[14]=O}else g[0]=_[0],g[1]=_[4],g[2]=_[8],g[3]=_[12],g[4]=_[1],g[5]=_[5],g[6]=_[9],g[7]=_[13],g[8]=_[2],g[9]=_[6],g[10]=_[10],g[11]=_[14],g[12]=_[3],g[13]=_[7],g[14]=_[11],g[15]=_[15];return g},o.invert=function(g,_){var L=_[0],F=_[1],M=_[2],E=_[3],P=_[4],O=_[5],B=_[6],X=_[7],W=_[8],U=_[9],q=_[10],he=_[11],ge=_[12],_e=_[13],Se=_[14];_=_[15];var $e=L*O-F*P,Be=L*B-M*P,lt=L*X-E*P,kt=F*B-M*O,cr=F*X-E*O,Ur=M*X-E*B,Ar=W*_e-U*ge,zr=W*Se-q*ge,Gt=W*_-he*ge,Vt=U*Se-q*_e,Pn=U*_-he*_e,Mn=q*_-he*Se,Rn=$e*Mn-Be*Pn+lt*Vt+kt*Gt-cr*zr+Ur*Ar;return Rn?(Rn=1/Rn,g[0]=(O*Mn-B*Pn+X*Vt)*Rn,g[1]=(M*Pn-F*Mn-E*Vt)*Rn,g[2]=(_e*Ur-Se*cr+_*kt)*Rn,g[3]=(q*cr-U*Ur-he*kt)*Rn,g[4]=(B*Gt-P*Mn-X*zr)*Rn,g[5]=(L*Mn-M*Gt+E*zr)*Rn,g[6]=(Se*lt-ge*Ur-_*Be)*Rn,g[7]=(W*Ur-q*lt+he*Be)*Rn,g[8]=(P*Pn-O*Gt+X*Ar)*Rn,g[9]=(F*Gt-L*Pn-E*Ar)*Rn,g[10]=(ge*cr-_e*lt+_*$e)*Rn,g[11]=(U*lt-W*cr-he*$e)*Rn,g[12]=(O*zr-P*Vt-B*Ar)*Rn,g[13]=(L*Vt-F*zr+M*Ar)*Rn,g[14]=(_e*Be-ge*kt-Se*$e)*Rn,g[15]=(W*kt-U*Be+q*$e)*Rn,g):null},o.adjoint=function(g,_){var L=_[0],F=_[1],M=_[2],E=_[3],P=_[4],O=_[5],B=_[6],X=_[7],W=_[8],U=_[9],q=_[10],he=_[11],ge=_[12],_e=_[13],Se=_[14];return _=_[15],g[0]=O*(q*_-he*Se)-U*(B*_-X*Se)+_e*(B*he-X*q),g[1]=-(F*(q*_-he*Se)-U*(M*_-E*Se)+_e*(M*he-E*q)),g[2]=F*(B*_-X*Se)-O*(M*_-E*Se)+_e*(M*X-E*B),g[3]=-(F*(B*he-X*q)-O*(M*he-E*q)+U*(M*X-E*B)),g[4]=-(P*(q*_-he*Se)-W*(B*_-X*Se)+ge*(B*he-X*q)),g[5]=L*(q*_-he*Se)-W*(M*_-E*Se)+ge*(M*he-E*q),g[6]=-(L*(B*_-X*Se)-P*(M*_-E*Se)+ge*(M*X-E*B)),g[7]=L*(B*he-X*q)-P*(M*he-E*q)+W*(M*X-E*B),g[8]=P*(U*_-he*_e)-W*(O*_-X*_e)+ge*(O*he-X*U),g[9]=-(L*(U*_-he*_e)-W*(F*_-E*_e)+ge*(F*he-E*U)),g[10]=L*(O*_-X*_e)-P*(F*_-E*_e)+ge*(F*X-E*O),g[11]=-(L*(O*he-X*U)-P*(F*he-E*U)+W*(F*X-E*O)),g[12]=-(P*(U*Se-q*_e)-W*(O*Se-B*_e)+ge*(O*q-B*U)),g[13]=L*(U*Se-q*_e)-W*(F*Se-M*_e)+ge*(F*q-M*U),g[14]=-(L*(O*Se-B*_e)-P*(F*Se-M*_e)+ge*(F*B-M*O)),g[15]=L*(O*q-B*U)-P*(F*q-M*U)+W*(F*B-M*O),g},o.determinant=function(g){var _=g[0],L=g[1],F=g[2],M=g[3],E=g[4],P=g[5],O=g[6],B=g[7],X=g[8],W=g[9],U=g[10],q=g[11],he=g[12],ge=g[13],_e=g[14];return g=g[15],(_*P-L*E)*(U*g-q*_e)-(_*O-F*E)*(W*g-q*ge)+(_*B-M*E)*(W*_e-U*ge)+(L*O-F*P)*(X*g-q*he)-(L*B-M*P)*(X*_e-U*he)+(F*B-M*O)*(X*ge-W*he)},o.multiply=s,o.translate=function(g,_,L){var F=L[0],M=L[1];if(L=L[2],_===g)g[12]=_[0]*F+_[4]*M+_[8]*L+_[12],g[13]=_[1]*F+_[5]*M+_[9]*L+_[13],g[14]=_[2]*F+_[6]*M+_[10]*L+_[14],g[15]=_[3]*F+_[7]*M+_[11]*L+_[15];else{var E=_[0],P=_[1],O=_[2],B=_[3],X=_[4],W=_[5],U=_[6],q=_[7],he=_[8],ge=_[9],_e=_[10],Se=_[11];g[0]=E,g[1]=P,g[2]=O,g[3]=B,g[4]=X,g[5]=W,g[6]=U,g[7]=q,g[8]=he,g[9]=ge,g[10]=_e,g[11]=Se,g[12]=E*F+X*M+he*L+_[12],g[13]=P*F+W*M+ge*L+_[13],g[14]=O*F+U*M+_e*L+_[14],g[15]=B*F+q*M+Se*L+_[15]}return g},o.scale=function(g,_,L){var F=L[0],M=L[1];return L=L[2],g[0]=_[0]*F,g[1]=_[1]*F,g[2]=_[2]*F,g[3]=_[3]*F,g[4]=_[4]*M,g[5]=_[5]*M,g[6]=_[6]*M,g[7]=_[7]*M,g[8]=_[8]*L,g[9]=_[9]*L,g[10]=_[10]*L,g[11]=_[11]*L,g[12]=_[12],g[13]=_[13],g[14]=_[14],g[15]=_[15],g},o.rotate=function(g,_,L,F){var M=F[0],E=F[1];F=F[2];var P=Math.sqrt(M*M+E*E+F*F);if(P<x.EPSILON)return null;P=1/P,M*=P,E*=P,F*=P;var O=Math.sin(L),B=Math.cos(L),X=1-B;L=_[0],P=_[1];var W=_[2],U=_[3],q=_[4],he=_[5],ge=_[6],_e=_[7],Se=_[8],$e=_[9],Be=_[10],lt=_[11],kt=M*M*X+B,cr=E*M*X+F*O,Ur=F*M*X-E*O,Ar=M*E*X-F*O,zr=E*E*X+B,Gt=F*E*X+M*O,Vt=M*F*X+E*O;return M=E*F*X-M*O,E=F*F*X+B,g[0]=L*kt+q*cr+Se*Ur,g[1]=P*kt+he*cr+$e*Ur,g[2]=W*kt+ge*cr+Be*Ur,g[3]=U*kt+_e*cr+lt*Ur,g[4]=L*Ar+q*zr+Se*Gt,g[5]=P*Ar+he*zr+$e*Gt,g[6]=W*Ar+ge*zr+Be*Gt,g[7]=U*Ar+_e*zr+lt*Gt,g[8]=L*Vt+q*M+Se*E,g[9]=P*Vt+he*M+$e*E,g[10]=W*Vt+ge*M+Be*E,g[11]=U*Vt+_e*M+lt*E,_!==g&&(g[12]=_[12],g[13]=_[13],g[14]=_[14],g[15]=_[15]),g},o.rotateX=function(g,_,L){var F=Math.sin(L);L=Math.cos(L);var M=_[4],E=_[5],P=_[6],O=_[7],B=_[8],X=_[9],W=_[10],U=_[11];return _!==g&&(g[0]=_[0],g[1]=_[1],g[2]=_[2],g[3]=_[3],g[12]=_[12],g[13]=_[13],g[14]=_[14],g[15]=_[15]),g[4]=M*L+B*F,g[5]=E*L+X*F,g[6]=P*L+W*F,g[7]=O*L+U*F,g[8]=B*L-M*F,g[9]=X*L-E*F,g[10]=W*L-P*F,g[11]=U*L-O*F,g},o.rotateY=function(g,_,L){var F=Math.sin(L);L=Math.cos(L);var M=_[0],E=_[1],P=_[2],O=_[3],B=_[8],X=_[9],W=_[10],U=_[11];return _!==g&&(g[4]=_[4],g[5]=_[5],g[6]=_[6],g[7]=_[7],g[12]=_[12],g[13]=_[13],g[14]=_[14],g[15]=_[15]),g[0]=M*L-B*F,g[1]=E*L-X*F,g[2]=P*L-W*F,g[3]=O*L-U*F,g[8]=M*F+B*L,g[9]=E*F+X*L,g[10]=P*F+W*L,g[11]=O*F+U*L,g},o.rotateZ=function(g,_,L){var F=Math.sin(L);L=Math.cos(L);var M=_[0],E=_[1],P=_[2],O=_[3],B=_[4],X=_[5],W=_[6],U=_[7];return _!==g&&(g[8]=_[8],g[9]=_[9],g[10]=_[10],g[11]=_[11],g[12]=_[12],g[13]=_[13],g[14]=_[14],g[15]=_[15]),g[0]=M*L+B*F,g[1]=E*L+X*F,g[2]=P*L+W*F,g[3]=O*L+U*F,g[4]=B*L-M*F,g[5]=X*L-E*F,g[6]=W*L-P*F,g[7]=U*L-O*F,g},o.fromTranslation=function(g,_){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=_[0],g[13]=_[1],g[14]=_[2],g[15]=1,g},o.fromScaling=function(g,_){return g[0]=_[0],g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=_[1],g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=_[2],g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},o.fromRotation=function(g,_,L){var F=L[0],M=L[1];L=L[2];var E=Math.sqrt(F*F+M*M+L*L);if(E<x.EPSILON)return null;E=1/E,F*=E,M*=E,L*=E,E=Math.sin(_),_=Math.cos(_);var P=1-_;return g[0]=F*F*P+_,g[1]=M*F*P+L*E,g[2]=L*F*P-M*E,g[3]=0,g[4]=F*M*P-L*E,g[5]=M*M*P+_,g[6]=L*M*P+F*E,g[7]=0,g[8]=F*L*P+M*E,g[9]=M*L*P-F*E,g[10]=L*L*P+_,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},o.fromXRotation=function(g,_){var L=Math.sin(_);return _=Math.cos(_),g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=_,g[6]=L,g[7]=0,g[8]=0,g[9]=-L,g[10]=_,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},o.fromYRotation=function(g,_){var L=Math.sin(_);return _=Math.cos(_),g[0]=_,g[1]=0,g[2]=-L,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=L,g[9]=0,g[10]=_,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},o.fromZRotation=function(g,_){var L=Math.sin(_);return _=Math.cos(_),g[0]=_,g[1]=L,g[2]=0,g[3]=0,g[4]=-L,g[5]=_,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},o.fromRotationTranslation=h,o.fromQuat2=function(g,_){var L=new x.ARRAY_TYPE(3),F=-_[0],M=-_[1],E=-_[2],P=_[3],O=_[4],B=_[5],X=_[6],W=_[7],U=F*F+M*M+E*E+P*P;return 0<U?(L[0]=2*(O*P+W*F+B*E-X*M)/U,L[1]=2*(B*P+W*M+X*F-O*E)/U,L[2]=2*(X*P+W*E+O*M-B*F)/U):(L[0]=2*(O*P+W*F+B*E-X*M),L[1]=2*(B*P+W*M+X*F-O*E),L[2]=2*(X*P+W*E+O*M-B*F)),h(g,_,L),g},o.getTranslation=function(g,_){return g[0]=_[12],g[1]=_[13],g[2]=_[14],g},o.getScaling=function(g,_){var L=_[0],F=_[1],M=_[2],E=_[4],P=_[5],O=_[6],B=_[8],X=_[9];return _=_[10],g[0]=Math.sqrt(L*L+F*F+M*M),g[1]=Math.sqrt(E*E+P*P+O*O),g[2]=Math.sqrt(B*B+X*X+_*_),g},o.getRotation=function(g,_){var L=_[0]+_[5]+_[10];return 0<L?(L=2*Math.sqrt(L+1),g[3]=.25*L,g[0]=(_[6]-_[9])/L,g[1]=(_[8]-_[2])/L,g[2]=(_[1]-_[4])/L):_[0]>_[5]&&_[0]>_[10]?(L=2*Math.sqrt(1+_[0]-_[5]-_[10]),g[3]=(_[6]-_[9])/L,g[0]=.25*L,g[1]=(_[1]+_[4])/L,g[2]=(_[8]+_[2])/L):_[5]>_[10]?(L=2*Math.sqrt(1+_[5]-_[0]-_[10]),g[3]=(_[8]-_[2])/L,g[0]=(_[1]+_[4])/L,g[1]=.25*L,g[2]=(_[6]+_[9])/L):(L=2*Math.sqrt(1+_[10]-_[0]-_[5]),g[3]=(_[1]-_[4])/L,g[0]=(_[8]+_[2])/L,g[1]=(_[6]+_[9])/L,g[2]=.25*L),g},o.fromRotationTranslationScale=function(g,_,L,F){var M=_[0],E=_[1],P=_[2],O=_[3],B=M+M,X=E+E,W=P+P;_=M*B;var U=M*X;M*=W;var q=E*X;E*=W,P*=W,B*=O,X*=O,O*=W,W=F[0];var he=F[1];return F=F[2],g[0]=(1-(q+P))*W,g[1]=(U+O)*W,g[2]=(M-X)*W,g[3]=0,g[4]=(U-O)*he,g[5]=(1-(_+P))*he,g[6]=(E+B)*he,g[7]=0,g[8]=(M+X)*F,g[9]=(E-B)*F,g[10]=(1-(_+q))*F,g[11]=0,g[12]=L[0],g[13]=L[1],g[14]=L[2],g[15]=1,g},o.fromRotationTranslationScaleOrigin=function(g,_,L,F,M){var E=_[0],P=_[1],O=_[2],B=_[3],X=E+E,W=P+P,U=O+O;_=E*X;var q=E*W,he=E*U;E=P*W,P*=U;var ge=O*U;O=B*X,W*=B;var _e=B*U,Se=F[0],$e=F[1];U=F[2],F=M[0],B=M[1],M=M[2],X=(1-(E+ge))*Se;var Be=(q+_e)*Se;return Se*=he-W,q=(q-_e)*$e,ge=(1-(_+ge))*$e,$e*=P+O,he=(he+W)*U,P=(P-O)*U,_=(1-(_+E))*U,g[0]=X,g[1]=Be,g[2]=Se,g[3]=0,g[4]=q,g[5]=ge,g[6]=$e,g[7]=0,g[8]=he,g[9]=P,g[10]=_,g[11]=0,g[12]=L[0]+F-(X*F+q*B+he*M),g[13]=L[1]+B-(Be*F+ge*B+P*M),g[14]=L[2]+M-(Se*F+$e*B+_*M),g[15]=1,g},o.fromQuat=function(g,_){var L=_[0],F=_[1],M=_[2];_=_[3];var E=L+L,P=F+F,O=M+M;L*=E;var B=F*E;F*=P;var X=M*E,W=M*P;return M*=O,E*=_,P*=_,_*=O,g[0]=1-F-M,g[1]=B+_,g[2]=X-P,g[3]=0,g[4]=B-_,g[5]=1-L-M,g[6]=W+E,g[7]=0,g[8]=X+P,g[9]=W-E,g[10]=1-L-F,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},o.frustum=function(g,_,L,F,M,E,P){var O=1/(L-_),B=1/(M-F),X=1/(E-P);return g[0]=2*E*O,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*E*B,g[6]=0,g[7]=0,g[8]=(L+_)*O,g[9]=(M+F)*B,g[10]=(P+E)*X,g[11]=-1,g[12]=0,g[13]=0,g[14]=P*E*2*X,g[15]=0,g},o.perspective=function(g,_,L,F,M){return _=1/Math.tan(_/2),g[0]=_/L,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=_,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=-1,g[12]=0,g[13]=0,g[15]=0,M!=null&&M!==Infinity?(L=1/(F-M),g[10]=(M+F)*L,g[14]=2*M*F*L):(g[10]=-1,g[14]=-2*F),g},o.perspectiveFromFieldOfView=function(g,_,L,F){var M=Math.tan(_.upDegrees*Math.PI/180),E=Math.tan(_.downDegrees*Math.PI/180),P=Math.tan(_.leftDegrees*Math.PI/180);_=Math.tan(_.rightDegrees*Math.PI/180);var O=2/(P+_),B=2/(M+E);return g[0]=O,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=B,g[6]=0,g[7]=0,g[8]=-((P-_)*O*.5),g[9]=(M-E)*B*.5,g[10]=F/(L-F),g[11]=-1,g[12]=0,g[13]=0,g[14]=F*L/(L-F),g[15]=0,g},o.ortho=function(g,_,L,F,M,E,P){var O=1/(_-L),B=1/(F-M),X=1/(E-P);return g[0]=-2*O,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*B,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*X,g[11]=0,g[12]=(_+L)*O,g[13]=(M+F)*B,g[14]=(P+E)*X,g[15]=1,g},o.lookAt=function(g,_,L,F){var M=_[0],E=_[1];_=_[2];var P=F[0],O=F[1],B=F[2],X=L[0];F=L[1];var W=L[2];if(Math.abs(M-X)<x.EPSILON&&Math.abs(E-F)<x.EPSILON&&Math.abs(_-W)<x.EPSILON)return c(g);L=M-X,F=E-F,X=_-W;var U=1/Math.sqrt(L*L+F*F+X*X);L*=U,F*=U,X*=U,W=O*X-B*F,B=B*L-P*X,P=P*F-O*L,(U=Math.sqrt(W*W+B*B+P*P))?(U=1/U,W*=U,B*=U,P*=U):P=B=W=0,O=F*P-X*B;var q=X*W-L*P,he=L*B-F*W;return(U=Math.sqrt(O*O+q*q+he*he))?(U=1/U,O*=U,q*=U,he*=U):he=q=O=0,g[0]=W,g[1]=O,g[2]=L,g[3]=0,g[4]=B,g[5]=q,g[6]=F,g[7]=0,g[8]=P,g[9]=he,g[10]=X,g[11]=0,g[12]=-(W*M+B*E+P*_),g[13]=-(O*M+q*E+he*_),g[14]=-(L*M+F*E+X*_),g[15]=1,g},o.targetTo=function(g,_,L,F){var M=_[0],E=_[1];_=_[2];var P=F[0],O=F[1],B=F[2];F=M-L[0];var X=E-L[1];L=_-L[2];var W=F*F+X*X+L*L;0<W&&(W=1/Math.sqrt(W),F*=W,X*=W,L*=W);var U=O*L-B*X;return B=B*F-P*L,P=P*X-O*F,W=U*U+B*B+P*P,0<W&&(W=1/Math.sqrt(W),U*=W,B*=W,P*=W),g[0]=U,g[1]=B,g[2]=P,g[3]=0,g[4]=X*P-L*B,g[5]=L*U-F*P,g[6]=F*B-X*U,g[7]=0,g[8]=F,g[9]=X,g[10]=L,g[11]=0,g[12]=M,g[13]=E,g[14]=_,g[15]=1,g},o.str=function(g){return"mat4("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+", "+g[4]+", "+g[5]+", "+g[6]+", "+g[7]+", "+g[8]+", "+g[9]+", "+g[10]+", "+g[11]+", "+g[12]+", "+g[13]+", "+g[14]+", "+g[15]+")"},o.frob=function(g){return Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)+Math.pow(g[2],2)+Math.pow(g[3],2)+Math.pow(g[4],2)+Math.pow(g[5],2)+Math.pow(g[6],2)+Math.pow(g[7],2)+Math.pow(g[8],2)+Math.pow(g[9],2)+Math.pow(g[10],2)+Math.pow(g[11],2)+Math.pow(g[12],2)+Math.pow(g[13],2)+Math.pow(g[14],2)+Math.pow(g[15],2))},o.add=function(g,_,L){return g[0]=_[0]+L[0],g[1]=_[1]+L[1],g[2]=_[2]+L[2],g[3]=_[3]+L[3],g[4]=_[4]+L[4],g[5]=_[5]+L[5],g[6]=_[6]+L[6],g[7]=_[7]+L[7],g[8]=_[8]+L[8],g[9]=_[9]+L[9],g[10]=_[10]+L[10],g[11]=_[11]+L[11],g[12]=_[12]+L[12],g[13]=_[13]+L[13],g[14]=_[14]+L[14],g[15]=_[15]+L[15],g},o.subtract=f,o.multiplyScalar=function(g,_,L){return g[0]=_[0]*L,g[1]=_[1]*L,g[2]=_[2]*L,g[3]=_[3]*L,g[4]=_[4]*L,g[5]=_[5]*L,g[6]=_[6]*L,g[7]=_[7]*L,g[8]=_[8]*L,g[9]=_[9]*L,g[10]=_[10]*L,g[11]=_[11]*L,g[12]=_[12]*L,g[13]=_[13]*L,g[14]=_[14]*L,g[15]=_[15]*L,g},o.multiplyScalarAndAdd=function(g,_,L,F){return g[0]=_[0]+L[0]*F,g[1]=_[1]+L[1]*F,g[2]=_[2]+L[2]*F,g[3]=_[3]+L[3]*F,g[4]=_[4]+L[4]*F,g[5]=_[5]+L[5]*F,g[6]=_[6]+L[6]*F,g[7]=_[7]+L[7]*F,g[8]=_[8]+L[8]*F,g[9]=_[9]+L[9]*F,g[10]=_[10]+L[10]*F,g[11]=_[11]+L[11]*F,g[12]=_[12]+L[12]*F,g[13]=_[13]+L[13]*F,g[14]=_[14]+L[14]*F,g[15]=_[15]+L[15]*F,g},o.exactEquals=function(g,_){return g[0]===_[0]&&g[1]===_[1]&&g[2]===_[2]&&g[3]===_[3]&&g[4]===_[4]&&g[5]===_[5]&&g[6]===_[6]&&g[7]===_[7]&&g[8]===_[8]&&g[9]===_[9]&&g[10]===_[10]&&g[11]===_[11]&&g[12]===_[12]&&g[13]===_[13]&&g[14]===_[14]&&g[15]===_[15]},o.equals=function(g,_){var L=g[0],F=g[1],M=g[2],E=g[3],P=g[4],O=g[5],B=g[6],X=g[7],W=g[8],U=g[9],q=g[10],he=g[11],ge=g[12],_e=g[13],Se=g[14];g=g[15];var $e=_[0],Be=_[1],lt=_[2],kt=_[3],cr=_[4],Ur=_[5],Ar=_[6],zr=_[7],Gt=_[8],Vt=_[9],Pn=_[10],Mn=_[11],Rn=_[12],gi=_[13],os=_[14];return _=_[15],Math.abs(L-$e)<=x.EPSILON*Math.max(1,Math.abs(L),Math.abs($e))&&Math.abs(F-Be)<=x.EPSILON*Math.max(1,Math.abs(F),Math.abs(Be))&&Math.abs(M-lt)<=x.EPSILON*Math.max(1,Math.abs(M),Math.abs(lt))&&Math.abs(E-kt)<=x.EPSILON*Math.max(1,Math.abs(E),Math.abs(kt))&&Math.abs(P-cr)<=x.EPSILON*Math.max(1,Math.abs(P),Math.abs(cr))&&Math.abs(O-Ur)<=x.EPSILON*Math.max(1,Math.abs(O),Math.abs(Ur))&&Math.abs(B-Ar)<=x.EPSILON*Math.max(1,Math.abs(B),Math.abs(Ar))&&Math.abs(X-zr)<=x.EPSILON*Math.max(1,Math.abs(X),Math.abs(zr))&&Math.abs(W-Gt)<=x.EPSILON*Math.max(1,Math.abs(W),Math.abs(Gt))&&Math.abs(U-Vt)<=x.EPSILON*Math.max(1,Math.abs(U),Math.abs(Vt))&&Math.abs(q-Pn)<=x.EPSILON*Math.max(1,Math.abs(q),Math.abs(Pn))&&Math.abs(he-Mn)<=x.EPSILON*Math.max(1,Math.abs(he),Math.abs(Mn))&&Math.abs(ge-Rn)<=x.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Rn))&&Math.abs(_e-gi)<=x.EPSILON*Math.max(1,Math.abs(_e),Math.abs(gi))&&Math.abs(Se-os)<=x.EPSILON*Math.max(1,Math.abs(Se),Math.abs(os))&&Math.abs(g-_)<=x.EPSILON*Math.max(1,Math.abs(g),Math.abs(_))},o.sub=o.mul=void 0;var x=function(g){if(g&&g.__esModule)return g;var _={};if(g!=null){for(var L in g)if(Object.prototype.hasOwnProperty.call(g,L)){var F=Jo&&La?La(g,L):{};F.get||F.set?Jo(_,L,F):_[L]=g[L]}}return _.default=g,_}(lu);o.mul=s,o.sub=f});At(Bh);var wd=Ye(function(m,o){function c(){var O=new P.ARRAY_TYPE(3);return P.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0,O[2]=0),O}function s(O){var B=O[0],X=O[1];return O=O[2],Math.sqrt(B*B+X*X+O*O)}function h(O,B,X){var W=new P.ARRAY_TYPE(3);return W[0]=O,W[1]=B,W[2]=X,W}function f(O,B,X){return O[0]=B[0]-X[0],O[1]=B[1]-X[1],O[2]=B[2]-X[2],O}function x(O,B,X){return O[0]=B[0]*X[0],O[1]=B[1]*X[1],O[2]=B[2]*X[2],O}function g(O,B,X){return O[0]=B[0]/X[0],O[1]=B[1]/X[1],O[2]=B[2]/X[2],O}function _(O,B){var X=B[0]-O[0],W=B[1]-O[1];return O=B[2]-O[2],Math.sqrt(X*X+W*W+O*O)}function L(O,B){var X=B[0]-O[0],W=B[1]-O[1];return O=B[2]-O[2],X*X+W*W+O*O}function F(O){var B=O[0],X=O[1];return O=O[2],B*B+X*X+O*O}function M(O,B){var X=B[0],W=B[1],U=B[2];return X=X*X+W*W+U*U,0<X&&(X=1/Math.sqrt(X)),O[0]=B[0]*X,O[1]=B[1]*X,O[2]=B[2]*X,O}function E(O,B){return O[0]*B[0]+O[1]*B[1]+O[2]*B[2]}Object.defineProperty(o,"__esModule",{value:!0}),o.create=c,o.clone=function(O){var B=new P.ARRAY_TYPE(3);return B[0]=O[0],B[1]=O[1],B[2]=O[2],B},o.length=s,o.fromValues=h,o.copy=function(O,B){return O[0]=B[0],O[1]=B[1],O[2]=B[2],O},o.set=function(O,B,X,W){return O[0]=B,O[1]=X,O[2]=W,O},o.add=function(O,B,X){return O[0]=B[0]+X[0],O[1]=B[1]+X[1],O[2]=B[2]+X[2],O},o.subtract=f,o.multiply=x,o.divide=g,o.ceil=function(O,B){return O[0]=Math.ceil(B[0]),O[1]=Math.ceil(B[1]),O[2]=Math.ceil(B[2]),O},o.floor=function(O,B){return O[0]=Math.floor(B[0]),O[1]=Math.floor(B[1]),O[2]=Math.floor(B[2]),O},o.min=function(O,B,X){return O[0]=Math.min(B[0],X[0]),O[1]=Math.min(B[1],X[1]),O[2]=Math.min(B[2],X[2]),O},o.max=function(O,B,X){return O[0]=Math.max(B[0],X[0]),O[1]=Math.max(B[1],X[1]),O[2]=Math.max(B[2],X[2]),O},o.round=function(O,B){return O[0]=Math.round(B[0]),O[1]=Math.round(B[1]),O[2]=Math.round(B[2]),O},o.scale=function(O,B,X){return O[0]=B[0]*X,O[1]=B[1]*X,O[2]=B[2]*X,O},o.scaleAndAdd=function(O,B,X,W){return O[0]=B[0]+X[0]*W,O[1]=B[1]+X[1]*W,O[2]=B[2]+X[2]*W,O},o.distance=_,o.squaredDistance=L,o.squaredLength=F,o.negate=function(O,B){return O[0]=-B[0],O[1]=-B[1],O[2]=-B[2],O},o.inverse=function(O,B){return O[0]=1/B[0],O[1]=1/B[1],O[2]=1/B[2],O},o.normalize=M,o.dot=E,o.cross=function(O,B,X){var W=B[0],U=B[1];B=B[2];var q=X[0],he=X[1];return X=X[2],O[0]=U*X-B*he,O[1]=B*q-W*X,O[2]=W*he-U*q,O},o.lerp=function(O,B,X,W){var U=B[0],q=B[1];return B=B[2],O[0]=U+W*(X[0]-U),O[1]=q+W*(X[1]-q),O[2]=B+W*(X[2]-B),O},o.hermite=function(O,B,X,W,U,q){var he=q*q,ge=he*(2*q-3)+1,_e=he*(q-2)+q,Se=he*(q-1);return q=he*(3-2*q),O[0]=B[0]*ge+X[0]*_e+W[0]*Se+U[0]*q,O[1]=B[1]*ge+X[1]*_e+W[1]*Se+U[1]*q,O[2]=B[2]*ge+X[2]*_e+W[2]*Se+U[2]*q,O},o.bezier=function(O,B,X,W,U,q){var he=1-q,ge=he*he,_e=q*q,Se=ge*he;return ge*=3*q,he*=3*_e,q*=_e,O[0]=B[0]*Se+X[0]*ge+W[0]*he+U[0]*q,O[1]=B[1]*Se+X[1]*ge+W[1]*he+U[1]*q,O[2]=B[2]*Se+X[2]*ge+W[2]*he+U[2]*q,O},o.random=function(O,B){B=B||1;var X=2*P.RANDOM()*Math.PI,W=2*P.RANDOM()-1,U=Math.sqrt(1-W*W)*B;return O[0]=Math.cos(X)*U,O[1]=Math.sin(X)*U,O[2]=W*B,O},o.transformMat4=function(O,B,X){var W=B[0],U=B[1];B=B[2];var q=X[3]*W+X[7]*U+X[11]*B+X[15];return q=q||1,O[0]=(X[0]*W+X[4]*U+X[8]*B+X[12])/q,O[1]=(X[1]*W+X[5]*U+X[9]*B+X[13])/q,O[2]=(X[2]*W+X[6]*U+X[10]*B+X[14])/q,O},o.transformMat3=function(O,B,X){var W=B[0],U=B[1];return B=B[2],O[0]=W*X[0]+U*X[3]+B*X[6],O[1]=W*X[1]+U*X[4]+B*X[7],O[2]=W*X[2]+U*X[5]+B*X[8],O},o.transformQuat=function(O,B,X){var W=X[0],U=X[1],q=X[2],he=B[0],ge=B[1];B=B[2];var _e=U*B-q*ge,Se=q*he-W*B,$e=W*ge-U*he;return X=2*X[3],O[0]=he+_e*X+2*(U*$e-q*Se),O[1]=ge+Se*X+2*(q*_e-W*$e),O[2]=B+$e*X+2*(W*Se-U*_e),O},o.rotateX=function(O,B,X,W){var U=[],q=[];return U[0]=B[0]-X[0],U[1]=B[1]-X[1],U[2]=B[2]-X[2],q[0]=U[0],q[1]=U[1]*Math.cos(W)-U[2]*Math.sin(W),q[2]=U[1]*Math.sin(W)+U[2]*Math.cos(W),O[0]=q[0]+X[0],O[1]=q[1]+X[1],O[2]=q[2]+X[2],O},o.rotateY=function(O,B,X,W){var U=[],q=[];return U[0]=B[0]-X[0],U[1]=B[1]-X[1],U[2]=B[2]-X[2],q[0]=U[2]*Math.sin(W)+U[0]*Math.cos(W),q[1]=U[1],q[2]=U[2]*Math.cos(W)-U[0]*Math.sin(W),O[0]=q[0]+X[0],O[1]=q[1]+X[1],O[2]=q[2]+X[2],O},o.rotateZ=function(O,B,X,W){var U=[],q=[];return U[0]=B[0]-X[0],U[1]=B[1]-X[1],U[2]=B[2]-X[2],q[0]=U[0]*Math.cos(W)-U[1]*Math.sin(W),q[1]=U[0]*Math.sin(W)+U[1]*Math.cos(W),q[2]=U[2],O[0]=q[0]+X[0],O[1]=q[1]+X[1],O[2]=q[2]+X[2],O},o.angle=function(O,B){return O=h(O[0],O[1],O[2]),B=h(B[0],B[1],B[2]),M(O,O),M(B,B),B=E(O,B),1<B?0:-1>B?Math.PI:Math.acos(B)},o.zero=function(O){return O[0]=0,O[1]=0,O[2]=0,O},o.str=function(O){return"vec3("+O[0]+", "+O[1]+", "+O[2]+")"},o.exactEquals=function(O,B){return O[0]===B[0]&&O[1]===B[1]&&O[2]===B[2]},o.equals=function(O,B){var X=O[0],W=O[1];O=O[2];var U=B[0],q=B[1];return B=B[2],Math.abs(X-U)<=P.EPSILON*Math.max(1,Math.abs(X),Math.abs(U))&&Math.abs(W-q)<=P.EPSILON*Math.max(1,Math.abs(W),Math.abs(q))&&Math.abs(O-B)<=P.EPSILON*Math.max(1,Math.abs(O),Math.abs(B))},o.forEach=o.sqrLen=o.len=o.sqrDist=o.dist=o.div=o.mul=o.sub=void 0;var P=function(O){if(O&&O.__esModule)return O;var B={};if(O!=null){for(var X in O)if(Object.prototype.hasOwnProperty.call(O,X)){var W=Jo&&La?La(O,X):{};W.get||W.set?Jo(B,X,W):B[X]=O[X]}}return B.default=O,B}(lu);o.sub=f,o.mul=x,o.div=g,o.dist=_,o.sqrDist=L,o.len=s,o.sqrLen=F,m=function(){var O=c();return function(B,X,W,U,q,he){for(X||(X=3),W||(W=0),U=U?Math.min(U*X+W,B.length):B.length;W<U;W+=X)O[0]=B[W],O[1]=B[W+1],O[2]=B[W+2],q(O,O,he),B[W]=O[0],B[W+1]=O[1],B[W+2]=O[2];return B}}(),o.forEach=m});At(wd);var _d=Ye(function(m,o){function c(){var M=new F.ARRAY_TYPE(4);return F.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[3]=0),M}function s(M,E,P){return M[0]=E[0]-P[0],M[1]=E[1]-P[1],M[2]=E[2]-P[2],M[3]=E[3]-P[3],M}function h(M,E,P){return M[0]=E[0]*P[0],M[1]=E[1]*P[1],M[2]=E[2]*P[2],M[3]=E[3]*P[3],M}function f(M,E,P){return M[0]=E[0]/P[0],M[1]=E[1]/P[1],M[2]=E[2]/P[2],M[3]=E[3]/P[3],M}function x(M,E){var P=E[0]-M[0],O=E[1]-M[1],B=E[2]-M[2];return M=E[3]-M[3],Math.sqrt(P*P+O*O+B*B+M*M)}function g(M,E){var P=E[0]-M[0],O=E[1]-M[1],B=E[2]-M[2];return M=E[3]-M[3],P*P+O*O+B*B+M*M}function _(M){var E=M[0],P=M[1],O=M[2];return M=M[3],Math.sqrt(E*E+P*P+O*O+M*M)}function L(M){var E=M[0],P=M[1],O=M[2];return M=M[3],E*E+P*P+O*O+M*M}Object.defineProperty(o,"__esModule",{value:!0}),o.create=c,o.clone=function(M){var E=new F.ARRAY_TYPE(4);return E[0]=M[0],E[1]=M[1],E[2]=M[2],E[3]=M[3],E},o.fromValues=function(M,E,P,O){var B=new F.ARRAY_TYPE(4);return B[0]=M,B[1]=E,B[2]=P,B[3]=O,B},o.copy=function(M,E){return M[0]=E[0],M[1]=E[1],M[2]=E[2],M[3]=E[3],M},o.set=function(M,E,P,O,B){return M[0]=E,M[1]=P,M[2]=O,M[3]=B,M},o.add=function(M,E,P){return M[0]=E[0]+P[0],M[1]=E[1]+P[1],M[2]=E[2]+P[2],M[3]=E[3]+P[3],M},o.subtract=s,o.multiply=h,o.divide=f,o.ceil=function(M,E){return M[0]=Math.ceil(E[0]),M[1]=Math.ceil(E[1]),M[2]=Math.ceil(E[2]),M[3]=Math.ceil(E[3]),M},o.floor=function(M,E){return M[0]=Math.floor(E[0]),M[1]=Math.floor(E[1]),M[2]=Math.floor(E[2]),M[3]=Math.floor(E[3]),M},o.min=function(M,E,P){return M[0]=Math.min(E[0],P[0]),M[1]=Math.min(E[1],P[1]),M[2]=Math.min(E[2],P[2]),M[3]=Math.min(E[3],P[3]),M},o.max=function(M,E,P){return M[0]=Math.max(E[0],P[0]),M[1]=Math.max(E[1],P[1]),M[2]=Math.max(E[2],P[2]),M[3]=Math.max(E[3],P[3]),M},o.round=function(M,E){return M[0]=Math.round(E[0]),M[1]=Math.round(E[1]),M[2]=Math.round(E[2]),M[3]=Math.round(E[3]),M},o.scale=function(M,E,P){return M[0]=E[0]*P,M[1]=E[1]*P,M[2]=E[2]*P,M[3]=E[3]*P,M},o.scaleAndAdd=function(M,E,P,O){return M[0]=E[0]+P[0]*O,M[1]=E[1]+P[1]*O,M[2]=E[2]+P[2]*O,M[3]=E[3]+P[3]*O,M},o.distance=x,o.squaredDistance=g,o.length=_,o.squaredLength=L,o.negate=function(M,E){return M[0]=-E[0],M[1]=-E[1],M[2]=-E[2],M[3]=-E[3],M},o.inverse=function(M,E){return M[0]=1/E[0],M[1]=1/E[1],M[2]=1/E[2],M[3]=1/E[3],M},o.normalize=function(M,E){var P=E[0],O=E[1],B=E[2];E=E[3];var X=P*P+O*O+B*B+E*E;return 0<X&&(X=1/Math.sqrt(X)),M[0]=P*X,M[1]=O*X,M[2]=B*X,M[3]=E*X,M},o.dot=function(M,E){return M[0]*E[0]+M[1]*E[1]+M[2]*E[2]+M[3]*E[3]},o.cross=function(M,E,P,O){var B=P[0]*O[1]-P[1]*O[0],X=P[0]*O[2]-P[2]*O[0],W=P[0]*O[3]-P[3]*O[0],U=P[1]*O[2]-P[2]*O[1],q=P[1]*O[3]-P[3]*O[1];P=P[2]*O[3]-P[3]*O[2],O=E[0];var he=E[1],ge=E[2];return E=E[3],M[0]=he*P-ge*q+E*U,M[1]=-(O*P)+ge*W-E*X,M[2]=O*q-he*W+E*B,M[3]=-(O*U)+he*X-ge*B,M},o.lerp=function(M,E,P,O){var B=E[0],X=E[1],W=E[2];return E=E[3],M[0]=B+O*(P[0]-B),M[1]=X+O*(P[1]-X),M[2]=W+O*(P[2]-W),M[3]=E+O*(P[3]-E),M},o.random=function(M,E){E=E||1;do var P=2*F.RANDOM()-1,O=2*F.RANDOM()-1,B=P*P+O*O;while(1<=B);do var X=2*F.RANDOM()-1,W=2*F.RANDOM()-1,U=X*X+W*W;while(1<=U);return B=Math.sqrt((1-B)/U),M[0]=E*P,M[1]=E*O,M[2]=E*X*B,M[3]=E*W*B,M},o.transformMat4=function(M,E,P){var O=E[0],B=E[1],X=E[2];return E=E[3],M[0]=P[0]*O+P[4]*B+P[8]*X+P[12]*E,M[1]=P[1]*O+P[5]*B+P[9]*X+P[13]*E,M[2]=P[2]*O+P[6]*B+P[10]*X+P[14]*E,M[3]=P[3]*O+P[7]*B+P[11]*X+P[15]*E,M},o.transformQuat=function(M,E,P){var O=E[0],B=E[1],X=E[2],W=P[0],U=P[1],q=P[2];P=P[3];var he=P*O+U*X-q*B,ge=P*B+q*O-W*X,_e=P*X+W*B-U*O;return O=-W*O-U*B-q*X,M[0]=he*P+O*-W+ge*-q-_e*-U,M[1]=ge*P+O*-U+_e*-W-he*-q,M[2]=_e*P+O*-q+he*-U-ge*-W,M[3]=E[3],M},o.zero=function(M){return M[0]=0,M[1]=0,M[2]=0,M[3]=0,M},o.str=function(M){return"vec4("+M[0]+", "+M[1]+", "+M[2]+", "+M[3]+")"},o.exactEquals=function(M,E){return M[0]===E[0]&&M[1]===E[1]&&M[2]===E[2]&&M[3]===E[3]},o.equals=function(M,E){var P=M[0],O=M[1],B=M[2];M=M[3];var X=E[0],W=E[1],U=E[2];return E=E[3],Math.abs(P-X)<=F.EPSILON*Math.max(1,Math.abs(P),Math.abs(X))&&Math.abs(O-W)<=F.EPSILON*Math.max(1,Math.abs(O),Math.abs(W))&&Math.abs(B-U)<=F.EPSILON*Math.max(1,Math.abs(B),Math.abs(U))&&Math.abs(M-E)<=F.EPSILON*Math.max(1,Math.abs(M),Math.abs(E))},o.forEach=o.sqrLen=o.len=o.sqrDist=o.dist=o.div=o.mul=o.sub=void 0;var F=function(M){if(M&&M.__esModule)return M;var E={};if(M!=null){for(var P in M)if(Object.prototype.hasOwnProperty.call(M,P)){var O=Jo&&La?La(M,P):{};O.get||O.set?Jo(E,P,O):E[P]=M[P]}}return E.default=M,E}(lu);o.sub=s,o.mul=h,o.div=f,o.dist=x,o.sqrDist=g,o.len=_,o.sqrLen=L,m=function(){var M=c();return function(E,P,O,B,X,W){for(P||(P=4),O||(O=0),B=B?Math.min(B*P+O,E.length):E.length;O<B;O+=P)M[0]=E[O],M[1]=E[O+1],M[2]=E[O+2],M[3]=E[O+3],X(M,M,W),E[O]=M[0],E[O+1]=M[1],E[O+2]=M[2],E[O+3]=M[3];return E}}(),o.forEach=m});At(_d);var bc=Ye(function(m,o){function c(P){if(P&&P.__esModule)return P;var O={};if(P!=null){for(var B in P)if(Object.prototype.hasOwnProperty.call(P,B)){var X=Jo&&La?La(P,B):{};X.get||X.set?Jo(O,B,X):O[B]=P[B]}}return O.default=P,O}function s(){var P=new _.ARRAY_TYPE(4);return _.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0),P[3]=1,P}function h(P,O,B){B*=.5;var X=Math.sin(B);return P[0]=X*O[0],P[1]=X*O[1],P[2]=X*O[2],P[3]=Math.cos(B),P}function f(P,O,B){var X=O[0],W=O[1],U=O[2];O=O[3];var q=B[0],he=B[1],ge=B[2];return B=B[3],P[0]=X*B+O*q+W*ge-U*he,P[1]=W*B+O*he+U*q-X*ge,P[2]=U*B+O*ge+X*he-W*q,P[3]=O*B-X*q-W*he-U*ge,P}function x(P,O,B,X){var W=O[0],U=O[1],q=O[2];O=O[3];var he=B[0],ge=B[1],_e=B[2];B=B[3];var Se=W*he+U*ge+q*_e+O*B;if(0>Se&&(Se=-Se,he=-he,ge=-ge,_e=-_e,B=-B),1-Se>_.EPSILON){var $e=Math.acos(Se),Be=Math.sin($e);Se=Math.sin((1-X)*$e)/Be,X=Math.sin(X*$e)/Be}else Se=1-X;return P[0]=Se*W+X*he,P[1]=Se*U+X*ge,P[2]=Se*q+X*_e,P[3]=Se*O+X*B,P}function g(P,O){var B=O[0]+O[4]+O[8];if(0<B)B=Math.sqrt(B+1),P[3]=.5*B,B=.5/B,P[0]=(O[5]-O[7])*B,P[1]=(O[6]-O[2])*B,P[2]=(O[1]-O[3])*B;else{var X=0;O[4]>O[0]&&(X=1),O[8]>O[3*X+X]&&(X=2);var W=(X+1)%3,U=(X+2)%3;B=Math.sqrt(O[3*X+X]-O[3*W+W]-O[3*U+U]+1),P[X]=.5*B,B=.5/B,P[3]=(O[3*W+U]-O[3*U+W])*B,P[W]=(O[3*W+X]+O[3*X+W])*B,P[U]=(O[3*U+X]+O[3*X+U])*B}return P}Object.defineProperty(o,"__esModule",{value:!0}),o.create=s,o.identity=function(P){return P[0]=0,P[1]=0,P[2]=0,P[3]=1,P},o.setAxisAngle=h,o.getAxisAngle=function(P,O){var B=2*Math.acos(O[3]),X=Math.sin(B/2);return X>_.EPSILON?(P[0]=O[0]/X,P[1]=O[1]/X,P[2]=O[2]/X):(P[0]=1,P[1]=0,P[2]=0),B},o.multiply=f,o.rotateX=function(P,O,B){B*=.5;var X=O[0],W=O[1],U=O[2];O=O[3];var q=Math.sin(B);return B=Math.cos(B),P[0]=X*B+O*q,P[1]=W*B+U*q,P[2]=U*B-W*q,P[3]=O*B-X*q,P},o.rotateY=function(P,O,B){B*=.5;var X=O[0],W=O[1],U=O[2];O=O[3];var q=Math.sin(B);return B=Math.cos(B),P[0]=X*B-U*q,P[1]=W*B+O*q,P[2]=U*B+X*q,P[3]=O*B-W*q,P},o.rotateZ=function(P,O,B){B*=.5;var X=O[0],W=O[1],U=O[2];O=O[3];var q=Math.sin(B);return B=Math.cos(B),P[0]=X*B+W*q,P[1]=W*B-X*q,P[2]=U*B+O*q,P[3]=O*B-U*q,P},o.calculateW=function(P,O){var B=O[0],X=O[1];return O=O[2],P[0]=B,P[1]=X,P[2]=O,P[3]=Math.sqrt(Math.abs(1-B*B-X*X-O*O)),P},o.slerp=x,o.random=function(P){var O=_.RANDOM(),B=_.RANDOM(),X=_.RANDOM(),W=Math.sqrt(1-O);return O=Math.sqrt(O),P[0]=W*Math.sin(2*Math.PI*B),P[1]=W*Math.cos(2*Math.PI*B),P[2]=O*Math.sin(2*Math.PI*X),P[3]=O*Math.cos(2*Math.PI*X),P},o.invert=function(P,O){var B=O[0],X=O[1],W=O[2];O=O[3];var U=B*B+X*X+W*W+O*O;return U=U?1/U:0,P[0]=-B*U,P[1]=-X*U,P[2]=-W*U,P[3]=O*U,P},o.conjugate=function(P,O){return P[0]=-O[0],P[1]=-O[1],P[2]=-O[2],P[3]=O[3],P},o.fromMat3=g,o.fromEuler=function(P,O,B,X){var W=.5*Math.PI/180;O*=W,B*=W,X*=W,W=Math.sin(O),O=Math.cos(O);var U=Math.sin(B);B=Math.cos(B);var q=Math.sin(X);return X=Math.cos(X),P[0]=W*B*X-O*U*q,P[1]=O*U*X+W*B*q,P[2]=O*B*q-W*U*X,P[3]=O*B*X+W*U*q,P},o.str=function(P){return"quat("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+")"},o.setAxes=o.sqlerp=o.rotationTo=o.equals=o.exactEquals=o.normalize=o.sqrLen=o.squaredLength=o.len=o.length=o.lerp=o.dot=o.scale=o.mul=o.add=o.set=o.copy=o.fromValues=o.clone=void 0;var _=c(lu),L=c(Nh),F=c(wd);m=c(_d),o.clone=m.clone,o.fromValues=m.fromValues,o.copy=m.copy,o.set=m.set,o.add=m.add,o.mul=f,o.scale=m.scale,o.dot=m.dot,o.lerp=m.lerp;var M=m.length;o.length=M,o.len=M,M=m.squaredLength,o.squaredLength=M,o.sqrLen=M;var E=m.normalize;o.normalize=E,o.exactEquals=m.exactEquals,o.equals=m.equals,m=function(){var P=F.create(),O=F.fromValues(1,0,0),B=F.fromValues(0,1,0);return function(X,W,U){var q=F.dot(W,U);return-.999999>q?(F.cross(P,O,W),1e-6>F.len(P)&&F.cross(P,B,W),F.normalize(P,P),h(X,P,Math.PI),X):.999999<q?(X[0]=0,X[1]=0,X[2]=0,X[3]=1,X):(F.cross(P,W,U),X[0]=P[0],X[1]=P[1],X[2]=P[2],X[3]=1+q,E(X,X))}}(),o.rotationTo=m,m=function(){var P=s(),O=s();return function(B,X,W,U,q,he){return x(P,X,q,he),x(O,W,U,he),x(B,P,O,2*he*(1-he)),B}}(),o.sqlerp=m,m=function(){var P=L.create();return function(O,B,X,W){return P[0]=X[0],P[3]=X[1],P[6]=X[2],P[1]=W[0],P[4]=W[1],P[7]=W[2],P[2]=-B[0],P[5]=-B[1],P[8]=-B[2],E(O,g(O,P))}}(),o.setAxes=m});At(bc);var kn=Ye(function(m,o){function c(M){if(M&&M.__esModule)return M;var E={};if(M!=null){for(var P in M)if(Object.prototype.hasOwnProperty.call(M,P)){var O=Jo&&La?La(M,P):{};O.get||O.set?Jo(E,P,O):E[P]=M[P]}}return E.default=M,E}function s(M,E,P){var O=.5*P[0],B=.5*P[1];P=.5*P[2];var X=E[0],W=E[1],U=E[2];return E=E[3],M[0]=X,M[1]=W,M[2]=U,M[3]=E,M[4]=O*E+B*U-P*W,M[5]=B*E+P*X-O*U,M[6]=P*E+O*W-B*X,M[7]=-O*X-B*W-P*U,M}function h(M,E){return M[0]=E[0],M[1]=E[1],M[2]=E[2],M[3]=E[3],M[4]=E[4],M[5]=E[5],M[6]=E[6],M[7]=E[7],M}function f(M,E,P){var O=E[0],B=E[1],X=E[2],W=E[3],U=P[4],q=P[5],he=P[6],ge=P[7],_e=E[4],Se=E[5],$e=E[6];E=E[7];var Be=P[0],lt=P[1],kt=P[2];return P=P[3],M[0]=O*P+W*Be+B*kt-X*lt,M[1]=B*P+W*lt+X*Be-O*kt,M[2]=X*P+W*kt+O*lt-B*Be,M[3]=W*P-O*Be-B*lt-X*kt,M[4]=O*ge+W*U+B*he-X*q+_e*P+E*Be+Se*kt-$e*lt,M[5]=B*ge+W*q+X*U-O*he+Se*P+E*lt+$e*Be-_e*kt,M[6]=X*ge+W*he+O*q-B*U+$e*P+E*kt+_e*lt-Se*Be,M[7]=W*ge-O*U-B*q-X*he+E*P-_e*Be-Se*lt-$e*kt,M}Object.defineProperty(o,"__esModule",{value:!0}),o.create=function(){var M=new x.ARRAY_TYPE(8);return x.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[4]=0,M[5]=0,M[6]=0,M[7]=0),M[3]=1,M},o.clone=function(M){var E=new x.ARRAY_TYPE(8);return E[0]=M[0],E[1]=M[1],E[2]=M[2],E[3]=M[3],E[4]=M[4],E[5]=M[5],E[6]=M[6],E[7]=M[7],E},o.fromValues=function(M,E,P,O,B,X,W,U){var q=new x.ARRAY_TYPE(8);return q[0]=M,q[1]=E,q[2]=P,q[3]=O,q[4]=B,q[5]=X,q[6]=W,q[7]=U,q},o.fromRotationTranslationValues=function(M,E,P,O,B,X,W){var U=new x.ARRAY_TYPE(8);return U[0]=M,U[1]=E,U[2]=P,U[3]=O,B*=.5,X*=.5,W*=.5,U[4]=B*O+X*P-W*E,U[5]=X*O+W*M-B*P,U[6]=W*O+B*E-X*M,U[7]=-B*M-X*E-W*P,U},o.fromRotationTranslation=s,o.fromTranslation=function(M,E){return M[0]=0,M[1]=0,M[2]=0,M[3]=1,M[4]=.5*E[0],M[5]=.5*E[1],M[6]=.5*E[2],M[7]=0,M},o.fromRotation=function(M,E){return M[0]=E[0],M[1]=E[1],M[2]=E[2],M[3]=E[3],M[4]=0,M[5]=0,M[6]=0,M[7]=0,M},o.fromMat4=function(M,E){var P=g.create();_.getRotation(P,E);var O=new x.ARRAY_TYPE(3);return _.getTranslation(O,E),s(M,P,O),M},o.copy=h,o.identity=function(M){return M[0]=0,M[1]=0,M[2]=0,M[3]=1,M[4]=0,M[5]=0,M[6]=0,M[7]=0,M},o.set=function(M,E,P,O,B,X,W,U,q){return M[0]=E,M[1]=P,M[2]=O,M[3]=B,M[4]=X,M[5]=W,M[6]=U,M[7]=q,M},o.getDual=function(M,E){return M[0]=E[4],M[1]=E[5],M[2]=E[6],M[3]=E[7],M},o.setDual=function(M,E){return M[4]=E[0],M[5]=E[1],M[6]=E[2],M[7]=E[3],M},o.getTranslation=function(M,E){var P=E[4],O=E[5],B=E[6],X=E[7],W=-E[0],U=-E[1],q=-E[2];return E=E[3],M[0]=2*(P*E+X*W+O*q-B*U),M[1]=2*(O*E+X*U+B*W-P*q),M[2]=2*(B*E+X*q+P*U-O*W),M},o.translate=function(M,E,P){var O=E[0],B=E[1],X=E[2],W=E[3],U=.5*P[0],q=.5*P[1];P=.5*P[2];var he=E[4],ge=E[5],_e=E[6];return E=E[7],M[0]=O,M[1]=B,M[2]=X,M[3]=W,M[4]=W*U+B*P-X*q+he,M[5]=W*q+X*U-O*P+ge,M[6]=W*P+O*q-B*U+_e,M[7]=-O*U-B*q-X*P+E,M},o.rotateX=function(M,E,P){var O=-E[0],B=-E[1],X=-E[2],W=E[3],U=E[4],q=E[5],he=E[6],ge=E[7],_e=U*W+ge*O+q*X-he*B,Se=q*W+ge*B+he*O-U*X,$e=he*W+ge*X+U*B-q*O;return U=ge*W-U*O-q*B-he*X,g.rotateX(M,E,P),O=M[0],B=M[1],X=M[2],W=M[3],M[4]=_e*W+U*O+Se*X-$e*B,M[5]=Se*W+U*B+$e*O-_e*X,M[6]=$e*W+U*X+_e*B-Se*O,M[7]=U*W-_e*O-Se*B-$e*X,M},o.rotateY=function(M,E,P){var O=-E[0],B=-E[1],X=-E[2],W=E[3],U=E[4],q=E[5],he=E[6],ge=E[7],_e=U*W+ge*O+q*X-he*B,Se=q*W+ge*B+he*O-U*X,$e=he*W+ge*X+U*B-q*O;return U=ge*W-U*O-q*B-he*X,g.rotateY(M,E,P),O=M[0],B=M[1],X=M[2],W=M[3],M[4]=_e*W+U*O+Se*X-$e*B,M[5]=Se*W+U*B+$e*O-_e*X,M[6]=$e*W+U*X+_e*B-Se*O,M[7]=U*W-_e*O-Se*B-$e*X,M},o.rotateZ=function(M,E,P){var O=-E[0],B=-E[1],X=-E[2],W=E[3],U=E[4],q=E[5],he=E[6],ge=E[7],_e=U*W+ge*O+q*X-he*B,Se=q*W+ge*B+he*O-U*X,$e=he*W+ge*X+U*B-q*O;return U=ge*W-U*O-q*B-he*X,g.rotateZ(M,E,P),O=M[0],B=M[1],X=M[2],W=M[3],M[4]=_e*W+U*O+Se*X-$e*B,M[5]=Se*W+U*B+$e*O-_e*X,M[6]=$e*W+U*X+_e*B-Se*O,M[7]=U*W-_e*O-Se*B-$e*X,M},o.rotateByQuatAppend=function(M,E,P){var O=P[0],B=P[1],X=P[2];P=P[3];var W=E[0],U=E[1],q=E[2],he=E[3];return M[0]=W*P+he*O+U*X-q*B,M[1]=U*P+he*B+q*O-W*X,M[2]=q*P+he*X+W*B-U*O,M[3]=he*P-W*O-U*B-q*X,W=E[4],U=E[5],q=E[6],he=E[7],M[4]=W*P+he*O+U*X-q*B,M[5]=U*P+he*B+q*O-W*X,M[6]=q*P+he*X+W*B-U*O,M[7]=he*P-W*O-U*B-q*X,M},o.rotateByQuatPrepend=function(M,E,P){var O=E[0],B=E[1],X=E[2];E=E[3];var W=P[0],U=P[1],q=P[2],he=P[3];return M[0]=O*he+E*W+B*q-X*U,M[1]=B*he+E*U+X*W-O*q,M[2]=X*he+E*q+O*U-B*W,M[3]=E*he-O*W-B*U-X*q,W=P[4],U=P[5],q=P[6],he=P[7],M[4]=O*he+E*W+B*q-X*U,M[5]=B*he+E*U+X*W-O*q,M[6]=X*he+E*q+O*U-B*W,M[7]=E*he-O*W-B*U-X*q,M},o.rotateAroundAxis=function(M,E,P,O){if(Math.abs(O)<x.EPSILON)return h(M,E);var B=Math.sqrt(P[0]*P[0]+P[1]*P[1]+P[2]*P[2]);O*=.5;var X=Math.sin(O),W=X*P[0]/B,U=X*P[1]/B;P=X*P[2]/B,O=Math.cos(O),B=E[0],X=E[1];var q=E[2],he=E[3];return M[0]=B*O+he*W+X*P-q*U,M[1]=X*O+he*U+q*W-B*P,M[2]=q*O+he*P+B*U-X*W,M[3]=he*O-B*W-X*U-q*P,B=E[4],X=E[5],q=E[6],E=E[7],M[4]=B*O+E*W+X*P-q*U,M[5]=X*O+E*U+q*W-B*P,M[6]=q*O+E*P+B*U-X*W,M[7]=E*O-B*W-X*U-q*P,M},o.add=function(M,E,P){return M[0]=E[0]+P[0],M[1]=E[1]+P[1],M[2]=E[2]+P[2],M[3]=E[3]+P[3],M[4]=E[4]+P[4],M[5]=E[5]+P[5],M[6]=E[6]+P[6],M[7]=E[7]+P[7],M},o.multiply=f,o.scale=function(M,E,P){return M[0]=E[0]*P,M[1]=E[1]*P,M[2]=E[2]*P,M[3]=E[3]*P,M[4]=E[4]*P,M[5]=E[5]*P,M[6]=E[6]*P,M[7]=E[7]*P,M},o.lerp=function(M,E,P,O){var B=1-O;return 0>L(E,P)&&(O=-O),M[0]=E[0]*B+P[0]*O,M[1]=E[1]*B+P[1]*O,M[2]=E[2]*B+P[2]*O,M[3]=E[3]*B+P[3]*O,M[4]=E[4]*B+P[4]*O,M[5]=E[5]*B+P[5]*O,M[6]=E[6]*B+P[6]*O,M[7]=E[7]*B+P[7]*O,M},o.invert=function(M,E){var P=F(E);return M[0]=-E[0]/P,M[1]=-E[1]/P,M[2]=-E[2]/P,M[3]=E[3]/P,M[4]=-E[4]/P,M[5]=-E[5]/P,M[6]=-E[6]/P,M[7]=E[7]/P,M},o.conjugate=function(M,E){return M[0]=-E[0],M[1]=-E[1],M[2]=-E[2],M[3]=E[3],M[4]=-E[4],M[5]=-E[5],M[6]=-E[6],M[7]=E[7],M},o.normalize=function(M,E){var P=F(E);if(0<P){P=Math.sqrt(P);var O=E[0]/P,B=E[1]/P,X=E[2]/P,W=E[3]/P,U=E[4],q=E[5],he=E[6];E=E[7];var ge=O*U+B*q+X*he+W*E;M[0]=O,M[1]=B,M[2]=X,M[3]=W,M[4]=(U-O*ge)/P,M[5]=(q-B*ge)/P,M[6]=(he-X*ge)/P,M[7]=(E-W*ge)/P}return M},o.str=function(M){return"quat2("+M[0]+", "+M[1]+", "+M[2]+", "+M[3]+", "+M[4]+", "+M[5]+", "+M[6]+", "+M[7]+")"},o.exactEquals=function(M,E){return M[0]===E[0]&&M[1]===E[1]&&M[2]===E[2]&&M[3]===E[3]&&M[4]===E[4]&&M[5]===E[5]&&M[6]===E[6]&&M[7]===E[7]},o.equals=function(M,E){var P=M[0],O=M[1],B=M[2],X=M[3],W=M[4],U=M[5],q=M[6];M=M[7];var he=E[0],ge=E[1],_e=E[2],Se=E[3],$e=E[4],Be=E[5],lt=E[6];return E=E[7],Math.abs(P-he)<=x.EPSILON*Math.max(1,Math.abs(P),Math.abs(he))&&Math.abs(O-ge)<=x.EPSILON*Math.max(1,Math.abs(O),Math.abs(ge))&&Math.abs(B-_e)<=x.EPSILON*Math.max(1,Math.abs(B),Math.abs(_e))&&Math.abs(X-Se)<=x.EPSILON*Math.max(1,Math.abs(X),Math.abs(Se))&&Math.abs(W-$e)<=x.EPSILON*Math.max(1,Math.abs(W),Math.abs($e))&&Math.abs(U-Be)<=x.EPSILON*Math.max(1,Math.abs(U),Math.abs(Be))&&Math.abs(q-lt)<=x.EPSILON*Math.max(1,Math.abs(q),Math.abs(lt))&&Math.abs(M-E)<=x.EPSILON*Math.max(1,Math.abs(M),Math.abs(E))},o.sqrLen=o.squaredLength=o.len=o.length=o.dot=o.mul=o.setReal=o.getReal=void 0;var x=c(lu),g=c(bc),_=c(Bh);o.getReal=g.copy,o.setReal=g.copy,o.mul=f;var L=g.dot;o.dot=L,m=g.length,o.length=m,o.len=m;var F=g.squaredLength;o.squaredLength=F,o.sqrLen=F});At(kn);var zh=Ye(function(m,o){function c(){var M=new F.ARRAY_TYPE(2);return F.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0),M}function s(M,E,P){return M[0]=E[0]-P[0],M[1]=E[1]-P[1],M}function h(M,E,P){return M[0]=E[0]*P[0],M[1]=E[1]*P[1],M}function f(M,E,P){return M[0]=E[0]/P[0],M[1]=E[1]/P[1],M}function x(M,E){var P=E[0]-M[0];return M=E[1]-M[1],Math.sqrt(P*P+M*M)}function g(M,E){var P=E[0]-M[0];return M=E[1]-M[1],P*P+M*M}function _(M){var E=M[0];return M=M[1],Math.sqrt(E*E+M*M)}function L(M){var E=M[0];return M=M[1],E*E+M*M}Object.defineProperty(o,"__esModule",{value:!0}),o.create=c,o.clone=function(M){var E=new F.ARRAY_TYPE(2);return E[0]=M[0],E[1]=M[1],E},o.fromValues=function(M,E){var P=new F.ARRAY_TYPE(2);return P[0]=M,P[1]=E,P},o.copy=function(M,E){return M[0]=E[0],M[1]=E[1],M},o.set=function(M,E,P){return M[0]=E,M[1]=P,M},o.add=function(M,E,P){return M[0]=E[0]+P[0],M[1]=E[1]+P[1],M},o.subtract=s,o.multiply=h,o.divide=f,o.ceil=function(M,E){return M[0]=Math.ceil(E[0]),M[1]=Math.ceil(E[1]),M},o.floor=function(M,E){return M[0]=Math.floor(E[0]),M[1]=Math.floor(E[1]),M},o.min=function(M,E,P){return M[0]=Math.min(E[0],P[0]),M[1]=Math.min(E[1],P[1]),M},o.max=function(M,E,P){return M[0]=Math.max(E[0],P[0]),M[1]=Math.max(E[1],P[1]),M},o.round=function(M,E){return M[0]=Math.round(E[0]),M[1]=Math.round(E[1]),M},o.scale=function(M,E,P){return M[0]=E[0]*P,M[1]=E[1]*P,M},o.scaleAndAdd=function(M,E,P,O){return M[0]=E[0]+P[0]*O,M[1]=E[1]+P[1]*O,M},o.distance=x,o.squaredDistance=g,o.length=_,o.squaredLength=L,o.negate=function(M,E){return M[0]=-E[0],M[1]=-E[1],M},o.inverse=function(M,E){return M[0]=1/E[0],M[1]=1/E[1],M},o.normalize=function(M,E){var P=E[0],O=E[1];return P=P*P+O*O,0<P&&(P=1/Math.sqrt(P)),M[0]=E[0]*P,M[1]=E[1]*P,M},o.dot=function(M,E){return M[0]*E[0]+M[1]*E[1]},o.cross=function(M,E,P){return E=E[0]*P[1]-E[1]*P[0],M[0]=M[1]=0,M[2]=E,M},o.lerp=function(M,E,P,O){var B=E[0];return E=E[1],M[0]=B+O*(P[0]-B),M[1]=E+O*(P[1]-E),M},o.random=function(M,E){E=E||1;var P=2*F.RANDOM()*Math.PI;return M[0]=Math.cos(P)*E,M[1]=Math.sin(P)*E,M},o.transformMat2=function(M,E,P){var O=E[0];return E=E[1],M[0]=P[0]*O+P[2]*E,M[1]=P[1]*O+P[3]*E,M},o.transformMat2d=function(M,E,P){var O=E[0];return E=E[1],M[0]=P[0]*O+P[2]*E+P[4],M[1]=P[1]*O+P[3]*E+P[5],M},o.transformMat3=function(M,E,P){var O=E[0];return E=E[1],M[0]=P[0]*O+P[3]*E+P[6],M[1]=P[1]*O+P[4]*E+P[7],M},o.transformMat4=function(M,E,P){var O=E[0];return E=E[1],M[0]=P[0]*O+P[4]*E+P[12],M[1]=P[1]*O+P[5]*E+P[13],M},o.rotate=function(M,E,P,O){var B=E[0]-P[0];E=E[1]-P[1];var X=Math.sin(O);return O=Math.cos(O),M[0]=B*O-E*X+P[0],M[1]=B*X+E*O+P[1],M},o.angle=function(M,E){var P=M[0];M=M[1];var O=E[0];E=E[1];var B=P*P+M*M;0<B&&(B=1/Math.sqrt(B));var X=O*O+E*E;return 0<X&&(X=1/Math.sqrt(X)),P=(P*O+M*E)*B*X,1<P?0:-1>P?Math.PI:Math.acos(P)},o.zero=function(M){return M[0]=0,M[1]=0,M},o.str=function(M){return"vec2("+M[0]+", "+M[1]+")"},o.exactEquals=function(M,E){return M[0]===E[0]&&M[1]===E[1]},o.equals=function(M,E){var P=M[0];M=M[1];var O=E[0];return E=E[1],Math.abs(P-O)<=F.EPSILON*Math.max(1,Math.abs(P),Math.abs(O))&&Math.abs(M-E)<=F.EPSILON*Math.max(1,Math.abs(M),Math.abs(E))},o.forEach=o.sqrLen=o.sqrDist=o.dist=o.div=o.mul=o.sub=o.len=void 0;var F=function(M){if(M&&M.__esModule)return M;var E={};if(M!=null){for(var P in M)if(Object.prototype.hasOwnProperty.call(M,P)){var O=Jo&&La?La(M,P):{};O.get||O.set?Jo(E,P,O):E[P]=M[P]}}return E.default=M,E}(lu);o.len=_,o.sub=s,o.mul=h,o.div=f,o.dist=x,o.sqrDist=g,o.sqrLen=L,m=function(){var M=c();return function(E,P,O,B,X,W){for(P||(P=2),O||(O=0),B=B?Math.min(B*P+O,E.length):E.length;O<B;O+=P)M[0]=E[O],M[1]=E[O+1],X(M,M,W),E[O]=M[0],E[O+1]=M[1];return E}}(),o.forEach=m});At(zh);var Al=Ye(function(m,o){function c(s){if(s&&s.__esModule)return s;var h={};if(s!=null){for(var f in s)if(Object.prototype.hasOwnProperty.call(s,f)){var x=Jo&&La?La(s,f):{};x.get||x.set?Jo(h,f,x):h[f]=s[f]}}return h.default=s,h}Object.defineProperty(o,"__esModule",{value:!0}),o.vec4=o.vec3=o.vec2=o.quat2=o.quat=o.mat4=o.mat3=o.mat2d=o.mat2=o.glMatrix=void 0,m=c(lu),o.glMatrix=m,m=c(yg),o.mat2=m,m=c(bu),o.mat2d=m,m=c(Nh),o.mat3=m,m=c(Bh),o.mat4=m,m=c(bc),o.quat=m,m=c(kn),o.quat2=m,m=c(zh),o.vec2=m,m=c(wd),o.vec3=m,m=c(_d),o.vec4=m});At(Al);var Qo=Al.vec4,In=Al.vec3,ni=Al.vec2,vm=Al.quat2,Xa=Al.quat,jr=Al.mat4,wp=Al.mat3,_p=Al.mat2d,ym=Al.mat2,Pf=Al.glMatrix;Sl.deviation=function(m,o,c,s){var h=o&&o.length,f=Math.abs(Uc(m,0,h?o[0]*c:m.length,c));if(h){h=0;for(var x=o.length;h<x;h++)f-=Math.abs(Uc(m,o[h]*c,h<x-1?o[h+1]*c:m.length,c))}for(h=o=0;h<s.length;h+=3){x=s[h]*c;var g=s[h+1]*c,_=s[h+2]*c;o+=Math.abs((m[x]-m[_])*(m[g+1]-m[x+1])-(m[x]-m[g])*(m[_+1]-m[x+1]))}return f===0&&o===0?0:Math.abs((o-f)/f)},Sl.flatten=function(m){for(var o=m[0][0].length,c={vertices:[],holes:[],dimensions:o},s=0,h=0;h<m.length;h++){for(var f=0;f<m[h].length;f++)for(var x=0;x<o;x++)c.vertices.push(m[h][f][x]);0<h&&(s+=m[h-1].length,c.holes.push(s))}return c},Sl.default=Sl;var Mp=typeof hf=="undefined"?"__target":hf(),Mv=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Md=window.URL||window.webkitURL,Ul=window.Worker;if(Ul){var Ys=Qa("self.onmessage = function () {}"),fh=new Uint8Array(1);try{if(/(?:Trident|Edge)\/(?:[567]|12)/i.test(navigator.userAgent))throw Error("Not available");var xg=new Ul(Ys);xg.postMessage(fh,[fh.buffer])}catch(m){Ul=null}finally{Md.revokeObjectURL(Ys),xg&&xg.terminate()}}var Sp=new function(m,o){return function(c){var s=this;if(o){if(Ul&&!c)return c=(""+o).replace(/^function.+?{/,"").slice(0,-1),c=Qa(c),this[Mp]=new Ul(c),Md.revokeObjectURL(c),this[Mp];var h={postMessage:function(x){s.onmessage&&setTimeout(function(){return s.onmessage({data:x,target:h})})}};o.call(h),this.postMessage=function(f){setTimeout(function(){return h.onmessage({data:f,target:s})})},this.isThisThread=!0}else return new Ul(m)}}("./worker.js",function(m,o){}),Sv={window:1,windowAnimation:2,gradual:3,ripple:4,water:6},Rf=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c._isShow=!0,s=c.getOptions(),(s.style==="windowAnimation"||s.style==="ripple"||0<s.riseTime)&&(c.autoUpdate=!0),c.selectedColor=[-1,-1,-1],c.textureCache={},c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:"rgba(50, 50, 230, 1.0)",opacity:.8,height:0,isTextureFull:!1,topColor:"rgba(76, 76, 76, 0.8)",textureRotate:0,textureScale:1,useLight:!0,riseTime:0,polygonOffset:[0,0],depthTest:!0}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.dataMgr=new Uu(this,this.gl),this.texture=null,this.isUseTexture=!1;var f=[];h.enablePicked&&f.push("PICK"),h.texture&&f.push("USE_TEXTURE"),this.program=new ui(this.gl,{vertexShader:`precision highp float;uniform vec4 uSelectedColor;attribute vec4 a_pos;attribute vec3 a_normal;attribute vec4 a_color;attribute vec4 a_pre_color;attribute float a_height;attribute float a_pre_height;
#if defined(USE_TEXTURE)
attribute vec2 a_texture_coord;
#endif
uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_use_lighting;uniform bool u_use_texture;uniform vec3 u_ripple_center;uniform float u_radius;uniform float style;uniform float alpha;uniform float time;uniform float dataTime;uniform float riseTime;uniform vec2 uMapCenter;uniform float uMapZoom;varying float v_height;varying vec4 v_color;varying vec3 v_position;varying vec2 v_texture_coord;const vec3 point_color=vec3(0.06,0.06,0.06);const vec3 light_color=vec3(0.53,0.53,0.53);const vec3 light_color_2=vec3(0.4,0.4,0.4);const vec3 uAmbientColor=vec3(0.8,0.8,0.8);const vec3 uLightingDirection=vec3(0.0,1.0,1.0);const vec3 uDirectionalColor=vec3(1.0,1.0,1.0);float getTransitionValue(float pre_value,float to_value,float dataTime,float riseTime){float result=0.0;if(pre_value==to_value){result=to_value;}else{if(riseTime>0.0&&dataTime<riseTime){result=(pre_value+(to_value-pre_value)*(dataTime/riseTime));}else{result=to_value;}}return result;}void main(){vec4 pos=a_pos;pos.z=pos.z+pos.w*getTransitionValue(a_pre_height,a_height,dataTime,riseTime);v_position=pos.xyz;v_height=a_height;
#if defined(USE_TEXTURE)
if(u_use_texture){v_texture_coord=a_texture_coord;}
#endif
vec4 position=u_proj_matrix*u_mv_matrix*vec4(pos.xyz,1.0);gl_Position=position;vec4 icolor=a_color;
#if defined(PICK)
if(mapvIsPicked()){icolor=uSelectedColor;}
#endif
if(u_use_lighting){vec3 N=normalize(vec3(u_normal_matrix*vec4(a_normal,1.0)));vec4 point_dir=u_mv_matrix*vec4(0,1,0,0);vec3 L_point=normalize(point_dir.xyz);float lambert_point=max(0.0,dot(N,-L_point));vec4 light_dir=u_mv_matrix*vec4(u_side_light_dir,0);vec3 L=normalize(light_dir.xyz);float lambert=max(0.0,dot(N,-L));if(pos.z<5.0){float deepGradientColor=(5.0-pos.z)/8.0;lambert=lambert-deepGradientColor;}vec4 light_dir_2=u_mv_matrix*vec4(0,0,-1,0);vec3 L2=normalize(light_dir_2.xyz);float lambert_2=max(0.0,dot(N,-L2));if(a_pre_color.r==a_color.r&&a_pre_color.g==a_color.g&&a_pre_color.b==a_color.b){}else{if(riseTime>0.0&&dataTime<riseTime){icolor.r=a_pre_color.r+(a_color.r-a_pre_color.r)*(dataTime/riseTime);icolor.g=a_pre_color.g+(a_color.g-a_pre_color.g)*(dataTime/riseTime);icolor.b=a_pre_color.b+(a_color.b-a_pre_color.b)*(dataTime/riseTime);}}v_color.rgb=icolor.rgb+icolor.rgb*light_color*lambert+icolor.rgb*light_color_2*lambert_2+icolor.rgb*point_color*lambert_point;v_color.a=icolor.a;if(u_use_texture){mat3 normalMatrix=mat3(u_normal_matrix);vec3 transformedNormal=normalMatrix*a_normal;vec3 dir=uLightingDirection;dir=vec3(normalMatrix*vec3(0.0,-1.0,2.0));float directionalLightWeighting=max(dot(normalize(transformedNormal),normalize(dir)),0.0);vec4 vLightWeighting;vLightWeighting=vec4(uAmbientColor+uDirectionalColor*directionalLightWeighting,1.0);v_color=vLightWeighting;}}else{v_color=icolor;}}`,fragmentShader:"precision highp float;varying vec4 v_color;varying vec3 v_position;varying float v_height;varying vec2 v_texture_coord;uniform vec3 u_ripple_center;uniform vec4 top_color;uniform float u_radius;uniform float style;uniform float alpha;uniform float time;uniform sampler2D u_sampler;uniform bool u_use_lighting;uniform bool u_use_texture;void main(){vec4 color=vec4(v_color);vec4 textureColor=vec4(1.0,1.0,1.0,1.0);if(u_use_texture){if(style==6.0){float x=v_texture_coord.s;float y=v_texture_coord.t;vec2 cPos=-1.0+2.0*gl_FragCoord.xy/MAPV_resolution;float cLength=length(cPos);vec2 uv=gl_FragCoord.xy/MAPV_resolution+(cPos/cLength)*cos(cLength*12.0-time/1000.0*4.0)*0.03;textureColor=texture2D(u_sampler,uv/2.0+vec2(x,y));}else{textureColor=texture2D(u_sampler,vec2(v_texture_coord.s,v_texture_coord.t));}if(u_use_lighting){color=vec4(textureColor*v_color*1.1);}else{color=textureColor;}}if(style==1.0||style==2.0){float t=time/1000.0;float diffDistance=5.0;float modX=mod(v_position.x,diffDistance*2.0);float modZ=mod(v_position.z,diffDistance*2.0);if(modX<diffDistance&&modZ<diffDistance&&v_position.z<v_height){color*=1.05;if(time>0.0&&style==2.0){float iX=ceil(v_position.x/diffDistance);float iZ=ceil(v_position.z/diffDistance);float timeDistance=8.0;t+=tan(sin(iZ));color*=(1.0+mod(t,timeDistance)/timeDistance);}}color.a=alpha;}else if(style==5.0){float t=time/1000.0;float diffDistance=10.0;float modZ=mod(v_position.z-t*40.0,diffDistance*2.0);color.a=1.0-pow(v_position.z/v_height,0.5);if(v_position.z/v_height<0.3){color.r+=0.2;color.g+=0.2;color.b+=0.2;}if(modZ<diffDistance*2.0-4.0){discard;}}else if(style==3.0){float diffDistance=10.0;float modX=mod(v_position.x,diffDistance*2.0);color.a=1.0-pow(v_position.z/v_height,0.3);}else if(style==4.0){float dis=distance(u_ripple_center,v_position);float rSize=400.0;if(v_position.z>=v_height){color=top_color;}if(dis>u_radius-rSize&&dis<u_radius+rSize){color*=(1.0-abs(dis-u_radius)/rSize)*2.0+1.0;}}else if(style==6.0){}gl_FragColor=color;}",defines:f},this),this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.heightBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.textureBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),f=[{name:"a_pos",buffer:this.vertexBuffer,stride:28,size:4,type:"FLOAT",offset:0},{name:"a_normal",buffer:this.vertexBuffer,size:3,stride:28,type:"FLOAT",offset:16},{name:"a_color",buffer:this.colorBuffer,size:4,stride:32,type:"FLOAT",offset:0},{name:"a_pre_color",buffer:this.colorBuffer,size:4,stride:32,type:"FLOAT",offset:16},{name:"a_height",buffer:this.heightBuffer,size:1,stride:8,type:"FLOAT",offset:0},{name:"a_pre_height",buffer:this.heightBuffer,size:1,stride:8,type:"FLOAT",offset:4}],h.texture&&f.push({name:"a_texture_coord",buffer:this.textureBuffer,size:2,stride:8,type:"FLOAT",offset:0}),f=f.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:f}),this.initializeTime=new Date,this.normalMatrix=jr.create()}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.dataMgr=this.options=this.data=this.indexBuffer=this.textureBuffer=this.heightBuffer=this.colorBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){var f=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){f.loadTexture(function(){f.dataMgr.parseData(h),f.dataTime=new Date,f.webglLayer.render()})},0))}},{key:"render",value:function(s){var h=s.gl,f=s.projectionMatrix,x=s.viewMatrix;if(this._isShow){var g=this.getData();if(g&&!(0>=g.length)){g=this.getOptions();var _=this.program;if(_.use(h),!g.texture||this.texture){var L=0;g.style&&Sv[g.style]&&(L=Sv[g.style]);var F=[h.ONE,h.ZERO];if(g.blend&&(F=[h.ONE,h.ONE]),(g.height===0||g.style==="gradual")&&(F=[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA]),this.setGLState({cullFace:!1,blend:!0,blendEquation:h.FUNC_ADD,blendFunc:F,polygonOffset:g.polygonOffset,depthTest:g.depthTest,depthMask:g.style!=="gradual"}),F=this.normizedColor(g.topColor),g.style==="ripple"&&g.rippleLayer&&g.rippleLayer.data&&g.rippleLayer.data[0]){var M=this.normizedPoint(g.rippleLayer.data[0].geometry.coordinates);_.setUniforms({u_ripple_center:[M[0],M[1],0],u_radius:g.rippleLayer.options.size*g.rippleLayer.currentScale})}M=In.fromValues(0,-1,2),g.lightDir&&(M=In.fromValues(g.lightDir[0],g.lightDir[1],g.lightDir[2]));var E=this.normalMatrix;jr.invert(E,x),jr.transpose(E,E),_.setUniforms(vi(this.getCommonUniforms(s),{u_normal_matrix:E,u_sampler:this.texture,u_proj_matrix:f,u_mv_matrix:x,style:L,top_color:F,u_use_lighting:g.useLight,u_use_texture:this.isUseTexture,alpha:g.opacity===void 0?.8:parseFloat(g.opacity),time:new Date-this.initializeTime,dataTime:new Date-this.dataTime,riseTime:g.riseTime,u_side_light_dir:M})),s=this.dataMgr.getData(),0<s.vertex.length&&(this.vertexArray.bind(),this.indexBuffer.bind(),h.drawElements(h.TRIANGLES,s.index.length,h.UNSIGNED_INT,0))}}}else this.webglLayer.clear()}},{key:"loadTexture",value:function(s){var h=this,f=this.getOptions();f.texture?(this.isUseTexture=!0,Or(this.gl,f.texture,function(x,g){h.image=g,h.texture=x,s&&s(),h.webglLayer.render()})):(this.isUseTexture=!1,this.image=this.texture=null,s&&s())}}]),o}(xo);Uu.prototype.initData=function(){this.outBuilding3d={pickColorVertex:[],vertex:[],texture:[],color:[],height:[],index:[]}},Uu.prototype.getData=function(){return this.outBuilding3d},Uu.prototype.initWorker=function(){this.worker=new Sp,this.worker.onmessage=function(m){}},Uu.prototype.parseData=function(m){var o=this;this.initData();for(var c=this.shapeLayer.getOptions(),s=0;s<m.length;s++){var h=m[s],f=h.height||c.height;"properties"in h&&"height"in h.properties&&(f=h.properties.height),f*=1;var x=h.color||c.color;"properties"in h&&"color"in h.properties&&(x=h.properties.color),"properties"in h&&"fillColor"in h.properties&&(x=h.properties.fillColor),Object.prototype.toString.call(x)==="[object Function]"&&(x=x(h)),x=this.shapeLayer.normizedColor(x);var g=this.shapeLayer.getProperty("angle",c.textureRotate,h),_=void 0;c.enablePicked&&(_=this.shapeLayer.indexToRgb(s));var L=void 0,F=void 0;if(c.riseTime&&(F=h.preColor,"properties"in h&&"preColor"in h.properties&&(F=h.properties.preColor),L=h.preHeight,"properties"in h&&"preHeight"in h.properties&&(L=h.properties.preHeight),L===void 0&&(L=0)),h.geometry.coordinates)if(h.geometry.type==="MultiPolygon"){var M=h.geometry.coordinates;h=[];for(var E=0;E<M.length;E++)h.push(M[E].map(function(W){return W.map(function(U){return o.shapeLayer.normizedPoint(U)})}));for(M=0;M<h.length;M++){E=[];var P=[],O=Sl.flatten(h[M]),B=O.vertices;O=O.holes;for(var X=0;X<B.length;X+=3)E.push(B[X+0],B[X+1]),P.push(B[X+2]);this.parseBuilding3d(this.outBuilding3d,E,P,L,f,F,x,_,g,O)}}else{for(M=[],E=0;E<h.geometry.coordinates.length;E++)M.push(h.geometry.coordinates[E].map(function(W){return o.shapeLayer.normizedPoint(W)}));for(M=Sl.flatten(M),h=M.vertices,M=M.holes,E=[],P=[],B=0;B<h.length;B+=3)E.push(h[B+0],h[B+1]),P.push(h[B+2]);this.parseBuilding3d(this.outBuilding3d,E,P,L,f,F,x,_,g,M)}}this.shapeLayer.vertexBuffer.updateData(new Float32Array(this.outBuilding3d.vertex)),this.shapeLayer.colorBuffer.updateData(new Float32Array(this.outBuilding3d.color)),this.shapeLayer.heightBuffer.updateData(new Float32Array(this.outBuilding3d.height)),this.shapeLayer.textureBuffer.updateData(new Float32Array(this.outBuilding3d.texture)),this.shapeLayer.indexBuffer.updateData(new Uint32Array(this.outBuilding3d.index)),c.enablePicked&&this.shapeLayer.pickBuffer.updateData(new Float32Array(this.outBuilding3d.pickColorVertex))},Uu.prototype.getBounds=function(m,o){for(var c=m[0],s=m[1],h=m[0],f=m[1],x=0;x<m.length;x+=2)c=Math.min(m[x],c),s=Math.min(m[x+1],s),h=Math.max(m[x],h),f=Math.max(m[x+1],f);if(x=[(h-c)/2+c,(f-s)/2+s],o===0||!o)return{minX:c,minY:s,maxX:h,maxY:f,width:h-c,height:f-s,center:x};for(c=m.slice(0),s=0;s<c.length;s+=2)h=fc(m[s],m[s+1],x,o),c[s]=h[0],c[s+1]=h[1];return this.getBounds(c,0)},Uu.prototype.parseBuilding3d=function(m,o,c,s,h,f,x,g,_,L){s===void 0&&(s=h);var F=this.shapeLayer.options,M=m.vertex,E=m.texture,P=m.color,O=m.height,B=m.pickColorVertex;m=m.index,f===void 0&&(f=x);var X=0,W=0;if(this.shapeLayer.image&&(X=this.shapeLayer.image.width*F.textureScale,W=this.shapeLayer.image.height*F.textureScale),F.style!=="gradual"){L=L&&L.length?Sl(o,L,2):Sl(o);var U=L[0],q=L[1],he=L[2];U=[o[2*U],o[2*U+1],1],q=[o[2*q],o[2*q+1],1];var ge=[o[2*he],o[2*he+1],1];he=[],In.cross(he,[ge[0]-q[0],ge[1]-q[1],ge[2]-q[2]],[U[0]-q[0],U[1]-q[1],U[2]-q[2]]),q=M.length/7;var _e;F.texture&&(_e=this.getBounds(o,_)),U=F.isTextureFull,ge=0;for(var Se=o.length;ge<Se;ge+=2){if(M.push(o[ge],o[ge+1],c[ge/2],1,he[0],he[1],he[2]),P.push(x[0],x[1],x[2],x[3],f[0],f[1],f[2],f[3]),O.push(h,s),F.texture){var $e=fc(o[ge],o[ge+1],_e.center,_),Be=Hi($e,2);$e=Be[0],Be=Be[1],U?($e=($e-_e.minX)/_e.width,Be=(Be-_e.minY)/_e.height):($e=($e-_e.minX)/X,Be=(Be-_e.minY)/W),E.push($e,Be)}g&&B.push(g[0]/255,g[1]/255,g[2]/255)}for(_=0,_e=L.length;_<_e;_++)m.push(L[_]+q)}if(!(h===s&&0>=h))for(_=0,L=o.length;_<L;_+=2)_e=M.length/7,Se=o[_],$e=o[_+1],he=[Se,$e,c[_/2],0],q=[Se,$e,c[_/2],1],ge=_+2,Be=_+3,_===L-2&&(ge=0,Be=1),ge=o[ge],Be=o[Be],Se=Math.sqrt(Math.pow(ge-Se,2),Math.pow(Be-$e,2)),$e=[ge,Be,c[_/2],0],ge=[ge,Be,c[_/2],1],Be=[],In.cross(Be,[$e[0]-he[0],$e[1]-he[1],$e[2]-he[2]],[q[0]-he[0],q[1]-he[1],q[2]-he[2]]),M.push(he[0],he[1],he[2],he[3]),M.push(Be[0],Be[1],Be[2]),M.push(q[0],q[1],q[2],q[3]),M.push(Be[0],Be[1],Be[2]),M.push($e[0],$e[1],$e[2],$e[3]),M.push(Be[0],Be[1],Be[2]),M.push(ge[0],ge[1],ge[2],ge[3]),M.push(Be[0],Be[1],Be[2]),P.push(x[0],x[1],x[2],x[3]),P.push(f[0],f[1],f[2],f[3]),P.push(x[0],x[1],x[2],x[3]),P.push(f[0],f[1],f[2],f[3]),P.push(x[0],x[1],x[2],x[3]),P.push(f[0],f[1],f[2],f[3]),P.push(x[0],x[1],x[2],x[3]),P.push(f[0],f[1],f[2],f[3]),O.push(h),O.push(s),O.push(h),O.push(s),O.push(h),O.push(s),O.push(h),O.push(s),F.texture&&(U?(E.push(0,0),E.push(0,1),E.push(1,0),E.push(1,1)):(E.push(0,0),E.push(0,h/W),E.push(Se/X,0),E.push(Se/X,h/W))),g&&(B.push(g[0]/255,g[1]/255,g[2]/255),B.push(g[0]/255,g[1]/255,g[2]/255),B.push(g[0]/255,g[1]/255,g[2]/255),B.push(g[0]/255,g[1]/255,g[2]/255)),m.push(_e,_e+2,_e+3,_e,_e+3,_e+1)};var rc=Ye(function(m,o){(function(c,s){m.exports=s()})(Jf,function(){function c(W,U,q,he,ge){for(;he>q;){if(600<he-q){var _e=he-q+1,Se=U-q+1,$e=Math.log(_e),Be=.5*Math.exp(2*$e/3);$e=.5*Math.sqrt($e*Be*(_e-Be)/_e)*(0>Se-_e/2?-1:1),c(W,U,Math.max(q,Math.floor(U-Se*Be/_e+$e)),Math.min(he,Math.floor(U+(_e-Se)*Be/_e+$e)),ge)}for(_e=W[U],Se=q,Be=he,s(W,q,U),0<ge(W[he],_e)&&s(W,q,he);Se<Be;){for(s(W,Se,Be),Se++,Be--;0>ge(W[Se],_e);)Se++;for(;0<ge(W[Be],_e);)Be--}ge(W[q],_e)===0?s(W,q,Be):(Be++,s(W,Be,he)),Be<=U&&(q=Be+1),U<=Be&&(he=Be-1)}}function s(W,U,q){var he=W[U];W[U]=W[q],W[q]=he}function h(W,U){return W<U?-1:W>U?1:0}function f(W,U){x(W,0,W.children.length,U,W)}function x(W,U,q,he,ge){for(ge||(ge=O(null)),ge.minX=Infinity,ge.minY=Infinity,ge.maxX=-Infinity,ge.maxY=-Infinity;U<q;U++){var _e=W.children[U];g(ge,W.leaf?he(_e):_e)}return ge}function g(W,U){return W.minX=Math.min(W.minX,U.minX),W.minY=Math.min(W.minY,U.minY),W.maxX=Math.max(W.maxX,U.maxX),W.maxY=Math.max(W.maxY,U.maxY),W}function _(W,U){return W.minX-U.minX}function L(W,U){return W.minY-U.minY}function F(W){return(W.maxX-W.minX)*(W.maxY-W.minY)}function M(W){return W.maxX-W.minX+(W.maxY-W.minY)}function E(W,U){return W.minX<=U.minX&&W.minY<=U.minY&&U.maxX<=W.maxX&&U.maxY<=W.maxY}function P(W,U){return U.minX<=W.maxX&&U.minY<=W.maxY&&U.maxX>=W.minX&&U.maxY>=W.minY}function O(W){return{children:W,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function B(W,U,q,he,ge){for(var _e=[U,q];_e.length;)if(q=_e.pop(),U=_e.pop(),!(q-U<=he)){var Se=U+Math.ceil((q-U)/he/2)*he;c(W,Se,U||0,q||W.length-1,ge||h),_e.push(U,Se,Se,q)}}var X=function(U){U===void 0&&(U=9),this._maxEntries=Math.max(4,U),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};return X.prototype.all=function(){return this._all(this.data,[])},X.prototype.search=function(W){var U=this.data,q=[];if(!P(W,U))return q;for(var he=this.toBBox,ge=[];U;){for(var _e=0;_e<U.children.length;_e++){var Se=U.children[_e],$e=U.leaf?he(Se):Se;P(W,$e)&&(U.leaf?q.push(Se):E(W,$e)?this._all(Se,q):ge.push(Se))}U=ge.pop()}return q},X.prototype.collides=function(W){var U=this.data;if(!P(W,U))return!1;for(var q=[];U;){for(var he=0;he<U.children.length;he++){var ge=U.children[he],_e=U.leaf?this.toBBox(ge):ge;if(P(W,_e)){if(U.leaf||E(W,_e))return!0;q.push(ge)}}U=q.pop()}return!1},X.prototype.load=function(W){if(!W||!W.length)return this;if(W.length<this._minEntries){for(var U=0;U<W.length;U++)this.insert(W[U]);return this}return W=this._build(W.slice(),0,W.length-1,0),this.data.children.length?this.data.height===W.height?this._splitRoot(this.data,W):(this.data.height<W.height&&(U=this.data,this.data=W,W=U),this._insert(W,this.data.height-W.height-1,!0)):this.data=W,this},X.prototype.insert=function(W){return W&&this._insert(W,this.data.height-1),this},X.prototype.clear=function(){return this.data=O([]),this},X.prototype.remove=function(W,U){if(!W)return this;for(var q=this.data,he=this.toBBox(W),ge=[],_e=[],Se,$e,Be;q||ge.length;){if(q||(q=ge.pop(),$e=ge[ge.length-1],Se=_e.pop(),Be=!0),q.leaf){e:{var lt=W,kt=q.children,cr=U;if(cr){for(var Ur=0;Ur<kt.length;Ur++)if(cr(lt,kt[Ur])){lt=Ur;break e}lt=-1}else lt=kt.indexOf(lt)}if(lt!==-1){q.children.splice(lt,1),ge.push(q),this._condense(ge);break}}Be||q.leaf||!E(q,he)?$e?(Se++,q=$e.children[Se],Be=!1):q=null:(ge.push(q),_e.push(Se),Se=0,$e=q,q=q.children[0])}return this},X.prototype.toBBox=function(W){return W},X.prototype.compareMinX=function(W,U){return W.minX-U.minX},X.prototype.compareMinY=function(W,U){return W.minY-U.minY},X.prototype.toJSON=function(){return this.data},X.prototype.fromJSON=function(W){return this.data=W,this},X.prototype._all=function(W,U){for(var q=[];W;)W.leaf?U.push.apply(U,W.children):q.push.apply(q,W.children),W=q.pop();return U},X.prototype._build=function(W,U,q,he){var ge=q-U+1,_e=this._maxEntries;if(ge<=_e){var Se=O(W.slice(U,q+1));return f(Se,this.toBBox),Se}for(he||(he=Math.ceil(Math.log(ge)/Math.log(_e)),_e=Math.ceil(ge/Math.pow(_e,he-1))),Se=O([]),Se.leaf=!1,Se.height=he,ge=Math.ceil(ge/_e),_e=ge*Math.ceil(Math.sqrt(_e)),B(W,U,q,_e,this.compareMinX);U<=q;U+=_e){var $e=Math.min(U+_e-1,q);B(W,U,$e,ge,this.compareMinY);for(var Be=U;Be<=$e;Be+=ge)Se.children.push(this._build(W,Be,Math.min(Be+ge-1,$e),he-1))}return f(Se,this.toBBox),Se},X.prototype._chooseSubtree=function(W,U,q,he){for(;he.push(U),!(U.leaf||he.length-1===q);){for(var ge=Infinity,_e=Infinity,Se=void 0,$e=0;$e<U.children.length;$e++){var Be=U.children[$e],lt=F(Be),kt=(Math.max(Be.maxX,W.maxX)-Math.min(Be.minX,W.minX))*(Math.max(Be.maxY,W.maxY)-Math.min(Be.minY,W.minY))-lt;kt<_e?(_e=kt,ge=lt<ge?lt:ge,Se=Be):kt===_e&&lt<ge&&(ge=lt,Se=Be)}U=Se||U.children[0]}return U},X.prototype._insert=function(W,U,q){q=q?W:this.toBBox(W);var he=[],ge=this._chooseSubtree(q,this.data,U,he);for(ge.children.push(W),g(ge,q);0<=U&&he[U].children.length>this._maxEntries;)this._split(he,U),U--;this._adjustParentBBoxes(q,he,U)},X.prototype._split=function(W,U){var q=W[U],he=q.children.length,ge=this._minEntries;this._chooseSplitAxis(q,ge,he),he=this._chooseSplitIndex(q,ge,he),he=O(q.children.splice(he,q.children.length-he)),he.height=q.height,he.leaf=q.leaf,f(q,this.toBBox),f(he,this.toBBox),U?W[U-1].children.push(he):this._splitRoot(q,he)},X.prototype._splitRoot=function(W,U){this.data=O([W,U]),this.data.height=W.height+1,this.data.leaf=!1,f(this.data,this.toBBox)},X.prototype._chooseSplitIndex=function(W,U,q){for(var he,ge=Infinity,_e=Infinity,Se=U;Se<=q-U;Se++){var $e=x(W,0,Se,this.toBBox),Be=x(W,Se,q,this.toBBox),lt=Math.max(0,Math.min($e.maxX,Be.maxX)-Math.max($e.minX,Be.minX))*Math.max(0,Math.min($e.maxY,Be.maxY)-Math.max($e.minY,Be.minY));$e=F($e)+F(Be),lt<ge?(ge=lt,he=Se,_e=$e<_e?$e:_e):lt===ge&&$e<_e&&(_e=$e,he=Se)}return he||q-U},X.prototype._chooseSplitAxis=function(W,U,q){var he=W.leaf?this.compareMinX:_,ge=W.leaf?this.compareMinY:L,_e=this._allDistMargin(W,U,q,he);U=this._allDistMargin(W,U,q,ge),_e<U&&W.children.sort(he)},X.prototype._allDistMargin=function(W,U,q,he){W.children.sort(he),he=this.toBBox;for(var ge=x(W,0,U,he),_e=x(W,q-U,q,he),Se=M(ge)+M(_e),$e=U;$e<q-U;$e++){var Be=W.children[$e];g(ge,W.leaf?he(Be):Be),Se+=M(ge)}for(q=q-U-1;q>=U;q--)ge=W.children[q],g(_e,W.leaf?he(ge):ge),Se+=M(_e);return Se},X.prototype._adjustParentBBoxes=function(W,U,q){for(;0<=q;q--)g(U[q],W)},X.prototype._condense=function(W){for(var U=W.length-1,q;0<=U;U--)W[U].children.length===0?0<U?(q=W[U-1].children,q.splice(q.indexOf(W[U]),1)):this.clear():f(W[U],this.toBBox)},X})}),Sd=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),s=c.canvas=document.createElement("canvas"),s=c.ctx=s.getContext("2d"),s.textAlign="start",s.textBaseline="top",c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,flat:!1,collides:!0,unit:"px",angle:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],shadow:{}}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new ui(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uFlat;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)+size.x*sin(rotation);}else if(corner==2.0){x+=size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)-size.x*sin(rotation);}else if(corner==3.0){x+=size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)-size.x*sin(rotation);}else{x+=-size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)+size.x*sin(rotation);}return vec3(x,y,coord.z);}void main(){vTextCoord=aTextCoord;if(uFlat){vec2 pixelOffset=offset;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;pixelOffset*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);current.z+=zIndex;gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y-pixelOffset[1],current.z,1.0);}else{vec2 pixelOffset=offset*zoomUnits;vec4 projection=matrix*vec4(position.x+pixelOffset[0],position.y-pixelOffset[1],position.z,1.0);vec3 screen=projection.xyz/projection.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio*scale;vec3 current=transformCoord(screen,halfSize,corner);current.z+=zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.canvas=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h)}},{key:"processCache",value:function(s,h){this.cachedData=[];for(var f=0;f<h.length;f++){var x=this.normizedPoint(h[f].geometry.coordinates),g=h[f].text;"properties"in h[f]&&"text"in h[f].properties&&(g=h[f].properties.text);var _=this.getProperty("angle",s.angle,h[f]);x&&g!==void 0&&this.cachedData.push({point:x,text:g,angle:_,index:f})}}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.map){var h=s.gl,f=s.matrix,x=this.getOptions(),g=this.program;g.use(h),this.throttleUpdate(s),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:x.polygonOffset,depthTest:x.depthTest,depthMask:x.depthWrite});var _=this.map.getZoomUnits();g.setUniforms(vi(this.getCommonUniforms(s),{matrix:f,devicePixelRatio:window.devicePixelRatio,textureImage:this.texture,uFlat:x.flat,offset:x.offset,zoomUnits:_,zIndex:x.zIndex,uUnitPx:x.unit==="px"})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(s){this.updateText(s)}},{key:"updateText",value:function(s){var h=s.gl,f=s.matrix,x=this.getOptions(),g=x.color;s=x.fontSize;var _=x.fontFamily,L=x.padding,F=x.margin,M=x.collides,E=x.enablePicked,P=x.shadow,O=h.canvas.width/window.devicePixelRatio,B=h.canvas.height/window.devicePixelRatio,X=this.canvas;h=this.ctx,h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),h.textBaseline="top",h.font="20px "+_;var W=new rc;x=[];for(var U=0;U<this.cachedData.length;U++){var q=this.cachedData[U],he=q.point,ge=q.text,_e=q.angle;q=q.index;var Se=Hi(he,3);Se=Qo.clone([Se[0],Se[1],Se[2],1]),Qo.transformMat4(Se,Se,f),Qo.scale(Se,Se,1/Se[3]);var $e=(Se[0]+1)/2*O,Be=(-Se[1]+1)/2*B,lt=h.measureText(ge);Se=lt.width+2*L[0];var kt=20;lt.actualBoundingBoxAscent&&lt.actualBoundingBoxDescent&&(kt=lt.actualBoundingBoxDescent-lt.actualBoundingBoxAscent),kt+=2*L[1];var cr=Se+F[0];if(lt=kt+F[1],$e-=cr/2,Be-=lt/2,cr=$e+cr,lt=Be+lt,!(0>cr||0>lt||$e>O||Be>B)){if(M){if(lt={minX:$e,maxX:cr,minY:Be,maxY:lt},W.collides(lt))continue;W.insert(lt)}x.push({w:Se,h:kt,point:he,text:ge,angle:_e,dataIndex:q})}}for(h.restore(),F=dc(x),f=F.w,F=F.h,0>=f&&(f=1),0>=F&&(F=1),X.width=f*window.devicePixelRatio,X.height=F*window.devicePixelRatio,h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),h.textBaseline="top",h.font="20px "+_,h.fillStyle=g,h.shadowColor=P&&P.color,h.shadowOffsetX=P&&P.offsetX,h.shadowOffsetY=P&&P.offsetY,h.shadowBlur=P&&P.blur,g=[],_=[],P=[],X=[],M=0,O=x.length;M<O;++M){for(B=x[M],h.fillText(B.text,B.x+L[0],B.y+L[1]),he=Hi(B.point,3),W=he[0],U=he[1],he=he[2],ge=0;4>ge;ge++)g.push(W,U,he),g.push(ge),g.push(B.w,B.h),g.push(s/20,B.angle*Math.PI/180);W=B.x/f,U=(B.x+B.w)/f,he=(B.y+B.h)/F,ge=B.y/F,_.push(W,he,W,ge,U,ge,U,he),W=4*M,P.push(W,W+2,W+1,W,W+3,W+2),E&&(B=this.indexToRgb(B.dataIndex),X.push(B[0]/255,B[1]/255,B[2]/255),X.push(B[0]/255,B[1]/255,B[2]/255),X.push(B[0]/255,B[1]/255,B[2]/255),X.push(B[0]/255,B[1]/255,B[2]/255))}h.restore(),this.loadTexture(),this.index=P,this.vertexBuffer.updateData(new Float32Array(g)),this.uvBuffer.updateData(new Float32Array(_)),this.indexBuffer.updateData(new Uint32Array(P)),E&&this.pickBuffer.updateData(new Float32Array(X))}},{key:"loadTexture",value:function(){var s=this;this.canvas?Or(this.gl,this.canvas,function(h){s.texture=h},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),o}(xo),Si=function(m){function o(c){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c))}return _n(o,m),on(o,[{key:"initialize",value:function(s){var h=this;this.children&&this.children.forEach(function(f){f.map=h.map,f.setWebglLayer(h.getWebglLayer()),f.commonInitialize&&f.commonInitialize(s),f.initialize&&f.initialize(s),f.onOptionsChanged(f.getOptions()),f.onDataChanged(f.getData()),f.onChanged(f.getOptions(),f.getData())})}},{key:"isRequestAnimation",value:function(){if(this.autoUpdate!==void 0)return tc(o.prototype.__proto__||nn(o.prototype),"isRequestAnimation",this).call(this);for(var s=!1,h=0;h<this.children.length;h++)if(this.children[h].isRequestAnimation()){s=!0;break}return s}},{key:"render",value:function(s){this.children&&this.children.forEach(function(h){h.render(s)})}}]),o}(Ad),Td=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.preHeightMapper={},c.preColorMapper={},c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return vi(tc(o.prototype.__proto__||nn(o.prototype),"getDefaultOptions",this).call(this),{style:"grid",gridSize:500,gridGap:5,height:function(){return 1e3},color:function(){return"rgb(200, 200, 20)"}})}},{key:"generateGrid",value:function(s,h){var f=h.gridSize,x=[],g={};h=s.length;for(var _=this.getPointOffset(),L=0;L<h;L++){var F=this.normizedPoint(s[L].geometry.coordinates);F=~~((F[0]+_[0])/f)+"_"+~~((F[1]+_[1])/f),g[F]===void 0&&(g[F]=0);var M=~~s[L].count||1;"properties"in s[L]&&"count"in s[L].properties&&(M=~~s[L].properties.count),g[F]+=M}return Fa(g).forEach(function(E){var P=E.split("_");x.push([P[0]*f+f/2,P[1]*f+f/2,g[E]])}),x}},{key:"onChanged",value:function(s,h){h=this.processData(h),tc(o.prototype.__proto__||nn(o.prototype),"onChanged",this).call(this,s,h)}},{key:"getGridDataRange",value:function(){var s=this.gridData,h=void 0,f=void 0;s[0]&&(h=s[0][2],f=s[0][2]);for(var x=s.length,g=0;g<x;g++){var _=s[g];h=Math.max(_[2],h),f=Math.min(_[2],f)}return{max:h/2,min:f}}},{key:"processData",value:function(s){var h=this.getOptions(),f=h.gridSize,x=[];if(h.style==="normal")for(var g=this.getPointOffset(),_=0;_<s.length;_++){var L=this.normizedPoint(s[_].geometry.coordinates),F=L[0]+g[0];L=L[1]+g[1];var M=~~s[_].count||1;"properties"in s[_]&&"count"in s[_].properties&&(M=~~s[_].properties.count);var E=s[_].color;"properties"in s[_]&&"color"in s[_].properties&&(E=~~s[_].properties.color),x.push([F,L,M,E])}else x=this.generateGrid(s,h);for(s=[],this._preHeightMapper={},this._preColorMapper={},g=0;g<x.length;g++)_=x[g],_[0]=_[0],_[1]=_[1],F=_[2],h.height&&(F=typeof h.height=="function"?h.height({count:_[2],coordinates:[_[0],_[1]]}):h.height),L=f/2-h.gridGap,M=_[3],h.color&&(M=typeof h.color=="function"?h.color({count:_[2],color:_[3]}):Ne(M||h.color).unitArray()),E="p"+_[0]+_[1],s.push({geometry:{type:"Polygon",coordinates:[[[_[0]-L,_[1]-L],[_[0]-L,_[1]+L],[_[0]+L,_[1]+L],[_[0]+L,_[1]-L]]]},color:M,origin:_,count:_[2],preHeight:this.preHeightMapper[E],preColor:this.preColorMapper[E],height:F}),this._preHeightMapper[E]=F,this._preColorMapper[E]=M;return this.preHeightMapper=this._preHeightMapper,this.preColorMapper=this._preColorMapper,this.gridData=s}}]),o}(Rf),Tp=function(m){function o(c){qr(this,o);var s=Fn(this,(o.__proto__||nn(o)).call(this,c));return s.gridLayer=new Td(c),s.options.textOptions=vi({show:!1,flat:!0,unit:"m",fontSize:100,collides:!1},c.textOptions||{}),s.textLayer=new Sd(s.options.textOptions),s.children=[s.gridLayer,s.textLayer],s}return _n(o,m),on(o,[{key:"setData",value:function(s){this.gridLayer.setData(s),this.options.textOptions.show&&this.setTextData()}},{key:"setTextData",value:function(){var s=this.gridLayer.gridData.map(function(h){return{geometry:{type:"Point",coordinates:[h.origin[0],h.origin[1],h.height+5]},properties:{text:h.count}}});this.textLayer.setData(s)}},{key:"setOptions",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},h=this.options.textOptions;vi(this.options,s),this.gridLayer.setOptions(this.options),s.textOptions&&(this.options.textOptions.show&&this.setTextData(),this.options.textOptions=vi(h||{},s.textOptions),this.textLayer.setOptions(this.options.textOptions))}},{key:"getData",value:function(){return this.gridLayer.getData()}},{key:"render",value:function(s){this.gridLayer.render(s),this.options.textOptions.show&&this.textLayer.render(s)}}]),o}(Si),m0=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.gridLayer=new Tp(c.getGridOptions()),c.children=[c.gridLayer],c.options.riseTime&&(c.autoUpdate=!0),c}return _n(o,m),on(o,[{key:"onDataChanged",value:function(s){this.gridLayer.setData(s)}},{key:"getGridOptions",value:function(){var s=this.getOptions(),h=s.max,f=s.min;h===void 0&&(f=this.gridLayer.getGridDataRange(),h=f.max,f=f.min);var x=new ro({max:h,min:f,gradient:s.gradient,maxSize:s.maxHeight,minSize:s.minHeight});return s.height=function(g){var _=x.getSize(g.count);return"properties"in g&&"count"in g.properties&&(_=x.getSize(g.properties.count)),_},s.color=function(g){var _=x.getImageData(g.count);return"properties"in g&&"count"in g.properties&&(_=x.getImageData(g.properties.count)),[_[0]/255,_[1]/255,_[2]/255,_[3]/255]},s}},{key:"onOptionsChanged",value:function(s){this.gridLayer.setOptions(this.getGridOptions())}},{key:"getDefaultOptions",value:function(){return{style:"grid",gridSize:500,maxHeight:8e3,minHeight:200,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}}}}]),o}(Si),Tv=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.bufferData=[],c}return _n(o,m),on(o,[{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.program=new ui(this.gl,{vertexShader:`uniform mat4 u_matrix;attribute vec3 aPos;attribute vec4 aColor;varying vec4 vColor;
#if defined(DASH)
varying vec3 vPos;
#endif
void main(){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=u_matrix*vec4(aPos,1.0);
#if defined(DASH)
vPos=aPos;
#endif
}`,fragmentShader:`precision highp float;varying vec4 vColor;varying vec3 vPos;void main(){
#if defined(DASH)
if(mod(vPos.x,3.0)<1.5){discard;}
#endif
gl_FragColor=vColor;}`,defines:h.useDash?["DASH"]:""},this),this.buffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new la({gl:s,program:this.program,attributes:[{stride:28,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:28,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12}]})}},{key:"destroy",value:function(){this.data=this.vertexArray=this.program=this.buffer=this.bufferData=null}},{key:"onChanged",value:function(s,h){var f=this;if(this.gl){var x=[],g=function(P,O){if(P)for(var B=0;B<P.length-1;B++){var X=f.normizedPoint(P[B]);x.push(X[0]),x.push(X[1]),x.push(X[2]),x.push(O[0],O[1],O[2],O[3]),X=f.normizedPoint(P[B+1]),x.push(X[0]),x.push(X[1]),x.push(X[2]),x.push(O[0],O[1],O[2],O[3])}};s=s.color;for(var _=0;_<h.length;_++){var L=this.getProperty("color",s,h[_]);L=this.normizedColor(L);var F=h[_].geometry,M=F.coordinates;if(F.type==="MultiPolygon"){if(M)for(F=0;F<M.length;F++)g(M[F][0],L)}else if(F.type==="Polygon")M&&g(M[0],L);else if(F.type==="MultiLineString"){if(M)for(F=0;F<M.length;F++)g(M[F],L)}else g(M,L)}this.bufferData=x,this.buffer.updateData(new Float32Array(x))}}},{key:"render",value:function(s){var h=s.gl;if(s=s.matrix,this.bufferData&&!(0>=this.bufferData.length)){var f=this.program;f.use(h),this.vertexArray.bind(),f.setUniforms({u_matrix:s}),s=this.getOptions(),this.setGLState({blend:!0,blendFunc:s.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],blendEquation:h.FUNC_ADD}),h.drawArrays(h.LINES,0,this.bufferData.length/7)}}}]),o}(xo),Iv=sd.f("species"),dh=Ye(function(m){m.exports={default:Iv,__esModule:!0}});At(dh);var Of=typeof Wt!="undefined"?Wt:typeof self!="undefined"?self:typeof window!="undefined"?window:{},Lu=[],Zs=[],Ip=typeof Uint8Array!="undefined"?Uint8Array:Array,Df=!1,Ag={}.toString,Id=Array.isArray||function(m){return Ag.call(m)=="[object Array]"};Ir.TYPED_ARRAY_SUPPORT=Of.TYPED_ARRAY_SUPPORT!==void 0?Of.TYPED_ARRAY_SUPPORT:!0,Ir.poolSize=8192,Ir._augment=function(m){return m.__proto__=Ir.prototype,m},Ir.from=function(m,o,c){return Hc(null,m,o,c)},Ir.TYPED_ARRAY_SUPPORT&&(Ir.prototype.__proto__=Uint8Array.prototype,Ir.__proto__=Uint8Array),Ir.alloc=function(m,o,c){return Hd(m),m=0>=m?Jl(null,m):o!==void 0?typeof c=="string"?Jl(null,m).fill(o,c):Jl(null,m).fill(o):Jl(null,m),m},Ir.allocUnsafe=function(m){return Jh(null,m)},Ir.allocUnsafeSlow=function(m){return Jh(null,m)},Ir.isBuffer=function(m){return m!=null&&(!!m._isBuffer||Wg(m)||typeof m.readFloatLE=="function"&&typeof m.slice=="function"&&Wg(m.slice(0,0)))},Ir.compare=function(m,o){if(!pc(m)||!pc(o))throw new TypeError("Arguments must be Buffers");if(m===o)return 0;for(var c=m.length,s=o.length,h=0,f=Math.min(c,s);h<f;++h)if(m[h]!==o[h]){c=m[h],s=o[h];break}return c<s?-1:s<c?1:0},Ir.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ir.concat=function(m,o){if(!Id(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return Ir.alloc(0);var c;if(o===void 0)for(c=o=0;c<m.length;++c)o+=m[c].length;o=Ir.allocUnsafe(o);var s=0;for(c=0;c<m.length;++c){var h=m[c];if(!pc(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(o,s),s+=h.length}return o},Ir.byteLength=s0,Ir.prototype._isBuffer=!0,Ir.prototype.swap16=function(){var m=this.length;if(m%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<m;o+=2)$a(this,o,o+1);return this},Ir.prototype.swap32=function(){var m=this.length;if(m%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<m;o+=4)$a(this,o,o+3),$a(this,o+1,o+2);return this},Ir.prototype.swap64=function(){var m=this.length;if(m%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<m;o+=8)$a(this,o,o+7),$a(this,o+1,o+6),$a(this,o+2,o+5),$a(this,o+3,o+4);return this},Ir.prototype.toString=function(){var m=this.length|0;return m===0?"":arguments.length===0?jg(this,0,m):Zp.apply(this,arguments)},Ir.prototype.equals=function(m){if(!pc(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:Ir.compare(this,m)===0},Ir.prototype.inspect=function(){var m="";return 0<this.length&&(m=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(m+=" ... ")),"<Buffer "+m+">"},Ir.prototype.compare=function(m,o,c,s,h){if(!pc(m))throw new TypeError("Argument must be a Buffer");if(o===void 0&&(o=0),c===void 0&&(c=m?m.length:0),s===void 0&&(s=0),h===void 0&&(h=this.length),0>o||c>m.length||0>s||h>this.length)throw new RangeError("out of range index");if(s>=h&&o>=c)return 0;if(s>=h)return-1;if(o>=c)return 1;if(o>>>=0,c>>>=0,s>>>=0,h>>>=0,this===m)return 0;var f=h-s,x=c-o,g=Math.min(f,x);for(s=this.slice(s,h),m=m.slice(o,c),o=0;o<g;++o)if(s[o]!==m[o]){f=s[o],x=m[o];break}return f<x?-1:x<f?1:0},Ir.prototype.includes=function(m,o,c){return this.indexOf(m,o,c)!==-1},Ir.prototype.indexOf=function(m,o,c){return ev(this,m,o,c,!0)},Ir.prototype.lastIndexOf=function(m,o,c){return ev(this,m,o,c,!1)},Ir.prototype.write=function(m,o,c,s){if(o===void 0)s="utf8",c=this.length,o=0;else if(c===void 0&&typeof o=="string")s=o,c=this.length,o=0;else if(isFinite(o))o|=0,isFinite(c)?(c|=0,s===void 0&&(s="utf8")):(s=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var h=this.length-o;if((c===void 0||c>h)&&(c=h),0<m.length&&(0>c||0>o)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(s||(s="utf8"),h=!1;;)switch(s){case"hex":e:{if(o=Number(o)||0,s=this.length-o,c?(c=Number(c),c>s&&(c=s)):c=s,s=m.length,s%2!=0)throw new TypeError("Invalid hex string");for(c>s/2&&(c=s/2),s=0;s<c;++s){if(h=parseInt(m.substr(2*s,2),16),isNaN(h)){m=s;break e}this[o+s]=h}m=s}return m;case"utf8":case"utf-8":return Gd(Kp(m,this.length-o),this,o,c);case"ascii":return Gd(Gc(m),this,o,c);case"latin1":case"binary":return Gd(Gc(m),this,o,c);case"base64":return Gd(Vg(m),this,o,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":s=m,h=this.length-o;for(var f=[],x=0;x<s.length&&!(0>(h-=2));++x){var g=s.charCodeAt(x);m=g>>8,g%=256,f.push(g),f.push(m)}return Gd(f,this,o,c);default:if(h)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),h=!0}},Ir.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ff=4096;Ir.prototype.slice=function(m,o){var c=this.length;if(m=~~m,o=o===void 0?c:~~o,0>m?(m+=c,0>m&&(m=0)):m>c&&(m=c),0>o?(o+=c,0>o&&(o=0)):o>c&&(o=c),o<m&&(o=m),Ir.TYPED_ARRAY_SUPPORT)o=this.subarray(m,o),o.__proto__=Ir.prototype;else{c=o-m,o=new Ir(c,void 0);for(var s=0;s<c;++s)o[s]=this[s+m]}return o},Ir.prototype.readUIntLE=function(m,o,c){m|=0,o|=0,c||ls(m,o,this.length),c=this[m];for(var s=1,h=0;++h<o&&(s*=256);)c+=this[m+h]*s;return c},Ir.prototype.readUIntBE=function(m,o,c){m|=0,o|=0,c||ls(m,o,this.length),c=this[m+--o];for(var s=1;0<o&&(s*=256);)c+=this[m+--o]*s;return c},Ir.prototype.readUInt8=function(m,o){return o||ls(m,1,this.length),this[m]},Ir.prototype.readUInt16LE=function(m,o){return o||ls(m,2,this.length),this[m]|this[m+1]<<8},Ir.prototype.readUInt16BE=function(m,o){return o||ls(m,2,this.length),this[m]<<8|this[m+1]},Ir.prototype.readUInt32LE=function(m,o){return o||ls(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+16777216*this[m+3]},Ir.prototype.readUInt32BE=function(m,o){return o||ls(m,4,this.length),16777216*this[m]+(this[m+1]<<16|this[m+2]<<8|this[m+3])},Ir.prototype.readIntLE=function(m,o,c){m|=0,o|=0,c||ls(m,o,this.length),c=this[m];for(var s=1,h=0;++h<o&&(s*=256);)c+=this[m+h]*s;return c>=128*s&&(c-=Math.pow(2,8*o)),c},Ir.prototype.readIntBE=function(m,o,c){m|=0,o|=0,c||ls(m,o,this.length),c=o;for(var s=1,h=this[m+--c];0<c&&(s*=256);)h+=this[m+--c]*s;return h>=128*s&&(h-=Math.pow(2,8*o)),h},Ir.prototype.readInt8=function(m,o){return o||ls(m,1,this.length),this[m]&128?-1*(255-this[m]+1):this[m]},Ir.prototype.readInt16LE=function(m,o){return o||ls(m,2,this.length),m=this[m]|this[m+1]<<8,m&32768?m|4294901760:m},Ir.prototype.readInt16BE=function(m,o){return o||ls(m,2,this.length),m=this[m+1]|this[m]<<8,m&32768?m|4294901760:m},Ir.prototype.readInt32LE=function(m,o){return o||ls(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},Ir.prototype.readInt32BE=function(m,o){return o||ls(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},Ir.prototype.readFloatLE=function(m,o){return o||ls(m,4,this.length),Tr(this,m,!0,23,4)},Ir.prototype.readFloatBE=function(m,o){return o||ls(m,4,this.length),Tr(this,m,!1,23,4)},Ir.prototype.readDoubleLE=function(m,o){return o||ls(m,8,this.length),Tr(this,m,!0,52,8)},Ir.prototype.readDoubleBE=function(m,o){return o||ls(m,8,this.length),Tr(this,m,!1,52,8)},Ir.prototype.writeUIntLE=function(m,o,c,s){m=+m,o|=0,c|=0,s||hl(this,m,o,c,Math.pow(2,8*c)-1,0),s=1;var h=0;for(this[o]=m&255;++h<c&&(s*=256);)this[o+h]=m/s&255;return o+c},Ir.prototype.writeUIntBE=function(m,o,c,s){m=+m,o|=0,c|=0,s||hl(this,m,o,c,Math.pow(2,8*c)-1,0),s=c-1;var h=1;for(this[o+s]=m&255;0<=--s&&(h*=256);)this[o+s]=m/h&255;return o+c},Ir.prototype.writeUInt8=function(m,o,c){return m=+m,o|=0,c||hl(this,m,o,1,255,0),Ir.TYPED_ARRAY_SUPPORT||(m=Math.floor(m)),this[o]=m&255,o+1},Ir.prototype.writeUInt16LE=function(m,o,c){return m=+m,o|=0,c||hl(this,m,o,2,65535,0),Ir.TYPED_ARRAY_SUPPORT?(this[o]=m&255,this[o+1]=m>>>8):va(this,m,o,!0),o+2},Ir.prototype.writeUInt16BE=function(m,o,c){return m=+m,o|=0,c||hl(this,m,o,2,65535,0),Ir.TYPED_ARRAY_SUPPORT?(this[o]=m>>>8,this[o+1]=m&255):va(this,m,o,!1),o+2},Ir.prototype.writeUInt32LE=function(m,o,c){return m=+m,o|=0,c||hl(this,m,o,4,4294967295,0),Ir.TYPED_ARRAY_SUPPORT?(this[o+3]=m>>>24,this[o+2]=m>>>16,this[o+1]=m>>>8,this[o]=m&255):Ho(this,m,o,!0),o+4},Ir.prototype.writeUInt32BE=function(m,o,c){return m=+m,o|=0,c||hl(this,m,o,4,4294967295,0),Ir.TYPED_ARRAY_SUPPORT?(this[o]=m>>>24,this[o+1]=m>>>16,this[o+2]=m>>>8,this[o+3]=m&255):Ho(this,m,o,!1),o+4},Ir.prototype.writeIntLE=function(m,o,c,s){m=+m,o|=0,s||(s=Math.pow(2,8*c-1),hl(this,m,o,c,s-1,-s)),s=0;var h=1,f=0;for(this[o]=m&255;++s<c&&(h*=256);)0>m&&f===0&&this[o+s-1]!==0&&(f=1),this[o+s]=(m/h>>0)-f&255;return o+c},Ir.prototype.writeIntBE=function(m,o,c,s){m=+m,o|=0,s||(s=Math.pow(2,8*c-1),hl(this,m,o,c,s-1,-s)),s=c-1;var h=1,f=0;for(this[o+s]=m&255;0<=--s&&(h*=256);)0>m&&f===0&&this[o+s+1]!==0&&(f=1),this[o+s]=(m/h>>0)-f&255;return o+c},Ir.prototype.writeInt8=function(m,o,c){return m=+m,o|=0,c||hl(this,m,o,1,127,-128),Ir.TYPED_ARRAY_SUPPORT||(m=Math.floor(m)),0>m&&(m=255+m+1),this[o]=m&255,o+1},Ir.prototype.writeInt16LE=function(m,o,c){return m=+m,o|=0,c||hl(this,m,o,2,32767,-32768),Ir.TYPED_ARRAY_SUPPORT?(this[o]=m&255,this[o+1]=m>>>8):va(this,m,o,!0),o+2},Ir.prototype.writeInt16BE=function(m,o,c){return m=+m,o|=0,c||hl(this,m,o,2,32767,-32768),Ir.TYPED_ARRAY_SUPPORT?(this[o]=m>>>8,this[o+1]=m&255):va(this,m,o,!1),o+2},Ir.prototype.writeInt32LE=function(m,o,c){return m=+m,o|=0,c||hl(this,m,o,4,2147483647,-2147483648),Ir.TYPED_ARRAY_SUPPORT?(this[o]=m&255,this[o+1]=m>>>8,this[o+2]=m>>>16,this[o+3]=m>>>24):Ho(this,m,o,!0),o+4},Ir.prototype.writeInt32BE=function(m,o,c){return m=+m,o|=0,c||hl(this,m,o,4,2147483647,-2147483648),0>m&&(m=4294967295+m+1),Ir.TYPED_ARRAY_SUPPORT?(this[o]=m>>>24,this[o+1]=m>>>16,this[o+2]=m>>>8,this[o+3]=m&255):Ho(this,m,o,!1),o+4},Ir.prototype.writeFloatLE=function(m,o,c){return nv(this,m,o,!0,c)},Ir.prototype.writeFloatBE=function(m,o,c){return nv(this,m,o,!1,c)},Ir.prototype.writeDoubleLE=function(m,o,c){return iv(this,m,o,!0,c)},Ir.prototype.writeDoubleBE=function(m,o,c){return iv(this,m,o,!1,c)},Ir.prototype.copy=function(m,o,c,s){if(c||(c=0),s||s===0||(s=this.length),o>=m.length&&(o=m.length),o||(o=0),0<s&&s<c&&(s=c),s===c||m.length===0||this.length===0)return 0;if(0>o)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>s)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),m.length-o<s-c&&(s=m.length-o+c);var h=s-c;if(this===m&&c<o&&o<s)for(s=h-1;0<=s;--s)m[s+o]=this[s+c];else if(1e3>h||!Ir.TYPED_ARRAY_SUPPORT)for(s=0;s<h;++s)m[s+o]=this[s+c];else Uint8Array.prototype.set.call(m,this.subarray(c,c+h),o);return h},Ir.prototype.fill=function(m,o,c,s){if(typeof m=="string"){if(typeof o=="string"?(s=o,o=0,c=this.length):typeof c=="string"&&(s=c,c=this.length),m.length===1){var h=m.charCodeAt(0);256>h&&(m=h)}if(s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!Ir.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else typeof m=="number"&&(m&=255);if(0>o||this.length<o||this.length<c)throw new RangeError("Out of range index");if(c<=o)return this;if(o>>>=0,c=c===void 0?this.length:c>>>0,m||(m=0),typeof m=="number")for(s=o;s<c;++s)this[s]=m;else for(m=pc(m)?m:Kp(new Ir(m,s).toString()),h=m.length,s=0;s<c-o;++s)this[s+o]=m[s%h];return this};var Ev=/[^+\/0-9A-Za-z-_]/g,Cl={normal:null,road:jc()},Lc=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.initData(),c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:"rgba(25, 25, 250, 1)",offset:0,blend:"normal",width:4,unit:"px",flat:!1,antialias:!1,style:"normal",dashArray:[0,0],dashOffset:0,polygonOffset:[0,0]}}},{key:"initData",value:function(){this.dataMgr={position:[],prev:[],next:[],direction:[],color:[],index:[],counter:[],uv:[]}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions(),f=[];h.enablePicked&&f.push("PICK"),Cl[h.style]&&(this.isUseTexture=!0,f.push("USE_TEXTURE")),this.program=new ui(this.gl,{vertexShader:`precision highp float;uniform vec4 uSelectedColor;uniform mat4 uMatrix;uniform bool uFlat;uniform bool uUnitPx;uniform vec2 uDashArray;uniform float thickness;uniform float zoomUnits;uniform float devicePixelRatio;uniform float uOffset;attribute vec3 position;attribute vec3 next;attribute vec3 previous;attribute float direction;attribute vec4 aColor;attribute float aDistance;attribute float aTotalDistance;
#if defined(USE_TEXTURE)
attribute vec2 uv;
#endif
varying vec4 vColor;varying vec2 vNormal;varying vec2 vUV;varying vec2 vDashArray;varying float vTotalDistance;varying float vCounter;vec2 project(vec4 coord){vec3 screen=coord.xyz/coord.w;vec2 clip=(screen.xy+1.0)/2.0;return clip*MAPV_resolution;}vec4 unproject(vec2 projected,float z,float w){vec2 clip=projected/MAPV_resolution;vec2 screen=clip*2.0-1.0;return vec4(screen*w,z,w);}vec3 getNormalAndWidth(vec2 currentScreen,vec2 previousScreen,vec2 nextScreen,float thickness){vec2 dir=vec2(0.0);if(currentScreen==previousScreen){dir=normalize(nextScreen-currentScreen);}else if(currentScreen==nextScreen){dir=normalize(currentScreen-previousScreen);}else{vec2 dirA=normalize((currentScreen-previousScreen));vec2 dirB=normalize((nextScreen-currentScreen));vec2 tangent=normalize(dirA+dirB);vec2 perp=vec2(-dirA.y,dirA.x);vec2 miter=vec2(-tangent.y,tangent.x);dir=tangent;float angle=40.0;if(dot(dirA,dirB)>cos(radians(angle))){thickness=thickness/dot(miter,perp);}}vec2 normal=vec2(-dir.y,dir.x);return vec3(normal,thickness);}void main(){vColor=aColor;vCounter=aDistance/aTotalDistance;vDashArray=uDashArray/aTotalDistance;if(uUnitPx){vDashArray*=zoomUnits;}vTotalDistance=aTotalDistance;
#if defined(USE_TEXTURE)
vUV=uv;
#endif
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
if(uFlat){float width=thickness;if(uUnitPx){width*=zoomUnits;}vec3 nw=getNormalAndWidth(position.xy,previous.xy,next.xy,width);width=nw.z;vec2 normal=nw.xy;vNormal=normal*direction;normal*=width/2.0;float offsetXy=uOffset;float offsetHeight=uOffset/100.0;if(uUnitPx){offsetXy/=zoomUnits;offsetHeight*=zoomUnits;}gl_Position=uMatrix*vec4(position.xy+normal*(direction+offsetXy),position.z+offsetHeight,1.0);}else{vec4 previousProjected=uMatrix*vec4(previous,1.0);vec4 currentProjected=uMatrix*vec4(position,1.0);vec4 nextProjected=uMatrix*vec4(next,1.0);vec2 currentScreen=project(currentProjected);vec2 previousScreen=project(previousProjected);vec2 nextScreen=project(nextProjected);float width=thickness*devicePixelRatio;if(!uUnitPx){width/=zoomUnits;}vec3 nw=getNormalAndWidth(currentScreen,previousScreen,nextScreen,width);width=nw.z;vec2 normal=nw.xy;vNormal=normal*direction;normal*=width/2.0;vec2 pos=currentScreen+normal*direction;vec4 finalPos=unproject(pos,currentProjected.z,currentProjected.w);gl_Position=finalPos;}}`,fragmentShader:`precision highp float;varying vec4 vColor;varying vec2 vNormal;varying vec2 vUV;varying vec2 vDashArray;varying float vCounter;varying float vTotalDistance;uniform bool uAntialias;uniform float uDashOffset;uniform float zoomUnits;uniform float thickness;
#if defined(USE_TEXTURE)
uniform float uTextureMargin;uniform sampler2D textureImage;
#endif
void main(){vec4 color=vColor;if(uAntialias){float blur=1.0;blur=1.0-smoothstep(0.8,1.0,length(vNormal));color.a*=blur;}
#if defined(USE_TEXTURE)
float segLen=uTextureMargin*zoomUnits;float textureLen=thickness*zoomUnits;float deltaX=mod(vUV.x,segLen);float middle=segLen/2.0;if(deltaX>=middle&&deltaX<=middle+textureLen){float uvx=(deltaX-middle)/textureLen;vec4 texture=texture2D(textureImage,vec2(uvx,vUV.y));color=texture.a>=0.5 ? texture : color;}
#endif
if(vDashArray.y>0.0){float offset=uDashOffset*zoomUnits/vTotalDistance;color.a*=(1.0-step(vDashArray.x,mod(vCounter+offset,vDashArray.x+vDashArray.y)));}gl_FragColor=color;}`,defines:f},this),this.prevBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.currentBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.nextBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.directionBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.counterBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),f=[{stride:12,name:"previous",buffer:this.prevBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"position",buffer:this.currentBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"next",buffer:this.nextBuffer,size:3,type:"FLOAT",offset:0},{stride:4,name:"direction",buffer:this.directionBuffer,size:1,type:"FLOAT",offset:0},{stride:16,name:"aColor",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0},{stride:8,name:"aDistance",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:0},{stride:8,name:"aTotalDistance",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:4}],f=f.concat(this.getCommonAttributes()),Cl[h.style]&&(f.push({stride:8,name:"uv",buffer:this.uvBuffer,size:2,type:"FLOAT",offset:0}),this.setOptions({texture:Cl[h.style]}),this.loadTexture()),this.vertexArray=new la({gl:s,program:this.program,attributes:f})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.options=this.data=this.dataMgr=this.indexBuffer=this.uvBuffer=this.counterBuffer=this.directionBuffer=this.colorBuffer=this.nextBuffer=this.currentBuffer=this.prevBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){var f=this;if(this.gl){this.initData();for(var x=s.color,g=[],_=0;_<h.length;_++){var L=[],F=h[_].geometry.coordinates;F&&0<F.length&&(L=h[_].geometry.type==="MultiPolygon"?F.reduce(function(P,O){return P.concat(O)})[0].map(function(P){return f.normizedPoint(P)}):h[_].geometry.type==="Polygon"||h[_].geometry.type==="MultiLineString"?F[0].map(function(P){return f.normizedPoint(P)}):F.map(function(P){return f.normizedPoint(P)})),F=this.getProperty("color",x,h[_]),F=this.getProperty("lineColor",x,h[_]),F=this.normizedColor(F);for(var M=this.addMultipleCoords(L),E=0;E<M.length;E++)this.processData(this.dataMgr,M[E],F);if(s.enablePicked)for(F=this.indexToRgb(_),M=0;M<L.length;M++)g.push(F[0]/255,F[1]/255,F[2]/255),g.push(F[0]/255,F[1]/255,F[2]/255),s.repeat&&(g.push(F[0]/255,F[1]/255,F[2]/255),g.push(F[0]/255,F[1]/255,F[2]/255),g.push(F[0]/255,F[1]/255,F[2]/255),g.push(F[0]/255,F[1]/255,F[2]/255))}this.counterBuffer.updateData(new Float32Array(this.dataMgr.counter)),this.currentBuffer.updateData(new Float32Array(this.dataMgr.position)),this.prevBuffer.updateData(new Float32Array(this.dataMgr.prev)),this.nextBuffer.updateData(new Float32Array(this.dataMgr.next)),this.directionBuffer.updateData(new Float32Array(this.dataMgr.direction)),this.colorBuffer.updateData(new Float32Array(this.dataMgr.color)),this.indexBuffer.updateData(new Uint32Array(this.dataMgr.index)),this.isUseTexture&&this.uvBuffer.updateData(new Float32Array(this.dataMgr.uv)),s.enablePicked&&this.pickBuffer.updateData(new Float32Array(g))}}},{key:"processData",value:function(s,h,f){var x,g,_,L,F,M,E,P,O=h.length,B=s.position.length/6,X=Jp(h),W=X.arr,U=X.total;X=Il(W.map(function(Se){return[Se,U]})),W=W.map(function(Se){return[Se,0,Se,1]});var q=Il(h.map(function(Se){return-1}),!0),he=Il(h),ge=Il(h.map(Zf(-1))),_e=Il(h.map(Zf(1)));h=Il(h.map(function(Se){return f})),O=jd(O,B),(x=s.uv).push.apply(x,Vi(Hu(W))),(g=s.counter).push.apply(g,Vi(Hu(X))),(_=s.position).push.apply(_,Vi(Hu(he))),(L=s.prev).push.apply(L,Vi(Hu(ge))),(F=s.next).push.apply(F,Vi(Hu(_e))),(M=s.direction).push.apply(M,Vi(q)),(E=s.color).push.apply(E,Vi(Hu(h))),(P=s.index).push.apply(P,Vi(O))}},{key:"render",value:function(s){var h=s.gl,f=s.matrix,x=this.dataMgr;if(x&&!(0>=x.index.length)&&this.map){var g=this.getOptions(),_=this.program;_.use(h),s=vi(this.getCommonUniforms(s),{uMatrix:f,uFlat:g.flat,uUnitPx:g.unit==="px",zoomUnits:this.map.getZoomUnits(),devicePixelRatio:window.devicePixelRatio,thickness:g.width,uDashArray:g.dashArray,uDashOffset:g.dashOffset,uAntialias:g.antialias,uOffset:g.offset}),this.isUseTexture&&(s=vi(s,{uTextureMargin:140,textureImage:this.texture})),_.setUniforms(s),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:g.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:g.polygonOffset}),this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,x.index.length,h.UNSIGNED_INT,0)}}},{key:"loadTexture",value:function(s){var h=this,f=this.getOptions();f.texture?Or(this.gl,f.texture,function(x,g){h.image=g,h.texture=x,s&&s(),h.webglLayer.render()}):(this.image=this.texture=null,s&&s())}}]),o}(xo),xm=function(){function m(o){qr(this,m),this.join=o.join||"miter",this.cap=o.cap||"butt",this.thickness=o.thickness||4,this.miterLimit=o.miterLimit||2*this.thickness,this.dash=o.dash||!1,this.complex={positions:[],indices:[],normals:[],colors:[],uvs:[],startIndex:0,maxDistance:0},this._lastFlip=-1,this._started=!1,this._normal=null,this._totalDistance=0}return on(m,[{key:"extrude",value:function(c,s,h,f){var x=this.complex;if(1>=c.length)return x;this._lastFlip=-1,this._started=!1,this._normal=null,this._totalDistance=0;for(var g=c.length,_=x.startIndex,L=null,F=1;F<g;F++){var M=L||c[F-1],E=c[F],P=F<g-1?c[F+1]:null;P&&E[0]===P[0]&&E[1]===P[1]&&E[2]===P[2]?L=M:(M=this._segment(x,_,M,E,P,s,h,f),M!==-1&&(_+=M,L=null))}return this.dash&&(x.maxDistance=Math.max(this._totalDistance,x.maxDistance)),x.startIndex=x.positions.length/7,x}},{key:"_segment",value:function(c,s,h,f,x,g,_,L){var F=0,M=ni.create(),E=ni.create(),P=ni.create(),O=ni.create(),B=c.indices,X=c.positions,W=c.normals,U=c.colors;c=c.uvs;var q=this.cap==="square",he=this.cap==="round",ge=this.join==="bevel",_e=this.join==="round",Se=[f[0],f[1]],$e=[h[0],h[1]];Fo(E,Se,$e);var Be=0;if(this.dash&&(Be=this._calcDistance(Se,$e),this._totalDistance+=Be),this._normal||(this._normal=ni.create(),Go(this._normal,E)),!this._started)if(this._started=!0,q){$e=ni.create();var lt=ni.create();ni.add($e,this._normal,E),ni.sub(lt,this._normal,E),W.push(lt[0],lt[1],0),W.push($e[0],$e[1],0),X.push(h[0],h[1],h[2],this._totalDistance-Be,g,_,0),X.push(h[0],h[1],h[2],this._totalDistance-Be,-g,_,0),c.push(this._totalDistance-Be,0,this._totalDistance-Be,1),U.push(L[0],L[1],L[2],L[3]),U.push(L[0],L[1],L[2],L[3])}else if(he){$e=ni.fromValues(-E[0],-E[1]),lt=ni.create(),ni.sub(lt,this._normal,E),ni.normalize(lt,lt);var kt=ni.create();ni.add(kt,this._normal,E),ni.normalize(kt,kt);var cr=ni.fromValues(this._normal[0],this._normal[1]),Ur=ni.fromValues(-this._normal[0],-this._normal[1]);for(W.push($e[0],$e[1],0),W.push(lt[0],lt[1],0),W.push(-kt[0],-kt[1],0),W.push(cr[0],cr[1],0),W.push(Ur[0],Ur[1],0),$e=0;5>$e;$e++)X.push(h[0],h[1],h[2],this._totalDistance-Be,g,_,0),c.push(this._totalDistance-Be,0),U.push(L[0],L[1],L[2],L[3]);B.push(s+0,s+2,s+1,s+1,s+2,s+3,s+3,s+2,s+4),F+=3,s+=3}else this._extrusions(X,W,c,U,h,this._normal,g,this._totalDistance-Be,_,L);if(B.push.apply(B,Vi(this._lastFlip===-1?[s+0,s+1,s+2]:[s+1,s+0,s+2])),x)Fo(P,[x[0],x[1]],Se),ni.create(),ni.add(O,E,P),ni.normalize(O,O),Be=ni.fromValues(-O[1],O[0]),E=ni.fromValues(-E[1],E[0]),E=[g/ni.dot(Be,E),Be],E=Hi(E,2),Be=E[0],E=E[1],O=0<ni.dot(O,this._normal)?-1:1,ge||this.join!=="miter"||Math.abs(Be)>this.miterLimit&&(ge=!0),ge?(_e=Math.min(2*g,Math.abs(Be)),W.push(this._normal[0],this._normal[1],0),W.push(E[0],E[1],0),X.push(f[0],f[1],f[2],this._totalDistance,g*O,_,0),X.push(f[0],f[1],f[2],this._totalDistance,-_e*O,_,0),B.push.apply(B,Vi(this._lastFlip===-O?[s+2,s+1,s+3]:[s+0,s+2,s+3])),Go(M,P),ni.copy(this._normal,M),W.push(this._normal[0],this._normal[1],0),X.push(f[0],f[1],f[2],this._totalDistance,g*O,_,0),B.push.apply(B,Vi(O===1?[s+2,s+3,s+4]:[s+3,s+2,s+4])),this._flipedUV(c,this._totalDistance,O,!0),U.push(L[0],L[1],L[2],L[3]),U.push(L[0],L[1],L[2],L[3]),U.push(L[0],L[1],L[2],L[3]),F+=3):_e?(_e=Math.min(2*g,Math.abs(Be)),W.push(this._normal[0],this._normal[1],0),W.push(E[0],E[1],0),W.push(E[0],E[1],0),X.push(f[0],f[1],f[2],this._totalDistance,g*O,_,0),X.push(f[0],f[1],f[2],this._totalDistance,g*O,_,0),X.push(f[0],f[1],f[2],this._totalDistance,-_e*O,_,0),B.push.apply(B,Vi(this._lastFlip===-O?[s+2,s+1,s+4,s+2,s+4,s+3]:[s+0,s+2,s+4,s+2,s+3,s+4])),Go(M,P),ni.copy(this._normal,M),W.push(this._normal[0],this._normal[1],0),X.push(f[0],f[1],f[2],this._totalDistance,g*O,_,0),B.push.apply(B,Vi(O===1?[s+4,s+3,s+5]:[s+3,s+4,s+5])),this._flipedUV(c,this._totalDistance,O,!1),U.push(L[0],L[1],L[2],L[3]),U.push(L[0],L[1],L[2],L[3]),U.push(L[0],L[1],L[2],L[3]),U.push(L[0],L[1],L[2],L[3]),F+=4):(this._extrusions(X,W,c,U,f,E,Be,this._totalDistance,_,L),B.push.apply(B,Vi(this._lastFlip===-1?[s+2,s+1,s+3]:[s+2,s+0,s+3])),O=-1,ni.copy(this._normal,E),F+=2),this._lastFlip=O;else if(Go(this._normal,E),q?(M=ni.create(),P=ni.create(),ni.add(M,E,this._normal),ni.sub(P,E,this._normal),W.push(M[0],M[1],0),W.push(P[0],P[1],0),X.push(f[0],f[1],f[2],this._totalDistance,g,_,0),X.push(f[0],f[1],f[2],this._totalDistance,g,_,0),c.push(this._totalDistance,0,this._totalDistance,1),U.push(L[0],L[1],L[2],L[3]),U.push(L[0],L[1],L[2],L[3])):this._extrusions(X,W,c,U,f,this._normal,g,this._totalDistance,_,L),B.push.apply(B,Vi(this._lastFlip===-1?[s+2,s+1,s+3]:[s+2,s+0,s+3])),F+=2,he){for(M=ni.create(),ni.add(M,E,this._normal),ni.normalize(M,M),P=ni.create(),ni.sub(P,E,this._normal),ni.normalize(P,P),_e=ni.fromValues(E[0],E[1]),W.push(M[0],M[1],0),W.push(P[0],P[1],0),W.push(_e[0],_e[1],0),W=0;3>W;W++)X.push(f[0],f[1],f[2],this._totalDistance-Be,g,_,0),c.push(this._totalDistance-Be,0),U.push(L[0],L[1],L[2],L[3]);B.push(s+2,s+3,s+4,s+4,s+3,s+5,s+4,s+5,s+6),F+=3}return F}},{key:"_extrusions",value:function(c,s,h,f,x,g,_,L,F,M){s.push(g[0],g[1],0),s.push(g[0],g[1],0),c.push(x[0],x[1],x[2],L,_,F,0),c.push(x[0],x[1],x[2],L,-_,F,0),h.push(L,0,L,1),f.push(M[0],M[1],M[2],M[3]),f.push(M[0],M[1],M[2],M[3])}},{key:"_calcDistance",value:function(c,s){return Math.sqrt(Math.pow(c[0]-s[0],2)+Math.pow(c[1]-s[1],2))}},{key:"_flipedUV",value:function(c,s,h,f){f?h===-1?c.push(s,0,s,1,s,0):c.push(s,1,s,0,s,1):h===-1?c.push(s,0,s,0,s,1,s,0):c.push(s,1,s,1,s,0,s,1)}}]),m}(),Ep={normal:null,road:jc,arrow:function(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},c=o.width;o=o.color;var s=Xg(),h=s.canvas;return s=s.ctx,s.save(),s.moveTo(5,0),s.lineTo(32,16),s.lineTo(5,32),s.strokeStyle=o||"#fff",s.lineWidth=c||8,s.stroke(),s.restore(),h}},bv=function(m){function o(c,s){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c,s))}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{style:"normal",styleOptions:{},color:"rgba(25, 25, 250, 1)",blend:"normal",lineJoin:"miter",lineCap:"butt",unit:"px",width:4,offset:0,antialias:!1,dashArray:[0,0],dashOffset:0,animation:!1,interval:.1,duration:2,trailLength:.5,minZoom:2,maxZoom:25,polygonOffset:[0,0],depthTest:!0,depthWrite:!0}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions(),f=[];h.enablePicked&&f.push("PICK"),Ep[h.style]&&(this.isUseTexture=!0,this.prevStyle=h.style,this.prevStyleOptions=h.styleOptions,f.push("USE_TEXTURE")),h.animation===!0&&(this.isAnimateLine=!0,this.date=new Date,this.autoUpdate=!0,f.push("USE_LINE_ANIMATION")),h.useDash===!0&&f.push("USE_SIMPLE_DASH"),this.program=new ui(this.gl,{vertexShader:`precision highp float;uniform vec4 uSelectedColor;uniform mat4 u_matrix;uniform vec2 u_dash_array;uniform float u_zoom_units;uniform float u_zIndex;uniform bool u_unit_px;attribute vec4 a_color;attribute vec3 a_position;attribute vec3 a_normal;attribute float a_distance;attribute float a_total_distance;attribute float a_width;attribute float a_offset;
#if defined(USE_TEXTURE)
attribute vec2 uv;
#endif
varying vec4 v_color;varying vec2 v_normal;varying vec2 v_uv;varying vec2 v_dash_array;varying float v_total_distance;varying float v_counter;varying float v_width;
#if defined(USE_SIMPLE_DASH)
varying vec3 v_position;
#endif
void main(){v_width=a_width;v_color=a_color;v_counter=a_distance/a_total_distance;v_dash_array=u_dash_array/a_total_distance;if(u_unit_px){v_dash_array*=u_zoom_units;}v_total_distance=a_total_distance;v_normal=vec2(normalize(a_normal.xy)*sign(a_width));
#if defined(USE_TEXTURE)
v_uv=uv;
#endif
#if defined(PICK)
if(mapvIsPicked()){v_color=uSelectedColor;}
#endif
vec2 extrude=a_normal.xy*a_width/2.0;if(u_unit_px){extrude*=u_zoom_units;}vec2 offsetXY=a_normal.xy*-a_offset;float offsetZ=a_offset/100.0+u_zIndex;if(u_unit_px){offsetXY*=u_zoom_units;offsetZ*=u_zoom_units;}
#if defined(USE_SIMPLE_DASH)
v_position=a_position;
#endif
gl_Position=u_matrix*vec4(a_position.xy+extrude+offsetXY,a_position.z+offsetZ,1.0);}`,fragmentShader:`precision highp float;varying vec4 v_color;varying vec2 v_normal;varying vec2 v_uv;varying vec2 v_dash_array;varying float v_counter;varying float v_total_distance;varying float v_width;
#if defined(USE_SIMPLE_DASH)
varying vec3 v_position;
#endif
uniform bool u_antialias;uniform float u_dash_offset;uniform float u_zoom_units;
#if defined(USE_LINE_ANIMATION)
uniform bool u_animate;uniform float u_time;uniform float u_duration;uniform float u_interval;uniform float u_trail_length;
#endif
#if defined(USE_TEXTURE)
uniform float u_texture_width;uniform float u_texture_margin;uniform sampler2D u_sampler;
#endif
void main(){vec4 color=v_color;
#if defined(USE_SIMPLE_DASH)
if(mod(v_position.x,5.0)<3.0){discard;}
#endif
if(u_antialias){float blur=1.0;blur=1.0-smoothstep(0.9,1.0,length(v_normal));color.a*=blur;}
#if defined(USE_LINE_ANIMATION)
if(u_animate){float alpha=1.0-fract(mod(1.0-v_counter,u_interval)*(1.0/u_interval)+u_time/u_duration);alpha=(alpha+u_trail_length-1.0)/u_trail_length;color.a*=alpha;gl_FragColor=color;return;}
#endif
#if defined(USE_TEXTURE)
float margin_width=u_texture_margin*u_zoom_units;float margin_width_half=margin_width/2.0;float texture_width=u_texture_width*u_zoom_units;float delta=mod(v_uv.x,texture_width+margin_width);if(delta>=margin_width_half&&delta<=margin_width_half+texture_width){float uvx=(delta-margin_width_half)/texture_width;vec4 texture=texture2D(u_sampler,vec2(uvx,v_uv.y));color=texture.a>=0.5 ? texture : color;}
#endif
if(v_dash_array.y>0.0){float offset=u_dash_offset*u_zoom_units/v_total_distance;color.a*=(1.0-step(v_dash_array.x,mod(v_counter+offset,v_dash_array.x+v_dash_array.y)));}gl_FragColor=color;}`,defines:f},this),this.positionBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.normalBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),f=[{stride:28,name:"a_position",buffer:this.positionBuffer,size:3,type:"FLOAT",offset:0},{stride:28,name:"a_distance",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:12},{stride:28,name:"a_width",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:16},{stride:28,name:"a_offset",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:20},{stride:28,name:"a_total_distance",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:24},{stride:12,name:"a_normal",buffer:this.normalBuffer,size:3,type:"FLOAT",offset:0},{stride:16,name:"a_color",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0}],f=f.concat(this.getCommonAttributes()),this.isUseTexture&&(this.uvBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),f.push({stride:8,name:"uv",buffer:this.uvBuffer,size:2,type:"FLOAT",offset:0}),h=(0,Ep[h.style])(h.styleOptions),this.setOptions({texture:h}),this.loadTexture()),this.vertexArray=new la({gl:s,program:this.program,attributes:f})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.isUseTexture&&(this.uvBuffer=null),this.options=this.data=this.indexBuffer=this.normalBuffer=this.colorBuffer=this.positionBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){var f=this,x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};if(this.gl)if(!this.isUseTexture||this.prevStyle===s.style&&ti(this.prevStyleOptions)===ti(s.styleOptions))this.parseData(s,h,x);else{this.prevStyle=s.style,this.prevStyleOptions=s.styleOptions;var g=(0,Ep[s.style])(s.styleOptions);this.setOptions({texture:g}),this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){f.loadTexture(function(){f.parseData(s,h,x)})},0)}}},{key:"parseData",value:function(s,h,f){var x=this,g=s.dashArray,_=s.width,L=s.color,F=s.offset;g=!!this.isUseTexture||!!g[1]||!!this.isAnimateLine;for(var M=new xm({dash:g,cap:s.lineCap,join:s.lineJoin,miterLimit:s.miterLimit,thickness:_}),E=[],P=function(X){var W=h[X].geometry.coordinates;W&&0<W.length&&(h[X].geometry.type==="MultiPolygon"?W=W.reduce(function(Se,$e){return Se.concat($e)}):h[X].geometry.type==="LineString"&&(W=[W]),W=W.map(function(Se){return Se=Se.map(function($e){return x.normizedPoint($e)}),f.closePath===!0&&Se[0].toString()!==Se[Se.length-1].toString()&&Se.push(Se[0]),Se}));var U=x.getProperty("color",L,h[X]);U=x.normizedColor(U);var q=x.getProperty("width",_,h[X]);q=Number(q);var he=x.getProperty("offset",F,h[X]);he=Number(he);var ge=M.complex.startIndex;W=x.addMultipleCoords(W);for(var _e=0;_e<W.length;_e++)W[_e].forEach(function(Se){M.extrude(Se,q,he,U)});if(s.enablePicked)for(X=x.indexToRgb(X),W=M.complex.startIndex;ge<W;ge++)E.push(X[0]/255,X[1]/255,X[2]/255),s.repeat&&(E.push(X[0]/255,X[1]/255,X[2]/255),E.push(X[0]/255,X[1]/255,X[2]/255))},O=0;O<h.length;O++)P(O);if(P=M.complex,g)for(O=0;O<P.positions.length/7;O++)P.positions[7*O+6]=P.maxDistance;this.lineData=P,this.positionBuffer.updateData(new Float32Array(P.positions)),this.normalBuffer.updateData(new Float32Array(P.normals)),this.colorBuffer.updateData(new Float32Array(P.colors)),this.indexBuffer.updateData(new Uint32Array(P.indices)),this.isUseTexture&&this.uvBuffer.updateData(new Float32Array(P.uvs)),s.enablePicked&&this.pickBuffer.updateData(new Float32Array(E))}},{key:"render",value:function(s){var h=s.gl,f=s.matrix,x=this.lineData;if(x&&!(0>=x.indices.length)&&this.map){var g=this.getOptions(),_=this.program;_.use(h),s=vi(this.getCommonUniforms(s),{u_matrix:f,u_zoom_units:this.map.getZoomUnits(),u_dash_array:g.dashArray,u_dash_offset:g.dashOffset,u_antialias:g.antialias,u_unit_px:g.unit==="px",u_zIndex:g.zIndex}),this.isUseTexture&&(s=vi(s,{u_texture_width:g.width,u_texture_margin:140,u_sampler:this.texture})),this.isAnimateLine&&(f=this.map.getZoom(),s=vi(s,{u_time:(new Date-this.date)/1e3,u_animate:!!(f>=g.minZoom&&f<=g.maxZoom&&this.autoUpdate),u_duration:g.duration,u_interval:g.interval,u_trail_length:g.trailLength})),_.setUniforms(s),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:g.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:g.polygonOffset,depthTest:g.depthTest,depthMask:g.depthWrite}),this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,x.indices.length,h.UNSIGNED_INT,0)}}},{key:"loadTexture",value:function(s){var h=this,f=this.getOptions();f.texture?Or(this.gl,f.texture,function(x,g){h.image=g,h.texture=x,s&&s(),h.webglLayer.render()}):(this.image=this.texture=null,s&&s())}}]),o}(xo),j=function(){function m(o,c){qr(this,m),this.layer=o,this.gl=c,this.initData()}return on(m,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]},this.maxLength=0}},{key:"getData",value:function(){return this.outWall3d}},{key:"getMaxDataLength",value:function(){return this.maxLength}},{key:"onLayerChange",value:function(c,s){this.initData();var h=c.color,f=c.height,x=c.gradient;c=this.gl;for(var g=0;g<s.length;g++){var _=s[g].geometry.coordinates,L=_.length;this.maxLength=L>this.maxLength?L:this.maxLength;for(var F=[],M=0;M<L;M++){var E=this.layer.normizedPoint(_[M]);F.push(E)}L=s[g].color||h,"properties"in s[g]&&"color"in s[g].properties&&(L=s[g].properties.color),x||Object.prototype.toString.call(L)!=="[object Function]"||(L=L(s[g])),_=this.layer.normizedColor(x?x[0]:L),L=this.layer.normizedColor(x?x[1]:L),M=s[g].height||f,"properties"in s[g]&&"height"in s[g].properties&&(M=s[g].properties.height),Object.prototype.toString.call(M)==="[object Function]"&&(M=M(s[g])),this.processData(this.outWall3d,F,_,L,M)}for(s=0;s<this.outWall3d.vertex.length;s++){for(h=[],f=this.outWall3d.vertex[s].length,x=0;x<f;x++)h.push.apply(h,Vi(this.outWall3d.vertex[s][x]));f=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,f),c.bufferData(c.ARRAY_BUFFER,new Float32Array(h),c.STATIC_DRAW),this.outWall3d.vertexBuffer[s]=f,c.bindBuffer(c.ARRAY_BUFFER,null),f=c.createBuffer(),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,f),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[s]),c.STATIC_DRAW),this.outWall3d.indexBuffer[s]=f,c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(c,s,h,f,x){var g=c.vertex[c.vertex.length-1],_=c.index[c.index.length-1],L=s.length;(!_||65536<=_.length+2*L+2)&&(g=[],_=[],c.vertex.push(g),c.index.push(_)),(c=g.length)&&_.push(c-1,c);for(var F=c=0;F<L;F++){var M=[],E=[],P=s[F];M.push(P[0],P[1]),M.push(P[2]?Number(P[2])+x:x),M.push(P[3]?Number(P[3]):F),M.push(c),M.push(h[0],h[1],h[2],h[3]),E.push(P[0],P[1]),E.push(P[2]?Number(P[2]):0),E.push(P[3]?Number(P[3]):F),E.push(c),E.push(f[0],f[1],f[2],f[3]),P=g.length,g.push(M,E),_.push(P,P+1),F<L-1&&(c+=this.getDistance(s[F],s[F+1]))}}},{key:"getDistance",value:function(c,s){return Math.sqrt(Math.pow(Math.abs(c[0]-s[0]),2)+Math.pow(Math.abs(c[1]-s[1]),2))}}]),m}(),J=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.startTime=c.options.startTime||0,c.endTime=c.options.endTime,c.time=c.startTime,c.autoUpdate=!0,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{height:100,color:[1,1,1,1],trailLength:3,step:.1}}},{key:"initialize",value:function(s){this.gl=s,this.dataMgr=new j(this,this.gl),this.program=new ui(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;attribute vec4 aPos;attribute float aDistance;attribute vec4 aColor;varying vec4 vColor;varying float vHeight;varying float vTime;varying float vDistance;void main(){vTime=1.0-((currentTime-aPos.w)/trailLength);vHeight=aPos.z;vColor=aColor;vDistance=aDistance;gl_Position=u_matrix*vec4(aPos.xyz,1.0);}",fragmentShader:"precision highp float;varying vec4 vColor;varying float vTime;varying float vDistance;varying float vHeight;uniform float currentTime;void main(){if(vTime>1.0||vTime<0.0){}float radius=2.5;float distance=vDistance+currentTime*20.0;float modDistance=mod(distance,9.0);float alpha=1.0;if(modDistance>radius*2.0){discard;}else{float x=abs(modDistance-radius);float y=abs(vHeight-radius);float dis=sqrt(pow(x,2.0)+pow(y,2.0));if(dis>radius){discard;}alpha=dis/radius;}gl_FragColor=vec4(vColor.rgb,1.0-alpha);}"})}},{key:"onChanged",value:function(s,h){this.gl&&(this.dataMgr.onLayerChange(s,h),s.endTime===void 0&&(this.endTime=this.dataMgr.getMaxDataLength()))}},{key:"render",value:function(s){var h=s.gl,f=s.matrix;if((s=this.dataMgr.getData())&&!(0>=s.vertex.length)){var x=this.getOptions(),g=this.program;for(h.useProgram(g.program),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA]}),h.enableVertexAttribArray(g.attributes.aPos),h.enableVertexAttribArray(g.attributes.aDistance),h.enableVertexAttribArray(g.attributes.aColor),h.uniformMatrix4fv(g.uniforms.u_matrix,!1,f),h.uniform1f(g.uniforms.currentTime,this.time),h.uniform1f(g.uniforms.trailLength,x.trailLength),f=0;f<s.vertex.length;f++)if(!(0>=s.vertex[f].length)){var _=s.vertex[f],L=new Float32Array(_[0]).BYTES_PER_ELEMENT;_=L*_[0].length,h.bindBuffer(h.ARRAY_BUFFER,s.vertexBuffer[f]),h.vertexAttribPointer(g.attributes.aPos,4,h.FLOAT,!1,_,0),h.vertexAttribPointer(g.attributes.aDistance,1,h.FLOAT,!1,_,4*L),h.vertexAttribPointer(g.attributes.aColor,4,h.FLOAT,!1,_,5*L),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,s.indexBuffer[f]),h.drawElements(h.TRIANGLE_STRIP,s.index[f].length,h.UNSIGNED_SHORT,0),h.bindBuffer(h.ARRAY_BUFFER,null),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null)}this.time+=x.step,this.time>this.endTime&&(this.time=this.startTime)}}}]),o}(xo),$=function(o,c,s,h){if(!(o instanceof c)||h!==void 0&&h in o)throw TypeError(s+": incorrect invocation!");return o},V=Ye(function(m){var o={},c={};m=m.exports=function(s,h,f,x,g){g=g?function(){return s}:ff(s),f=Bs(f,x,h?2:1),x=0;var _,L;if(typeof g!="function")throw TypeError(s+" is not iterable!");if(g===void 0||Rs.Array!==g&&Pl[Ws]!==g){for(x=g.call(s);!(L=x.next()).done;)if(g=_u(x,f,L.value,h),g===o||g===c)return g}else for(_=Xd(s.length);_>x;x++)if(g=h?f(Ha(L=s[x])[0],L[1]):f(s[x]),g===o||g===c)return g},m.BREAK=o,m.RETURN=c}),H=Ea("species"),te=function(o,c){o=Ha(o).constructor;var s;return o===void 0||(s=Ha(o)[H])==null?c:ed(s)},ie=function(o,c,s){var h=s===void 0;switch(c.length){case 0:return h?o():o.call(s);case 1:return h?o(c[0]):o.call(s,c[0]);case 2:return h?o(c[0],c[1]):o.call(s,c[0],c[1]);case 3:return h?o(c[0],c[1],c[2]):o.call(s,c[0],c[1],c[2]);case 4:return h?o(c[0],c[1],c[2],c[3]):o.call(s,c[0],c[1],c[2],c[3])}return o.apply(s,c)},le=Mi.process,ue=Mi.setImmediate,we=Mi.clearImmediate,Pe=Mi.MessageChannel,Re=Mi.Dispatch,Ue=0,Ke={},it=function(){var o=+this;if(Ke.hasOwnProperty(o)){var c=Ke[o];delete Ke[o],c()}},ut=function(o){it.call(o.data)};if(!ue||!we)if(ue=function(o){for(var c=[],s=1;arguments.length>s;)c.push(arguments[s++]);return Ke[++Ue]=function(){ie(typeof o=="function"?o:Function(o),c)},rt(Ue),Ue},we=function(o){delete Ke[o]},mc(le)=="process")var rt=function(o){le.nextTick(Bs(it,o,1))};else if(Re&&Re.now)rt=function(o){Re.now(Bs(it,o,1))};else if(Pe){var Ct=new Pe,yt=Ct.port2;Ct.port1.onmessage=ut,rt=Bs(yt.postMessage,yt,1)}else Mi.addEventListener&&typeof postMessage=="function"&&!Mi.importScripts?(rt=function(o){Mi.postMessage(o+"","*")},Mi.addEventListener("message",ut,!1)):rt="onreadystatechange"in(Zd?jo.createElement("script"):{})?function(m){od.appendChild(Zd?jo.createElement("script"):{}).onreadystatechange=function(){od.removeChild(this),it.call(m)}}:function(m){setTimeout(Bs(it,m,1),0)};var Kt=ue,ar=Mi.MutationObserver||Mi.WebKitMutationObserver,er=Mi.process,Yt=Mi.Promise,sr=mc(er)=="process",jt={f:function(o){return new l0(o)}},gr=function(o){try{return{e:!1,v:o()}}catch(c){return{e:!0,v:c}}},ir=Mi.navigator,Pr=ir&&ir.userAgent||"",Yr=function(o,c){if(Ha(o),zs(c)&&c.constructor===o)return c;o=jt.f(o);var s=o.resolve;return s(c),o.promise},qt=function(o,c,s){for(var h in c)s&&o[h]?o[h]=c[h]:pu(o,h,c[h]);return o},xr=Ea("species"),cn=function(o){o=typeof ra[o]=="function"?ra[o]:Mi[o],so&&o&&!o[xr]&&Us.f(o,xr,{configurable:!0,get:function(){return this}})},Cn=function(){var m,o,c=function(){var _;for(sr&&(_=er.domain)&&_.exit();m;){var L=m.fn;m=m.next;try{L()}catch(F){throw m?s():o=void 0,F}}o=void 0,_&&_.enter()};if(sr)var s=function(){er.nextTick(c)};else if(!ar||Mi.navigator&&Mi.navigator.standalone)if(Yt&&Yt.resolve){var h=Yt.resolve(void 0);s=function(){h.then(c)}}else s=function(){Kt.call(Mi,c)};else{var f=!0,x=document.createTextNode("");new ar(c).observe(x,{characterData:!0}),s=function(){x.data=f=!f}}return function(g){g={fn:g,next:void 0},o&&(o.next=g),m||(m=g,s()),o=g}}(),Gn=Mi.TypeError,Wr=Mi.process,Jn=Wr&&Wr.versions,jn=Jn&&Jn.v8||"",Xn=Mi.Promise,Wi=Tc(Wr)=="process",Ai=function(){},Oi,Ji=Oi=jt.f,En=!!function(){try{var m=Xn.resolve(1),o=(m.constructor={})[Ea("species")]=function(c){c(Ai,Ai)};return(Wi||typeof PromiseRejectionEvent=="function")&&m.then(Ai)instanceof o&&jn.indexOf("6.6")!==0&&Pr.indexOf("Chrome/66")===-1}catch(c){}}(),$i=function(o){var c;return zs(o)&&typeof(c=o.then)=="function"?c:!1},no=function(o,c){if(!o._n){o._n=!0;var s=o._c;Cn(function(){for(var h=o._v,f=o._s==1,x=0;s.length>x;){var g=void 0,_=void 0,L=void 0,F=s[x++],M=f?F.ok:F.fail,E=F.resolve,P=F.reject,O=F.domain;try{M?(f||(o._h==2&&ua(o),o._h=1),M===!0?L=h:(O&&O.enter(),L=M(h),O&&(O.exit(),g=!0)),L===F.promise?P(Gn("Promise-chain cycle")):(_=$i(L))?_.call(L,E,P):E(L)):P(h)}catch(B){O&&!g&&O.exit(),P(B)}}o._c=[],o._n=!1,c&&!o._h&&Ao(o)})}},Ao=function(o){Kt.call(Mi,function(){var c=o._v,s=o._h!==1&&(o._a||o._c).length===0,h,f;if(s){var x=gr(function(){Wi?Wr.emit("unhandledRejection",c,o):(h=Mi.onunhandledrejection)?h({promise:o,reason:c}):(f=Mi.console)&&f.error&&f.error("Unhandled promise rejection",c)});o._h=Wi||o._h!==1&&(o._a||o._c).length===0?2:1}if(o._a=void 0,s&&x.e)throw x.v})},ua=function(o){Kt.call(Mi,function(){var c;Wi?Wr.emit("rejectionHandled",o):(c=Mi.onrejectionhandled)&&c({promise:o,reason:o._v})})},ji=function(o){var c=this;c._d||(c._d=!0,c=c._w||c,c._v=o,c._s=2,c._a||(c._a=c._c.slice()),no(c,!0))},ii=function m(o){var c=this,s;if(!c._d){c._d=!0,c=c._w||c;try{if(c===o)throw Gn("Promise can't be resolved itself");(s=$i(o))?Cn(function(){var h={_w:c,_d:!1};try{s.call(o,Bs(m,h,1),Bs(ji,h,1))}catch(f){ji.call(h,f)}}):(c._v=o,c._s=1,no(c,!1))}catch(h){ji.call({_w:c,_d:!1},h)}}};if(!En){Xn=function(o){$(this,Xn,"Promise","_h"),ed(o),Ti.call(this);try{o(Bs(ii,this,1),Bs(ji,this,1))}catch(c){ji.call(this,c)}};var Ti=function(o){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1};Ti.prototype=qt(Xn.prototype,{then:function(o,c){var s=Ji(te(this,Xn));return s.ok=typeof o=="function"?o:!0,s.fail=typeof c=="function"&&c,s.domain=Wi?Wr.domain:void 0,this._c.push(s),this._a&&this._a.push(s),this._s&&no(this,!1),s.promise},catch:function(o){return this.then(void 0,o)}});var Co=function(){var o=new Ti;this.promise=o,this.resolve=Bs(ii,o,1),this.reject=Bs(ji,o,1)};jt.f=Ji=function(o){return o===Xn||o===wo?new Co(o):Oi(o)}}Xr(Xr.G+Xr.W+Xr.F*!En,{Promise:Xn}),Cc(Xn,"Promise"),cn("Promise");var wo=ra.Promise;Xr(Xr.S+Xr.F*!En,"Promise",{reject:function(o){var c=Ji(this),s=c.reject;return s(o),c.promise}}),Xr(Xr.S+1*Xr.F,"Promise",{resolve:function(o){return Yr(this===wo?Xn:this,o)}}),Xr(Xr.S+Xr.F*!(En&&yo(function(m){Xn.all(m).catch(Ai)})),"Promise",{all:function(o){var c=this,s=Ji(c),h=s.resolve,f=s.reject,x=gr(function(){var g=[],_=0,L=1;V(o,!1,function(F){var M=_++,E=!1;g.push(void 0),L++,c.resolve(F).then(function(P){E||(E=!0,g[M]=P,--L||h(g))},f)}),--L||h(g)});return x.e&&f(x.v),s.promise},race:function(o){var c=this,s=Ji(c),h=s.reject,f=gr(function(){V(o,!1,function(x){c.resolve(x).then(s.resolve,h)})});return f.e&&h(f.v),s.promise}}),Xr(Xr.P+Xr.R,"Promise",{finally:function(o){var c=te(this,ra.Promise||Mi.Promise),s=typeof o=="function";return this.then(s?function(h){return Yr(c,o()).then(function(){return h})}:o,s?function(h){return Yr(c,o()).then(function(){throw h})}:o)}}),Xr(Xr.S,"Promise",{try:function(o){var c=jt.f(this);return o=gr(o),(o.e?c.reject:c.resolve)(o.v),c.promise}});var Po=ra.Promise,_o=Ye(function(m){m.exports={default:Po,__esModule:!0}}),Ii=At(_o),qn=function(o,c){if(!zs(o)||o._t!==c)throw TypeError("Incompatible receiver, "+c+" required!");return o},Di=Us.f,Vn=ld.fastKey,Yn=so?"_s":"size",fn=function(o,c){var s=Vn(c);if(s!=="F")return o._i[s];for(o=o._f;o;o=o.n)if(o.k==c)return o},Vo={getConstructor:function(o,c,s,h){var f=o(function(x,g){$(x,f,c,"_i"),x._t=c,x._i=vu(null),x._f=void 0,x._l=void 0,x[Yn]=0,g!=null&&V(g,s,x[h],x)});return qt(f.prototype,{clear:function(){for(var g=qn(this,c),_=g._i,L=g._f;L;L=L.n)L.r=!0,L.p&&(L.p=L.p.n=void 0),delete _[L.i];g._f=g._l=void 0,g[Yn]=0},delete:function(g){var _=qn(this,c);if(g=fn(_,g)){var L=g.n,F=g.p;delete _._i[g.i],g.r=!0,F&&(F.n=L),L&&(L.p=F),_._f==g&&(_._f=L),_._l==g&&(_._l=F),_[Yn]--}return!!g},forEach:function(g){qn(this,c);for(var _=Bs(g,1<arguments.length?arguments[1]:void 0,3),L;L=L?L.n:this._f;)for(_(L.v,L.k,this);L&&L.r;)L=L.p},has:function(g){return!!fn(qn(this,c),g)}}),so&&Di(f.prototype,"size",{get:function(){return qn(this,c)[Yn]}}),f},def:function(o,c,s){var h=fn(o,c),f;return h?h.v=s:(o._l=h={i:f=Vn(c,!0),k:c,v:s,p:c=o._l,n:void 0,r:!1},o._f||(o._f=h),c&&(c.n=h),o[Yn]++,f!=="F"&&(o._i[f]=h)),o},getEntry:fn,setStrong:function(o,c,s){ep(o,c,function(h,f){this._t=qn(h,c),this._k=f,this._l=void 0},function(){for(var h=this._k,f=this._l;f&&f.r;)f=f.p;return this._t&&(this._l=f=f?f.n:this._t._f)?h=="keys"?dl(0,f.k):h=="values"?dl(0,f.v):dl(0,[f.k,f.v]):(this._t=void 0,dl(1))},s?"entries":"values",!s,!0),cn(c)}},rs=Ea("species"),_s=function(o,c){if(ju(o)){var s=o.constructor;typeof s!="function"||s!==Array&&!ju(s.prototype)||(s=void 0),zs(s)&&(s=s[rs],s===null&&(s=void 0))}return new(s===void 0?Array:s)(c)},ns=Us.f,Uh=function(m,o){var c=m==1,s=m==2,h=m==3,f=m==4,x=m==6,g=m==5||x,_=o||_s;return function(L,F,M){var E=Object(ql(L)),P=qf(E);F=Bs(F,M,3),M=Xd(P.length);var O=0;L=c?_(L,M):s?_(L,0):void 0;for(var B,X;M>O;O++)if((g||O in P)&&(B=P[O],X=F(B,O,E),m)){if(c)L[O]=X;else if(X)switch(m){case 3:return!0;case 5:return B;case 6:return O;case 2:L.push(B)}else if(f)return!1}return x?-1:h||f?f:L}}(0);(function(m,o,c,s,h,f){var x=Mi[m],g=x,_=h?"set":"add",L=g&&g.prototype,F={};return so&&typeof g=="function"&&(f||L.forEach&&!yc(function(){new g().entries().next()}))?(g=o(function(M,E){$(M,g,m,"_c"),M._c=new x,E!=null&&V(E,h,M[_],M)}),Uh("add clear delete forEach get has set keys values entries toJSON".split(" "),function(M){var E=M=="add"||M=="set";M in L&&(!f||M!="clear")&&pu(g.prototype,M,function(P,O){return $(this,g,M),!E&&f&&!zs(P)?M=="get"?void 0:!1:(P=this._c[M](P===0?0:P,O),E?this:P)})}),f||ns(g.prototype,"size",{get:function(){return this._c.size}})):(g=s.getConstructor(o,m,h,_),qt(g.prototype,c),ld.NEED=!0),Cc(g,m),F[m]=g,Xr(Xr.G+Xr.W+Xr.F,F),f||s.setStrong(g,m,h),g})("Map",function(m){return function(){return m(this,0<arguments.length?arguments[0]:void 0)}},{get:function(o){return(o=Vo.getEntry(qn(this,"Map"),o))&&o.v},set:function(o,c){return Vo.def(qn(this,"Map"),o===0?0:o,c)}},Vo,!0),Xr(Xr.P+Xr.R,"Map",{toJSON:function(m){return function(){if(Tc(this)!=m)throw TypeError(m+"#toJSON isn't generic");var o=[];return V(this,!1,o.push,o,void 0),o}}("Map")}),function(m){Xr(Xr.S,m,{of:function(){for(var c=arguments.length,s=Array(c);c--;)s[c]=arguments[c];return new this(s)}})}("Map"),function(m){Xr(Xr.S,m,{from:function(c,s,h){var f;if(ed(this),(f=s!==void 0)&&ed(s),c==null)return new this;var x=[];if(f){var g=0,_=Bs(s,h,2);V(c,!1,function(L){x.push(_(L,g++))})}else V(c,!1,x.push,x);return new this(x)}})}("Map");var Xi=ra.Map,wl=Ye(function(m){m.exports={default:Xi,__esModule:!0}}),gs=At(wl),Ei=Ye(function(m,o){o.__esModule=!0;var c=Ci&&Ci.__esModule?Ci:{default:Ci};o.default=function(s,h,f){return h in s?(0,c.default)(s,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):s[h]=f,s}}),ca=At(Ei),Mo,Na,ha=(Mo={},ca(Mo,1,1),ca(Mo,2,1),ca(Mo,3,1),Mo),kl=(Na={},ca(Na,1,1),ca(Na,2,1),ca(Na,3,1),Na),Ya=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.vertCount=0,c.bufferMap={},c.bufferData=[],c.autoUpdate=!0,s=c.canvas=document.createElement("canvas"),c.ctx=s.getContext("2d"),c.iconHash=new gs,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:[1,1,1,.8],speed:1,size:5,pointFade:!0,pointFadeBuffer:1,minLineLength:2,animationType:2,shapeType:2,depthTest:!1,delay:0,unit:"px",padding:0}}},{key:"initialize",value:function(s){this.gl=s,this.texture=null,this.isUseTexture=!1;var h=this.getOptions();this.updateUniformsFromOptions(h),this.program=new ui(this.gl,{vertexShader:"precision highp float;attribute vec3 aPos;attribute vec3 aNextPos;attribute float aIndex;attribute float aNextIndex;attribute float aLength;attribute float aSpeed;attribute float aDelay;attribute vec3 aUV;uniform float uSize;uniform mat4 u_matrix;uniform float uOriginSpeed;uniform float uElapsedSteps;uniform int uAnimationType;uniform int uPointFade;uniform float uPointFadeBuffer;uniform float uZoomUnits;varying float vAddOpacity;varying vec3 vUV;void main(){if(uAnimationType==1){if(abs(aIndex-mod(uElapsedSteps,aLength))>.1){gl_Position=vec4(-2.,-2.,0,1.0);return;}gl_Position=u_matrix*vec4(aPos.xyz,1.0);vAddOpacity=1.;}else if(uAnimationType==2){float lineLength=aLength-1.;float cIndex=mod(uElapsedSteps,lineLength);float rest=cIndex-aIndex;if(rest<1.&&rest>=0.){if(uPointFade==1){if(cIndex<uPointFadeBuffer){vAddOpacity=cIndex/uPointFadeBuffer;}else if(cIndex>lineLength-uPointFadeBuffer){vAddOpacity=(lineLength-cIndex)/uPointFadeBuffer;}else{vAddOpacity=1.;}}else{vAddOpacity=1.;}gl_Position=u_matrix*vec4(aPos.x+(aNextPos.x-aPos.x)*rest,aPos.y+(aNextPos.y-aPos.y)*rest,aPos.z+(aNextPos.z-aPos.z)*rest,1.0);}else{gl_Position=vec4(-2.,-2.,0,1.0);return;}}else if(uAnimationType==3){float speedRatio=aSpeed/uOriginSpeed;float percent=mod(mod(uElapsedSteps*aSpeed,aLength)/aLength-aDelay,1.0);if(percent<=aNextIndex&&percent>=aIndex){if(uPointFade==1){float fadePercent=uPointFadeBuffer*1000./aLength;if(percent<fadePercent){vAddOpacity=percent/fadePercent;}else if(percent>1.-fadePercent){vAddOpacity=(1.-percent)/fadePercent;}else{vAddOpacity=1.;}}else{vAddOpacity=1.;}float rest=(percent-aIndex)/(aNextIndex-aIndex);gl_Position=u_matrix*vec4(aPos.x+(aNextPos.x-aPos.x)*rest,aPos.y+(aNextPos.y-aPos.y)*rest,aPos.z+(aNextPos.z-aPos.z)*rest,1.0);}else{gl_Position=vec4(-2.,-2.,0,1.0);return;}}vUV=aUV;gl_PointSize=uSize/uZoomUnits;}",fragmentShader:"precision highp float;uniform vec4 uColor;uniform int ushapeType;uniform bool uUseTexture;uniform sampler2D uSampler;varying float vAddOpacity;varying vec3 vUV;void main(){if(ushapeType==2){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}gl_FragColor=vec4(uColor.rgb,uColor.a*vAddOpacity);}else if(ushapeType==3){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}gl_FragColor=vec4(uColor.rgb,uColor.a*smoothstep(1.0,0.0,d*2.)*vAddOpacity);}else{gl_FragColor=vec4(uColor.rgb,uColor.a*vAddOpacity);}if(uUseTexture){float ratio=vUV.z;vec2 uv=vUV.xy;gl_FragColor=texture2D(uSampler,vec2(gl_PointCoord.x*ratio+uv.x,1.0-(uv.y+gl_PointCoord.y*ratio)));}}"}),this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer)}},{key:"bindAttributeBufferData",value:function(s,h,f,x){var g=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,g),f=new Float32Array(f),s.bufferData(s.ARRAY_BUFFER,f,s.STATIC_DRAW),this.bufferMap[h]={buffer:g,data:f,elementSize:x}}},{key:"onChanged",value:function(s,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};this.gl&&(Array.isArray(h)||(h=[]),this.processCache(s,h,f))}},{key:"processCache",value:function(s,h,f){var x=this;this.cachedData=[];for(var g=s.icon,_=s.speed,L=0;L<h.length;L++){var F=h[L].geometry.coordinates,M=this.getProperty("icon",g,h[L]),E=this.getProperty("speed",_,h[L]),P=this.getProperty("delay",0,h[L]);F&&(this.cachedData.push({coordinates:F,icon:M,speed:E,delay:P}),this.iconHash.get(M)||this.iconHash.set(M,M))}h=dd(this.iconHash.entries()).filter(function(O){return typeof O[1]=="string"}).map(function(O){var B=Hi(O,2)[0];return new Ii(function(X,W){x.url2canvas(B,function(U){x.iconHash.set(B,U),X()})})}),Ii.all(h).then(function(O){x.buildSprite(s),f.autoRender!==!1&&x.webglLayer&&x.webglLayer.render()})}},{key:"buildSprite",value:function(s){var h=s.padding,f=this.canvas,x=this.ctx,g=0,_=[],L=new gs;if(s.icon){g=!0;var F=!1,M=void 0;try{for(var E=Os(this.iconHash),P;!(g=(P=E.next()).done);g=!0){var O=Hi(P.value,2),B=O[1];if(typeof B!="string"){var X=B.width,W=X+h;_.push({w:W,h:W,width:X,key:O[0],icon:B})}}}catch(U){F=!0,M=U}finally{try{!g&&E.return&&E.return()}finally{if(F)throw M}}for(E=dc(_),P=0;P<_.length;P++)O=_[P],L.get(O.key)||L.set(O.key,O);for(g=Math.max(Lr(E.w),Lr(E.h)),f.width=g||1,f.height=g||1,x.save(),f=0;f<_.length;f++)E=_[f],x.drawImage(E.icon,E.x+h,E.y+h,E.width,E.width);x.restore()}this.loadTexture(),this.buildVertex(s,L,g)}},{key:"buildVertex",value:function(s,h,f){var x=this.gl;this.updateUniformsFromOptions(s);for(var g=[],_=[],L=[],F=[],M=[],E=[],P=[],O=[],B=s.minLineLength,X=0;X<this.cachedData.length;X++){var W=this.cachedData[X],U=W.coordinates,q=W.icon,he=W.speed;W=W.delay;var ge=U.length,_e=[];if(!(ge<B)){for(s.icon&&(_e=(_e=h.get(q))?[_e.x/f,_e.y/f,_e.w/f]:[0,0,0]),q=0;q<ge;++q){var Se=this.normizedPoint(U[q]);g.push(Se[0]),g.push(Se[1]),g.push(Se[2]||0),O.push.apply(O,Vi(_e)),this.animationType!==3&&(_.push(q),F.push(ge))}if(this.animationType!==1){for(q=g.length-3*ge+3,_e=g.length,U=q;U<_e;++U)M.push(g[U]);if(g.splice(_e-3,3),O.splice(_e-3,3),this.animationType===2)_.pop(),F.pop();else if(this.animationType===3){for(q-=3,_e=g.length-3,U=0,ge=[],Se=q;Se<=_e;Se+=3)q=Math.sqrt(Math.pow(M[Se]-g[Se],2)+Math.pow(M[Se+1]-g[Se+1],2)+Math.pow(M[Se+2]-g[Se+2],2)),U+=q,ge.push(q);_.push(0),E.push(he),W/=U/he,P.push(W),Se=_e=0;for(var $e=ge.length-1;Se<$e;++Se)_e+=ge[Se],q=_e/U,_.push(q),L.push(q),F.push(U),E.push(he),P.push(W);L.push(1),F.push(U)}}}}this.bindAttributeBufferData(x,"aPos",g,3),this.bindAttributeBufferData(x,"aIndex",_,1),this.bindAttributeBufferData(x,"aLength",F,1),this.animationType!==1&&(this.bindAttributeBufferData(x,"aNextPos",M,3),this.animationType===3&&(this.bindAttributeBufferData(x,"aNextIndex",L,1),this.bindAttributeBufferData(x,"aSpeed",E,1),this.bindAttributeBufferData(x,"aDelay",P,1))),s.icon&&this.bindAttributeBufferData(x,"aUV",O,3),this.vertCount=g.length/3}},{key:"updateUniformsFromOptions",value:function(s){this.color=this.normizedColor(s.color),this.startTime=new Date().getTime(),ha[s.animationType]||(s.animationType=2),kl[s.shapeType]||(s.shapeType=2),(isNaN(s.minLineLength)||2>s.minLineLength)&&(s.minLineLength=2),this.animationType=s.animationType}},{key:"renderAttributeArr",value:function(s,h,f){if(h.attributes[f]!==void 0){var x=this.bufferMap[f];x&&(s.bindBuffer(s.ARRAY_BUFFER,x.buffer),s.enableVertexAttribArray(h.attributes[f]),s.vertexAttribPointer(h.attributes[f],x.elementSize,s.FLOAT,!1,x.data.BYTES_PER_ELEMENT*x.elementSize,0))}}},{key:"render",value:function(s){var h=s.gl;if(s=s.matrix,!(0>=this.vertCount)){var f=this.getOptions(),x=this.program;h.useProgram(x.program),this.renderAttributeArr(h,x,"aPos"),this.renderAttributeArr(h,x,"aIndex"),this.renderAttributeArr(h,x,"aLength"),this.animationType!==1&&(this.renderAttributeArr(h,x,"aNextPos"),this.animationType===3&&(this.renderAttributeArr(h,x,"aNextIndex"),this.renderAttributeArr(h,x,"aSpeed"),this.renderAttributeArr(h,x,"aDelay"))),f.icon&&this.texture&&(this.renderAttributeArr(h,x,"aUV"),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,this.texture),h.uniform1i(x.uniforms.uSampler,0)),h.uniform1i(x.uniforms.uUseTexture,this.isUseTexture);var g=new Date().getTime()-this.startTime;g<this.options.delay?g=0:(g-=this.options.delay,g=this.animationType===1?Math.round(g/1e3*this.options.speed*20):this.animationType===3?g/1e3*this.options.speed*1e3:g/1e3*this.options.speed);var _=this.options.size;if(Array.isArray(_)){var L=this.map.map.getMaxZoom(),F=this.map.map.getMinZoom();_=_[0]+(this.map.getZoom()-F)/(L-F)*(_[1]-_[0])}h.uniformMatrix4fv(x.uniforms.u_matrix,!1,s),h.uniform4f(x.uniforms.uColor,this.color[0],this.color[1],this.color[2],this.color[3]),h.uniform1f(x.uniforms.uSize,_),h.uniform1f(x.uniforms.uElapsedSteps,g),h.uniform1f(x.uniforms.uOriginSpeed,this.options.speed),h.uniform1i(x.uniforms.uAnimationType,this.animationType),h.uniform1i(x.uniforms.ushapeType,this.options.shapeType),h.uniform1i(x.uniforms.uPointFade,this.options.pointFade?1:0),h.uniform1f(x.uniforms.uPointFadeBuffer,this.options.pointFadeBuffer),h.uniform1f(x.uniforms.uZoomUnits,this.options.unit==="m"?this.map.getZoomUnits():1),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:f.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],depthTest:!!f.depthTest}),h.drawArrays(h.POINTS,0,this.vertCount)}}},{key:"url2canvas",value:function(s,h){if((typeof s=="undefined"?"undefined":Ta(s))==="object")h(s);else{var f=new Image;f.crossOrigin="anonymous",f.onload=function(){var x=document.createElement("canvas");x.width=128,x.height=128,x.getContext("2d").drawImage(f,0,0,128,128),h(x)},f.src=s}}},{key:"loadTexture",value:function(){var s=this;this.canvas&&this.getOptions().icon?Or(this.gl,this.canvas,function(h){s.isUseTexture=!0,s.texture=h}):(this.isUseTexture=!1,this.texture=null)}}]),o}(xo);Ya.ANIMATION_TYPE_LEAP=1,Ya.ANIMATION_TYPE_SMOOTH=2,Ya.ANIMATION_TYPE_UNIFORM_SPEED=3,Ya.SHAPE_TYPE_SQUARE=1,Ya.SHAPE_TYPE_CIRCLE=2,Ya.SHAPE_TYPE_CIRCLE_GRADIENT=3;var Hl=function(){function m(o,c){qr(this,m),this.layer=o,this.gl=c,this.initData()}return on(m,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]}}},{key:"getData",value:function(){return this.outWall3d}},{key:"onLayerChange",value:function(c,s){this.initData();for(var h=c.color,f=c.height,x=c.gradient,g=c.enablePreciseMap,_=c.repeatMap,L=this.gl,F=0;F<s.length;F++){var M=s[F],E=M.color||h;"properties"in M&&"color"in M.properties&&(E=M.properties.color),x||Object.prototype.toString.call(E)!=="[object Function]"||(E=E(M));var P=this.layer.normizedColor(x?x[0]:E);E=this.layer.normizedColor(x?x[1]:E);var O=M.height||f;if("properties"in M&&"height"in M.properties&&(O=M.properties.height),Object.prototype.toString.call(O)==="[object Function]"&&(O=O(M)),M.geometry.type==="MultiLineString"||M.geometry.type==="Polygon")for(var B=0;B<M.geometry.coordinates.length;B++){for(var X=M.geometry.coordinates[B],W=X.length,U=[],q=[],he=0,ge=0;ge<W;ge++){var _e=this.layer.normizedPoint(X[ge]);if(0<ge&&(g||_)){var Se=this.layer.normizedPoint(X[ge-1]);he+=Math.sqrt(Math.pow(_e[0]-Se[0],2)+Math.pow(_e[1]-Se[1],2))}U.push(_e),q.push(he)}this.processData(this.outWall3d,c,U,q,P,E,O)}else{for(M=M.geometry.coordinates,B=M.length,X=[],W=[],q=U=0;q<B;q++)he=this.layer.normizedPoint(M[q]),0<q&&(g||_)&&(ge=this.layer.normizedPoint(M[q-1]),U+=Math.sqrt(Math.pow(he[0]-ge[0],2)+Math.pow(he[1]-ge[1],2))),X.push(he),W.push(U);this.processData(this.outWall3d,c,X,W,P,E,O)}}for(c=0;c<this.outWall3d.vertex.length;c++){for(s=[],h=this.outWall3d.vertex[c].length,f=0;f<h;f++)s.push.apply(s,Vi(this.outWall3d.vertex[c][f]));h=L.createBuffer(),L.bindBuffer(L.ARRAY_BUFFER,h),L.bufferData(L.ARRAY_BUFFER,new Float32Array(s),L.STATIC_DRAW),this.outWall3d.vertexBuffer[c]=h,L.bindBuffer(L.ARRAY_BUFFER,null),h=L.createBuffer(),L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,h),L.bufferData(L.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[c]),L.STATIC_DRAW),this.outWall3d.indexBuffer[c]=h,L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(c,s,h,f,x,g,_){var L=f[f.length-1],F=c.vertex[c.vertex.length-1],M=c.index[c.index.length-1],E=h.length;for((!M||65536<=M.length+2*E+2)&&(F=[],M=[],c.vertex.push(F),c.index.push(M)),(c=F.length)&&M.push(c-1,c),c=0;c<E;c++){var P=[],O=[],B=h[c];P.push(B[0],B[1],B[2]+_),P.push(x[0],x[1],x[2],x[3]),O.push(B[0],B[1],B[2]),O.push(g[0],g[1],g[2],g[3]),s.texture&&(B=f[c],s.enablePreciseMap||s.repeatMap?(P.push(B,1,L),O.push(B,0,L)):(P.push(c,1,E-1),O.push(c,0,E-1))),B=F.length,F.push(P,O),M.push(B,B+1)}}}]),m}(),me=function(m){function o(c,s){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c,s))}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{texture:null,enablePreciseMap:!1,repeatMap:0,height:100,color:[1,1,1,1]}}},{key:"initialize",value:function(s){this.gl=s,this.dataMgr=new Hl(this,this.gl),this.texture=null,this.isUseTexture=!1,this.vertexLength=10,this.program=new ui(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform bool uUseTexture;attribute vec3 aPos;attribute vec4 aColor;attribute vec2 aTextureCoords;attribute float aTotalDistance;varying vec2 vTextureCoords;varying float vTotalDistance;varying vec4 vColor;void main(){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}if(uUseTexture){vTextureCoords=aTextureCoords;vTotalDistance=aTotalDistance;}gl_Position=u_matrix*vec4(aPos,1.0);}",fragmentShader:"precision highp float;uniform bool uUseTexture;uniform float uDistance;uniform sampler2D uSampler;varying vec2 vTextureCoords;varying float vTotalDistance;varying vec4 vColor;void main(){if(uUseTexture){float uvx=vTextureCoords.x/vTotalDistance;if(uDistance>0.0){uvx=mod(vTextureCoords.x,uDistance)/uDistance;}gl_FragColor=vec4(1.0,1.0,1.0,1.0)*texture2D(uSampler,vec2(uvx,vTextureCoords.y));}else{gl_FragColor=vColor;}}"}),this.loadTexture()}},{key:"onChanged",value:function(s,h){var f=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){f.loadTexture(function(){f.dataMgr.onLayerChange(s,h),f.webglLayer.render()})},0))}},{key:"render",value:function(s){var h=s.gl,f=s.matrix;if((s=this.dataMgr.getData())&&!(0>=s.vertex.length)){var x=this.getOptions(),g=this.program;if(h.useProgram(g.program),x.texture){if(!this.texture)return;h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,this.texture),h.uniform1i(g.uniforms.uSampler,0)}for(this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],depthMask:!!x.texture,depthFunc:x.texture?h.LESS:h.LEQUAL}),x.texture?h.enableVertexAttribArray(g.attributes.aTextureCoords):h.disableVertexAttribArray(g.attributes.aTextureCoords),h.enableVertexAttribArray(g.attributes.aPos),h.enableVertexAttribArray(g.attributes.aColor),h.uniformMatrix4fv(g.uniforms.u_matrix,!1,f),h.uniform1i(g.uniforms.uUseTexture,this.isUseTexture),h.uniform1f(g.uniforms.uDistance,x.repeatMap),f=0;f<s.vertex.length;f++)if(!(0>=s.vertex[f].length)){var _=s.vertex[f],L=new Float32Array(_[0]).BYTES_PER_ELEMENT;_=L*_[0].length,h.bindBuffer(h.ARRAY_BUFFER,s.vertexBuffer[f]),h.vertexAttribPointer(g.attributes.aPos,3,h.FLOAT,!1,_,0),h.vertexAttribPointer(g.attributes.aColor,4,h.FLOAT,!1,_,3*L),x.texture&&(h.vertexAttribPointer(g.attributes.aTextureCoords,2,h.FLOAT,!1,_,7*L),h.vertexAttribPointer(g.attributes.aTotalDistance,1,h.FLOAT,!1,_,9*L)),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,s.indexBuffer[f]),h.drawElements(h.TRIANGLE_STRIP,s.index[f].length,h.UNSIGNED_SHORT,0),h.bindBuffer(h.ARRAY_BUFFER,null),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null)}}}},{key:"loadTexture",value:function(s){var h=this,f=this.getOptions();f.texture?(this.isUseTexture=!0,Or(this.gl,f.texture,function(x,g){h.image=g,h.texture=x,s&&s(),h.webglLayer.render()})):(this.isUseTexture=!1,this.image=this.texture=null,s&&s())}}]),o}(xo),Za=function(){function m(o,c){qr(this,m),this.layer=o,this.gl=c,this.initData()}return on(m,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]},this.maxLength=0}},{key:"getData",value:function(){return this.outWall3d}},{key:"getMaxDataLength",value:function(){return this.maxLength}},{key:"onLayerChange",value:function(c,s){this.initData();var h=c.color,f=c.height,x=c.gradient;c=this.gl;for(var g=0;g<s.length;g++){var _=s[g].geometry.coordinates,L=_.length;this.maxLength=L>this.maxLength?L:this.maxLength;for(var F=[],M=0;M<L;M++){var E=this.layer.normizedPoint(_[M]);F.push(E)}L=s[g].color||h,"properties"in s[g]&&"color"in s[g].properties&&(L=s[g].properties.color),x||Object.prototype.toString.call(L)!=="[object Function]"||(L=L(s[g])),_=this.layer.normizedColor(x?x[0]:L),L=this.layer.normizedColor(x?x[1]:L),M=s[g].height||f,"properties"in s[g]&&"height"in s[g].properties&&(M=s[g].properties.height),Object.prototype.toString.call(M)==="[object Function]"&&(M=M(s[g])),this.processData(this.outWall3d,F,_,L,M)}for(s=0;s<this.outWall3d.vertex.length;s++){for(h=[],f=this.outWall3d.vertex[s].length,x=0;x<f;x++)h.push.apply(h,Vi(this.outWall3d.vertex[s][x]));f=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,f),c.bufferData(c.ARRAY_BUFFER,new Float32Array(h),c.STATIC_DRAW),this.outWall3d.vertexBuffer[s]=f,c.bindBuffer(c.ARRAY_BUFFER,null),f=c.createBuffer(),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,f),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[s]),c.STATIC_DRAW),this.outWall3d.indexBuffer[s]=f,c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(c,s,h,f,x){var g=c.vertex[c.vertex.length-1],_=c.index[c.index.length-1],L=s.length;for((!_||65536<=_.length+2*L+2)&&(g=[],_=[],c.vertex.push(g),c.index.push(_)),(c=g.length)&&_.push(c-1,c),c=0;c<L;c++){var F=[],M=[],E=s[c];F.push(E[0],E[1]),F.push(E[2]?Number(E[2])+x:x),F.push(E[3]?Number(E[3]):c),F.push(h[0],h[1],h[2],h[3]),M.push(E[0],E[1]),M.push(E[2]?Number(E[2]):0),M.push(E[3]?Number(E[3]):c),M.push(f[0],f[1],f[2],f[3]),E=g.length,g.push(F,M),_.push(E,E+1)}}}]),m}(),co=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.startTime=c.options.startTime||0,c.endTime=c.options.endTime,c.time=c.startTime,c.autoUpdate=!0,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{height:100,color:[1,1,1,1],trailLength:3,step:.1}}},{key:"initialize",value:function(s){this.gl=s,this.dataMgr=new Za(this,this.gl),this.program=new ui(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;attribute vec4 aPos;attribute vec4 aColor;varying vec4 vColor;varying float vTime;void main(){vTime=1.0-((currentTime-aPos.w)/trailLength);vColor=aColor;gl_Position=u_matrix*vec4(aPos.xyz,1.0);}",fragmentShader:"precision highp float;varying vec4 vColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(vColor.rgb,1.0*vTime);}"})}},{key:"onChanged",value:function(s,h){this.gl&&(this.dataMgr.onLayerChange(s,h),s.endTime===void 0&&(this.endTime=this.dataMgr.getMaxDataLength()))}},{key:"render",value:function(s){var h=s.gl,f=s.matrix;if((s=this.dataMgr.getData())&&!(0>=s.vertex.length)){var x=this.getOptions(),g=this.program;for(h.useProgram(g.program),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA]}),h.enableVertexAttribArray(g.attributes.aPos),h.enableVertexAttribArray(g.attributes.aColor),h.uniformMatrix4fv(g.uniforms.u_matrix,!1,f),h.uniform1f(g.uniforms.currentTime,this.time),h.uniform1f(g.uniforms.trailLength,x.trailLength),f=0;f<s.vertex.length;f++)if(!(0>=s.vertex[f].length)){var _=s.vertex[f],L=new Float32Array(_[0]).BYTES_PER_ELEMENT;_=L*_[0].length,h.bindBuffer(h.ARRAY_BUFFER,s.vertexBuffer[f]),h.vertexAttribPointer(g.attributes.aPos,4,h.FLOAT,!1,_,0),h.vertexAttribPointer(g.attributes.aColor,4,h.FLOAT,!1,_,4*L),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,s.indexBuffer[f]),h.drawElements(h.TRIANGLE_STRIP,s.index[f].length,h.UNSIGNED_SHORT,0),h.bindBuffer(h.ARRAY_BUFFER,null),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null)}this.time+=x.step,this.time>this.endTime&&(this.time=this.startTime)}}}]),o}(xo),xa=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.simpleLineLayer=new Tv(c.getHeatOptions()),c.children=[c.simpleLineLayer],c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{blend:"normal",gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}}}},{key:"onDataChanged",value:function(s){this.simpleLineLayer.setData(s)}},{key:"onOptionsChanged",value:function(s){this.simpleLineLayer.setOptions(this.getHeatOptions())}},{key:"getHeatOptions",value:function(){var s=this.getOptions(),h=s.max,f=s.min;h===void 0&&(f=this.getDataRange(),h=f.max,f=f.min);var x=new ro({max:h,min:f,gradient:s.gradient});return s.color=function(g){var _=~~g.count||1;return"properties"in g&&"count"in g.properties&&(_=~~g.properties.count),g=x.getImageData(_),[g[0]/255,g[1]/255,g[2]/255,g[3]/255]},s}},{key:"getDataRange",value:function(){var s=this.getData(),h=0,f=0;s[0]&&(h=~~s[0].count||1,f=~~s[0].count||1),"properties"in s[0]&&"count"in s[0].properties&&(h=~~s[0].properties.count,f=~~s[0].properties.count);for(var x=s.length,g=0;g<x;g++){var _=~~s[g].count||1;"properties"in s[g]&&"count"in s[g].properties&&(_=~~s[g].properties.count),h=Math.max(_,h),f=Math.min(_,f)}return{max:h/2,min:f}}}]),o}(Si),Zr=Ye(function(m,o){(function(c,s){m.exports=s()})(Jf,function(){function c(U,q,he,ge,_e,Se){if(!(_e-ge<=he)){var $e=ge+_e>>1;s(U,q,$e,ge,_e,Se%2),c(U,q,he,ge,$e-1,Se+1),c(U,q,he,$e+1,_e,Se+1)}}function s(U,q,he,ge,_e,Se){for(;_e>ge;){if(600<_e-ge){var $e=_e-ge+1,Be=he-ge+1,lt=Math.log($e),kt=.5*Math.exp(2*lt/3);lt=.5*Math.sqrt(lt*kt*($e-kt)/$e)*(0>Be-$e/2?-1:1),s(U,q,he,Math.max(ge,Math.floor(he-Be*kt/$e+lt)),Math.min(_e,Math.floor(he+($e-Be)*kt/$e+lt)),Se)}for($e=q[2*he+Se],Be=ge,kt=_e,h(U,q,ge,he),q[2*_e+Se]>$e&&h(U,q,ge,_e);Be<kt;){for(h(U,q,Be,kt),Be++,kt--;q[2*Be+Se]<$e;)Be++;for(;q[2*kt+Se]>$e;)kt--}q[2*ge+Se]===$e?h(U,q,ge,kt):(kt++,h(U,q,kt,_e)),kt<=he&&(ge=kt+1),he<=kt&&(_e=kt-1)}}function h(U,q,he,ge){f(U,he,ge),f(q,2*he,2*ge),f(q,2*he+1,2*ge+1)}function f(U,q,he){var ge=U[q];U[q]=U[he],U[he]=ge}function x(U,q){return U=U.geometry.coordinates,{x:U[0]/360+.5,y:L(U[1]),zoom:Infinity,index:q,parentId:-1}}function g(U){var q=U.id,he=_(U);return{type:"Feature",id:q,properties:he,geometry:{type:"Point",coordinates:[360*(U.x-.5),360*Math.atan(Math.exp((180-360*U.y)*Math.PI/180))/Math.PI-90]}}}function _(U){var q=U.numPoints,he=1e4<=q?Math.round(q/1e3)+"k":1e3<=q?Math.round(q/100)/10+"k":q;return F(F({},U.properties),{cluster:!0,cluster_id:U.id,point_count:q,point_count_abbreviated:he})}function L(U){return U=Math.sin(U*Math.PI/180),U=.5-.25*Math.log((1+U)/(1-U))/Math.PI,0>U?0:1<U?1:U}function F(U,q){for(var he in q)U[he]=q[he];return U}function M(U){return U.x}function E(U){return U.y}var P=function(q){return q[0]},O=function(q){return q[1]},B=function(q,he,ge,_e,Se){he===void 0&&(he=P),ge===void 0&&(ge=O),_e===void 0&&(_e=64),Se===void 0&&(Se=Float64Array),this.nodeSize=_e,this.points=q;var $e=this.ids=new(65536>q.length?Uint16Array:Uint32Array)(q.length);Se=this.coords=new Se(2*q.length);for(var Be=0;Be<q.length;Be++)$e[Be]=Be,Se[2*Be]=he(q[Be]),Se[2*Be+1]=ge(q[Be]);c($e,Se,_e,0,$e.length-1,0)};B.prototype.range=function(U,q,he,ge){for(var _e=this.ids,Se=this.coords,$e=this.nodeSize,Be=[0,_e.length-1,0],lt=[],kt,cr;Be.length;){var Ur=Be.pop(),Ar=Be.pop(),zr=Be.pop();if(Ar-zr<=$e)for(Ur=zr;Ur<=Ar;Ur++)kt=Se[2*Ur],cr=Se[2*Ur+1],kt>=U&&kt<=he&&cr>=q&&cr<=ge&&lt.push(_e[Ur]);else{var Gt=Math.floor((zr+Ar)/2);kt=Se[2*Gt],cr=Se[2*Gt+1],kt>=U&&kt<=he&&cr>=q&&cr<=ge&&lt.push(_e[Gt]);var Vt=(Ur+1)%2;(Ur===0?U<=kt:q<=cr)&&(Be.push(zr),Be.push(Gt-1),Be.push(Vt)),(Ur===0?he>=kt:ge>=cr)&&(Be.push(Gt+1),Be.push(Ar),Be.push(Vt))}}return lt},B.prototype.within=function(U,q,he){for(var ge=this.ids,_e=this.coords,Se=this.nodeSize,$e=[0,ge.length-1,0],Be=[],lt=he*he;$e.length;){var kt=$e.pop(),cr=$e.pop(),Ur=$e.pop();if(cr-Ur<=Se)for(kt=Ur;kt<=cr;kt++){Ur=_e[2*kt]-U;var Ar=_e[2*kt+1]-q;Ur*Ur+Ar*Ar<=lt&&Be.push(ge[kt])}else{Ar=Math.floor((Ur+cr)/2);var zr=_e[2*Ar],Gt=_e[2*Ar+1],Vt=zr-U,Pn=Gt-q;Vt*Vt+Pn*Pn<=lt&&Be.push(ge[Ar]),Vt=(kt+1)%2,(kt===0?U-he<=zr:q-he<=Gt)&&($e.push(Ur),$e.push(Ar-1),$e.push(Vt)),(kt===0?U+he>=zr:q+he>=Gt)&&($e.push(Ar+1),$e.push(cr),$e.push(Vt))}}return Be};var X={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(q){return q}},W=function(q){this.options=F(sp(X),q),this.trees=Array(this.options.maxZoom+1)};return W.prototype.load=function(U){var q=this.options,he=q.minZoom,ge=q.maxZoom;q=q.nodeSize,this.points=U;for(var _e=[],Se=0;Se<U.length;Se++)U[Se].geometry&&_e.push(x(U[Se],Se));for(this.trees[ge+1]=new B(_e,M,E,q,Float32Array),U=ge;U>=he;U--)_e=this._cluster(_e,U),this.trees[U]=new B(_e,M,E,q,Float32Array);return this},W.prototype.getClusters=function(U,q){var he=((U[0]+180)%360+360)%360-180,ge=Math.max(-90,Math.min(90,U[1])),_e=U[2]===180?180:((U[2]+180)%360+360)%360-180,Se=Math.max(-90,Math.min(90,U[3]));if(360<=U[2]-U[0])he=-180,_e=180;else if(he>_e)return he=this.getClusters([he,ge,180,Se],q),ge=this.getClusters([-180,ge,_e,Se],q),he.concat(ge);q=this.trees[this._limitZoom(q)],U=[];var $e=0;for(ge=q.range(he/360+.5,L(Se),_e/360+.5,L(ge));$e<ge.length;$e+=1)_e=q.points[ge[$e]],U.push(_e.numPoints?g(_e):this.points[_e.index]);return U},W.prototype.getChildren=function(U){var q=this._getOriginId(U),he=this._getOriginZoom(U),ge=this.trees[he];if(!ge)throw Error("No cluster with the specified id.");var _e=ge.points[q];if(!_e)throw Error("No cluster with the specified id.");q=[];var Se=0;for(he=ge.within(_e.x,_e.y,this.options.radius/(this.options.extent*Math.pow(2,he-1)));Se<he.length;Se+=1)_e=ge.points[he[Se]],_e.parentId===U&&q.push(_e.numPoints?g(_e):this.points[_e.index]);if(q.length===0)throw Error("No cluster with the specified id.");return q},W.prototype.getLeaves=function(U,q,he){var ge=[];return this._appendLeaves(ge,U,q||10,he||0,0),ge},W.prototype.getTile=function(U,q,he){var ge=this.trees[this._limitZoom(U)];U=Math.pow(2,U);var _e=this.options;_e=_e.radius/_e.extent;var Se=(he-_e)/U,$e=(he+1+_e)/U,Be={features:[]};return this._addTileFeatures(ge.range((q-_e)/U,Se,(q+1+_e)/U,$e),ge.points,q,he,U,Be),q===0&&this._addTileFeatures(ge.range(1-_e/U,Se,1,$e),ge.points,U,he,U,Be),q===U-1&&this._addTileFeatures(ge.range(0,Se,_e/U,$e),ge.points,-1,he,U,Be),Be.features.length?Be:null},W.prototype.getClusterExpansionZoom=function(U){for(var q=this._getOriginZoom(U)-1;q<=this.options.maxZoom&&(U=this.getChildren(U),q++,U.length===1);)U=U[0].properties.cluster_id;return q},W.prototype._appendLeaves=function(U,q,he,ge,_e){var Se=0;for(q=this.getChildren(q);Se<q.length;Se+=1){var $e=q[Se],Be=$e.properties;if(Be&&Be.cluster?_e=_e+Be.point_count<=ge?_e+Be.point_count:this._appendLeaves(U,Be.cluster_id,he,ge,_e):_e<ge?_e++:U.push($e),U.length===he)break}return _e},W.prototype._addTileFeatures=function(U,q,he,ge,_e,Se){for(var $e=0;$e<U.length;$e+=1){var Be=q[U[$e]],lt=Be.numPoints,kt={type:1,geometry:[[Math.round(this.options.extent*(Be.x*_e-he)),Math.round(this.options.extent*(Be.y*_e-ge))]],tags:lt?_(Be):this.points[Be.index].properties},cr=void 0;lt?cr=Be.id:this.options.generateId?cr=Be.index:this.points[Be.index].id&&(cr=this.points[Be.index].id),cr!==void 0&&(kt.id=cr),Se.features.push(kt)}},W.prototype._limitZoom=function(U){return Math.max(this.options.minZoom,Math.min(+U,this.options.maxZoom+1))},W.prototype._cluster=function(U,q){var he=[],ge=this.options,_e=ge.reduce,Se=ge.minPoints;ge=ge.radius/(ge.extent*Math.pow(2,q));for(var $e=0;$e<U.length;$e++){var Be=U[$e];if(!(Be.zoom<=q)){Be.zoom=q;for(var lt=this.trees[q+1],kt=lt.within(Be.x,Be.y,ge),cr=Be.numPoints||1,Ur=cr,Ar=0,zr=kt;Ar<zr.length;Ar+=1){var Gt=lt.points[zr[Ar]];Gt.zoom>q&&(Ur+=Gt.numPoints||1)}if(Ur>=Se){Ar=Be.x*cr,zr=Be.y*cr,cr=_e&&1<cr?this._map(Be,!0):null,Gt=($e<<5)+(q+1)+this.points.length;for(var Vt=0;Vt<kt.length;Vt+=1){var Pn=lt.points[kt[Vt]];if(!(Pn.zoom<=q)){Pn.zoom=q;var Mn=Pn.numPoints||1;Ar+=Pn.x*Mn,zr+=Pn.y*Mn,Pn.parentId=Gt,_e&&(cr||(cr=this._map(Be,!0)),_e(cr,this._map(Pn)))}}Be.parentId=Gt,he.push({x:Ar/Ur,y:zr/Ur,zoom:Infinity,id:Gt,parentId:-1,numPoints:Ur,properties:cr})}else if(he.push(Be),1<Ur)for(Be=0,Ur=kt;Be<Ur.length;Be+=1)kt=lt.points[Ur[Be]],kt.zoom<=q||(kt.zoom=q,he.push(kt))}}return he},W.prototype._getOriginId=function(U){return U-this.points.length>>5},W.prototype._getOriginZoom=function(U){return(U-this.points.length)%32},W.prototype._map=function(U,q){if(U.numPoints)return q?F({},U.properties):U.properties;U=this.points[U.index].properties;var he=this.options.map(U);return q&&he===U?F({},he):he},W})}),No=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.shapeLayer=new Rf(c.options),c.textLayer=new Sd(c.options.textOptions),c.children=[c.shapeLayer,c.textLayer],c.max=[],c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{size:50,height:0,maxZoom:19,minZoom:5,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"},enableCluster:!1,showText:!0,textOptions:{fontSize:13,color:"white"}}}},{key:"onOptionsChanged",value:function(s){this.textLayer.setOptions(s.textOptions)}},{key:"setOptions",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},h=this.options.textOptions;s.textOptions&&vi(h,s.textOptions);var f=s.minZoom,x=s.maxZoom,g=s.size;f=x&&x!==this.options.maxZoom||f&&f!==this.options.minZoom||g&&g!==this.options.size,vi(this.options,s,{textOptions:h}),f?this.onChanged(this.options,this.data):this.refreshLayer(),this.onOptionsChanged(this.getOptions())}},{key:"onChanged",value:function(s,h){if(h&&h.length){this.zoom=Math.floor(this.map.getZoom());var f=s.maxZoom,x=s.minZoom,g=s.enableCluster;s=s.size,this.zoom>f?this.zoom=f:this.zoom<x&&(this.zoom=x),g&&(this.supercluster=new Zr({maxZoom:f,minZoom:x,radius:s/2}),this.supercluster.load(h)),this.refreshLayer()}}},{key:"refreshLayer",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options,h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.data,f=this.map,x=this.zoom;if(s.enableCluster&&this.supercluster&&(h=this.getClusterData(s)),h&&h.length){var g=s.gradient,_=s.showText,L=s.textOptions,F=s.height,M=s.size;M*=Math.pow(2,18-x),h=ov(h,M,function(O){var B=Hi(O,2),X=B[0];return B=B[1],-180<=X&&180>=X&&-90<=B&&90>=B&&(B=f.lnglatToMercator(X,B),X=B[0],B=B[1]),O[0]=X,O[1]=B,O}),this.max[x]=Math.max(this.max[x]||0,h.max);var E=new ro({max:this.max[x],min:0,maxSize:F*Math.pow(2,18-x),minSize:0,gradient:g});if(g=[],_){var P=L&&L.format;P=typeof P=="function"?P:null,g=h.map(function(O){return{geometry:{coordinates:[O.center.x,O.center.y,E.getSize(O.count)+L.fontSize/2*Math.pow(2,18-x)]},text:P?P(O.count):O.count}})}this.textLayer.setData(g),_=h.map(function(O){for(var B=O.center,X=h.r,W=[],U=0;6>U;U++)W.push(u0({x:B.x,y:B.y},X,U));return{geometry:{type:"Polygon",coordinates:[W]},properties:{height:E.getSize(O.count),color:E.getColor(O.count)}}}),this.shapeLayer.setData(_),s.enablePicked&&s.autoSelect&&this.pick(-1,-1)}}},{key:"getClusterData",value:function(){var s=this.map,h=s.getBounds(),f=h.ne;h=h.sw,this.ne=f,this.sw=h;var x=f,g=x.lng;x=x.lat;var _=[];return-180<=g&&180>=g&&-90<=x&&90>=x?_=[h.lng,h.lat,f.lng,f.lat]:(f=s.mercatorToLnglat(this.ne.lng,this.ne.lat),h=s.mercatorToLnglat(this.sw.lng,this.sw.lat),_=h.concat(f)),this.supercluster.getClusters(_,this.zoom).map(function(L){var F=0;return L.properties&&L.properties.point_count&&(F=L.properties.point_count),{geometry:L.geometry,count:F}})}},{key:"pick",value:function(s,h){return this.shapeLayer.pick(s,h)}},{key:"shouldUpdate",value:function(){if(!this.data)return!1;var s=this.map,h=Math.floor(s.getZoom()),f=this.options,x=f.maxZoom;if(f=f.minZoom,h>x?h=x:h<f&&(h=f),this.zoom!==h)return this.zoom=h,!0;if(!this.options.enableCluster||(h=s.getBounds(),s=h.ne,h=h.sw,!(s&&h&&this.ne&&this.sw)))return!1;if(this.ne.lng!==s.lng||this.ne.lat!==s.lat||this.sw.lng!==h.lng||this.sw.lat!==h.lat)return!0}},{key:"render",value:function(s){this.shouldUpdate()?this.refreshLayer():tc(o.prototype.__proto__||nn(o.prototype),"render",this).call(this,s)}}]),o}(Si),Wo=function(){function m(o,c){qr(this,m),this.map=o,this.options=c||{},this.eventMap={}}return on(m,[{key:"onResize",value:function(c){}},{key:"onUpdate",value:function(c){throw"\u672A\u5B9E\u73B0onUpdate\u65B9\u6CD5"}},{key:"getContainer",value:function(){throw"\u672A\u5B9E\u73B0getContainer\u65B9\u6CD5"}},{key:"getSize",value:function(){throw"\u672A\u5B9E\u73B0getSize\u65B9\u6CD5"}},{key:"getTilt",value:function(){throw"\u672A\u5B9E\u73B0getTilt\u65B9\u6CD5"}},{key:"getHeading",value:function(){throw"\u672A\u5B9E\u73B0getHeading\u65B9\u6CD5"}},{key:"getZoomUnits",value:function(){throw"\u672A\u5B9E\u73B0getZoomUnits\u65B9\u6CD5"}},{key:"getCenter",value:function(){throw"\u672A\u5B9E\u73B0getCenter\u65B9\u6CD5"}},{key:"getMapType",value:function(){throw"\u672A\u5B9E\u73B0getMapType\u65B9\u6CD5"}},{key:"lnglatToMercator",value:function(c,s){return this.options.coordinateSystem==="gcj02"?(s=s*Math.PI/180,s=31890685e-1*Math.log((1+Math.sin(s))/(1-Math.sin(s))),[parseFloat((c*Math.PI/180*6378137).toFixed(2)),parseFloat(s.toFixed(2))]):(c=Cr.convertLL2MC({lng:c,lat:s}),[c.lng,c.lat])}}]),m}(),Ce=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.eventMap={},c}return _n(o,m),on(o,[{key:"onResize",value:function(s){this.map.addEventListener("resize",s),this.eventMap.resize=s}},{key:"onMousemove",value:function(s){s=this.extendCallback(s),this.map.addEventListener("mousemove",s),this.eventMap.mousemove=s}},{key:"onClick",value:function(s){s=this.extendCallback(s),this.map.addEventListener("click",s),this.eventMap.click=s}},{key:"onDblClick",value:function(s){s=this.extendCallback(s),this.map.addEventListener("dblclick",s),this.eventMap.dblclick=s}},{key:"onRightClick",value:function(s){s=this.extendCallback(s),this.map.addEventListener("rightclick",s),this.eventMap.rightclick=s}},{key:"onUpdate",value:function(s){this.map.addEventListener("update",s),this.map.addEventListener("onearthstatuschange",s),this.eventMap.update=s,this.eventMap.onearthstatuschange=s}},{key:"extendCallback",value:function(s){return function(h){s(vi(h,{x:h.x,y:h.y}))}}},{key:"unbind",value:function(s){var h=this;this.eventMap[s]?(this.map.removeEventListener(s,this.eventMap[s]),delete this.eventMap[s]):(Fa(this.eventMap).forEach(function(f){h.map.removeEventListener(f,h.eventMap[f])}),this.eventMap={})}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return this.map.getTilt()}},{key:"getHeading",value:function(){return this.map.getHeading()}},{key:"getZoomUnits",value:function(){return this.map.getZoomUnits()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getCenter",value:function(){var s=this.map.getCenter();return-180<=s.lng&&180>=s.lng&&(s=this.map.lnglatToMercator(s.lng,s.lat),s={lng:s[0],lat:s[1]}),s}},{key:"getMapType",value:function(){return this.map.getMapType()}},{key:"lnglatToMercator",value:function(s,h){return this.map.lnglatToMercator(s,h)}},{key:"mercatorToLnglat",value:function(s,h){return this.map.mercatorToLnglat(s,h)}}]),o}(Wo),Pu=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.div=document.createElement("div"),c.div.style.position="absolute",c.div.style.userSelect="none",c.map.getPanes().mapPane.appendChild(c.div),c.eventMap={},c}return _n(o,m),on(o,[{key:"onResize",value:function(s){this.map.addEventListener("resize",s),this.eventMap.resize=s}},{key:"onMousemove",value:function(s){s=this.extendCallback(s),this.map.addEventListener("mousemove",s),this.eventMap.mousemove=s}},{key:"onClick",value:function(s){s=this.extendCallback(s),ou?(this.map.addEventListener("touchend",s),this.eventMap.touchend=s):(this.map.addEventListener("click",s),this.eventMap.click=s)}},{key:"onDblClick",value:function(s){s=this.extendCallback(s),this.map.addEventListener("dblclick",s),this.eventMap.dblclick=s}},{key:"onRightClick",value:function(s){s=this.extendCallback(s),this.map.addEventListener("rightclick",s),this.eventMap.rightclick=s}},{key:"changeCanvas",value:function(){var s=this.map,h=s.getSize(),f=s.getCenter();s=s.pointToOverlayPixel(f),this.div.style.left=s.x-h.width/2+"px",this.div.style.top=s.y-h.height/2+"px"}},{key:"onUpdate",value:function(s){var h=this,f=function(){h.changeCanvas(),s()};this.map.addEventListener("moveend",f),this.map.addEventListener("moving",f),this.map.addEventListener("zoomend",f),this.eventMap.moveend=f,this.eventMap.moving=f,this.eventMap.zoomend=f}},{key:"extendCallback",value:function(s){return function(h){s(vi(h,{x:h.pixel.x,y:h.pixel.y}))}}},{key:"unbind",value:function(){var s=this;Fa(this.eventMap).forEach(function(h){s.map.removeEventListener(h,s.eventMap[h])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.div}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return 0}},{key:"getHeading",value:function(){return 0}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getZoomUnits",value:function(){return Math.pow(2,18-this.map.getZoom())}},{key:"getCenter",value:function(){var s=this.map.getMapType().getProjection().lngLatToPoint(this.map.getCenter());return{lng:s.x,lat:s.y}}},{key:"lnglatToMercator",value:function(s,h){return s=this.map.getMapType().getProjection().lngLatToPoint({lng:s,lat:h}),[s.x,s.y]}},{key:"mercatorToLnglat",value:function(s,h){return s=this.map.getMapType().getProjection().pointToLngLat({lng:s,lat:h}),[s.lng,s.lat]}}]),o}(Wo),Ru=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.eventMap={},c}return _n(o,m),on(o,[{key:"onResize",value:function(s){window.addEventListener("resize",s),this.eventMap.resize=s}},{key:"onUpdate",value:function(s){}},{key:"unbind",value:function(){var s=this;Fa(this.eventMap).forEach(function(h){window.removeEventListener(h,s.eventMap[h])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container.getElementsByClassName("cesium-widget")[0]}},{key:"getSize",value:function(){var s=this.map;return{width:s.canvas.clientWidth,height:s.canvas.clientHeight}}},{key:"getTilt",value:function(){return 180*this.map.camera.pitch/Math.PI+90}},{key:"getHeading",value:function(){return 360-180*this.map.camera.heading/Math.PI}},{key:"getZoomUnits",value:function(){var s=this.map;return 6.8*s.scene.globe.ellipsoid.cartesianToCartographic(s.camera.position).height/6500}},{key:"getZoom",value:function(){return 10}},{key:"getCenter",value:function(){var s=this.map;return s=s.camera.pickEllipsoid(new Cesium.Cartesian2(s.canvas.clientWidth/2,s.canvas.clientHeight/2)),s=Cesium.Ellipsoid.WGS84.cartesianToCartographic(s),s=this.getMercator([180*s.longitude/Math.PI,180*s.latitude/Math.PI]),{lng:s[0],lat:s[1]}}},{key:"getMercator",value:function(s){var h=[];return h[0]=s[0]*Math.PI/180*6378137,s=s[1]*Math.PI/180,h[1]=31890685e-1*Math.log((1+Math.sin(s))/(1-Math.sin(s))),h}}]),o}(Wo),Ms=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.eventMap={},c}return _n(o,m),on(o,[{key:"onResize",value:function(s){window.addEventListener("resize",s),this.eventMap.resize=s}},{key:"onUpdate",value:function(s){}},{key:"unbind",value:function(){var s=this;Fa(this.eventMap).forEach(function(h){window.removeEventListener(h,s.eventMap[h])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getZoom",value:function(){return this.map.zoom}},{key:"getCenter",value:function(){return this.map.center}}]),o}(Wo),kh=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.eventMap={},c}return _n(o,m),on(o,[{key:"onResize",value:function(s){window.addEventListener("resize",s),this.eventMap.resize=s}},{key:"onUpdate",value:function(s){}},{key:"unbind",value:function(){var s=this;Fa(this.eventMap).forEach(function(h){window.removeEventListener(h,s.eventMap[h])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getCenter",value:function(){return this.map.center}}]),o}(Wo),Gl=function(){function m(o,c){qr(this,m),c=c||{},c.mapType==="bmap"?this.map=new Pu(o,c):c.mapType==="blank"?this.map=new Ms(o,c):c.mapType==="cesium"?this.map=new Ru(o,c):c.mapType==="three"?this.map=new kh(o,c):(c.mapType="bmapgl",this.map=new Ce(o,c)),this.map.type=c.mapType,this._dpr=window.devicePixelRatio,c.mapType==="bmapgl"&&(this._dpr=this.map.map.config.ratio),this.options=c||{},this.renderArr=[],(o=c.canvas)||(o=document.createElement("canvas")),this.canvas=o,this.gl=c.gl?c.gl:Bc(o,c),this.gl.getExtension("OES_element_index_uint"),this.changeSize(),this.projectionMatrix=jr.create(Float64Array),this.orthoMatrix=jr.create(Float64Array),this.matrix=jr.create(Float64Array),this.viewMatrix=jr.create(Float64Array),this.pointToPixelMatrix=jr.create(Float64Array),this.pixelToViewMatrix=jr.create(Float64Array),this.fovy=35,this.fps=Math.min(c.fps,60)||60,this.renderTime=new Date().valueOf(),this._animation=this.animation.bind(this),this._update=this.update.bind(this),this.onInitialize(this.options.onInitialize),this.options.onRender&&this.renderArr.push(this.options.onRender),this.stateManager=new pg({gl:this.gl}),this.pickFBO=new ps(this.gl),this.transferOptions={},this.bind()}return on(m,[{key:"bind",value:function(){var c=this,s=this.map;s.onResize(function(){c.changeSize(),c.render()}),s.onUpdate(this._update),s.onClick&&s.onClick(function(h){c.onClick&&c.onClick(h)}),s.onDblClick&&s.onDblClick(function(h){c.onDblClick&&c.onDblClick(h)}),s.onRightClick&&s.onRightClick(function(h){c.onRightClick&&c.onRightClick(h)}),s.onMousemove&&s.onMousemove(function(h){c.onMousemove&&c.onMousemove(h)}),this.options.canvas||s.getContainer().appendChild(this.canvas)}},{key:"unbind",value:function(){var c=this.map;c.unbind&&c.unbind()}},{key:"setOptions",value:function(c){this.options=c}},{key:"onInitialize",value:function(c){c&&(this.transferOptions=c.bind(this)(this.gl)||{})}},{key:"bindFramebuffer",value:function(c){var s=this.gl;c?s.bindFramebuffer(s.FRAMEBUFFER,c.framebuffer):s.bindFramebuffer(s.FRAMEBUFFER,null)}},{key:"saveFramebuffer",value:function(){var c=this.gl;this.preFramebuffer=c.getParameter(c.FRAMEBUFFER_BINDING)}},{key:"restoreFramebuffer",value:function(){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,this.preFramebuffer)}},{key:"onRender",value:function(c){this.renderArr.push(c)}},{key:"changeSize",value:function(){var c=this.canvas,s=this.options;if(c){var h=c.style,f=this.map.getSize(),x=this._dpr;c.width=f.width*x,c.height=f.height*x,h.cssText="position: absolute;left:0;top:0;width:"+f.width+"px;height:"+f.height+"px;z-index:2;",s.mapType!=="cesium"||s.canvas||(h.pointerEvents="none"),this.gl.viewport(0,0,c.width,c.height)}}},{key:"update",value:function(){this.options.autoUpdate===!1||this.isAnimation&&60<=this.fps||this.render()}},{key:"render",value:function(){if(this.map&&this.gl){var c=this.options,s=this.projectionMatrix,h=this.viewMatrix;if(c.mapType==="three")h=this.map.map.camera,s=h.projectionMatrix.elements,h=h.matrixWorldInverse.elements;else if(c.mapType==="cesium"){h=this.map.map;var f=h.camera.frustum.projectionMatrix;s=new Float32Array([f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]]),f=h.camera.viewMatrix,h=new Float32Array([f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]])}else this.map.map.mapType==="B_EARTH_MAP"?(s=this.map.map.getEarth().scene._camera.getProjectionMatrix(),h=this.map.map.getEarth().scene._camera.getModelViewMatrix()):(this.updateProjectionMatrix(),this.updateModelViewMatrix());for(f=jr.multiply(this.matrix,s,h),vi(this.transferOptions,{gl:this.gl,matrix:f,pointToPixelMatrix:this.pointToPixelMatrix,pixelToViewMatrix:this.pixelToViewMatrix,projectionMatrix:s,orthoMatrix:this.orthoMatrix,viewMatrix:h,stateManager:this.stateManager}),c.mapType!=="three"&&c.mapType!=="cesium"&&c.autoUpdate!==!1&&this.clear(),c=0;c<this.renderArr.length;c++)this.renderArr[c]&&this.renderArr[c].bind(this)(this.transferOptions)}}},{key:"clear",value:function(c){var s=this.gl,h=this.options.clearColor||[0,0,0,0];s.clearColor(h[0],h[1],h[2],h[3]),c&&(c instanceof Array||(c=Ne(c).unitArray()),s.clearColor(c[0],c[1],c[2],c[3])),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)}},{key:"updateProjectionMatrix",value:function(){var c=this.gl.canvas.width/this.gl.canvas.height,s=this.options.cameraNear||1,h=this.options.cameraFar||4e3;jr.perspective(this.projectionMatrix,Er(this.fovy),c,s,h),c=this.map.getSize(),jr.ortho(this.orthoMatrix,-c.width/2,c.width/2,-c.height/2,c.height/2,s,h)}},{key:"updateModelViewMatrix",value:function(){var c=this.map,s=this.viewMatrix,h=this.pointToPixelMatrix,f=this.pixelToViewMatrix;jr.identity(s),jr.identity(h),jr.identity(f);var x=c.getSize();x=Math.round(-x.height/(2*Math.tan(Er(this.fovy)/2))),jr.translate(f,f,[0,0,x]),jr.rotate(f,f,Er(c.getTilt()),[-1,0,0]),jr.rotate(f,f,Er(c.getHeading()),[0,0,-1]),x=c.getCenter();var g=this.options.pointOffset||[0,0];c=c.getZoomUnits(),jr.translate(h,h,[(g[0]-x.lng)/c,(g[1]-x.lat)/c,0]),c=1/c,jr.scale(h,h,[c,c,c]),jr.multiply(s,f,h)}},{key:"destroy",value:function(){this.stopAnimation(),this.unbind();var c=this.gl.getExtension("WEBGL_lose_context");c&&c.loseContext(),this.map.getContainer().removeChild(this.canvas),this.gl=this.canvas=null}},{key:"animation",value:function(){if(this.isAnimation){if(60<=this.fps)this.render();else{var c=new Date().valueOf(),s=Math.floor(1e3/this.fps),h=c-this.renderTime;h>s&&(this.render(),this.renderTime=c-h%s)}window.requestAnimationFrame(this._animation)}}},{key:"startAnimation",value:function(){this.isAnimation||(this.isAnimation=!0,window.requestAnimationFrame(this._animation))}},{key:"stopAnimation",value:function(){this.isAnimation=!1}}]),m}(),nc=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.bufferData=[],c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:[.1,.1,.9,1],blend:"normal",shape:"circle",size:5,unit:"px",borderWidth:0,borderColor:[1,1,1,.9],polygonOffset:[0,0],depthTest:!0}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions(),f=[];h.enablePicked&&f.push("PICK"),h.shape&&h.shape==="circle"&&f.push("SHAPE_CIRCLE"),this.program=new ui(this.gl,{vertexShader:`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aBorderWidth;attribute vec4 aBorderColor;uniform mat4 uMatrix;uniform vec4 uSelectedColor;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;varying vec4 vColor;varying float vSize;varying float vBorderWidth;varying vec4 vBorderColor;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}float size=aSize*devicePixelRatio;float borderWidth=aBorderWidth*devicePixelRatio;gl_Position=uMatrix*vec4(aPos.xyz,1.0);gl_PointSize=uUnitPx ? size : size/zoomUnits;vSize=size;vBorderWidth=borderWidth;vBorderColor=aBorderColor;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:`varying vec4 vColor;varying float vSize;varying float vBorderWidth;varying vec4 vBorderColor;void main(void){vec4 color=vColor;
#if defined(SHAPE_CIRCLE)
float d=distance(gl_PointCoord,vec2(0.5,0.5));float ratio=1.0-vBorderWidth/vSize*2.0;if(d>0.5){discard;}if(d>ratio*0.5){color=vBorderColor;}float blur=1.0;blur=1.0-smoothstep(0.49,0.5,d);color.a*=blur;
#else
float ratio=vBorderWidth/vSize;if(gl_PointCoord.x<ratio||gl_PointCoord.x>1.0-ratio||gl_PointCoord.y<ratio||gl_PointCoord.y>1.0-ratio){color=vBorderColor;}
#endif
gl_FragColor=color;}`,defines:f},this),this.buffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{stride:52,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:52,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12},{stride:52,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:28},{stride:52,name:"aBorderWidth",buffer:this.buffer,size:1,type:"FLOAT",offset:32},{stride:52,name:"aBorderColor",buffer:this.buffer,size:4,type:"FLOAT",offset:36}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.options=this.data=this.buffer=this.program=this.bufferData=this.vertexArray=null}},{key:"onChanged",value:function(s,h){if(this.gl){for(var f=[],x=s.color,g=s.size,_=s.borderWidth,L=s.borderColor,F=0;F<h.length;F++){var M=this.normizedPoint(h[F].geometry.coordinates),E=this.getProperty("color",x,h[F]);E=this.normizedColor(E);var P=this.getProperty("size",g,h[F]);P=Number(P);var O=this.getProperty("borderWidth",_,h[F]);O=Number(O);var B=this.getProperty("borderColor",L,h[F]);B=this.normizedColor(B),M=this.addMultipleCoords(M);for(var X=0;X<M.length;X++){var W=M[X];f.push(W[0],W[1],Number(W[2]||0)),f.push(E[0],E[1],E[2],E[3]),f.push(P),f.push(O,B[0],B[1],B[2],B[3])}}this.bufferData=f,this.buffer.updateData(new Float32Array(f)),s.enablePicked&&this.parsePickData(h)}}},{key:"parsePickData",value:function(s){var h=this.getOptions(),f=[];if(h.enablePicked)for(var x=0;x<s.length;x++){var g=this.indexToRgb(x);f.push(g[0]/255,g[1]/255,g[2]/255),h.repeat&&(f.push(g[0]/255,g[1]/255,g[2]/255),f.push(g[0]/255,g[1]/255,g[2]/255))}h.enablePicked&&this.pickBuffer.updateData(new Float32Array(f))}},{key:"render",value:function(s){var h=s.gl,f=s.matrix,x=s.isPickRender;if(!(0>=this.bufferData.length)){var g=this.getOptions(),_=this.program;_.use(h),s=this.getCommonUniforms(s),s=vi(s,{uMatrix:f,uUnitPx:g.unit==="px",zoomUnits:this.map.getZoomUnits(),devicePixelRatio:window.devicePixelRatio}),_.setUniforms(s),this.setGLState({blend:!x,blendFunc:g.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],blendEquation:h.FUNC_ADD,polygonOffset:g.polygonOffset,depthTest:g.depthTest}),this.vertexArray.bind(),h.drawArrays(h.POINTS,0,this.bufferData.length/13)}}}]),o}(xo),ol=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.bufferDataArr=[],c.indexDataArr=[],c.vertexBuffer=[],c.indexBuffer=[],c.position=[],c.opacity=1,c.currentScale=1,c.autoUpdate=!0,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:[.1,.1,.9,1],size:5,segs:32,scale:2,unit:"m",step:.1}}},{key:"initialize",value:function(s){this.gl=s,this.program=new ui(this.gl,{vertexShader:"uniform mat4 u_projectionMatrix;uniform mat4 u_modelViewMatrix;uniform mat4 u_modelMatrix;uniform float u_opacity;attribute vec4 aPos;attribute vec4 aColor;varying vec4 vColor;void main(){vColor=aColor;vColor.a=u_opacity;gl_Position=u_projectionMatrix*u_modelViewMatrix*u_modelMatrix*vec4(aPos.xyz,1.0);}",fragmentShader:"precision highp float;varying vec4 vColor;void main(){if(vColor.a==0.0){discard;}gl_FragColor=vColor;}"})}},{key:"destroy",value:function(){this.data=this.program=this.position=this.indexBuffer=this.vertexBuffer=this.indexDataArr=this.bufferDataArr=null}},{key:"onChanged",value:function(s,h){var f=this.gl;if(f&&(this.currentScale=this.opacity=1,(this.data=h)&&h.length)){var x=s.color,g=s.segs;s=s.size;for(var _=360/g,L=0;L<h.length;L++){var F=[],M=[],E=this.normizedPoint(h[L].geometry.coordinates),P=x;Object.prototype.toString.call(P)==="[object Function]"?P=P(h[L]):(P=h[L].color||x,"properties"in h[L]&&"color"in h[L].properties&&(P=h[L].properties.color)),P=this.normizedColor(P);var O=Object.prototype.toString.call(s)==="[object Function]"?s(h[L]):Number(s),B=E[0],X=E[1];F.push(0,0,-.5),F.push(P[0],P[1],P[2],0);for(var W=1,U=0;W<=g;W++,U+=_)F.push(E[0]-B+Math.cos(Math.PI/180*U)*O,E[1]-X+Math.sin(Math.PI/180*U)*O,-.5),F.push(P[0],P[1],P[2],this.opacity),W===g?M.push(0,0+W,1):M.push(0,0+W,0+W+1);P=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,P),f.bufferData(f.ARRAY_BUFFER,new Float32Array(F),f.STATIC_DRAW),this.vertexBuffer[L]=P,this.bufferDataArr[L]=F,f.bindBuffer(f.ARRAY_BUFFER,null),F=f.createBuffer(),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,F),f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array(M),f.STATIC_DRAW),this.indexBuffer[L]=F,this.indexDataArr[L]=M,f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,null),this.position[L]=[E[0],E[1]]}this.webglLayer&&this.webglLayer.render()}}},{key:"render",value:function(s){var h=s.gl,f=s.projectionMatrix,x=s.viewMatrix;for(s=this.program,h.useProgram(s.program),h.uniformMatrix4fv(s.uniforms.u_projectionMatrix,!1,f),h.uniformMatrix4fv(s.uniforms.u_modelViewMatrix,!1,x),f=this.opacity,this.options.opacity!==void 0&&(f=this.options.opacity),h.uniform1f(s.uniforms.u_opacity,f),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.DST_ALPHA]}),h.enableVertexAttribArray(s.attributes.aPos),h.enableVertexAttribArray(s.attributes.aColor),f=0;f<this.bufferDataArr.length;f++)if(!(0>=this.bufferDataArr[f].length)){x=new Float32Array(this.bufferDataArr[f]).BYTES_PER_ELEMENT,h.bindBuffer(h.ARRAY_BUFFER,this.vertexBuffer[f]),h.vertexAttribPointer(s.attributes.aColor,4,h.FLOAT,!1,7*x,3*x),h.vertexAttribPointer(s.attributes.aPos,3,h.FLOAT,!1,7*x,0),x=this.position[f];var g=jr.create(),_=[this.currentScale,this.currentScale,this.currentScale];this.options.unit==="px"&&this.map&&(_=this.map.getZoomUnits(),_=[this.currentScale*_,this.currentScale*_,this.currentScale]),jr.identity(g),jr.translate(g,g,[x[0],x[1],0]),jr.scale(g,g,_),h.uniformMatrix4fv(s.uniforms.u_modelMatrix,!1,g),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.indexBuffer[f]),h.drawElements(h.TRIANGLES,this.indexDataArr[f].length,h.UNSIGNED_SHORT,0),h.bindBuffer(h.ARRAY_BUFFER,null),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null)}s=this.getOptions(),h=s.scale,s=s.step,this.opacity-=s/10,this.currentScale+=h*s,0>this.opacity&&(this.currentScale=this.opacity=1)}}]),o}(xo),ph=function(m){function o(c){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.bufferData=[],c.date=new Date,c.autoUpdate=!0,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:[.1,.1,.9,1],blend:"normal",size:20,unit:"px",duration:2}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.program=new ui(this.gl,{vertexShader:`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 uMatrix;uniform vec4 uSelectedColor;uniform float uTime;uniform float duration;uniform float zoomUnits;varying vec4 vColor;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}float percent=mod(uTime,duration)/duration;vColor.a=1.-percent;gl_Position=uMatrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize/zoomUnits*percent;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:"varying vec4 vColor;void main(void){vec4 color=vColor;float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}float blur=1.0;blur=1.0-smoothstep(0.49,0.5,d);color.a*=blur;gl_FragColor=color;}",defines:h.enablePicked?["PICK"]:[]},this),this.buffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{stride:32,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:32,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12},{stride:32,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:28}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.options=this.data=this.buffer=this.program=this.bufferData=this.vertexArray=null}},{key:"onChanged",value:function(s,h){if(this.gl){for(var f=[],x=s.color,g=s.size,_=0;_<h.length;_++){var L=h[_].geometry.coordinates,F=x;Object.prototype.toString.call(F)==="[object Function]"?F=F(h[_]):(F=h[_].color||x,"properties"in h[_]&&"color"in h[_].properties&&(F=h[_].properties.color)),F=this.normizedColor(F),L=this.normizedPoint(L);var M=h[_].size||g;"properties"in h[_]&&"size"in h[_].properties&&(M=h[_].properties.size),M=Object.prototype.toString.call(M)==="[object Function]"?M(h[_]):Number(M),f.push(L[0],L[1],Number(L[2]||0)),f.push(F[0],F[1],F[2],F[3]),f.push(M*window.devicePixelRatio)}this.bufferData=f,this.buffer.updateData(new Float32Array(f)),s.enablePicked&&this.parsePickData(h)}}},{key:"parsePickData",value:function(s){var h=this.getOptions(),f=[];if(h.enablePicked)for(var x=0;x<s.length;x++){var g=this.indexToRgb(x);f.push(g[0]/255,g[1]/255,g[2]/255)}h.enablePicked&&this.pickBuffer.updateData(new Float32Array(f))}},{key:"render",value:function(s){var h=s.gl,f=s.matrix,x=s.isPickRender;if(!(0>=this.bufferData.length)){var g=this.getOptions(),_=this.program;_.use(h),this.vertexArray.bind(),s=this.getCommonUniforms(s);var L=1;g.unit==="m"&&this.map&&(L=this.map.getZoomUnits()),s=vi(s,{zoomUnits:L,uTime:(new Date-this.date)/1e3,duration:g.duration,uMatrix:f}),_.setUniforms(s),this.setGLState({blend:!x,blendFunc:g.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],blendEquation:h.FUNC_ADD}),h.drawArrays(h.POINTS,0,this.bufferData.length/8)}}}]),o}(xo),al=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.bufferData=[],c.startTime=Number(c.options.startTime)||0,c.endTime=Number(c.options.endTime),c.time=c.startTime,c.segs=Number(c.options.segs)||10,c.autoUpdate=!0,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:[.9,.1,.1,1],trailLength:3,height:100,step:.1,segs:10,polygonOffset:[0,0]}}},{key:"setTime",value:function(s){this.time=s}},{key:"initialize",value:function(s){this.gl=s,this.program=new ui(this.gl,{vertexShader:"precision mediump float;attribute vec4 aPos;uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;varying float vTime;void main(){gl_Position=u_matrix*vec4(aPos.xyz,1.0);vTime=1.0-((currentTime-aPos.w)/trailLength);}",fragmentShader:"precision mediump float;uniform vec3 uFragColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(uFragColor,1.0*vTime);}"}),this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer)}},{key:"destroy",value:function(){this.data=this.program=this.buffer=this.bufferData=null}},{key:"onChanged",value:function(s,h){var f=this.gl;if(f){this.buffer=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,this.buffer);for(var x=[],g=s.height,_=0;_<h.length;_++)for(var L=h[_].geometry.coordinates,F=Object.prototype.toString.call(g)==="[object Function]"?g(h[_]):Number(g),M=0,E=0;E<this.segs;E++){var P=this.normizedPoint(L);x.push(P[0],P[1],M),L[2]===void 0?x.push(E):x.push(Number(L[2])),M+=F/this.segs,x.push(P[0],P[1],M),L[2]===void 0?x.push(E+1):x.push(Number(L[2]))}s.endTime===void 0&&(this.endTime=this.segs),this.bufferData=x,f.bufferData(f.ARRAY_BUFFER,new Float32Array(x),f.STATIC_DRAW),this.webglLayer&&this.webglLayer.render()}}},{key:"render",value:function(s){var h=s.gl,f=s.matrix;s=this.program,h.useProgram(s.program),h.uniformMatrix4fv(s.uniforms.u_matrix,!1,f),h.bindBuffer(h.ARRAY_BUFFER,this.buffer),h.enableVertexAttribArray(s.attributes.aPos),h.vertexAttribPointer(s.attributes.aPos,4,h.FLOAT,!1,0,0),f=this.normizedColor(this.options.color),h.uniform3f(s.uniforms.uFragColor,f[0],f[1],f[2]),h.uniform1f(s.uniforms.currentTime,this.time),h.uniform1f(s.uniforms.trailLength,this.options.trailLength),this.setGLState({blend:!0,blendFunc:[h.SRC_ALPHA,h.ONE],blendEquation:h.FUNC_ADD,polygonOffset:this.options.polygonOffset}),h.drawArrays(h.LINES,0,this.bufferData.length/4),this.time+=Number(this.options.step),this.time>1.5*this.endTime&&(this.time=this.startTime)}}]),o}(xo),Ro=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.index=[],s=c.canvas=document.createElement("canvas"),c.ctx=s.getContext("2d"),c.iconHash=new gs,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{flat:!1,unit:"px",scale:1,angle:0,opacity:1,offset:[0,0],padding:[0,0],polygonOffset:[0,0]}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.program=new ui(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute vec2 a_size;attribute vec2 a_offset;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform float devicePixelRatio;uniform float u_zoom_units;uniform float u_zIndex;uniform float u_scale;uniform bool u_unit_px;uniform bool u_flat;varying vec2 v_texture_coord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)+size.x*sin(a_rotation);}else if(corner==2.0){x+=size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)-size.x*sin(a_rotation);}else if(corner==3.0){x+=size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)-size.x*sin(a_rotation);}else{x+=-size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)+size.x*sin(a_rotation);}return vec3(x,y,coord.z);}void main(){v_texture_coord=a_texture_coord;if(u_flat){vec2 offset=a_offset;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;offset*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=u_zIndex;gl_Position=u_matrix*vec4(current.x+offset[0],current.y-offset[1],current.z,1.0);}else{vec4 position=u_matrix*vec4(a_pos,1.0);vec3 screen=position.xyz/position.w;vec2 halfSize=a_size/MAPV_resolution*devicePixelRatio*u_scale;vec2 offset=a_offset*2./MAPV_resolution*devicePixelRatio;if(!u_unit_px){halfSize/=u_zoom_units;offset/=u_zoom_units;}vec3 current=transformCoord(screen,halfSize,a_corner);current.xy=current.xy-offset;current.z+=u_zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform float u_opacity;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}textureColor.a*=u_opacity;gl_FragColor=textureColor;
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:36,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:16},{name:"a_offset",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:32},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.canvas=this.iconHash=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h,2<arguments.length&&arguments[2]!==void 0?arguments[2]:{})}},{key:"processCache",value:function(s,h,f){var x=this;this.cachedData=[];for(var g=s.icon,_=s.width,L=s.height,F=s.offset,M=s.angle,E=0;E<h.length;E++){var P=this.normizedPoint(h[E].geometry.coordinates),O=this.getProperty("icon",g,h[E]),B=this.getProperty("width",_,h[E]),X=this.getProperty("height",L,h[E]),W=this.getProperty("offset",F,h[E]),U=this.getProperty("angle",M,h[E]);P&&O&&(this.cachedData.push({point:P,icon:O,width:B,height:X,offset:W,angle:U,index:E}),this.iconHash.get(O)||this.iconHash.set(O,O))}h=dd(this.iconHash.entries()).filter(function(q){return typeof q[1]=="string"}).map(function(q){var he=Hi(q,2)[0];return new Ii(function(ge,_e){x.url2canvas(he,function(Se){x.iconHash.set(he,Se),ge()})})}),Ii.all(h).then(function(q){x.buildSprite(s),f.autoRender!==!1&&x.webglLayer&&x.webglLayer.render()})}},{key:"buildSprite",value:function(s){var h=s.padding,f=this.canvas,x=this.ctx,g=[],_=new gs,L=!0,F=!1,M=void 0;try{for(var E=Os(this.iconHash),P;!(L=(P=E.next()).done);L=!0){var O=Hi(P.value,2),B=O[1];if(typeof B!="string"){var X=B.width,W=B.height;g.push({w:X+h[0],h:W+h[0],width:X,height:W,key:O[0],icon:B})}}}catch(U){F=!0,M=U}finally{try{!L&&E.return&&E.return()}finally{if(F)throw M}}for(F=dc(g),L=0;L<g.length;L++)M=g[L],_.get(M.key)||_.set(M.key,M);for(L=Lr(F.w),F=Lr(F.h),f.width=L||1,f.height=F||1,x.save(),f=0;f<g.length;f++)M=g[f],x.drawImage(M.icon,M.x+h[0],M.y+h[1],M.width,M.height);x.restore(),this.loadTexture(),this.buildVertex(s,_,L,F)}},{key:"buildVertex",value:function(s,h,f,x){s=s.enablePicked;for(var g=[],_=[],L=[],F=[],M=0;M<this.cachedData.length;M++){var E=this.cachedData[M],P=E.point,O=E.width,B=E.height,X=E.offset,W=E.angle,U=E.index;if(E=h.get(E.icon)){O=O||E.icon.width,B=B||E.icon.height;var q=Hi(P,3);P=q[0];var he=q[1];q=q[2];for(var ge=0;4>ge;ge++)g.push(P,he,q),g.push(ge),g.push(O,B),g.push.apply(g,Vi(X)),g.push(W*Math.PI/180);O=E.x/f,B=(E.x+E.w)/f,X=(E.y+E.h)/x,E=E.y/x,_.push(O,X,O,E,B,E,B,X),E=4*M,L.push(E,E+2,E+1,E,E+3,E+2),s&&(U=this.indexToRgb(U),F.push(U[0]/255,U[1]/255,U[2]/255),F.push(U[0]/255,U[1]/255,U[2]/255),F.push(U[0]/255,U[1]/255,U[2]/255),F.push(U[0]/255,U[1]/255,U[2]/255))}}this.index=L,this.vertexBuffer.updateData(new Float32Array(g)),this.uvBuffer.updateData(new Float32Array(_)),this.indexBuffer.updateData(new Uint32Array(L)),s&&this.pickBuffer.updateData(new Float32Array(F))}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.iconHash&&this.texture){var h=s.gl,f=s.matrix,x=this.getOptions(),g=this.program;g.use(h),this.setGLState({blend:!0,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:x.polygonOffset}),g.setUniforms(vi(this.getCommonUniforms(s),{u_icon:this.texture,u_matrix:f,u_flat:x.flat,u_unit_px:x.unit==="px",u_zoom_units:this.map.getZoomUnits(),u_scale:x.scale,u_opacity:x.opacity,u_zIndex:x.zIndex,devicePixelRatio:window.devicePixelRatio})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"url2canvas",value:function(s,h){if((typeof s=="undefined"?"undefined":Ta(s))==="object")h(s);else{var f=new Image;f.crossOrigin="anonymous",f.onload=function(){var x=f.width,g=f.height,_=document.createElement("canvas");_.width=x,_.height=g,_.getContext("2d").drawImage(f,0,0,x,g),h(_)},f.onerror=function(){var x=document.createElement("canvas");x.width=20,x.height=40;var g=x.getContext("2d");g.fillStyle="red",g.beginPath(),g.lineTo(0,0),g.lineTo(20,0),g.lineTo(10,40),g.closePath(),g.fill(),h(x)},f.src=s}}},{key:"loadTexture",value:function(){var s=this;this.canvas?Or(this.gl,this.canvas,function(h){s.texture=h}):this.texture=null}}]),o}(xo),Ou=function(m){function o(c){qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.pointLayer=new nc(c.options),c.options.textOptions=vi({depthTest:!1},c.options.textOptions),c.textLayer=new Sd(c.options.textOptions);var s=vi({},c.options,c.options.iconOptions);return c.iconLayer=new Ro(s),c.children=[c.pointLayer,c.textLayer,c.iconLayer],c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{minSize:25,maxSize:40,clusterRadius:200,minPoints:2,extent:400,showText:!0,maxZoom:19,minZoom:4,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"},textOptions:{fontSize:12,color:"white"},iconOptions:{}}}},{key:"onOptionsChanged",value:function(s){this.textLayer.setOptions(s.textOptions)}},{key:"setOptions",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},h=this.options.textOptions;s.textOptions&&vi(h,s.textOptions);var f=s.minZoom,x=s.maxZoom,g=s.clusterRadius;f=x&&x!==this.options.maxZoom||f&&f!==this.options.minZoom||g&&g!==this.options.clusterRadius,vi(this.options,s,{textOptions:h}),f?this.onChanged(this.options,this.data):this.refreshCluster(),this.onOptionsChanged(this.getOptions())}},{key:"onChanged",value:function(s,h){var f=this;h&&h.length?(h.forEach(function(x){var g=Hi(x.geometry.coordinates,2),_=g[0];g=g[1],-180<=_&&180>=_&&-90<=g&&90>=g||(_=f.map.mercatorToLnglat(_,g),x.geometry.coordinates[0]=_[0],x.geometry.coordinates[1]=_[1])}),this.supercluster=new Zr({maxZoom:s.maxZoom,minZoom:s.minZoom,radius:s.clusterRadius,minPoints:s.minPoints,extent:s.extent}),this.supercluster.load(h),this.supercluster.trees.forEach(function(x){var g=0,_=Infinity;x.points.forEach(function(L){g=Math.max(L.numPoints||0,g),_=Math.min(L.numPoints||Infinity,_)}),x.max=g,x.min=_}),this.refreshCluster()):(this.supercluster=null,this.pointLayer.setData([]),this.iconLayer.setData([]),this.textLayer.setData([]))}},{key:"refreshCluster",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options;if(this.supercluster){var h=this.getClusterData(s);if(h&&h.length)if(typeof s.beforeRender=="function"&&s.beforeRender(h)===!1)this.pointLayer.setData([]),this.iconLayer.setData([]),this.textLayer.setData([]);else{var f=[],x=[];h.forEach(function(g){g.properties.text?f.push(g):g.properties.icon?x.push(g):f.push(g)}),this.pointLayer.setData(f),this.iconLayer.setData(x),this.textLayer.setData(s.showText?h:[]),s.enablePicked&&s.autoSelect&&this.pick(-1,-1)}}}},{key:"getClusterData",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options,h=this.map.getBounds(),f=this.ne=h.getNorthEast();h=this.sw=h.getSouthWest();var x=f,g=x.lng;return x=x.lat,-180<=g&&180>=g&&-90<=x&&90>=x?h=[h.lng,h.lat,f.lng,f.lat]:(f=this.map.mercatorToLnglat(this.ne.lng,this.ne.lat),h=this.map.mercatorToLnglat(this.sw.lng,this.sw.lat),h=h.concat(f)),f=Math.floor(this.map.getZoom()),h=this.supercluster.getClusters(h,f),this.zoom!==f&&0<h.length&&(this.zoom=f,x=this.supercluster.trees,g=x[f]&&x[f].max||this.max,f=x[f]&&x[f].min||this.min,g!==f&&(this.max=g,this.min=f)),this.processData(h,s)}},{key:"processData",value:function(s,h){var f=h.defaultColor,x=h.defaultSize,g=h.gradient,_=h.minSize,L=h.textOptions,F=new ro({max:this.max,min:~~this.min||1,minSize:_||8,maxSize:h.maxSize||30,gradient:g});f=f||g[0]||"black",x=x||.5*_||5;var M=L&&L.format;return M=typeof M=="function"?M:null,s.map(function(E){var P=x,O=f,B="";return E.properties&&E.properties.point_count&&(B=E.properties.point_count,P=F.getSize(B)||P,O=F.getColor(B),B=M?M(B):B),P=vi({},E.properties,{text:B,size:P,color:O}),vi({},E,{properties:P,children:E.id})})}},{key:"pick",value:function(s,h){var f=this.pointLayer.pick(s,h);return 0>f.dataIndex&&(f=this.iconLayer.pick(s,h)),(s=f.dataItem)&&typeof s.children=="number"&&(s.children=this.getClusterPoints(s.children)),f}},{key:"getClusterPoints",value:function(s){var h=this;return s?this.supercluster.getChildren(s).map(function(f){return f.type==="Feature"?h.getClusterPoints(f.id):f}).flat():[]}},{key:"shouldUpdate",value:function(){if(!this.data||!this.supercluster)return!1;if(this.zoom!==Math.floor(this.map.getZoom()))return!0;var s=this.map.getBounds(),h=s.getNorthEast();if(s=s.getSouthWest(),this.ne.lng!==h.lng||this.ne.lat!==h.lat||this.sw.lng!==s.lng||this.sw.lat!==s.lat)return!0}},{key:"render",value:function(s){this.shouldUpdate()?this.refreshCluster():tc(o.prototype.__proto__||nn(o.prototype),"render",this).call(this,s)}}]),o}(Si),gh=function(m){function o(c,s){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c,s))}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return vi(tc(o.prototype.__proto__||nn(o.prototype),"getDefaultOptions",this).call(this),{style:"grid",gridSize:500,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}})}},{key:"onChanged",value:function(s,h){this.gl&&(h=this.processData(h,s),tc(o.prototype.__proto__||nn(o.prototype),"onChanged",this).call(this,s,h))}},{key:"generateGrid",value:function(s,h){var f=h.gridSize,x=[],g={};h=s.length;for(var _=this.getPointOffset(),L=0;L<h;L++){var F=this.normizedPoint(s[L].geometry.coordinates),M=F[2];F=~~((F[0]+_[0])/f)+"_"+~~((F[1]+_[1])/f),g[F]===void 0&&(g[F]={count:0,num:0,z:0});var E=~~s[L].count||1;"properties"in s[L]&&"count"in s[L].properties&&(E=~~s[L].properties.count),g[F].count+=E,g[F].num+=1,g[F].z+=M}return Fa(g).forEach(function(P){var O=P.split("_");x.push([O[0]*f+f/2,O[1]*f+f/2,g[P].z/g[P].num,g[P].count])}),x}},{key:"processData",value:function(s,h){var f=[];if(h.style==="normal")for(var x=this.getPointOffset(),g=0;g<s.length;g++){var _=this.normizedPoint(s[g].geometry.coordinates),L=_[0]+x[0],F=_[1]+x[1];_=_[2];var M=~~s[g].count||1;"properties"in s[g]&&"count"in s[g].properties&&(M=~~s[g].properties.count),f.push([L,F,_,M])}else f=this.generateGrid(s,h);if(x=s=0,h.max!==void 0&&h.min!==void 0)s=h.max,x=h.min;else{for(f[0]&&(s=f[0][3],x=f[0][3]),g=f.length,L=0;L<g;L++)F=f[L],s=Math.max(F[3],s),x=Math.min(F[3],x);s/=2}for(h=new ro({max:~~s,min:x,gradient:h.gradient}),s=[],x=0;x<f.length;x++)g=f[x],g[0]=g[0],g[1]=g[1],L=h.getImageData(g[3]),s.push({geometry:{type:"Point",coordinates:[g[0],g[1],g[2]]},color:[L[0]/255,L[1]/255,L[2]/255,L[3]/255]});return s}}]),o}(nc),ic=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.bufferData=[],c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:[1,.05,.05,1]}}},{key:"onChanged",value:function(s,h){var f=this;if(s=this.gl){this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer);for(var x=[],g=function(F){var M=5*F;for(F=0;F<h.length;F++)h[F].geometry.coordinates.forEach(function(E){for(var P=0;P<E.length-1;P++){var O=f.normizedPoint(E[P]);x.push(O[0]),x.push(O[1]),x.push(Number(M)),O=f.normizedPoint(E[P+1]),x.push(O[0]),x.push(O[1]),x.push(Number(M))}})},_=0;20>_;_++)g(_);s.bufferData(s.ARRAY_BUFFER,new Float32Array(x),s.STATIC_DRAW),this.bufferData=x,s.bindBuffer(s.ARRAY_BUFFER,null)}}},{key:"initialize",value:function(s){this.gl=s,this.program=new ui(s,{vertexShader:"uniform mat4 uMatrix;attribute vec3 aPos;void main(){gl_PointSize=10.0;gl_Position=uMatrix*vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform vec4 uFragColor;void main(){gl_FragColor=uFragColor;}"}),this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer)}},{key:"render",value:function(s){var h=s.gl;s=s.matrix;var f=this.program;h.useProgram(f.program);var x=this.normizedColor(this.options.color);h.uniform4f(f.uniforms.uFragColor,x[0],x[1],x[2],x[3]),h.uniformMatrix4fv(f.uniforms.uMatrix,!1,s),h.bindBuffer(h.ARRAY_BUFFER,this.buffer),h.enableVertexAttribArray(f.attributes.aPos),h.vertexAttribPointer(f.attributes.aPos,3,h.FLOAT,!1,0,0),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.ONE,h.ONE]}),h.drawArrays(h.LINES,0,this.bufferData.length/3)}}]),o}(xo),Nf={circle:1,square:2},go=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.bufferData=[],c.startTime=c.options.startTime||0,c.endTime=c.options.endTime,c.time=c.startTime,c.autoUpdate=!0,c}return _n(o,m),on(o,[{key:"initialize",value:function(s){this.gl=s,this.program=new ui(this.gl,{vertexShader:"attribute vec4 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 u_matrix;varying vec4 vColor;uniform float currentTime;uniform float trailLength;varying float vTime;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=u_matrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize;vTime=1.0-((currentTime-aPos.w)/trailLength);}",fragmentShader:"precision highp float;varying vec4 vColor;uniform int uShape;varying float vTime;void main(void){if(vTime>1.0||vTime<0.0){discard;}if(uShape==1){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d<0.5){gl_FragColor=vColor;}else{discard;}}else{gl_FragColor=vec4(vColor.rgb,vColor.a*vTime);}}"}),this.f32BufferData=new Float32Array,this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer)}},{key:"onChanged",value:function(s,h){var f=this.gl;if(f){this.buffer=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,this.buffer);for(var x=[],g=s.color||[.1,.1,.9,1],_=s.size||5,L=0;L<h.length;L++){var F=h[L].geometry.coordinates,M=g;Object.prototype.toString.call(M)==="[object Function]"?M=M(h[L]):(M=h[L].color||g,"properties"in h[L]&&"color"in h[L].properties&&(M=h[L].properties.color)),M=this.normizedColor(M);var E=this.normizedPoint(F),P=_;P=Object.prototype.toString.call(P)==="[object Function]"?P(h[L]):Number(P);var O=h[L].time||L;"properties"in h[L]&&"time"in h[L].properties&&(O=h[L].properties.time),x.push(E[0],E[1],Number(F[2]||0),O),x.push(M[0],M[1],M[2],M[3]),x.push(P*window.devicePixelRatio)}s.endTime===void 0&&(this.endTime=h.length),this.bufferData=x,this.f32BufferData=new Float32Array(x),f.bufferData(f.ARRAY_BUFFER,this.f32BufferData,f.STATIC_DRAW)}}},{key:"render",value:function(s){var h=s.gl,f=s.matrix;0>=this.bufferData.length||(s=this.program,h.useProgram(s.program),h.uniformMatrix4fv(s.uniforms.u_matrix,!1,f),h.bindBuffer(h.ARRAY_BUFFER,this.buffer),f=this.f32BufferData.BYTES_PER_ELEMENT,h.enableVertexAttribArray(s.attributes.aPos),h.vertexAttribPointer(s.attributes.aPos,4,h.FLOAT,!1,9*f,0),h.enableVertexAttribArray(s.attributes.aColor),h.vertexAttribPointer(s.attributes.aColor,4,h.FLOAT,!1,9*f,4*f),h.enableVertexAttribArray(s.attributes.aSize),h.vertexAttribPointer(s.attributes.aSize,1,h.FLOAT,!1,9*f,8*f),h.uniform1f(s.uniforms.currentTime,this.time),h.uniform1f(s.uniforms.trailLength,this.options.trailLength||3),f=1,this.options.shape&&Nf[this.options.shape]&&(f=Nf[this.options.shape]),h.uniform1i(s.uniforms.uShape,f),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:this.options.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA]}),h.drawArrays(h.POINTS,0,this.bufferData.length/9),this.time+=this.options.step||.1,this.time>this.endTime&&(this.time=this.startTime))}}]),o}(xo),io=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.bufferData=[],c.startTime=c.options.startTime||0,c.endTime=c.options.endTime,c.time=c.startTime,c.autoUpdate=!0,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:[1,.05,.05,1],trailLength:3,step:.1,polygonOffset:[0,0]}}},{key:"initialize",value:function(s){this.gl=s,this.program=new ui(this.gl,{vertexShader:"precision highp float;attribute vec4 aPos;attribute vec4 aColor;uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;varying float vTime;varying vec4 vColor;void main(){gl_Position=u_matrix*vec4(aPos.xyz,1.0);vColor=aColor;vTime=1.0-((currentTime-aPos.w)/trailLength);}",fragmentShader:"precision highp float;uniform vec3 uFragColor;varying vec4 vColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(vColor.rgb,1.0*vTime);}"},this),this.buffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.buffer)}},{key:"setTime",value:function(s){this.time=s}},{key:"onChanged",value:function(s,h){var f=this.gl;if(f){this.buffer=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,this.buffer);for(var x=[],g=0,_=this.options.color,L=0;L<h.length;L++){var F=h[L].geometry.coordinates;h[L].color&&(_=h[L].color),"properties"in h[L]&&"color"in h[L].properties&&(_=h[L].properties.color),Object.prototype.toString.call(_)==="[object Function]"&&(_=_(h[L])),_=this.normizedColor(_),F.length>g&&(g=F.length);for(var M=0;M<F.length-1;M++){var E=this.normizedPoint(F[M]);x.push(E[0]),x.push(E[1]),x.push(E[2]),F[M][3]===void 0?x.push(M):x.push(Number(F[M][3])),x.push(_[0]),x.push(_[1]),x.push(_[2]),x.push(_[3]),E=this.normizedPoint(F[M+1]),x.push(E[0]),x.push(E[1]),x.push(E[2]),F[M+1][3]===void 0?x.push(M+1):x.push(Number(F[M+1][3])),x.push(_[0]),x.push(_[1]),x.push(_[2]),x.push(_[3])}}s.endTime===void 0&&(this.endTime=g),this.bufferData=x,this.f32BufferData=new Float32Array(x),f.bufferData(f.ARRAY_BUFFER,this.f32BufferData,f.STATIC_DRAW)}}},{key:"render",value:function(s){var h=s.gl,f=s.matrix;s=this.getOptions();var x=this.program;x.use(h),h.uniformMatrix4fv(x.uniforms.u_matrix,!1,f),h.bindBuffer(h.ARRAY_BUFFER,this.buffer),f=this.f32BufferData.BYTES_PER_ELEMENT,h.enableVertexAttribArray(x.attributes.aPos),h.vertexAttribPointer(x.attributes.aPos,4,h.FLOAT,!1,8*f,0),h.enableVertexAttribArray(x.attributes.aColor),h.vertexAttribPointer(x.attributes.aColor,4,h.FLOAT,!1,8*f,4*f),f=this.normizedColor(s.color),h.uniform3f(x.uniforms.uFragColor,f[0],f[1],f[2]),h.uniform1f(x.uniforms.currentTime,this.time),h.uniform1f(x.uniforms.trailLength,s.trailLength),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:s.blend==="lighter"?[h.ONE,h.ONE]:[h.SRC_ALPHA,h.ONE],polygonOffset:s.polygonOffset,depthMask:!1}),h.drawArrays(h.LINES,0,this.bufferData.length/8),this.time+=s.step,this.time>this.endTime&&(this.time=this.startTime)}}]),o}(xo),oi=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.index=[],s=c.canvas=document.createElement("canvas"),c.ctx=s.getContext("2d"),c.iconHash=new gs,c.boxHash=new gs,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{flat:!1,unit:"px",scale:1,angle:0,offset:[0,0],padding:[0,0]}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new ui(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute vec2 a_size;attribute vec2 a_offset;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform float devicePixelRatio;uniform float u_zoom_units;uniform float u_zIndex;uniform float u_scale;uniform bool u_unit_px;uniform bool u_flat;varying vec2 v_texture_coord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)+size.x*sin(a_rotation);}else if(corner==2.0){x+=size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)-size.x*sin(a_rotation);}else if(corner==3.0){x+=size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)-size.x*sin(a_rotation);}else{x+=-size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)+size.x*sin(a_rotation);}return vec3(x,y,coord.z);}void main(){v_texture_coord=a_texture_coord;if(u_flat){vec2 offset=a_offset;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;offset*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=u_zIndex;gl_Position=u_matrix*vec4(current.x+offset[0],current.y-offset[1],current.z,1.0);}else{vec4 position=u_matrix*vec4(a_pos,1.0);vec3 screen=position.xyz/position.w;vec2 halfSize=a_size/MAPV_resolution*devicePixelRatio*u_scale;vec2 offset=a_offset*2./MAPV_resolution*devicePixelRatio;if(!u_unit_px){halfSize/=u_zoom_units;offset/=u_zoom_units;}vec3 current=transformCoord(screen,halfSize,a_corner);current.xy=current.xy-offset;current.z+=u_zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}gl_FragColor=textureColor;
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:36,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:16},{name:"a_offset",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:32},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.canvas=this.boxHash=this.iconHash=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};this.gl&&(this.cachedData=[],this.boxHash.clear(),this.processCache(s,h,f))}},{key:"processCache",value:function(s,h,f){for(var x=this,g=s.icon,_=s.width,L=s.height,F=s.offset,M=s.angle,E=0;E<h.length;E++){var P=this.normizedPoint(h[E].geometry.coordinates),O=this.getProperty("icon",g,h[E]),B=this.getProperty("width",_,h[E]),X=this.getProperty("height",L,h[E]),W=this.getProperty("offset",F,h[E]),U=this.getProperty("angle",M,h[E]);P&&O&&(this.cachedData.push({point:P,icon:O,width:B,height:X,offset:W,angle:U,dataIndex:E}),this.iconHash.get(O)||this.iconHash.set(O,O))}h=dd(this.iconHash.entries()).filter(function(q){return typeof q[1]=="string"}).map(function(q){var he=Hi(q,2)[0];return new Ii(function(ge,_e){x.url2canvas(he,function(Se){x.iconHash.set(he,Se),ge()})})}),Ii.all(h).then(function(q){x.buildSprite(s),f.autoRender!==!1&&x.webglLayer&&x.webglLayer.render()})}},{key:"buildSprite",value:function(s){s=s.padding;var h=this.canvas,f=this.ctx,x=[],g=!0,_=!1,L=void 0;try{for(var F=Os(this.iconHash),M;!(g=(M=F.next()).done);g=!0){var E=Hi(M.value,2),P=E[1];if(typeof P!="string"){var O=P.width,B=P.height;x.push({w:O+s[0],h:B+s[0],width:O,height:B,key:E[0],icon:P})}}}catch(X){_=!0,L=X}finally{try{!g&&F.return&&F.return()}finally{if(_)throw L}}for(F=dc(x),M=0;M<x.length;M++)E=x[M],this.boxHash.get(E.key)||this.boxHash.set(E.key,E);for(M=Lr(F.w)||1,F=Lr(F.h)||1,h.width=M,h.height=F,f.save(),h=0;h<x.length;h++)F=x[h],f.drawImage(F.icon,F.x+s[0],F.y+s[1],F.width,F.height);f.restore(),this.loadTexture()}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.texture){var h=s.gl,f=s.matrix,x=this.getOptions(),g=this.program;g.use(h),this.throttleUpdate(s),this.setGLState({blend:!0,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA]}),g.setUniforms(vi(this.getCommonUniforms(s),{u_icon:this.texture,u_matrix:f,u_flat:x.flat,u_unit_px:x.unit==="px",u_zoom_units:this.map.getZoomUnits(),u_scale:x.scale,u_zIndex:x.zIndex,devicePixelRatio:window.devicePixelRatio})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(s){this.updateIcon(s)}},{key:"updateIcon",value:function(s){if(this.iconHash.size&&this.boxHash.size){var h=this.getOptions(),f=s.gl;s=s.matrix,h=h.enablePicked;var x=[],g=[],_=[],L=[],F=this.canvas.width,M=this.canvas.height,E=f.canvas.width/window.devicePixelRatio;f=f.canvas.height/window.devicePixelRatio;for(var P=new rc,O=0,B=0;B<this.cachedData.length;B++){var X=this.cachedData[B],W=X.point,U=X.width,q=X.height,he=X.offset,ge=X.angle,_e=X.dataIndex;if(X=this.boxHash.get(X.icon)){U=U||X.icon.width,q=q||X.icon.height;var Se=Hi(W,3);W=Se[0];var $e=Se[1];Se=Se[2];var Be=Qo.clone([W,$e,Se,1]);Qo.transformMat4(Be,Be,s),Qo.scale(Be,Be,1/Be[3]);var lt=(Be[0]+1)/2*E-U/2;Be=(-Be[1]+1)/2*f-q/2;var kt=lt+U,cr=Be+q;if(!(0>kt||0>cr||lt>E||Be>f||(lt={minX:lt,maxX:kt,minY:Be,maxY:cr},P.collides(lt)))){for(P.insert(lt),lt=0;4>lt;lt++)x.push(W,$e,Se),x.push(lt),x.push(U,q),x.push.apply(x,Vi(he)),x.push(ge*Math.PI/180);U=X.x/F,q=(X.x+X.w)/F,he=(X.y+X.h)/M,X=X.y/M,g.push(U,he,U,X,q,X,q,he),X=4*O,_.push(X,X+2,X+1,X,X+3,X+2),h&&(_e=this.indexToRgb(_e),L.push(_e[0]/255,_e[1]/255,_e[2]/255),L.push(_e[0]/255,_e[1]/255,_e[2]/255),L.push(_e[0]/255,_e[1]/255,_e[2]/255),L.push(_e[0]/255,_e[1]/255,_e[2]/255)),O+=1}}}this.index=_,this.vertexBuffer.updateData(new Float32Array(x)),this.uvBuffer.updateData(new Float32Array(g)),this.indexBuffer.updateData(new Uint32Array(_)),h&&this.pickBuffer.updateData(new Float32Array(L))}}},{key:"url2canvas",value:function(s,h){if((typeof s=="undefined"?"undefined":Ta(s))==="object")h(s);else{var f=new Image;f.crossOrigin="anonymous",f.onload=function(){var x=f.width,g=f.height,_=document.createElement("canvas");_.width=x,_.height=g,_.getContext("2d").drawImage(f,0,0,x,g),h(_)},f.onerror=function(){var x=document.createElement("canvas");x.width=20,x.height=40;var g=x.getContext("2d");g.fillStyle="red",g.beginPath(),g.lineTo(0,0),g.lineTo(20,0),g.lineTo(10,40),g.closePath(),g.fill(),h(x)},f.src=s}}},{key:"loadTexture",value:function(){var s=this;this.canvas?Or(this.gl,this.canvas,function(h){s.texture=h}):this.texture=null}}]),o}(xo),uu=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.initData(),c.date=new Date,c.autoUpdate=!0,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:"rgba(25, 25, 250, 1)",blend:"normal",width:2,antialias:!1,interval:.1,duration:2,trailLength:.5,minZoom:2,maxZoom:25,polygonOffset:[0,0]}}},{key:"initData",value:function(){this.dataMgr={position:[],prev:[],next:[],direction:[],color:[],index:[],counter:[]}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.program=new ui(this.gl,{vertexShader:`uniform mat4 u_matrix;uniform float thickness;uniform vec4 uSelectedColor;attribute vec3 position;attribute vec3 next;attribute vec3 previous;attribute float direction;attribute vec4 aColor;attribute float aCounter;attribute vec2 uv;varying vec4 vColor;varying vec2 vNormal;varying float vCounter;vec2 project(vec4 coord){vec3 screen=coord.xyz/coord.w;vec2 clip=(screen.xy+1.0)/2.0;return clip*MAPV_resolution;}vec4 unproject(vec2 projected,float z,float w){vec2 clip=projected/MAPV_resolution;vec2 screen=clip*2.0-1.0;return vec4(screen*w,z,w);}void main(){vColor=aColor;vCounter=aCounter;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
vec4 previousProjected=u_matrix*vec4(previous,1.0);vec4 currentProjected=u_matrix*vec4(position,1.0);vec4 nextProjected=u_matrix*vec4(next,1.0);vec2 currentScreen=project(currentProjected);vec2 previousScreen=project(previousProjected);vec2 nextScreen=project(nextProjected);float len=thickness;float orientation=direction;vec2 dir=vec2(0.0);if(currentScreen==previousScreen){dir=normalize(nextScreen-currentScreen);}else if(currentScreen==nextScreen){dir=normalize(currentScreen-previousScreen);}else{vec2 dirA=normalize((currentScreen-previousScreen));vec2 dirB=normalize((nextScreen-currentScreen));vec2 tangent=normalize(dirA+dirB);vec2 perp=vec2(-dirA.y,dirA.x);vec2 miter=vec2(-tangent.y,tangent.x);dir=tangent;float angle=40.0;if(dot(dirA,dirB)>cos(radians(angle))){len=thickness/dot(miter,perp);}}vec2 normal=vec2(-dir.y,dir.x);vNormal=normal*orientation;normal*=len/2.0;vec2 pos=currentScreen+normal*orientation;vec4 finalPos=unproject(pos,currentProjected.z,currentProjected.w);gl_Position=finalPos;}`,fragmentShader:"precision highp float;uniform bool uAntialias;uniform bool uAnimate;uniform float uTime;uniform float duration;uniform float interval;uniform float trailLength;varying vec4 vColor;varying vec2 vNormal;varying float vCounter;void main(){vec4 color=vColor;if(uAntialias){float blur=1.0;blur=1.0-smoothstep(0.98,1.0,length(vNormal));color.a*=blur;}if(uAnimate){float alpha=1.0-fract(mod(1.0-vCounter,interval)*(1.0/interval)+uTime/duration);alpha=(alpha+trailLength-1.0)/trailLength;color.a*=alpha;}gl_FragColor=color;}",defines:h.enablePicked?["PICK"]:[]},this),this.prevBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.currentBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.nextBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.directionBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.counterBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{stride:12,name:"previous",buffer:this.prevBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"position",buffer:this.currentBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"next",buffer:this.nextBuffer,size:3,type:"FLOAT",offset:0},{stride:4,name:"direction",buffer:this.directionBuffer,size:1,type:"FLOAT",offset:0},{stride:16,name:"aColor",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0},{stride:4,name:"aCounter",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.options=this.data=this.dataMgr=this.indexBuffer=this.uvBuffer=this.counterBuffer=this.directionBuffer=this.colorBuffer=this.nextBuffer=this.currentBuffer=this.prevBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){var f=this;if(this.gl){this.initData();for(var x=1,g=[],_=0;_<h.length;_++){var L=[],F=h[_].geometry.coordinates;F&&0<F.length&&(L=h[_].geometry.type==="Polygon"?F[0].map(function(B){return f.normizedPoint(B)}):F.map(function(B){return f.normizedPoint(B)})),L=Jp(L),F=L.total,g[_]=L.arr,x=Math.max(F,x)}for(_=[],L=s.color,F=0;F<h.length;F++){var M=[],E=h[F].geometry.coordinates;E&&0<E.length&&(M=h[F].geometry.type==="Polygon"?E[0].map(function(B){return f.normizedPoint(B)}):E.map(function(B){return f.normizedPoint(B)})),E=L,Object.prototype.toString.call(E)==="[object Function]"?E=E(h[F]):(E=h[F].color||L,"properties"in h[F]&&"color"in h[F].properties&&(E=h[F].properties.color)),E=this.normizedColor(E);for(var P=this.addMultipleCoords(M),O=0;O<P.length;O++)this.processData(this.dataMgr,P[O],g[F],x,E);if(s.enablePicked)for(E=this.indexToRgb(F),P=0;P<M.length;P++)_.push(E[0]/255,E[1]/255,E[2]/255),_.push(E[0]/255,E[1]/255,E[2]/255),s.repeat&&(_.push(E[0]/255,E[1]/255,E[2]/255),_.push(E[0]/255,E[1]/255,E[2]/255),_.push(E[0]/255,E[1]/255,E[2]/255),_.push(E[0]/255,E[1]/255,E[2]/255))}this.counterBuffer.updateData(new Float32Array(this.dataMgr.counter)),this.currentBuffer.updateData(new Float32Array(this.dataMgr.position)),this.prevBuffer.updateData(new Float32Array(this.dataMgr.prev)),this.nextBuffer.updateData(new Float32Array(this.dataMgr.next)),this.directionBuffer.updateData(new Float32Array(this.dataMgr.direction)),this.colorBuffer.updateData(new Float32Array(this.dataMgr.color)),this.indexBuffer.updateData(new Uint32Array(this.dataMgr.index)),s.enablePicked&&this.pickBuffer.updateData(new Float32Array(_))}}},{key:"processData",value:function(s,h,f,x,g){var _,L,F,M,E,P,O,B=h.length,X=s.position.length/6;f=Il(f.map(function(ge){return ge/x}));var W=Il(h.map(function(ge){return-1}),!0),U=Il(h),q=Il(h.map(Zf(-1))),he=Il(h.map(Zf(1)));h=Il(h.map(function(ge){return g})),B=jd(B,X),(_=s.counter).push.apply(_,Vi(f)),(L=s.position).push.apply(L,Vi(Hu(U))),(F=s.prev).push.apply(F,Vi(Hu(q))),(M=s.next).push.apply(M,Vi(Hu(he))),(E=s.direction).push.apply(E,Vi(W)),(P=s.color).push.apply(P,Vi(Hu(h))),(O=s.index).push.apply(O,Vi(B))}},{key:"render",value:function(s){var h=s.gl,f=s.matrix,x=this.dataMgr;if(x&&!(0>=x.index.length)){var g=this.getOptions(),_=this.program;if(_.use(h),this.map){var L=this.map.getZoom();L=!!(L>=g.minZoom&&L<=g.maxZoom&&this.autoUpdate)}else L=!0;_.setUniforms(vi(this.getCommonUniforms(s),{u_matrix:f,thickness:g.width,uAntialias:g.antialias,uTime:(new Date-this.date)/1e3,uAnimate:L,duration:g.duration,interval:g.interval,trailLength:g.trailLength})),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:g.blend==="lighter"?[h.SRC_ALPHA,h.ONE]:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:g.polygonOffset}),this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,x.index.length,h.UNSIGNED_INT,0)}}}]),o}(xo),pa=function(m){function o(c,s){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c,s))}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.program=new ui(this.gl,{vertexShader:`precision highp float;attribute vec3 a_pos;attribute vec2 a_texture_coord;uniform sampler2D uTerrain;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;varying vec2 v_texture_coord;void main(){v_texture_coord=a_texture_coord;vec3 pos=a_pos.xyz;
#if defined(TERRAIN)
vec4 terrainColor=texture2D(uTerrain,vec2(v_texture_coord.s,v_texture_coord.t));vec3 rgb=terrainColor.rgb*256.0;pos.z=-10000.0+((rgb.r*256.0*256.0+rgb.g*256.0+rgb.b)*0.1);pos.z=pos.z-60.0;
#endif
vec4 position=u_proj_matrix*u_mv_matrix*vec4(pos,1.0);gl_Position=position;}`,fragmentShader:"precision highp float;varying vec2 v_texture_coord;uniform sampler2D uTile;uniform bool uUseFilter;uniform vec4 uFilterColor;void main(){vec4 textureColor=texture2D(uTile,vec2(v_texture_coord.s,v_texture_coord.t));if(uUseFilter){textureColor=textureColor*uFilterColor;}gl_FragColor=textureColor;}",defines:h.terrain?["TERRAIN"]:""},this),this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new la({gl:s,program:this.program,attributes:[{name:"a_pos",buffer:this.vertexBuffer,stride:20,size:3,type:"FLOAT",offset:0},{name:"a_texture_coord",buffer:this.vertexBuffer,size:2,stride:20,type:"FLOAT",offset:12}]})}},{key:"onChanged",value:function(s,h){var f=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){f.loadTexture(function(){f.parseData(h),f.dataTime=new Date,f.webglLayer.render()})},0))}},{key:"render",value:function(s){var h=s.gl,f=s.projectionMatrix;s=s.viewMatrix;var x=this.getOptions(),g=this.program,_=g.uniforms;g.use(h),this.texture&&(h.activeTexture(h.TEXTURE0),h.uniform1i(_.uTile,0),h.bindTexture(h.TEXTURE_2D,this.texture),h.activeTexture(h.TEXTURE1),h.uniform1i(_.uTerrain,1),h.bindTexture(h.TEXTURE_2D,this.terrainSampler),this.setGLState({cullFace:!1}),g.setUniforms({u_proj_matrix:f,uUseFilter:!!x.filterColor,uFilterColor:this.normizedColor(x.filterColor||"rgba(0, 0, 100, 1.0)"),u_mv_matrix:s}),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0)))}},{key:"loadTexture",value:function(s){var h=this,f=this.getOptions();f.tile?f.terrain?Or(this.gl,f.terrain,function(x,g){h.terrainSampler=x,Or(h.gl,f.tile,function(_,L){h.texture=_,s&&s(),h.webglLayer.render()})},{TEXTURE_WRAP_S:"MIRRORED_REPEAT",TEXTURE_WRAP_T:"MIRRORED_REPEAT"}):Or(this.gl,f.tile,function(x,g){h.texture=x,s&&s(),h.webglLayer.render()}):(this.texture=null,s&&s())}},{key:"parseData",value:function(s){var h=this,f=[],x=[];if(s&&s[0]){var g=s[0].geometry.coordinates[0];g=g.map(function(B){return h.normizedPoint(B)}),s=g[0][0];var _=g[0][1],L=g[0][2],F=(g[2][0]-s)/16;g=(g[2][1]-_)/16;for(var M=0;16>=M;M++)for(var E=0;16>=E;E++)if(f.push(s+F*E,_+g*M,L),f.push(E/16,M/16),16>E&&16>M){var P=17*M+E,O=17*(M+1)+E;x.push(P,O+1,P+1),x.push(P,O,O+1)}}this.index=x,this.vertexBuffer.updateData(new Float32Array(f)),this.indexBuffer.updateData(new Uint32Array(x))}}]),o}(xo),mo=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.index=[],s=c.canvas=document.createElement("canvas"),c.ctx=s.getContext("2d"),c.iconHash=new gs,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{unit:"px",scale:1,angle:0,offsetZ:0,padding:[0,0],polygonOffset:[0,0]}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.program=new ui(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute float a_offsetZ;attribute vec2 a_size;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform float u_zoom_units;uniform float u_scale;uniform bool u_unit_px;varying vec2 v_texture_coord;/***\u4E09\u7EF4\u7A7A\u95F4\u5185\uFF0C\u7ED5Z\u8F74\u65CB\u8F6C\u7684\u77E9\u9635\uFF0C\u53F3\u624B\u5750\u6807\u7CFB\u4E0B*[x'][cos0-sin0  0  0]*[y']=[sin0 cos0   0  0]*[z'][0     0     1  0]*[1][0     0     0  1]*/mat3 rotateZ(float angle){float cos0=cos(angle);float sin0=sin(angle);return mat3(cos0,sin0,0.,-sin0,cos0,0.,0.,0.,1.);}vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;float z=coord.z;mat3 mat=rotateZ(a_rotation);vec3 rotated=vec3(size[0],0.0,size[1]);if(corner==1.0){rotated=mat*vec3(-size[0],0.0,size[1]);}else if(corner==2.0){rotated=mat*vec3(size[0],0.0,size[1]);}else if(corner==3.0){rotated=mat*vec3(size[0],0.0,-size[1]);}else{rotated=mat*vec3(-size[0],0.0,-size[1]);}x+=rotated.x;y+=rotated.y;z+=rotated.z;return vec3(x,y,z);}void main(){v_texture_coord=a_texture_coord;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=a_offsetZ;gl_Position=u_matrix*vec4(current,1.0);}",fragmentShader:`precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}gl_FragColor=textureColor;
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"a_offsetZ",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.canvas=this.iconHash=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h)}},{key:"forceUpdate",value:function(){this.gl&&this.processCache(this.options,this.data)}},{key:"processCache",value:function(s,h){var f=this;this.cachedData=[];for(var x=s.icon,g=s.width,_=s.height,L=s.offsetZ,F=s.angle,M=0;M<h.length;M++){var E=this.normizedPoint(h[M].geometry.coordinates),P=this.getProperty("icon",x,h[M]),O=this.getProperty("width",g,h[M]),B=this.getProperty("height",_,h[M]),X=this.getProperty("angle",F,h[M]),W=this.getProperty("offsetZ",L,h[M]);E&&P&&(this.cachedData.push({point:E,icon:P,width:O,height:B,offsetZ:W,angle:X,index:M}),this.iconHash.get(P)||this.iconHash.set(P,P))}h=dd(this.iconHash.entries()).filter(function(U){return typeof U[1]=="string"}).map(function(U){var q=Hi(U,2)[0];return new Ii(function(he,ge){f.url2canvas(q,function(_e){f.iconHash.set(q,_e),he()})})}),Ii.all(h).then(function(U){f.buildSprite(s),f.webglLayer.render()})}},{key:"buildSprite",value:function(s){var h=s.padding,f=this.canvas,x=this.ctx,g=[],_=new gs,L=!0,F=!1,M=void 0;try{for(var E=Os(this.iconHash),P;!(L=(P=E.next()).done);L=!0){var O=Hi(P.value,2),B=O[1];if(typeof B!="string"){var X=B.width,W=B.height;g.push({w:X+h[0],h:W+h[0],width:X,height:W,key:O[0],icon:B})}}}catch(U){F=!0,M=U}finally{try{!L&&E.return&&E.return()}finally{if(F)throw M}}for(F=dc(g),L=0;L<g.length;L++)M=g[L],_.get(M.key)||_.set(M.key,M);for(L=Lr(F.w),F=Lr(F.h),f.width=L||1,f.height=F||1,x.save(),f=0;f<g.length;f++)M=g[f],x.drawImage(M.icon,M.x+h[0],M.y+h[1],M.width,M.height);x.restore(),this.loadTexture(),this.buildVertex(s,_,L,F)}},{key:"buildVertex",value:function(s,h,f,x){s=s.enablePicked;for(var g=[],_=[],L=[],F=[],M=0;M<this.cachedData.length;M++){var E=this.cachedData[M],P=E.point,O=E.width,B=E.height,X=E.offsetZ,W=E.angle,U=E.index;if(E=h.get(E.icon)){O=O||E.icon.width,B=B||E.icon.height;var q=Hi(P,3);P=q[0];var he=q[1];q=q[2];for(var ge=0;4>ge;ge++)g.push(P,he,q),g.push(ge),g.push(O,B),g.push(X),g.push(W*Math.PI/180);O=E.x/f,B=(E.x+E.w)/f,X=(E.y+E.h)/x,E=E.y/x,_.push(O,X,O,E,B,E,B,X),E=4*M,L.push(E,E+2,E+1,E,E+3,E+2),s&&(U=this.indexToRgb(U),F.push(U[0]/255,U[1]/255,U[2]/255),F.push(U[0]/255,U[1]/255,U[2]/255),F.push(U[0]/255,U[1]/255,U[2]/255),F.push(U[0]/255,U[1]/255,U[2]/255))}}this.index=L,this.vertexBuffer.updateData(new Float32Array(g)),this.uvBuffer.updateData(new Float32Array(_)),this.indexBuffer.updateData(new Uint32Array(L)),s&&this.pickBuffer.updateData(new Float32Array(F))}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.iconHash&&this.texture){var h=s.gl,f=s.matrix,x=this.getOptions(),g=this.program;g.use(h),this.setGLState({blend:!0,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:x.polygonOffset}),g.setUniforms(vi(this.getCommonUniforms(s),{u_icon:this.texture,u_matrix:f,u_unit_px:x.unit==="px",u_zoom_units:this.map.getZoomUnits(),u_scale:x.scale})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"url2canvas",value:function(s,h){if((typeof s=="undefined"?"undefined":Ta(s))==="object")h(s);else{var f=new Image;f.crossOrigin="anonymous",f.onload=function(){var x=f.width,g=f.height,_=document.createElement("canvas");_.width=x,_.height=g,_.getContext("2d").drawImage(f,0,0,x,g),h(_)},f.onerror=function(){var x=document.createElement("canvas");x.width=20,x.height=40;var g=x.getContext("2d");g.fillStyle="red",g.beginPath(),g.lineTo(0,0),g.lineTo(20,0),g.lineTo(10,40),g.closePath(),g.fill(),h(x)},f.src=s}}},{key:"loadTexture",value:function(){var s=this;this.canvas?Or(this.gl,this.canvas,function(h){s.texture=h}):this.texture=null}}]),o}(xo),Hh=function(m){function o(c){qr(this,o);var s=Fn(this,(o.__proto__||nn(o)).call(this,c));return c=s.getOptions(),s.shapeLayer=new Rf({enablePicked:c.enablePicked}),s.lineLayer=new bv,s.children=[s.shapeLayer,s.lineLayer],s}return _n(o,m),on(o,[{key:"pick",value:function(s,h){return this.shapeLayer.pick(s,h)}},{key:"onOptionsChanged",value:function(s){this.shapeLayer.setOptions({onClick:function(f){s.onClick&&s.onClick(f)},selectedIndex:s.selectedIndex,selectedColor:s.selectedColor,height:0,polygonOffset:[2,2],autoSelect:s.autoSelect,color:s.fillColor,opacity:s.fillOpacity,topColor:s.fillColor,useLight:!1}),this.lineLayer.setOptions({dashArray:s.dashArray,color:s.lineColor,width:s.lineWidth,lineJoin:s.lineJoin})}},{key:"onDataChanged",value:function(s){this.shapeLayer.setData(s),this.lineLayer.setData(s,{closePath:!0})}},{key:"getDefaultOptions",value:function(){return{enablePicked:!1,selectedIndex:-1,selectedColor:"#ff0000",autoSelect:!0,dashArray:[0,0],lineColor:"rgba(250, 250, 25, 1)",lineWidth:2,lineJoin:"miter",fillColor:"rgba(25, 25, 250, 1)",fillOpacity:1}}}]),o}(Si),yi=yi||{},Am=0,Aa=null,bp=yi.Scene=function(m,o){this.name=o.name!==void 0?o.name:null,this.nodes=Array(o.nodes.length);for(var c=0,s=o.nodes.length;c<s;c++)this.nodes[c]=m.nodes[o.nodes[c]];this.extensions=o.extensions!==void 0?o.extensions:null,this.extras=o.extras!==void 0?o.extras:null,this.boundingBox=null},mh=yi.BoundingBox=function(m,o,c){m=m||In.fromValues(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),o=o||In.fromValues(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),c===void 0||c===!0?(this.min=In.clone(m),this.max=In.clone(o)):(this.min=m,this.max=o),this.transform=jr.create()};mh.prototype.updateBoundingBox=function(m){In.min(this.min,this.min,m.min),In.max(this.max,this.max,m.max)},mh.prototype.calculateTransform=function(){this.transform[0]=this.max[0]-this.min[0],this.transform[5]=this.max[1]-this.min[1],this.transform[10]=this.max[2]-this.min[2],this.transform[12]=this.min[0],this.transform[13]=this.min[1],this.transform[14]=this.min[2]},mh.getAABBFromOBB=function(){var m=In.create(),o=In.create(),c=In.create(),s=In.create(),h=In.create();return function(f,x){In.set(m,x[0],x[1],x[2]),In.set(o,x[4],x[5],x[6]),In.set(c,x[8],x[9],x[10]),x=In.fromValues(x[12],x[13],x[14]);var g=In.clone(x);return In.scale(s,m,f.min[0]),In.scale(h,m,f.max[0]),In.min(m,s,h),In.add(x,x,m),In.max(m,s,h),In.add(g,g,m),In.scale(s,o,f.min[1]),In.scale(h,o,f.max[1]),In.min(o,s,h),In.add(x,x,o),In.max(o,s,h),In.add(g,g,o),In.scale(s,c,f.min[2]),In.scale(h,c,f.max[2]),In.min(c,s,h),In.add(x,x,c),In.max(c,s,h),In.add(g,g,c),f=new mh(x,g,!1),f.calculateTransform(),f}}();var Cg=yi.Accessor=function(m,o){this.bufferView=o,this.componentType=m.componentType,this.byteOffset=m.byteOffset!==void 0?m.byteOffset:0,this.byteStride=o.byteStride,this.normalized=m.normalized!==void 0?m.normalized:!1,this.count=m.count,this.type=m.type,this.size=ci[this.type],this.min=m.min,this.max=m.max,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null};Cg.prototype.prepareVertexAttrib=function(m,o){o.vertexAttribPointer(m,this.size,this.componentType,this.normalized,this.byteStride,this.byteOffset),o.enableVertexAttribArray(m)};var Ed=yi.BufferView=function(m,o){this.byteLength=m.byteLength,this.byteOffset=m.byteOffset!==void 0?m.byteOffset:0,this.byteStride=m.byteStride!==void 0?m.byteStride:0,this.target=m.target!==void 0?m.target:null,this.data=o.slice(this.byteOffset,this.byteOffset+this.byteLength),this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null,this.buffer=null};Ed.prototype.createBuffer=function(m){this.buffer=m.createBuffer()},Ed.prototype.bindData=function(m){return this.target?(m.bindBuffer(this.target,this.buffer),m.bufferData(this.target,this.data,m.STATIC_DRAW),m.bindBuffer(this.target,null),!0):!1};var Ss=yi.Camera=function(m){this.name=m.name!==void 0?m.name:null,this.type=m.type,this.othographic=m.othographic===void 0?null:m.othographic,this.perspective=m.perspective===void 0?null:{yfov:m.perspective.yfov,znear:m.perspective.znear,zfar:m.perspective.zfar!==void 0?m.perspective.zfar:null,aspectRatio:m.perspective.aspectRatio!==void 0?m.perspective.aspectRatio:null},this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null},ga=yi.Node=function(m,o){if(this.name=m.name!==void 0?m.name:null,this.nodeID=o,this.camera=m.camera!==void 0?m.camera:null,this.matrix=jr.create(),m.hasOwnProperty("matrix")){for(o=0;16>o;++o)this.matrix[o]=m.matrix[o];this.translation=In.create(),jr.getTranslation(this.translation,this.matrix),this.rotation=Xa.create(),jr.getRotation(this.rotation,this.matrix),this.scale=In.create(),jr.getScaling(this.scale,this.matrix)}else this.getTransformMatrixFromTRS(m.translation,m.rotation,m.scale);this.children=m.children||[],this.mesh=m.mesh!==void 0?Aa.glTF.meshes[m.mesh]:null,this.skin=m.skin!==void 0?m.skin:null,m.extensions!==void 0&&m.extensions.gl_avatar!==void 0&&Aa.enableGLAvatar===!0&&(this.skin=new bi(Aa.glTF,Aa.skeletonGltf.skins[Aa.skeletonGltf.json.extensions.gl_avatar.skins[m.extensions.gl_avatar.skin.name]],m.extensions.gl_avatar.skin.inverseBindMatrices)),this.weights=m.weights!==void 0?m.weights:null,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null,this.aabb=null,this.bvh=new mh};ga.prototype.traverse=function(m,o){o(this,m),m=0;for(var c=this.children.length;m<c;m++)this.children[m].traverse(this,o)},ga.prototype.traversePostOrder=function(m,o){for(var c=0,s=this.children.length;c<s;c++)this.children[c].traversePostOrder(this,o);o(this,m)},ga.prototype.traverseTwoExecFun=function(m,o,c){o(this,m);for(var s=0,h=this.children.length;s<h;s++)this.children[s].traverseTwoExecFun(this,o,c);c(this,m)};var bd=jr.create();ga.prototype.getTransformMatrixFromTRS=function(m,o,c){this.translation=m!==void 0?In.fromValues(m[0],m[1],m[2]):In.fromValues(0,0,0),this.rotation=o!==void 0?Qo.fromValues(o[0],o[1],o[2],o[3]):Qo.fromValues(0,0,0,1),this.scale=c!==void 0?In.fromValues(c[0],c[1],c[2]):In.fromValues(1,1,1),this.updateMatrixFromTRS()},ga.prototype.updateMatrixFromTRS=function(){jr.fromRotationTranslation(bd,this.rotation,this.translation),jr.scale(this.matrix,bd,this.scale)};var Bi=yi.Mesh=function(m,o){this.meshID=o,this.name=m.name!==void 0?m.name:null,this.primitives=[],this.boundingBox=null,o=0;for(var c=m.primitives.length;o<c;++o){var s=m.primitives[o];s=new vh(Aa.glTF,s),this.primitives.push(s),s.boundingBox&&(this.boundingBox||(this.boundingBox=new mh),this.boundingBox.updateBoundingBox(s.boundingBox))}this.boundingBox&&this.boundingBox.calculateTransform(),this.weights=m.weights!==void 0?m.weights:null,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null},vh=yi.Primitive=function(m,o){this.attributes=o.attributes,this.indices=o.indices!==void 0?o.indices:null;var c;if(o.extensions!==void 0&&o.extensions.gl_avatar!==void 0&&Aa.enableGLAvatar===!0&&o.extensions.gl_avatar.attributes)for(c in o.extensions.gl_avatar.attributes)this.attributes[c]=o.extensions.gl_avatar.attributes[c];this.indices!==null?(this.indicesComponentType=m.json.accessors[this.indices].componentType,this.indicesLength=m.json.accessors[this.indices].count,this.indicesOffset=m.json.accessors[this.indices].byteOffset||0):(this.drawArraysCount=m.json.accessors[this.attributes.POSITION].count,this.drawArraysOffset=m.json.accessors[this.attributes.POSITION].byteOffset||0);for(c in this.attributes)this.attributes[c]=m.accessors[this.attributes[c]];this.material=o.material!==void 0?m.materials[o.material]:null,this.mode=o.mode!==void 0?o.mode:4,this.targets=o.targets,this.extensions=o.extensions!==void 0?o.extensions:null,this.extras=o.extras!==void 0?o.extras:null,this.boundingBox=this.shader=this.indexBuffer=this.vertexBuffer=this.vertexArray=null,this.attributes.POSITION!==void 0&&(m=this.attributes.POSITION,m.max&&m.type==="VEC3"&&(this.boundingBox=new mh(In.fromValues(m.min[0],m.min[1],m.min[2]),In.fromValues(m.max[0],m.max[1],m.max[2]),!1),this.boundingBox.calculateTransform()))},Pc=yi.Texture=function(m){this.name=m.name!==void 0?m.name:null,this.sampler=m.sampler!==void 0?Aa.glTF.samplers[m.sampler]:null,this.source=m.source!==void 0?Aa.glTF.images[m.source]:null,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null,this.texture=null};Pc.prototype.createTexture=function(m){this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,this.source),m.generateMipmap(m.TEXTURE_2D),m.bindTexture(m.TEXTURE_2D,null)};var wg=yi.Sampler=function(m){this.name=m.name!==void 0?m.name:null,this.magFilter=m.magFilter!==void 0?m.magFilter:null,this.minFilter=m.minFilter!==void 0?m.minFilter:null,this.wrapS=m.wrapS!==void 0?m.wrapS:10497,this.wrapT=m.wrapT!==void 0?m.wrapT:10497,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null,this.sampler=null};wg.prototype.createSampler=function(m){this.sampler=m.createSampler(),this.minFilter?m.samplerParameteri(this.sampler,m.TEXTURE_MIN_FILTER,this.minFilter):m.samplerParameteri(this.sampler,m.TEXTURE_MIN_FILTER,m.NEAREST_MIPMAP_LINEAR),this.magFilter?m.samplerParameteri(this.sampler,m.TEXTURE_MAG_FILTER,this.magFilter):m.samplerParameteri(this.sampler,m.TEXTURE_MAG_FILTER,m.LINEAR),m.samplerParameteri(this.sampler,m.TEXTURE_WRAP_S,this.wrapS),m.samplerParameteri(this.sampler,m.TEXTURE_WRAP_T,this.wrapT)};var Ld=yi.TextureInfo=function(m){this.index=m.index,this.texCoord=m.texCoord!==void 0?m.texCoord:0,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null},Cm=yi.PbrMetallicRoughness=function(m){this.baseColorFactor=m.baseColorFactor!==void 0?m.baseColorFactor:[1,1,1,1],this.baseColorTexture=m.baseColorTexture!==void 0?new Ld(m.baseColorTexture):null,this.metallicFactor=m.metallicFactor!==void 0?m.metallicFactor:1,this.roughnessFactor=m.roughnessFactor!==void 0?m.roughnessFactor:1,this.metallicRoughnessTexture=m.metallicRoughnessTexture!==void 0?new Ld(m.metallicRoughnessTexture):null,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null},Gh=yi.NormalTextureInfo=function(m){this.index=m.index,this.texCoord=m.texCoord!==void 0?m.texCoord:0,this.scale=m.scale!==void 0?m.scale:1,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null},oc=yi.OcclusionTextureInfo=function(m){this.index=m.index,this.texCoord=m.texCoord!==void 0?m.texCoord:0,this.strength=m.strength!==void 0?m.strength:1,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null},v0=yi.Material=function(m){this.name=m.name!==void 0?m.name:null,this.pbrMetallicRoughness=m.pbrMetallicRoughness!==void 0?new Cm(m.pbrMetallicRoughness):new Cm({baseColorFactor:[1,1,1,1],metallicFactor:1,metallicRoughnessTexture:1}),this.normalTexture=m.normalTexture!==void 0?new Gh(m.normalTexture):null,this.occlusionTexture=m.occlusionTexture!==void 0?new oc(m.occlusionTexture):null,this.emissiveTexture=m.emissiveTexture!==void 0?new Ld(m.emissiveTexture):null,this.emissiveFactor=m.emissiveFactor!==void 0?m.emissiveFactor:[0,0,0],this.alphaMode=m.alphaMode!==void 0?m.alphaMode:"OPAQUE",this.alphaCutoff=m.alphaCutoff!==void 0?m.alphaCutoff:.5,this.doubleSided=m.doubleSided||!1,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null},y0=yi.Skin=function(m,o,c){this.name=o.name!==void 0?o.name:null,this.skinID=c,this.joints=Array(o.joints.length);var s;for(c=0,s=this.joints.length;c<s;c++)this.joints[c]=m.nodes[o.joints[c]];if(this.skeleton=o.skeleton!==void 0?m.nodes[o.skeleton]:null,this.inverseBindMatrices=o.inverseBindMatrices!==void 0?m.accessors[o.inverseBindMatrices]:null,this.extensions=o.extensions!==void 0?o.extensions:null,this.extras=o.extras!==void 0?o.extras:null,this.uniformBlockID=Am++,this.inverseBindMatrices)for(this.inverseBindMatricesData=Vd(this.inverseBindMatrices),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(1040),c=0,s=this.inverseBindMatricesData.length;c<s;c+=16)this.inverseBindMatrix.push(jr.fromValues(this.inverseBindMatricesData[c],this.inverseBindMatricesData[c+1],this.inverseBindMatricesData[c+2],this.inverseBindMatricesData[c+3],this.inverseBindMatricesData[c+4],this.inverseBindMatricesData[c+5],this.inverseBindMatricesData[c+6],this.inverseBindMatricesData[c+7],this.inverseBindMatricesData[c+8],this.inverseBindMatricesData[c+9],this.inverseBindMatricesData[c+10],this.inverseBindMatricesData[c+11],this.inverseBindMatricesData[c+12],this.inverseBindMatricesData[c+13],this.inverseBindMatricesData[c+14],this.inverseBindMatricesData[c+15]))},bi=yi.SkinLink=function(m,o,c){if(this.isLink=!0,m.skins||(m.skins=[]),m.skins.push(this),this.name=o.name,this.skinID=m.skins.length-1,this.joints=o.joints,this.skeleton=o.skeleton,this.inverseBindMatrices=c!==void 0?m.accessors[c]:null,this.uniformBlockID=Am++,this.inverseBindMatrices)for(this.inverseBindMatricesData=Vd(this.inverseBindMatrices),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(1040),m=0,o=this.inverseBindMatricesData.length;m<o;m+=16)this.inverseBindMatrix.push(jr.fromValues(this.inverseBindMatricesData[m],this.inverseBindMatricesData[m+1],this.inverseBindMatricesData[m+2],this.inverseBindMatricesData[m+3],this.inverseBindMatricesData[m+4],this.inverseBindMatricesData[m+5],this.inverseBindMatricesData[m+6],this.inverseBindMatricesData[m+7],this.inverseBindMatricesData[m+8],this.inverseBindMatricesData[m+9],this.inverseBindMatricesData[m+10],this.inverseBindMatricesData[m+11],this.inverseBindMatricesData[m+12],this.inverseBindMatricesData[m+13],this.inverseBindMatricesData[m+14],this.inverseBindMatricesData[m+15]))},vo=yi.Target=function(m){this.nodeID=m.node!==void 0?m.node:null,this.path=m.path,this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null},Bo=yi.Channel=function(m,o){this.sampler=o.samplers[m.sampler],this.target=new vo(m.target),this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null},jl=yi.AnimationSampler=function(m,o){this.input=m.accessors[o.input],this.output=m.accessors[o.output],this.inputTypedArray=Vd(this.input),this.outputTypedArray=Vd(this.output),this.interpolation=o.interpolation!==void 0?o.interpolation:"LINEAR",this.extensions=o.extensions!==void 0?o.extensions:null,this.extras=o.extras!==void 0?o.extras:null,this.curIdx=0,this.curValue=Qo.create(),this.endT=this.inputTypedArray[this.inputTypedArray.length-1],this.inputMax=this.endT-this.inputTypedArray[0]},wm=Qo.create(),Ts=Qo.create();jl.prototype.getValue=function(m){m>this.endT&&(m-=this.inputMax*Math.ceil((m-this.endT)/this.inputMax),this.curIdx=0);for(var o=this.inputTypedArray.length;this.curIdx<=o-2&&m>=this.inputTypedArray[this.curIdx+1];)this.curIdx++;this.curIdx>=o-1&&(m-=this.inputMax,this.curIdx=0),o=ci[this.output.type];var c=o===4?Xa.slerp:Qo.lerp,s=this.curIdx,h=s*o,f=h+o;for(m=Math.max(0,m-this.inputTypedArray[s])/(this.inputTypedArray[s+1]-this.inputTypedArray[s]),s=0;s<o;s++)wm[s]=this.outputTypedArray[h+s],Ts[s]=this.outputTypedArray[f+s];switch(this.interpolation){case"LINEAR":c(this.curValue,wm,Ts,m)}};var _m=yi.Animation=function(m,o){this.name=o.name!==void 0?o.name:null;var c;this.samplers=[];var s=0;for(c=o.samplers.length;s<c;s++)this.samplers[s]=new jl(m,o.samplers[s]);for(this.channels=[],s=0,c=o.channels.length;s<c;s++)this.channels[s]=new Bo(o.channels[s],this);this.extensions=o.extensions!==void 0?o.extensions:null,this.extras=o.extras!==void 0?o.extras:null},jh=yi.glTFModel=function(m){this.json=m,this.defaultScene=m.scene!==void 0?m.scene:0,this.version=Number(m.asset.version),m.accessors&&(this.accessors=Array(m.accessors.length)),m.bufferViews&&(this.bufferViews=Array(m.bufferViews.length)),m.scenes&&(this.scenes=Array(m.scenes.length)),m.nodes&&(this.nodes=Array(m.nodes.length)),m.meshes&&(this.meshes=Array(m.meshes.length)),m.materials&&(this.materials=Array(m.materials.length)),m.textures&&(this.textures=Array(m.textures.length)),m.samplers&&(this.samplers=Array(m.samplers.length)),m.images&&(this.images=Array(m.images.length)),m.skins&&(this.skins=Array(m.skins.length)),m.animations&&(this.animations=Array(m.animations.length)),m.cameras&&(this.cameras=Array(m.cameras.length)),this.extensions=m.extensions!==void 0?m.extensions:null,this.extras=m.extras!==void 0?m.extras:null},is=yi.glTFLoader=function(m){this._init(),this.glTF=null,this.enableGLAvatar=!1,this.linkSkeletonGltf=null};is.prototype._init=function(){this._loadDone=!1,this._bufferLoaded=this._bufferRequested=0,this._buffers=[],this._bufferTasks={},this._finishedPendingTasks=this._pendingTasks=this._imageLoaded=this._imageRequested=this._shaderLoaded=this._shaderRequested=0,this.onload=null,Aa=this},is.prototype._checkComplete=function(){this._bufferRequested==this._bufferLoaded&&this._imageRequested==this._imageLoaded&&(this._loadDone=!0),this._loadDone&&this._pendingTasks==this._finishedPendingTasks&&(this._postprocess(),this.onload(this.glTF))},is.prototype.loadGLTF_GL_Avatar_Skin=function(m,o,c){this.enableGLAvatar=!0,this.skeletonGltf=o,this.loadGLTF(m,c)},is.prototype.loadGLTF=function(m,o){this._init(),this.onload=o||function(s){},this.baseUri=Yg(m);var c=this;sv(m,function(s){s=JSON.parse(s),c.glTF=new jh(s);var h,f=function(L){if(c._buffers[h]=L,c._bufferLoaded++,c._bufferTasks[h]){var F,M=0;for(F=c._bufferTasks[h].length;M<F;++M)c._bufferTasks[h][M](L)}c._checkComplete()};if(s.buffers)for(h in s.buffers){c._bufferRequested++;var x=s.buffers[h].uri;x.indexOf("base64")===-1&&(x=c.baseUri+x),gc(x,f)}f=function(L,F){c._imageLoaded++,c.glTF.images[F]=L,c._checkComplete()};var g;if(s.images)for(g in s.images)c._imageRequested++,lv(c.baseUri+s.images[g].uri,g,f);c._checkComplete()})},is.prototype._postprocess=function(){function m(F,M){var E=_[F.nodeID];M!==null?jr.mul(E,_[M.nodeID],F.matrix):jr.copy(E,F.matrix)}function o(F,M){var E=_[F.nodeID];M=M!==null?M.bvh:L.boundingBox,F.mesh&&(h=F.mesh,h.boundingBox&&(F.aabb=mh.getAABBFromOBB(h.boundingBox,E),F.children.length===0&&(In.copy(F.bvh.min,F.aabb.min),In.copy(F.bvh.max,F.aabb.max)))),In.min(M.min,M.min,F.bvh.min),In.max(M.max,M.max,F.bvh.max)}Aa=this;var c,s,h;if(this.glTF.cameras){var f=0;for(c=this.glTF.cameras.length;f<c;f++)this.glTF.cameras[f]=new Ss(this.glTF.json.cameras[f])}if(this.glTF.bufferViews)for(f=0,c=this.glTF.bufferViews.length;f<c;f++)this.glTF.bufferViews[f]=new Ed(this.glTF.json.bufferViews[f],this._buffers[this.glTF.json.bufferViews[f].buffer]);if(this.glTF.accessors)for(f=0,c=this.glTF.accessors.length;f<c;f++)this.glTF.accessors[f]=new Cg(this.glTF.json.accessors[f],this.glTF.bufferViews[this.glTF.json.accessors[f].bufferView]);if(this.glTF.materials)for(f=0,c=this.glTF.materials.length;f<c;f++)this.glTF.materials[f]=new v0(this.glTF.json.materials[f]);if(this.glTF.samplers)for(f=0,c=this.glTF.samplers.length;f<c;f++)this.glTF.samplers[f]=new wg(this.glTF.json.samplers[f]);if(this.glTF.textures)for(f=0,c=this.glTF.textures.length;f<c;f++)this.glTF.textures[f]=new Pc(this.glTF.json.textures[f]);for(f=0,c=this.glTF.meshes.length;f<c;f++)this.glTF.meshes[f]=new Bi(this.glTF.json.meshes[f],f);for(f=0,c=this.glTF.nodes.length;f<c;f++)this.glTF.nodes[f]=new ga(this.glTF.json.nodes[f],f);for(f=0,c=this.glTF.nodes.length;f<c;f++){var x=this.glTF.nodes[f],g=0;for(s=x.children.length;g<s;g++)x.children[g]=this.glTF.nodes[x.children[g]]}var _=Array(this.glTF.nodes.length);for(f=0,c=_.length;f<c;f++)_[f]=jr.create();for(f=0,c=this.glTF.scenes.length;f<c;f++){var L=this.glTF.scenes[f]=new bp(this.glTF,this.glTF.json.scenes[f]);for(L.boundingBox=new mh,g=0,s=L.nodes.length;g<s;g++)x=L.nodes[g],x.traverseTwoExecFun(null,m,o);L.boundingBox.calculateTransform()}for(g=0,s=this.glTF.nodes.length;g<s;g++)x=this.glTF.nodes[g],x.bvh!==null&&x.bvh.calculateTransform();if(this.glTF.animations)for(f=0,c=this.glTF.animations.length;f<c;f++)this.glTF.animations[f]=new _m(this.glTF,this.glTF.json.animations[f]);if(this.glTF.json.skins)for(f=0,c=this.glTF.skins.length;f<c;f++)for(this.glTF.skins[f]=new y0(this.glTF,this.glTF.json.skins[f],f),x=this.glTF.skins[f].joints,g=0,s=x.length;g<s;g++)x[g].jointID=g;for(f=0,c=this.glTF.nodes.length;f<c;f++)x=this.glTF.nodes[f],x.skin!==null&&typeof x.skin=="number"&&(x.skin=this.glTF.skins[x.skin])};var ci={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_g=function(m){function o(c,s){return qr(this,o),Fn(this,(o.__proto__||nn(o)).call(this,c,s))}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{scale:1}}},{key:"initialize",value:function(s){var h=this;this.gl=s;var f=this.getOptions();this.gltfObj=uv({gl:s,options:f}),new is().loadGLTF(f.url,function(x){h.gltfObj.setupScene(x),h.webglLayer.render()})}},{key:"onChanged",value:function(s,h){}},{key:"render",value:function(s){var h=s.gl;s=s.matrix;var f=this.getData(),x=this.getOptions(),g=x.scale,_=[g,g,g];for(x.unit==="px"&&this.map&&(_=this.map.getZoomUnits(),_=[g*_,g*_,g*_]),g=0;g<f.length;g++){var L=f[g].geometry.coordinates;x=jr.create();var F=jr.create();L=this.normizedPoint(L),jr.identity(x),jr.translate(x,x,[L[0],L[1],L[2]]),jr.rotateX(x,x,Math.PI/2),jr.rotateY(x,x,(f[g].angle||0)*Math.PI/180),jr.scale(x,x,_),jr.mul(F,s,x),this.gltfObj.render({gl:h,matrix:F})}}}]),o}(xo),Ks=Ks||{};(function(){function m(c,s,h){return h=c.createShader(h),c.shaderSource(h,s),c.compileShader(h),h}Ks.getShaderSource=function(c){return document.getElementById(c).textContent.replace(/^\s+|\s+$/g,"")},Ks.createProgram=function(c,s,h){var f=c.createProgram();return s=m(c,s,c.VERTEX_SHADER),h=m(c,h,c.FRAGMENT_SHADER),c.attachShader(f,s),c.deleteShader(s),c.attachShader(f,h),c.deleteShader(h),c.linkProgram(f),c.getProgramInfoLog(f),c.getShaderInfoLog(s),c.getShaderInfoLog(h),f};var o=Ks.loadImage=function(c,s){var h=new Image;return h.crossOrigin="Anonymous",h.src=c,h.onload=s,h};Ks.loadImages=function(c,s){function h(){0>=--x&&s(f)}for(var f=[],x=c.length,g=0;g<x;++g)f.push(o(c[g],h))}})();var Is=function(m){function o(c){qr(this,o);var s=Fn(this,(o.__proto__||nn(o)).call(this,c));return c=s.getOptions(),s.gltfLayer=new _g({url:c.url,scale:c.scale}),s.children=[s.gltfLayer],s.autoUpdate=!0,s.index=[],s.newData=[],s.isStarted=c.autoPlay!==!1,s}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{url:"https://mapv-website.bj.bcebos.com/gl/examples/model/car.gltf",scale:1,step:1,defaultAngle:90}}},{key:"onOptionsChanged",value:function(s){this.gltfLayer.setOptions({})}},{key:"onDataChanged",value:function(s){var h=this;this.index=[],this.newData=[];for(var f=0;f<s.length;f++){this.index.push(0);var x=s[f].geometry.coordinates;s[f].geometry.type==="LineString"?this.newData.push(this._addPath(x)):x.forEach(function(g){h.newData.push(h._addPath(g))})}this.updatePoints()}},{key:"lnglatToMercator",value:function(s,h){return h=h*Math.PI/180,h=31890685e-1*Math.log((1+Math.sin(h))/(1-Math.sin(h))),[parseFloat((s*Math.PI/180*6378137).toFixed(2)),parseFloat(h.toFixed(2))]}},{key:"getDeg",value:function(s,h){-180<s[0]&&180>s[0]&&(s=this.lnglatToMercator(s[0],s[1]),h=this.lnglatToMercator(h[0],h[1]));var f=180*Math.atan((h[1]-s[1])/(h[0]-s[0]))/Math.PI;return h[0]>s[0]&&(f-=180),f}},{key:"getPoint",value:function(s,h,f){return[s[0]+(h[0]-s[0])*f,s[1]+(h[1]-s[1])*f,s[2]&&h[2]?s[2]+(h[2]-s[2])*f:0]}},{key:"updatePoints",value:function(){for(var s=this.getOptions(),h=this.newData,f=[],x=0;x<h.length;x++){for(var g=h[x],_=Math.floor(this.index[x]),L=_+1;g[L]&&g[L][0]===g[_][0]&&g[L][1]===g[_][1];)L++;L>=g.length-1&&(L=--_),L=this.getDeg(g[_],g[L]),f.push({geometry:{type:"Point",coordinates:this.getPoint(g[_],g[_+1],this.index[x]%1)},angle:L-s.defaultAngle})}this.pointData=f,this.gltfLayer.setData(f,{autoRender:!1})}},{key:"getCurrentPoint",value:function(){return this.pointData}},{key:"getDistance",value:function(s,h){var f=s[1]*Math.PI/180,x=h[1]*Math.PI/180;return s=2*Math.asin(Math.sqrt(Math.pow(Math.sin((f-x)/2),2)+Math.cos(f)*Math.cos(x)*Math.pow(Math.sin((s[0]*Math.PI/180-h[0]*Math.PI/180)/2),2))),s=Math.round(6378137e4*s)/1e4}},{key:"_addPath",value:function(s){for(var h=s.length,f=0,x=[],g=[],_=1;_<h;_++){var L=this.getDistance(s[_-1],s[_]);x.push(L),f+=L}for(L=[0],_=1;_<h;_++){var F=(x[_-1]/f).toFixed(2);L[_]=L[_-1]+parseFloat(F,10),g=g.concat(this._getPath(s[_-1],s[_],1e3*F))}return this._pathPercents=L,g}},{key:"_getPath",value:function(s,h,f){if(f===0)return[s];for(var x=[],g=0;g<=f;g++)x.push([(h[0]-s[0])/f*g+s[0],(h[1]-s[1])/f*g+s[1],h[2]&&s[2]?(h[2]-s[2])/f*g+s[2]:0]);return x}},{key:"start",value:function(){this.isStarted=!0}},{key:"stop",value:function(){this.isStarted=!1}},{key:"render",value:function(s){if(tc(o.prototype.__proto__||nn(o.prototype),"render",this).call(this,s),s=this.getOptions(),this.isStarted)for(var h=this.newData,f=0;f<this.index.length;f++)this.index[f]+=s.step,this.index[f]>h[f].length-2&&(this.index[f]=0);this.updatePoints()}}]),o}(Si);CanvasRenderingContext2D.prototype.wrapText=function(m,o,c,s,h,f){if(typeof m=="string"&&typeof o=="number"&&typeof c=="number"){m=m.split(f),f="";for(var x=0;x<m.length;x++){var g=f+m[x];this.measureText(g).width>s&&0<x?(this.fillText(f,o,c),f=m[x],c+=h):f=g}this.fillText(f,o,c)}};var ty=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),s=c.canvas=document.createElement("canvas"),s=c.ctx=s.getContext("2d"),s.textAlign="start",s.textBaseline="top",c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,flat:!1,collides:!0,unit:"px",angle:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],shadow:{},maxWidth:40,maxHeightLine:20,lineBreak:""}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new ui(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uUnitPx;uniform float zoomUnits;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/mat3 rotateZ(float angle){float cos0=cos(angle);float sin0=sin(angle);return mat3(cos0,sin0,0.,-sin0,cos0,0.,0.,0.,1.);}vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;float z=coord.z;mat3 mat=rotateZ(rotation);vec3 rotated=vec3(size[0],0.0,size[1]);if(corner==1.0){rotated=mat*vec3(-size[0],0.0,size[1]);}else if(corner==2.0){rotated=mat*vec3(size[0],0.0,size[1]);}else if(corner==3.0){rotated=mat*vec3(size[0],0.0,-size[1]);}else{rotated=mat*vec3(-size[0],0.0,-size[1]);}x+=rotated.x;y+=rotated.y;z+=rotated.z;return vec3(x,y,z);}void main(){vTextCoord=aTextCoord;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);gl_Position=matrix*vec4(current,1.0);}",fragmentShader:`precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){vec4 textureColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}gl_FragColor=textureColor;
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.canvas=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h)}},{key:"processCache",value:function(s,h){this.cachedData=[];for(var f=0;f<h.length;f++){var x=this.normizedPoint(h[f].geometry.coordinates),g=h[f].text;"properties"in h[f]&&"text"in h[f].properties&&(g=h[f].properties.text);var _=this.getProperty("angle",s.angle,h[f]),L=this.getProperty("maxWidth",s.maxWidth,h[f]),F=this.getProperty("maxHeightLine",s.maxHeightLine,h[f]),M=this.getProperty("lineBreak",s.lineBreak,h[f]);x&&g!==void 0&&this.cachedData.push({point:x,text:g,angle:_,maxWidth:L,maxHeightLine:F,lineBreak:M,index:f})}}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.map){var h=s.gl,f=s.matrix,x=this.getOptions(),g=this.program;g.use(h),this.throttleUpdate(s),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:x.polygonOffset,depthTest:x.depthTest,depthMask:x.depthWrite});var _=this.map.getZoomUnits();g.setUniforms(vi(this.getCommonUniforms(s),{matrix:f,devicePixelRatio:window.devicePixelRatio,textureImage:this.texture,uFlat:x.flat,offset:x.offset,zoomUnits:_,zIndex:x.zIndex,uUnitPx:x.unit==="px"})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(s){this.updateText(s)}},{key:"updateText",value:function(s){var h=s.gl,f=s.matrix,x=this.getOptions(),g=x.color;s=x.fontSize;var _=x.fontFamily,L=x.padding,F=x.margin,M=x.collides,E=x.enablePicked,P=x.shadow,O=h.canvas.width/window.devicePixelRatio,B=h.canvas.height/window.devicePixelRatio,X=this.canvas;h=this.ctx,h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),h.textBaseline="top",h.font="20px "+_;var W=new rc;x=[];for(var U=0;U<this.cachedData.length;U++){var q=this.cachedData[U],he=q.point,ge=q.text,_e=q.angle,Se=q.index,$e=q.maxWidth,Be=q.maxHeightLine;q=q.lineBreak;var lt=Hi(he,3);lt=Qo.clone([lt[0],lt[1],lt[2],1]),Qo.transformMat4(lt,lt,f),Qo.scale(lt,lt,1/lt[3]);var kt=(lt[0]+1)/2*O,cr=(-lt[1]+1)/2*B;lt=h.measureText(ge),lt=Math.min(lt.width+2*L[0],$e);for(var Ur=ge.split(q),Ar="",zr=20,Gt=0;Gt<Ur.length;Gt++)Ar+=Ur[Gt],h.measureText(Ar).width>$e&&0<Gt&&(Ar=Ur[Gt],zr+=Be);if(Ur=zr,Ur+=2*L[1],Gt=lt+F[0],zr=Ur+F[1],kt-=Gt/2,cr-=zr/2,Gt=kt+Gt,zr=cr+zr,!(0>Gt||0>zr||kt>O||cr>B)){if(M){if(kt={minX:kt,maxX:Gt,minY:cr,maxY:zr},W.collides(kt))continue;W.insert(kt)}x.push({w:lt,h:Ur,point:he,text:ge,angle:_e,maxWidth:$e,maxHeightLine:Be,lineBreak:q,dataIndex:Se})}}for(h.restore(),f=[],F=[],M=[],O=[],W=dc(x),B=W.w,W=W.h,0>=B&&(B=1),0>=W&&(W=1),X.width=B*window.devicePixelRatio,X.height=W*window.devicePixelRatio,h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),h.textBaseline="top",h.font="20px "+_,h.fillStyle=g,h.shadowColor=P&&P.color,h.shadowOffsetX=P&&P.offsetX,h.shadowOffsetY=P&&P.offsetY,h.shadowBlur=P&&P.blur,g=0,_=x.length;g<_;++g){for(P=x[g],h.wrapText(P.text,P.x+L[0],P.y+L[1],P.maxWidth,P.maxHeightLine,P.lineBreak),he=Hi(P.point,3),X=he[0],U=he[1],he=he[2],ge=0;4>ge;ge++)f.push(X,U,he),f.push(ge),f.push(P.w,P.h),f.push(s/20,P.angle*Math.PI/180);X=P.x/B,U=(P.x+P.w)/B,he=(P.y+P.h)/W,ge=P.y/W,F.push(X,he,X,ge,U,ge,U,he),X=4*g,M.push(X,X+2,X+1,X,X+3,X+2),E&&(P=this.indexToRgb(P.dataIndex),O.push(P[0]/255,P[1]/255,P[2]/255),O.push(P[0]/255,P[1]/255,P[2]/255),O.push(P[0]/255,P[1]/255,P[2]/255),O.push(P[0]/255,P[1]/255,P[2]/255))}h.restore(),this.loadTexture(),this.index=M,this.vertexBuffer.updateData(new Float32Array(f)),this.uvBuffer.updateData(new Float32Array(F)),this.indexBuffer.updateData(new Uint32Array(M)),E&&this.pickBuffer.updateData(new Float32Array(O))}},{key:"loadTexture",value:function(){var s=this;this.canvas?Or(this.gl,this.canvas,function(h){s.texture=h},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),o}(xo),Bf=function(m){function o(c){qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c));var s=c.canvas=document.createElement("canvas");return c.ctx=s.getContext("2d"),c.arrowHeight=8,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,textColor:"#0f0",borderColor:"#f00",backgroundColor:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,lineHeight:20,textAlign:"left",collides:!1,offset:[0,0],padding:[2,2],polygonOffset:[0,0],borderRadius:5}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new ui(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x;y+=size.y;}else if(corner==2.0){x+=size.x;y+=size.y;}else if(corner==3.0){x+=size.x;y+=-size.y;}else{x+=-size.x;y+=-size.y;}return vec3(x,y+size.y,coord.z);}void main(){vTextCoord=aTextCoord;vec2 pixelOffset=offset*zoomUnits;vec4 projection=matrix*vec4(position.x+pixelOffset[0],position.y-pixelOffset[1],position.z,1.0);vec3 screen=projection.xyz/projection.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio;vec3 current=transformCoord(screen,halfSize,corner);current.z+=zIndex;gl_Position=vec4(current,1.0);}",fragmentShader:`precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"position",buffer:this.vertexBuffer,size:3,stride:24,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:24,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:24,type:"FLOAT",offset:16},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.canvas=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h)}},{key:"processCache",value:function(s,h){for(this.cachedData=[],s=0;s<h.length;s++){var f=h[s],x=this.normizedPoint(f.geometry.coordinates);x&&this.cachedData.push({point:x,item:f,index:s})}}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.map){var h=s.gl,f=s.matrix,x=this.getOptions(),g=this.program;g.use(h),this.updateText(s),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:x.polygonOffset,depthTest:x.depthTest,depthMask:x.depthWrite});var _=this.map.getZoomUnits();g.setUniforms(vi(this.getCommonUniforms(s),{matrix:f,devicePixelRatio:window.devicePixelRatio,textureImage:this.texture,offset:x.offset,zoomUnits:_,zIndex:x.zIndex})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"updateText",value:function(s){var h=this,f=s.gl,x=s.matrix,g=this.getOptions().enablePicked;s=this.canvas;var _=this.ctx;f=this.createMapbox(_,f,x),x=dc(f);var L=x.w,F=x.h;0>=L&&(L=1),0>=F&&(F=1),s.width=L*window.devicePixelRatio,s.height=F*window.devicePixelRatio;var M=[],E=[],P=[],O=[];f.forEach(function(B,X){h.drawItem(_,B);var W=Hi(B.point,3),U=W[0],q=W[1];W=W[2];for(var he=0;4>he;he++)M.push(U,q,W),M.push(he),M.push(B.w,B.h);U=B.x/L,q=(B.x+B.w)/L,W=(B.y+B.h)/F,he=B.y/F,E.push(U,W,U,he,q,he,q,W),X*=4,P.push(X,X+2,X+1,X,X+3,X+2),g&&(B=h.indexToRgb(B.dataIndex),O.push(B[0]/255,B[1]/255,B[2]/255),O.push(B[0]/255,B[1]/255,B[2]/255),O.push(B[0]/255,B[1]/255,B[2]/255),O.push(B[0]/255,B[1]/255,B[2]/255))}),this.loadTexture(),this.index=P,this.vertexBuffer.updateData(new Float32Array(M)),this.uvBuffer.updateData(new Float32Array(E)),this.indexBuffer.updateData(new Uint32Array(P)),g&&this.pickBuffer.updateData(new Float32Array(O))}},{key:"createMapbox",value:function(s,h,f){var x=this,g=this.getOptions(),_=g.padding,L=g.collides,F=g.fontSize,M=h.canvas.width/window.devicePixelRatio,E=h.canvas.height/window.devicePixelRatio,P=new rc,O=[];return this.cachedData.forEach(function(B){var X=B.point,W=B.item;B=B.index;var U=Hi(X,3);U=Qo.clone([U[0],U[1],U[2],1]),Qo.transformMat4(U,U,f),Qo.scale(U,U,1/U[3]);var q=(U[0]+1)/2*M,he=(-U[1]+1)/2*E;U=x.computeTextWH(W,s,_,F);var ge=Hi(U,2);U=ge[0],ge=ge[1],q-=U/2,he-=ge/2;var _e=q+U,Se=he+ge;if(!(0>_e||0>Se||q>M||he>E)){if(L){if(q={minX:q,maxX:_e,minY:he,maxY:Se},P.collides(q))return;P.insert(q)}O.push({w:U,h:ge+x.arrowHeight,point:X,item:W,dataIndex:B})}}),O}},{key:"computeTextWH",value:function(s,h){var f=this.getOptions(),x=f.padding,g=f.fontSize,_=f.borderRadius,L=f.fontFamily;return f=f.lineHeight,h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),h.font=g+"px "+L,s=s.properties.text.split(`
`),g=s.reduce(function(F,M){return F.length<M.length?M:F},""),g=h.measureText(g),h.restore(),[g.width+2*(x[1]+_),2*(x[0]+_)+f*s.length]}},{key:"drawItem",value:function(s,h){var f=this.getOptions(),x=f.padding,g=f.backgroundColor,_=f.textColor,L=f.fontSize,F=f.borderColor,M=f.borderRadius,E=f.fontFamily,P=f.lineHeight;f=f.textAlign;var O=M-1,B=h.x,X=h.y,W=h.w,U=h.h;h=h.item;var q="";Ta(h.properties)==="object"&&(q=h.properties.text||"",_=h.properties.textColor||_,F=h.properties.borderColor||F,g=h.properties.backgroundColor||g),h=q.split(`
`),U-=this.arrowHeight,s.save(),s.scale(window.devicePixelRatio,window.devicePixelRatio),s.textBaseline="top",s.font=L+"px "+E,s.translate(B,X),s.fillStyle=g,s.strokeStyle=F,s.beginPath(),s.arc(M,M,O,Math.PI,1.5*Math.PI),s.lineTo(W-M,1),s.arc(W-M,M,O,1.5*Math.PI,0),s.lineTo(W-1,U-M),s.arc(W-M,U-M,O,0*Math.PI,.5*Math.PI),s.lineTo(M,U-1),s.arc(M,U-M,O,.5*Math.PI,1*Math.PI),s.lineTo(1,M),s.closePath(),s.fill(),s.stroke(),s.beginPath(),g=this.arrowHeight,E=W/2,O=g/2,s.moveTo(E-O,U-1),s.lineTo(E+O,U-1),s.lineTo(E,U+.8*g),s.fillStyle=F,s.fill(),s.fillStyle=_;var he=f==="center"?E:f==="right"?W-M-x[1]:M+x[1];s.textAlign=f,h.forEach(function(ge,_e){s.fillText(ge,he,M+x[0]+(_e+.5)*P-.5*L)}),s.restore()}},{key:"loadTexture",value:function(){var s=this;this.canvas?Or(this.gl,this.canvas,function(h){s.texture=h},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),o}(xo);Da.prototype.parseColors=function(m){this.arrFeatureStyles=[[2,m[0]||"rgba(79,210,125,1)",2,2,0,[],0,0],[2,m[0]||"rgba(79,210,125,1)",3,2,0,[],0,0],[2,m[0]||"rgba(79,210,125,1)",3,2,0,[],0,0],[2,m[0]||"rgba(79,210,125,1)",5,2,0,[],0,0],[2,m[0]||"rgba(79,210,125,1)",6,2,0,[],0,0],[2,m[2]||"rgba(255,208,69,1)",2,2,0,[],0,0],[2,m[2]||"rgba(255,208,69,1)",3,2,0,[],0,0],[2,m[2]||"rgba(255,208,69,1)",3,2,0,[],0,0],[2,m[2]||"rgba(255,208,69,1)",5,2,0,[],0,0],[2,m[2]||"rgba(255,208,69,1)",6,2,0,[],0,0],[2,m[1]||"rgba(232,14,14,1)",2,2,0,[],0,0],[2,m[1]||"rgba(232,14,14,1)",3,2,0,[],0,0],[2,m[1]||"rgba(232,14,14,1)",3,2,0,[],0,0],[2,m[1]||"rgba(232,14,14,1)",5,2,0,[],0,0],[2,m[1]||"rgba(232,14,14,1)",6,2,0,[],0,0],[2,m[3]||"rgba(181,0,0,1)",2,2,0,[],0,0],[2,m[3]||"rgba(181,0,0,1)",3,2,0,[],0,0],[2,m[3]||"rgba(181,0,0,1)",3,2,0,[],0,0],[2,m[3]||"rgba(181,0,0,1)",5,2,0,[],0,0],[2,m[3]||"rgba(181,0,0,1)",6,2,0,[],0,0],[2,"rgba(255,255,255,1)",4,0,0,[],0,0],[2,"rgba(255,255,255,1)",5.5,0,0,[],0,0],[2,"rgba(255,255,255,1)",7,0,0,[],0,0],[2,"rgba(255,255,255,1)",8.5,0,0,[],0,0],[2,"rgba(255,255,255,1)",10,0,0,[],0,0]]},Da.prototype.setColors=function(m){this.parseColors(m)},Da.prototype.initialize=function(m){this._initialize||(this._initialize=!0)},Da.prototype.clearCache=function(m){this.cache={}},Da.prototype.setMap=function(m){m?(this.map=m,this._initialize?this.canvaslayer.show():this.initialize(m)):this.canvaslayer.hide()},Da.prototype.draw=function(m){m=m||{},m.clearCache&&this.clearCache(),this.canvaslayer.draw()},Da.prototype.clear=function(){},Da.prototype.update=function(){var m=this.map,o=this.getDataZoom(),c=Math.pow(2,18-o),s=256*c,h=Cr.convertLL2MC(m.getCenter()),f=Math.ceil(h.lng/s),x=Math.ceil(h.lat/s),g=this.tileSize,_=o-Math.round(m.getZoom());for(0<_&&(g/=Math.pow(2,_)),s=[f,x,(h.lng-f*s)/s*g,(h.lat-x*s)/s*g],f=m.getBounds(),h=f.getNorthEast(),f=f.getSouthWest(),m.getSize(),m.getSize(),m=(h.lng-f.lng)/c,c=(h.lat-f.lat)/c,h=s[1]-Math.ceil((c/2-s[3])/g),f=s[0]+Math.ceil((m/2+s[2])/g),x=s[1]+Math.ceil((c/2+s[3])/g),c=[],g=s[0]-Math.ceil((m/2-s[2])/g);g<f;g++)for(s=h;s<x;s++)c.push([g,s,o]);for(this.tilesOrder=c,this._loadCount={},g=0;g<c.length;g++)s=c[g][0],m=c[g][1],this._loadCount[s+"_"+m+"_"+c[g][2]]=!1;for(g=0;g<c.length;g++)s=c[g][0],m=c[g][1],this.showTile(s,m,o)},Da.prototype.showTile=function(m,o,c){this._parseDataAndDraw(m,o,c)},Da.prototype.drawCurrentData=function(){this.clear();for(var m=[],o=0;o<this.tilesOrder.length;o++){var c=this.tilesOrder[o][0],s=this.tilesOrder[o][1],h=this.tilesOrder[o][2],f=this.cache[this.getCacheKey(c,s,h)];if(f)for(c=this._drawFeatures(f,c,s,h),s=0;s<c.length;s++)m.push(c[s])}this.lineLayer.setData(m)},Da.prototype.isAllLoaded=function(){var m=!0,o;for(o in this._loadCount)if(!this._loadCount[o]){m=!1;break}return m},Da.prototype.getCacheKey=function(m,o,c){return m+"_"+o+"_"+c},Da.prototype.getDataZoom=function(){var m=Math.round(this.map.getZoom());return 19<m&&(m=19),m},Da.prototype._parseDataAndDraw=function(m,o,c){var s=this,h=s.map,f=h.getCenter(),x=Math.round(h.getZoom()),g=this.getCacheKey(m,o,c),_="_cbk"+(1e5*Math.random()).toFixed(0),L=this.getTileUrl(m,o,c,"BMapGL."+_);BMapGL[_]=function(F){s._loadCount[m+"_"+o+"_"+c]=!0;var M=h.getCenter(),E=Math.round(h.getZoom());M.equals(f)&&E===x?(M=F.content&&F.content.tf,F.data&&(M=F.data),s.cache[g]=M?{traffic:M,precision:F.precision}:null,s.drawTogether&&s.isAllLoaded()&&s.drawCurrentData()):E!==x&&s.clear(),delete BMapGL[_]},s.cache[g]!==void 0?(s._loadCount[m+"_"+o+"_"+c]=!0,s.drawTogether&&s.isAllLoaded()&&s.drawCurrentData()):this.request(L)},Da.prototype.getTileUrl=function(m,o,c,s){return"https://sp3.baidu.com/7_AZsjOpB1gCo2Kml5_Y_DAcsMJiwa/traffic/?qt=vtraffic&x="+m+"&y="+o+"&z="+c+"&fn="+s+"&t="+new Date().getTime()},Da.prototype._drawFeatures=function(m,o,c,s){var h=10;s=Math.pow(2,18-s),this.map.getCenter();var f=this.tileSize;if(o=[o*f*s,(c+1)*f*s],c=[],m&&m.traffic){h*=m.precision,m=m.traffic,f=0;for(var x=m.length;f<x;f++){var g=m[f],_=g[1];g=this.arrFeatureStyles[g[3]];var L=_[0]/h,F=-_[1]/h,M=[];M.push([o[0]+L*s,o[1]+F*s,1]);for(var E=2,P=_.length;E<P;E+=2)L+=_[E]/h,F-=_[E+1]/h,M.push([o[0]+L*s,o[1]+F*s,1]);c.push({color:g[1],geometry:{type:"LineString",coordinates:M}})}}return c},Da.prototype.request=function(m,o){if(o){var c=(1e5*Math.random()).toFixed(0);BMapGL._rd["_cbk"+c]=function(h){o&&o(h),delete BMapGL._rd["_cbk"+c]},m+="&callback=BMapGL._rd._cbk"+c}var s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.src=m,s.addEventListener?s.addEventListener("load",function(h){h=h.target,h.parentNode.removeChild(h)},!1):s.attachEvent&&s.attachEvent("onreadystatechange",function(h){h=window.event.srcElement,!h||h.readyState!=="loaded"&&h.readyState!=="complete"||h.parentNode.removeChild(h)}),setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(s),s=null},1)},Da.prototype.getRGBA=function(m){return m>>>=0,"rgba("+(m>>24&255)+","+(m>>16&255)+","+(m>>8&255)+","+(m&255)/256+")"},Da.prototype.getLineCap=function(m){return["butt","square","round"][m]},Da.prototype.getLineJoin=function(m){return["miter","bevel","round"][m]};var ry=function(m){function o(c){qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c)),c.autoUpdate=!0,c.getOptions();var s=new uu({color:"rgba(257, 254, 47, 0.9)",minZoom:18,duration:.8,interval:.2,trailLength:.4});return c.lineLayer=s,c.children=[s],c}return _n(o,m),on(o,[{key:"initialize",value:function(s){tc(o.prototype.__proto__||nn(o.prototype),"initialize",this).call(this,s),s=this.map.map;var h=new Da({});h.lineLayer=this.lineLayer,this.trafficTileManager=h,h.setMap(s),h.update(),s.addEventListener("moveend",function(){h.update()}),s.addEventListener("zoomend",function(){h.update()}),s.addEventListener("ondraw",function(){})}},{key:"onOptionsChanged",value:function(s){}},{key:"onDataChanged",value:function(s){}},{key:"getDefaultOptions",value:function(){return{}}}]),o}(Si),y1=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.bufferData=[],c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{size:13,unit:"px",height:0,max:100,min:0}}},{key:"initialize",value:function(s){var h=this;this.gl=s;var f=this.getOptions();this.inverseMatrix=jr.create(Float64Array),this.frameBuffer=new ps(s),this.webglLayer.map.onResize(function(){h.frameBuffer=new ps(s)}),this.circle=ka(64),this.circleTexture=fu(s,this.circle,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}),this.intensity=new ro({gradient:f.gradient}),this.paletteTexture=fu(s,this.intensity.paletteCtx.canvas,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}),this.offlineProgram=new ui(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform mat4 pointToPixelMatrix;uniform mat4 pixelToViewMatrix;uniform mat4 projectionMatrix;uniform int unit;uniform float size;uniform float max;uniform float min;attribute vec3 aPos;attribute vec2 aOffset;attribute float aCount;varying vec2 vOffset;varying float vCount;varying vec3 vPosition;void main(){vOffset=aOffset;vCount=(aCount-min)/(max-min);if(unit==1){vec2 pos=(pointToPixelMatrix*vec4(aPos.xy,0.0,1.0)).xy+aOffset.xy*size/2.0;gl_Position=projectionMatrix*pixelToViewMatrix*vec4(pos,0.0,1.0);}else{vec2 pos=aPos.xy+aOffset.xy*size;gl_Position=u_matrix*vec4(pos,0.0,1.0);}vPosition=vec3(gl_Position.z/gl_Position.w);}",fragmentShader:"varying vec2 vOffset;varying float vCount;varying vec3 vPosition;uniform sampler2D uCircle;void main(){vec4 circle=texture2D(uCircle,(vOffset+1.0)/2.0);float intensity=circle.a*vCount;if(intensity<=0.0){discard;}gl_FragColor=vec4(vPosition,intensity);}"},this),this.offlineBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.offlineIndexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.offlineVertexArray=new la({gl:s,program:this.offlineProgram,attributes:[{stride:24,name:"aPos",buffer:this.offlineBuffer,size:3,type:"FLOAT",offset:0},{stride:24,name:"aOffset",buffer:this.offlineBuffer,size:2,type:"FLOAT",offset:12},{stride:24,name:"aCount",buffer:this.offlineBuffer,size:1,type:"FLOAT",offset:20}]}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.program=new ui(this.gl,{vertexShader:"attribute vec2 aPos;varying vec2 vPos;uniform float uHeight;uniform mat4 pixelToViewMatrix;uniform mat4 projectionMatrix;uniform sampler2D u_sampler;uniform mat4 inverseMatrix;void main(){vPos=aPos;if(uHeight<=0.0){gl_Position=vec4(aPos,0.0,1.0);}else{vec4 gray=texture2D(u_sampler,(aPos+1.0)/2.0);vec4 m0=inverseMatrix*vec4(aPos.xy,0.0,1.0);vec4 m1=inverseMatrix*vec4(aPos.xy,1.0,1.0);m0/=m0.w;m1/=m1.w;vec4 pixel=m0+(-m0.z/(m1.z-m0.z))*(m1-m0);pixel.z=uHeight*gray.a;gl_Position=projectionMatrix*pixelToViewMatrix*vec4(pixel.xyz,1.0);}}",fragmentShader:"uniform sampler2D u_sampler;uniform sampler2D u_samplerPalette;uniform float uHeight;varying vec2 vPos;void main(){vec4 gray=texture2D(u_sampler,(vPos+1.0)/2.0);float grayAlpha=gray.a;if(grayAlpha<=0.0){discard;}vec4 color=texture2D(u_samplerPalette,vec2(grayAlpha,1.0));gl_FragColor=vec4(color.rgb,grayAlpha*color.a);}"},this),this.buffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new la({gl:s,program:this.program,attributes:[{stride:8,name:"aPos",buffer:this.buffer,size:2,type:"FLOAT",offset:0}]}),f=[];for(var x=[],g=Math.floor(s.canvas.width/4),_=Math.floor(s.canvas.height/4),L=g+1,F=0;F<=_;F++)for(var M=0;M<=g;M++)if(f.push(2*M/g-1,2*F/_-1),M<g&&F<_){var E=L*F+M,P=L*(F+1)+M;x.push(E,E+1,P+1),x.push(E,P+1,P)}this.bufferData=f,this.buffer.updateData(new Float32Array(f)),this.indexData=x,this.indexBuffer.updateData(new Uint32Array(x))}},{key:"destroy",value:function(){this.bufferData=[]}},{key:"onOptionsChanged",value:function(s,h){var f=this.gl;f&&s.gradient!==h.gradient&&(this.intensity=new ro({gradient:s.gradient}),this.paletteTexture=fu(f,this.intensity.paletteCtx.canvas,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}))}},{key:"onDataChanged",value:function(s){if(this.gl){var h=[],f=[];this.getOptions();for(var x=0;x<s.length;x++){var g=s[x],_=this.normizedPoint(s[x].geometry.coordinates),L=g.count===void 0?1:g.count;"properties"in g&&"count"in g.properties&&(L=g.properties.count),h.push(_[0],_[1],_[2]),h.push(-1,-1),h.push(L),h.push(_[0],_[1],_[2]),h.push(-1,1),h.push(L),h.push(_[0],_[1],_[2]),h.push(1,1),h.push(L),h.push(_[0],_[1],_[2]),h.push(1,-1),h.push(L),g=4*x,f.push(g+0,g+2,g+1),f.push(g+0,g+3,g+2)}this.offlineBufferData=h,this.offlineIndexData=f,this.offlineBuffer.updateData(new Float32Array(h)),this.offlineIndexBuffer.updateData(new Uint32Array(f))}}},{key:"render",value:function(s){var h=s.gl,f=s.matrix,x=s.pointToPixelMatrix,g=s.pixelToViewMatrix;if(s=s.projectionMatrix,this.offlineBufferData&&!(0>=this.offlineBufferData.length)){var _=this.getOptions();this.setGLState({blend:!0,blendFunc:[h.ONE,h.ONE],depthTest:!1}),h.bindFramebuffer(h.FRAMEBUFFER,this.frameBuffer.framebuffer),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),this.offlineProgram.use(h),this.offlineProgram.setUniforms({u_matrix:f,uCircle:this.circleTexture,pointToPixelMatrix:x,pixelToViewMatrix:g,projectionMatrix:s,unit:_.unit==="px"?1:0,size:_.size,max:_.max,min:_.min}),this.offlineVertexArray.bind(),this.offlineIndexBuffer.bind(),h.drawElements(h.TRIANGLES,this.offlineIndexData.length,h.UNSIGNED_INT,0),h.bindFramebuffer(h.FRAMEBUFFER,null),this.program.use(h),this.vertexArray.bind(),f=this.inverseMatrix,jr.identity(f),jr.multiply(f,s,g),jr.invert(f,f),this.setGLState({blend:!1,depthTest:!0}),this.program.setUniforms({u_sampler:this.frameBuffer.framebuffer.texture,u_samplerPalette:this.paletteTexture,uHeight:_.height,pixelToViewMatrix:g,inverseMatrix:f,projectionMatrix:s}),this.indexBuffer.bind(),h.drawElements(h.TRIANGLES,this.indexData.length,h.UNSIGNED_INT,0)}}}]),o}(xo),x1=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),c.selectedColor=[-1,-1,-1],c.textureCache={},c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{color:"rgba(0, 180, 0, 1.0)",edgeCount:4,unit:"m",height:1e5,type:"normal",size:5e4}}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions(),f={normal:[`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aEdgeIndex;attribute float aPointIndex;attribute float aEdgeCount;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vEdgeIndex=aEdgeIndex;vEdgeCount=aEdgeCount;vPointIndex=aPointIndex;float z=aPos.z*uZoomUnits;float x=aPos.x;float y=aPos.y;vSize=aSize*uZoomUnits;float a=radians(360.0/aEdgeCount);float b=a/2.0;float r=vSize/cos(b);if(aEdgeIndex<0.0){float index=aPointIndex;float angle=0.0;if(mod(index,2.0)==0.0){angle=a*(index/2.0)-b;}else{angle=-a*((index-1.0)/2.0)-b;}y=y+r*sin(angle);x=x+r*cos(angle);}else{float i=aEdgeIndex-1.0;float j=aPointIndex;float angle=a*i+b;y=y+r*sin(angle);x=x+r*cos(angle);}vPosition=vec4(aPos,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;if(aEdgeIndex==1.0&&aPointIndex==1.0){gl_PointSize=20.0;}else{gl_PointSize=10.0;}
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,"varying vec4 vColor;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;varying vec4 vPosition;varying vec4 vFragPosition;uniform mat4 uMatrix;void main(){vec4 color=vColor;if(vEdgeIndex<0.0){color.r+=0.2;color.g+=0.2;color.b+=0.2;}else{float i=ceil(vEdgeIndex);;float d=i/vEdgeCount*0.5;if(i<=vEdgeCount/2.0){d=0.2*(i/vEdgeCount*0.5)-0.1;}else{d=0.2*(vEdgeCount-i)/vEdgeCount*0.5-0.1;}color.r+=d;color.g+=d;color.b+=d;}gl_FragColor=color;}"],light:[`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aEdgeIndex;attribute float aPointIndex;attribute float aEdgeCount;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vEdgeIndex=aEdgeIndex;vEdgeCount=aEdgeCount;vPointIndex=aPointIndex;float z=aPos.z*uZoomUnits;float x=aPos.x;float y=aPos.y;vSize=aSize*uZoomUnits;float a=radians(360.0/aEdgeCount);float b=a/2.0;float i=aEdgeIndex;float j=aPointIndex;float angle=a*(i-1.0)+b;float r=vSize/cos(b);y=y+r*sin(angle);x=x+r*cos(angle);if(j==1.0){z=0.0;}vPosition=vec4(aPos.xyz,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,"varying vec4 vColor;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;varying vec4 vPosition;varying vec4 vFragPosition;uniform mat4 uMatrix;void main(){vec4 color=vColor;color.a=1.0-vFragPosition.z/vPosition.z;gl_FragColor=color;}"]};f=f[h.type]||f.normal,this.program=new ui(this.gl,{vertexShader:f[0],fragmentShader:f[1],defines:h.enablePicked?["PICK"]:[]},this),this.buffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{stride:44,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:44,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:12},{stride:44,name:"aEdgeIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:16},{stride:44,name:"aPointIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:20},{stride:44,name:"aEdgeCount",buffer:this.buffer,size:1,type:"FLOAT",offset:24},{stride:44,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:28}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"onChanged",value:function(s,h){this.gl&&h&&(this.uniforms={},this.data=h,this.options=s,this.processData(),s.enablePicked&&this.parsePickData(h))}},{key:"processData",value:function(){var s=[],h=[];this.options.type==="light"?this.createLightBuffer(this.data,s,h):this.createNormalBuffer(this.data,s,h),this.bufferData=s,this.indexData=h,this.buffer.updateData(new Float32Array(s)),this.indexBuffer.updateData(new Uint32Array(h))}},{key:"createNormalBuffer",value:function(s,h,f){var x=this,g=parseInt(this.options.edgeCount,10)||4;s.forEach(function(_,L){var F=_.color||x.options.color,M=_.size||x.options.size,E=Array.isArray(_.value)?_.value:typeof _.value=="number"?[_.value]:[1],P=x.normizedPoint(_.geometry.coordinates),O=_.height||x.options.height,B=E.reduce(function(U,q){return Number(U)+Number(q)}),X=0,W="blue";for(E.forEach(function(U,q){W=x.normizedColor(typeof F=="function"?F(U,q,E):Array.isArray(F)?F[q]:F),U=typeof O=="function"?O(U,q,E):Array.isArray(O)?O[q]:O/B*U;var he=f[f.length-1],ge=h.length/11;for(0<ge&&(g%2==1&&q===0?f.push(he,he,ge):f.push(he,ge)),q=1;q<=2*g;q++)q%2==0?h.push.apply(h,[P[0],P[1],X,M,q/2,2,g].concat(Vi(W))):h.push.apply(h,[P[0],P[1],X+U,M,(q+1)/2,1,g].concat(Vi(W))),f.push(ge+q-1),q===2*g&&(h.push.apply(h,[P[0],P[1],X+U,M,q/2+1,1,g].concat(Vi(W))),h.push.apply(h,[P[0],P[1],X,M,q/2+1,2,g].concat(Vi(W))),f.push(ge+q,ge+q+1));X+=U}),L=f[f.length-1],_=h.length/11,0<_&&f.push(L,_),L=1;L<=g;L++)h.push.apply(h,[P[0],P[1],X,M,-1,L,g].concat(Vi(W))),f.push(_+L-1)})}},{key:"createLightBuffer",value:function(s,h,f){var x=this,g=parseInt(this.options.edgeCount,10)||4;s.forEach(function(_,L){L=_.color||x.options.color,L=x.normizedColor(typeof L=="function"?L(_.value):typeof L=="string"?L:"blue");var F=_.size||x.options.size,M=x.normizedPoint(_.geometry.coordinates),E=_.height||x.options.height;for(E=typeof E=="function"?E(_.value):E,_=1;_<=g;_++){var P=f[f.length-1],O=h.length/11;for(0<O&&f.push(P,O),P=1;P<=2*g;P++)P%2==0?h.push.apply(h,[M[0],M[1],E,F,P/2,1,g].concat(Vi(L))):h.push.apply(h,[M[0],M[1],E,F,(P+1)/2,2,g].concat(Vi(L))),f.push(O+P-1),P===2*g&&f.push(O,O+1)}})}},{key:"render",value:function(s){var h=this.program,f=s.gl,x=s.matrix;this.setGLState({cullFace:this.options.type==="normal"}),h.use(f),this.vertexArray.bind(),this.indexBuffer.bind();var g=this.map.getZoomUnits();vi(this.uniforms,this.getCommonUniforms(s),{uZoomUnits:this.options.unit==="px"?g:1,uMatrix:x}),h.setUniforms(this.uniforms),f.drawElements(f.TRIANGLE_STRIP,this.indexData.length,f.UNSIGNED_INT,0)}}]),o}(xo),zf=function(m){function o(c){qr(this,o);var s=Fn(this,(o.__proto__||nn(o)).call(this,c));return c=s.getOptions(),s.fillPoint=new nc({enablePicked:c.enablePicked,autoSelect:c.autoSelect}),s.shadowPoint=new nc,s.textPoint=new Sd,s.children=[s.shadowPoint,s.fillPoint,s.textPoint],s}return _n(o,m),on(o,[{key:"pick",value:function(s,h){return this.fillPoint.pick(s,h)}},{key:"onOptionsChanged",value:function(s){this.shadowPoint.setOptions({depthTest:!1,polygonOffset:[1,1],color:s.shadowColor,size:s.shadowSize,borderWidth:s.shadowBorderWidth,borderColor:s.shadowBorderColor}),this.fillPoint.setOptions({onClick:function(f){s.onClick&&s.onClick(f)},selectedIndex:s.selectedIndex,selectedColor:s.selectedColor,depthTest:!1,color:s.fillColor,size:s.fillSize,borderWidth:s.fillBorderWidth,borderColor:s.fillBorderColor}),this.textPoint.setOptions({collides:!1,polygonOffset:[-1,-1],color:s.fontColor,fontFamily:s.fontFamily,fontSize:s.fontSize})}},{key:"onDataChanged",value:function(s){var h=this,f=this.getOptions(),x=JSON.parse(ti(s)).map(function(_){return _.properties.size=h.getProperty("shadowSize",f.shadowSize,_),_.properties.color=h.getProperty("shadowColor",f.shadowColor,_),_.properties.borderColor=h.getProperty("shadowBorderColor",f.shadowBorderColor,_),_.properties.borderWidth=h.getProperty("shadowBorderWidth",f.shadowBorderWidth,_),_}),g=JSON.parse(ti(s)).map(function(_){return _.properties.size=h.getProperty("fillSize",f.fillSize,_),_.properties.color=h.getProperty("fillColor",f.fillColor,_),_.properties.borderColor=h.getProperty("fillBorderColor",f.fillBorderColor,_),_.properties.borderWidth=h.getProperty("fillBorderWidth",f.fillBorderWidth,_),_});this.shadowPoint.setData(x),this.fillPoint.setData(g),this.textPoint.setData(s)}},{key:"getProperty",value:function(s,h,f){return Object.prototype.toString.call(h)==="[object Function]"?h(f):(h=f[s]||h,"properties"in f&&s in f.properties&&(h=f.properties[s]),h)}},{key:"getDefaultOptions",value:function(){return{enablePicked:!1,selectedIndex:-1,selectedColor:"#ffff00",autoSelect:!0,fillColor:"rgba(255, 50, 10, 1)",fillSize:20,fillBorderColor:"#ffffff",fillBorderWidth:1.2,shadowColor:"rgba(255, 80, 110, 0.7)",shadowSize:40,shadowBorderColor:"rgba(255, 80, 110, 1)",shadowBorderWidth:1.2,fontSize:12,fontFamily:"Microsoft Yahei",fontColor:"#ffffff"}}}]),o}(Si),Mm=function(m){function o(){return qr(this,o),Fn(this,(o.__proto__||nn(o)).apply(this,arguments))}return _n(o,m),on(o,[{key:"toBBox",value:function(s){var h=Hi(s.item.geometry.coordinates,2);return s=h[0],h=h[1],{minX:s,minY:h,maxX:s,maxY:h}}},{key:"compareMinX",value:function(s,h){return s.item.geometry.coordinates[0]-h.item.geometry.coordinates[0]}},{key:"compareMinY",value:function(s,h){return s.item.geometry.coordinates[1]-h.item.geometry.coordinates[1]}}]),o}(rc),Sm=function(m){function o(c,s){return qr(this,o),c=Fn(this,(o.__proto__||nn(o)).call(this,c,s)),s=c.canvas=document.createElement("canvas"),c.ctx=s.getContext("2d"),c.geoRBush=new Mm,c}return _n(o,m),on(o,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,flat:!1,collides:!0,unit:"px",angle:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],itemDimension:[20,20],renderItem:this.defaultOptionRenderItem}}},{key:"defaultOptionRenderItem",value:function(s,h,f){f.fillStyle="red",f.fillRect(h.x,h.y,h.w,h.h)}},{key:"initialize",value:function(s){this.gl=s;var h=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new ui(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uFlat;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)+size.x*sin(rotation);}else if(corner==2.0){x+=size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)-size.x*sin(rotation);}else if(corner==3.0){x+=size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)-size.x*sin(rotation);}else{x+=-size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)+size.x*sin(rotation);}return vec3(x,y,coord.z);}void main(){vTextCoord=aTextCoord;if(uFlat){vec2 pixelOffset=offset;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;pixelOffset*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);current.z+=zIndex;gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y-pixelOffset[1],current.z,1.0);}else{vec2 pixelOffset=offset*zoomUnits;vec4 projection=matrix*vec4(position.x+pixelOffset[0],position.y-pixelOffset[1],position.z,1.0);vec3 screen=projection.xyz/projection.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio*scale;vec3 current=transformCoord(screen,halfSize,corner);current.z+=zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:h.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new Qr({gl:s,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new Qr({gl:s,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),h=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],h=h.concat(this.getCommonAttributes()),this.vertexArray=new la({gl:s,program:this.program,attributes:h})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.canvas=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(s,h){this.gl&&this.processCache(s,h)}},{key:"processCache",value:function(s,h){for(this.cachedData=[],s=0;s<h.length;s++){var f=h[s],x=this.normizedPoint(f.geometry.coordinates);x&&this.cachedData.push({point:x,item:f,extra:{},index:s})}this.geoRBush.load(this.cachedData)}},{key:"render",value:function(s){if(this.cachedData&&this.cachedData.length&&this.map){var h=s.gl,f=s.matrix,x=this.getOptions(),g=this.program;g.use(h),this.throttleUpdate(s),this.setGLState({blend:!0,blendEquation:h.FUNC_ADD,blendFunc:[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA],polygonOffset:x.polygonOffset,depthTest:x.depthTest,depthMask:x.depthWrite});var _=this.map.getZoomUnits();g.setUniforms(vi(this.getCommonUniforms(s),{matrix:f,devicePixelRatio:window.devicePixelRatio,textureImage:this.texture,uFlat:x.flat,offset:x.offset,zoomUnits:_,zIndex:x.zIndex,uUnitPx:x.unit==="px"})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),h.drawElements(h.TRIANGLES,this.index.length,h.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(s){var h=this;clearTimeout(this.throttleTimer),300<new Date().getTime()-this.lastUpdateTime?(this.updateText(s),this.lastUpdateTime=new Date().getTime()):this.throttleTimer=setTimeout(function(){h.updateText(s),h.lastUpdateTime=new Date().getTime()},200)}},{key:"updateText",value:function(s){var h=s.gl,f=s.matrix,x=this.getOptions(),g=x.padding,_=x.margin,L=x.collides;s=x.enablePicked;var F=x.itemDimension,M=x.beforeRenderAll,E=x.beforeComputeDimension;x=x.renderItem;var P=this.map.getBounds(),O=h.canvas.width/window.devicePixelRatio,B=h.canvas.height/window.devicePixelRatio,X=this.canvas;h=this.ctx,h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),E&&E(h),P=this.geoRBush.search({minX:P.sw.lng,minY:P.sw.lat,maxX:P.ne.lng,maxY:P.ne.lat});var W=new rc;E=[];for(var U=0;U<P.length;U++){var q=P[U],he=q.point,ge=q.item,_e=q.extra;q=q.index;var Se=Hi(he,3);Se=Qo.clone([Se[0],Se[1],Se[2],1]),Qo.transformMat4(Se,Se,f),Qo.scale(Se,Se,1/Se[3]);var $e=(Se[0]+1)/2*O,Be=(-Se[1]+1)/2*B,lt=Array.isArray(F)?F:F(ge,h,_e);Se=lt[0]+2*g[0],lt=lt[1]+2*g[1];var kt=Se+_[0],cr=lt+_[1];if($e-=kt/2,Be-=cr/2,kt=$e+kt,cr=Be+cr,!(0>kt||0>cr||$e>O||Be>B)){if(L){if(cr={minX:$e,maxX:kt,minY:Be,maxY:cr},W.collides(cr))continue;W.insert(cr)}E.push({w:Se,h:lt,point:he,item:ge,extra:_e,dataIndex:q})}}for(h.restore(),g=dc(E),f=g.w,g=g.h,0>=f&&(f=1),0>=g&&(g=1),X.width=f*window.devicePixelRatio,X.height=g*window.devicePixelRatio,h.save(),h.scale(window.devicePixelRatio,window.devicePixelRatio),M&&M(h),M=[],X=[],_=[],L=[],F=0,O=E.length;F<O;++F){for(B=E[F],x(B.item,B,h,B.extra),U=Hi(B.point,3),P=U[0],W=U[1],U=U[2],he=0;4>he;he++)M.push(P,W,U),M.push(he),M.push(B.w,B.h),M.push(1,0);P=B.x/f,W=(B.x+B.w)/f,U=(B.y+B.h)/g,he=B.y/g,X.push(P,U,P,he,W,he,W,U),P=4*F,_.push(P,P+2,P+1,P,P+3,P+2),s&&(B=this.indexToRgb(B.dataIndex),L.push(B[0]/255,B[1]/255,B[2]/255),L.push(B[0]/255,B[1]/255,B[2]/255),L.push(B[0]/255,B[1]/255,B[2]/255),L.push(B[0]/255,B[1]/255,B[2]/255))}h.restore(),this.loadTexture(),this.index=_,this.vertexBuffer.updateData(new Float32Array(M)),this.uvBuffer.updateData(new Float32Array(X)),this.indexBuffer.updateData(new Uint32Array(_)),s&&this.pickBuffer.updateData(new Float32Array(L))}},{key:"loadTexture",value:function(){var s=this;this.canvas?Or(this.gl,this.canvas,function(h){s.texture=h},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),o}(xo),Mg=function(){function m(o){qr(this,m),this.layers=[],this.options=o,this.webglLayer=o.webglLayer}return on(m,[{key:"addLayer",value:function(c){for(var s=!1,h=0;h<this.layers.length;h++)if(this.layers[h]===c){s=!0;break}s||(c.map=this.webglLayer.map,c.layerType==="threeLayer"?(c.setWebglLayer(this.webglLayer),s=c.getThreeLayer(),this.addLayer(s),c.initialize&&c.initialize(s)):(c.setWebglLayer(this.webglLayer),c.commonInitialize&&c.commonInitialize(this.webglLayer.gl),c.initialize&&c.initialize(this.webglLayer.gl),c.onOptionsChanged(c.getOptions(),{}),c.onDataChanged(c.getData()),c.onChanged(c.getOptions(),c.getData())),this.layers.push(c)),this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"removeLayer",value:function(c){for(var s=0;s<this.layers.length;s++)this.layers[s]===c&&this.layers.splice(s,1);this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"showLayer",value:function(c){for(var s=0;s<this.layers.length;s++)this.layers[s]===c&&c.show();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"hideLayer",value:function(c){for(var s=0;s<this.layers.length;s++)this.layers[s]===c&&c.hide();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"removeAllLayers",value:function(){this.layers=[],this.webglLayer.stopAnimation(),this.webglLayer.render()}},{key:"destroyAllLayers",value:function(){for(var c=0;c<this.layers.length;c++){var s=this.layers[c];s.destroy&&s.destroy()}}},{key:"getAllLayers",value:function(){return this.layers}},{key:"getAllThreeLayers",value:function(){for(var c=[],s=0;s<this.layers.length;s++){var h=this.layers[s];h.layerType==="ThreeLayer"&&c.push(h)}return c}},{key:"isRequestAnimation",value:function(){for(var c=!1,s=0;s<this.layers.length;s++)if(this.layers[s].isRequestAnimation()){c=!0;break}return c}},{key:"beforeRender",value:function(c){c.gl&&this.webglLayer.stateManager.setDefaultState()}},{key:"afterRender",value:function(c){(c=c.gl)&&(c.bindBuffer(c.ARRAY_BUFFER,null),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null),c.useProgram(null))}},{key:"renderGLLayers",value:function(c){this.webglLayer.stateManager.save();for(var s=0;s<this.layers.length;s++){var h=this.layers[s];if(h._visible===!0&&h.layerType!=="threeLayer"&&h.layerType!=="ThreeLayer"){var f=h.map.getZoom(),x=h.getOptions().zoomThreshold;x&&(f<x[0]||f>=x[1])||(this.beforeRender(c),h.render(c),this.afterRender(c))}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayer",value:function(c){this.webglLayer.stateManager.save(),this.webglLayer.stateManager.setState({blendFunc:[c.gl.SRC_ALPHA,c.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:c.gl.LESS,cullFace:!1});for(var s=0;s<this.layers.length;s++){var h=this.layers[s];if(h._visible===!0&&h.layerType==="ThreeLayer"){var f=h.map.getZoom(),x=h.getOptions().zoomThreshold;x&&(f<x[0]||f>=x[1])||h.render(c)}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayers",value:function(c){this.webglLayer.stateManager.save(),this.webglLayer.stateManager.setState({blendFunc:[c.gl.SRC_ALPHA,c.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:c.gl.LESS,cullFace:!1});for(var s=0;s<this.layers.length;s++){var h=this.layers[s];if(h._visible===!0&&h.layerType==="threeLayer"){var f=h.map.getZoom(),x=h.getOptions().zoomThreshold;x&&(f<x[0]||f>=x[1])||h.render(c)}}this.webglLayer.stateManager.restore()}},{key:"onClick",value:function(c){for(var s=0;s<this.layers.length;s++){var h=this.layers[s];if(h._visible===!0&&h.layerType!=="threeLayer"&&h.layerType!=="ThreeLayer"){var f=h.map.getZoom(),x=h.getOptions().zoomThreshold;x&&(f<=x[0]||f>=x[1])||!h.options.enablePicked||!h.options.onClick||!h.pick||(f=h.pick(c.x,c.y),h.options.onClick(f,c),h.options.autoSelect&&this.webglLayer.render())}}}},{key:"onDblClick",value:function(c){for(var s=0;s<this.layers.length;s++){var h=this.layers[s];if(h._visible===!0&&h.layerType!=="threeLayer"&&h.layerType!=="ThreeLayer"){var f=h.map.getZoom(),x=h.getOptions().zoomThreshold;x&&(f<=x[0]||f>=x[1])||!h.options.enablePicked||!h.options.onDblClick||!h.pick||(f=h.pick(c.x,c.y),h.options.onDblClick(f,c),h.options.autoSelect&&this.webglLayer.render())}}}},{key:"onRightClick",value:function(c){for(var s=0;s<this.layers.length;s++){var h=this.layers[s];if(h._visible===!0&&h.layerType!=="threeLayer"&&h.layerType!=="ThreeLayer"){var f=h.map.getZoom(),x=h.getOptions().zoomThreshold;x&&(f<=x[0]||f>=x[1])||!h.options.enablePicked||!h.options.onRightClick||!h.pick||(f=h.pick(c.x,c.y),h.options.onRightClick(f,c),h.options.autoSelect&&this.webglLayer.render())}}}},{key:"onMousemove",value:function(c){for(var s=!1,h=0;h<this.layers.length;h++){var f=this.layers[h];if(f._visible===!0&&f.layerType!=="threeLayer"&&f.layerType!=="ThreeLayer"){var x=f.map.getZoom(),g=f.getOptions().zoomThreshold;(!g||!(x<=g[0]||x>=g[1]))&&f.options.enablePicked&&f.pick&&(x=f.pick(c.x,c.y),this.webglLayer.map.map.platform.style.cursor=x.dataIndex===-1?"default":"pointer",f.options.onMousemove&&f.options.onMousemove(x,c),f.options.autoSelect&&(s=!0))}}s&&(this.webglLayer.isAnimation||this.webglLayer.render())}},{key:"destroy",value:function(){this.destroyAllLayers(),this.removeAllLayers()}}]),m}(),Du=function(){function m(o){var c=this;qr(this,m),this.options={autoUpdate:!0},this._visible=!0,vi(this.options,o);var s=o.pointOffset;this.webglLayer=o.webglLayer||new Gl(o.map,this.options),this.layerManager=new Mg({autoUpdate:this.options.autoUpdate,webglLayer:this.webglLayer}),this.effectManager=new hh(this.webglLayer.gl),this.webglRender={render:function(){}},this.options.effects&&this.effectManager.setEffects([this.webglRender].concat(this.options.effects)),this.webglLayer.onRender(function(h){c._render(h)}),this.webglLayer.onClick=function(h){c._visible&&c.layerManager.onClick(h)},this.webglLayer.onDblClick=function(h){c._visible&&c.layerManager.onDblClick(h)},this.webglLayer.onRightClick=function(h){c._visible&&c.layerManager.onRightClick(h)},this.webglLayer.onMousemove=function(h){c._visible&&c.layerManager.onMousemove(h)},s||this.webglLayer.options.mapType==="cesium"||(s=this.webglLayer.map.getCenter(),this.webglLayer.options.pointOffset=[s.lng,s.lat]),this.webglLayer.map.onResize(function(){c.effectManager.onResize()}),(this.postProcessing=o.postProcessing)&&(this.postProcessing.setWebglLayer(this.webglLayer),o=this.postProcessing.getThreeLayer(),this.addLayer(o),this.postProcessing.initialize(o),o.postProcessing=this.postProcessing)}return on(m,[{key:"renderCanvas",value:function(c){var s=this;this.postProcessing?this.postProcessing.addRender(function(){s.layerManager.renderGLLayers(c)}):this.layerManager.renderGLLayers(c),this.layerManager.renderThreeLayers(c),this.layerManager.renderThreeLayer(c)}},{key:"render",value:function(){this.webglLayer&&this.webglLayer.render()}},{key:"_render",value:function(c){var s=this;if(this._visible){var h=this.options.effects;h&&0<h.length?(this.webglRender.render=function(){s.renderCanvas(c)},this.effectManager.render()):(this.webglLayer.saveFramebuffer(),this.renderCanvas(c),this.webglLayer.restoreFramebuffer())}}},{key:"onRender",value:function(c){this.webglLayer.onRender(c)}},{key:"destroy",value:function(){this.stopAnimation(),this.layerManager.destroy(),this.effectManager.destroy(),this.webglLayer.destroy()}},{key:"isRequestAnimation",value:function(){return this.layerManager.isRequestAnimation()}},{key:"startAnimation",value:function(){this.webglLayer.startAnimation()}},{key:"stopAnimation",value:function(){this.webglLayer.stopAnimation()}},{key:"show",value:function(){this._visible!==!0&&(this._visible=!0,this.webglLayer.render(),this.isRequestAnimation()&&this.startAnimation())}},{key:"hide",value:function(){this._visible!==!1&&(this._visible=!1,this.stopAnimation(),this.webglLayer.clear())}},{key:"showLayer",value:function(c){this.layerManager.showLayer(c)}},{key:"hideLayer",value:function(c){this.layerManager.hideLayer(c)}},{key:"add",value:function(c){this.addLayer(c)}},{key:"remove",value:function(c){this.removeLayer(c)}},{key:"addLayer",value:function(c){this.layerManager.addLayer(c)}},{key:"removeLayer",value:function(c){this.layerManager.removeLayer(c)}},{key:"removeAllLayers",value:function(){this.layerManager.removeAllLayers()}},{key:"getAllLayers",value:function(){return this.layerManager.getAllLayers()}},{key:"getAllThreeLayers",value:function(){return this.layerManager.getAllThreeLayers()}}]),m}();window._hmt=window._hmt||[],function(){var m=document.createElement("script");m.src="https://hm.baidu.com/hm.js?e8002ef3d9e0d8274b5b74cc4a027d08";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(m,o)}(),st.View=Du,st.CanvasLayer=ye,st.CircleLayer=function m(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return qr(this,m),gm.includes(o.type)?new vg(o):new pm(o)},st.GridLayer=Tp,st.HeatGridLayer=m0,st.ShapeLayer=Rf,st.SimpleLineLayer=Tv,st.LineLayer3D=Lc,st.LineLayer=bv,st.WallSpriteLayer=J,st.LinePointLayer=Ya,st.WallLayer=me,st.WallTripLayer=co,st.HeatLineLayer=xa,st.HoneycombLayer=No,st.WebglLayer=Gl,st.PointLayer=nc,st.GroundRippleLayer=ol,st.RippleLayer=ph,st.SparkLayer=al,st.ClusterLayer=Ou,st.HeatPointLayer=gh,st.ShapeLineLayer=ic,st.PointTripLayer=go,st.LineTripLayer=io,st.IconCollidesLayer=oi,st.LineFlowLayer=uu,st.TileLayer=pa,st.IconLayer=Ro,st.BoardLayer=mo,st.PolygonLayer=Hh,st.CarLineLayer=Is,st.Layer=xo,st.TextLayer=Sd,st.LineTextLayer=ty,st.LabelLayer=Bf,st.TrafficLayer=ry,st.GltfLayer=_g,st.HeatmapLayer=y1,st.BarLayer=x1,st.MarkerListLayer=zf,st.PointCanvasCustomLayer=Sm,st.FXAA=gg,st.SMAA=Cd,st.BlurEffect=_v,st.BloomEffect=dm,st.BrightEffect=ch,st.DepthEffect=mg,st.EffectManager=hh,st.getContext=Bc,st.createTexture=fu,st.loadTextureImage=Or,st.FrameBufferObject=ps,st.Program=ui,st.StateManager=pg,st.Buffer=Qr,st.VertexArray=la,st.CommonLayer=Ad,st.MercatorProjection=Cr,st.Canvas=Ko,st.Intensity=ro,st.BezierCurve=ia,st.GeodesicCurve=vt,st.OdCurve=mv,st.utilCity={getProvinceNameByCityName:function(o){for(var c=0;c<Qc.length;c++)for(var s=Qc[c].n,h=Qc[c].cities,f=0;f<h.length;f++)if(h[f].n==o)return s;return null},getCenterByCityName:function(o){o=o.replace("\u5E02","");for(var c=0;c<pd.length;c++)if(pd[c].n==o)return Br(pd[c].g);for(c=0;c<hs.length;c++)if(hs[c].n==o)return Br(hs[c].g);for(c=0;c<Qc.length;c++){if(Qc[c].n==o)return Br(Qc[c].g);for(var s=Qc[c].cities,h=0;h<s.length;h++)if(s[h].n==o)return Br(s[h].g)}return null}},st.isMobile=ou,st.Encryptor={encode:function(o){o=fm.deflateRaw(o);for(var c=[],s=0;s<o.length;s++)c.push(o[s]^23);return new Uint8Array(c)},decode:function(o){o=new Uint8Array(o);for(var c=[],s=0;s<o.length;s++)c.push(o[s]^23);o=new Uint8Array(c);try{var h=window.flate.deflate_decode_raw(o);return new TextDecoder("utf-8").decode(h)}catch(f){return console.warn("inflate by pako!"),fm.inflateRaw(o,{to:"string"})}},download:function(o,c){var s=new Blob([o],{type:"application/octet-binary"});o=document.createElement("a"),s=window.URL.createObjectURL(s),o.href=s,o.download=c||"mapvgl_download",o.click()}},st.toRadian=Er,st.toAngle=xe,st.ceilPowerOfTwo=Lr,st.floorPowerOfTwo=Hn,st.approximatelyEqual=bo,st.__moduleExports=Al,st.vec4=Qo,st.vec3=In,st.vec2=ni,st.quat2=vm,st.quat=Xa,st.mat4=jr,st.mat3=wp,st.mat2d=_p,st.mat2=ym,st.glMatrix=Pf,Object.defineProperty(st,"__esModule",{value:!0})})}).call(this,Ae("IyRk"))},"5bzT":function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importDefault(Ae("hODF")),st=function(ye){Wt.__extends(At,ye);function At(Ye){return ye.call(this,Ye)||this}return At.prototype.getControl=function(){return new BMapGL.NavigationControl3D(this.getOptions())},At.prototype.render=function(){return null},At}(rr.default);ft.default=st},"5zFI":function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("i8i4");function rr(st,ye){this._point=new BMapGL.Point(st.lng,st.lat),this._options=ye||{},this._html=ye.html||"";var At=new BMapGL.Overlay;for(var Ye in At)Ye!=="initialize"&&Ye!=="draw"&&Ye!=="destroy"&&(this.__proto__[Ye]=At[Ye])}rr.prototype.initialize=function(st){return this._map=st,this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.zIndex=this._options.zIndex||BMapGL.Overlay.getZIndex(this._point.lat),Wt.render(this._html,this._div),this._div.onmousedown=function(ye){return ye=ye||window.event,ye.preventDefault?ye.preventDefault():ye.returnValue=!1,!1},st.getPanes().floatShadow.appendChild(this._div),this._div},rr.prototype.destroy=function(){Wt.unmountComponentAtNode(this._div)},rr.prototype.draw=function(){var st=this._map,ye=st.pointToOverlayPixel(this._point),At={width:0,height:0};this._options&&this._options.offset&&(At=this._options.offset);var Ye=At.width,Ut=At.height;this._options&&this._options.unit&&this._options.unit==="m"&&(Ye/=st.getZoomUnits(),Ut/=st.getZoomUnits()),this._div.style.left=ye.x+Ye+"px",this._div.style.top=ye.y+Ut+"px",this._div.style.transform="translate(-50%, -100%)"},ft.default=rr},"8txm":function(Dn,ft,Ae){},DjyN:function(Dn,ft,Ae){"use strict";var Wt=Ae("cIOH"),rr=Ae.n(Wt),st=Ae("Urep"),ye=Ae.n(st),At=Ae("OaEy")},E9nw:function(Dn,ft){Dn.exports=function(){var Ae=document.getSelection();if(!Ae.rangeCount)return function(){};for(var Wt=document.activeElement,rr=[],st=0;st<Ae.rangeCount;st++)rr.push(Ae.getRangeAt(st));switch(Wt.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":Wt.blur();break;default:Wt=null;break}return Ae.removeAllRanges(),function(){Ae.type==="Caret"&&Ae.removeAllRanges(),Ae.rangeCount||rr.forEach(function(ye){Ae.addRange(ye)}),Wt&&Wt.focus()}}},"I/il":function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importDefault(Ae("hODF")),st=function(ye){Wt.__extends(At,ye);function At(Ye){return ye.call(this,Ye)||this}return At.prototype.getControl=function(){return new BMapGL.ZoomControl(this.getOptions())},At.prototype.render=function(){return null},At}(rr.default);ft.default=st},LvDl:function(Dn,ft,Ae){(function(Wt,rr){var st;/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(){var ye,At="4.17.21",Ye=200,Ut="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",St="Expected a function",ce="Invalid `variable` option passed into `_.template`",Ne="__lodash_hash_undefined__",Q=500,Oe="__lodash_placeholder__",pt=1,Lt=2,Er=4,xe=1,Lr=2,Hn=1,bo=2,Cr=4,Lo=8,Ui=16,mi=32,Ko=64,ro=128,ia=256,Xt=512,vt=30,Dr="...",Br=800,Gr=16,kr=1,Nr=2,wr=3,Jr=1/0,Tn=9007199254740991,fa=17976931348623157e292,Ja=0/0,ki=4294967295,vs=ki-1,Bc=ki>>>1,fu=[["ary",ro],["bind",Hn],["bindKey",bo],["curry",Lo],["curryRight",Ui],["flip",Xt],["partial",mi],["partialRight",Ko],["rearg",ia]],Or="[object Arguments]",Sl="[object Array]",Yp="[object AsyncFunction]",Zl="[object Boolean]",$r="[object Date]",oa="[object DOMException]",Kh="[object Error]",wh="[object Function]",ei="[object GeneratorFunction]",ul="[object Map]",ko="[object Number]",_i="[object Null]",ss="[object Object]",qa="[object Promise]",zc="[object Proxy]",Bu="[object RegExp]",_a="[object Set]",Ia="[object String]",Ud="[object Symbol]",zu="[object Undefined]",Kl="[object WeakMap]",Uc="[object WeakSet]",Qa="[object ArrayBuffer]",Uu="[object DataView]",fc="[object Float32Array]",dc="[object Float64Array]",ku="[object Int8Array]",Gg="[object Int16Array]",kc="[object Int32Array]",Tr="[object Uint8Array]",kd="[object Uint8ClampedArray]",Jl="[object Uint16Array]",Ir="[object Uint32Array]",Hc=/\b__p \+= '';/g,Hd=/\b(__p \+=) '' \+/g,Jh=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_h=/&(?:amp|lt|gt|quot|#39);/g,cl=/[&<>"']/g,Tl=RegExp(_h.source),pc=RegExp(cl.source),s0=/<%-([\s\S]+?)%>/g,Zp=/<%([\s\S]+?)%>/g,$a=/<%=([\s\S]+?)%>/g,ev=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tv=/^\w*$/,jg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ls=/[\\^$.*+?()[\]{}|]/g,hl=RegExp(ls.source),va=/^\s+/,Ho=/\s/,rv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nv=/\{\n\/\* \[wrapped with (.+)\] \*/,iv=/,? & /,Kp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gc=/[()=,{}\[\]\/\s]/,Vg=/\\(\\)?/g,Gd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wg=/\w*$/,Il=/^[-+]0x[0-9a-f]+$/i,jd=/^0b[01]+$/i,Zf=/^\[object .+?Constructor\]$/,Hu=/^0o[0-7]+$/i,Jp=/^(?:0|[1-9]\d*)$/,Xg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jc=/($^)/,Go=/['\n\r\u2028\u2029\\]/g,Fo="\\ud800-\\udfff",l0="\\u0300-\\u036f",u0="\\ufe20-\\ufe2f",ov="\\u20d0-\\u20ff",av=l0+u0+ov,Vd="\\u2700-\\u27bf",Yg="a-z\\xdf-\\xf6\\xf8-\\xff",sv="\\xac\\xb1\\xd7\\xf7",gc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lv="\\u2000-\\u206f",uv=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Da="A-Z\\xc0-\\xd6\\xd8-\\xde",ka="\\ufe0e\\ufe0f",Kf=sv+gc+lv+uv,Jf="['\u2019]",c0="["+Fo+"]",qr="["+Kf+"]",ql="["+av+"]",Zg="\\d+",ta="["+Vd+"]",Kg="["+Yg+"]",mc="[^"+Fo+Kf+Zg+Vd+Yg+Da+"]",qf="\\ud83c[\\udffb-\\udfff]",vc="(?:"+ql+"|"+qf+")",Wd="[^"+Fo+"]",qp="(?:\\ud83c[\\udde6-\\uddff]){2}",qh="[\\ud800-\\udbff][\\udc00-\\udfff]",Vc="["+Da+"]",Xd="\\u200d",cv="(?:"+Kg+"|"+mc+")",h0="(?:"+Vc+"|"+mc+")",ra="(?:"+Jf+"(?:d|ll|m|re|s|t|ve))?",Mi="(?:"+Jf+"(?:D|LL|M|RE|S|T|VE))?",Qf=vc+"?",hv="["+ka+"]?",f0="(?:"+Xd+"(?:"+[Wd,qp,qh].join("|")+")"+hv+Qf+")*",Qp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Yd=hv+Qf+f0,d0="(?:"+[ta,qp,qh].join("|")+")"+Yd,Qh="(?:"+[Wd+ql+"?",ql,qp,qh,c0].join("|")+")",du=RegExp(Jf,"g"),$f=RegExp(ql,"g"),$h=RegExp(qf+"(?="+qf+")|"+Qh+Yd,"g"),ed=RegExp([Vc+"?"+Kg+"+"+ra+"(?="+[qr,Vc,"$"].join("|")+")",h0+"+"+Mi+"(?="+[qr,Vc+cv,"$"].join("|")+")",Vc+"?"+cv+"+"+ra,Vc+"+"+Mi,fv,Qp,Zg,d0].join("|"),"g"),Bs=RegExp("["+Xd+Fo+av+ka+"]"),zs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ha=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yc=-1,so={};so[fc]=so[dc]=so[ku]=so[Gg]=so[kc]=so[Tr]=so[kd]=so[Jl]=so[Ir]=!0,so[Or]=so[Sl]=so[Qa]=so[Zl]=so[Uu]=so[$r]=so[Kh]=so[wh]=so[ul]=so[ko]=so[ss]=so[Bu]=so[_a]=so[Ia]=so[Kl]=!1;var jo={};jo[Or]=jo[Sl]=jo[Qa]=jo[Uu]=jo[Zl]=jo[$r]=jo[fc]=jo[dc]=jo[ku]=jo[Gg]=jo[kc]=jo[ul]=jo[ko]=jo[ss]=jo[Bu]=jo[_a]=jo[Ia]=jo[Ud]=jo[Tr]=jo[kd]=jo[Jl]=jo[Ir]=!0,jo[Kh]=jo[wh]=jo[Kl]=!1;var Zd={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},$p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Gu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Us=parseFloat,El=parseInt,pu=typeof Wt=="object"&&Wt&&Wt.Object===Object&&Wt,gu=typeof self=="object"&&self&&self.Object===Object&&self,Xr=pu||gu||Function("return this")(),Wc=ft&&!ft.nodeType&&ft,Xc=Wc&&typeof rr=="object"&&rr&&!rr.nodeType&&rr,ef=Xc&&Xc.exports===Wc,Fa=ef&&pu.process,Yi=function(){try{var dt=Xc&&Xc.require&&Xc.require("util").types;return dt||Fa&&Fa.binding&&Fa.binding("util")}catch(zt){}}(),ks=Yi&&Yi.isArrayBuffer,da=Yi&&Yi.isDate,Kd=Yi&&Yi.isMap,mu=Yi&&Yi.isRegExp,Mh=Yi&&Yi.isSet,vi=Yi&&Yi.isTypedArray;function Ps(dt,zt,Nt){switch(Nt.length){case 0:return dt.call(zt);case 1:return dt.call(zt,Nt[0]);case 2:return dt.call(zt,Nt[0],Nt[1]);case 3:return dt.call(zt,Nt[0],Nt[1],Nt[2])}return dt.apply(zt,Nt)}function Jd(dt,zt,Nt,un){for(var Kn=-1,Ri=dt==null?0:dt.length;++Kn<Ri;){var lo=dt[Kn];zt(un,lo,Nt(lo),dt)}return un}function Ma(dt,zt){for(var Nt=-1,un=dt==null?0:dt.length;++Nt<un&&zt(dt[Nt],Nt,dt)!==!1;);return dt}function td(dt,zt){for(var Nt=dt==null?0:dt.length;Nt--&&zt(dt[Nt],Nt,dt)!==!1;);return dt}function xc(dt,zt){for(var Nt=-1,un=dt==null?0:dt.length;++Nt<un;)if(!zt(dt[Nt],Nt,dt))return!1;return!0}function nn(dt,zt){for(var Nt=-1,un=dt==null?0:dt.length,Kn=0,Ri=[];++Nt<un;){var lo=dt[Nt];zt(lo,Nt,dt)&&(Ri[Kn++]=lo)}return Ri}function Sh(dt,zt){var Nt=dt==null?0:dt.length;return!!Nt&&bl(dt,zt,0)>-1}function rd(dt,zt,Nt){for(var un=-1,Kn=dt==null?0:dt.length;++un<Kn;)if(Nt(zt,dt[un]))return!0;return!1}function Ci(dt,zt){for(var Nt=-1,un=dt==null?0:dt.length,Kn=Array(un);++Nt<un;)Kn[Nt]=zt(dt[Nt],Nt,dt);return Kn}function Jo(dt,zt){for(var Nt=-1,un=zt.length,Kn=dt.length;++Nt<un;)dt[Kn+Nt]=zt[Nt];return dt}function Yc(dt,zt,Nt,un){var Kn=-1,Ri=dt==null?0:dt.length;for(un&&Ri&&(Nt=dt[++Kn]);++Kn<Ri;)Nt=zt(Nt,dt[Kn],Kn,dt);return Nt}function on(dt,zt,Nt,un){var Kn=dt==null?0:dt.length;for(un&&Kn&&(Nt=dt[--Kn]);Kn--;)Nt=zt(Nt,dt[Kn],Kn,dt);return Nt}function Rs(dt,zt){for(var Nt=-1,un=dt==null?0:dt.length;++Nt<un;)if(zt(dt[Nt],Nt,dt))return!0;return!1}var nd=Ac("length");function id(dt){return dt.split("")}function od(dt){return dt.match(Kp)||[]}function tf(dt,zt,Nt){var un;return Nt(dt,function(Kn,Ri,lo){if(zt(Kn,Ri,lo))return un=Ri,!1}),un}function Zc(dt,zt,Nt,un){for(var Kn=dt.length,Ri=Nt+(un?1:-1);un?Ri--:++Ri<Kn;)if(zt(dt[Ri],Ri,dt))return Ri;return-1}function bl(dt,zt,Nt){return zt===zt?sf(dt,zt,Nt):Zc(dt,Ea,Nt)}function vu(dt,zt,Nt,un){for(var Kn=Nt-1,Ri=dt.length;++Kn<Ri;)if(un(dt[Kn],zt))return Kn;return-1}function Ea(dt){return dt!==dt}function qd(dt,zt){var Nt=dt==null?0:dt.length;return Nt?$d(dt,zt)/Nt:Ja}function Ac(dt){return function(zt){return zt==null?ye:zt[dt]}}function Cc(dt){return function(zt){return dt==null?ye:dt[zt]}}function wc(dt,zt,Nt,un,Kn){return Kn(dt,function(Ri,lo,wi){Nt=un?(un=!1,Ri):zt(Nt,Ri,lo,wi)}),Nt}function Qd(dt,zt){var Nt=dt.length;for(dt.sort(zt);Nt--;)dt[Nt]=dt[Nt].value;return dt}function $d(dt,zt){for(var Nt,un=-1,Kn=dt.length;++un<Kn;){var Ri=zt(dt[un]);Ri!==ye&&(Nt=Nt===ye?Ri:Nt+Ri)}return Nt}function rf(dt,zt){for(var Nt=-1,un=Array(dt);++Nt<dt;)un[Nt]=zt(Nt);return un}function Jg(dt,zt){return Ci(zt,function(Nt){return[Nt,dt[Nt]]})}function ep(dt){return dt&&dt.slice(0,xu(dt)+1).replace(va,"")}function Ql(dt){return function(zt){return dt(zt)}}function dl(dt,zt){return Ci(zt,function(Nt){return dt[Nt]})}function aa(dt,zt){return dt.has(zt)}function nf(dt,zt){for(var Nt=-1,un=dt.length;++Nt<un&&bl(zt,dt[Nt],0)>-1;);return Nt}function tp(dt,zt){for(var Nt=dt.length;Nt--&&bl(zt,dt[Nt],0)>-1;);return Nt}function ad(dt,zt){for(var Nt=dt.length,un=0;Nt--;)dt[Nt]===zt&&++un;return un}var rp=Cc(Zd),of=Cc($p);function sd(dt){return"\\"+Gu[dt]}function dv(dt,zt){return dt==null?ye:dt[zt]}function pl(dt){return Bs.test(dt)}function ld(dt){return zs.test(dt)}function pv(dt){for(var zt,Nt=[];!(zt=dt.next()).done;)Nt.push(zt.value);return Nt}function ud(dt){var zt=-1,Nt=Array(dt.size);return dt.forEach(function(un,Kn){Nt[++zt]=[Kn,un]}),Nt}function ju(dt,zt){return function(Nt){return dt(zt(Nt))}}function Hs(dt,zt){for(var Nt=-1,un=dt.length,Kn=0,Ri=[];++Nt<un;){var lo=dt[Nt];(lo===zt||lo===Oe)&&(dt[Nt]=Oe,Ri[Kn++]=Nt)}return Ri}function af(dt){var zt=-1,Nt=Array(dt.size);return dt.forEach(function(un){Nt[++zt]=un}),Nt}function np(dt){var zt=-1,Nt=Array(dt.size);return dt.forEach(function(un){Nt[++zt]=[un,un]}),Nt}function sf(dt,zt,Nt){for(var un=Nt-1,Kn=dt.length;++un<Kn;)if(dt[un]===zt)return un;return-1}function cd(dt,zt,Nt){for(var un=Nt+1;un--;)if(dt[un]===zt)return un;return un}function yu(dt){return pl(dt)?hd(dt):nd(dt)}function gl(dt){return pl(dt)?Au(dt):id(dt)}function xu(dt){for(var zt=dt.length;zt--&&Ho.test(dt.charAt(zt)););return zt}var ip=Cc(fl);function hd(dt){for(var zt=$h.lastIndex=0;$h.test(dt);)++zt;return zt}function Au(dt){return dt.match($h)||[]}function lf(dt){return dt.match(ed)||[]}var Qs=function dt(zt){zt=zt==null?Xr:_c.defaults(Xr.Object(),zt,_c.pick(Xr,Ha));var Nt=zt.Array,un=zt.Date,Kn=zt.Error,Ri=zt.Function,lo=zt.Math,wi=zt.Object,Sa=zt.RegExp,Kc=zt.String,Ga=zt.TypeError,Vu=Nt.prototype,uf=Ri.prototype,Gs=wi.prototype,js=zt["__core-js_shared__"],Wu=uf.toString,Ni=Gs.hasOwnProperty,eg=0,Th=function(){var A=/[^.]+$/.exec(js&&js.keys&&js.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),cf=Gs.toString,Vs=Wu.call(wi),Xu=Xr._,op=Sa("^"+Wu.call(Ni).replace(ls,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mc=ef?zt.Buffer:ye,Sc=zt.Symbol,$l=zt.Uint8Array,hf=Mc?Mc.allocUnsafe:ye,Ll=ju(wi.getPrototypeOf,wi),Ta=wi.create,qg=Gs.propertyIsEnumerable,Fn=Vu.splice,Qg=Sc?Sc.isConcatSpreadable:ye,Zi=Sc?Sc.iterator:ye,ja=Sc?Sc.toStringTag:ye,ap=function(){try{var A=Qo(wi,"defineProperty");return A({},"",{}),A}catch(I){}}(),$g=zt.clearTimeout!==Xr.clearTimeout&&zt.clearTimeout,em=un&&un.now!==Xr.Date.now&&un.now,sp=zt.setTimeout!==Xr.setTimeout&&zt.setTimeout,fd=lo.ceil,_n=lo.floor,zn=wi.getOwnPropertySymbols,Cu=Mc?Mc.isBuffer:ye,Tc=zt.isFinite,tm=Vu.join,ml=ju(wi.keys,wi),ba=lo.max,us=lo.min,ff=un.now,Yu=zt.parseInt,cs=lo.random,Os=Vu.reverse,wu=Qo(zt,"DataView"),Hi=Qo(zt,"Map"),_u=Qo(zt,"Promise"),Ws=Qo(zt,"Set"),Pl=Qo(zt,"WeakMap"),$s=Qo(wi,"create"),Zu=Pl&&new Pl,yo={},rm=Lc(wu),eu=Lc(Hi),dd=Lc(_u),tg=Lc(Ws),Vi=Lc(Pl),Ih=Sc?Sc.prototype:ye,Mu=Ih?Ih.valueOf:ye,nm=Ih?Ih.toString:ye;function Ee(A){if(s(A)&&!ci(A)&&!(A instanceof ti)){if(A instanceof tu)return A;if(Ni.call(A,"__wrapped__"))return Ep(A)}return new tu(A)}var Jc=function(){function A(){}return function(I){if(!c(I))return{};if(Ta)return Ta(I);A.prototype=I;var k=new A;return A.prototype=ye,k}}();function lp(){}function tu(A,I){this.__wrapped__=A,this.__actions__=[],this.__chain__=!!I,this.__index__=0,this.__values__=ye}Ee.templateSettings={escape:s0,evaluate:Zp,interpolate:$a,variable:"",imports:{_:Ee}},Ee.prototype=lp.prototype,Ee.prototype.constructor=Ee,tu.prototype=Jc(lp.prototype),tu.prototype.constructor=tu;function ti(A){this.__wrapped__=A,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ki,this.__views__=[]}function ru(){var A=new ti(this.__wrapped__);return A.__actions__=il(this.__actions__),A.__dir__=this.__dir__,A.__filtered__=this.__filtered__,A.__iteratees__=il(this.__iteratees__),A.__takeCount__=this.__takeCount__,A.__views__=il(this.__views__),A}function im(){if(this.__filtered__){var A=new ti(this);A.__dir__=-1,A.__filtered__=!0}else A=this.clone(),A.__dir__*=-1;return A}function gv(){var A=this.__wrapped__.value(),I=this.__dir__,k=ci(A),ee=I<0,pe=k?A.length:0,De=jr(0,pe,this.__views__),Qe=De.start,nt=De.end,_t=nt-Qe,fr=ee?nt:Qe-1,dr=this.__iteratees__,br=dr.length,tn=0,Nn=us(_t,this.__takeCount__);if(!k||!ee&&pe==_t&&Nn==_t)return Oh(A,this.__actions__);var hi=[];e:for(;_t--&&tn<Nn;){fr+=I;for(var Bn=-1,fi=A[fr];++Bn<br;){var To=dr[Bn],Io=To.iteratee,sc=To.type,Fu=Io(fi);if(sc==Nr)fi=Fu;else if(!Fu){if(sc==kr)continue e;break e}}hi[tn++]=fi}return hi}ti.prototype=Jc(lp.prototype),ti.prototype.constructor=ti;function qc(A){var I=-1,k=A==null?0:A.length;for(this.clear();++I<k;){var ee=A[I];this.set(ee[0],ee[1])}}function df(){this.__data__=$s?$s(null):{},this.size=0}function La(A){var I=this.has(A)&&delete this.__data__[A];return this.size-=I?1:0,I}function up(A){var I=this.__data__;if($s){var k=I[A];return k===Ne?ye:k}return Ni.call(I,A)?I[A]:ye}function cp(A){var I=this.__data__;return $s?I[A]!==ye:Ni.call(I,A)}function pf(A,I){var k=this.__data__;return this.size+=this.has(A)?0:1,k[A]=$s&&I===ye?Ne:I,this}qc.prototype.clear=df,qc.prototype.delete=La,qc.prototype.get=up,qc.prototype.has=cp,qc.prototype.set=pf;function Ku(A){var I=-1,k=A==null?0:A.length;for(this.clear();++I<k;){var ee=A[I];this.set(ee[0],ee[1])}}function gf(){this.__data__=[],this.size=0}function nu(A){var I=this.__data__,k=ys(I,A);if(k<0)return!1;var ee=I.length-1;return k==ee?I.pop():Fn.call(I,k,1),--this.size,!0}function Rl(A){var I=this.__data__,k=ys(I,A);return k<0?ye:I[k][1]}function rg(A){return ys(this.__data__,A)>-1}function mf(A,I){var k=this.__data__,ee=ys(k,A);return ee<0?(++this.size,k.push([A,I])):k[ee][1]=I,this}Ku.prototype.clear=gf,Ku.prototype.delete=nu,Ku.prototype.get=Rl,Ku.prototype.has=rg,Ku.prototype.set=mf;function iu(A){var I=-1,k=A==null?0:A.length;for(this.clear();++I<k;){var ee=A[I];this.set(ee[0],ee[1])}}function mv(){this.size=0,this.__data__={hash:new qc,map:new(Hi||Ku),string:new qc}}function pd(A){var I=zh(this,A).delete(A);return this.size-=I?1:0,I}function Qc(A){return zh(this,A).get(A)}function hs(A){return zh(this,A).has(A)}function vf(A,I){var k=zh(this,A),ee=k.size;return k.set(A,I),this.size+=k.size==ee?0:1,this}iu.prototype.clear=mv,iu.prototype.delete=pd,iu.prototype.get=Qc,iu.prototype.has=hs,iu.prototype.set=vf;function ou(A){var I=-1,k=A==null?0:A.length;for(this.__data__=new iu;++I<k;)this.add(A[I])}function gd(A){return this.__data__.set(A,Ne),this}function yf(A){return this.__data__.has(A)}ou.prototype.add=ou.prototype.push=gd,ou.prototype.has=yf;function Ol(A){var I=this.__data__=new Ku(A);this.size=I.size}function hp(){this.__data__=new Ku,this.size=0}function Su(A){var I=this.__data__,k=I.delete(A);return this.size=I.size,k}function xf(A){return this.__data__.get(A)}function Eh(A){return this.__data__.has(A)}function bh(A,I){var k=this.__data__;if(k instanceof Ku){var ee=k.__data__;if(!Hi||ee.length<Ye-1)return ee.push([A,I]),this.size=++k.size,this;k=this.__data__=new iu(ee)}return k.set(A,I),this.size=k.size,this}Ol.prototype.clear=hp,Ol.prototype.delete=Su,Ol.prototype.get=xf,Ol.prototype.has=Eh,Ol.prototype.set=bh;function Lh(A,I){var k=ci(A),ee=!k&&is(A),pe=!k&&!ee&&Bf(A),De=!k&&!ee&&!pe&&U(A),Qe=k||ee||pe||De,nt=Qe?rf(A.length,Kc):[],_t=nt.length;for(var fr in A)(I||Ni.call(A,fr))&&!(Qe&&(fr=="length"||pe&&(fr=="offset"||fr=="parent")||De&&(fr=="buffer"||fr=="byteLength"||fr=="byteOffset")||Ul(fr,_t)))&&nt.push(fr);return nt}function Af(A){var I=A.length;return I?A[su(0,I-1)]:ye}function Cf(A,I){return Ff(il(A),au(I,0,A.length))}function md(A){return Ff(il(A))}function Ph(A,I,k){(k!==ye&&!Ts(A[I],k)||k===ye&&!(I in A))&&As(A,I,k)}function Tu(A,I,k){var ee=A[I];(!(Ni.call(A,I)&&Ts(ee,k))||k===ye&&!(I in A))&&As(A,I,k)}function ys(A,I){for(var k=A.length;k--;)if(Ts(A[k][0],I))return k;return-1}function xs(A,I,k,ee){return fs(A,function(pe,De,Qe){I(ee,pe,k(pe),Qe)}),ee}function $c(A,I){return A&&$u(I,Es(I),A)}function Pa(A,I){return A&&$u(I,_l(I),A)}function As(A,I,k){I=="__proto__"&&ap?ap(A,I,{configurable:!0,enumerable:!0,value:k,writable:!0}):A[I]=k}function eh(A,I){for(var k=-1,ee=I.length,pe=Nt(ee),De=A==null;++k<ee;)pe[k]=De?ye:x0(A,I[k]);return pe}function au(A,I,k){return A===A&&(k!==ye&&(A=A<=k?A:k),I!==ye&&(A=A>=I?A:I)),A}function Va(A,I,k,ee,pe,De){var Qe,nt=I&pt,_t=I&Lt,fr=I&Er;if(k&&(Qe=pe?k(A,ee,pe,De):k(A)),Qe!==ye)return Qe;if(!c(A))return A;var dr=ci(A);if(dr){if(Qe=ym(A),!nt)return il(A,Qe)}else{var br=Xa(A),tn=br==wh||br==ei;if(Bf(A))return Lf(A,nt);if(br==ss||br==Or||tn&&!pe){if(Qe=_t||tn?{}:Pf(A),!nt)return _t?hm(A,Pa(Qe,A)):Dh(A,$c(Qe,A))}else{if(!jo[br])return pe?A:{};Qe=Mp(A,br,nt)}}De||(De=new Ol);var Nn=De.get(A);if(Nn)return Nn;De.set(A,Qe),B(A)?A.forEach(function(fi){Qe.add(Va(fi,I,k,fi,A,De))}):h(A)&&A.forEach(function(fi,To){Qe.set(To,Va(fi,I,k,To,A,De))});var hi=fr?_t?Bh:Nh:_t?_l:Es,Bn=dr?ye:hi(A);return Ma(Bn||A,function(fi,To){Bn&&(To=fi,fi=A[To]),Tu(Qe,To,Va(fi,I,k,To,A,De))}),Qe}function ng(A){var I=Es(A);return function(k){return wf(k,A,I)}}function wf(A,I,k){var ee=k.length;if(A==null)return!ee;for(A=wi(A);ee--;){var pe=k[ee],De=I[pe],Qe=A[pe];if(Qe===ye&&!(pe in A)||!De(Qe))return!1}return!0}function Ic(A,I,k){if(typeof A!="function")throw new Ga(St);return Ip(function(){A.apply(ye,k)},I)}function th(A,I,k,ee){var pe=-1,De=Sh,Qe=!0,nt=A.length,_t=[],fr=I.length;if(!nt)return _t;k&&(I=Ci(I,Ql(k))),ee?(De=rd,Qe=!1):I.length>=Ye&&(De=aa,Qe=!1,I=new ou(I));e:for(;++pe<nt;){var dr=A[pe],br=k==null?dr:k(dr);if(dr=ee||dr!==0?dr:0,Qe&&br===br){for(var tn=fr;tn--;)if(I[tn]===br)continue e;_t.push(dr)}else De(I,br,ee)||_t.push(dr)}return _t}var fs=ec(po),vd=ec(fp,!0);function _f(A,I){var k=!0;return fs(A,function(ee,pe,De){return k=!!I(ee,pe,De),k}),k}function Rh(A,I,k){for(var ee=-1,pe=A.length;++ee<pe;){var De=A[ee],Qe=I(De);if(Qe!=null&&(nt===ye?Qe===Qe&&!W(Qe):k(Qe,nt)))var nt=Qe,_t=De}return _t}function p0(A,I,k,ee){var pe=A.length;for(k=lt(k),k<0&&(k=-k>pe?0:pe+k),ee=ee===ye||ee>pe?pe:lt(ee),ee<0&&(ee+=pe),ee=k>ee?0:kt(ee);k<ee;)A[k++]=I;return A}function Cs(A,I){var k=[];return fs(A,function(ee,pe,De){I(ee,pe,De)&&k.push(ee)}),k}function Ki(A,I,k,ee,pe){var De=-1,Qe=A.length;for(k||(k=Md),pe||(pe=[]);++De<Qe;){var nt=A[De];I>0&&k(nt)?I>1?Ki(nt,I-1,k,ee,pe):Jo(pe,nt):ee||(pe[pe.length]=nt)}return pe}var ri=Cp(),qo=Cp(!0);function po(A,I){return A&&ri(A,I,Es)}function fp(A,I){return A&&qo(A,I,Es)}function ds(A,I){return nn(I,function(k){return Du(A[k])})}function vl(A,I){I=sh(I,A);for(var k=0,ee=I.length;A!=null&&k<ee;)A=A[Cl(I[k++])];return k&&k==ee?A:ye}function xi(A,I,k){var ee=I(A);return ci(A)?ee:Jo(ee,k(A))}function Un(A){return A==null?A===ye?zu:_i:ja&&ja in wi(A)?In(A):Tv(A)}function Ju(A,I){return A>I}function sa(A,I){return A!=null&&Ni.call(A,I)}function Wa(A,I){return A!=null&&I in wi(A)}function Ds(A,I,k){return A>=us(I,k)&&A<ba(I,k)}function Ec(A,I,k){for(var ee=k?rd:Sh,pe=A[0].length,De=A.length,Qe=De,nt=Nt(De),_t=Infinity,fr=[];Qe--;){var dr=A[Qe];Qe&&I&&(dr=Ci(dr,Ql(I))),_t=us(dr.length,_t),nt[Qe]=!k&&(I||pe>=120&&dr.length>=120)?new ou(Qe&&dr):ye}dr=A[0];var br=-1,tn=nt[0];e:for(;++br<pe&&fr.length<_t;){var Nn=dr[br],hi=I?I(Nn):Nn;if(Nn=k||Nn!==0?Nn:0,!(tn?aa(tn,hi):ee(fr,hi,k))){for(Qe=De;--Qe;){var Bn=nt[Qe];if(!(Bn?aa(Bn,hi):ee(A[Qe],hi,k)))continue e}tn&&tn.push(hi),fr.push(Nn)}}return fr}function yl(A,I,k,ee){return po(A,function(pe,De,Qe){I(ee,k(pe),De,Qe)}),ee}function Dl(A,I,k){I=sh(I,A),A=dh(A,I);var ee=A==null?A:A[Cl(sr(I))];return ee==null?ye:Ps(ee,A,k)}function Mf(A){return s(A)&&Un(A)==Or}function om(A){return s(A)&&Un(A)==Qa}function yd(A){return s(A)&&Un(A)==$r}function dp(A,I,k,ee,pe){return A===I?!0:A==null||I==null||!s(A)&&!s(I)?A!==A&&I!==I:el(A,I,k,ee,dp,pe)}function el(A,I,k,ee,pe,De){var Qe=ci(A),nt=ci(I),_t=Qe?Sl:Xa(A),fr=nt?Sl:Xa(I);_t=_t==Or?ss:_t,fr=fr==Or?ss:fr;var dr=_t==ss,br=fr==ss,tn=_t==fr;if(tn&&Bf(A)){if(!Bf(I))return!1;Qe=!0,dr=!1}if(tn&&!dr)return De||(De=new Ol),Qe||U(A)?tc(A,I,k,ee,pe,De):lu(A,I,_t,k,ee,pe,De);if(!(k&xe)){var Nn=dr&&Ni.call(A,"__wrapped__"),hi=br&&Ni.call(I,"__wrapped__");if(Nn||hi){var Bn=Nn?A.value():A,fi=hi?I.value():I;return De||(De=new Ol),pe(Bn,fi,k,ee,De)}}return tn?(De||(De=new Ol),yg(A,I,k,ee,pe,De)):!1}function tl(A){return s(A)&&Xa(A)==ul}function ws(A,I,k,ee){var pe=k.length,De=pe,Qe=!ee;if(A==null)return!De;for(A=wi(A);pe--;){var nt=k[pe];if(Qe&&nt[2]?nt[1]!==A[nt[0]]:!(nt[0]in A))return!1}for(;++pe<De;){nt=k[pe];var _t=nt[0],fr=A[_t],dr=nt[1];if(Qe&&nt[2]){if(fr===ye&&!(_t in A))return!1}else{var br=new Ol;if(ee)var tn=ee(fr,dr,_t,A,I,br);if(!(tn===ye?dp(dr,fr,xe|Lr,ee,br):tn))return!1}}return!0}function rh(A){if(!c(A)||Sv(A))return!1;var I=Du(A)?op:Zf;return I.test(Lc(A))}function uo(A){return s(A)&&Un(A)==Bu}function ya(A){return s(A)&&Xa(A)==_a}function _r(A){return s(A)&&o(A.length)&&!!so[Un(A)]}function xd(A){return typeof A=="function"?A:A==null?cu:typeof A=="object"?ci(A)?nh(A[0],A[1]):og(A):vy(A)}function ig(A){if(!rc(A))return ml(A);var I=[];for(var k in wi(A))Ni.call(A,k)&&k!="constructor"&&I.push(k);return I}function Sf(A){if(!c(A))return m0(A);var I=rc(A),k=[];for(var ee in A)ee=="constructor"&&(I||!Ni.call(A,ee))||k.push(ee);return k}function pp(A,I){return A<I}function Tf(A,I){var k=-1,ee=Ks(A)?Nt(A.length):[];return fs(A,function(pe,De,Qe){ee[++k]=I(pe,De,Qe)}),ee}function og(A){var I=Al(A);return I.length==1&&I[0][2]?Si(I[0][0],I[0][1]):function(k){return k===A||ws(k,A,I)}}function nh(A,I){return fh(A)&&Sd(I)?Si(Cl(A),I):function(k){var ee=x0(k,A);return ee===ye&&ee===I?Pv(k,A):dp(I,ee,xe|Lr)}}function Xs(A,I,k,ee,pe){A!==I&&ri(I,function(De,Qe){if(pe||(pe=new Ol),c(De))vv(A,I,Qe,k,Xs,ee,pe);else{var nt=ee?ee(Lu(A,Qe),De,Qe+"",A,I,pe):ye;nt===ye&&(nt=De),Ph(A,Qe,nt)}},_l)}function vv(A,I,k,ee,pe,De,Qe){var nt=Lu(A,k),_t=Lu(I,k),fr=Qe.get(_t);if(fr){Ph(A,k,fr);return}var dr=De?De(nt,_t,k+"",A,I,Qe):ye,br=dr===ye;if(br){var tn=ci(_t),Nn=!tn&&Bf(_t),hi=!tn&&!Nn&&U(_t);dr=_t,tn||Nn||hi?ci(nt)?dr=nt:Is(nt)?dr=il(nt):Nn?(br=!1,dr=Lf(_t,!0)):hi?(br=!1,dr=dg(_t,!0)):dr=[]:E(_t)||is(_t)?(dr=nt,is(nt)?dr=Ur(nt):(!c(nt)||Du(nt))&&(dr=Pf(_t))):br=!1}br&&(Qe.set(_t,dr),pe(dr,_t,ee,De,Qe),Qe.delete(_t)),Ph(A,k,dr)}function rl(A,I){var k=A.length;if(!!k)return I+=I<0?k:0,Ul(I,k)?A[I]:ye}function gp(A,I,k){I.length?I=Ci(I,function(De){return ci(De)?function(Qe){return vl(Qe,De.length===1?De[0]:De)}:De}):I=[cu];var ee=-1;I=Ci(I,Ql(kn()));var pe=Tf(A,function(De,Qe,nt){var _t=Ci(I,function(fr){return fr(De)});return{criteria:_t,index:++ee,value:De}});return Qd(pe,function(De,Qe){return Eu(De,Qe,k)})}function xl(A,I){return ih(A,I,function(k,ee){return Pv(A,ee)})}function ih(A,I,k){for(var ee=-1,pe=I.length,De={};++ee<pe;){var Qe=I[ee],nt=vl(A,Qe);k(nt,Qe)&&mp(De,sh(Qe,A),nt)}return De}function If(A){return function(I){return vl(I,A)}}function oh(A,I,k,ee){var pe=ee?vu:bl,De=-1,Qe=I.length,nt=A;for(A===I&&(I=il(I)),k&&(nt=Ci(A,Ql(k)));++De<Qe;)for(var _t=0,fr=I[De],dr=k?k(fr):fr;(_t=pe(nt,dr,_t,ee))>-1;)nt!==A&&Fn.call(nt,_t,1),Fn.call(A,_t,1);return A}function qu(A,I){for(var k=A?I.length:0,ee=k-1;k--;){var pe=I[k];if(k==ee||pe!==De){var De=pe;Ul(pe)?Fn.call(A,pe,1):Qi(A,pe)}}return A}function su(A,I){return A+_n(cs()*(I-A+1))}function yv(A,I,k,ee){for(var pe=-1,De=ba(fd((I-A)/(k||1)),0),Qe=Nt(De);De--;)Qe[ee?De:++pe]=A,A+=k;return Qe}function Ef(A,I){var k="";if(!A||I<1||I>Tn)return k;do I%2&&(k+=A),I=_n(I/2),I&&(A+=A);while(I);return k}function Gi(A,I){return Df(Iv(A,I,cu),A+"")}function xv(A){return Af(Em(A))}function am(A,I){var k=Em(A);return Ff(k,au(I,0,k.length))}function mp(A,I,k,ee){if(!c(A))return A;I=sh(I,A);for(var pe=-1,De=I.length,Qe=De-1,nt=A;nt!=null&&++pe<De;){var _t=Cl(I[pe]),fr=k;if(_t==="__proto__"||_t==="constructor"||_t==="prototype")return A;if(pe!=Qe){var dr=nt[_t];fr=ee?ee(dr,_t,nt):ye,fr===ye&&(fr=c(dr)?dr:Ul(I[pe+1])?[]:{})}Tu(nt,_t,fr),nt=nt[_t]}return A}var ag=Zu?function(A,I){return Zu.set(A,I),A}:cu,Av=ap?function(A,I){return ap(A,"toString",{configurable:!0,enumerable:!1,value:zv(I),writable:!0})}:cu;function sg(A){return Ff(Em(A))}function nl(A,I,k){var ee=-1,pe=A.length;I<0&&(I=-I>pe?0:pe+I),k=k>pe?pe:k,k<0&&(k+=pe),pe=I>k?0:k-I>>>0,I>>>=0;for(var De=Nt(pe);++ee<pe;)De[ee]=A[ee+I];return De}function Cv(A,I){var k;return fs(A,function(ee,pe,De){return k=I(ee,pe,De),!k}),!!k}function vp(A,I,k){var ee=0,pe=A==null?ee:A.length;if(typeof I=="number"&&I===I&&pe<=Bc){for(;ee<pe;){var De=ee+pe>>>1,Qe=A[De];Qe!==null&&!W(Qe)&&(k?Qe<=I:Qe<I)?ee=De+1:pe=De}return pe}return lg(A,I,cu,k)}function lg(A,I,k,ee){var pe=0,De=A==null?0:A.length;if(De===0)return 0;I=k(I);for(var Qe=I!==I,nt=I===null,_t=W(I),fr=I===ye;pe<De;){var dr=_n((pe+De)/2),br=k(A[dr]),tn=br!==ye,Nn=br===null,hi=br===br,Bn=W(br);if(Qe)var fi=ee||hi;else fr?fi=hi&&(ee||tn):nt?fi=hi&&tn&&(ee||!Nn):_t?fi=hi&&tn&&!Nn&&(ee||!Bn):Nn||Bn?fi=!1:fi=ee?br<=I:br<I;fi?pe=dr+1:De=dr}return us(De,vs)}function wv(A,I){for(var k=-1,ee=A.length,pe=0,De=[];++k<ee;){var Qe=A[k],nt=I?I(Qe):Qe;if(!k||!Ts(nt,_t)){var _t=nt;De[pe++]=Qe===0?0:Qe}}return De}function bf(A){return typeof A=="number"?A:W(A)?Ja:+A}function es(A){if(typeof A=="string")return A;if(ci(A))return Ci(A,es)+"";if(W(A))return nm?nm.call(A):"";var I=A+"";return I=="0"&&1/A==-Jr?"-0":I}function ts(A,I,k){var ee=-1,pe=Sh,De=A.length,Qe=!0,nt=[],_t=nt;if(k)Qe=!1,pe=rd;else if(De>=Ye){var fr=I?null:xo(A);if(fr)return af(fr);Qe=!1,pe=aa,_t=new ou}else _t=I?[]:nt;e:for(;++ee<De;){var dr=A[ee],br=I?I(dr):dr;if(dr=k||dr!==0?dr:0,Qe&&br===br){for(var tn=_t.length;tn--;)if(_t[tn]===br)continue e;I&&_t.push(br),nt.push(dr)}else pe(_t,br,k)||(_t!==nt&&_t.push(br),nt.push(dr))}return nt}function Qi(A,I){return I=sh(I,A),A=dh(A,I),A==null||delete A[Cl(sr(I))]}function ah(A,I,k,ee){return mp(A,I,k(vl(A,I)),ee)}function Iu(A,I,k,ee){for(var pe=A.length,De=ee?pe:-1;(ee?De--:++De<pe)&&I(A[De],De,A););return k?nl(A,ee?0:De,ee?De+1:pe):nl(A,ee?De+1:0,ee?pe:De)}function Oh(A,I){var k=A;return k instanceof ti&&(k=k.value()),Yc(I,function(ee,pe){return pe.func.apply(pe.thisArg,Jo([ee],pe.args))},k)}function ug(A,I,k){var ee=A.length;if(ee<2)return ee?ts(A[0]):[];for(var pe=-1,De=Nt(ee);++pe<ee;)for(var Qe=A[pe],nt=-1;++nt<ee;)nt!=pe&&(De[pe]=th(De[pe]||Qe,A[nt],I,k));return ts(Ki(De,1),I,k)}function Fl(A,I,k){for(var ee=-1,pe=A.length,De=I.length,Qe={};++ee<pe;){var nt=ee<De?I[ee]:ye;k(Qe,A[ee],nt)}return Qe}function yp(A){return Is(A)?A:[]}function cg(A){return typeof A=="function"?A:cu}function sh(A,I){return ci(A)?A:fh(A,I)?[A]:Ev(zr(A))}var hg=Gi;function Qu(A,I,k){var ee=A.length;return k=k===ye?ee:k,!I&&k>=ee?A:nl(A,I,k)}var sm=$g||function(A){return Xr.clearTimeout(A)};function Lf(A,I){if(I)return A.slice();var k=A.length,ee=hf?hf(k):new A.constructor(k);return A.copy(ee),ee}function lm(A){var I=new A.constructor(A.byteLength);return new $l(I).set(new $l(A)),I}function um(A,I){var k=I?lm(A.buffer):A.buffer;return new A.constructor(k,A.byteOffset,A.byteLength)}function xp(A){var I=new A.constructor(A.source,Wg.exec(A));return I.lastIndex=A.lastIndex,I}function fg(A){return Mu?wi(Mu.call(A)):{}}function dg(A,I){var k=I?lm(A.buffer):A.buffer;return new A.constructor(k,A.byteOffset,A.length)}function cm(A,I){if(A!==I){var k=A!==ye,ee=A===null,pe=A===A,De=W(A),Qe=I!==ye,nt=I===null,_t=I===I,fr=W(I);if(!nt&&!fr&&!De&&A>I||De&&Qe&&_t&&!nt&&!fr||ee&&Qe&&_t||!k&&_t||!pe)return 1;if(!ee&&!De&&!fr&&A<I||fr&&k&&pe&&!ee&&!De||nt&&k&&pe||!Qe&&pe||!_t)return-1}return 0}function Eu(A,I,k){for(var ee=-1,pe=A.criteria,De=I.criteria,Qe=pe.length,nt=k.length;++ee<Qe;){var _t=cm(pe[ee],De[ee]);if(_t){if(ee>=nt)return _t;var fr=k[ee];return _t*(fr=="desc"?-1:1)}}return A.index-I.index}function g0(A,I,k,ee){for(var pe=-1,De=A.length,Qe=k.length,nt=-1,_t=I.length,fr=ba(De-Qe,0),dr=Nt(_t+fr),br=!ee;++nt<_t;)dr[nt]=I[nt];for(;++pe<Qe;)(br||pe<De)&&(dr[k[pe]]=A[pe]);for(;fr--;)dr[nt++]=A[pe++];return dr}function Ap(A,I,k,ee){for(var pe=-1,De=A.length,Qe=-1,nt=k.length,_t=-1,fr=I.length,dr=ba(De-nt,0),br=Nt(dr+fr),tn=!ee;++pe<dr;)br[pe]=A[pe];for(var Nn=pe;++_t<fr;)br[Nn+_t]=I[_t];for(;++Qe<nt;)(tn||pe<De)&&(br[Nn+k[Qe]]=A[pe++]);return br}function il(A,I){var k=-1,ee=A.length;for(I||(I=Nt(ee));++k<ee;)I[k]=A[k];return I}function $u(A,I,k,ee){var pe=!k;k||(k={});for(var De=-1,Qe=I.length;++De<Qe;){var nt=I[De],_t=ee?ee(k[nt],A[nt],nt,k,A):ye;_t===ye&&(_t=A[nt]),pe?As(k,nt,_t):Tu(k,nt,_t)}return k}function Dh(A,I){return $u(A,ni(A),I)}function hm(A,I){return $u(A,vm(A),I)}function Nl(A,I){return function(k,ee){var pe=ci(k)?Jd:xs,De=I?I():{};return pe(k,A,kn(ee,2),De)}}function lh(A){return Gi(function(I,k){var ee=-1,pe=k.length,De=pe>1?k[pe-1]:ye,Qe=pe>2?k[2]:ye;for(De=A.length>3&&typeof De=="function"?(pe--,De):ye,Qe&&Ys(k[0],k[1],Qe)&&(De=pe<3?ye:De,pe=1),I=wi(I);++ee<pe;){var nt=k[ee];nt&&A(I,nt,ee,De)}return I})}function ec(A,I){return function(k,ee){if(k==null)return k;if(!Ks(k))return A(k,ee);for(var pe=k.length,De=I?pe:-1,Qe=wi(k);(I?De--:++De<pe)&&ee(Qe[De],De,Qe)!==!1;);return k}}function Cp(A){return function(I,k,ee){for(var pe=-1,De=wi(I),Qe=ee(I),nt=Qe.length;nt--;){var _t=Qe[A?nt:++pe];if(k(De[_t],_t,De)===!1)break}return I}}function fm(A,I,k){var ee=I&Hn,pe=Bl(A);function De(){var Qe=this&&this!==Xr&&this instanceof De?pe:A;return Qe.apply(ee?k:this,arguments)}return De}function Ad(A){return function(I){I=zr(I);var k=pl(I)?gl(I):ye,ee=k?k[0]:I.charAt(0),pe=k?Qu(k,1).join(""):I.slice(1);return ee[A]()+pe}}function ui(A){return function(I){return Yc(S1(Gx(I).replace(du,"")),A,"")}}function Bl(A){return function(){var I=arguments;switch(I.length){case 0:return new A;case 1:return new A(I[0]);case 2:return new A(I[0],I[1]);case 3:return new A(I[0],I[1],I[2]);case 4:return new A(I[0],I[1],I[2],I[3]);case 5:return new A(I[0],I[1],I[2],I[3],I[4]);case 6:return new A(I[0],I[1],I[2],I[3],I[4],I[5]);case 7:return new A(I[0],I[1],I[2],I[3],I[4],I[5],I[6])}var k=Jc(A.prototype),ee=A.apply(k,I);return c(ee)?ee:k}}function pg(A,I,k){var ee=Bl(A);function pe(){for(var De=arguments.length,Qe=Nt(De),nt=De,_t=bc(pe);nt--;)Qe[nt]=arguments[nt];var fr=De<3&&Qe[0]!==_t&&Qe[De-1]!==_t?[]:Hs(Qe,_t);if(De-=fr.length,De<k)return mg(A,I,la,pe.placeholder,ye,Qe,fr,ye,ye,k-De);var dr=this&&this!==Xr&&this instanceof pe?ee:A;return Ps(dr,this,Qe)}return pe}function Qr(A){return function(I,k,ee){var pe=wi(I);if(!Ks(I)){var De=kn(k,3);I=Es(I),k=function(nt){return De(pe[nt],nt,pe)}}var Qe=A(I,k,ee);return Qe>-1?pe[De?I[Qe]:Qe]:ye}}function uh(A){return bu(function(I){var k=I.length,ee=k,pe=tu.prototype.thru;for(A&&I.reverse();ee--;){var De=I[ee];if(typeof De!="function")throw new Ga(St);if(pe&&!Qe&&_d(De)=="wrapper")var Qe=new tu([],!0)}for(ee=Qe?ee:k;++ee<k;){De=I[ee];var nt=_d(De),_t=nt=="wrapper"?wd(De):ye;_t&&Sp(_t[0])&&_t[1]==(ro|Lo|mi|ia)&&!_t[4].length&&_t[9]==1?Qe=Qe[_d(_t[0])].apply(Qe,_t[3]):Qe=De.length==1&&Sp(De)?Qe[nt]():Qe.thru(De)}return function(){var fr=arguments,dr=fr[0];if(Qe&&fr.length==1&&ci(dr))return Qe.plant(dr).value();for(var br=0,tn=k?I[br].apply(this,fr):dr;++br<k;)tn=I[br].call(this,tn);return tn}})}function la(A,I,k,ee,pe,De,Qe,nt,_t,fr){var dr=I&ro,br=I&Hn,tn=I&bo,Nn=I&(Lo|Ui),hi=I&Xt,Bn=tn?ye:Bl(A);function fi(){for(var To=arguments.length,Io=Nt(To),sc=To;sc--;)Io[sc]=arguments[sc];if(Nn)var Fu=bc(fi),yh=ad(Io,Fu);if(ee&&(Io=g0(Io,ee,pe,Nn)),De&&(Io=Ap(Io,De,Qe,Nn)),To-=yh,Nn&&To<fr){var Ba=Hs(Io,Fu);return mg(A,I,la,fi.placeholder,k,Io,Ba,nt,_t,fr-To)}var hu=br?k:this,Pp=tn?hu[A]:A;return To=Io.length,nt?Io=Of(Io,nt):hi&&To>1&&Io.reverse(),dr&&_t<To&&(Io.length=_t),this&&this!==Xr&&this instanceof fi&&(Pp=Bn||Bl(Pp)),Pp.apply(hu,Io)}return fi}function ps(A,I){return function(k,ee){return yl(k,A,I(ee),{})}}function Fh(A,I){return function(k,ee){var pe;if(k===ye&&ee===ye)return I;if(k!==ye&&(pe=k),ee!==ye){if(pe===ye)return ee;typeof k=="string"||typeof ee=="string"?(k=es(k),ee=es(ee)):(k=bf(k),ee=bf(ee)),pe=A(k,ee)}return pe}}function gg(A){return bu(function(I){return I=Ci(I,Ql(kn())),Gi(function(k){var ee=this;return A(I,function(pe){return Ps(pe,ee,k)})})})}function Cd(A,I){I=I===ye?" ":es(I);var k=I.length;if(k<2)return k?Ef(I,A):I;var ee=Ef(I,fd(A/yu(I)));return pl(I)?Qu(gl(ee),0,A).join(""):ee.slice(0,A)}function _v(A,I,k,ee){var pe=I&Hn,De=Bl(A);function Qe(){for(var nt=-1,_t=arguments.length,fr=-1,dr=ee.length,br=Nt(dr+_t),tn=this&&this!==Xr&&this instanceof Qe?De:A;++fr<dr;)br[fr]=ee[fr];for(;_t--;)br[fr++]=arguments[++nt];return Ps(tn,pe?k:this,br)}return Qe}function dm(A){return function(I,k,ee){return ee&&typeof ee!="number"&&Ys(I,k,ee)&&(k=ee=ye),I=Be(I),k===ye?(k=I,I=0):k=Be(k),ee=ee===ye?I<k?1:-1:Be(ee),yv(I,k,ee,A)}}function ch(A){return function(I,k){return typeof I=="string"&&typeof k=="string"||(I=cr(I),k=cr(k)),A(I,k)}}function mg(A,I,k,ee,pe,De,Qe,nt,_t,fr){var dr=I&Lo,br=dr?Qe:ye,tn=dr?ye:Qe,Nn=dr?De:ye,hi=dr?ye:De;I|=dr?mi:Ko,I&=~(dr?Ko:mi),I&Cr||(I&=~(Hn|bo));var Bn=[A,I,pe,Nn,br,hi,tn,nt,_t,fr],fi=k.apply(ye,Bn);return Sp(A)&&Zs(fi,Bn),fi.placeholder=ee,Ag(fi,A,I)}function hh(A){var I=lo[A];return function(k,ee){if(k=cr(k),ee=ee==null?0:us(lt(ee),292),ee&&Tc(k)){var pe=(zr(k)+"e").split("e"),De=I(pe[0]+"e"+(+pe[1]+ee));return pe=(zr(De)+"e").split("e"),+(pe[0]+"e"+(+pe[1]-ee))}return I(k)}}var xo=Ws&&1/af(new Ws([,-0]))[1]==Jr?function(A){return new Ws(A)}:Ig;function pm(A){return function(I){var k=Xa(I);return k==ul?ud(I):k==_a?np(I):Jg(I,A(I))}}function zl(A,I,k,ee,pe,De,Qe,nt){var _t=I&bo;if(!_t&&typeof A!="function")throw new Ga(St);var fr=ee?ee.length:0;if(fr||(I&=~(mi|Ko),ee=pe=ye),Qe=Qe===ye?Qe:ba(lt(Qe),0),nt=nt===ye?nt:lt(nt),fr-=pe?pe.length:0,I&Ko){var dr=ee,br=pe;ee=pe=ye}var tn=_t?ye:wd(A),Nn=[A,I,k,ee,pe,dr,br,De,Qe,nt];if(tn&&Tp(Nn,tn),A=Nn[0],I=Nn[1],k=Nn[2],ee=Nn[3],pe=Nn[4],nt=Nn[9]=Nn[9]===ye?_t?0:A.length:ba(Nn[9]-fr,0),!nt&&I&(Lo|Ui)&&(I&=~(Lo|Ui)),!I||I==Hn)var hi=fm(A,I,k);else I==Lo||I==Ui?hi=pg(A,I,nt):(I==mi||I==(Hn|mi))&&!pe.length?hi=_v(A,I,k,ee):hi=la.apply(ye,Nn);var Bn=tn?ag:Zs;return Ag(Bn(hi,Nn),A,I)}function vg(A,I,k,ee){return A===ye||Ts(A,Gs[k])&&!Ni.call(ee,k)?I:A}function gm(A,I,k,ee,pe,De){return c(A)&&c(I)&&(De.set(I,A),Xs(A,I,ye,gm,De),De.delete(I)),A}function mm(A){return E(A)?ye:A}function tc(A,I,k,ee,pe,De){var Qe=k&xe,nt=A.length,_t=I.length;if(nt!=_t&&!(Qe&&_t>nt))return!1;var fr=De.get(A),dr=De.get(I);if(fr&&dr)return fr==I&&dr==A;var br=-1,tn=!0,Nn=k&Lr?new ou:ye;for(De.set(A,I),De.set(I,A);++br<nt;){var hi=A[br],Bn=I[br];if(ee)var fi=Qe?ee(Bn,hi,br,I,A,De):ee(hi,Bn,br,A,I,De);if(fi!==ye){if(fi)continue;tn=!1;break}if(Nn){if(!Rs(I,function(To,Io){if(!aa(Nn,Io)&&(hi===To||pe(hi,To,k,ee,De)))return Nn.push(Io)})){tn=!1;break}}else if(!(hi===Bn||pe(hi,Bn,k,ee,De))){tn=!1;break}}return De.delete(A),De.delete(I),tn}function lu(A,I,k,ee,pe,De,Qe){switch(k){case Uu:if(A.byteLength!=I.byteLength||A.byteOffset!=I.byteOffset)return!1;A=A.buffer,I=I.buffer;case Qa:return!(A.byteLength!=I.byteLength||!De(new $l(A),new $l(I)));case Zl:case $r:case ko:return Ts(+A,+I);case Kh:return A.name==I.name&&A.message==I.message;case Bu:case Ia:return A==I+"";case ul:var nt=ud;case _a:var _t=ee&xe;if(nt||(nt=af),A.size!=I.size&&!_t)return!1;var fr=Qe.get(A);if(fr)return fr==I;ee|=Lr,Qe.set(A,I);var dr=tc(nt(A),nt(I),ee,pe,De,Qe);return Qe.delete(A),dr;case Ud:if(Mu)return Mu.call(A)==Mu.call(I)}return!1}function yg(A,I,k,ee,pe,De){var Qe=k&xe,nt=Nh(A),_t=nt.length,fr=Nh(I),dr=fr.length;if(_t!=dr&&!Qe)return!1;for(var br=_t;br--;){var tn=nt[br];if(!(Qe?tn in I:Ni.call(I,tn)))return!1}var Nn=De.get(A),hi=De.get(I);if(Nn&&hi)return Nn==I&&hi==A;var Bn=!0;De.set(A,I),De.set(I,A);for(var fi=Qe;++br<_t;){tn=nt[br];var To=A[tn],Io=I[tn];if(ee)var sc=Qe?ee(Io,To,tn,I,A,De):ee(To,Io,tn,A,I,De);if(!(sc===ye?To===Io||pe(To,Io,k,ee,De):sc)){Bn=!1;break}fi||(fi=tn=="constructor")}if(Bn&&!fi){var Fu=A.constructor,yh=I.constructor;Fu!=yh&&"constructor"in A&&"constructor"in I&&!(typeof Fu=="function"&&Fu instanceof Fu&&typeof yh=="function"&&yh instanceof yh)&&(Bn=!1)}return De.delete(A),De.delete(I),Bn}function bu(A){return Df(Iv(A,ye,Ue),A+"")}function Nh(A){return xi(A,Es,ni)}function Bh(A){return xi(A,_l,vm)}var wd=Zu?function(A){return Zu.get(A)}:Ig;function _d(A){for(var I=A.name+"",k=yo[I],ee=Ni.call(yo,I)?k.length:0;ee--;){var pe=k[ee],De=pe.func;if(De==null||De==A)return pe.name}return I}function bc(A){var I=Ni.call(Ee,"placeholder")?Ee:A;return I.placeholder}function kn(){var A=Ee.iteratee||Uv;return A=A===Uv?xd:A,arguments.length?A(arguments[0],arguments[1]):A}function zh(A,I){var k=A.__data__;return xg(I)?k[typeof I=="string"?"string":"hash"]:k.map}function Al(A){for(var I=Es(A),k=I.length;k--;){var ee=I[k],pe=A[ee];I[k]=[ee,pe,Sd(pe)]}return I}function Qo(A,I){var k=dv(A,I);return rh(k)?k:ye}function In(A){var I=Ni.call(A,ja),k=A[ja];try{A[ja]=ye;var ee=!0}catch(De){}var pe=cf.call(A);return ee&&(I?A[ja]=k:delete A[ja]),pe}var ni=zn?function(A){return A==null?[]:(A=wi(A),nn(zn(A),function(I){return qg.call(A,I)}))}:S0,vm=zn?function(A){for(var I=[];A;)Jo(I,ni(A)),A=Ll(A);return I}:S0,Xa=Un;(wu&&Xa(new wu(new ArrayBuffer(1)))!=Uu||Hi&&Xa(new Hi)!=ul||_u&&Xa(_u.resolve())!=qa||Ws&&Xa(new Ws)!=_a||Pl&&Xa(new Pl)!=Kl)&&(Xa=function(A){var I=Un(A),k=I==ss?A.constructor:ye,ee=k?Lc(k):"";if(ee)switch(ee){case rm:return Uu;case eu:return ul;case dd:return qa;case tg:return _a;case Vi:return Kl}return I});function jr(A,I,k){for(var ee=-1,pe=k.length;++ee<pe;){var De=k[ee],Qe=De.size;switch(De.type){case"drop":A+=Qe;break;case"dropRight":I-=Qe;break;case"take":I=us(I,A+Qe);break;case"takeRight":A=ba(A,I-Qe);break}}return{start:A,end:I}}function wp(A){var I=A.match(nv);return I?I[1].split(iv):[]}function _p(A,I,k){I=sh(I,A);for(var ee=-1,pe=I.length,De=!1;++ee<pe;){var Qe=Cl(I[ee]);if(!(De=A!=null&&k(A,Qe)))break;A=A[Qe]}return De||++ee!=pe?De:(pe=A==null?0:A.length,!!pe&&o(pe)&&Ul(Qe,pe)&&(ci(A)||is(A)))}function ym(A){var I=A.length,k=new A.constructor(I);return I&&typeof A[0]=="string"&&Ni.call(A,"index")&&(k.index=A.index,k.input=A.input),k}function Pf(A){return typeof A.constructor=="function"&&!rc(A)?Jc(Ll(A)):{}}function Mp(A,I,k){var ee=A.constructor;switch(I){case Qa:return lm(A);case Zl:case $r:return new ee(+A);case Uu:return um(A,k);case fc:case dc:case ku:case Gg:case kc:case Tr:case kd:case Jl:case Ir:return dg(A,k);case ul:return new ee;case ko:case Ia:return new ee(A);case Bu:return xp(A);case _a:return new ee;case Ud:return fg(A)}}function Mv(A,I){var k=I.length;if(!k)return A;var ee=k-1;return I[ee]=(k>1?"& ":"")+I[ee],I=I.join(k>2?", ":" "),A.replace(rv,`{
/* [wrapped with `+I+`] */
`)}function Md(A){return ci(A)||is(A)||!!(Qg&&A&&A[Qg])}function Ul(A,I){var k=typeof A;return I=I==null?Tn:I,!!I&&(k=="number"||k!="symbol"&&Jp.test(A))&&A>-1&&A%1==0&&A<I}function Ys(A,I,k){if(!c(k))return!1;var ee=typeof I;return(ee=="number"?Ks(k)&&Ul(I,k.length):ee=="string"&&I in k)?Ts(k[I],A):!1}function fh(A,I){if(ci(A))return!1;var k=typeof A;return k=="number"||k=="symbol"||k=="boolean"||A==null||W(A)?!0:tv.test(A)||!ev.test(A)||I!=null&&A in wi(I)}function xg(A){var I=typeof A;return I=="string"||I=="number"||I=="symbol"||I=="boolean"?A!=="__proto__":A===null}function Sp(A){var I=_d(A),k=Ee[I];if(typeof k!="function"||!(I in ti.prototype))return!1;if(A===k)return!0;var ee=wd(k);return!!ee&&A===ee[0]}function Sv(A){return!!Th&&Th in A}var Rf=js?Du:R1;function rc(A){var I=A&&A.constructor,k=typeof I=="function"&&I.prototype||Gs;return A===k}function Sd(A){return A===A&&!c(A)}function Si(A,I){return function(k){return k==null?!1:k[A]===I&&(I!==ye||A in wi(k))}}function Td(A){var I=Ss(A,function(ee){return k.size===Q&&k.clear(),ee}),k=I.cache;return I}function Tp(A,I){var k=A[1],ee=I[1],pe=k|ee,De=pe<(Hn|bo|ro),Qe=ee==ro&&k==Lo||ee==ro&&k==ia&&A[7].length<=I[8]||ee==(ro|ia)&&I[7].length<=I[8]&&k==Lo;if(!(De||Qe))return A;ee&Hn&&(A[2]=I[2],pe|=k&Hn?0:Cr);var nt=I[3];if(nt){var _t=A[3];A[3]=_t?g0(_t,nt,I[4]):nt,A[4]=_t?Hs(A[3],Oe):I[4]}return nt=I[5],nt&&(_t=A[5],A[5]=_t?Ap(_t,nt,I[6]):nt,A[6]=_t?Hs(A[5],Oe):I[6]),nt=I[7],nt&&(A[7]=nt),ee&ro&&(A[8]=A[8]==null?I[8]:us(A[8],I[8])),A[9]==null&&(A[9]=I[9]),A[0]=I[0],A[1]=pe,A}function m0(A){var I=[];if(A!=null)for(var k in wi(A))I.push(k);return I}function Tv(A){return cf.call(A)}function Iv(A,I,k){return I=ba(I===ye?A.length-1:I,0),function(){for(var ee=arguments,pe=-1,De=ba(ee.length-I,0),Qe=Nt(De);++pe<De;)Qe[pe]=ee[I+pe];pe=-1;for(var nt=Nt(I+1);++pe<I;)nt[pe]=ee[pe];return nt[I]=k(Qe),Ps(A,this,nt)}}function dh(A,I){return I.length<2?A:vl(A,nl(I,0,-1))}function Of(A,I){for(var k=A.length,ee=us(I.length,k),pe=il(A);ee--;){var De=I[ee];A[ee]=Ul(De,k)?pe[De]:ye}return A}function Lu(A,I){if(!(I==="constructor"&&typeof A[I]=="function")&&I!="__proto__")return A[I]}var Zs=Id(ag),Ip=sp||function(A,I){return Xr.setTimeout(A,I)},Df=Id(Av);function Ag(A,I,k){var ee=I+"";return Df(A,Mv(ee,xm(wp(ee),k)))}function Id(A){var I=0,k=0;return function(){var ee=ff(),pe=Gr-(ee-k);if(k=ee,pe>0){if(++I>=Br)return arguments[0]}else I=0;return A.apply(ye,arguments)}}function Ff(A,I){var k=-1,ee=A.length,pe=ee-1;for(I=I===ye?ee:I;++k<I;){var De=su(k,pe),Qe=A[De];A[De]=A[k],A[k]=Qe}return A.length=I,A}var Ev=Td(function(A){var I=[];return A.charCodeAt(0)===46&&I.push(""),A.replace(jg,function(k,ee,pe,De){I.push(pe?De.replace(Vg,"$1"):ee||k)}),I});function Cl(A){if(typeof A=="string"||W(A))return A;var I=A+"";return I=="0"&&1/A==-Jr?"-0":I}function Lc(A){if(A!=null){try{return Wu.call(A)}catch(I){}try{return A+""}catch(I){}}return""}function xm(A,I){return Ma(fu,function(k){var ee="_."+k[0];I&k[1]&&!Sh(A,ee)&&A.push(ee)}),A.sort()}function Ep(A){if(A instanceof ti)return A.clone();var I=new tu(A.__wrapped__,A.__chain__);return I.__actions__=il(A.__actions__),I.__index__=A.__index__,I.__values__=A.__values__,I}function bv(A,I,k){(k?Ys(A,I,k):I===ye)?I=1:I=ba(lt(I),0);var ee=A==null?0:A.length;if(!ee||I<1)return[];for(var pe=0,De=0,Qe=Nt(fd(ee/I));pe<ee;)Qe[De++]=nl(A,pe,pe+=I);return Qe}function j(A){for(var I=-1,k=A==null?0:A.length,ee=0,pe=[];++I<k;){var De=A[I];De&&(pe[ee++]=De)}return pe}function J(){var A=arguments.length;if(!A)return[];for(var I=Nt(A-1),k=arguments[0],ee=A;ee--;)I[ee-1]=arguments[ee];return Jo(ci(k)?il(k):[k],Ki(I,1))}var $=Gi(function(A,I){return Is(A)?th(A,Ki(I,1,Is,!0)):[]}),V=Gi(function(A,I){var k=sr(I);return Is(k)&&(k=ye),Is(A)?th(A,Ki(I,1,Is,!0),kn(k,2)):[]}),H=Gi(function(A,I){var k=sr(I);return Is(k)&&(k=ye),Is(A)?th(A,Ki(I,1,Is,!0),ye,k):[]});function te(A,I,k){var ee=A==null?0:A.length;return ee?(I=k||I===ye?1:lt(I),nl(A,I<0?0:I,ee)):[]}function ie(A,I,k){var ee=A==null?0:A.length;return ee?(I=k||I===ye?1:lt(I),I=ee-I,nl(A,0,I<0?0:I)):[]}function le(A,I){return A&&A.length?Iu(A,kn(I,3),!0,!0):[]}function ue(A,I){return A&&A.length?Iu(A,kn(I,3),!0):[]}function we(A,I,k,ee){var pe=A==null?0:A.length;return pe?(k&&typeof k!="number"&&Ys(A,I,k)&&(k=0,ee=pe),p0(A,I,k,ee)):[]}function Pe(A,I,k){var ee=A==null?0:A.length;if(!ee)return-1;var pe=k==null?0:lt(k);return pe<0&&(pe=ba(ee+pe,0)),Zc(A,kn(I,3),pe)}function Re(A,I,k){var ee=A==null?0:A.length;if(!ee)return-1;var pe=ee-1;return k!==ye&&(pe=lt(k),pe=k<0?ba(ee+pe,0):us(pe,ee-1)),Zc(A,kn(I,3),pe,!0)}function Ue(A){var I=A==null?0:A.length;return I?Ki(A,1):[]}function Ke(A){var I=A==null?0:A.length;return I?Ki(A,Jr):[]}function it(A,I){var k=A==null?0:A.length;return k?(I=I===ye?1:lt(I),Ki(A,I)):[]}function ut(A){for(var I=-1,k=A==null?0:A.length,ee={};++I<k;){var pe=A[I];ee[pe[0]]=pe[1]}return ee}function rt(A){return A&&A.length?A[0]:ye}function Ct(A,I,k){var ee=A==null?0:A.length;if(!ee)return-1;var pe=k==null?0:lt(k);return pe<0&&(pe=ba(ee+pe,0)),bl(A,I,pe)}function yt(A){var I=A==null?0:A.length;return I?nl(A,0,-1):[]}var Kt=Gi(function(A){var I=Ci(A,yp);return I.length&&I[0]===A[0]?Ec(I):[]}),ar=Gi(function(A){var I=sr(A),k=Ci(A,yp);return I===sr(k)?I=ye:k.pop(),k.length&&k[0]===A[0]?Ec(k,kn(I,2)):[]}),er=Gi(function(A){var I=sr(A),k=Ci(A,yp);return I=typeof I=="function"?I:ye,I&&k.pop(),k.length&&k[0]===A[0]?Ec(k,ye,I):[]});function Yt(A,I){return A==null?"":tm.call(A,I)}function sr(A){var I=A==null?0:A.length;return I?A[I-1]:ye}function jt(A,I,k){var ee=A==null?0:A.length;if(!ee)return-1;var pe=ee;return k!==ye&&(pe=lt(k),pe=pe<0?ba(ee+pe,0):us(pe,ee-1)),I===I?cd(A,I,pe):Zc(A,Ea,pe,!0)}function gr(A,I){return A&&A.length?rl(A,lt(I)):ye}var ir=Gi(Pr);function Pr(A,I){return A&&A.length&&I&&I.length?oh(A,I):A}function Yr(A,I,k){return A&&A.length&&I&&I.length?oh(A,I,kn(k,2)):A}function qt(A,I,k){return A&&A.length&&I&&I.length?oh(A,I,ye,k):A}var xr=bu(function(A,I){var k=A==null?0:A.length,ee=eh(A,I);return qu(A,Ci(I,function(pe){return Ul(pe,k)?+pe:pe}).sort(cm)),ee});function cn(A,I){var k=[];if(!(A&&A.length))return k;var ee=-1,pe=[],De=A.length;for(I=kn(I,3);++ee<De;){var Qe=A[ee];I(Qe,ee,A)&&(k.push(Qe),pe.push(ee))}return qu(A,pe),k}function Cn(A){return A==null?A:Os.call(A)}function Gn(A,I,k){var ee=A==null?0:A.length;return ee?(k&&typeof k!="number"&&Ys(A,I,k)?(I=0,k=ee):(I=I==null?0:lt(I),k=k===ye?ee:lt(k)),nl(A,I,k)):[]}function Wr(A,I){return vp(A,I)}function Jn(A,I,k){return lg(A,I,kn(k,2))}function jn(A,I){var k=A==null?0:A.length;if(k){var ee=vp(A,I);if(ee<k&&Ts(A[ee],I))return ee}return-1}function Xn(A,I){return vp(A,I,!0)}function Wi(A,I,k){return lg(A,I,kn(k,2),!0)}function Ai(A,I){var k=A==null?0:A.length;if(k){var ee=vp(A,I,!0)-1;if(Ts(A[ee],I))return ee}return-1}function Oi(A){return A&&A.length?wv(A):[]}function Ji(A,I){return A&&A.length?wv(A,kn(I,2)):[]}function En(A){var I=A==null?0:A.length;return I?nl(A,1,I):[]}function $i(A,I,k){return A&&A.length?(I=k||I===ye?1:lt(I),nl(A,0,I<0?0:I)):[]}function no(A,I,k){var ee=A==null?0:A.length;return ee?(I=k||I===ye?1:lt(I),I=ee-I,nl(A,I<0?0:I,ee)):[]}function Ao(A,I){return A&&A.length?Iu(A,kn(I,3),!1,!0):[]}function ua(A,I){return A&&A.length?Iu(A,kn(I,3)):[]}var ji=Gi(function(A){return ts(Ki(A,1,Is,!0))}),ii=Gi(function(A){var I=sr(A);return Is(I)&&(I=ye),ts(Ki(A,1,Is,!0),kn(I,2))}),Ti=Gi(function(A){var I=sr(A);return I=typeof I=="function"?I:ye,ts(Ki(A,1,Is,!0),ye,I)});function Co(A){return A&&A.length?ts(A):[]}function wo(A,I){return A&&A.length?ts(A,kn(I,2)):[]}function Po(A,I){return I=typeof I=="function"?I:ye,A&&A.length?ts(A,ye,I):[]}function _o(A){if(!(A&&A.length))return[];var I=0;return A=nn(A,function(k){if(Is(k))return I=ba(k.length,I),!0}),rf(I,function(k){return Ci(A,Ac(k))})}function Ii(A,I){if(!(A&&A.length))return[];var k=_o(A);return I==null?k:Ci(k,function(ee){return Ps(I,ye,ee)})}var qn=Gi(function(A,I){return Is(A)?th(A,I):[]}),Di=Gi(function(A){return ug(nn(A,Is))}),Vn=Gi(function(A){var I=sr(A);return Is(I)&&(I=ye),ug(nn(A,Is),kn(I,2))}),Yn=Gi(function(A){var I=sr(A);return I=typeof I=="function"?I:ye,ug(nn(A,Is),ye,I)}),fn=Gi(_o);function Vo(A,I){return Fl(A||[],I||[],Tu)}function rs(A,I){return Fl(A||[],I||[],mp)}var _s=Gi(function(A){var I=A.length,k=I>1?A[I-1]:ye;return k=typeof k=="function"?(A.pop(),k):ye,Ii(A,k)});function ns(A){var I=Ee(A);return I.__chain__=!0,I}function Uh(A,I){return I(A),A}function Xi(A,I){return I(A)}var wl=bu(function(A){var I=A.length,k=I?A[0]:0,ee=this.__wrapped__,pe=function(De){return eh(De,A)};return I>1||this.__actions__.length||!(ee instanceof ti)||!Ul(k)?this.thru(pe):(ee=ee.slice(k,+k+(I?1:0)),ee.__actions__.push({func:Xi,args:[pe],thisArg:ye}),new tu(ee,this.__chain__).thru(function(De){return I&&!De.length&&De.push(ye),De}))});function gs(){return ns(this)}function Ei(){return new tu(this.value(),this.__chain__)}function ca(){this.__values__===ye&&(this.__values__=$e(this.value()));var A=this.__index__>=this.__values__.length,I=A?ye:this.__values__[this.__index__++];return{done:A,value:I}}function Mo(){return this}function Na(A){for(var I,k=this;k instanceof lp;){var ee=Ep(k);ee.__index__=0,ee.__values__=ye,I?pe.__wrapped__=ee:I=ee;var pe=ee;k=k.__wrapped__}return pe.__wrapped__=A,I}function ha(){var A=this.__wrapped__;if(A instanceof ti){var I=A;return this.__actions__.length&&(I=new ti(this)),I=I.reverse(),I.__actions__.push({func:Xi,args:[Cn],thisArg:ye}),new tu(I,this.__chain__)}return this.thru(Cn)}function kl(){return Oh(this.__wrapped__,this.__actions__)}var Ya=Nl(function(A,I,k){Ni.call(A,k)?++A[k]:As(A,k,1)});function Hl(A,I,k){var ee=ci(A)?xc:_f;return k&&Ys(A,I,k)&&(I=ye),ee(A,kn(I,3))}function me(A,I){var k=ci(A)?nn:Cs;return k(A,kn(I,3))}var Za=Qr(Pe),co=Qr(Re);function xa(A,I){return Ki(Gl(A,I),1)}function Zr(A,I){return Ki(Gl(A,I),Jr)}function No(A,I,k){return k=k===ye?1:lt(k),Ki(Gl(A,I),k)}function Wo(A,I){var k=ci(A)?Ma:fs;return k(A,kn(I,3))}function Ce(A,I){var k=ci(A)?td:vd;return k(A,kn(I,3))}var Pu=Nl(function(A,I,k){Ni.call(A,k)?A[k].push(I):As(A,k,[I])});function Ru(A,I,k,ee){A=Ks(A)?A:Em(A),k=k&&!ee?lt(k):0;var pe=A.length;return k<0&&(k=ba(pe+k,0)),X(A)?k<=pe&&A.indexOf(I,k)>-1:!!pe&&bl(A,I,k)>-1}var Ms=Gi(function(A,I,k){var ee=-1,pe=typeof I=="function",De=Ks(A)?Nt(A.length):[];return fs(A,function(Qe){De[++ee]=pe?Ps(I,Qe,k):Dl(Qe,I,k)}),De}),kh=Nl(function(A,I,k){As(A,k,I)});function Gl(A,I){var k=ci(A)?Ci:Tf;return k(A,kn(I,3))}function nc(A,I,k,ee){return A==null?[]:(ci(I)||(I=I==null?[]:[I]),k=ee?ye:k,ci(k)||(k=k==null?[]:[k]),gp(A,I,k))}var ol=Nl(function(A,I,k){A[k?0:1].push(I)},function(){return[[],[]]});function ph(A,I,k){var ee=ci(A)?Yc:wc,pe=arguments.length<3;return ee(A,kn(I,4),k,pe,fs)}function al(A,I,k){var ee=ci(A)?on:wc,pe=arguments.length<3;return ee(A,kn(I,4),k,pe,vd)}function Ro(A,I){var k=ci(A)?nn:Cs;return k(A,ga(kn(I,3)))}function Ou(A){var I=ci(A)?Af:xv;return I(A)}function gh(A,I,k){(k?Ys(A,I,k):I===ye)?I=1:I=lt(I);var ee=ci(A)?Cf:am;return ee(A,I)}function ic(A){var I=ci(A)?md:sg;return I(A)}function Nf(A){if(A==null)return 0;if(Ks(A))return X(A)?yu(A):A.length;var I=Xa(A);return I==ul||I==_a?A.size:ig(A).length}function go(A,I,k){var ee=ci(A)?Rs:Cv;return k&&Ys(A,I,k)&&(I=ye),ee(A,kn(I,3))}var io=Gi(function(A,I){if(A==null)return[];var k=I.length;return k>1&&Ys(A,I[0],I[1])?I=[]:k>2&&Ys(I[0],I[1],I[2])&&(I=[I[0]]),gp(A,Ki(I,1),[])}),oi=em||function(){return Xr.Date.now()};function uu(A,I){if(typeof I!="function")throw new Ga(St);return A=lt(A),function(){if(--A<1)return I.apply(this,arguments)}}function pa(A,I,k){return I=k?ye:I,I=A&&I==null?A.length:I,zl(A,ro,ye,ye,ye,ye,I)}function mo(A,I){var k;if(typeof I!="function")throw new Ga(St);return A=lt(A),function(){return--A>0&&(k=I.apply(this,arguments)),A<=1&&(I=ye),k}}var Hh=Gi(function(A,I,k){var ee=Hn;if(k.length){var pe=Hs(k,bc(Hh));ee|=mi}return zl(A,ee,I,k,pe)}),yi=Gi(function(A,I,k){var ee=Hn|bo;if(k.length){var pe=Hs(k,bc(yi));ee|=mi}return zl(I,ee,A,k,pe)});function Am(A,I,k){I=k?ye:I;var ee=zl(A,Lo,ye,ye,ye,ye,ye,I);return ee.placeholder=Am.placeholder,ee}function Aa(A,I,k){I=k?ye:I;var ee=zl(A,Ui,ye,ye,ye,ye,ye,I);return ee.placeholder=Aa.placeholder,ee}function bp(A,I,k){var ee,pe,De,Qe,nt,_t,fr=0,dr=!1,br=!1,tn=!0;if(typeof A!="function")throw new Ga(St);I=cr(I)||0,c(k)&&(dr=!!k.leading,br="maxWait"in k,De=br?ba(cr(k.maxWait)||0,I):De,tn="trailing"in k?!!k.trailing:tn);function Nn(Ba){var hu=ee,Pp=pe;return ee=pe=ye,fr=Ba,Qe=A.apply(Pp,hu),Qe}function hi(Ba){return fr=Ba,nt=Ip(To,I),dr?Nn(Ba):Qe}function Bn(Ba){var hu=Ba-_t,Pp=Ba-fr,lA=I-hu;return br?us(lA,De-Pp):lA}function fi(Ba){var hu=Ba-_t,Pp=Ba-fr;return _t===ye||hu>=I||hu<0||br&&Pp>=De}function To(){var Ba=oi();if(fi(Ba))return Io(Ba);nt=Ip(To,Bn(Ba))}function Io(Ba){return nt=ye,tn&&ee?Nn(Ba):(ee=pe=ye,Qe)}function sc(){nt!==ye&&sm(nt),fr=0,ee=_t=pe=nt=ye}function Fu(){return nt===ye?Qe:Io(oi())}function yh(){var Ba=oi(),hu=fi(Ba);if(ee=arguments,pe=this,_t=Ba,hu){if(nt===ye)return hi(_t);if(br)return sm(nt),nt=Ip(To,I),Nn(_t)}return nt===ye&&(nt=Ip(To,I)),Qe}return yh.cancel=sc,yh.flush=Fu,yh}var mh=Gi(function(A,I){return Ic(A,1,I)}),Cg=Gi(function(A,I,k){return Ic(A,cr(I)||0,k)});function Ed(A){return zl(A,Xt)}function Ss(A,I){if(typeof A!="function"||I!=null&&typeof I!="function")throw new Ga(St);var k=function(){var ee=arguments,pe=I?I.apply(this,ee):ee[0],De=k.cache;if(De.has(pe))return De.get(pe);var Qe=A.apply(this,ee);return k.cache=De.set(pe,Qe)||De,Qe};return k.cache=new(Ss.Cache||iu),k}Ss.Cache=iu;function ga(A){if(typeof A!="function")throw new Ga(St);return function(){var I=arguments;switch(I.length){case 0:return!A.call(this);case 1:return!A.call(this,I[0]);case 2:return!A.call(this,I[0],I[1]);case 3:return!A.call(this,I[0],I[1],I[2])}return!A.apply(this,I)}}function bd(A){return mo(2,A)}var Bi=hg(function(A,I){I=I.length==1&&ci(I[0])?Ci(I[0],Ql(kn())):Ci(Ki(I,1),Ql(kn()));var k=I.length;return Gi(function(ee){for(var pe=-1,De=us(ee.length,k);++pe<De;)ee[pe]=I[pe].call(this,ee[pe]);return Ps(A,this,ee)})}),vh=Gi(function(A,I){var k=Hs(I,bc(vh));return zl(A,mi,ye,I,k)}),Pc=Gi(function(A,I){var k=Hs(I,bc(Pc));return zl(A,Ko,ye,I,k)}),wg=bu(function(A,I){return zl(A,ia,ye,ye,ye,I)});function Ld(A,I){if(typeof A!="function")throw new Ga(St);return I=I===ye?I:lt(I),Gi(A,I)}function Cm(A,I){if(typeof A!="function")throw new Ga(St);return I=I==null?0:ba(lt(I),0),Gi(function(k){var ee=k[I],pe=Qu(k,0,I);return ee&&Jo(pe,ee),Ps(A,this,pe)})}function Gh(A,I,k){var ee=!0,pe=!0;if(typeof A!="function")throw new Ga(St);return c(k)&&(ee="leading"in k?!!k.leading:ee,pe="trailing"in k?!!k.trailing:pe),bp(A,I,{leading:ee,maxWait:I,trailing:pe})}function oc(A){return pa(A,1)}function v0(A,I){return vh(cg(I),A)}function y0(){if(!arguments.length)return[];var A=arguments[0];return ci(A)?A:[A]}function bi(A){return Va(A,Er)}function vo(A,I){return I=typeof I=="function"?I:ye,Va(A,Er,I)}function Bo(A){return Va(A,pt|Er)}function jl(A,I){return I=typeof I=="function"?I:ye,Va(A,pt|Er,I)}function wm(A,I){return I==null||wf(A,I,Es(I))}function Ts(A,I){return A===I||A!==A&&I!==I}var _m=ch(Ju),jh=ch(function(A,I){return A>=I}),is=Mf(function(){return arguments}())?Mf:function(A){return s(A)&&Ni.call(A,"callee")&&!qg.call(A,"callee")},ci=Nt.isArray,_g=ks?Ql(ks):om;function Ks(A){return A!=null&&o(A.length)&&!Du(A)}function Is(A){return s(A)&&Ks(A)}function ty(A){return A===!0||A===!1||s(A)&&Un(A)==Zl}var Bf=Cu||R1,ry=da?Ql(da):yd;function y1(A){return s(A)&&A.nodeType===1&&!E(A)}function x1(A){if(A==null)return!0;if(Ks(A)&&(ci(A)||typeof A=="string"||typeof A.splice=="function"||Bf(A)||U(A)||is(A)))return!A.length;var I=Xa(A);if(I==ul||I==_a)return!A.size;if(rc(A))return!ig(A).length;for(var k in A)if(Ni.call(A,k))return!1;return!0}function zf(A,I){return dp(A,I)}function Mm(A,I,k){k=typeof k=="function"?k:ye;var ee=k?k(A,I):ye;return ee===ye?dp(A,I,ye,k):!!ee}function Sm(A){if(!s(A))return!1;var I=Un(A);return I==Kh||I==oa||typeof A.message=="string"&&typeof A.name=="string"&&!E(A)}function Mg(A){return typeof A=="number"&&Tc(A)}function Du(A){if(!c(A))return!1;var I=Un(A);return I==wh||I==ei||I==Yp||I==zc}function m(A){return typeof A=="number"&&A==lt(A)}function o(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=Tn}function c(A){var I=typeof A;return A!=null&&(I=="object"||I=="function")}function s(A){return A!=null&&typeof A=="object"}var h=Kd?Ql(Kd):tl;function f(A,I){return A===I||ws(A,I,Al(I))}function x(A,I,k){return k=typeof k=="function"?k:ye,ws(A,I,Al(I),k)}function g(A){return M(A)&&A!=+A}function _(A){if(Rf(A))throw new Kn(Ut);return rh(A)}function L(A){return A===null}function F(A){return A==null}function M(A){return typeof A=="number"||s(A)&&Un(A)==ko}function E(A){if(!s(A)||Un(A)!=ss)return!1;var I=Ll(A);if(I===null)return!0;var k=Ni.call(I,"constructor")&&I.constructor;return typeof k=="function"&&k instanceof k&&Wu.call(k)==Vs}var P=mu?Ql(mu):uo;function O(A){return m(A)&&A>=-Tn&&A<=Tn}var B=Mh?Ql(Mh):ya;function X(A){return typeof A=="string"||!ci(A)&&s(A)&&Un(A)==Ia}function W(A){return typeof A=="symbol"||s(A)&&Un(A)==Ud}var U=vi?Ql(vi):_r;function q(A){return A===ye}function he(A){return s(A)&&Xa(A)==Kl}function ge(A){return s(A)&&Un(A)==Uc}var _e=ch(pp),Se=ch(function(A,I){return A<=I});function $e(A){if(!A)return[];if(Ks(A))return X(A)?gl(A):il(A);if(Zi&&A[Zi])return pv(A[Zi]());var I=Xa(A),k=I==ul?ud:I==_a?af:Em;return k(A)}function Be(A){if(!A)return A===0?A:0;if(A=cr(A),A===Jr||A===-Jr){var I=A<0?-1:1;return I*fa}return A===A?A:0}function lt(A){var I=Be(A),k=I%1;return I===I?k?I-k:I:0}function kt(A){return A?au(lt(A),0,ki):0}function cr(A){if(typeof A=="number")return A;if(W(A))return Ja;if(c(A)){var I=typeof A.valueOf=="function"?A.valueOf():A;A=c(I)?I+"":I}if(typeof A!="string")return A===0?A:+A;A=ep(A);var k=jd.test(A);return k||Hu.test(A)?El(A.slice(2),k?2:8):Il.test(A)?Ja:+A}function Ur(A){return $u(A,_l(A))}function Ar(A){return A?au(lt(A),-Tn,Tn):A===0?A:0}function zr(A){return A==null?"":es(A)}var Gt=lh(function(A,I){if(rc(I)||Ks(I)){$u(I,Es(I),A);return}for(var k in I)Ni.call(I,k)&&Tu(A,k,I[k])}),Vt=lh(function(A,I){$u(I,_l(I),A)}),Pn=lh(function(A,I,k,ee){$u(I,_l(I),A,ee)}),Mn=lh(function(A,I,k,ee){$u(I,Es(I),A,ee)}),Rn=bu(eh);function gi(A,I){var k=Jc(A);return I==null?k:$c(k,I)}var os=Gi(function(A,I){A=wi(A);var k=-1,ee=I.length,pe=ee>2?I[2]:ye;for(pe&&Ys(I[0],I[1],pe)&&(ee=1);++k<ee;)for(var De=I[k],Qe=_l(De),nt=-1,_t=Qe.length;++nt<_t;){var fr=Qe[nt],dr=A[fr];(dr===ye||Ts(dr,Gs[fr])&&!Ni.call(A,fr))&&(A[fr]=De[fr])}return A}),Xo=Gi(function(A){return A.push(ye,gm),Ps(Uf,ye,A)});function $o(A,I){return tf(A,kn(I,3),po)}function Lv(A,I){return tf(A,kn(I,3),fp)}function Ra(A,I){return A==null?A:ri(A,kn(I,3),_l)}function Tm(A,I){return A==null?A:qo(A,kn(I,3),_l)}function Pd(A,I){return A&&po(A,kn(I,3))}function Rc(A,I){return A&&fp(A,kn(I,3))}function Sg(A){return A==null?[]:ds(A,Es(A))}function A1(A){return A==null?[]:ds(A,_l(A))}function x0(A,I,k){var ee=A==null?ye:vl(A,I);return ee===ye?k:ee}function C1(A,I){return A!=null&&_p(A,I,sa)}function Pv(A,I){return A!=null&&_p(A,I,Wa)}var ny=ps(function(A,I,k){I!=null&&typeof I.toString!="function"&&(I=cf.call(I)),A[I]=k},zv(cu)),iy=ps(function(A,I,k){I!=null&&typeof I.toString!="function"&&(I=cf.call(I)),Ni.call(A,I)?A[I].push(k):A[I]=[k]},kn),Rv=Gi(Dl);function Es(A){return Ks(A)?Lh(A):ig(A)}function _l(A){return Ks(A)?Lh(A,!0):Sf(A)}function A0(A,I){var k={};return I=kn(I,3),po(A,function(ee,pe,De){As(k,I(ee,pe,De),ee)}),k}function oy(A,I){var k={};return I=kn(I,3),po(A,function(ee,pe,De){As(k,pe,I(ee,pe,De))}),k}var N2=lh(function(A,I,k){Xs(A,I,k)}),Uf=lh(function(A,I,k,ee){Xs(A,I,k,ee)}),w1=bu(function(A,I){var k={};if(A==null)return k;var ee=!1;I=Ci(I,function(De){return De=sh(De,A),ee||(ee=De.length>1),De}),$u(A,Bh(A),k),ee&&(k=Va(k,pt|Lt|Er,mm));for(var pe=I.length;pe--;)Qi(k,I[pe]);return k});function ay(A,I){return C0(A,ga(kn(I)))}var B2=bu(function(A,I){return A==null?{}:xl(A,I)});function C0(A,I){if(A==null)return{};var k=Ci(Bh(A),function(ee){return[ee]});return I=kn(I),ih(A,k,function(ee,pe){return I(ee,pe[0])})}function Im(A,I,k){I=sh(I,A);var ee=-1,pe=I.length;for(pe||(pe=1,A=ye);++ee<pe;){var De=A==null?ye:A[Cl(I[ee])];De===ye&&(ee=pe,De=k),A=Du(De)?De.call(A):De}return A}function Ov(A,I,k){return A==null?A:mp(A,I,k)}function sy(A,I,k,ee){return ee=typeof ee=="function"?ee:ye,A==null?A:mp(A,I,k,ee)}var hn=pm(Es),So=pm(_l);function Lp(A,I,k){var ee=ci(A),pe=ee||Bf(A)||U(A);if(I=kn(I,4),k==null){var De=A&&A.constructor;pe?k=ee?new De:[]:c(A)?k=Du(De)?Jc(Ll(A)):{}:k={}}return(pe?Ma:po)(A,function(Qe,nt,_t){return I(k,Qe,nt,_t)}),k}function Nx(A,I){return A==null?!0:Qi(A,I)}function z2(A,I,k){return A==null?A:ah(A,I,cg(k))}function U2(A,I,k,ee){return ee=typeof ee=="function"?ee:ye,A==null?A:ah(A,I,cg(k),ee)}function Em(A){return A==null?[]:dl(A,Es(A))}function Bx(A){return A==null?[]:dl(A,_l(A))}function zx(A,I,k){return k===ye&&(k=I,I=ye),k!==ye&&(k=cr(k),k=k===k?k:0),I!==ye&&(I=cr(I),I=I===I?I:0),au(cr(A),I,k)}function Ux(A,I,k){return I=Be(I),k===ye?(k=I,I=0):k=Be(k),A=cr(A),Ds(A,I,k)}function kx(A,I,k){if(k&&typeof k!="boolean"&&Ys(A,I,k)&&(I=k=ye),k===ye&&(typeof I=="boolean"?(k=I,I=ye):typeof A=="boolean"&&(k=A,A=ye)),A===ye&&I===ye?(A=0,I=1):(A=Be(A),I===ye?(I=A,A=0):I=Be(I)),A>I){var ee=A;A=I,I=ee}if(k||A%1||I%1){var pe=cs();return us(A+pe*(I-A+Us("1e-"+((pe+"").length-1))),I)}return su(A,I)}var Hx=ui(function(A,I,k){return I=I.toLowerCase(),A+(k?ly(I):I)});function ly(A){return Lm(zr(A).toLowerCase())}function Gx(A){return A=zr(A),A&&A.replace(Xg,rp).replace($f,"")}function _1(A,I,k){A=zr(A),I=es(I);var ee=A.length;k=k===ye?ee:au(lt(k),0,ee);var pe=k;return k-=I.length,k>=0&&A.slice(k,pe)==I}function jx(A){return A=zr(A),A&&pc.test(A)?A.replace(cl,of):A}function Vx(A){return A=zr(A),A&&hl.test(A)?A.replace(ls,"\\$&"):A}var k2=ui(function(A,I,k){return A+(k?"-":"")+I.toLowerCase()}),bm=ui(function(A,I,k){return A+(k?" ":"")+I.toLowerCase()}),Dv=Ad("toLowerCase");function w0(A,I,k){A=zr(A),I=lt(I);var ee=I?yu(A):0;if(!I||ee>=I)return A;var pe=(I-ee)/2;return Cd(_n(pe),k)+A+Cd(fd(pe),k)}function Fv(A,I,k){A=zr(A),I=lt(I);var ee=I?yu(A):0;return I&&ee<I?A+Cd(I-ee,k):A}function Nv(A,I,k){A=zr(A),I=lt(I);var ee=I?yu(A):0;return I&&ee<I?Cd(I-ee,k)+A:A}function Bv(A,I,k){return k||I==null?I=0:I&&(I=+I),Yu(zr(A).replace(va,""),I||0)}function _0(A,I,k){return(k?Ys(A,I,k):I===ye)?I=1:I=lt(I),Ef(zr(A),I)}function Wx(){var A=arguments,I=zr(A[0]);return A.length<3?I:I.replace(A[1],A[2])}var uy=ui(function(A,I,k){return A+(k?"_":"")+I.toLowerCase()});function M0(A,I,k){return k&&typeof k!="number"&&Ys(A,I,k)&&(I=k=ye),k=k===ye?ki:k>>>0,k?(A=zr(A),A&&(typeof I=="string"||I!=null&&!P(I))&&(I=es(I),!I&&pl(A))?Qu(gl(A),0,k):A.split(I,k)):[]}var cy=ui(function(A,I,k){return A+(k?" ":"")+Lm(I)});function Xx(A,I,k){return A=zr(A),k=k==null?0:au(lt(k),0,A.length),I=es(I),A.slice(k,k+I.length)==I}function M1(A,I,k){var ee=Ee.templateSettings;k&&Ys(A,I,k)&&(I=ye),A=zr(A),I=Pn({},I,ee,vg);var pe=Pn({},I.imports,ee.imports,vg),De=Es(pe),Qe=dl(pe,De),nt,_t,fr=0,dr=I.interpolate||jc,br="__p += '",tn=Sa((I.escape||jc).source+"|"+dr.source+"|"+(dr===$a?Gd:jc).source+"|"+(I.evaluate||jc).source+"|$","g"),Nn="//# sourceURL="+(Ni.call(I,"sourceURL")?(I.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yc+"]")+`
`;A.replace(tn,function(fi,To,Io,sc,Fu,yh){return Io||(Io=sc),br+=A.slice(fr,yh).replace(Go,sd),To&&(nt=!0,br+=`' +
__e(`+To+`) +
'`),Fu&&(_t=!0,br+=`';
`+Fu+`;
__p += '`),Io&&(br+=`' +
((__t = (`+Io+`)) == null ? '' : __t) +
'`),fr=yh+fi.length,fi}),br+=`';
`;var hi=Ni.call(I,"variable")&&I.variable;if(!hi)br=`with (obj) {
`+br+`
}
`;else if(Gc.test(hi))throw new Kn(ce);br=(_t?br.replace(Hc,""):br).replace(Hd,"$1").replace(Jh,"$1;"),br="function("+(hi||"obj")+`) {
`+(hi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(nt?", __e = _.escape":"")+(_t?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+br+`return __p
}`;var Bn=T1(function(){return Ri(De,Nn+"return "+br).apply(ye,Qe)});if(Bn.source=br,Sm(Bn))throw Bn;return Bn}function Yx(A){return zr(A).toLowerCase()}function hy(A){return zr(A).toUpperCase()}function Zx(A,I,k){if(A=zr(A),A&&(k||I===ye))return ep(A);if(!A||!(I=es(I)))return A;var ee=gl(A),pe=gl(I),De=nf(ee,pe),Qe=tp(ee,pe)+1;return Qu(ee,De,Qe).join("")}function Kx(A,I,k){if(A=zr(A),A&&(k||I===ye))return A.slice(0,xu(A)+1);if(!A||!(I=es(I)))return A;var ee=gl(A),pe=tp(ee,gl(I))+1;return Qu(ee,0,pe).join("")}function H2(A,I,k){if(A=zr(A),A&&(k||I===ye))return A.replace(va,"");if(!A||!(I=es(I)))return A;var ee=gl(A),pe=nf(ee,gl(I));return Qu(ee,pe).join("")}function Jx(A,I){var k=vt,ee=Dr;if(c(I)){var pe="separator"in I?I.separator:pe;k="length"in I?lt(I.length):k,ee="omission"in I?es(I.omission):ee}A=zr(A);var De=A.length;if(pl(A)){var Qe=gl(A);De=Qe.length}if(k>=De)return A;var nt=k-yu(ee);if(nt<1)return ee;var _t=Qe?Qu(Qe,0,nt).join(""):A.slice(0,nt);if(pe===ye)return _t+ee;if(Qe&&(nt+=_t.length-nt),P(pe)){if(A.slice(nt).search(pe)){var fr,dr=_t;for(pe.global||(pe=Sa(pe.source,zr(Wg.exec(pe))+"g")),pe.lastIndex=0;fr=pe.exec(dr);)var br=fr.index;_t=_t.slice(0,br===ye?nt:br)}}else if(A.indexOf(es(pe),nt)!=nt){var tn=_t.lastIndexOf(pe);tn>-1&&(_t=_t.slice(0,tn))}return _t+ee}function qx(A){return A=zr(A),A&&Tl.test(A)?A.replace(_h,ip):A}var fy=ui(function(A,I,k){return A+(k?" ":"")+I.toUpperCase()}),Lm=Ad("toUpperCase");function S1(A,I,k){return A=zr(A),I=k?ye:I,I===ye?ld(A)?lf(A):od(A):A.match(I)||[]}var T1=Gi(function(A,I){try{return Ps(A,ye,I)}catch(k){return Sm(k)?k:new Kn(k)}}),Qx=bu(function(A,I){return Ma(I,function(k){k=Cl(k),As(A,k,Hh(A[k],A))}),A});function dy(A){var I=A==null?0:A.length,k=kn();return A=I?Ci(A,function(ee){if(typeof ee[1]!="function")throw new Ga(St);return[k(ee[0]),ee[1]]}):[],Gi(function(ee){for(var pe=-1;++pe<I;){var De=A[pe];if(Ps(De[0],this,ee))return Ps(De[1],this,ee)}})}function py(A){return ng(Va(A,pt))}function zv(A){return function(){return A}}function gy(A,I){return A==null||A!==A?I:A}var $x=uh(),I1=uh(!0);function cu(A){return A}function Uv(A){return xd(typeof A=="function"?A:Va(A,pt))}function G2(A){return og(Va(A,pt))}function Tg(A,I){return nh(A,Va(I,pt))}var j2=Gi(function(A,I){return function(k){return Dl(k,A,I)}}),ac=Gi(function(A,I){return function(k){return Dl(A,k,I)}});function E1(A,I,k){var ee=Es(I),pe=ds(I,ee);k==null&&!(c(I)&&(pe.length||!ee.length))&&(k=I,I=A,A=this,pe=ds(I,Es(I)));var De=!(c(k)&&"chain"in k)||!!k.chain,Qe=Du(A);return Ma(pe,function(nt){var _t=I[nt];A[nt]=_t,Qe&&(A.prototype[nt]=function(){var fr=this.__chain__;if(De||fr){var dr=A(this.__wrapped__),br=dr.__actions__=il(this.__actions__);return br.push({func:_t,args:arguments,thisArg:A}),dr.__chain__=fr,dr}return _t.apply(A,Jo([this.value()],arguments))})}),A}function bs(){return Xr._===this&&(Xr._=Xu),this}function Ig(){}function eA(A){return A=lt(A),Gi(function(I){return rl(I,A)})}var kf=gg(Ci),my=gg(xc),b1=gg(Rs);function vy(A){return fh(A)?Ac(Cl(A)):If(A)}function L1(A){return function(I){return A==null?ye:vl(A,I)}}var P1=dm(),Eg=dm(!0);function S0(){return[]}function R1(){return!1}function tA(){return{}}function rA(){return""}function yy(){return!0}function nA(A,I){if(A=lt(A),A<1||A>Tn)return[];var k=ki,ee=us(A,ki);I=kn(I),A-=ki;for(var pe=rf(ee,I);++k<A;)I(k);return pe}function iA(A){return ci(A)?Ci(A,Cl):W(A)?[A]:il(Ev(zr(A)))}function oA(A){var I=++eg;return zr(A)+I}var Pm=Fh(function(A,I){return A+I},0),aA=hh("ceil"),V2=Fh(function(A,I){return A/I},1),Rm=hh("floor");function Om(A){return A&&A.length?Rh(A,cu,Ju):ye}function sA(A,I){return A&&A.length?Rh(A,kn(I,2),Ju):ye}function W2(A){return qd(A,cu)}function Dm(A,I){return qd(A,kn(I,2))}function X2(A){return A&&A.length?Rh(A,cu,pp):ye}function Y2(A,I){return A&&A.length?Rh(A,kn(I,2),pp):ye}var Z2=Fh(function(A,I){return A*I},1),K2=hh("round"),J2=Fh(function(A,I){return A-I},0);function q2(A){return A&&A.length?$d(A,cu):0}function Q2(A,I){return A&&A.length?$d(A,kn(I,2)):0}return Ee.after=uu,Ee.ary=pa,Ee.assign=Gt,Ee.assignIn=Vt,Ee.assignInWith=Pn,Ee.assignWith=Mn,Ee.at=Rn,Ee.before=mo,Ee.bind=Hh,Ee.bindAll=Qx,Ee.bindKey=yi,Ee.castArray=y0,Ee.chain=ns,Ee.chunk=bv,Ee.compact=j,Ee.concat=J,Ee.cond=dy,Ee.conforms=py,Ee.constant=zv,Ee.countBy=Ya,Ee.create=gi,Ee.curry=Am,Ee.curryRight=Aa,Ee.debounce=bp,Ee.defaults=os,Ee.defaultsDeep=Xo,Ee.defer=mh,Ee.delay=Cg,Ee.difference=$,Ee.differenceBy=V,Ee.differenceWith=H,Ee.drop=te,Ee.dropRight=ie,Ee.dropRightWhile=le,Ee.dropWhile=ue,Ee.fill=we,Ee.filter=me,Ee.flatMap=xa,Ee.flatMapDeep=Zr,Ee.flatMapDepth=No,Ee.flatten=Ue,Ee.flattenDeep=Ke,Ee.flattenDepth=it,Ee.flip=Ed,Ee.flow=$x,Ee.flowRight=I1,Ee.fromPairs=ut,Ee.functions=Sg,Ee.functionsIn=A1,Ee.groupBy=Pu,Ee.initial=yt,Ee.intersection=Kt,Ee.intersectionBy=ar,Ee.intersectionWith=er,Ee.invert=ny,Ee.invertBy=iy,Ee.invokeMap=Ms,Ee.iteratee=Uv,Ee.keyBy=kh,Ee.keys=Es,Ee.keysIn=_l,Ee.map=Gl,Ee.mapKeys=A0,Ee.mapValues=oy,Ee.matches=G2,Ee.matchesProperty=Tg,Ee.memoize=Ss,Ee.merge=N2,Ee.mergeWith=Uf,Ee.method=j2,Ee.methodOf=ac,Ee.mixin=E1,Ee.negate=ga,Ee.nthArg=eA,Ee.omit=w1,Ee.omitBy=ay,Ee.once=bd,Ee.orderBy=nc,Ee.over=kf,Ee.overArgs=Bi,Ee.overEvery=my,Ee.overSome=b1,Ee.partial=vh,Ee.partialRight=Pc,Ee.partition=ol,Ee.pick=B2,Ee.pickBy=C0,Ee.property=vy,Ee.propertyOf=L1,Ee.pull=ir,Ee.pullAll=Pr,Ee.pullAllBy=Yr,Ee.pullAllWith=qt,Ee.pullAt=xr,Ee.range=P1,Ee.rangeRight=Eg,Ee.rearg=wg,Ee.reject=Ro,Ee.remove=cn,Ee.rest=Ld,Ee.reverse=Cn,Ee.sampleSize=gh,Ee.set=Ov,Ee.setWith=sy,Ee.shuffle=ic,Ee.slice=Gn,Ee.sortBy=io,Ee.sortedUniq=Oi,Ee.sortedUniqBy=Ji,Ee.split=M0,Ee.spread=Cm,Ee.tail=En,Ee.take=$i,Ee.takeRight=no,Ee.takeRightWhile=Ao,Ee.takeWhile=ua,Ee.tap=Uh,Ee.throttle=Gh,Ee.thru=Xi,Ee.toArray=$e,Ee.toPairs=hn,Ee.toPairsIn=So,Ee.toPath=iA,Ee.toPlainObject=Ur,Ee.transform=Lp,Ee.unary=oc,Ee.union=ji,Ee.unionBy=ii,Ee.unionWith=Ti,Ee.uniq=Co,Ee.uniqBy=wo,Ee.uniqWith=Po,Ee.unset=Nx,Ee.unzip=_o,Ee.unzipWith=Ii,Ee.update=z2,Ee.updateWith=U2,Ee.values=Em,Ee.valuesIn=Bx,Ee.without=qn,Ee.words=S1,Ee.wrap=v0,Ee.xor=Di,Ee.xorBy=Vn,Ee.xorWith=Yn,Ee.zip=fn,Ee.zipObject=Vo,Ee.zipObjectDeep=rs,Ee.zipWith=_s,Ee.entries=hn,Ee.entriesIn=So,Ee.extend=Vt,Ee.extendWith=Pn,E1(Ee,Ee),Ee.add=Pm,Ee.attempt=T1,Ee.camelCase=Hx,Ee.capitalize=ly,Ee.ceil=aA,Ee.clamp=zx,Ee.clone=bi,Ee.cloneDeep=Bo,Ee.cloneDeepWith=jl,Ee.cloneWith=vo,Ee.conformsTo=wm,Ee.deburr=Gx,Ee.defaultTo=gy,Ee.divide=V2,Ee.endsWith=_1,Ee.eq=Ts,Ee.escape=jx,Ee.escapeRegExp=Vx,Ee.every=Hl,Ee.find=Za,Ee.findIndex=Pe,Ee.findKey=$o,Ee.findLast=co,Ee.findLastIndex=Re,Ee.findLastKey=Lv,Ee.floor=Rm,Ee.forEach=Wo,Ee.forEachRight=Ce,Ee.forIn=Ra,Ee.forInRight=Tm,Ee.forOwn=Pd,Ee.forOwnRight=Rc,Ee.get=x0,Ee.gt=_m,Ee.gte=jh,Ee.has=C1,Ee.hasIn=Pv,Ee.head=rt,Ee.identity=cu,Ee.includes=Ru,Ee.indexOf=Ct,Ee.inRange=Ux,Ee.invoke=Rv,Ee.isArguments=is,Ee.isArray=ci,Ee.isArrayBuffer=_g,Ee.isArrayLike=Ks,Ee.isArrayLikeObject=Is,Ee.isBoolean=ty,Ee.isBuffer=Bf,Ee.isDate=ry,Ee.isElement=y1,Ee.isEmpty=x1,Ee.isEqual=zf,Ee.isEqualWith=Mm,Ee.isError=Sm,Ee.isFinite=Mg,Ee.isFunction=Du,Ee.isInteger=m,Ee.isLength=o,Ee.isMap=h,Ee.isMatch=f,Ee.isMatchWith=x,Ee.isNaN=g,Ee.isNative=_,Ee.isNil=F,Ee.isNull=L,Ee.isNumber=M,Ee.isObject=c,Ee.isObjectLike=s,Ee.isPlainObject=E,Ee.isRegExp=P,Ee.isSafeInteger=O,Ee.isSet=B,Ee.isString=X,Ee.isSymbol=W,Ee.isTypedArray=U,Ee.isUndefined=q,Ee.isWeakMap=he,Ee.isWeakSet=ge,Ee.join=Yt,Ee.kebabCase=k2,Ee.last=sr,Ee.lastIndexOf=jt,Ee.lowerCase=bm,Ee.lowerFirst=Dv,Ee.lt=_e,Ee.lte=Se,Ee.max=Om,Ee.maxBy=sA,Ee.mean=W2,Ee.meanBy=Dm,Ee.min=X2,Ee.minBy=Y2,Ee.stubArray=S0,Ee.stubFalse=R1,Ee.stubObject=tA,Ee.stubString=rA,Ee.stubTrue=yy,Ee.multiply=Z2,Ee.nth=gr,Ee.noConflict=bs,Ee.noop=Ig,Ee.now=oi,Ee.pad=w0,Ee.padEnd=Fv,Ee.padStart=Nv,Ee.parseInt=Bv,Ee.random=kx,Ee.reduce=ph,Ee.reduceRight=al,Ee.repeat=_0,Ee.replace=Wx,Ee.result=Im,Ee.round=K2,Ee.runInContext=dt,Ee.sample=Ou,Ee.size=Nf,Ee.snakeCase=uy,Ee.some=go,Ee.sortedIndex=Wr,Ee.sortedIndexBy=Jn,Ee.sortedIndexOf=jn,Ee.sortedLastIndex=Xn,Ee.sortedLastIndexBy=Wi,Ee.sortedLastIndexOf=Ai,Ee.startCase=cy,Ee.startsWith=Xx,Ee.subtract=J2,Ee.sum=q2,Ee.sumBy=Q2,Ee.template=M1,Ee.times=nA,Ee.toFinite=Be,Ee.toInteger=lt,Ee.toLength=kt,Ee.toLower=Yx,Ee.toNumber=cr,Ee.toSafeInteger=Ar,Ee.toString=zr,Ee.toUpper=hy,Ee.trim=Zx,Ee.trimEnd=Kx,Ee.trimStart=H2,Ee.truncate=Jx,Ee.unescape=qx,Ee.uniqueId=oA,Ee.upperCase=fy,Ee.upperFirst=Lm,Ee.each=Wo,Ee.eachRight=Ce,Ee.first=rt,E1(Ee,function(){var A={};return po(Ee,function(I,k){Ni.call(Ee.prototype,k)||(A[k]=I)}),A}(),{chain:!1}),Ee.VERSION=At,Ma(["bind","bindKey","curry","curryRight","partial","partialRight"],function(A){Ee[A].placeholder=Ee}),Ma(["drop","take"],function(A,I){ti.prototype[A]=function(k){k=k===ye?1:ba(lt(k),0);var ee=this.__filtered__&&!I?new ti(this):this.clone();return ee.__filtered__?ee.__takeCount__=us(k,ee.__takeCount__):ee.__views__.push({size:us(k,ki),type:A+(ee.__dir__<0?"Right":"")}),ee},ti.prototype[A+"Right"]=function(k){return this.reverse()[A](k).reverse()}}),Ma(["filter","map","takeWhile"],function(A,I){var k=I+1,ee=k==kr||k==wr;ti.prototype[A]=function(pe){var De=this.clone();return De.__iteratees__.push({iteratee:kn(pe,3),type:k}),De.__filtered__=De.__filtered__||ee,De}}),Ma(["head","last"],function(A,I){var k="take"+(I?"Right":"");ti.prototype[A]=function(){return this[k](1).value()[0]}}),Ma(["initial","tail"],function(A,I){var k="drop"+(I?"":"Right");ti.prototype[A]=function(){return this.__filtered__?new ti(this):this[k](1)}}),ti.prototype.compact=function(){return this.filter(cu)},ti.prototype.find=function(A){return this.filter(A).head()},ti.prototype.findLast=function(A){return this.reverse().find(A)},ti.prototype.invokeMap=Gi(function(A,I){return typeof A=="function"?new ti(this):this.map(function(k){return Dl(k,A,I)})}),ti.prototype.reject=function(A){return this.filter(ga(kn(A)))},ti.prototype.slice=function(A,I){A=lt(A);var k=this;return k.__filtered__&&(A>0||I<0)?new ti(k):(A<0?k=k.takeRight(-A):A&&(k=k.drop(A)),I!==ye&&(I=lt(I),k=I<0?k.dropRight(-I):k.take(I-A)),k)},ti.prototype.takeRightWhile=function(A){return this.reverse().takeWhile(A).reverse()},ti.prototype.toArray=function(){return this.take(ki)},po(ti.prototype,function(A,I){var k=/^(?:filter|find|map|reject)|While$/.test(I),ee=/^(?:head|last)$/.test(I),pe=Ee[ee?"take"+(I=="last"?"Right":""):I],De=ee||/^find/.test(I);!pe||(Ee.prototype[I]=function(){var Qe=this.__wrapped__,nt=ee?[1]:arguments,_t=Qe instanceof ti,fr=nt[0],dr=_t||ci(Qe),br=function(To){var Io=pe.apply(Ee,Jo([To],nt));return ee&&tn?Io[0]:Io};dr&&k&&typeof fr=="function"&&fr.length!=1&&(_t=dr=!1);var tn=this.__chain__,Nn=!!this.__actions__.length,hi=De&&!tn,Bn=_t&&!Nn;if(!De&&dr){Qe=Bn?Qe:new ti(this);var fi=A.apply(Qe,nt);return fi.__actions__.push({func:Xi,args:[br],thisArg:ye}),new tu(fi,tn)}return hi&&Bn?A.apply(this,nt):(fi=this.thru(br),hi?ee?fi.value()[0]:fi.value():fi)})}),Ma(["pop","push","shift","sort","splice","unshift"],function(A){var I=Vu[A],k=/^(?:push|sort|unshift)$/.test(A)?"tap":"thru",ee=/^(?:pop|shift)$/.test(A);Ee.prototype[A]=function(){var pe=arguments;if(ee&&!this.__chain__){var De=this.value();return I.apply(ci(De)?De:[],pe)}return this[k](function(Qe){return I.apply(ci(Qe)?Qe:[],pe)})}}),po(ti.prototype,function(A,I){var k=Ee[I];if(k){var ee=k.name+"";Ni.call(yo,ee)||(yo[ee]=[]),yo[ee].push({name:I,func:k})}}),yo[la(ye,bo).name]=[{name:"wrapper",func:ye}],ti.prototype.clone=ru,ti.prototype.reverse=im,ti.prototype.value=gv,Ee.prototype.at=wl,Ee.prototype.chain=gs,Ee.prototype.commit=Ei,Ee.prototype.next=ca,Ee.prototype.plant=Na,Ee.prototype.reverse=ha,Ee.prototype.toJSON=Ee.prototype.valueOf=Ee.prototype.value=kl,Ee.prototype.first=Ee.prototype.head,Zi&&(Ee.prototype[Zi]=Mo),Ee},_c=Qs();Xr._=_c,st=function(){return _c}.call(ft,Ae,ft,rr),st!==ye&&(rr.exports=st)}).call(this)}).call(this,Ae("IyRk"),Ae("hOG+")(Dn))},NHCu:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG");Ae("0uCz");var rr=Ae("g8eg");Object.defineProperty(ft,"Map",{enumerable:!0,get:function(){return rr.default}});var st=Ae("q8ti");Object.defineProperty(ft,"MapApiLoaderHOC",{enumerable:!0,get:function(){return st.default}});var ye=Ae("sxwG");Object.defineProperty(ft,"MapTypeControl",{enumerable:!0,get:function(){return ye.default}});var At=Ae("WuJL");Object.defineProperty(ft,"ScaleControl",{enumerable:!0,get:function(){return At.default}});var Ye=Ae("I/il");Object.defineProperty(ft,"ZoomControl",{enumerable:!0,get:function(){return Ye.default}});var Ut=Ae("5bzT");Object.defineProperty(ft,"NavigationControl",{enumerable:!0,get:function(){return Ut.default}});var St=Ae("RwCd");Object.defineProperty(ft,"Marker",{enumerable:!0,get:function(){return St.default}});var ce=Ae("SbrR");Object.defineProperty(ft,"Polyline",{enumerable:!0,get:function(){return ce.default}});var Ne=Ae("aVhU");Object.defineProperty(ft,"Polygon",{enumerable:!0,get:function(){return Ne.default}});var Q=Ae("zATX");Object.defineProperty(ft,"Circle",{enumerable:!0,get:function(){return Q.default}});var Oe=Ae("i5tv");Object.defineProperty(ft,"InfoWindow",{enumerable:!0,get:function(){return Oe.default}});var pt=Ae("WwoR");Object.defineProperty(ft,"Label",{enumerable:!0,get:function(){return pt.default}});var Lt=Ae("j9lq");Object.defineProperty(ft,"CustomOverlay",{enumerable:!0,get:function(){return Lt.default}});var Er=Ae("3Ree");Object.defineProperty(ft,"MapvglView",{enumerable:!0,get:function(){return Er.default}});var xe=Ae("ToZM");Object.defineProperty(ft,"MapvglLayer",{enumerable:!0,get:function(){return xe.default}});var Lr=Ae("mEKJ");Object.defineProperty(ft,"TrafficLayer",{enumerable:!0,get:function(){return Lr.default}});var Hn=Ae("oBiK");Object.defineProperty(ft,"PanoramaLayer",{enumerable:!0,get:function(){return Hn.default}});var bo=Ae("Z87X");Object.defineProperty(ft,"DrawingManager",{enumerable:!0,get:function(){return bo.default}});var Cr=Ae("dj1d");Object.defineProperty(ft,"DistanceTool",{enumerable:!0,get:function(){return Cr.default}});var Lo=Ae("e8yt");Object.defineProperty(ft,"AutoComplete",{enumerable:!0,get:function(){return Lo.default}});var Ui=Ae("PKrl");Object.defineProperty(ft,"Arc",{enumerable:!0,get:function(){return Ui.default}}),ft.mapvgl=Wt.__importStar(Ae("4K7L")),Wt.__exportStar(Ae("O61G"),ft)},NRzi:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("q1tI"),st=function(ye){Wt.__extends(At,ye);function At(){var Ye=ye!==null&&ye.apply(this,arguments)||this;return Ye.options=[],Ye}return At.prototype.getMap=function(){return this.props.map||this.context.map},At.prototype.getInstance=function(Ye){return Ye.instance},At.prototype.getOptions=function(Ye){Ye===void 0&&(Ye=this.props);var Ut={};return this.options.map(function(St){Ye[St]!==void 0&&(Ut[St]=Ye[St])}),Ut},At}(rr.PureComponent);ft.default=st},O61G:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG");Wt.__exportStar(Ae("gI1Y"),ft);var rr=Ae("gOxR");Object.defineProperty(ft,"isString",{enumerable:!0,get:function(){return rr.default}});var st=Ae("3RkO");Object.defineProperty(ft,"getDisplayName",{enumerable:!0,get:function(){return st.default}})},O8ob:function(Dn,ft,Ae){(function(Wt){function rr(st,ye,At){for(var Ye=ye.length,Ut=new Uint8Array(3*Ye/4-(ye[Ye-2]=="="?2:ye[Ye-1]=="="?1:0)),St=new Uint8Array(130),ce=0;64>ce;ce++)St["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(ce)]=ce;for(var Ne=ce=0;ce<Ye;ce+=4){var Q=St[ye.charCodeAt(ce+1)],Oe=St[ye.charCodeAt(ce+2)];Ut[Ne++]=St[ye.charCodeAt(ce)]<<2|Q>>4,Ut[Ne++]=(Q&15)<<4|Oe>>2,Ut[Ne++]=(Oe&3)<<6|St[ye.charCodeAt(ce+3)]&63}return At&&!st?WebAssembly.instantiate(Ut,At):At||st?(st=new WebAssembly.Module(Ut),At?new WebAssembly.Instance(st,At):st):WebAssembly.compile(Ut)}(function(st,ye){ye(ft)})(this,function(st){function ye(){throw Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function At(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Ye(n,e){return e={exports:{}},n(e,e.exports),e.exports}function Ut(n){var e,r;this.promise=new n(function(a,u){if(e!==void 0||r!==void 0)throw TypeError("Bad Promise constructor");e=a,r=u}),this.resolve=Ju(e),this.reject=Ju(r)}function St(){}function ce(n,e){this.x=n||0,this.y=e||0}function Ne(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function Q(n,e,r,a,u,p,y,C,S,R){Object.defineProperty(this,"id",{value:wg++}),this.uuid=Bi.generateUUID(),this.name="",this.image=n!==void 0?n:Q.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=e!==void 0?e:Q.DEFAULT_MAPPING,this.wrapS=r!==void 0?r:1001,this.wrapT=a!==void 0?a:1001,this.magFilter=u!==void 0?u:1006,this.minFilter=p!==void 0?p:1008,this.anisotropy=S!==void 0?S:1,this.format=y!==void 0?y:1023,this.internalFormat=null,this.type=C!==void 0?C:1009,this.offset=new ce(0,0),this.repeat=new ce(1,1),this.center=new ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ne,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=R!==void 0?R:3e3,this.version=0,this.onUpdate=null}function Oe(n,e,r,a){this.x=n||0,this.y=e||0,this.z=r||0,this.w=a!==void 0?a:1}function pt(n,e,r){this.width=n,this.height=e,this.scissor=new Oe(0,0,n,e),this.scissorTest=!1,this.viewport=new Oe(0,0,n,e),r=r||{},this.texture=new Q(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.image={},this.texture.image.width=n,this.texture.image.height=e,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:1006,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!0,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}function Lt(n,e,r){pt.call(this,n,e,r),this.samples=4}function Er(n,e,r,a){this._x=n||0,this._y=e||0,this._z=r||0,this._w=a!==void 0?a:1}function xe(n,e,r){this.x=n||0,this.y=e||0,this.z=r||0}function Lr(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Hn(n,e,r,a){this._x=n||0,this._y=e||0,this._z=r||0,this._order=a||Hn.DefaultOrder}function bo(){this.mask=1}function Cr(){Object.defineProperty(this,"id",{value:Ts++}),this.uuid=Bi.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Cr.DefaultUp.clone();var n=new xe,e=new Hn,r=new Er,a=new xe(1,1,1);e._onChange(function(){r.setFromEuler(e,!1)}),r._onChange(function(){e.setFromQuaternion(r,void 0,!1)}),Zr(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Lr},normalMatrix:{value:new Ne}}),this.matrix=new Lr,this.matrixWorld=new Lr,this.matrixAutoUpdate=Cr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new bo,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Lo(){Cr.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.environment=this.background=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ui(n,e){this.min=n!==void 0?n:new xe(Infinity,Infinity,Infinity),this.max=e!==void 0?e:new xe(-Infinity,-Infinity,-Infinity)}function mi(n,e,r,a,u){var p,y=0;for(p=n.length-3;y<=p;y+=3){g.fromArray(n,y);var C=u.x*Math.abs(g.x)+u.y*Math.abs(g.y)+u.z*Math.abs(g.z),S=e.dot(g),R=r.dot(g),N=a.dot(g);if(Math.max(-Math.max(S,R,N),Math.min(S,R,N))>C)return!1}return!0}function Ko(n,e){this.center=n!==void 0?n:new xe,this.radius=e!==void 0?e:-1}function ro(n,e){this.origin=n!==void 0?n:new xe,this.direction=e!==void 0?e:new xe(0,0,-1)}function ia(n,e){this.normal=n!==void 0?n:new xe(1,0,0),this.constant=e!==void 0?e:0}function Xt(n,e,r){this.a=n!==void 0?n:new xe,this.b=e!==void 0?e:new xe,this.c=r!==void 0?r:new xe}function vt(n,e,r){return e===void 0&&r===void 0?this.set(n):this.setRGB(n,e,r)}function Dr(n,e,r){return 0>r&&(r+=1),1<r&&--r,r<1/6?n+6*(e-n)*r:.5>r?e:r<2/3?n+6*(e-n)*(2/3-r):n}function Br(n){return .04045>n?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Gr(n){return .0031308>n?12.92*n:1.055*Math.pow(n,.41666)-.055}function kr(n,e,r,a,u,p){this.a=n,this.b=e,this.c=r,this.normal=a&&a.isVector3?a:new xe,this.vertexNormals=Array.isArray(a)?a:[],this.color=u&&u.isColor?u:new vt,this.vertexColors=Array.isArray(u)?u:[],this.materialIndex=p!==void 0?p:0}function Nr(){Object.defineProperty(this,"id",{value:Gt++}),this.uuid=Bi.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=this.flatShading=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.version=0}function wr(n){Nr.call(this),this.type="MeshBasicMaterial",this.color=new vt(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphTargets=this.skinning=!1,this.setValues(n)}function Jr(n,e,r){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=n,this.itemSize=e,this.count=n!==void 0?n.length/e:0,this.normalized=r===!0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function Tn(n,e,r){Jr.call(this,new Int8Array(n),e,r)}function fa(n,e,r){Jr.call(this,new Uint8Array(n),e,r)}function Ja(n,e,r){Jr.call(this,new Uint8ClampedArray(n),e,r)}function ki(n,e,r){Jr.call(this,new Int16Array(n),e,r)}function vs(n,e,r){Jr.call(this,new Uint16Array(n),e,r)}function Bc(n,e,r){Jr.call(this,new Int32Array(n),e,r)}function fu(n,e,r){Jr.call(this,new Uint32Array(n),e,r)}function Or(n,e,r){Jr.call(this,new Float32Array(n),e,r)}function Sl(n,e,r){Jr.call(this,new Float64Array(n),e,r)}function Yp(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Zl(n){if(n.length===0)return-Infinity;for(var e=n[0],r=1,a=n.length;r<a;++r)n[r]>e&&(e=n[r]);return e}function $r(){Object.defineProperty(this,"id",{value:Pn+=2}),this.uuid=Bi.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:Infinity},this.userData={}}function oa(n,e){Cr.call(this),this.type="Mesh",this.geometry=n!==void 0?n:new $r,this.material=e!==void 0?e:new wr,this.updateMorphTargets()}function Kh(n,e,r,a,u,p,y,C){return(e.side===1?a.intersectTriangle(y,p,u,!0,C):a.intersectTriangle(u,p,y,e.side!==2,C))===null?null:(oy.copy(C),oy.applyMatrix4(n.matrixWorld),e=r.ray.origin.distanceTo(oy),e<r.near||e>r.far?null:{distance:e,point:oy.clone(),object:n})}function wh(n,e,r,a,u,p,y,C,S,R,N,z){if(Pd.fromBufferAttribute(u,R),Rc.fromBufferAttribute(u,N),Sg.fromBufferAttribute(u,z),u=n.morphTargetInfluences,e.morphTargets&&p&&u){Pv.set(0,0,0),ny.set(0,0,0),iy.set(0,0,0);for(var Z=0,K=p.length;Z<K;Z++){var ne=u[Z],oe=p[Z];ne!==0&&(A1.fromBufferAttribute(oe,R),x0.fromBufferAttribute(oe,N),C1.fromBufferAttribute(oe,z),y?(Pv.addScaledVector(A1,ne),ny.addScaledVector(x0,ne),iy.addScaledVector(C1,ne)):(Pv.addScaledVector(A1.sub(Pd),ne),ny.addScaledVector(x0.sub(Rc),ne),iy.addScaledVector(C1.sub(Sg),ne)))}Pd.add(Pv),Rc.add(ny),Sg.add(iy)}return n.isSkinnedMesh&&(n.boneTransform(R,Pd),n.boneTransform(N,Rc),n.boneTransform(z,Sg)),(n=Kh(n,e,r,a,Pd,Rc,Sg,A0))&&(C&&(Rv.fromBufferAttribute(C,R),Es.fromBufferAttribute(C,N),_l.fromBufferAttribute(C,z),n.uv=Xt.getUV(A0,Pd,Rc,Sg,Rv,Es,_l,new ce)),S&&(Rv.fromBufferAttribute(S,R),Es.fromBufferAttribute(S,N),_l.fromBufferAttribute(S,z),n.uv2=Xt.getUV(A0,Pd,Rc,Sg,Rv,Es,_l,new ce)),C=new kr(R,N,z),Xt.getNormal(Pd,Rc,Sg,C.normal),n.face=C),n}function ei(){Object.defineProperty(this,"id",{value:N2+=2}),this.uuid=Bi.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function ul(n){var e={},r;for(r in n){e[r]={};for(var a in n[r]){var u=n[r][a];u&&(u.isColor||u.isMatrix3||u.isMatrix4||u.isVector2||u.isVector3||u.isVector4||u.isTexture)?e[r][a]=u.clone():Array.isArray(u)?e[r][a]=u.slice():e[r][a]=u}}return e}function ko(n){for(var e={},r=0;r<n.length;r++){var a=ul(n[r]),u;for(u in a)e[u]=a[u]}return e}function _i(n){Nr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,n!==void 0&&(n.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(n))}function ss(){Cr.call(this),this.type="Camera",this.matrixWorldInverse=new Lr,this.projectionMatrix=new Lr,this.projectionMatrixInverse=new Lr}function qa(n,e,r,a){ss.call(this),this.type="PerspectiveCamera",this.fov=n!==void 0?n:50,this.zoom=1,this.near=r!==void 0?r:.1,this.far=a!==void 0?a:2e3,this.focus=10,this.aspect=e!==void 0?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function zc(n,e,r){if(Cr.call(this),this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{this.renderTarget=r;var a=new qa(90,1,n,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new xe(1,0,0)),this.add(a);var u=new qa(90,1,n,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new xe(-1,0,0)),this.add(u);var p=new qa(90,1,n,e);p.layers=this.layers,p.up.set(0,0,1),p.lookAt(new xe(0,1,0)),this.add(p);var y=new qa(90,1,n,e);y.layers=this.layers,y.up.set(0,0,-1),y.lookAt(new xe(0,-1,0)),this.add(y);var C=new qa(90,1,n,e);C.layers=this.layers,C.up.set(0,-1,0),C.lookAt(new xe(0,0,1)),this.add(C);var S=new qa(90,1,n,e);S.layers=this.layers,S.up.set(0,-1,0),S.lookAt(new xe(0,0,-1)),this.add(S),this.update=function(R,N){this.parent===null&&this.updateMatrixWorld();var z=R.xr.enabled,Z=R.getRenderTarget();R.xr.enabled=!1;var K=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,R.setRenderTarget(r,0),R.render(N,a),R.setRenderTarget(r,1),R.render(N,u),R.setRenderTarget(r,2),R.render(N,p),R.setRenderTarget(r,3),R.render(N,y),R.setRenderTarget(r,4),R.render(N,C),r.texture.generateMipmaps=K,R.setRenderTarget(r,5),R.render(N,S),R.setRenderTarget(Z),R.xr.enabled=z},this.clear=function(R,N,z,Z){for(var K=R.getRenderTarget(),ne=0;6>ne;ne++)R.setRenderTarget(r,ne),R.clear(N,z,Z);R.setRenderTarget(K)}}}function Bu(n,e,r){ol(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=r),pt.call(this,n,n,e)}function _a(n,e,r,a,u,p,y,C,S,R,N,z){Q.call(this,null,p,y,C,S,R,a,u,N,z),this.image={data:n||null,width:e||1,height:r||1},this.magFilter=S!==void 0?S:1003,this.minFilter=R!==void 0?R:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1,this.needsUpdate=!0}function Ia(n,e,r,a,u,p){this.planes=[n!==void 0?n:new ia,e!==void 0?e:new ia,r!==void 0?r:new ia,a!==void 0?a:new ia,u!==void 0?u:new ia,p!==void 0?p:new ia]}function Ud(){function n(u,p){r!==!1&&(a(u,p),e.requestAnimationFrame(n))}var e=null,r=!1,a=null;return{start:function(){r!==!0&&a!==null&&(e.requestAnimationFrame(n),r=!0)},stop:function(){r=!1},setAnimationLoop:function(p){a=p},setContext:function(p){e=p}}}function zu(n,e){function r(p,y){var C=p.array,S=p.usage,R=n.createBuffer();return n.bindBuffer(y,R),n.bufferData(y,C,S),p.onUploadCallback(),y=5126,C instanceof Float32Array?y=5126:C instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):C instanceof Uint16Array?y=5123:C instanceof Int16Array?y=5122:C instanceof Uint32Array?y=5125:C instanceof Int32Array?y=5124:C instanceof Int8Array?y=5120:C instanceof Uint8Array&&(y=5121),{buffer:R,type:y,bytesPerElement:C.BYTES_PER_ELEMENT,version:p.version}}var a=e.isWebGL2,u=new Xi;return{get:function(y){return y.isInterleavedBufferAttribute&&(y=y.data),u.get(y)},remove:function(y){y.isInterleavedBufferAttribute&&(y=y.data);var C=u.get(y);C&&(n.deleteBuffer(C.buffer),u.delete(y))},update:function(y,C){y.isInterleavedBufferAttribute&&(y=y.data);var S=u.get(y);if(S===void 0)u.set(y,r(y,C));else if(S.version<y.version){var R=y.array,N=y.updateRange;n.bindBuffer(C,S.buffer),N.count===-1?n.bufferSubData(C,0,R):(a?n.bufferSubData(C,N.offset*R.BYTES_PER_ELEMENT,R,N.offset,N.count):n.bufferSubData(C,N.offset*R.BYTES_PER_ELEMENT,R.subarray(N.offset,N.offset+N.count)),N.count=-1),S.version=y.version}}}}function Kl(n,e,r,a){ei.call(this),this.type="PlaneGeometry",this.parameters={width:n,height:e,widthSegments:r,heightSegments:a},this.fromBufferGeometry(new Uc(n,e,r,a)),this.mergeVertices()}function Uc(n,e,r,a){$r.call(this),this.type="PlaneBufferGeometry",this.parameters={width:n,height:e,widthSegments:r,heightSegments:a},n=n||1,e=e||1;var u=n/2,p=e/2;r=Math.floor(r)||1,a=Math.floor(a)||1;var y=r+1,C=a+1,S=n/r,R=e/a,N=[],z=[],Z=[],K=[];for(n=0;n<C;n++){var ne=n*R-p;for(e=0;e<y;e++)z.push(e*S-u,-ne,0),Z.push(0,0,1),K.push(e/r),K.push(1-n/a)}for(n=0;n<a;n++)for(e=0;e<r;e++)u=e+y*(n+1),p=e+1+y*(n+1),C=e+1+y*n,N.push(e+y*n,u,C),N.push(u,p,C);this.setIndex(N),this.setAttribute("position",new Or(z,3)),this.setAttribute("normal",new Or(Z,3)),this.setAttribute("uv",new Or(K,2))}function Qa(n,e,r,a){function u(Z,K){e.buffers.color.setClear(Z.r,Z.g,Z.b,K,a)}var p=new vt(0),y=0,C,S,R=null,N=0,z=null;return{getClearColor:function(){return p},setClearColor:function(K,ne){p.set(K),y=ne!==void 0?ne:1,u(p,y)},getClearAlpha:function(){return y},setClearAlpha:function(K){y=K,u(p,y)},render:function(K,ne,oe,be){ne=ne.background,oe=n.xr,(oe=oe.getSession&&oe.getSession())&&oe.environmentBlendMode==="additive"&&(ne=null),ne===null?u(p,y):ne&&ne.isColor&&(u(ne,1),be=!0),(n.autoClear||be)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),ne&&(ne.isCubeTexture||ne.isWebGLCubeRenderTarget||ne.mapping===306)?(S===void 0&&(S=new oa(new C0(1,1,1),new _i({type:"BackgroundCubeMaterial",uniforms:ul(Lp.cube.uniforms),vertexShader:Lp.cube.vertexShader,fragmentShader:Lp.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),S.geometry.deleteAttribute("normal"),S.geometry.deleteAttribute("uv"),S.onBeforeRender=function(je,Ie,ze){this.matrixWorld.copyPosition(ze.matrixWorld)},Object.defineProperty(S.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(S)),be=ne.isWebGLCubeRenderTarget?ne.texture:ne,S.material.uniforms.envMap.value=be,S.material.uniforms.flipEnvMap.value=be.isCubeTexture?-1:1,(R!==ne||N!==be.version||z!==n.toneMapping)&&(S.material.needsUpdate=!0,R=ne,N=be.version,z=n.toneMapping),K.unshift(S,S.geometry,S.material,0,0,null)):ne&&ne.isTexture&&(C===void 0&&(C=new oa(new Uc(2,2),new _i({type:"BackgroundMaterial",uniforms:ul(Lp.background.uniforms),vertexShader:Lp.background.vertexShader,fragmentShader:Lp.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),C.geometry.deleteAttribute("normal"),Object.defineProperty(C.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(C)),C.material.uniforms.t2D.value=ne,ne.matrixAutoUpdate===!0&&ne.updateMatrix(),C.material.uniforms.uvTransform.value.copy(ne.matrix),(R!==ne||N!==ne.version||z!==n.toneMapping)&&(C.material.needsUpdate=!0,R=ne,N=ne.version,z=n.toneMapping),K.unshift(C,C.geometry,C.material,0,0,null))}}}function Uu(n,e,r,a){var u=a.isWebGL2,p;this.setMode=function(y){p=y},this.render=function(y,C){n.drawArrays(p,y,C),r.update(C,p)},this.renderInstances=function(y,C,S,R){if(R!==0){if(u){y=n;var N="drawArraysInstanced"}else if(y=e.get("ANGLE_instanced_arrays"),N="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[N](p,C,S,R),r.update(S,p,R)}}}function fc(n,e,r){function a(ze){if(ze==="highp"){if(0<n.getShaderPrecisionFormat(35633,36338).precision&&0<n.getShaderPrecisionFormat(35632,36338).precision)return"highp";ze="mediump"}return ze==="mediump"&&0<n.getShaderPrecisionFormat(35633,36337).precision&&0<n.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var u,p=typeof WebGL2RenderingContext!="undefined"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&n instanceof WebGL2ComputeRenderingContext,y=r.precision!==void 0?r.precision:"highp",C=a(y);C!==y&&(console.warn("THREE.WebGLRenderer:",y,"not supported, using",C,"instead."),y=C),r=r.logarithmicDepthBuffer===!0,C=n.getParameter(34930);var S=n.getParameter(35660),R=n.getParameter(3379),N=n.getParameter(34076),z=n.getParameter(34921),Z=n.getParameter(36347),K=n.getParameter(36348),ne=n.getParameter(36349),oe=0<S,be=p||!!e.get("OES_texture_float"),je=oe&&be,Ie=p?n.getParameter(36183):0;return{isWebGL2:p,getMaxAnisotropy:function(){if(u!==void 0)return u;var et=e.get("EXT_texture_filter_anisotropic");return u=et!==null?n.getParameter(et.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:a,precision:y,logarithmicDepthBuffer:r,maxTextures:C,maxVertexTextures:S,maxTextureSize:R,maxCubemapSize:N,maxAttributes:z,maxVertexUniforms:Z,maxVaryings:K,maxFragmentUniforms:ne,vertexTextures:oe,floatFragmentTextures:be,floatVertexTextures:je,maxSamples:Ie}}function dc(){function n(){R.value!==a&&(R.value=a,R.needsUpdate=0<u),r.numPlanes=u,r.numIntersection=0}function e(N,z,Z,K){var ne=N!==null?N.length:0,oe=null;if(ne!==0){if(oe=R.value,K!==!0||oe===null)for(K=Z+4*ne,z=z.matrixWorldInverse,S.getNormalMatrix(z),(oe===null||oe.length<K)&&(oe=new Float32Array(K)),K=0;K!==ne;++K,Z+=4)C.copy(N[K]).applyMatrix4(z,S),C.normal.toArray(oe,Z),oe[Z+3]=C.constant;R.value=oe,R.needsUpdate=!0}return r.numPlanes=ne,r.numIntersection=0,oe}var r=this,a=null,u=0,p=!1,y=!1,C=new ia,S=new Ne,R={value:null,needsUpdate:!1};this.uniform=R,this.numIntersection=this.numPlanes=0,this.init=function(N,z,Z){var K=N.length!==0||z||u!==0||p;return p=z,a=e(N,Z,0),u=N.length,K},this.beginShadows=function(){y=!0,e(null)},this.endShadows=function(){y=!1,n()},this.setState=function(N,z,Z,K,ne,oe){if(!p||N===null||N.length===0||y&&!Z)y?e(null):n();else{Z=y?0:u;var be=4*Z,je=ne.clippingState||null;for(R.value=je,je=e(N,K,be,oe),N=0;N!==be;++N)je[N]=a[N];ne.clippingState=je,this.numIntersection=z?this.numPlanes:0,this.numPlanes+=Z}}}function ku(n){var e={};return{get:function(a){if(e[a]!==void 0)return e[a];switch(a){case"WEBGL_depth_texture":var u=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":u=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":u=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":u=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:u=n.getExtension(a)}return u===null&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),e[a]=u}}}function Gg(n,e,r){function a(C){var S=C.target;C=p.get(S),C.index!==null&&e.remove(C.index);for(var R in C.attributes)e.remove(C.attributes[R]);S.removeEventListener("dispose",a),p.delete(S),(R=y.get(C))&&(e.remove(R),y.delete(C)),r.memory.geometries--}function u(C){var S=[],R=C.index,N=C.attributes.position;if(R!==null){var z=R.array;R=R.version,N=0;for(var Z=z.length;N<Z;N+=3){var K=z[N+0],ne=z[N+1],oe=z[N+2];S.push(K,ne,ne,oe,oe,K)}}else for(z=N.array,R=N.version,N=0,Z=z.length/3-1;N<Z;N+=3)K=N+0,ne=N+1,oe=N+2,S.push(K,ne,ne,oe,oe,K);S=new(65535<Zl(S)?fu:vs)(S,1),S.version=R,e.update(S,34963),(z=y.get(C))&&e.remove(z),y.set(C,S)}var p=new Xi,y=new Xi;return{get:function(S,R){var N=p.get(R);return N||(R.addEventListener("dispose",a),R.isBufferGeometry?N=R:R.isGeometry&&(R._bufferGeometry===void 0&&(R._bufferGeometry=new $r().setFromObject(S)),N=R._bufferGeometry),p.set(R,N),r.memory.geometries++,N)},update:function(S){var R=S.index,N=S.attributes;R!==null&&e.update(R,34963);for(var z in N)e.update(N[z],34962);S=S.morphAttributes;for(z in S){R=S[z],N=0;for(var Z=R.length;N<Z;N++)e.update(R[N],34962)}},getWireframeAttribute:function(S){var R=y.get(S);if(R){var N=S.index;N!==null&&R.version<N.version&&u(S)}else u(S);return y.get(S)}}}function kc(n,e,r,a){var u=a.isWebGL2,p,y,C;this.setMode=function(S){p=S},this.setIndex=function(S){y=S.type,C=S.bytesPerElement},this.render=function(S,R){n.drawElements(p,R,y,S*C),r.update(R,p)},this.renderInstances=function(S,R,N,z){if(z!==0){if(u){S=n;var Z="drawElementsInstanced"}else if(S=e.get("ANGLE_instanced_arrays"),Z="drawElementsInstancedANGLE",S===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}S[Z](p,N,y,R*C,z),r.update(N,p,z)}}}function Tr(n){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(a,u,p){switch(p=p||1,e.calls++,u){case 4:e.triangles+=a/3*p;break;case 1:e.lines+=a/2*p;break;case 3:e.lines+=p*(a-1);break;case 2:e.lines+=p*a;break;case 0:e.points+=p*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u)}}}}function kd(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Jl(n){var e={},r=new Float32Array(8);return{update:function(u,p,y,C){var S=u.morphTargetInfluences,R=S===void 0?0:S.length;if(u=e[p.id],u===void 0){u=[];for(var N=0;N<R;N++)u[N]=[N,0];e[p.id]=u}var z=y.morphTargets&&p.morphAttributes.position;for(y=y.morphNormals&&p.morphAttributes.normal,N=0;N<R;N++){var Z=u[N];Z[1]!==0&&(z&&p.deleteAttribute("morphTarget"+N),y&&p.deleteAttribute("morphNormal"+N))}for(N=0;N<R;N++)Z=u[N],Z[0]=N,Z[1]=S[N];for(u.sort(kd),N=S=0;8>N;N++){if((Z=u[N])&&(R=Z[0],Z=Z[1])){z&&p.setAttribute("morphTarget"+N,z[R]),y&&p.setAttribute("morphNormal"+N,y[R]),r[N]=Z,S+=Z;continue}r[N]=0}p=p.morphTargetsRelative?1:1-S,C.getUniforms().setValue(n,"morphTargetBaseInfluence",p),C.getUniforms().setValue(n,"morphTargetInfluences",r)}}}function Ir(n,e,r,a){var u=new Xi;return{update:function(y){var C=a.render.frame,S=y.geometry,R=e.get(y,S);return u.get(R)!==C&&(S.isGeometry&&R.updateFromObject(y),e.update(R),u.set(R,C)),y.isInstancedMesh&&r.update(y.instanceMatrix,34962),R},dispose:function(){u=new Xi}}}function Hc(n,e,r,a,u,p,y,C,S,R){n=n!==void 0?n:[],Q.call(this,n,e!==void 0?e:301,r,a,u,p,y!==void 0?y:1022,C,S,R),this.flipY=!1}function Hd(n,e,r,a){Q.call(this,null),this.image={data:n||null,width:e||1,height:r||1,depth:a||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function Jh(n,e,r,a){Q.call(this,null),this.image={data:n||null,width:e||1,height:r||1,depth:a||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function _h(n,e,r){var a=n[0];if(0>=a||0<a)return n;var u=e*r,p=Bx[u];if(p===void 0&&(p=new Float32Array(u),Bx[u]=p),e!==0)for(a.toArray(p,0),a=1,u=0;a!==e;++a)u+=r,n[a].toArray(p,u);return p}function cl(n,e){if(n.length!==e.length)return!1;for(var r=0,a=n.length;r<a;r++)if(n[r]!==e[r])return!1;return!0}function Tl(n,e){for(var r=0,a=e.length;r<a;r++)n[r]=e[r]}function pc(n,e){var r=zx[e];r===void 0&&(r=new Int32Array(e),zx[e]=r);for(var a=0;a!==e;++a)r[a]=n.allocateTextureUnit();return r}function s0(n,e){var r=this.cache;r[0]!==e&&(n.uniform1f(this.addr,e),r[0]=e)}function Zp(n,e){var r=this.cache;e.x!==void 0?(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y):cl(r,e)||(n.uniform2fv(this.addr,e),Tl(r,e))}function $a(n,e){var r=this.cache;e.x!==void 0?(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z):e.r!==void 0?(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b):cl(r,e)||(n.uniform3fv(this.addr,e),Tl(r,e))}function ev(n,e){var r=this.cache;e.x!==void 0?(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w):cl(r,e)||(n.uniform4fv(this.addr,e),Tl(r,e))}function tv(n,e){var r=this.cache,a=e.elements;a===void 0?cl(r,e)||(n.uniformMatrix2fv(this.addr,!1,e),Tl(r,e)):cl(r,a)||(Hx.set(a),n.uniformMatrix2fv(this.addr,!1,Hx),Tl(r,a))}function jg(n,e){var r=this.cache,a=e.elements;a===void 0?cl(r,e)||(n.uniformMatrix3fv(this.addr,!1,e),Tl(r,e)):cl(r,a)||(kx.set(a),n.uniformMatrix3fv(this.addr,!1,kx),Tl(r,a))}function ls(n,e){var r=this.cache,a=e.elements;a===void 0?cl(r,e)||(n.uniformMatrix4fv(this.addr,!1,e),Tl(r,e)):cl(r,a)||(Ux.set(a),n.uniformMatrix4fv(this.addr,!1,Ux),Tl(r,a))}function hl(n,e,r){var a=this.cache,u=r.allocateTextureUnit();a[0]!==u&&(n.uniform1i(this.addr,u),a[0]=u),r.safeSetTexture2D(e||Nx,u)}function va(n,e,r){var a=this.cache,u=r.allocateTextureUnit();a[0]!==u&&(n.uniform1i(this.addr,u),a[0]=u),r.setTexture2DArray(e||z2,u)}function Ho(n,e,r){var a=this.cache,u=r.allocateTextureUnit();a[0]!==u&&(n.uniform1i(this.addr,u),a[0]=u),r.setTexture3D(e||U2,u)}function rv(n,e,r){var a=this.cache,u=r.allocateTextureUnit();a[0]!==u&&(n.uniform1i(this.addr,u),a[0]=u),r.safeSetTextureCube(e||Em,u)}function nv(n,e){var r=this.cache;r[0]!==e&&(n.uniform1i(this.addr,e),r[0]=e)}function iv(n,e){var r=this.cache;cl(r,e)||(n.uniform2iv(this.addr,e),Tl(r,e))}function Kp(n,e){var r=this.cache;cl(r,e)||(n.uniform3iv(this.addr,e),Tl(r,e))}function Gc(n,e){var r=this.cache;cl(r,e)||(n.uniform4iv(this.addr,e),Tl(r,e))}function Vg(n,e){var r=this.cache;r[0]!==e&&(n.uniform1ui(this.addr,e),r[0]=e)}function Gd(n){switch(n){case 5126:return s0;case 35664:return Zp;case 35665:return $a;case 35666:return ev;case 35674:return tv;case 35675:return jg;case 35676:return ls;case 5124:case 35670:return nv;case 35667:case 35671:return iv;case 35668:case 35672:return Kp;case 35669:case 35673:return Gc;case 5125:return Vg;case 35678:case 36198:case 36298:case 36306:case 35682:return hl;case 35679:case 36299:case 36307:return Ho;case 35680:case 36300:case 36308:case 36293:return rv;case 36289:case 36303:case 36311:case 36292:return va}}function Wg(n,e){n.uniform1fv(this.addr,e)}function Il(n,e){n.uniform1iv(this.addr,e)}function jd(n,e){n.uniform2iv(this.addr,e)}function Zf(n,e){n.uniform3iv(this.addr,e)}function Hu(n,e){n.uniform4iv(this.addr,e)}function Jp(n,e){e=_h(e,this.size,2),n.uniform2fv(this.addr,e)}function Xg(n,e){e=_h(e,this.size,3),n.uniform3fv(this.addr,e)}function jc(n,e){e=_h(e,this.size,4),n.uniform4fv(this.addr,e)}function Go(n,e){e=_h(e,this.size,4),n.uniformMatrix2fv(this.addr,!1,e)}function Fo(n,e){e=_h(e,this.size,9),n.uniformMatrix3fv(this.addr,!1,e)}function l0(n,e){e=_h(e,this.size,16),n.uniformMatrix4fv(this.addr,!1,e)}function u0(n,e,r){var a=e.length,u=pc(r,a);for(n.uniform1iv(this.addr,u),n=0;n!==a;++n)r.safeSetTexture2D(e[n]||Nx,u[n])}function ov(n,e,r){var a=e.length,u=pc(r,a);for(n.uniform1iv(this.addr,u),n=0;n!==a;++n)r.safeSetTextureCube(e[n]||Em,u[n])}function av(n){switch(n){case 5126:return Wg;case 35664:return Jp;case 35665:return Xg;case 35666:return jc;case 35674:return Go;case 35675:return Fo;case 35676:return l0;case 5124:case 35670:return Il;case 35667:case 35671:return jd;case 35668:case 35672:return Zf;case 35669:case 35673:return Hu;case 35678:case 36198:case 36298:case 36306:case 35682:return u0;case 35680:case 36300:case 36308:case 36293:return ov}}function Vd(n,e,r){this.id=n,this.addr=r,this.cache=[],this.setValue=Gd(e.type)}function Yg(n,e,r){this.id=n,this.addr=r,this.cache=[],this.size=e.size,this.setValue=av(e.type)}function sv(n){this.id=n,this.seq=[],this.map={}}function gc(n,e){this.seq=[],this.map={};for(var r=n.getProgramParameter(e,35718),a=0;a<r;++a){var u=n.getActiveUniform(e,a),p=n.getUniformLocation(e,u.name),y=this,C=u.name,S=C.length;for(ly.lastIndex=0;;){var R=ly.exec(C),N=ly.lastIndex,z=R[1],Z=R[3];if(R[2]==="]"&&(z|=0),Z===void 0||Z==="["&&N+2===S){C=y,u=Z===void 0?new Vd(z,u,p):new Yg(z,u,p),C.seq.push(u),C.map[u.id]=u;break}else Z=y.map[z],Z===void 0&&(Z=new sv(z),z=y,y=Z,z.seq.push(y),z.map[y.id]=y),y=Z}}}function lv(n,e,r){return e=n.createShader(e),n.shaderSource(e,r),n.compileShader(e),e}function uv(n){switch(n){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+n)}}function Da(n,e,r){var a=n.getShaderParameter(e,35713),u=n.getShaderInfoLog(e).trim();if(a&&u==="")return"";for(n=n.getShaderSource(e).split(`
`),e=0;e<n.length;e++)n[e]=e+1+": "+n[e];return n=n.join(`
`),"THREE.WebGLShader: gl.getShaderInfoLog() "+r+`
`+u+n}function ka(n,e){return e=uv(e),"vec4 "+n+"( vec4 value ) { return "+e[0]+"ToLinear"+e[1]+"; }"}function Kf(n,e){return e=uv(e),"vec4 "+n+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function Jf(n,e){switch(e){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="Uncharted2";break;case 4:e="OptimizedCineon";break;case 5:e="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+e)}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function c0(n){var e=[],r;for(r in n){var a=n[r];a!==!1&&e.push("#define "+r+" "+a)}return e.join(`
`)}function qr(n){return n!==""}function ql(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Zg(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function ta(n,e){if(n=So[e],n===void 0)throw Error("Can not resolve #include <"+e+">");return n.replace(_1,ta)}function Kg(n,e,r,a){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),mc(n,e,r,a)}function mc(n,e,r,a){for(n="",e=parseInt(e);e<parseInt(r);e++)n+=a.replace(/\[ i \]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return n}function qf(n){var e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function vc(n){var e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===1?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===2?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===3&&(e="SHADOWMAP_TYPE_VSM"),e}function Wd(n){var e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:e="ENVMAP_TYPE_EQUIREC";break;case 305:e="ENVMAP_TYPE_SPHERE"}return e}function qp(n){var e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case 302:case 304:e="ENVMAP_MODE_REFRACTION"}return e}function qh(n){var e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}function Vc(n,e,r){var a=n.getContext(),u=r.defines,p=r.vertexShader,y=r.fragmentShader,C=vc(r),S=Wd(r),R=qp(r),N=qh(r),z=0<n.gammaFactor?n.gammaFactor:1,Z=r.isWebGL2?"":[r.extensionDerivatives||r.envMapCubeUV||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(qr).join(`
`),K=c0(u),ne=a.createProgram();r.isRawShaderMaterial?(u=[K].filter(qr).join(`
`),0<u.length&&(u+=`
`),C=[Z,K].filter(qr).join(`
`),0<C.length&&(C+=`
`)):(u=[qf(r),"#define SHADER_NAME "+r.shaderName,K,r.instancing?"#define USE_INSTANCING":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+z,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+R:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+C:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(qr).join(`
`),C=[Z,qf(r),"#define SHADER_NAME "+r.shaderName,K,r.alphaTest?"#define ALPHATEST "+r.alphaTest+(r.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+z,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+S:"",r.envMap?"#define "+R:"",r.envMap?"#define "+N:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.sheen?"#define USE_SHEEN":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+C:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==0?"#define TONE_MAPPING":"",r.toneMapping!==0?So.tonemapping_pars_fragment:"",r.toneMapping!==0?Jf("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.matcapEncoding||r.envMapEncoding||r.emissiveMapEncoding||r.lightMapEncoding?So.encodings_pars_fragment:"",r.mapEncoding?ka("mapTexelToLinear",r.mapEncoding):"",r.matcapEncoding?ka("matcapTexelToLinear",r.matcapEncoding):"",r.envMapEncoding?ka("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?ka("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.lightMapEncoding?ka("lightMapTexelToLinear",r.lightMapEncoding):"",r.outputEncoding?Kf("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(qr).join(`
`)),p=p.replace(_1,ta),p=ql(p,r),p=Zg(p,r),y=y.replace(_1,ta),y=ql(y,r),y=Zg(y,r),p=p.replace(Vx,mc).replace(jx,Kg),y=y.replace(Vx,mc).replace(jx,Kg),r.isWebGL2&&!r.isRawShaderMaterial&&(S=!1,R=/^\s*#version\s+300\s+es\s*\n/,r.isShaderMaterial&&p.match(R)!==null&&y.match(R)!==null&&(S=!0,p=p.replace(R,""),y=y.replace(R,"")),u=`#version 300 es

#define attribute in
#define varying out
#define texture2D texture
`+u,C=[`#version 300 es

#define varying in`,S?"":"out highp vec4 pc_fragColor;",S?"":"#define gl_FragColor pc_fragColor",`#define gl_FragDepthEXT gl_FragDepth
#define texture2D texture
#define textureCube texture
#define texture2DProj textureProj
#define texture2DLodEXT textureLod
#define texture2DProjLodEXT textureProjLod
#define textureCubeLodEXT textureLod
#define texture2DGradEXT textureGrad
#define texture2DProjGradEXT textureProjGrad
#define textureCubeGradEXT textureGrad`].join(`
`)+`
`+C),y=C+y,p=lv(a,35633,u+p),y=lv(a,35632,y),a.attachShader(ne,p),a.attachShader(ne,y),r.index0AttributeName!==void 0?a.bindAttribLocation(ne,0,r.index0AttributeName):r.morphTargets===!0&&a.bindAttribLocation(ne,0,"position"),a.linkProgram(ne),n.debug.checkShaderErrors&&(n=a.getProgramInfoLog(ne).trim(),S=a.getShaderInfoLog(p).trim(),R=a.getShaderInfoLog(y).trim(),z=N=!0,a.getProgramParameter(ne,35714)===!1?(N=!1,Z=Da(a,p,"vertex"),K=Da(a,y,"fragment"),console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(ne,35715),"gl.getProgramInfoLog",n,Z,K)):n!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",n):(S===""||R==="")&&(z=!1),z&&(this.diagnostics={runnable:N,programLog:n,vertexShader:{log:S,prefix:u},fragmentShader:{log:R,prefix:C}})),a.deleteShader(p),a.deleteShader(y);var oe;this.getUniforms=function(){return oe===void 0&&(oe=new gc(a,ne)),oe};var be;return this.getAttributes=function(){if(be===void 0){for(var je={},Ie=a.getProgramParameter(ne,35721),ze=0;ze<Ie;ze++){var et=a.getActiveAttrib(ne,ze).name;je[et]=a.getAttribLocation(ne,et)}be=je}return be},this.destroy=function(){a.deleteProgram(ne),this.program=void 0},this.name=r.shaderName,this.id=Gx++,this.cacheKey=e,this.usedTimes=1,this.program=ne,this.vertexShader=p,this.fragmentShader=y,this}function Xd(n,e,r){function a(K){if(K)K.isTexture?ne=K.encoding:K.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ne=K.texture.encoding);else var ne=3e3;return ne}var u=[],p=r.isWebGL2,y=r.logarithmicDepthBuffer,C=r.floatVertexTextures,S=r.precision,R=r.maxVertexUniforms,N=r.vertexTextures,z={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Z="precision isWebGL2 supportsVertexTextures outputEncoding instancing map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(K,ne,oe,be,je,Ie,ze){var et=be.fog;be=K.isMeshStandardMaterial?be.environment:null,be=K.envMap||be;var xt=z[K.type];if(ze.isSkinnedMesh){var gt=ze.skeleton.bones;if(C)gt=1024;else{var We=Math.min(Math.floor((R-20)/4),gt.length);We<gt.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+gt.length+" bones. This GPU supports "+We+"."),gt=0):gt=We}}else gt=0;K.precision!==null&&(S=r.getMaxPrecision(K.precision),S!==K.precision&&console.warn("THREE.WebGLProgram.getParameters:",K.precision,"not supported, using",S,"instead.")),xt?(We=Lp[xt],We={name:K.type,uniforms:Im.clone(We.uniforms),vertexShader:We.vertexShader,fragmentShader:We.fragmentShader}):We={name:K.type,uniforms:K.uniforms,vertexShader:K.vertexShader,fragmentShader:K.fragmentShader},K.onBeforeCompile(We,n);var Rt=n.getRenderTarget();return{isWebGL2:p,shaderID:xt,shaderName:We.name,uniforms:We.uniforms,vertexShader:We.vertexShader,fragmentShader:We.fragmentShader,defines:K.defines,isRawShaderMaterial:K.isRawShaderMaterial,isShaderMaterial:K.isShaderMaterial,precision:S,instancing:ze.isInstancedMesh===!0,supportsVertexTextures:N,outputEncoding:Rt!==null?a(Rt.texture):n.outputEncoding,map:!!K.map,mapEncoding:a(K.map),matcap:!!K.matcap,matcapEncoding:a(K.matcap),envMap:!!be,envMapMode:be&&be.mapping,envMapEncoding:a(be),envMapCubeUV:!!be&&(be.mapping===306||be.mapping===307),lightMap:!!K.lightMap,lightMapEncoding:a(K.lightMap),aoMap:!!K.aoMap,emissiveMap:!!K.emissiveMap,emissiveMapEncoding:a(K.emissiveMap),bumpMap:!!K.bumpMap,normalMap:!!K.normalMap,objectSpaceNormalMap:K.normalMapType===1,tangentSpaceNormalMap:K.normalMapType===0,clearcoatMap:!!K.clearcoatMap,clearcoatRoughnessMap:!!K.clearcoatRoughnessMap,clearcoatNormalMap:!!K.clearcoatNormalMap,displacementMap:!!K.displacementMap,roughnessMap:!!K.roughnessMap,metalnessMap:!!K.metalnessMap,specularMap:!!K.specularMap,alphaMap:!!K.alphaMap,gradientMap:!!K.gradientMap,sheen:!!K.sheen,combine:K.combine,vertexTangents:K.normalMap&&K.vertexTangents,vertexColors:K.vertexColors,vertexUvs:!!K.map||!!K.bumpMap||!!K.normalMap||!!K.specularMap||!!K.alphaMap||!!K.emissiveMap||!!K.roughnessMap||!!K.metalnessMap||!!K.clearcoatMap||!!K.clearcoatRoughnessMap||!!K.clearcoatNormalMap||!!K.displacementMap,uvsVertexOnly:!(K.map||K.bumpMap||K.normalMap||K.specularMap||K.alphaMap||K.emissiveMap||K.roughnessMap||K.metalnessMap||K.clearcoatNormalMap)&&!!K.displacementMap,fog:!!et,useFog:K.fog,fogExp2:et&&et.isFogExp2,flatShading:K.flatShading,sizeAttenuation:K.sizeAttenuation,logarithmicDepthBuffer:y,skinning:K.skinning&&0<gt,maxBones:gt,useVertexTexture:C,morphTargets:K.morphTargets,morphNormals:K.morphNormals,maxMorphTargets:n.maxMorphTargets,maxMorphNormals:n.maxMorphNormals,numDirLights:ne.directional.length,numPointLights:ne.point.length,numSpotLights:ne.spot.length,numRectAreaLights:ne.rectArea.length,numHemiLights:ne.hemi.length,numDirLightShadows:ne.directionalShadowMap.length,numPointLightShadows:ne.pointShadowMap.length,numSpotLightShadows:ne.spotShadowMap.length,numClippingPlanes:je,numClipIntersection:Ie,dithering:K.dithering,shadowMapEnabled:n.shadowMap.enabled&&0<oe.length,shadowMapType:n.shadowMap.type,toneMapping:K.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:K.premultipliedAlpha,alphaTest:K.alphaTest,doubleSided:K.side===2,flipSided:K.side===1,depthPacking:K.depthPacking!==void 0?K.depthPacking:!1,index0AttributeName:K.index0AttributeName,extensionDerivatives:K.extensions&&K.extensions.derivatives,extensionFragDepth:K.extensions&&K.extensions.fragDepth,extensionDrawBuffers:K.extensions&&K.extensions.drawBuffers,extensionShaderTextureLOD:K.extensions&&K.extensions.shaderTextureLOD,rendererExtensionFragDepth:p||e.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:p||e.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:p||e.get("EXT_shader_texture_lod")!==null,onBeforeCompile:K.onBeforeCompile}},this.getProgramCacheKey=function(K){var ne=[];if(K.shaderID?ne.push(K.shaderID):(ne.push(K.fragmentShader),ne.push(K.vertexShader)),K.defines!==void 0)for(var oe in K.defines)ne.push(oe),ne.push(K.defines[oe]);if(K.isRawShaderMaterial===void 0){for(oe=0;oe<Z.length;oe++)ne.push(K[Z[oe]]);ne.push(n.outputEncoding),ne.push(n.gammaFactor)}return ne.push(K.onBeforeCompile.toString()),ne.join()},this.acquireProgram=function(K,ne){for(var oe,be=0,je=u.length;be<je;be++){var Ie=u[be];if(Ie.cacheKey===ne){oe=Ie,++oe.usedTimes;break}}return oe===void 0&&(oe=new Vc(n,ne,K),u.push(oe)),oe},this.releaseProgram=function(K){if(--K.usedTimes==0){var ne=u.indexOf(K);u[ne]=u[u.length-1],u.pop(),K.destroy()}},this.programs=u}function cv(){var n=new Xi;return{get:function(r){var a=n.get(r);return a===void 0&&(a={},n.set(r,a)),a},remove:function(r){n.delete(r)},update:function(r,a,u){n.get(r)[a]=u},dispose:function(){n=new Xi}}}function h0(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function ra(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Mi(){function n(y,C,S,R,N,z){var Z=e[r];return Z===void 0?(Z={id:y.id,object:y,geometry:C,material:S,program:S.program||p,groupOrder:R,renderOrder:y.renderOrder,z:N,group:z},e[r]=Z):(Z.id=y.id,Z.object=y,Z.geometry=C,Z.material=S,Z.program=S.program||p,Z.groupOrder=R,Z.renderOrder=y.renderOrder,Z.z=N,Z.group=z),r++,Z}var e=[],r=0,a=[],u=[],p={id:-1};return{opaque:a,transparent:u,init:function(){r=0,a.length=0,u.length=0},push:function(C,S,R,N,z,Z){C=n(C,S,R,N,z,Z),(R.transparent===!0?u:a).push(C)},unshift:function(C,S,R,N,z,Z){C=n(C,S,R,N,z,Z),(R.transparent===!0?u:a).unshift(C)},finish:function(){for(var C=r,S=e.length;C<S;C++){var R=e[C];if(R.id===null)break;R.id=null,R.object=null,R.geometry=null,R.material=null,R.program=null,R.group=null}},sort:function(C,S){1<a.length&&a.sort(C||h0),1<u.length&&u.sort(S||ra)}}}function Qf(){function n(r){r=r.target,r.removeEventListener("dispose",n),e.delete(r)}var e=new Xi;return{get:function(a,u){var p=e.get(a);if(p===void 0){var y=new Mi;e.set(a,new Xi),e.get(a).set(u,y),a.addEventListener("dispose",n)}else y=p.get(u),y===void 0&&(y=new Mi,p.set(u,y));return y},dispose:function(){e=new Xi}}}function hv(){var n={};return{get:function(r){if(n[r.id]!==void 0)return n[r.id];switch(r.type){case"DirectionalLight":var a={direction:new xe,color:new vt};break;case"SpotLight":a={position:new xe,direction:new xe,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new xe,color:new vt,distance:0,decay:0};break;case"HemisphereLight":a={direction:new xe,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":a={color:new vt,position:new xe,halfWidth:new xe,halfHeight:new xe}}return n[r.id]=a}}}function f0(){var n={};return{get:function(r){if(n[r.id]!==void 0)return n[r.id];switch(r.type){case"DirectionalLight":var a={shadowBias:0,shadowRadius:1,shadowMapSize:new ce};break;case"SpotLight":a={shadowBias:0,shadowRadius:1,shadowMapSize:new ce};break;case"PointLight":a={shadowBias:0,shadowRadius:1,shadowMapSize:new ce,shadowCameraNear:1,shadowCameraFar:1e3}}return n[r.id]=a}}}function Qp(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function fv(){for(var n=new hv,e=f0(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;9>a;a++)r.probe.push(new xe);var u=new xe,p=new Lr,y=new Lr;return{setup:function(S,R,N){for(var z=0,Z=0,K=0,ne=0;9>ne;ne++)r.probe[ne].set(0,0,0);var oe=R=0,be=0,je=0,Ie=0,ze=0,et=0,xt=0;N=N.matrixWorldInverse,S.sort(Qp),ne=0;for(var gt=S.length;ne<gt;ne++){var We=S[ne],Rt=We.color,Pt=We.intensity,pr=We.distance,Rr=We.shadow&&We.shadow.map?We.shadow.map.texture:null;if(We.isAmbientLight)z+=Rt.r*Pt,Z+=Rt.g*Pt,K+=Rt.b*Pt;else if(We.isLightProbe)for(Rr=0;9>Rr;Rr++)r.probe[Rr].addScaledVector(We.sh.coefficients[Rr],Pt);else if(We.isDirectionalLight){var Tt=n.get(We);Tt.color.copy(We.color).multiplyScalar(We.intensity),Tt.direction.setFromMatrixPosition(We.matrixWorld),u.setFromMatrixPosition(We.target.matrixWorld),Tt.direction.sub(u),Tt.direction.transformDirection(N),We.castShadow&&(Pt=We.shadow,Rt=e.get(We),Rt.shadowBias=Pt.bias,Rt.shadowRadius=Pt.radius,Rt.shadowMapSize=Pt.mapSize,r.directionalShadow[R]=Rt,r.directionalShadowMap[R]=Rr,r.directionalShadowMatrix[R]=We.shadow.matrix,ze++),r.directional[R]=Tt,R++}else We.isSpotLight?(Tt=n.get(We),Tt.position.setFromMatrixPosition(We.matrixWorld),Tt.position.applyMatrix4(N),Tt.color.copy(Rt).multiplyScalar(Pt),Tt.distance=pr,Tt.direction.setFromMatrixPosition(We.matrixWorld),u.setFromMatrixPosition(We.target.matrixWorld),Tt.direction.sub(u),Tt.direction.transformDirection(N),Tt.coneCos=Math.cos(We.angle),Tt.penumbraCos=Math.cos(We.angle*(1-We.penumbra)),Tt.decay=We.decay,We.castShadow&&(Pt=We.shadow,Rt=e.get(We),Rt.shadowBias=Pt.bias,Rt.shadowRadius=Pt.radius,Rt.shadowMapSize=Pt.mapSize,r.spotShadow[be]=Rt,r.spotShadowMap[be]=Rr,r.spotShadowMatrix[be]=We.shadow.matrix,xt++),r.spot[be]=Tt,be++):We.isRectAreaLight?(Tt=n.get(We),Tt.color.copy(Rt).multiplyScalar(Pt),Tt.position.setFromMatrixPosition(We.matrixWorld),Tt.position.applyMatrix4(N),y.identity(),p.copy(We.matrixWorld),p.premultiply(N),y.extractRotation(p),Tt.halfWidth.set(.5*We.width,0,0),Tt.halfHeight.set(0,.5*We.height,0),Tt.halfWidth.applyMatrix4(y),Tt.halfHeight.applyMatrix4(y),r.rectArea[je]=Tt,je++):We.isPointLight?(Tt=n.get(We),Tt.position.setFromMatrixPosition(We.matrixWorld),Tt.position.applyMatrix4(N),Tt.color.copy(We.color).multiplyScalar(We.intensity),Tt.distance=We.distance,Tt.decay=We.decay,We.castShadow&&(Pt=We.shadow,Rt=e.get(We),Rt.shadowBias=Pt.bias,Rt.shadowRadius=Pt.radius,Rt.shadowMapSize=Pt.mapSize,Rt.shadowCameraNear=Pt.camera.near,Rt.shadowCameraFar=Pt.camera.far,r.pointShadow[oe]=Rt,r.pointShadowMap[oe]=Rr,r.pointShadowMatrix[oe]=We.shadow.matrix,et++),r.point[oe]=Tt,oe++):We.isHemisphereLight&&(Tt=n.get(We),Tt.direction.setFromMatrixPosition(We.matrixWorld),Tt.direction.transformDirection(N),Tt.direction.normalize(),Tt.skyColor.copy(We.color).multiplyScalar(Pt),Tt.groundColor.copy(We.groundColor).multiplyScalar(Pt),r.hemi[Ie]=Tt,Ie++)}r.ambient[0]=z,r.ambient[1]=Z,r.ambient[2]=K,S=r.hash,(S.directionalLength!==R||S.pointLength!==oe||S.spotLength!==be||S.rectAreaLength!==je||S.hemiLength!==Ie||S.numDirectionalShadows!==ze||S.numPointShadows!==et||S.numSpotShadows!==xt)&&(r.directional.length=R,r.spot.length=be,r.rectArea.length=je,r.point.length=oe,r.hemi.length=Ie,r.directionalShadow.length=ze,r.directionalShadowMap.length=ze,r.pointShadow.length=et,r.pointShadowMap.length=et,r.spotShadow.length=xt,r.spotShadowMap.length=xt,r.directionalShadowMatrix.length=ze,r.pointShadowMatrix.length=et,r.spotShadowMatrix.length=xt,S.directionalLength=R,S.pointLength=oe,S.spotLength=be,S.rectAreaLength=je,S.hemiLength=Ie,S.numDirectionalShadows=ze,S.numPointShadows=et,S.numSpotShadows=xt,r.version=k2++)},state:r}}function Yd(){var n=new fv,e=[],r=[];return{init:function(){e.length=0,r.length=0},state:{lightsArray:e,shadowsArray:r,lights:n},setupLights:function(u){n.setup(e,r,u)},pushLight:function(u){e.push(u)},pushShadow:function(u){r.push(u)}}}function d0(){function n(r){r=r.target,r.removeEventListener("dispose",n),e.delete(r)}var e=new Xi;return{get:function(a,u){if(e.has(a)===!1){var p=new Yd;e.set(a,new Xi),e.get(a).set(u,p),a.addEventListener("dispose",n)}else e.get(a).has(u)===!1?(p=new Yd,e.get(a).set(u,p)):p=e.get(a).get(u);return p},dispose:function(){e=new Xi}}}function Qh(n){Nr.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(n)}function du(n){Nr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new xe,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(n)}function $f(n,e,r){function a(et,xt,gt){gt=et<<0|xt<<1|gt<<2;var We=z[gt];return We===void 0&&(We=new Qh({depthPacking:3201,morphTargets:et,skinning:xt}),z[gt]=We),We}function u(et,xt,gt){gt=et<<0|xt<<1|gt<<2;var We=Z[gt];return We===void 0&&(We=new du({morphTargets:et,skinning:xt}),Z[gt]=We),We}function p(et,xt,gt,We,Rt,Pt,pr){var Rr=a,Tt=et.customDepthMaterial;return We.isPointLight===!0&&(Rr=u,Tt=et.customDistanceMaterial),Tt===void 0?(Tt=!1,gt.morphTargets===!0&&(Tt=xt.morphAttributes&&xt.morphAttributes.position&&0<xt.morphAttributes.position.length),xt=!1,et.isSkinnedMesh===!0&&(gt.skinning===!0?xt=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",et)),et=Rr(Tt,xt,et.isInstancedMesh===!0)):et=Tt,n.localClippingEnabled&&gt.clipShadows===!0&&gt.clippingPlanes.length!==0&&(Tt=et.uuid,Rr=gt.uuid,xt=K[Tt],xt===void 0&&(xt={},K[Tt]=xt),Tt=xt[Rr],Tt===void 0&&(Tt=et.clone(),xt[Rr]=Tt),et=Tt),et.visible=gt.visible,et.wireframe=gt.wireframe,et.side=pr===3?gt.shadowSide!==null?gt.shadowSide:gt.side:gt.shadowSide!==null?gt.shadowSide:ne[gt.side],et.clipShadows=gt.clipShadows,et.clippingPlanes=gt.clippingPlanes,et.clipIntersection=gt.clipIntersection,et.wireframeLinewidth=gt.wireframeLinewidth,et.linewidth=gt.linewidth,We.isPointLight===!0&&et.isMeshDistanceMaterial===!0&&(et.referencePosition.setFromMatrixPosition(We.matrixWorld),et.nearDistance=Rt,et.farDistance=Pt),et}function y(et,xt,gt,We,Rt){if(et.visible!==!1){if(et.layers.test(xt.layers)&&(et.isMesh||et.isLine||et.isPoints)&&(et.castShadow||et.receiveShadow&&Rt===3)&&(!et.frustumCulled||C.intersectsObject(et))){et.modelViewMatrix.multiplyMatrices(gt.matrixWorldInverse,et.matrixWorld);var Pt=e.update(et),pr=et.material;if(Array.isArray(pr))for(var Rr=Pt.groups,Tt=0,gn=Rr.length;Tt<gn;Tt++){var tr=Rr[Tt],bn=pr[tr.materialIndex];bn&&bn.visible&&(bn=p(et,Pt,bn,We,gt.near,gt.far,Rt),n.renderBufferDirect(gt,null,Pt,bn,et,tr))}else pr.visible&&(bn=p(et,Pt,pr,We,gt.near,gt.far,Rt),n.renderBufferDirect(gt,null,Pt,bn,et,null))}for(et=et.children,Pt=0,pr=et.length;Pt<pr;Pt++)y(et[Pt],xt,gt,We,Rt)}}var C=new Ia,S=new ce,R=new ce,N=new Oe,z=[],Z=[],K={},ne={0:1,1:0,2:2},oe=new _i({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new ce},radius:{value:4}},vertexShader:`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`}),be=oe.clone();be.defines.HORIZONAL_PASS=1;var je=new $r;je.setAttribute("position",new Jr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Ie=new oa(je,oe),ze=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(et,xt,gt){if(ze.enabled!==!1&&(ze.autoUpdate!==!1||ze.needsUpdate!==!1)&&et.length!==0){var We=n.getRenderTarget(),Rt=n.getActiveCubeFace(),Pt=n.getActiveMipmapLevel(),pr=n.state;pr.setBlending(0),pr.buffers.color.setClear(1,1,1,1),pr.buffers.depth.setTest(!0),pr.setScissorTest(!1);for(var Rr=0,Tt=et.length;Rr<Tt;Rr++){var gn=et[Rr],tr=gn.shadow;if(tr===void 0)console.warn("THREE.WebGLShadowMap:",gn,"has no shadow.");else{S.copy(tr.mapSize);var bn=tr.getFrameExtents();S.multiply(bn),R.copy(tr.mapSize),(S.x>r||S.y>r)&&(S.x>r&&(R.x=Math.floor(r/bn.x),S.x=R.x*bn.x,tr.mapSize.x=R.x),S.y>r&&(R.y=Math.floor(r/bn.y),S.y=R.y*bn.y,tr.mapSize.y=R.y)),tr.map!==null||tr.isPointLightShadow||this.type!==3||(bn={minFilter:1006,magFilter:1006,format:1023},tr.map=new pt(S.x,S.y,bn),tr.map.texture.name=gn.name+".shadowMap",tr.mapPass=new pt(S.x,S.y,bn),tr.camera.updateProjectionMatrix()),tr.map===null&&(bn={minFilter:1003,magFilter:1003,format:1023},tr.map=new pt(S.x,S.y,bn),tr.map.texture.name=gn.name+".shadowMap",tr.camera.updateProjectionMatrix()),n.setRenderTarget(tr.map),n.clear(),bn=tr.getViewportCount();for(var ai=0;ai<bn;ai++){var wn=tr.getViewport(ai);N.set(R.x*wn.x,R.y*wn.y,R.x*wn.z,R.y*wn.w),pr.viewport(N),tr.updateMatrices(gn,ai),C=tr.getFrustum(),y(xt,gt,tr.camera,gn,this.type)}tr.isPointLightShadow||this.type!==3||(gn=tr,tr=gt,bn=e.update(Ie),oe.uniforms.shadow_pass.value=gn.map.texture,oe.uniforms.resolution.value=gn.mapSize,oe.uniforms.radius.value=gn.radius,n.setRenderTarget(gn.mapPass),n.clear(),n.renderBufferDirect(tr,null,bn,oe,Ie,null),be.uniforms.shadow_pass.value=gn.mapPass.texture,be.uniforms.resolution.value=gn.mapSize,be.uniforms.radius.value=gn.radius,n.setRenderTarget(gn.map),n.clear(),n.renderBufferDirect(tr,null,bn,be,Ie,null))}}ze.needsUpdate=!1,n.setRenderTarget(We,Rt,Pt)}}}function $h(n,e,r){function a(Xe,ot,lr){var Ft=new Uint8Array(4),Jt=n.createTexture();for(n.bindTexture(Xe,Jt),n.texParameteri(Xe,10241,9728),n.texParameteri(Xe,10240,9728),Xe=0;Xe<lr;Xe++)n.texImage2D(ot+Xe,0,6408,1,1,0,6408,5121,Ft);return Jt}function u(Xe,ot){Ie[Xe]=1,ze[Xe]===0&&(n.enableVertexAttribArray(Xe),ze[Xe]=1),et[Xe]!==ot&&((ne?n:e.get("ANGLE_instanced_arrays"))[ne?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Xe,ot),et[Xe]=ot)}function p(Xe){xt[Xe]!==!0&&(n.enable(Xe),xt[Xe]=!0)}function y(Xe){xt[Xe]!==!1&&(n.disable(Xe),xt[Xe]=!1)}function C(Xe,ot,lr,Ft,Jt,Ht,mn,Zn){if(Xe===0)We&&(y(3042),We=!1);else if(We||(p(3042),We=!0),Xe!==5){if(Xe!==Rt||Zn!==bn){if((Pt!==100||Tt!==100)&&(n.blendEquation(32774),Tt=Pt=100),Zn)switch(Xe){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,0,769,771);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xe)}else switch(Xe){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFunc(0,769);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xe)}tr=gn=Rr=pr=null,Rt=Xe,bn=Zn}}else Jt=Jt||ot,Ht=Ht||lr,mn=mn||Ft,(ot!==Pt||Jt!==Tt)&&(n.blendEquationSeparate(at[ot],at[Jt]),Pt=ot,Tt=Jt),(lr!==pr||Ft!==Rr||Ht!==gn||mn!==tr)&&(n.blendFuncSeparate(It[lr],It[Ft],It[Ht],It[mn]),pr=lr,Rr=Ft,gn=Ht,tr=mn),Rt=Xe,bn=null}function S(Xe){ai!==Xe&&(Xe?n.frontFace(2304):n.frontFace(2305),ai=Xe)}function R(Xe){Xe!==0?(p(2884),Xe!==wn&&(Xe===1?n.cullFace(1029):Xe===2?n.cullFace(1028):n.cullFace(1032))):y(2884),wn=Xe}function N(Xe,ot,lr){Xe?(p(32823),(On!==ot||qe!==lr)&&(n.polygonOffset(ot,lr),On=ot,qe=lr)):y(32823)}function z(Xe){Xe===void 0&&(Xe=33984+Le-1),Je!==Xe&&(n.activeTexture(Xe),Je=Xe)}var Z,K,ne=r.isWebGL2,oe=new function(){var Xe=!1,ot=new Oe,lr=null,Ft=new Oe(0,0,0,0);return{setMask:function(Ht){lr===Ht||Xe||(n.colorMask(Ht,Ht,Ht,Ht),lr=Ht)},setLocked:function(Ht){Xe=Ht},setClear:function(Ht,mn,Zn,nr,Ln){Ln===!0&&(Ht*=nr,mn*=nr,Zn*=nr),ot.set(Ht,mn,Zn,nr),Ft.equals(ot)===!1&&(n.clearColor(Ht,mn,Zn,nr),Ft.copy(ot))},reset:function(){Xe=!1,lr=null,Ft.set(-1,0,0,0)}}},be=new function(){var Xe=!1,ot=null,lr=null,Ft=null;return{setTest:function(Ht){Ht?p(2929):y(2929)},setMask:function(Ht){ot===Ht||Xe||(n.depthMask(Ht),ot=Ht)},setFunc:function(Ht){if(lr!==Ht){if(Ht)switch(Ht){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);lr=Ht}},setLocked:function(Ht){Xe=Ht},setClear:function(Ht){Ft!==Ht&&(n.clearDepth(Ht),Ft=Ht)},reset:function(){Xe=!1,Ft=lr=ot=null}}},je=new function(){var Xe=!1,ot=null,lr=null,Ft=null,Jt=null,Ht=null,mn=null,Zn=null,nr=null;return{setTest:function(Sn){Xe||(Sn?p(2960):y(2960))},setMask:function(Sn){ot===Sn||Xe||(n.stencilMask(Sn),ot=Sn)},setFunc:function(Sn,Kr,Ca){(lr!==Sn||Ft!==Kr||Jt!==Ca)&&(n.stencilFunc(Sn,Kr,Ca),lr=Sn,Ft=Kr,Jt=Ca)},setOp:function(Sn,Kr,Ca){(Ht!==Sn||mn!==Kr||Zn!==Ca)&&(n.stencilOp(Sn,Kr,Ca),Ht=Sn,mn=Kr,Zn=Ca)},setLocked:function(Sn){Xe=Sn},setClear:function(Sn){nr!==Sn&&(n.clearStencil(Sn),nr=Sn)},reset:function(){Xe=!1,nr=Zn=mn=Ht=Jt=Ft=lr=ot=null}}};r=n.getParameter(34921);var Ie=new Uint8Array(r),ze=new Uint8Array(r),et=new Uint8Array(r),xt={},gt=null,We=null,Rt=null,Pt=null,pr=null,Rr=null,Tt=null,gn=null,tr=null,bn=!1,ai=null,wn=null,Yo=null,On=null,qe=null,Le=n.getParameter(35661),Me=!1;r=0,r=n.getParameter(7938),r.indexOf("WebGL")!==-1?(r=parseFloat(/^WebGL ([0-9])/.exec(r)[1]),Me=1<=r):r.indexOf("OpenGL ES")!==-1&&(r=parseFloat(/^OpenGL ES ([0-9])/.exec(r)[1]),Me=2<=r);var Je=null,de={},Te=new Oe,Fe=new Oe,Ve={};Ve[3553]=a(3553,3553,1),Ve[34067]=a(34067,34069,6),oe.setClear(0,0,0,1),be.setClear(1),je.setClear(0),p(2929),be.setFunc(3),S(!1),R(1),p(2884),C(0);var at=(Z={},oi(Z,100,32774),oi(Z,101,32778),oi(Z,102,32779),Z);ne?(at[103]=32775,at[104]=32776):(Z=e.get("EXT_blend_minmax"),Z!==null&&(at[103]=Z.MIN_EXT,at[104]=Z.MAX_EXT));var It=(K={},oi(K,200,0),oi(K,201,1),oi(K,202,768),oi(K,204,770),oi(K,210,776),oi(K,208,774),oi(K,206,772),oi(K,203,769),oi(K,205,771),oi(K,209,775),oi(K,207,773),K);return{buffers:{color:oe,depth:be,stencil:je},initAttributes:function(){for(var ot=0,lr=Ie.length;ot<lr;ot++)Ie[ot]=0},enableAttribute:function(ot){u(ot,0)},enableAttributeAndDivisor:u,disableUnusedAttributes:function(){for(var ot=0,lr=ze.length;ot!==lr;++ot)ze[ot]!==Ie[ot]&&(n.disableVertexAttribArray(ot),ze[ot]=0)},vertexAttribPointer:function(ot,lr,Ft,Jt,Ht,mn){ne!==!0||Ft!==5124&&Ft!==5125?n.vertexAttribPointer(ot,lr,Ft,Jt,Ht,mn):n.vertexAttribIPointer(ot,lr,Ft,Jt,Ht,mn)},enable:p,disable:y,useProgram:function(ot){return gt!==ot?(n.useProgram(ot),gt=ot,!0):!1},setBlending:C,setMaterial:function(ot,lr){ot.side===2?y(2884):p(2884);var Ft=ot.side===1;lr&&(Ft=!Ft),S(Ft),ot.blending===1&&ot.transparent===!1?C(0):C(ot.blending,ot.blendEquation,ot.blendSrc,ot.blendDst,ot.blendEquationAlpha,ot.blendSrcAlpha,ot.blendDstAlpha,ot.premultipliedAlpha),be.setFunc(ot.depthFunc),be.setTest(ot.depthTest),be.setMask(ot.depthWrite),oe.setMask(ot.colorWrite),lr=ot.stencilWrite,je.setTest(lr),lr&&(je.setMask(ot.stencilWriteMask),je.setFunc(ot.stencilFunc,ot.stencilRef,ot.stencilFuncMask),je.setOp(ot.stencilFail,ot.stencilZFail,ot.stencilZPass)),N(ot.polygonOffset,ot.polygonOffsetFactor,ot.polygonOffsetUnits)},setFlipSided:S,setCullFace:R,setLineWidth:function(ot){ot!==Yo&&(Me&&n.lineWidth(ot),Yo=ot)},setPolygonOffset:N,setScissorTest:function(ot){ot?p(3089):y(3089)},activeTexture:z,bindTexture:function(ot,lr){Je===null&&z();var Ft=de[Je];Ft===void 0&&(Ft={type:void 0,texture:void 0},de[Je]=Ft),(Ft.type!==ot||Ft.texture!==lr)&&(n.bindTexture(ot,lr||Ve[ot]),Ft.type=ot,Ft.texture=lr)},unbindTexture:function(){var ot=de[Je];ot!==void 0&&ot.type!==void 0&&(n.bindTexture(ot.type,null),ot.type=void 0,ot.texture=void 0)},compressedTexImage2D:function(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},texImage2D:function(){try{n.texImage2D.apply(n,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},texImage3D:function(){try{n.texImage3D.apply(n,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},scissor:function(ot){Te.equals(ot)===!1&&(n.scissor(ot.x,ot.y,ot.z,ot.w),Te.copy(ot))},viewport:function(ot){Fe.equals(ot)===!1&&(n.viewport(ot.x,ot.y,ot.z,ot.w),Fe.copy(ot))},reset:function(){for(var ot=0;ot<ze.length;ot++)ze[ot]===1&&(n.disableVertexAttribArray(ot),ze[ot]=0);xt={},Je=null,de={},wn=ai=Rt=gt=null,oe.reset(),be.reset(),je.reset()}}}function ed(n,e,r,a,u,p,y){function C(de,Te){return Yo?new OffscreenCanvas(de,Te):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function S(de,Te,Fe,Ve){var at=1;if((de.width>Ve||de.height>Ve)&&(at=Ve/Math.max(de.width,de.height)),1>at||Te===!0){if(typeof HTMLImageElement!="undefined"&&de instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&de instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&de instanceof ImageBitmap)return Ve=Te?Bi.floorPowerOfTwo:Math.floor,Te=Ve(at*de.width),at=Ve(at*de.height),wn===void 0&&(wn=C(Te,at)),Fe=Fe?C(Te,at):wn,Fe.width=Te,Fe.height=at,Fe.getContext("2d").drawImage(de,0,0,Te,at),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+de.width+"x"+de.height+") to ("+Te+"x"+at+")."),Fe;"data"in de&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+de.width+"x"+de.height+").")}return de}function R(de){return Bi.isPowerOfTwo(de.width)&&Bi.isPowerOfTwo(de.height)}function N(de,Te){return de.generateMipmaps&&Te&&de.minFilter!==1003&&de.minFilter!==1006}function z(de,Te,Fe,Ve){n.generateMipmap(de),a.get(Te).__maxMipLevel=Math.log(Math.max(Fe,Ve))*Math.LOG2E}function Z(de,Te,Fe){if(Rr===!1)return Te;if(de!==null){if(n[de]!==void 0)return n[de];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+de+"'")}return de=Te,Te===6403&&(Fe===5126&&(de=33326),Fe===5131&&(de=33325),Fe===5121&&(de=33321)),Te===6407&&(Fe===5126&&(de=34837),Fe===5131&&(de=34843),Fe===5121&&(de=32849)),Te===6408&&(Fe===5126&&(de=34836),Fe===5131&&(de=34842),Fe===5121&&(de=32856)),de!==33325&&de!==33326&&de!==34842&&de!==34836||e.get("EXT_color_buffer_float"),de}function K(de){return de===1003||de===1004||de===1005?9728:9729}function ne(de){de=de.target,de.removeEventListener("dispose",ne);var Te=a.get(de);Te.__webglInit!==void 0&&(n.deleteTexture(Te.__webglTexture),a.remove(de)),de.isVideoTexture&&ai.delete(de),y.memory.textures--}function oe(de){de=de.target,de.removeEventListener("dispose",oe);var Te=a.get(de),Fe=a.get(de.texture);if(de){if(Fe.__webglTexture!==void 0&&n.deleteTexture(Fe.__webglTexture),de.depthTexture&&de.depthTexture.dispose(),de.isWebGLCubeRenderTarget)for(Fe=0;6>Fe;Fe++)n.deleteFramebuffer(Te.__webglFramebuffer[Fe]),Te.__webglDepthbuffer&&n.deleteRenderbuffer(Te.__webglDepthbuffer[Fe]);else n.deleteFramebuffer(Te.__webglFramebuffer),Te.__webglDepthbuffer&&n.deleteRenderbuffer(Te.__webglDepthbuffer),Te.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Te.__webglMultisampledFramebuffer),Te.__webglColorRenderbuffer&&n.deleteRenderbuffer(Te.__webglColorRenderbuffer),Te.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Te.__webglDepthRenderbuffer);a.remove(de.texture),a.remove(de)}y.memory.textures--}function be(de,Te){var Fe=a.get(de);if(de.isVideoTexture){var Ve=y.render.frame;ai.get(de)!==Ve&&(ai.set(de,Ve),de.update())}if(0<de.version&&Fe.__version!==de.version)if(Ve=de.image,Ve===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Ve.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{xt(Fe,de,Te);return}r.activeTexture(33984+Te),r.bindTexture(3553,Fe.__webglTexture)}function je(de,Te){if(de.image.length===6){var Fe=a.get(de);if(0<de.version&&Fe.__version!==de.version){et(Fe,de),r.activeTexture(33984+Te),r.bindTexture(34067,Fe.__webglTexture),n.pixelStorei(37440,de.flipY);var Ve=de&&(de.isCompressedTexture||de.image[0].isCompressedTexture);Te=de.image[0]&&de.image[0].isDataTexture;for(var at=[],It=0;6>It;It++)at[It]=Ve||Te?Te?de.image[It].image:de.image[It]:S(de.image[It],!1,!0,gn);var Xe=at[0],ot=R(Xe)||Rr,lr=p.convert(de.format),Ft=p.convert(de.type),Jt=Z(de.internalFormat,lr,Ft);if(ze(34067,de,ot),Ve){for(It=0;6>It;It++){var Ht=at[It].mipmaps;for(Ve=0;Ve<Ht.length;Ve++){var mn=Ht[Ve];de.format!==1023&&de.format!==1022?lr!==null?r.compressedTexImage2D(34069+It,Ve,Jt,mn.width,mn.height,0,mn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+It,Ve,Jt,mn.width,mn.height,0,lr,Ft,mn.data)}}Fe.__maxMipLevel=Ht.length-1}else{for(Ht=de.mipmaps,It=0;6>It;It++)if(Te)for(r.texImage2D(34069+It,0,Jt,at[It].width,at[It].height,0,lr,Ft,at[It].data),Ve=0;Ve<Ht.length;Ve++)mn=Ht[Ve],mn=mn.image[It].image,r.texImage2D(34069+It,Ve+1,Jt,mn.width,mn.height,0,lr,Ft,mn.data);else for(r.texImage2D(34069+It,0,Jt,lr,Ft,at[It]),Ve=0;Ve<Ht.length;Ve++)mn=Ht[Ve],r.texImage2D(34069+It,Ve+1,Jt,lr,Ft,mn.image[It]);Fe.__maxMipLevel=Ht.length}N(de,ot)&&z(34067,de,Xe.width,Xe.height),Fe.__version=de.version,de.onUpdate&&de.onUpdate(de)}else r.activeTexture(33984+Te),r.bindTexture(34067,Fe.__webglTexture)}}function Ie(de,Te){r.activeTexture(33984+Te),r.bindTexture(34067,a.get(de).__webglTexture)}function ze(de,Te,Fe){Fe?(n.texParameteri(de,10242,qe[Te.wrapS]),n.texParameteri(de,10243,qe[Te.wrapT]),de!==32879&&de!==35866||n.texParameteri(de,32882,qe[Te.wrapR]),n.texParameteri(de,10240,Le[Te.magFilter]),n.texParameteri(de,10241,Le[Te.minFilter])):(n.texParameteri(de,10242,33071),n.texParameteri(de,10243,33071),de!==32879&&de!==35866||n.texParameteri(de,32882,33071),Te.wrapS===1001&&Te.wrapT===1001||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(de,10240,K(Te.magFilter)),n.texParameteri(de,10241,K(Te.minFilter)),Te.minFilter!==1003&&Te.minFilter!==1006&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(Fe=e.get("EXT_texture_filter_anisotropic"))||Te.type===1015&&e.get("OES_texture_float_linear")===null||Te.type===1016&&(Rr||e.get("OES_texture_half_float_linear"))===null||!(1<Te.anisotropy||a.get(Te).__currentAnisotropy)||(n.texParameterf(de,Fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Te.anisotropy,u.getMaxAnisotropy())),a.get(Te).__currentAnisotropy=Te.anisotropy)}function et(de,Te){de.__webglInit===void 0&&(de.__webglInit=!0,Te.addEventListener("dispose",ne),de.__webglTexture=n.createTexture(),y.memory.textures++)}function xt(de,Te,Fe){var Ve=3553;Te.isDataTexture2DArray&&(Ve=35866),Te.isDataTexture3D&&(Ve=32879),et(de,Te),r.activeTexture(33984+Fe),r.bindTexture(Ve,de.__webglTexture),n.pixelStorei(37440,Te.flipY),n.pixelStorei(37441,Te.premultiplyAlpha),n.pixelStorei(3317,Te.unpackAlignment),Fe=Rr?!1:Te.wrapS!==1001||Te.wrapT!==1001||Te.minFilter!==1003&&Te.minFilter!==1006,Fe=Fe&&R(Te.image)===!1,Fe=S(Te.image,Fe,!1,tr);var at=R(Fe)||Rr,It=p.convert(Te.format),Xe=p.convert(Te.type),ot=Z(Te.internalFormat,It,Xe);ze(Ve,Te,at);var lr=Te.mipmaps;if(Te.isDepthTexture)ot=6402,Rr?ot=Te.type===1015?36012:Te.type===1014?33190:Te.type===1020?35056:33189:Te.type===1015&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Te.format===1026&&ot===6402&&Te.type!==1012&&Te.type!==1014&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Te.type=1012,Xe=p.convert(Te.type)),Te.format===1027&&ot===6402&&(ot=34041,Te.type!==1020&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Te.type=1020,Xe=p.convert(Te.type))),r.texImage2D(3553,0,ot,Fe.width,Fe.height,0,It,Xe,null);else if(Te.isDataTexture)if(0<lr.length&&at){for(var Ft=0,Jt=lr.length;Ft<Jt;Ft++){var Ht=lr[Ft];r.texImage2D(3553,Ft,ot,Ht.width,Ht.height,0,It,Xe,Ht.data)}Te.generateMipmaps=!1,de.__maxMipLevel=lr.length-1}else r.texImage2D(3553,0,ot,Fe.width,Fe.height,0,It,Xe,Fe.data),de.__maxMipLevel=0;else if(Te.isCompressedTexture){for(Ft=0,Jt=lr.length;Ft<Jt;Ft++)Ht=lr[Ft],Te.format!==1023&&Te.format!==1022?It!==null?r.compressedTexImage2D(3553,Ft,ot,Ht.width,Ht.height,0,Ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,Ft,ot,Ht.width,Ht.height,0,It,Xe,Ht.data);de.__maxMipLevel=lr.length-1}else if(Te.isDataTexture2DArray)r.texImage3D(35866,0,ot,Fe.width,Fe.height,Fe.depth,0,It,Xe,Fe.data),de.__maxMipLevel=0;else if(Te.isDataTexture3D)r.texImage3D(32879,0,ot,Fe.width,Fe.height,Fe.depth,0,It,Xe,Fe.data),de.__maxMipLevel=0;else if(0<lr.length&&at){for(Ft=0,Jt=lr.length;Ft<Jt;Ft++)Ht=lr[Ft],r.texImage2D(3553,Ft,ot,It,Xe,Ht);Te.generateMipmaps=!1,de.__maxMipLevel=lr.length-1}else r.texImage2D(3553,0,ot,It,Xe,Fe),de.__maxMipLevel=0;N(Te,at)&&z(Ve,Te,Fe.width,Fe.height),de.__version=Te.version,Te.onUpdate&&Te.onUpdate(Te)}function gt(de,Te,Fe,Ve){var at=p.convert(Te.texture.format),It=p.convert(Te.texture.type),Xe=Z(Te.texture.internalFormat,at,It);r.texImage2D(Ve,0,Xe,Te.width,Te.height,0,at,It,null),n.bindFramebuffer(36160,de),n.framebufferTexture2D(36160,Fe,Ve,a.get(Te.texture).__webglTexture,0),n.bindFramebuffer(36160,null)}function We(de,Te,Fe){if(n.bindRenderbuffer(36161,de),Te.depthBuffer&&!Te.stencilBuffer){var Ve=33189;Fe?((Fe=Te.depthTexture)&&Fe.isDepthTexture&&(Fe.type===1015?Ve=36012:Fe.type===1014&&(Ve=33190)),Fe=Rt(Te),n.renderbufferStorageMultisample(36161,Fe,Ve,Te.width,Te.height)):n.renderbufferStorage(36161,Ve,Te.width,Te.height),n.framebufferRenderbuffer(36160,36096,36161,de)}else Te.depthBuffer&&Te.stencilBuffer?(Fe?(Fe=Rt(Te),n.renderbufferStorageMultisample(36161,Fe,35056,Te.width,Te.height)):n.renderbufferStorage(36161,34041,Te.width,Te.height),n.framebufferRenderbuffer(36160,33306,36161,de)):(de=p.convert(Te.texture.format),Ve=p.convert(Te.texture.type),Ve=Z(Te.texture.internalFormat,de,Ve),Fe?(Fe=Rt(Te),n.renderbufferStorageMultisample(36161,Fe,Ve,Te.width,Te.height)):n.renderbufferStorage(36161,Ve,Te.width,Te.height));n.bindRenderbuffer(36161,null)}function Rt(de){return Rr&&de.isWebGLMultisampleRenderTarget?Math.min(bn,de.samples):0}var Pt,pr,Rr=u.isWebGL2,Tt=u.maxTextures,gn=u.maxCubemapSize,tr=u.maxTextureSize,bn=u.maxSamples,ai=new Xi,wn,Yo=!1;try{Yo=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(de){}var On=0,qe=(Pt={},oi(Pt,1e3,10497),oi(Pt,1001,33071),oi(Pt,1002,33648),Pt),Le=(pr={},oi(pr,1003,9728),oi(pr,1004,9984),oi(pr,1005,9986),oi(pr,1006,9729),oi(pr,1007,9985),oi(pr,1008,9987),pr),Me=!1,Je=!1;this.allocateTextureUnit=function(){var de=On;return de>=Tt&&console.warn("THREE.WebGLTextures: Trying to use "+de+" texture units while this GPU supports only "+Tt),On+=1,de},this.resetTextureUnits=function(){On=0},this.setTexture2D=be,this.setTexture2DArray=function(de,Te){var Fe=a.get(de);0<de.version&&Fe.__version!==de.version?xt(Fe,de,Te):(r.activeTexture(33984+Te),r.bindTexture(35866,Fe.__webglTexture))},this.setTexture3D=function(de,Te){var Fe=a.get(de);0<de.version&&Fe.__version!==de.version?xt(Fe,de,Te):(r.activeTexture(33984+Te),r.bindTexture(32879,Fe.__webglTexture))},this.setTextureCube=je,this.setTextureCubeDynamic=Ie,this.setupRenderTarget=function(de){var Te=a.get(de),Fe=a.get(de.texture);de.addEventListener("dispose",oe),Fe.__webglTexture=n.createTexture(),y.memory.textures++;var Ve=de.isWebGLCubeRenderTarget===!0,at=de.isWebGLMultisampleRenderTarget===!0,It=R(de)||Rr;if(!Rr||de.texture.format!==1022||de.texture.type!==1015&&de.texture.type!==1016||(de.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Ve)for(Te.__webglFramebuffer=[],at=0;6>at;at++)Te.__webglFramebuffer[at]=n.createFramebuffer();else if(Te.__webglFramebuffer=n.createFramebuffer(),at)if(Rr){Te.__webglMultisampledFramebuffer=n.createFramebuffer(),Te.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,Te.__webglColorRenderbuffer),at=p.convert(de.texture.format);var Xe=p.convert(de.texture.type);at=Z(de.texture.internalFormat,at,Xe),Xe=Rt(de),n.renderbufferStorageMultisample(36161,Xe,at,de.width,de.height),n.bindFramebuffer(36160,Te.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,Te.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),de.depthBuffer&&(Te.__webglDepthRenderbuffer=n.createRenderbuffer(),We(Te.__webglDepthRenderbuffer,de,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ve){for(r.bindTexture(34067,Fe.__webglTexture),ze(34067,de.texture,It),at=0;6>at;at++)gt(Te.__webglFramebuffer[at],de,36064,34069+at);N(de.texture,It)&&z(34067,de.texture,de.width,de.height),r.bindTexture(34067,null)}else r.bindTexture(3553,Fe.__webglTexture),ze(3553,de.texture,It),gt(Te.__webglFramebuffer,de,36064,3553),N(de.texture,It)&&z(3553,de.texture,de.width,de.height),r.bindTexture(3553,null);if(de.depthBuffer){if(Te=a.get(de),Fe=de.isWebGLCubeRenderTarget===!0,de.depthTexture){if(Fe)throw Error("target.depthTexture not supported in Cube render targets");if(de&&de.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,Te.__webglFramebuffer),!de.depthTexture||!de.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(a.get(de.depthTexture).__webglTexture&&de.depthTexture.image.width===de.width&&de.depthTexture.image.height===de.height||(de.depthTexture.image.width=de.width,de.depthTexture.image.height=de.height,de.depthTexture.needsUpdate=!0),be(de.depthTexture,0),Te=a.get(de.depthTexture).__webglTexture,de.depthTexture.format===1026)n.framebufferTexture2D(36160,36096,3553,Te,0);else if(de.depthTexture.format===1027)n.framebufferTexture2D(36160,33306,3553,Te,0);else throw Error("Unknown depthTexture format")}else if(Fe)for(Te.__webglDepthbuffer=[],Fe=0;6>Fe;Fe++)n.bindFramebuffer(36160,Te.__webglFramebuffer[Fe]),Te.__webglDepthbuffer[Fe]=n.createRenderbuffer(),We(Te.__webglDepthbuffer[Fe],de,!1);else n.bindFramebuffer(36160,Te.__webglFramebuffer),Te.__webglDepthbuffer=n.createRenderbuffer(),We(Te.__webglDepthbuffer,de,!1);n.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(de){var Te=de.texture,Fe=R(de)||Rr;if(N(Te,Fe)){Fe=de.isWebGLCubeRenderTarget?34067:3553;var Ve=a.get(Te).__webglTexture;r.bindTexture(Fe,Ve),z(Fe,Te,de.width,de.height),r.bindTexture(Fe,null)}},this.updateMultisampleRenderTarget=function(de){if(de.isWebGLMultisampleRenderTarget)if(Rr){var Te=a.get(de);n.bindFramebuffer(36008,Te.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Te.__webglFramebuffer);var Fe=de.width,Ve=de.height,at=16384;de.depthBuffer&&(at|=256),de.stencilBuffer&&(at|=1024),n.blitFramebuffer(0,0,Fe,Ve,0,0,Fe,Ve,at,9728),n.bindFramebuffer(36160,Te.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(de,Te){de&&de.isWebGLRenderTarget&&(Me===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Me=!0),de=de.texture),be(de,Te)},this.safeSetTextureCube=function(de,Te){de&&de.isWebGLCubeRenderTarget&&(Je===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Je=!0),de=de.texture),de&&de.isCubeTexture||Array.isArray(de.image)&&de.image.length===6?je(de,Te):Ie(de,Te)}}function Bs(n,e,r){var a=r.isWebGL2;return{convert:function(p){if(p===1009)return 5121;if(p===1017)return 32819;if(p===1018)return 32820;if(p===1019)return 33635;if(p===1010)return 5120;if(p===1011)return 5122;if(p===1012)return 5123;if(p===1013)return 5124;if(p===1014)return 5125;if(p===1015)return 5126;if(p===1016){if(a)return 5131;var y=e.get("OES_texture_half_float");return y!==null?y.HALF_FLOAT_OES:null}if(p===1021)return 6406;if(p===1022)return 6407;if(p===1023)return 6408;if(p===1024)return 6409;if(p===1025)return 6410;if(p===1026)return 6402;if(p===1027)return 34041;if(p===1028)return 6403;if(p===1029)return 36244;if(p===1030)return 33319;if(p===1031)return 33320;if(p===1032)return 36248;if(p===1033)return 36249;if(p===33776||p===33777||p===33778||p===33779)if(y=e.get("WEBGL_compressed_texture_s3tc"),y!==null){if(p===33776)return y.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===33777)return y.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===33778)return y.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===33779)return y.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(p===35840||p===35841||p===35842||p===35843)if(y=e.get("WEBGL_compressed_texture_pvrtc"),y!==null){if(p===35840)return y.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===35841)return y.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===35842)return y.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===35843)return y.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(p===36196)return y=e.get("WEBGL_compressed_texture_etc1"),y!==null?y.COMPRESSED_RGB_ETC1_WEBGL:null;if((p===37492||p===37496)&&(y=e.get("WEBGL_compressed_texture_etc"),y!==null)){if(p===37492)return y.COMPRESSED_RGB8_ETC2;if(p===37496)return y.COMPRESSED_RGBA8_ETC2_EAC}if(p===37808||p===37809||p===37810||p===37811||p===37812||p===37813||p===37814||p===37815||p===37816||p===37817||p===37818||p===37819||p===37820||p===37821||p===37840||p===37841||p===37842||p===37843||p===37844||p===37845||p===37846||p===37847||p===37848||p===37849||p===37850||p===37851||p===37852||p===37853)return y=e.get("WEBGL_compressed_texture_astc"),y!==null?p:null;if(p===36492)return y=e.get("EXT_texture_compression_bptc"),y!==null?p:null;if(p===1020)return a?34042:(y=e.get("WEBGL_depth_texture"),y!==null?y.UNSIGNED_INT_24_8_WEBGL:null)}}}function zs(n){qa.call(this),this.cameras=n||[]}function Ha(){Cr.call(this),this.type="Group"}function yc(){this._grip=this._targetRay=null}function so(n,e){function r(Pt){var pr=ne.get(Pt.inputSource);pr&&pr.dispatchEvent({type:Pt.type})}function a(){ne.forEach(function(Pt,pr){Pt.disconnect(pr)}),ne.clear(),n.setFramebuffer(null),n.setRenderTarget(n.getRenderTarget()),Rt.stop(),C.isPresenting=!1,C.dispatchEvent({type:"sessionend"})}function u(Pt){N=Pt,Rt.setContext(S),Rt.start(),C.isPresenting=!0,C.dispatchEvent({type:"sessionstart"})}function p(Pt){for(var pr=S.inputSources,Rr=0;Rr<K.length;Rr++)ne.set(pr[Rr],K[Rr]);for(Rr=0;Rr<Pt.removed.length;Rr++){pr=Pt.removed[Rr];var Tt=ne.get(pr);Tt&&(Tt.dispatchEvent({type:"disconnected",data:pr}),ne.delete(pr))}for(Rr=0;Rr<Pt.added.length;Rr++)pr=Pt.added[Rr],(Tt=ne.get(pr))&&Tt.dispatchEvent({type:"connected",data:pr})}function y(Pt,pr){pr===null?Pt.matrixWorld.copy(Pt.matrix):Pt.matrixWorld.multiplyMatrices(pr.matrixWorld,Pt.matrix),Pt.matrixWorldInverse.getInverse(Pt.matrixWorld)}var C=this,S=null,R=1,N=null,z="local-floor",Z=null,K=[],ne=new Po,oe=new qa;oe.layers.enable(1),oe.viewport=new Oe;var be=new qa;be.layers.enable(2),be.viewport=new Oe;var je=[oe,be],Ie=new zs;Ie.layers.enable(1),Ie.layers.enable(2);var ze=null,et=null;this.isPresenting=this.enabled=!1,this.getController=function(Pt){var pr=K[Pt];return pr===void 0&&(pr=new yc,K[Pt]=pr),pr.getTargetRaySpace()},this.getControllerGrip=function(Pt){var pr=K[Pt];return pr===void 0&&(pr=new yc,K[Pt]=pr),pr.getGripSpace()},this.setFramebufferScaleFactor=function(Pt){R=Pt,C.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Pt){z=Pt,C.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return N},this.getSession=function(){return S},this.setSession=function(Pt){S=Pt,S!==null&&(S.addEventListener("select",r),S.addEventListener("selectstart",r),S.addEventListener("selectend",r),S.addEventListener("squeeze",r),S.addEventListener("squeezestart",r),S.addEventListener("squeezeend",r),S.addEventListener("end",a),Pt=e.getContextAttributes(),Pt.xrCompatible!==!0&&e.makeXRCompatible(),Pt=new XRWebGLLayer(S,e,{antialias:Pt.antialias,alpha:Pt.alpha,depth:Pt.depth,stencil:Pt.stencil,framebufferScaleFactor:R}),S.updateRenderState({baseLayer:Pt}),S.requestReferenceSpace(z).then(u),S.addEventListener("inputsourceschange",p))};var xt=new xe,gt=new xe;this.getCamera=function(Pt){Ie.near=be.near=oe.near=Pt.near,Ie.far=be.far=oe.far=Pt.far,(ze!==Ie.near||et!==Ie.far)&&(S.updateRenderState({depthNear:Ie.near,depthFar:Ie.far}),ze=Ie.near,et=Ie.far);var pr=Pt.parent,Rr=Ie.cameras;y(Ie,pr);for(var Tt=0;Tt<Rr.length;Tt++)y(Rr[Tt],pr);for(Pt.matrixWorld.copy(Ie.matrixWorld),Pt=Pt.children,Tt=0,pr=Pt.length;Tt<pr;Tt++)Pt[Tt].updateMatrixWorld(!0);if(Rr.length===2){xt.setFromMatrixPosition(oe.matrixWorld),gt.setFromMatrixPosition(be.matrixWorld),Rr=xt.distanceTo(gt);var gn=oe.projectionMatrix.elements,tr=be.projectionMatrix.elements,bn=gn[14]/(gn[10]-1);Tt=gn[14]/(gn[10]+1),Pt=(gn[9]+1)/gn[5],pr=(gn[9]-1)/gn[5];var ai=(gn[8]-1)/gn[0],wn=(tr[8]+1)/tr[0];tr=bn*ai,gn=bn*wn,wn=Rr/(-ai+wn),ai=wn*-ai,oe.matrixWorld.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.translateX(ai),Ie.translateZ(wn),Ie.matrixWorld.compose(Ie.position,Ie.quaternion,Ie.scale),Ie.matrixWorldInverse.getInverse(Ie.matrixWorld),bn+=wn,wn=Tt+wn,Ie.projectionMatrix.makePerspective(tr-ai,gn+(Rr-ai),Pt*Tt/wn*bn,pr*Tt/wn*bn,bn,wn)}else Ie.projectionMatrix.copy(oe.projectionMatrix);return Ie};var We=null,Rt=new Ud;Rt.setAnimationLoop(function(Pt,pr){if(Z=pr.getViewerPose(N),Z!==null){var Rr=Z.views,Tt=S.renderState.baseLayer;n.setFramebuffer(Tt.framebuffer);var gn=!1;Rr.length!==Ie.cameras.length&&(Ie.cameras.length=0,gn=!0);for(var tr=0;tr<Rr.length;tr++){var bn=Rr[tr],ai=Tt.getViewport(bn),wn=je[tr];wn.matrix.fromArray(bn.transform.matrix),wn.projectionMatrix.fromArray(bn.projectionMatrix),wn.viewport.set(ai.x,ai.y,ai.width,ai.height),tr===0&&Ie.matrix.copy(wn.matrix),gn===!0&&Ie.cameras.push(wn)}}for(Rr=S.inputSources,tr=0;tr<K.length;tr++)K[tr].update(Rr[tr],pr,N);We&&We(Pt,pr)}),this.setAnimationLoop=function(Pt){We=Pt},this.dispose=function(){}}function jo(n){function e(a,u,p){if(a.opacity.value=u.opacity,u.color&&a.diffuse.value.copy(u.color),u.emissive&&a.emissive.value.copy(u.emissive).multiplyScalar(u.emissiveIntensity),u.map&&(a.map.value=u.map),u.alphaMap&&(a.alphaMap.value=u.alphaMap),u.specularMap&&(a.specularMap.value=u.specularMap),(p=u.envMap||p)&&(a.envMap.value=p,a.flipEnvMap.value=p.isCubeTexture?-1:1,a.reflectivity.value=u.reflectivity,a.refractionRatio.value=u.refractionRatio,a.maxMipLevel.value=n.get(p).__maxMipLevel),u.lightMap&&(a.lightMap.value=u.lightMap,a.lightMapIntensity.value=u.lightMapIntensity),u.aoMap&&(a.aoMap.value=u.aoMap,a.aoMapIntensity.value=u.aoMapIntensity),u.map)var y=u.map;else u.specularMap?y=u.specularMap:u.displacementMap?y=u.displacementMap:u.normalMap?y=u.normalMap:u.bumpMap?y=u.bumpMap:u.roughnessMap?y=u.roughnessMap:u.metalnessMap?y=u.metalnessMap:u.alphaMap?y=u.alphaMap:u.emissiveMap&&(y=u.emissiveMap);if(y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),a.uvTransform.value.copy(y.matrix)),u.aoMap)var C=u.aoMap;else u.lightMap&&(C=u.lightMap);C!==void 0&&(C.isWebGLRenderTarget&&(C=C.texture),C.matrixAutoUpdate===!0&&C.updateMatrix(),a.uv2Transform.value.copy(C.matrix))}function r(a,u,p){a.roughness.value=u.roughness,a.metalness.value=u.metalness,u.roughnessMap&&(a.roughnessMap.value=u.roughnessMap),u.metalnessMap&&(a.metalnessMap.value=u.metalnessMap),u.emissiveMap&&(a.emissiveMap.value=u.emissiveMap),u.bumpMap&&(a.bumpMap.value=u.bumpMap,a.bumpScale.value=u.bumpScale,u.side===1&&(a.bumpScale.value*=-1)),u.normalMap&&(a.normalMap.value=u.normalMap,a.normalScale.value.copy(u.normalScale),u.side===1&&a.normalScale.value.negate()),u.displacementMap&&(a.displacementMap.value=u.displacementMap,a.displacementScale.value=u.displacementScale,a.displacementBias.value=u.displacementBias),(u.envMap||p)&&(a.envMapIntensity.value=u.envMapIntensity)}return{refreshFogUniforms:function(u,p){u.fogColor.value.copy(p.color),p.isFog?(u.fogNear.value=p.near,u.fogFar.value=p.far):p.isFogExp2&&(u.fogDensity.value=p.density)},refreshMaterialUniforms:function(u,p,y,C,S){if(p.isMeshBasicMaterial)e(u,p);else if(p.isMeshLambertMaterial)e(u,p),p.emissiveMap&&(u.emissiveMap.value=p.emissiveMap);else if(p.isMeshToonMaterial)e(u,p),u.specular.value.copy(p.specular),u.shininess.value=Math.max(p.shininess,1e-4),p.gradientMap&&(u.gradientMap.value=p.gradientMap),p.emissiveMap&&(u.emissiveMap.value=p.emissiveMap),p.bumpMap&&(u.bumpMap.value=p.bumpMap,u.bumpScale.value=p.bumpScale,p.side===1&&(u.bumpScale.value*=-1)),p.normalMap&&(u.normalMap.value=p.normalMap,u.normalScale.value.copy(p.normalScale),p.side===1&&u.normalScale.value.negate()),p.displacementMap&&(u.displacementMap.value=p.displacementMap,u.displacementScale.value=p.displacementScale,u.displacementBias.value=p.displacementBias);else if(p.isMeshPhongMaterial)e(u,p),u.specular.value.copy(p.specular),u.shininess.value=Math.max(p.shininess,1e-4),p.emissiveMap&&(u.emissiveMap.value=p.emissiveMap),p.bumpMap&&(u.bumpMap.value=p.bumpMap,u.bumpScale.value=p.bumpScale,p.side===1&&(u.bumpScale.value*=-1)),p.normalMap&&(u.normalMap.value=p.normalMap,u.normalScale.value.copy(p.normalScale),p.side===1&&u.normalScale.value.negate()),p.displacementMap&&(u.displacementMap.value=p.displacementMap,u.displacementScale.value=p.displacementScale,u.displacementBias.value=p.displacementBias);else if(p.isMeshStandardMaterial)e(u,p,y),p.isMeshPhysicalMaterial?(r(u,p,y),u.reflectivity.value=p.reflectivity,u.clearcoat.value=p.clearcoat,u.clearcoatRoughness.value=p.clearcoatRoughness,p.sheen&&u.sheen.value.copy(p.sheen),p.clearcoatMap&&(u.clearcoatMap.value=p.clearcoatMap),p.clearcoatRoughnessMap&&(u.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap),p.clearcoatNormalMap&&(u.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),u.clearcoatNormalMap.value=p.clearcoatNormalMap,p.side===1&&u.clearcoatNormalScale.value.negate()),u.transparency.value=p.transparency):r(u,p,y);else if(p.isMeshMatcapMaterial)e(u,p),p.matcap&&(u.matcap.value=p.matcap),p.bumpMap&&(u.bumpMap.value=p.bumpMap,u.bumpScale.value=p.bumpScale,p.side===1&&(u.bumpScale.value*=-1)),p.normalMap&&(u.normalMap.value=p.normalMap,u.normalScale.value.copy(p.normalScale),p.side===1&&u.normalScale.value.negate()),p.displacementMap&&(u.displacementMap.value=p.displacementMap,u.displacementScale.value=p.displacementScale,u.displacementBias.value=p.displacementBias);else if(p.isMeshDepthMaterial)e(u,p),p.displacementMap&&(u.displacementMap.value=p.displacementMap,u.displacementScale.value=p.displacementScale,u.displacementBias.value=p.displacementBias);else if(p.isMeshDistanceMaterial)e(u,p),p.displacementMap&&(u.displacementMap.value=p.displacementMap,u.displacementScale.value=p.displacementScale,u.displacementBias.value=p.displacementBias),u.referencePosition.value.copy(p.referencePosition),u.nearDistance.value=p.nearDistance,u.farDistance.value=p.farDistance;else if(p.isMeshNormalMaterial)e(u,p),p.bumpMap&&(u.bumpMap.value=p.bumpMap,u.bumpScale.value=p.bumpScale,p.side===1&&(u.bumpScale.value*=-1)),p.normalMap&&(u.normalMap.value=p.normalMap,u.normalScale.value.copy(p.normalScale),p.side===1&&u.normalScale.value.negate()),p.displacementMap&&(u.displacementMap.value=p.displacementMap,u.displacementScale.value=p.displacementScale,u.displacementBias.value=p.displacementBias);else if(p.isLineBasicMaterial)u.diffuse.value.copy(p.color),u.opacity.value=p.opacity,p.isLineDashedMaterial&&(u.dashSize.value=p.dashSize,u.totalSize.value=p.dashSize+p.gapSize,u.scale.value=p.scale);else if(p.isPointsMaterial){if(u.diffuse.value.copy(p.color),u.opacity.value=p.opacity,u.size.value=p.size*C,u.scale.value=.5*S,p.map&&(u.map.value=p.map),p.alphaMap&&(u.alphaMap.value=p.alphaMap),p.map)var R=p.map;else p.alphaMap&&(R=p.alphaMap);R!==void 0&&(R.matrixAutoUpdate===!0&&R.updateMatrix(),u.uvTransform.value.copy(R.matrix))}else if(p.isSpriteMaterial){if(u.diffuse.value.copy(p.color),u.opacity.value=p.opacity,u.rotation.value=p.rotation,p.map&&(u.map.value=p.map),p.alphaMap&&(u.alphaMap.value=p.alphaMap),p.map)var N=p.map;else p.alphaMap&&(N=p.alphaMap);N!==void 0&&(N.matrixAutoUpdate===!0&&N.updateMatrix(),u.uvTransform.value.copy(N.matrix))}else p.isShadowMaterial?(u.color.value.copy(p.color),u.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}}}function Zd(n){var e;function r(){Ln=new ku(nr),Sn=new fc(nr,Ln,n),Sn.isWebGL2===!1&&(Ln.get("WEBGL_depth_texture"),Ln.get("OES_texture_float"),Ln.get("OES_texture_half_float"),Ln.get("OES_texture_half_float_linear"),Ln.get("OES_standard_derivatives"),Ln.get("OES_element_index_uint"),Ln.get("ANGLE_instanced_arrays")),Ln.get("OES_texture_float_linear"),Oc=new Bs(nr,Ln,Sn),Kr=new $h(nr,Ln,Sn),Kr.scissor(Me.copy(Xe).multiplyScalar(Fe).floor()),Kr.viewport(Le.copy(It).multiplyScalar(Fe).floor()),Ca=new Tr(nr),Eo=new cv,lc=new ed(nr,Ln,Kr,Eo,Sn,Oc,Ca),Od=new zu(nr,Sn),Nm=new Gg(nr,Od,Ca),Wh=new Ir(nr,Nm,Od,Ca),pA=new Jl(nr),bg=new Xd(Pt,Ln,Sn),Lg=new jo(Eo),xh=new Qf,Op=new d0,Nu=new Qa(Pt,Kr,Wh,ze),gA=new Uu(nr,Ln,Ca,Sn),Dd=new kc(nr,Ln,Ca,Sn),Ca.programs=bg.programs,Pt.capabilities=Sn,Pt.extensions=Ln,Pt.properties=Eo,Pt.renderLists=xh,Pt.state=Kr,Pt.info=Ca}function a(He){He.preventDefault(),pr=!0}function u(){pr=!1,r()}function p(He){He=He.target,He.removeEventListener("dispose",p),y(He),Eo.remove(He)}function y(He){var ur=Eo.get(He).program;He.program=void 0,ur!==void 0&&bg.releaseProgram(ur)}function C(He,ur){He.render(function(Et){Pt.renderBufferImmediate(Et,ur)})}function S(He,ur,Et,vr){if(He.visible!==!1){if(He.layers.test(ur.layers)){if(He.isGroup)Et=He.renderOrder;else if(He.isLOD)He.autoUpdate===!0&&He.update(ur);else if(He.isLight)Rt.pushLight(He),He.castShadow&&Rt.pushShadow(He);else if(He.isSprite){if(!He.frustumCulled||lr.intersectsSprite(He)){vr&&Zn.setFromMatrixPosition(He.matrixWorld).applyMatrix4(mn);var en=Wh.update(He),eo=He.material;eo.visible&&We.push(He,en,eo,Et,Zn.z,null)}}else if(He.isImmediateRenderObject)vr&&Zn.setFromMatrixPosition(He.matrixWorld).applyMatrix4(mn),We.push(He,null,He.material,Et,Zn.z,null);else if((He.isMesh||He.isLine||He.isPoints)&&(He.isSkinnedMesh&&He.skeleton.frame!==Ca.render.frame&&(He.skeleton.update(),He.skeleton.frame=Ca.render.frame),!He.frustumCulled||lr.intersectsObject(He)))if(vr&&Zn.setFromMatrixPosition(He.matrixWorld).applyMatrix4(mn),en=Wh.update(He),eo=He.material,Array.isArray(eo))for(var dn=en.groups,Qn=0,qi=dn.length;Qn<qi;Qn++){var na=dn[Qn],Oo=eo[na.materialIndex];Oo&&Oo.visible&&We.push(He,en,Oo,Et,Zn.z,na)}else eo.visible&&We.push(He,en,eo,Et,Zn.z,null)}for(He=He.children,Qn=0,qi=He.length;Qn<qi;Qn++)S(He[Qn],ur,Et,vr)}}function R(He,ur,Et,vr){for(var en=0,eo=He.length;en<eo;en++){var dn=He[en],Qn=dn.object,qi=dn.geometry,na=vr===void 0?dn.material:vr;if(dn=dn.group,Et.isArrayCamera){qe=Et;for(var Oo=Et.cameras,Fd=0,as=Oo.length;Fd<as;Fd++){var sl=Oo[Fd];Qn.layers.test(sl.layers)&&(Kr.viewport(Le.copy(sl.viewport)),Rt.setupLights(sl),N(Qn,ur,sl,qi,na,dn))}}else qe=null,N(Qn,ur,Et,qi,na,dn)}}function N(He,ur,Et,vr,en,eo){if(He.onBeforeRender(Pt,ur,Et,vr,en,eo),Rt=Op.get(ur,qe||Et),He.modelViewMatrix.multiplyMatrices(Et.matrixWorldInverse,He.matrixWorld),He.normalMatrix.getNormalMatrix(He.modelViewMatrix),He.isImmediateRenderObject){var dn=Z(Et,ur,en,He);Kr.setMaterial(en),wn=e=null,Yo=!1,C(He,dn)}else Pt.renderBufferDirect(Et,ur,vr,en,He,eo);He.onAfterRender(Pt,ur,Et,vr,en,eo),Rt=Op.get(ur,qe||Et)}function z(He,ur,Et){var vr=Eo.get(He),en=Rt.state.lights,eo=en.state.version;Et=bg.getParameters(He,en.state,Rt.state.shadowsArray,ur,Ft.numPlanes,Ft.numIntersection,Et);var dn=bg.getProgramCacheKey(Et),Qn=vr.program,qi=!0;if(Qn===void 0)He.addEventListener("dispose",p);else if(Qn.cacheKey!==dn)y(He);else{if(vr.lightsStateVersion!==eo)vr.lightsStateVersion=eo;else if(Et.shaderID!==void 0)return;qi=!1}if(qi&&(Qn=bg.acquireProgram(Et,dn),vr.program=Qn,vr.uniforms=Et.uniforms,vr.outputEncoding=Et.outputEncoding,He.program=Qn),Et=Qn.getAttributes(),He.morphTargets)for(dn=He.numSupportedMorphTargets=0;dn<Pt.maxMorphTargets;dn++)0<=Et["morphTarget"+dn]&&He.numSupportedMorphTargets++;if(He.morphNormals)for(dn=He.numSupportedMorphNormals=0;dn<Pt.maxMorphNormals;dn++)0<=Et["morphNormal"+dn]&&He.numSupportedMorphNormals++;Et=vr.uniforms,(!He.isShaderMaterial&&!He.isRawShaderMaterial||He.clipping===!0)&&(vr.numClippingPlanes=Ft.numPlanes,vr.numIntersection=Ft.numIntersection,Et.clippingPlanes=Ft.uniform),vr.environment=He.isMeshStandardMaterial?ur.environment:null,vr.fog=ur.fog,vr.needsLights=He.isMeshLambertMaterial||He.isMeshToonMaterial||He.isMeshPhongMaterial||He.isMeshStandardMaterial||He.isShadowMaterial||He.isShaderMaterial&&He.lights===!0,vr.lightsStateVersion=eo,vr.needsLights&&(Et.ambientLightColor.value=en.state.ambient,Et.lightProbe.value=en.state.probe,Et.directionalLights.value=en.state.directional,Et.directionalLightShadows.value=en.state.directionalShadow,Et.spotLights.value=en.state.spot,Et.spotLightShadows.value=en.state.spotShadow,Et.rectAreaLights.value=en.state.rectArea,Et.pointLights.value=en.state.point,Et.pointLightShadows.value=en.state.pointShadow,Et.hemisphereLights.value=en.state.hemi,Et.directionalShadowMap.value=en.state.directionalShadowMap,Et.directionalShadowMatrix.value=en.state.directionalShadowMatrix,Et.spotShadowMap.value=en.state.spotShadowMap,Et.spotShadowMatrix.value=en.state.spotShadowMatrix,Et.pointShadowMap.value=en.state.pointShadowMap,Et.pointShadowMatrix.value=en.state.pointShadowMatrix),He=vr.program.getUniforms(),He=gc.seqWithValue(He.seq,Et),vr.uniformsList=He}function Z(He,ur,Et,vr){lc.resetTextureUnits();var en=ur.fog,eo=Et.isMeshStandardMaterial?ur.environment:null,dn=tr===null?Pt.outputEncoding:tr.texture.encoding,Qn=Eo.get(Et),qi=Rt.state.lights;Jt&&(Ht||He!==On)&&Ft.setState(Et.clippingPlanes,Et.clipIntersection,Et.clipShadows,He,Qn,He===On&&Et.id===ai),Et.version===Qn.__version?Qn.program===void 0||Et.fog&&Qn.fog!==en||Qn.environment!==eo||Qn.needsLights&&Qn.lightsStateVersion!==qi.state.version?z(Et,ur,vr):Qn.numClippingPlanes===void 0||Qn.numClippingPlanes===Ft.numPlanes&&Qn.numIntersection===Ft.numIntersection?Qn.outputEncoding!==dn&&z(Et,ur,vr):z(Et,ur,vr):(z(Et,ur,vr),Qn.__version=Et.version);var na=!1,Oo=!1,Fd=!1;if(ur=Qn.program,dn=ur.getUniforms(),qi=Qn.uniforms,Kr.useProgram(ur.program)&&(Fd=Oo=na=!0),Et.id!==ai&&(ai=Et.id,Oo=!0),(na||On!==He)&&(dn.setValue(nr,"projectionMatrix",He.projectionMatrix),Sn.logarithmicDepthBuffer&&dn.setValue(nr,"logDepthBufFC",2/(Math.log(He.far+1)/Math.LN2)),On!==He&&(On=He,Fd=Oo=!0),(Et.isShaderMaterial||Et.isMeshPhongMaterial||Et.isMeshToonMaterial||Et.isMeshStandardMaterial||Et.envMap)&&(na=dn.map.cameraPosition,na!==void 0&&na.setValue(nr,Zn.setFromMatrixPosition(He.matrixWorld))),(Et.isMeshPhongMaterial||Et.isMeshToonMaterial||Et.isMeshLambertMaterial||Et.isMeshBasicMaterial||Et.isMeshStandardMaterial||Et.isShaderMaterial)&&dn.setValue(nr,"isOrthographic",He.isOrthographicCamera===!0),(Et.isMeshPhongMaterial||Et.isMeshToonMaterial||Et.isMeshLambertMaterial||Et.isMeshBasicMaterial||Et.isMeshStandardMaterial||Et.isShaderMaterial||Et.skinning)&&dn.setValue(nr,"viewMatrix",He.matrixWorldInverse)),Et.skinning&&(dn.setOptional(nr,vr,"bindMatrix"),dn.setOptional(nr,vr,"bindMatrixInverse"),He=vr.skeleton))if(na=He.bones,Sn.floatVertexTextures){if(He.boneTexture===void 0){na=Math.sqrt(4*na.length),na=Bi.ceilPowerOfTwo(na),na=Math.max(na,4);var as=new Float32Array(na*na*4);as.set(He.boneMatrices);var sl=new _a(as,na,na,1023,1015);He.boneMatrices=as,He.boneTexture=sl,He.boneTextureSize=na}dn.setValue(nr,"boneTexture",He.boneTexture,lc),dn.setValue(nr,"boneTextureSize",He.boneTextureSize)}else dn.setOptional(nr,He,"boneMatrices");return(Oo||Qn.receiveShadow!==vr.receiveShadow)&&(Qn.receiveShadow=vr.receiveShadow,dn.setValue(nr,"receiveShadow",vr.receiveShadow)),Oo&&(dn.setValue(nr,"toneMappingExposure",Pt.toneMappingExposure),dn.setValue(nr,"toneMappingWhitePoint",Pt.toneMappingWhitePoint),Qn.needsLights&&(Oo=Fd,qi.ambientLightColor.needsUpdate=Oo,qi.lightProbe.needsUpdate=Oo,qi.directionalLights.needsUpdate=Oo,qi.directionalLightShadows.needsUpdate=Oo,qi.pointLights.needsUpdate=Oo,qi.pointLightShadows.needsUpdate=Oo,qi.spotLights.needsUpdate=Oo,qi.spotLightShadows.needsUpdate=Oo,qi.rectAreaLights.needsUpdate=Oo,qi.hemisphereLights.needsUpdate=Oo),en&&Et.fog&&Lg.refreshFogUniforms(qi,en),Lg.refreshMaterialUniforms(qi,Et,eo,Fe,Te),qi.ltc_1!==void 0&&(qi.ltc_1.value=hn.LTC_1),qi.ltc_2!==void 0&&(qi.ltc_2.value=hn.LTC_2),gc.upload(nr,Qn.uniformsList,qi,lc)),Et.isShaderMaterial&&Et.uniformsNeedUpdate===!0&&(gc.upload(nr,Qn.uniformsList,qi,lc),Et.uniformsNeedUpdate=!1),Et.isSpriteMaterial&&dn.setValue(nr,"center",vr.center),dn.setValue(nr,"modelViewMatrix",vr.modelViewMatrix),dn.setValue(nr,"normalMatrix",vr.normalMatrix),dn.setValue(nr,"modelMatrix",vr.matrixWorld),ur}n=n||{};var K=n.canvas!==void 0?n.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),ne=n.context!==void 0?n.context:null,oe=n.alpha!==void 0?n.alpha:!1,be=n.depth!==void 0?n.depth:!0,je=n.stencil!==void 0?n.stencil:!0,Ie=n.antialias!==void 0?n.antialias:!1,ze=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,et=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,xt=n.powerPreference!==void 0?n.powerPreference:"default",gt=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1,We=null,Rt=null;this.domElement=K,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingWhitePoint=this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Pt=this,pr=!1,Rr=null,Tt=0,gn=0,tr=null,bn=null,ai=-1,wn=e=null,Yo=!1,On=null,qe=null,Le=new Oe,Me=new Oe,Je=null,de=K.width,Te=K.height,Fe=1,Ve=null,at=null,It=new Oe(0,0,de,Te),Xe=new Oe(0,0,de,Te),ot=!1,lr=new Ia,Ft=new dc,Jt=!1,Ht=!1,mn=new Lr,Zn=new xe;try{oe={alpha:oe,depth:be,stencil:je,antialias:Ie,premultipliedAlpha:ze,preserveDrawingBuffer:et,powerPreference:xt,failIfMajorPerformanceCaveat:gt},K.addEventListener("webglcontextlost",a,!1),K.addEventListener("webglcontextrestored",u,!1);var nr=ne||K.getContext("webgl",oe)||K.getContext("experimental-webgl",oe);if(nr===null)throw K.getContext("webgl")!==null?Error("Error creating WebGL context with your selected attributes."):Error("Error creating WebGL context.");nr.getShaderPrecisionFormat===void 0&&(nr.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(He){throw console.error("THREE.WebGLRenderer: "+He.message),He}var Ln,Sn,Kr,Ca,Eo,lc,Od,Nm,Wh,bg,Lg,xh,Op,Nu,pA,gA,Dd,Oc;r();var Ah=new so(Pt,nr);this.xr=Ah;var Bm=new $f(Pt,Wh,Sn.maxTextureSize);this.shadowMap=Bm,this.getContext=function(){return nr},this.getContextAttributes=function(){return nr.getContextAttributes()},this.forceContextLoss=function(){var He=Ln.get("WEBGL_lose_context");He&&He.loseContext()},this.forceContextRestore=function(){var He=Ln.get("WEBGL_lose_context");He&&He.restoreContext()},this.getPixelRatio=function(){return Fe},this.setPixelRatio=function(He){He!==void 0&&(Fe=He,this.setSize(de,Te,!1))},this.getSize=function(He){return He===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),He=new ce),He.set(de,Te)},this.setSize=function(He,ur,Et){Ah.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(de=He,Te=ur,K.width=Math.floor(He*Fe),K.height=Math.floor(ur*Fe),Et!==!1&&(K.style.width=He+"px",K.style.height=ur+"px"),this.setViewport(0,0,He,ur))},this.getDrawingBufferSize=function(He){return He===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),He=new ce),He.set(de*Fe,Te*Fe).floor()},this.setDrawingBufferSize=function(He,ur,Et){de=He,Te=ur,Fe=Et,K.width=Math.floor(He*Et),K.height=Math.floor(ur*Et),this.setViewport(0,0,He,ur)},this.getCurrentViewport=function(He){return He===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),He=new Oe),He.copy(Le)},this.getViewport=function(He){return He.copy(It)},this.setViewport=function(He,ur,Et,vr){He.isVector4?It.set(He.x,He.y,He.z,He.w):It.set(He,ur,Et,vr),Kr.viewport(Le.copy(It).multiplyScalar(Fe).floor())},this.getScissor=function(He){return He.copy(Xe)},this.setScissor=function(He,ur,Et,vr){He.isVector4?Xe.set(He.x,He.y,He.z,He.w):Xe.set(He,ur,Et,vr),Kr.scissor(Me.copy(Xe).multiplyScalar(Fe).floor())},this.getScissorTest=function(){return ot},this.setScissorTest=function(He){Kr.setScissorTest(ot=He)},this.setOpaqueSort=function(He){Ve=He},this.setTransparentSort=function(He){at=He},this.getClearColor=function(){return Nu.getClearColor()},this.setClearColor=function(){Nu.setClearColor.apply(Nu,arguments)},this.getClearAlpha=function(){return Nu.getClearAlpha()},this.setClearAlpha=function(){Nu.setClearAlpha.apply(Nu,arguments)},this.clear=function(He,ur,Et){var vr=0;(He===void 0||He)&&(vr|=16384),(ur===void 0||ur)&&(vr|=256),(Et===void 0||Et)&&(vr|=1024),nr.clear(vr)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){K.removeEventListener("webglcontextlost",a,!1),K.removeEventListener("webglcontextrestored",u,!1),xh.dispose(),Op.dispose(),Eo.dispose(),Wh.dispose(),Ah.dispose(),I0.stop()},this.renderBufferImmediate=function(He,ur){Kr.initAttributes();var Et=Eo.get(He);He.hasPositions&&!Et.position&&(Et.position=nr.createBuffer()),He.hasNormals&&!Et.normal&&(Et.normal=nr.createBuffer()),He.hasUvs&&!Et.uv&&(Et.uv=nr.createBuffer()),He.hasColors&&!Et.color&&(Et.color=nr.createBuffer()),ur=ur.getAttributes(),He.hasPositions&&(nr.bindBuffer(34962,Et.position),nr.bufferData(34962,He.positionArray,35048),Kr.enableAttribute(ur.position),nr.vertexAttribPointer(ur.position,3,5126,!1,0,0)),He.hasNormals&&(nr.bindBuffer(34962,Et.normal),nr.bufferData(34962,He.normalArray,35048),Kr.enableAttribute(ur.normal),nr.vertexAttribPointer(ur.normal,3,5126,!1,0,0)),He.hasUvs&&(nr.bindBuffer(34962,Et.uv),nr.bufferData(34962,He.uvArray,35048),Kr.enableAttribute(ur.uv),nr.vertexAttribPointer(ur.uv,2,5126,!1,0,0)),He.hasColors&&(nr.bindBuffer(34962,Et.color),nr.bufferData(34962,He.colorArray,35048),Kr.enableAttribute(ur.color),nr.vertexAttribPointer(ur.color,3,5126,!1,0,0)),Kr.disableUnusedAttributes(),nr.drawArrays(4,0,He.count),He.count=0};var Xh=new Lo;this.renderBufferDirect=function(He,ur,Et,vr,en,eo){ur===null&&(ur=Xh);var dn=en.isMesh&&0>en.matrixWorld.determinant(),Qn=Z(He,ur,vr,en);Kr.setMaterial(vr,dn);var qi=!1;if((e!==Et.id||wn!==Qn.id||Yo!==(vr.wireframe===!0))&&(e=Et.id,wn=Qn.id,Yo=vr.wireframe===!0,qi=!0),(vr.morphTargets||vr.morphNormals)&&(pA.update(en,Et,vr,Qn),qi=!0),en.isInstancedMesh===!0&&(qi=!0),He=Et.index,ur=Et.attributes.position,He===null){if(ur===void 0||ur.count===0)return}else if(He.count===0)return;var na=1;if(vr.wireframe===!0&&(He=Nm.getWireframeAttribute(Et),na=2),dn=gA,He!==null){var Oo=Od.get(He);dn=Dd,dn.setIndex(Oo)}if(qi){if(Sn.isWebGL2!==!1||!en.isInstancedMesh&&!Et.isInstancedBufferGeometry||Ln.get("ANGLE_instanced_arrays")!==null){Kr.initAttributes(),qi=Et.attributes,Qn=Qn.getAttributes();var Fd=vr.defaultAttributeValues;for(Um in Qn){var as=Qn[Um];if(0<=as){var sl=qi[Um];if(sl!==void 0){var Dp=sl.normalized,mA=sl.itemSize,Gf=Od.get(sl);if(Gf!==void 0){var wy=Gf.buffer,zm=Gf.type;if(Gf=Gf.bytesPerElement,sl.isInterleavedBufferAttribute){var Gv=sl.data,aC=Gv.stride;sl=sl.offset,Gv&&Gv.isInstancedInterleavedBuffer?(Kr.enableAttributeAndDivisor(as,Gv.meshPerAttribute),Et._maxInstanceCount===void 0&&(Et._maxInstanceCount=Gv.meshPerAttribute*Gv.count)):Kr.enableAttribute(as),nr.bindBuffer(34962,wy),Kr.vertexAttribPointer(as,mA,zm,Dp,aC*Gf,sl*Gf)}else sl.isInstancedBufferAttribute?(Kr.enableAttributeAndDivisor(as,sl.meshPerAttribute),Et._maxInstanceCount===void 0&&(Et._maxInstanceCount=sl.meshPerAttribute*sl.count)):Kr.enableAttribute(as),nr.bindBuffer(34962,wy),Kr.vertexAttribPointer(as,mA,zm,Dp,0,0)}}else if(Um==="instanceMatrix")Gf=Od.get(en.instanceMatrix),Gf!==void 0&&(wy=Gf.buffer,zm=Gf.type,Kr.enableAttributeAndDivisor(as+0,1),Kr.enableAttributeAndDivisor(as+1,1),Kr.enableAttributeAndDivisor(as+2,1),Kr.enableAttributeAndDivisor(as+3,1),nr.bindBuffer(34962,wy),nr.vertexAttribPointer(as+0,4,zm,!1,64,0),nr.vertexAttribPointer(as+1,4,zm,!1,64,16),nr.vertexAttribPointer(as+2,4,zm,!1,64,32),nr.vertexAttribPointer(as+3,4,zm,!1,64,48));else if(Fd!==void 0&&(Dp=Fd[Um],Dp!==void 0))switch(Dp.length){case 2:nr.vertexAttrib2fv(as,Dp);break;case 3:nr.vertexAttrib3fv(as,Dp);break;case 4:nr.vertexAttrib4fv(as,Dp);break;default:nr.vertexAttrib1fv(as,Dp)}}}Kr.disableUnusedAttributes()}He!==null&&nr.bindBuffer(34963,Oo.buffer)}var Um=Et.drawRange.start*na;qi=eo!==null?eo.start*na:0,Oo=Math.max(Um,qi),eo=Math.max(0,Math.min(He!==null?He.count:ur.count,Um+Et.drawRange.count*na,qi+(eo!==null?eo.count*na:Infinity))-1-Oo+1),eo!==0&&(en.isMesh?vr.wireframe===!0?(Kr.setLineWidth(vr.wireframeLinewidth*(tr===null?Fe:1)),dn.setMode(1)):dn.setMode(4):en.isLine?(vr=vr.linewidth,vr===void 0&&(vr=1),Kr.setLineWidth(vr*(tr===null?Fe:1)),en.isLineSegments?dn.setMode(1):en.isLineLoop?dn.setMode(2):dn.setMode(3)):en.isPoints?dn.setMode(0):en.isSprite&&dn.setMode(4),en.isInstancedMesh?dn.renderInstances(Et,Oo,eo,en.count):Et.isInstancedBufferGeometry?dn.renderInstances(Et,Oo,eo,Math.min(Et.instanceCount,Et._maxInstanceCount)):dn.render(Oo,eo))},this.compile=function(He,ur){Rt=Op.get(He,ur),Rt.init(),He.traverse(function(vr){vr.isLight&&(Rt.pushLight(vr),vr.castShadow&&Rt.pushShadow(vr))}),Rt.setupLights(ur);var Et={};He.traverse(function(vr){var en=vr.material;if(en)if(Array.isArray(en))for(var eo=0;eo<en.length;eo++){var dn=en[eo];!(dn.uuid in Et)&&(z(dn,He,vr),Et[dn.uuid]=!0)}else!(en.uuid in Et)&&(z(en,He,vr),Et[en.uuid]=!0)})};var uc=null,I0=new Ud;I0.setAnimationLoop(function(He){Ah.isPresenting||uc&&uc(He)}),typeof window!="undefined"&&I0.setContext(window),this.setAnimationLoop=function(He){uc=He,Ah.setAnimationLoop(He),I0.start()},this.render=function(He,ur,Et,vr){if(Et!==void 0){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var en=Et}if(vr!==void 0){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var eo=vr}ur&&ur.isCamera?pr||(wn=e=null,Yo=!1,ai=-1,On=null,He.autoUpdate===!0&&He.updateMatrixWorld(),ur.parent===null&&ur.updateMatrixWorld(),Ah.enabled&&Ah.isPresenting&&(ur=Ah.getCamera(ur)),He.onBeforeRender(Pt,He,ur,en||tr),Rt=Op.get(He,ur),Rt.init(),mn.multiplyMatrices(ur.projectionMatrix,ur.matrixWorldInverse),lr.setFromProjectionMatrix(mn),Ht=this.localClippingEnabled,Jt=Ft.init(this.clippingPlanes,Ht,ur),We=xh.get(He,ur),We.init(),S(He,ur,0,Pt.sortObjects),We.finish(),Pt.sortObjects===!0&&We.sort(Ve,at),Jt&&Ft.beginShadows(),Bm.render(Rt.state.shadowsArray,He,ur),Rt.setupLights(ur),Jt&&Ft.endShadows(),this.info.autoReset&&this.info.reset(),en!==void 0&&this.setRenderTarget(en),Nu.render(We,He,ur,eo),Et=We.opaque,vr=We.transparent,He.overrideMaterial?(en=He.overrideMaterial,Et.length&&R(Et,He,ur,en),vr.length&&R(vr,He,ur,en)):(Et.length&&R(Et,He,ur),vr.length&&R(vr,He,ur)),He.onAfterRender(Pt,He,ur),tr!==null&&(lc.updateRenderTargetMipmap(tr),lc.updateMultisampleRenderTarget(tr)),Kr.buffers.depth.setTest(!0),Kr.buffers.depth.setMask(!0),Kr.buffers.color.setMask(!0),Kr.setPolygonOffset(!1),Rt=We=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(He){Rr!==He&&tr===null&&nr.bindFramebuffer(36160,He),Rr=He},this.getActiveCubeFace=function(){return Tt},this.getActiveMipmapLevel=function(){return gn},this.getRenderTarget=function(){return tr},this.setRenderTarget=function(He,ur,Et){tr=He,Tt=ur,gn=Et,He&&Eo.get(He).__webglFramebuffer===void 0&&lc.setupRenderTarget(He);var vr=Rr,en=!1;He?(vr=Eo.get(He).__webglFramebuffer,He.isWebGLCubeRenderTarget?(vr=vr[ur||0],en=!0):vr=He.isWebGLMultisampleRenderTarget?Eo.get(He).__webglMultisampledFramebuffer:vr,Le.copy(He.viewport),Me.copy(He.scissor),Je=He.scissorTest):(Le.copy(It).multiplyScalar(Fe).floor(),Me.copy(Xe).multiplyScalar(Fe).floor(),Je=ot),bn!==vr&&(nr.bindFramebuffer(36160,vr),bn=vr),Kr.viewport(Le),Kr.scissor(Me),Kr.setScissorTest(Je),en&&(He=Eo.get(He.texture),nr.framebufferTexture2D(36160,36064,34069+(ur||0),He.__webglTexture,Et||0))},this.readRenderTargetPixels=function(He,ur,Et,vr,en,eo,dn){if(He&&He.isWebGLRenderTarget){var Qn=Eo.get(He).__webglFramebuffer;if(He.isWebGLCubeRenderTarget&&dn!==void 0&&(Qn=Qn[dn]),Qn){dn=!1,Qn!==bn&&(nr.bindFramebuffer(36160,Qn),dn=!0);try{var qi=He.texture,na=qi.format,Oo=qi.type;na!==1023&&Oc.convert(na)!==nr.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):Oo===1009||Oc.convert(Oo)===nr.getParameter(35738)||Oo===1015&&(Sn.isWebGL2||Ln.get("OES_texture_float")||Ln.get("WEBGL_color_buffer_float"))||Oo===1016&&(Sn.isWebGL2?Ln.get("EXT_color_buffer_float"):Ln.get("EXT_color_buffer_half_float"))?nr.checkFramebufferStatus(36160)===36053?0<=ur&&ur<=He.width-vr&&0<=Et&&Et<=He.height-en&&nr.readPixels(ur,Et,vr,en,Oc.convert(na),Oc.convert(Oo),eo):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{dn&&nr.bindFramebuffer(36160,bn)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(He,ur,Et){Et===void 0&&(Et=0);var vr=Math.pow(2,-Et),en=Math.floor(ur.image.width*vr);vr=Math.floor(ur.image.height*vr);var eo=Oc.convert(ur.format);lc.setTexture2D(ur,0),nr.copyTexImage2D(3553,Et,eo,He.x,He.y,en,vr,0),Kr.unbindTexture()},this.copyTextureToTexture=function(He,ur,Et,vr){vr===void 0&&(vr=0);var en=ur.image.width,eo=ur.image.height,dn=Oc.convert(Et.format),Qn=Oc.convert(Et.type);lc.setTexture2D(Et,0),ur.isDataTexture?nr.texSubImage2D(3553,vr,He.x,He.y,en,eo,dn,Qn,ur.image.data):ur.isCompressedTexture?nr.compressedTexSubImage2D(3553,vr,He.x,He.y,ur.mipmaps[0].width,ur.mipmaps[0].height,dn,ur.mipmaps[0].data):nr.texSubImage2D(3553,vr,He.x,He.y,dn,Qn,ur.image),vr===0&&Et.generateMipmaps&&nr.generateMipmap(3553),Kr.unbindTexture()},this.initTexture=function(He){lc.setTexture2D(He,0),Kr.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function $p(n,e){this.name="",this.color=new vt(n),this.density=e!==void 0?e:25e-5}function fl(n,e,r){this.name="",this.color=new vt(n),this.near=e!==void 0?e:1,this.far=r!==void 0?r:1e3}function Gu(n,e){this.array=n,this.stride=e,this.count=n!==void 0?n.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function Us(n,e,r,a){this.name="",this.data=n,this.itemSize=e,this.offset=r,this.normalized=a===!0}function El(n){Nr.call(this),this.type="SpriteMaterial",this.color=new vt(16777215),this.alphaMap=this.map=null,this.rotation=0,this.transparent=this.sizeAttenuation=!0,this.setValues(n)}function pu(n){if(Cr.call(this),this.type="Sprite",Dv===void 0){Dv=new $r;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);e=new Gu(e,5),Dv.setIndex([0,1,2,0,2,3]),Dv.setAttribute("position",new Us(e,3,0,!1)),Dv.setAttribute("uv",new Us(e,2,3,!1))}this.geometry=Dv,this.material=n!==void 0?n:new El,this.center=new ce(.5,.5)}function gu(n,e,r,a,u,p){Bv.subVectors(n,r).addScalar(.5).multiply(a),u!==void 0?(_0.x=p*Bv.x-u*Bv.y,_0.y=u*Bv.x+p*Bv.y):_0.copy(Bv),n.copy(e),n.x+=_0.x,n.y+=_0.y,n.applyMatrix4(Wx)}function Xr(){Cr.call(this),this._currentLevel=0,this.type="LOD",Zr(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Wc(n,e){n&&n.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),oa.call(this,n,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Lr,this.bindMatrixInverse=new Lr}function Xc(n,e){if(n=n||[],this.bones=n.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,e===void 0)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],n=0,e=this.bones.length;n<e;n++)this.boneInverses.push(new Lr)}function ef(){Cr.call(this),this.type="Bone"}function Fa(n,e,r){oa.call(this,n,e),this.instanceMatrix=new Jr(new Float32Array(16*r),16),this.count=r,this.frustumCulled=!1}function Yi(n){Nr.call(this),this.type="LineBasicMaterial",this.color=new vt(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.morphTargets=!1,this.setValues(n)}function ks(n,e,r){r===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Cr.call(this),this.type="Line",this.geometry=n!==void 0?n:new $r,this.material=e!==void 0?e:new Yi,this.updateMorphTargets()}function da(n,e){ks.call(this,n,e),this.type="LineSegments"}function Kd(n,e){ks.call(this,n,e),this.type="LineLoop"}function mu(n){Nr.call(this),this.type="PointsMaterial",this.color=new vt(16777215),this.alphaMap=this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(n)}function Mh(n,e){Cr.call(this),this.type="Points",this.geometry=n!==void 0?n:new $r,this.material=e!==void 0?e:new mu,this.updateMorphTargets()}function vi(n,e,r,a,u,p,y){var C=I1.distanceSqToPoint(n);C<r&&(r=new xe,I1.closestPointToPoint(n,r),r.applyMatrix4(a),n=u.ray.origin.distanceTo(r),n<u.near||n>u.far||p.push({distance:n,distanceToRay:Math.sqrt(C),point:r,index:e,face:null,object:y}))}function Ps(n,e,r,a,u,p,y,C,S){Q.call(this,n,e,r,a,u,p,y,C,S),this.format=y!==void 0?y:1022,this.minFilter=p!==void 0?p:1006,this.magFilter=u!==void 0?u:1006,this.generateMipmaps=!1}function Jd(n,e,r,a,u,p,y,C,S,R,N,z){Q.call(this,null,p,y,C,S,R,a,u,N,z),this.image={width:e,height:r},this.mipmaps=n,this.generateMipmaps=this.flipY=!1}function Ma(n,e,r,a,u,p,y,C,S){Q.call(this,n,e,r,a,u,p,y,C,S),this.needsUpdate=!0}function td(n,e,r,a,u,p,y,C,S,R){if(R=R!==void 0?R:1026,R!==1026&&R!==1027)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&R===1026&&(r=1012),r===void 0&&R===1027&&(r=1020),Q.call(this,null,a,u,p,y,C,R,r,S),this.image={width:n,height:e},this.magFilter=y!==void 0?y:1003,this.minFilter=C!==void 0?C:1003,this.generateMipmaps=this.flipY=!1}function xc(n){$r.call(this),this.type="WireframeGeometry";var e=[],r,a,u,p=[0,0],y={},C=["a","b","c"];if(n&&n.isGeometry){var S=n.faces,R=0;for(a=S.length;R<a;R++){var N=S[R];for(r=0;3>r;r++){var z=N[C[r]],Z=N[C[(r+1)%3]];p[0]=Math.min(z,Z),p[1]=Math.max(z,Z),z=p[0]+","+p[1],y[z]===void 0&&(y[z]={index1:p[0],index2:p[1]})}}for(z in y)R=y[z],C=n.vertices[R.index1],e.push(C.x,C.y,C.z),C=n.vertices[R.index2],e.push(C.x,C.y,C.z)}else if(n&&n.isBufferGeometry)if(C=new xe,n.index!==null){S=n.attributes.position,N=n.index;var K=n.groups;for(K.length===0&&(K=[{start:0,count:N.count,materialIndex:0}]),n=0,u=K.length;n<u;++n)for(R=K[n],r=R.start,a=R.count,R=r,a=r+a;R<a;R+=3)for(r=0;3>r;r++)z=N.getX(R+r),Z=N.getX(R+(r+1)%3),p[0]=Math.min(z,Z),p[1]=Math.max(z,Z),z=p[0]+","+p[1],y[z]===void 0&&(y[z]={index1:p[0],index2:p[1]});for(z in y)R=y[z],C.fromBufferAttribute(S,R.index1),e.push(C.x,C.y,C.z),C.fromBufferAttribute(S,R.index2),e.push(C.x,C.y,C.z)}else for(S=n.attributes.position,R=0,a=S.count/3;R<a;R++)for(r=0;3>r;r++)y=3*R+r,C.fromBufferAttribute(S,y),e.push(C.x,C.y,C.z),y=3*R+(r+1)%3,C.fromBufferAttribute(S,y),e.push(C.x,C.y,C.z);this.setAttribute("position",new Or(e,3))}function nn(n,e,r){ei.call(this),this.type="ParametricGeometry",this.parameters={func:n,slices:e,stacks:r},this.fromBufferGeometry(new Sh(n,e,r)),this.mergeVertices()}function Sh(n,e,r){$r.call(this),this.type="ParametricBufferGeometry",this.parameters={func:n,slices:e,stacks:r};var a=[],u=[],p=[],y=[],C=new xe,S=new xe,R=new xe,N=new xe,z=new xe,Z,K;3>n.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var ne=e+1;for(Z=0;Z<=r;Z++){var oe=Z/r;for(K=0;K<=e;K++){var be=K/e;n(be,oe,S),u.push(S.x,S.y,S.z),0<=be-1e-5?(n(be-1e-5,oe,R),N.subVectors(S,R)):(n(be+1e-5,oe,R),N.subVectors(R,S)),0<=oe-1e-5?(n(be,oe-1e-5,R),z.subVectors(S,R)):(n(be,oe+1e-5,R),z.subVectors(R,S)),C.crossVectors(N,z).normalize(),p.push(C.x,C.y,C.z),y.push(be,oe)}}for(Z=0;Z<r;Z++)for(K=0;K<e;K++)n=Z*ne+K+1,C=(Z+1)*ne+K+1,S=(Z+1)*ne+K,a.push(Z*ne+K,n,S),a.push(n,C,S);this.setIndex(a),this.setAttribute("position",new Or(u,3)),this.setAttribute("normal",new Or(p,3)),this.setAttribute("uv",new Or(y,2))}function rd(n,e,r,a){ei.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:n,indices:e,radius:r,detail:a},this.fromBufferGeometry(new Ci(n,e,r,a)),this.mergeVertices()}function Ci(n,e,r,a){function u(R){C.push(R.x,R.y,R.z)}function p(R,N){R*=3,N.x=n[R+0],N.y=n[R+1],N.z=n[R+2]}function y(R,N,z,Z){0>Z&&R.x===1&&(S[N]=R.x-1),z.x===0&&z.z===0&&(S[N]=Z/2/Math.PI+.5)}$r.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:n,indices:e,radius:r,detail:a},r=r||1,a=a||0;var C=[],S=[];(function(R){for(var N=new xe,z=new xe,Z=new xe,K=0;K<e.length;K+=3){p(e[K+0],N),p(e[K+1],z),p(e[K+2],Z);var ne,oe,be=N,je=z,Ie=Z,ze=Math.pow(2,R),et=[];for(oe=0;oe<=ze;oe++){et[oe]=[];var xt=be.clone().lerp(Ie,oe/ze),gt=je.clone().lerp(Ie,oe/ze),We=ze-oe;for(ne=0;ne<=We;ne++)et[oe][ne]=ne===0&&oe===ze?xt:xt.clone().lerp(gt,ne/We)}for(oe=0;oe<ze;oe++)for(ne=0;ne<2*(ze-oe)-1;ne++)be=Math.floor(ne/2),ne%2==0?(u(et[oe][be+1]),u(et[oe+1][be]),u(et[oe][be])):(u(et[oe][be+1]),u(et[oe+1][be+1]),u(et[oe+1][be]))}})(a),function(R){for(var N=new xe,z=0;z<C.length;z+=3)N.x=C[z+0],N.y=C[z+1],N.z=C[z+2],N.normalize().multiplyScalar(R),C[z+0]=N.x,C[z+1]=N.y,C[z+2]=N.z}(r),function(){for(var R=new xe,N=0;N<C.length;N+=3)R.x=C[N+0],R.y=C[N+1],R.z=C[N+2],S.push(Math.atan2(R.z,-R.x)/2/Math.PI+.5,1-(Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))/Math.PI+.5));R=new xe,N=new xe;for(var z=new xe,Z=new xe,K=new ce,ne=new ce,oe=new ce,be=0,je=0;be<C.length;be+=9,je+=6){R.set(C[be+0],C[be+1],C[be+2]),N.set(C[be+3],C[be+4],C[be+5]),z.set(C[be+6],C[be+7],C[be+8]),K.set(S[je+0],S[je+1]),ne.set(S[je+2],S[je+3]),oe.set(S[je+4],S[je+5]),Z.copy(R).add(N).add(z).divideScalar(3);var Ie=Math.atan2(Z.z,-Z.x);y(K,je+0,R,Ie),y(ne,je+2,N,Ie),y(oe,je+4,z,Ie)}for(R=0;R<S.length;R+=6)N=S[R+0],z=S[R+2],Z=S[R+4],K=Math.min(N,z,Z),.9<Math.max(N,z,Z)&&.1>K&&(.2>N&&(S[R+0]+=1),.2>z&&(S[R+2]+=1),.2>Z&&(S[R+4]+=1))}(),this.setAttribute("position",new Or(C,3)),this.setAttribute("normal",new Or(C.slice(),3)),this.setAttribute("uv",new Or(S,2)),a===0?this.computeVertexNormals():this.normalizeNormals()}function Jo(n,e){ei.call(this),this.type="TetrahedronGeometry",this.parameters={radius:n,detail:e},this.fromBufferGeometry(new Yc(n,e)),this.mergeVertices()}function Yc(n,e){Ci.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],n,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:n,detail:e}}function on(n,e){ei.call(this),this.type="OctahedronGeometry",this.parameters={radius:n,detail:e},this.fromBufferGeometry(new Rs(n,e)),this.mergeVertices()}function Rs(n,e){Ci.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],n,e),this.type="OctahedronBufferGeometry",this.parameters={radius:n,detail:e}}function nd(n,e){ei.call(this),this.type="IcosahedronGeometry",this.parameters={radius:n,detail:e},this.fromBufferGeometry(new id(n,e)),this.mergeVertices()}function id(n,e){var r=(1+Math.sqrt(5))/2;Ci.call(this,[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],n,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:n,detail:e}}function od(n,e){ei.call(this),this.type="DodecahedronGeometry",this.parameters={radius:n,detail:e},this.fromBufferGeometry(new tf(n,e)),this.mergeVertices()}function tf(n,e){var r=(1+Math.sqrt(5))/2,a=1/r;Ci.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-r,0,-a,r,0,a,-r,0,a,r,-a,-r,0,-a,r,0,a,-r,0,a,r,0,-r,0,-a,r,0,-a,-r,0,a,r,0,a],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],n,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:n,detail:e}}function Zc(n,e,r,a,u,p){ei.call(this),this.type="TubeGeometry",this.parameters={path:n,tubularSegments:e,radius:r,radialSegments:a,closed:u},p!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed."),n=new bl(n,e,r,a,u),this.tangents=n.tangents,this.normals=n.normals,this.binormals=n.binormals,this.fromBufferGeometry(n),this.mergeVertices()}function bl(n,e,r,a,u){function p(je){N=n.getPointAt(je/e,N);var Ie=y.normals[je];for(je=y.binormals[je],Z=0;Z<=a;Z++){var ze=Z/a*Math.PI*2,et=Math.sin(ze);ze=-Math.cos(ze),S.x=ze*Ie.x+et*je.x,S.y=ze*Ie.y+et*je.y,S.z=ze*Ie.z+et*je.z,S.normalize(),ne.push(S.x,S.y,S.z),C.x=N.x+r*S.x,C.y=N.y+r*S.y,C.z=N.z+r*S.z,K.push(C.x,C.y,C.z)}}$r.call(this),this.type="TubeBufferGeometry",this.parameters={path:n,tubularSegments:e,radius:r,radialSegments:a,closed:u},e=e||64,r=r||1,a=a||8,u=u||!1;var y=n.computeFrenetFrames(e,u);this.tangents=y.tangents,this.normals=y.normals,this.binormals=y.binormals;var C=new xe,S=new xe,R=new ce,N=new xe,z,Z,K=[],ne=[],oe=[],be=[];for(z=0;z<e;z++)p(z);for(p(u===!1?e:0),z=0;z<=e;z++)for(Z=0;Z<=a;Z++)R.x=z/e,R.y=Z/a,oe.push(R.x,R.y);(function(){for(Z=1;Z<=e;Z++)for(z=1;z<=a;z++){var je=(a+1)*Z+(z-1),Ie=(a+1)*Z+z,ze=(a+1)*(Z-1)+z;be.push((a+1)*(Z-1)+(z-1),je,ze),be.push(je,Ie,ze)}})(),this.setIndex(be),this.setAttribute("position",new Or(K,3)),this.setAttribute("normal",new Or(ne,3)),this.setAttribute("uv",new Or(oe,2))}function vu(n,e,r,a,u,p,y){ei.call(this),this.type="TorusKnotGeometry",this.parameters={radius:n,tube:e,tubularSegments:r,radialSegments:a,p:u,q:p},y!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ea(n,e,r,a,u,p)),this.mergeVertices()}function Ea(n,e,r,a,u,p){function y(gt,We,Rt,Pt,pr){var Rr=Math.sin(gt);We=Rt/We*gt,Rt=Math.cos(We),pr.x=Pt*(2+Rt)*.5*Math.cos(gt),pr.y=Pt*(2+Rt)*Rr*.5,pr.z=Pt*Math.sin(We)*.5}$r.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:n,tube:e,tubularSegments:r,radialSegments:a,p:u,q:p},n=n||1,e=e||.4,r=Math.floor(r)||64,a=Math.floor(a)||8,u=u||2,p=p||3;var C=[],S=[],R=[],N=[],z,Z=new xe,K=new xe,ne=new xe,oe=new xe,be=new xe,je=new xe,Ie=new xe;for(z=0;z<=r;++z){var ze=z/r*u*Math.PI*2;for(y(ze,u,p,n,ne),y(ze+.01,u,p,n,oe),je.subVectors(oe,ne),Ie.addVectors(oe,ne),be.crossVectors(je,Ie),Ie.crossVectors(be,je),be.normalize(),Ie.normalize(),ze=0;ze<=a;++ze){var et=ze/a*Math.PI*2,xt=-e*Math.cos(et);et=e*Math.sin(et),Z.x=ne.x+(xt*Ie.x+et*be.x),Z.y=ne.y+(xt*Ie.y+et*be.y),Z.z=ne.z+(xt*Ie.z+et*be.z),S.push(Z.x,Z.y,Z.z),K.subVectors(Z,ne).normalize(),R.push(K.x,K.y,K.z),N.push(z/r),N.push(ze/a)}}for(ze=1;ze<=r;ze++)for(z=1;z<=a;z++)n=(a+1)*ze+(z-1),e=(a+1)*ze+z,u=(a+1)*(ze-1)+z,C.push((a+1)*(ze-1)+(z-1),n,u),C.push(n,e,u);this.setIndex(C),this.setAttribute("position",new Or(S,3)),this.setAttribute("normal",new Or(R,3)),this.setAttribute("uv",new Or(N,2))}function qd(n,e,r,a,u){ei.call(this),this.type="TorusGeometry",this.parameters={radius:n,tube:e,radialSegments:r,tubularSegments:a,arc:u},this.fromBufferGeometry(new Ac(n,e,r,a,u)),this.mergeVertices()}function Ac(n,e,r,a,u){$r.call(this),this.type="TorusBufferGeometry",this.parameters={radius:n,tube:e,radialSegments:r,tubularSegments:a,arc:u},n=n||1,e=e||.4,r=Math.floor(r)||8,a=Math.floor(a)||6,u=u||2*Math.PI;var p=[],y=[],C=[],S=[],R=new xe,N=new xe,z=new xe,Z,K;for(Z=0;Z<=r;Z++)for(K=0;K<=a;K++){var ne=K/a*u,oe=Z/r*Math.PI*2;N.x=(n+e*Math.cos(oe))*Math.cos(ne),N.y=(n+e*Math.cos(oe))*Math.sin(ne),N.z=e*Math.sin(oe),y.push(N.x,N.y,N.z),R.x=n*Math.cos(ne),R.y=n*Math.sin(ne),z.subVectors(N,R).normalize(),C.push(z.x,z.y,z.z),S.push(K/a),S.push(Z/r)}for(Z=1;Z<=r;Z++)for(K=1;K<=a;K++)n=(a+1)*(Z-1)+K-1,e=(a+1)*(Z-1)+K,u=(a+1)*Z+K,p.push((a+1)*Z+K-1,n,u),p.push(n,e,u);this.setIndex(p),this.setAttribute("position",new Or(y,3)),this.setAttribute("normal",new Or(C,3)),this.setAttribute("uv",new Or(S,2))}function Cc(n,e,r,a,u){for(var p,y=0,C=e,S=r-a;C<r;C+=a)y+=(n[S]-n[C])*(n[C+1]+n[S+1]),S=C;if(u===0<y)for(u=e;u<r;u+=a)p=dv(u,n[u],n[u+1],p);else for(u=r-a;u>=e;u-=a)p=dv(u,n[u],n[u+1],p);return p&&nf(p,p.next)&&(pl(p),p=p.next),p}function wc(n,e){if(!n)return n;e||(e=n);do{var r=!1;if(n.steiner||!nf(n,n.next)&&aa(n.prev,n,n.next)!==0)n=n.next;else{if(pl(n),n=e=n.prev,n===n.next)break;r=!0}}while(r||n!==e);return e}function Qd(n,e,r,a,u,p,y){if(n){if(!y&&p){var C=n,S=C;do S.z===null&&(S.z=ep(S.x,S.y,a,u,p)),S.prevZ=S.prev,S=S.nextZ=S.next;while(S!==C);S.prevZ.nextZ=null,S.prevZ=null,C=S;var R,N,z,Z,K=1;do{S=C;var ne=C=null;for(N=0;S;){N++;var oe=S;for(R=z=0;R<K&&(z++,oe=oe.nextZ,oe);R++);for(Z=K;0<z||0<Z&&oe;)z!==0&&(Z===0||!oe||S.z<=oe.z)?(R=S,S=S.nextZ,z--):(R=oe,oe=oe.nextZ,Z--),ne?ne.nextZ=R:C=R,R.prevZ=ne,ne=R;S=oe}ne.nextZ=null,K*=2}while(1<N)}for(C=n;n.prev!==n.next;){if(S=n.prev,oe=n.next,p)ne=$d(n,a,u,p);else e:if(ne=n,N=ne.prev,z=ne,K=ne.next,0<=aa(N,z,K))ne=!1;else{for(R=ne.next.next;R!==ne.prev;){if(dl(N.x,N.y,z.x,z.y,K.x,K.y,R.x,R.y)&&0<=aa(R.prev,R,R.next)){ne=!1;break e}R=R.next}ne=!0}if(ne)e.push(S.i/r),e.push(n.i/r),e.push(oe.i/r),pl(n),C=n=oe.next;else if(n=oe,n===C){if(!y)Qd(wc(n),e,r,a,u,p,1);else if(y===1){n=wc(n),y=e,C=r,S=n;do oe=S.prev,ne=S.next.next,!nf(oe,ne)&&tp(oe,S,S.next,ne)&&of(oe,ne)&&of(ne,oe)&&(y.push(oe.i/C),y.push(S.i/C),y.push(ne.i/C),pl(S),pl(S.next),S=n=ne),S=S.next;while(S!==n);n=wc(S),Qd(n,e,r,a,u,p,2)}else if(y===2)e:{y=n;do{for(C=y.next.next;C!==y.prev;){if(S=y.i!==C.i){if(S=y,oe=C,ne=S.next.i!==oe.i&&S.prev.i!==oe.i){t:{ne=S;do{if(ne.i!==S.i&&ne.next.i!==S.i&&ne.i!==oe.i&&ne.next.i!==oe.i&&tp(ne,ne.next,S,oe)){ne=!0;break t}ne=ne.next}while(ne!==S);ne=!1}ne=!ne}if(ne){if(ne=of(S,oe)&&of(oe,S)){ne=S,N=!1,z=(S.x+oe.x)/2,K=(S.y+oe.y)/2;do ne.y>K!=ne.next.y>K&&ne.next.y!==ne.y&&z<(ne.next.x-ne.x)*(K-ne.y)/(ne.next.y-ne.y)+ne.x&&(N=!N),ne=ne.next;while(ne!==S);ne=N}ne=ne&&(aa(S.prev,S,oe.prev)||aa(S,oe.prev,oe))||nf(S,oe)&&0<aa(S.prev,S,S.next)&&0<aa(oe.prev,oe,oe.next)}S=ne}if(S){n=sd(y,C),y=wc(y,y.next),n=wc(n,n.next),Qd(y,e,r,a,u,p),Qd(n,e,r,a,u,p);break e}C=C.next}y=y.next}while(y!==n)}break}}}}function $d(n,e,r,a){var u=n.prev,p=n.next;if(0<=aa(u,n,p))return!1;var y=u.x>n.x?u.x>p.x?u.x:p.x:n.x>p.x?n.x:p.x,C=u.y>n.y?u.y>p.y?u.y:p.y:n.y>p.y?n.y:p.y,S=ep(u.x<n.x?u.x<p.x?u.x:p.x:n.x<p.x?n.x:p.x,u.y<n.y?u.y<p.y?u.y:p.y:n.y<p.y?n.y:p.y,e,r,a);for(e=ep(y,C,e,r,a),r=n.prevZ,a=n.nextZ;r&&r.z>=S&&a&&a.z<=e;){if(r!==n.prev&&r!==n.next&&dl(u.x,u.y,n.x,n.y,p.x,p.y,r.x,r.y)&&0<=aa(r.prev,r,r.next)||(r=r.prevZ,a!==n.prev&&a!==n.next&&dl(u.x,u.y,n.x,n.y,p.x,p.y,a.x,a.y)&&0<=aa(a.prev,a,a.next)))return!1;a=a.nextZ}for(;r&&r.z>=S;){if(r!==n.prev&&r!==n.next&&dl(u.x,u.y,n.x,n.y,p.x,p.y,r.x,r.y)&&0<=aa(r.prev,r,r.next))return!1;r=r.prevZ}for(;a&&a.z<=e;){if(a!==n.prev&&a!==n.next&&dl(u.x,u.y,n.x,n.y,p.x,p.y,a.x,a.y)&&0<=aa(a.prev,a,a.next))return!1;a=a.nextZ}return!0}function rf(n,e){return n.x-e.x}function Jg(n,e){var r=e,a=n.x,u=n.y,p=-Infinity;do{if(u<=r.y&&u>=r.next.y&&r.next.y!==r.y){var y=r.x+(u-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(y<=a&&y>p){if(p=y,y===a){if(u===r.y)return r;if(u===r.next.y)return r.next}var C=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!C)return null;if(a===p)return C;e=C,y=C.x;var S=C.y,R=Infinity;r=C;do{if(a>=r.x&&r.x>=y&&a!==r.x&&dl(u<S?a:p,u,y,S,u<S?p:a,u,r.x,r.y)){var N=Math.abs(u-r.y)/(a-r.x),z;if((z=of(r,n))&&!(z=N<R)&&(z=N===R)&&!(z=r.x>C.x)&&(z=r.x===C.x)){z=C;var Z=r;z=0>aa(z.prev,z,Z.prev)&&0>aa(Z.next,z,z.next)}z&&(C=r,R=N)}r=r.next}while(r!==e);return C}function ep(n,e,r,a,u){return n=32767*(n-r)*u,e=32767*(e-a)*u,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,(n|n<<1)&1431655765|((e|e<<1)&1431655765)<<1}function Ql(n){var e=n,r=n;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==n);return r}function dl(n,e,r,a,u,p,y,C){return 0<=(u-y)*(e-C)-(n-y)*(p-C)&&0<=(n-y)*(a-C)-(r-y)*(e-C)&&0<=(r-y)*(p-C)-(u-y)*(a-C)}function aa(n,e,r){return(e.y-n.y)*(r.x-e.x)-(e.x-n.x)*(r.y-e.y)}function nf(n,e){return n.x===e.x&&n.y===e.y}function tp(n,e,r,a){var u=rp(aa(n,e,r)),p=rp(aa(n,e,a)),y=rp(aa(r,a,n)),C=rp(aa(r,a,e));return!!(u!==p&&y!==C||u===0&&ad(n,r,e)||p===0&&ad(n,a,e)||y===0&&ad(r,n,a)||C===0&&ad(r,e,a))}function ad(n,e,r){return e.x<=Math.max(n.x,r.x)&&e.x>=Math.min(n.x,r.x)&&e.y<=Math.max(n.y,r.y)&&e.y>=Math.min(n.y,r.y)}function rp(n){return 0<n?1:0>n?-1:0}function of(n,e){return 0>aa(n.prev,n,n.next)?0<=aa(n,e,n.next)&&0<=aa(n,n.prev,e):0>aa(n,e,n.prev)||0>aa(n,n.next,e)}function sd(n,e){var r=new ld(n.i,n.x,n.y),a=new ld(e.i,e.x,e.y),u=n.next,p=e.prev;return n.next=e,e.prev=n,r.next=u,u.prev=r,a.next=r,r.prev=a,p.next=a,a.prev=p,a}function dv(n,e,r,a){return n=new ld(n,e,r),a?(n.next=a.next,n.prev=a,a.next.prev=n,a.next=n):(n.prev=n,n.next=n),n}function pl(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ld(n,e,r){this.i=n,this.x=e,this.y=r,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function pv(n){var e=n.length;2<e&&n[e-1].equals(n[0])&&n.pop()}function ud(n,e){for(var r=0;r<e.length;r++)n.push(e[r].x),n.push(e[r].y)}function ju(n,e){ei.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:n,options:e},this.fromBufferGeometry(new Hs(n,e)),this.mergeVertices()}function Hs(n,e){function r(S){function R(Jt,Ht,mn){return Ht||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ht.clone().multiplyScalar(mn).add(Jt)}function N(Jt,Ht,mn){var Zn=Jt.x-Ht.x,nr=Jt.y-Ht.y,Ln=mn.x-Jt.x,Sn=mn.y-Jt.y,Kr=Zn*Zn+nr*nr;if(Math.abs(Zn*Sn-nr*Ln)>Ro){var Ca=Math.sqrt(Kr),Eo=Math.sqrt(Ln*Ln+Sn*Sn);if(Kr=Ht.x-nr/Ca,Ht=Ht.y+Zn/Ca,Sn=((mn.x-Sn/Eo-Kr)*Sn-(mn.y+Ln/Eo-Ht)*Ln)/(Zn*Sn-nr*Ln),Ln=Kr+Zn*Sn-Jt.x,Zn=Ht+nr*Sn-Jt.y,nr=Ln*Ln+Zn*Zn,2>=nr)return new ce(Ln,Zn);nr=Math.sqrt(nr/2)}else Jt=!1,Zn>Ro?Ln>Ro&&(Jt=!0):Zn<-Ro?Ln<-Ro&&(Jt=!0):Ms(nr)===Ms(Sn)&&(Jt=!0),Jt?(Ln=-nr,nr=Math.sqrt(Kr)):(Ln=Zn,Zn=nr,nr=Math.sqrt(Kr/2));return new ce(Ln/nr,Zn/nr)}function z(Jt,Ht){for(Ve=Jt.length;0<=--Ve;){var mn=Ve,Zn=Ve-1;0>Zn&&(Zn=Jt.length-1);var nr,Ln=Ie+2*Rt;for(nr=0;nr<Ln;nr++){var Sn=de*nr,Kr=de*(nr+1),Ca=Ht+Zn+Sn,Eo=Ht+Zn+Kr;Kr=Ht+mn+Kr,ne(Ht+mn+Sn),ne(Ca),ne(Kr),ne(Ca),ne(Eo),ne(Kr),Sn=u.length/3,Sn=pr.generateSideWallUV(a,u,Sn-6,Sn-3,Sn-2,Sn-1),oe(Sn[0]),oe(Sn[1]),oe(Sn[3]),oe(Sn[1]),oe(Sn[2]),oe(Sn[3])}}}function Z(Jt,Ht,mn){be.push(Jt),be.push(Ht),be.push(mn)}function K(Jt,Ht,mn){ne(Jt),ne(Ht),ne(mn),Jt=u.length/3,Jt=pr.generateTopUV(a,u,Jt-3,Jt-2,Jt-1),oe(Jt[0]),oe(Jt[1]),oe(Jt[2])}function ne(Jt){u.push(be[3*Jt]),u.push(be[3*Jt+1]),u.push(be[3*Jt+2])}function oe(Jt){p.push(Jt.x),p.push(Jt.y)}var be=[],je=e.curveSegments!==void 0?e.curveSegments:12,Ie=e.steps!==void 0?e.steps:1,ze=e.depth!==void 0?e.depth:100,et=e.bevelEnabled!==void 0?e.bevelEnabled:!0,xt=e.bevelThickness!==void 0?e.bevelThickness:6,gt=e.bevelSize!==void 0?e.bevelSize:xt-2,We=e.bevelOffset!==void 0?e.bevelOffset:0,Rt=e.bevelSegments!==void 0?e.bevelSegments:3,Pt=e.extrudePath,pr=e.UVGenerator!==void 0?e.UVGenerator:j2;e.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),ze=e.amount);var Rr=!1;if(Pt){var Tt=Pt.getSpacedPoints(Ie);Rr=!0,et=!1;var gn=Pt.computeFrenetFrames(Ie,!1),tr=new xe,bn=new xe,ai=new xe}et||(We=gt=xt=Rt=0);var wn;je=S.extractPoints(je),S=je.shape;var Yo=je.holes;if(!Tg.isClockWise(S)){S=S.reverse();var On=0;for(wn=Yo.length;On<wn;On++){var qe=Yo[On];Tg.isClockWise(qe)&&(Yo[On]=qe.reverse())}}var Le=Tg.triangulateShape(S,Yo),Me=S;for(On=0,wn=Yo.length;On<wn;On++)qe=Yo[On],S=S.concat(qe);var Je,de=S.length,Te,Fe=Le.length;je=[];var Ve=0,at=Me.length,It=at-1;for(Je=Ve+1;Ve<at;Ve++,It++,Je++)It===at&&(It=0),Je===at&&(Je=0),je[Ve]=N(Me[Ve],Me[It],Me[Je]);Pt=[];var Xe=je.concat();for(On=0,wn=Yo.length;On<wn;On++){qe=Yo[On];var ot=[];for(Ve=0,at=qe.length,It=at-1,Je=Ve+1;Ve<at;Ve++,It++,Je++)It===at&&(It=0),Je===at&&(Je=0),ot[Ve]=N(qe[Ve],qe[It],qe[Je]);Pt.push(ot),Xe=Xe.concat(ot)}for(It=0;It<Rt;It++){at=It/Rt;var lr=xt*Math.cos(at*Math.PI/2);for(Je=gt*Math.sin(at*Math.PI/2)+We,Ve=0,at=Me.length;Ve<at;Ve++){var Ft=R(Me[Ve],je[Ve],Je);Z(Ft.x,Ft.y,-lr)}for(On=0,wn=Yo.length;On<wn;On++)for(qe=Yo[On],ot=Pt[On],Ve=0,at=qe.length;Ve<at;Ve++)Ft=R(qe[Ve],ot[Ve],Je),Z(Ft.x,Ft.y,-lr)}for(Je=gt+We,Ve=0;Ve<de;Ve++)Ft=et?R(S[Ve],Xe[Ve],Je):S[Ve],Rr?(bn.copy(gn.normals[0]).multiplyScalar(Ft.x),tr.copy(gn.binormals[0]).multiplyScalar(Ft.y),ai.copy(Tt[0]).add(bn).add(tr),Z(ai.x,ai.y,ai.z)):Z(Ft.x,Ft.y,0);for(at=1;at<=Ie;at++)for(Ve=0;Ve<de;Ve++)Ft=et?R(S[Ve],Xe[Ve],Je):S[Ve],Rr?(bn.copy(gn.normals[at]).multiplyScalar(Ft.x),tr.copy(gn.binormals[at]).multiplyScalar(Ft.y),ai.copy(Tt[at]).add(bn).add(tr),Z(ai.x,ai.y,ai.z)):Z(Ft.x,Ft.y,ze/Ie*at);for(It=Rt-1;0<=It;It--){for(at=It/Rt,lr=xt*Math.cos(at*Math.PI/2),Je=gt*Math.sin(at*Math.PI/2)+We,Ve=0,at=Me.length;Ve<at;Ve++)Ft=R(Me[Ve],je[Ve],Je),Z(Ft.x,Ft.y,ze+lr);for(On=0,wn=Yo.length;On<wn;On++)for(qe=Yo[On],ot=Pt[On],Ve=0,at=qe.length;Ve<at;Ve++)Ft=R(qe[Ve],ot[Ve],Je),Rr?Z(Ft.x,Ft.y+Tt[Ie-1].y,Tt[Ie-1].x+lr):Z(Ft.x,Ft.y,ze+lr)}(function(){var Jt=u.length/3;if(et){var Ht=0*de;for(Ve=0;Ve<Fe;Ve++)Te=Le[Ve],K(Te[2]+Ht,Te[1]+Ht,Te[0]+Ht);for(Ht=de*(Ie+2*Rt),Ve=0;Ve<Fe;Ve++)Te=Le[Ve],K(Te[0]+Ht,Te[1]+Ht,Te[2]+Ht)}else{for(Ve=0;Ve<Fe;Ve++)Te=Le[Ve],K(Te[2],Te[1],Te[0]);for(Ve=0;Ve<Fe;Ve++)Te=Le[Ve],K(Te[0]+de*Ie,Te[1]+de*Ie,Te[2]+de*Ie)}a.addGroup(Jt,u.length/3-Jt,0)})(),function(){var Jt=u.length/3,Ht=0;for(z(Me,Ht),Ht+=Me.length,On=0,wn=Yo.length;On<wn;On++)qe=Yo[On],z(qe,Ht),Ht+=qe.length;a.addGroup(Jt,u.length/3-Jt,1)}()}$r.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:n,options:e},n=Array.isArray(n)?n:[n];for(var a=this,u=[],p=[],y=0,C=n.length;y<C;y++)r(n[y]);this.setAttribute("position",new Or(u,3)),this.setAttribute("uv",new Or(p,2)),this.computeVertexNormals()}function af(n,e,r){if(r.shapes=[],Array.isArray(n))for(var a=0,u=n.length;a<u;a++)r.shapes.push(n[a].uuid);else r.shapes.push(n.uuid);return e.extrudePath!==void 0&&(r.options.extrudePath=e.extrudePath.toJSON()),r}function np(n,e){ei.call(this),this.type="TextGeometry",this.parameters={text:n,parameters:e},this.fromBufferGeometry(new sf(n,e)),this.mergeVertices()}function sf(n,e){e=e||{};var r=e.font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ei;n=r.generateShapes(n,e.size),e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),Hs.call(this,n,e),this.type="TextBufferGeometry"}function cd(n,e,r,a,u,p,y){ei.call(this),this.type="SphereGeometry",this.parameters={radius:n,widthSegments:e,heightSegments:r,phiStart:a,phiLength:u,thetaStart:p,thetaLength:y},this.fromBufferGeometry(new yu(n,e,r,a,u,p,y)),this.mergeVertices()}function yu(n,e,r,a,u,p,y){$r.call(this),this.type="SphereBufferGeometry",this.parameters={radius:n,widthSegments:e,heightSegments:r,phiStart:a,phiLength:u,thetaStart:p,thetaLength:y},n=n||1,e=Math.max(3,Math.floor(e)||8),r=Math.max(2,Math.floor(r)||6),a=a!==void 0?a:0,u=u!==void 0?u:2*Math.PI,p=p!==void 0?p:0,y=y!==void 0?y:Math.PI;var C=Math.min(p+y,Math.PI),S,R,N=0,z=[],Z=new xe,K=new xe,ne=[],oe=[],be=[],je=[];for(R=0;R<=r;R++){var Ie=[],ze=R/r,et=0;for(R==0&&p==0?et=.5/e:R==r&&C==Math.PI&&(et=-.5/e),S=0;S<=e;S++){var xt=S/e;Z.x=-n*Math.cos(a+xt*u)*Math.sin(p+ze*y),Z.y=n*Math.cos(p+ze*y),Z.z=n*Math.sin(a+xt*u)*Math.sin(p+ze*y),oe.push(Z.x,Z.y,Z.z),K.copy(Z).normalize(),be.push(K.x,K.y,K.z),je.push(xt+et,1-ze),Ie.push(N++)}z.push(Ie)}for(R=0;R<r;R++)for(S=0;S<e;S++)n=z[R][S+1],a=z[R][S],u=z[R+1][S],y=z[R+1][S+1],(R!==0||0<p)&&ne.push(n,a,y),(R!==r-1||C<Math.PI)&&ne.push(a,u,y);this.setIndex(ne),this.setAttribute("position",new Or(oe,3)),this.setAttribute("normal",new Or(be,3)),this.setAttribute("uv",new Or(je,2))}function gl(n,e,r,a,u,p){ei.call(this),this.type="RingGeometry",this.parameters={innerRadius:n,outerRadius:e,thetaSegments:r,phiSegments:a,thetaStart:u,thetaLength:p},this.fromBufferGeometry(new xu(n,e,r,a,u,p)),this.mergeVertices()}function xu(n,e,r,a,u,p){$r.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:n,outerRadius:e,thetaSegments:r,phiSegments:a,thetaStart:u,thetaLength:p},n=n||.5,e=e||1,u=u!==void 0?u:0,p=p!==void 0?p:2*Math.PI,r=r!==void 0?Math.max(3,r):8,a=a!==void 0?Math.max(1,a):1;var y=[],C=[],S=[],R=[],N=n,z=(e-n)/a,Z=new xe,K=new ce,ne,oe;for(ne=0;ne<=a;ne++){for(oe=0;oe<=r;oe++)n=u+oe/r*p,Z.x=N*Math.cos(n),Z.y=N*Math.sin(n),C.push(Z.x,Z.y,Z.z),S.push(0,0,1),K.x=(Z.x/e+1)/2,K.y=(Z.y/e+1)/2,R.push(K.x,K.y);N+=z}for(ne=0;ne<a;ne++)for(e=ne*(r+1),oe=0;oe<r;oe++)n=oe+e,u=n+r+1,p=n+r+2,N=n+1,y.push(n,u,N),y.push(u,p,N);this.setIndex(y),this.setAttribute("position",new Or(C,3)),this.setAttribute("normal",new Or(S,3)),this.setAttribute("uv",new Or(R,2))}function ip(n,e,r,a){ei.call(this),this.type="LatheGeometry",this.parameters={points:n,segments:e,phiStart:r,phiLength:a},this.fromBufferGeometry(new hd(n,e,r,a)),this.mergeVertices()}function hd(n,e,r,a){$r.call(this),this.type="LatheBufferGeometry",this.parameters={points:n,segments:e,phiStart:r,phiLength:a},e=Math.floor(e)||12,r=r||0,a=a||2*Math.PI,a=Bi.clamp(a,0,2*Math.PI);var u=[],p=[],y=[],C=1/e,S=new xe,R=new ce,N;for(N=0;N<=e;N++){var z=r+N*C*a,Z=Math.sin(z),K=Math.cos(z);for(z=0;z<=n.length-1;z++)S.x=n[z].x*Z,S.y=n[z].y,S.z=n[z].x*K,p.push(S.x,S.y,S.z),R.x=N/e,R.y=z/(n.length-1),y.push(R.x,R.y)}for(N=0;N<e;N++)for(z=0;z<n.length-1;z++)r=z+N*n.length,C=r+n.length,S=r+n.length+1,R=r+1,u.push(r,C,R),u.push(C,S,R);if(this.setIndex(u),this.setAttribute("position",new Or(p,3)),this.setAttribute("uv",new Or(y,2)),this.computeVertexNormals(),a===2*Math.PI)for(a=this.attributes.normal.array,u=new xe,p=new xe,y=new xe,r=e*n.length*3,z=N=0;N<n.length;N++,z+=3)u.x=a[z+0],u.y=a[z+1],u.z=a[z+2],p.x=a[r+z+0],p.y=a[r+z+1],p.z=a[r+z+2],y.addVectors(u,p).normalize(),a[z+0]=a[r+z+0]=y.x,a[z+1]=a[r+z+1]=y.y,a[z+2]=a[r+z+2]=y.z}function Au(n,e){ei.call(this),this.type="ShapeGeometry",(typeof e=="undefined"?"undefined":Jn(e))==="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:n,curveSegments:e},this.fromBufferGeometry(new lf(n,e)),this.mergeVertices()}function lf(n,e){function r(N){var z,Z=u.length/3;N=N.extractPoints(e);var K=N.shape,ne=N.holes;for(Tg.isClockWise(K)===!1&&(K=K.reverse()),N=0,z=ne.length;N<z;N++){var oe=ne[N];Tg.isClockWise(oe)===!0&&(ne[N]=oe.reverse())}var be=Tg.triangulateShape(K,ne);for(N=0,z=ne.length;N<z;N++)oe=ne[N],K=K.concat(oe);for(N=0,z=K.length;N<z;N++)oe=K[N],u.push(oe.x,oe.y,0),p.push(0,0,1),y.push(oe.x,oe.y);for(N=0,z=be.length;N<z;N++)K=be[N],a.push(K[0]+Z,K[1]+Z,K[2]+Z),S+=3}$r.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:n,curveSegments:e},e=e||12;var a=[],u=[],p=[],y=[],C=0,S=0;if(Array.isArray(n)===!1)r(n);else for(var R=0;R<n.length;R++)r(n[R]),this.addGroup(C,S,R),C+=S,S=0;this.setIndex(a),this.setAttribute("position",new Or(u,3)),this.setAttribute("normal",new Or(p,3)),this.setAttribute("uv",new Or(y,2))}function Qs(n,e){if(e.shapes=[],Array.isArray(n))for(var r=0,a=n.length;r<a;r++)e.shapes.push(n[r].uuid);else e.shapes.push(n.uuid);return e}function _c(n,e){$r.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var r=[];e=Math.cos(Bi.DEG2RAD*(e!==void 0?e:1));var a=[0,0],u={},p=["a","b","c"];if(n.isBufferGeometry){var y=new ei;y.fromBufferGeometry(n)}else y=n.clone();y.mergeVertices(),y.computeFaceNormals(),n=y.vertices,y=y.faces;for(var C=0,S=y.length;C<S;C++)for(var R=y[C],N=0;3>N;N++){var z=R[p[N]],Z=R[p[(N+1)%3]];a[0]=Math.min(z,Z),a[1]=Math.max(z,Z),z=a[0]+","+a[1],u[z]===void 0?u[z]={index1:a[0],index2:a[1],face1:C,face2:void 0}:u[z].face2=C}for(z in u)a=u[z],(a.face2===void 0||y[a.face1].normal.dot(y[a.face2].normal)<=e)&&(p=n[a.index1],r.push(p.x,p.y,p.z),p=n[a.index2],r.push(p.x,p.y,p.z));this.setAttribute("position",new Or(r,3))}function dt(n,e,r,a,u,p,y,C){ei.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:n,radiusBottom:e,height:r,radialSegments:a,heightSegments:u,openEnded:p,thetaStart:y,thetaLength:C},this.fromBufferGeometry(new zt(n,e,r,a,u,p,y,C)),this.mergeVertices()}function zt(n,e,r,a,u,p,y,C){function S(Ie){var ze,et=new ce,xt=new xe,gt=0,We=Ie===!0?n:e,Rt=Ie===!0?1:-1,Pt=ne;for(ze=1;ze<=a;ze++)z.push(0,be*Rt,0),Z.push(0,Rt,0),K.push(.5,.5),ne++;var pr=ne;for(ze=0;ze<=a;ze++){var Rr=ze/a*C+y,Tt=Math.cos(Rr);Rr=Math.sin(Rr),xt.x=We*Rr,xt.y=be*Rt,xt.z=We*Tt,z.push(xt.x,xt.y,xt.z),Z.push(0,Rt,0),et.x=.5*Tt+.5,et.y=.5*Rr*Rt+.5,K.push(et.x,et.y),ne++}for(ze=0;ze<a;ze++)et=Pt+ze,xt=pr+ze,Ie===!0?N.push(xt,xt+1,et):N.push(xt+1,xt,et),gt+=3;R.addGroup(je,gt,Ie===!0?1:2),je+=gt}$r.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:n,radiusBottom:e,height:r,radialSegments:a,heightSegments:u,openEnded:p,thetaStart:y,thetaLength:C};var R=this;n=n!==void 0?n:1,e=e!==void 0?e:1,r=r||1,a=Math.floor(a)||8,u=Math.floor(u)||1,p=p!==void 0?p:!1,y=y!==void 0?y:0,C=C!==void 0?C:2*Math.PI;var N=[],z=[],Z=[],K=[],ne=0,oe=[],be=r/2,je=0;(function(){var Ie,ze,et=new xe,xt=new xe,gt=0,We=(e-n)/r;for(ze=0;ze<=u;ze++){var Rt=[],Pt=ze/u,pr=Pt*(e-n)+n;for(Ie=0;Ie<=a;Ie++){var Rr=Ie/a,Tt=Rr*C+y,gn=Math.sin(Tt);Tt=Math.cos(Tt),xt.x=pr*gn,xt.y=-Pt*r+be,xt.z=pr*Tt,z.push(xt.x,xt.y,xt.z),et.set(gn,We,Tt).normalize(),Z.push(et.x,et.y,et.z),K.push(Rr,1-Pt),Rt.push(ne++)}oe.push(Rt)}for(Ie=0;Ie<a;Ie++)for(ze=0;ze<u;ze++)et=oe[ze+1][Ie],xt=oe[ze+1][Ie+1],We=oe[ze][Ie+1],N.push(oe[ze][Ie],et,We),N.push(et,xt,We),gt+=6;R.addGroup(je,gt,0),je+=gt})(),p===!1&&(0<n&&S(!0),0<e&&S(!1)),this.setIndex(N),this.setAttribute("position",new Or(z,3)),this.setAttribute("normal",new Or(Z,3)),this.setAttribute("uv",new Or(K,2))}function Nt(n,e,r,a,u,p,y){dt.call(this,0,n,e,r,a,u,p,y),this.type="ConeGeometry",this.parameters={radius:n,height:e,radialSegments:r,heightSegments:a,openEnded:u,thetaStart:p,thetaLength:y}}function un(n,e,r,a,u,p,y){zt.call(this,0,n,e,r,a,u,p,y),this.type="ConeBufferGeometry",this.parameters={radius:n,height:e,radialSegments:r,heightSegments:a,openEnded:u,thetaStart:p,thetaLength:y}}function Kn(n,e,r,a){ei.call(this),this.type="CircleGeometry",this.parameters={radius:n,segments:e,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Ri(n,e,r,a)),this.mergeVertices()}function Ri(n,e,r,a){$r.call(this),this.type="CircleBufferGeometry",this.parameters={radius:n,segments:e,thetaStart:r,thetaLength:a},n=n||1,e=e!==void 0?Math.max(3,e):8,r=r!==void 0?r:0,a=a!==void 0?a:2*Math.PI;var u=[],p=[],y=[],C=[],S,R=new xe,N=new ce;p.push(0,0,0),y.push(0,0,1),C.push(.5,.5);var z=0;for(S=3;z<=e;z++,S+=3){var Z=r+z/e*a;R.x=n*Math.cos(Z),R.y=n*Math.sin(Z),p.push(R.x,R.y,R.z),y.push(0,0,1),N.x=(p[S]/n+1)/2,N.y=(p[S+1]/n+1)/2,C.push(N.x,N.y)}for(S=1;S<=e;S++)u.push(S,S+1,0);this.setIndex(u),this.setAttribute("position",new Or(p,3)),this.setAttribute("normal",new Or(y,3)),this.setAttribute("uv",new Or(C,2))}function lo(n){Nr.call(this),this.type="ShadowMaterial",this.color=new vt(0),this.transparent=!0,this.setValues(n)}function wi(n){_i.call(this,n),this.type="RawShaderMaterial"}function Sa(n){Nr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(n)}function Kc(n){Sa.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ce(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(n)}function Ga(n){Nr.call(this),this.type="MeshPhongMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(n)}function Vu(n){Nr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.lightMap=this.gradientMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=this.specularMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(n)}function uf(n){Nr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.fog=!1,this.setValues(n)}function Gs(n){Nr.call(this),this.type="MeshLambertMaterial",this.color=new vt(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(n)}function js(n){Nr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vt(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(n)}function Wu(n){Yi.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(n)}function Ni(n,e,r,a){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new e.constructor(r),this.sampleValues=e,this.valueSize=r}function eg(n,e,r,a){Ni.call(this,n,e,r,a),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Th(n,e,r,a){Ni.call(this,n,e,r,a)}function cf(n,e,r,a){Ni.call(this,n,e,r,a)}function Vs(n,e,r,a){if(n===void 0)throw Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw Error("THREE.KeyframeTrack: no keyframes in track named "+n);this.name=n,this.times=bs.convertArray(e,this.TimeBufferType),this.values=bs.convertArray(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}function Xu(n,e,r){Vs.call(this,n,e,r)}function op(n,e,r,a){Vs.call(this,n,e,r,a)}function Mc(n,e,r,a){Vs.call(this,n,e,r,a)}function Sc(n,e,r,a){Ni.call(this,n,e,r,a)}function $l(n,e,r,a){Vs.call(this,n,e,r,a)}function hf(n,e,r,a){Vs.call(this,n,e,r,a)}function Ll(n,e,r,a){Vs.call(this,n,e,r,a)}function Ta(n,e,r,a){this.name=n,this.tracks=r,this.duration=e!==void 0?e:-1,this.blendMode=a!==void 0?a:2500,this.uuid=Bi.generateUUID(),0>this.duration&&this.resetDuration()}function qg(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Mc;case"vector":case"vector2":case"vector3":case"vector4":return Ll;case"color":return op;case"quaternion":return $l;case"bool":case"boolean":return Xu;case"string":return hf}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Fn(n){if(n.type===void 0)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=qg(n.type);if(n.times===void 0){var r=[],a=[];bs.flattenJSON(n.keys,r,a,"value"),n.times=r,n.values=a}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}function Qg(n,e,r){var a=this,u=!1,p=0,y=0,C=void 0,S=[];this.onStart=void 0,this.onLoad=n,this.onProgress=e,this.onError=r,this.itemStart=function(R){y++,u===!1&&a.onStart!==void 0&&a.onStart(R,p,y),u=!0},this.itemEnd=function(R){p++,a.onProgress!==void 0&&a.onProgress(R,p,y),p===y&&(u=!1,a.onLoad!==void 0)&&a.onLoad()},this.itemError=function(R){a.onError!==void 0&&a.onError(R)},this.resolveURL=function(R){return C?C(R):R},this.setURLModifier=function(R){return C=R,this},this.addHandler=function(R,N){return S.push(R,N),this},this.removeHandler=function(R){return R=S.indexOf(R),R!==-1&&S.splice(R,2),this},this.getHandler=function(R){for(var N=0,z=S.length;N<z;N+=2){var Z=S[N],K=S[N+1];if(Z.global&&(Z.lastIndex=0),Z.test(R))return K}return null}}function Zi(n){this.manager=n!==void 0?n:eA,this.crossOrigin="anonymous",this.resourcePath=this.path="",this.requestHeader={}}function ja(n){Zi.call(this,n)}function ap(n){Zi.call(this,n)}function $g(n){Zi.call(this,n)}function em(n){Zi.call(this,n)}function sp(n){Zi.call(this,n)}function fd(n){Zi.call(this,n)}function _n(n){Zi.call(this,n)}function zn(){this.type="Curve",this.arcLengthDivisions=200}function Cu(n,e,r,a,u,p,y,C){zn.call(this),this.type="EllipseCurve",this.aX=n||0,this.aY=e||0,this.xRadius=r||1,this.yRadius=a||1,this.aStartAngle=u||0,this.aEndAngle=p||2*Math.PI,this.aClockwise=y||!1,this.aRotation=C||0}function Tc(n,e,r,a,u,p){Cu.call(this,n,e,r,r,a,u,p),this.type="ArcCurve"}function tm(){var n=0,e=0,r=0,a=0;return{initCatmullRom:function(p,y,C,S,R){p=R*(C-p),S=R*(S-y),n=y,e=p,r=-3*y+3*C-2*p-S,a=2*y-2*C+p+S},initNonuniformCatmullRom:function(p,y,C,S,R,N,z){p=((y-p)/R-(C-p)/(R+N)+(C-y)/N)*N,S=((C-y)/N-(S-y)/(N+z)+(S-C)/z)*N,n=y,e=p,r=-3*y+3*C-2*p-S,a=2*y-2*C+p+S},calc:function(p){var y=p*p;return n+e*p+r*y+a*y*p}}}function ml(n,e,r,a){zn.call(this),this.type="CatmullRomCurve3",this.points=n||[],this.closed=e||!1,this.curveType=r||"centripetal",this.tension=a||.5}function ba(n,e,r,a,u){e=.5*(a-e),u=.5*(u-r);var p=n*n;return(2*r-2*a+e+u)*n*p+(-3*r+3*a-2*e-u)*p+e*n+r}function us(n,e,r,a){var u=1-n;return u*u*e+2*(1-n)*n*r+n*n*a}function ff(n,e,r,a,u){var p=1-n,y=1-n;return p*p*p*e+3*y*y*n*r+3*(1-n)*n*n*a+n*n*n*u}function Yu(n,e,r,a){zn.call(this),this.type="CubicBezierCurve",this.v0=n||new ce,this.v1=e||new ce,this.v2=r||new ce,this.v3=a||new ce}function cs(n,e,r,a){zn.call(this),this.type="CubicBezierCurve3",this.v0=n||new xe,this.v1=e||new xe,this.v2=r||new xe,this.v3=a||new xe}function Os(n,e){zn.call(this),this.type="LineCurve",this.v1=n||new ce,this.v2=e||new ce}function wu(n,e){zn.call(this),this.type="LineCurve3",this.v1=n||new xe,this.v2=e||new xe}function Hi(n,e,r){zn.call(this),this.type="QuadraticBezierCurve",this.v0=n||new ce,this.v1=e||new ce,this.v2=r||new ce}function _u(n,e,r){zn.call(this),this.type="QuadraticBezierCurve3",this.v0=n||new xe,this.v1=e||new xe,this.v2=r||new xe}function Ws(n){zn.call(this),this.type="SplineCurve",this.points=n||[]}function Pl(){zn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function $s(n){Pl.call(this),this.type="Path",this.currentPoint=new ce,n&&this.setFromPoints(n)}function Zu(n){$s.call(this,n),this.uuid=Bi.generateUUID(),this.type="Shape",this.holes=[]}function yo(n,e){Cr.call(this),this.type="Light",this.color=new vt(n),this.intensity=e!==void 0?e:1,this.receiveShadow=void 0}function rm(n,e,r){yo.call(this,n,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Cr.DefaultUp),this.updateMatrix(),this.groundColor=new vt(e)}function eu(n){this.camera=n,this.bias=0,this.radius=1,this.mapSize=new ce(512,512),this.mapPass=this.map=null,this.matrix=new Lr,this._frustum=new Ia,this._frameExtents=new ce(1,1),this._viewportCount=1,this._viewports=[new Oe(0,0,1,1)]}function dd(){eu.call(this,new qa(50,1,.5,500))}function tg(n,e,r,a,u,p){yo.call(this,n,e),this.type="SpotLight",this.position.copy(Cr.DefaultUp),this.updateMatrix(),this.target=new Cr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(C){this.intensity=C/Math.PI}}),this.distance=r!==void 0?r:0,this.angle=a!==void 0?a:Math.PI/3,this.penumbra=u!==void 0?u:0,this.decay=p!==void 0?p:1,this.shadow=new dd}function Vi(){eu.call(this,new qa(90,1,.5,500)),this._frameExtents=new ce(4,2),this._viewportCount=6,this._viewports=[new Oe(2,1,1,1),new Oe(0,1,1,1),new Oe(3,1,1,1),new Oe(1,1,1,1),new Oe(3,0,1,1),new Oe(1,0,1,1)],this._cubeDirections=[new xe(1,0,0),new xe(-1,0,0),new xe(0,0,1),new xe(0,0,-1),new xe(0,1,0),new xe(0,-1,0)],this._cubeUps=[new xe(0,1,0),new xe(0,1,0),new xe(0,1,0),new xe(0,1,0),new xe(0,0,1),new xe(0,0,-1)]}function Ih(n,e,r,a){yo.call(this,n,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(p){this.intensity=p/(4*Math.PI)}}),this.distance=r!==void 0?r:0,this.decay=a!==void 0?a:1,this.shadow=new Vi}function Mu(n,e,r,a,u,p){ss.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n!==void 0?n:-1,this.right=e!==void 0?e:1,this.top=r!==void 0?r:1,this.bottom=a!==void 0?a:-1,this.near=u!==void 0?u:.1,this.far=p!==void 0?p:2e3,this.updateProjectionMatrix()}function nm(){eu.call(this,new Mu(-5,5,5,-5,.5,500))}function Ee(n,e){yo.call(this,n,e),this.type="DirectionalLight",this.position.copy(Cr.DefaultUp),this.updateMatrix(),this.target=new Cr,this.shadow=new nm}function Jc(n,e){yo.call(this,n,e),this.type="AmbientLight",this.castShadow=void 0}function lp(n,e,r,a){yo.call(this,n,e),this.type="RectAreaLight",this.width=r!==void 0?r:10,this.height=a!==void 0?a:10}function tu(){this.coefficients=[];for(var n=0;9>n;n++)this.coefficients.push(new xe)}function ti(n,e){yo.call(this,void 0,e),this.type="LightProbe",this.sh=n!==void 0?n:new tu}function ru(n){Zi.call(this,n),this.textures={}}function im(){$r.call(this),this.type="InstancedBufferGeometry",this.instanceCount=Infinity}function gv(n,e,r,a){typeof r=="number"&&(a=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Jr.call(this,n,e,r),this.meshPerAttribute=a||1}function qc(n){Zi.call(this,n)}function df(n){Zi.call(this,n)}function La(n){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Zi.call(this,n),this.options=void 0}function up(){this.type="ShapePath",this.color=new vt,this.subPaths=[],this.currentPath=null}function cp(n){this.type="Font",this.data=n}function pf(n){Zi.call(this,n)}function Ku(n){Zi.call(this,n)}function gf(n,e,r){ti.call(this,void 0,r),n=new vt().set(n),r=new vt().set(e),e=new xe(n.r,n.g,n.b),n=new xe(r.r,r.g,r.b),r=Math.sqrt(Math.PI);var a=r*Math.sqrt(.75);this.sh.coefficients[0].copy(e).add(n).multiplyScalar(r),this.sh.coefficients[1].copy(e).sub(n).multiplyScalar(a)}function nu(n,e){ti.call(this,void 0,e),n=new vt().set(n),this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Rl(n){this.autoStart=n!==void 0?n:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function rg(){Cr.call(this),this.type="AudioListener",this.context=nA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Rl}function mf(n){Cr.call(this),this.type="Audio",this.listener=n,this.context=n.context,this.gain=this.context.createGain(),this.gain.connect(n.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.loopEnd=this.loopStart=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._progress=this._startedAt=0,this.filters=[]}function iu(n){mf.call(this,n),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function mv(n,e){this.analyser=n.context.createAnalyser(),this.analyser.fftSize=e!==void 0?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),n.getOutput().connect(this.analyser)}function pd(n,e,r){switch(this.binding=n,this.valueSize=r,e){case"quaternion":n=this._slerp,e=this._slerpAdditive;var a=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":e=n=this._select,a=this._setAdditiveIdentityOther,this.buffer=Array(5*r);break;default:n=this._lerp,e=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=e,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}function Qc(n,e,r){r=r||hs.parseTrackName(e),this._targetGroup=n,this._bindings=n.subscribe_(e,r)}function hs(n,e,r){this.path=e,this.parsedPath=r||hs.parseTrackName(e),this.node=hs.findNode(n,this.parsedPath.nodeName)||n,this.rootNode=n}function vf(n,e,r,a){this._mixer=n,this._clip=e,this._localRoot=r||null,this.blendMode=a||e.blendMode,n=e.tracks,e=n.length,r=Array(e),a={endingStart:2400,endingEnd:2400};for(var u=0;u!==e;++u){var p=n[u].createInterpolant(null);r[u]=p,p.settings=a}this._interpolantSettings=a,this._interpolants=r,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function ou(n){this._root=n,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function gd(n,e){typeof n=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),n=e),this.value=n}function yf(n,e,r){Gu.call(this,n,e),this.meshPerAttribute=r||1}function Ol(n,e,r,a){this.ray=new ro(n,e),this.near=r||0,this.far=a||Infinity,this.camera=null,this.layers=new bo,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Zr(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function hp(n,e){return n.distance-e.distance}function Su(n,e,r,a){if(n.layers.test(e.layers)&&n.raycast(e,r),a===!0){n=n.children,a=0;for(var u=n.length;a<u;a++)Su(n[a],e,r,!0)}}function xf(n,e){this.min=n!==void 0?n:new ce(Infinity,Infinity),this.max=e!==void 0?e:new ce(-Infinity,-Infinity)}function Eh(n,e){this.start=n!==void 0?n:new xe,this.end=e!==void 0?e:new xe}function bh(n){Cr.call(this),this.material=n,this.render=function(){},this.hasUvs=this.hasColors=this.hasNormals=this.hasPositions=!1,this.uvArray=this.colorArray=this.normalArray=this.positionArray=null,this.count=0}function Lh(n,e){Cr.call(this),this.light=n,this.light.updateMatrixWorld(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,n=new $r,e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var r=0,a=1;32>r;r++,a++){var u=r/32*Math.PI*2,p=a/32*Math.PI*2;e.push(Math.cos(u),Math.sin(u),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new Or(e,3)),e=new Yi({fog:!1,toneMapped:!1}),this.cone=new da(n,e),this.add(this.cone),this.update()}function Af(n){var e=[];n&&n.isBone&&e.push(n);for(var r=0;r<n.children.length;r++)e.push.apply(e,Af(n.children[r]));return e}function Cf(n){for(var e=Af(n),r=new $r,a=[],u=[],p=new vt(0,0,1),y=new vt(0,1,0),C=0;C<e.length;C++){var S=e[C];S.parent&&S.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),u.push(p.r,p.g,p.b),u.push(y.r,y.g,y.b))}r.setAttribute("position",new Or(a,3)),r.setAttribute("color",new Or(u,3)),a=new Yi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),da.call(this,r,a),this.type="SkeletonHelper",this.root=n,this.bones=e,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1}function md(n,e,r){this.light=n,this.light.updateMatrixWorld(),this.color=r,n=new yu(e,4,2),e=new wr({wireframe:!0,fog:!1,toneMapped:!1}),oa.call(this,n,e),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Ph(n,e,r){Cr.call(this),this.light=n,this.light.updateMatrixWorld(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,n=new Rs(e),n.rotateY(.5*Math.PI),this.material=new wr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0),e=n.getAttribute("position"),e=new Float32Array(3*e.count),n.setAttribute("color",new Jr(e,3)),this.add(new oa(n,this.material)),this.update()}function Tu(n,e,r,a){n=n||10,e=e||10,r=new vt(r!==void 0?r:4473924),a=new vt(a!==void 0?a:8947848);var u=e/2,p=n/e,y=n/2;n=[];for(var C=[],S=0,R=0,N=-y;S<=e;S++,N+=p){n.push(-y,0,N,y,0,N),n.push(N,0,-y,N,0,y);var z=S===u?r:a;z.toArray(C,R),R+=3,z.toArray(C,R),R+=3,z.toArray(C,R),R+=3,z.toArray(C,R),R+=3}e=new $r,e.setAttribute("position",new Or(n,3)),e.setAttribute("color",new Or(C,3)),r=new Yi({vertexColors:!0,toneMapped:!1}),da.call(this,e,r),this.type="GridHelper"}function ys(n,e,r,a,u,p){n=n||10,e=e||16,r=r||8,a=a||64,u=new vt(u!==void 0?u:4473924),p=new vt(p!==void 0?p:8947848);var y=[],C=[],S;for(S=0;S<=e;S++){var R=S/e*2*Math.PI,N=Math.sin(R)*n;R=Math.cos(R)*n,y.push(0,0,0),y.push(N,0,R);var z=S&1?u:p;C.push(z.r,z.g,z.b),C.push(z.r,z.g,z.b)}for(S=0;S<=r;S++){z=S&1?u:p;var Z=n-n/r*S;for(e=0;e<a;e++)R=e/a*2*Math.PI,N=Math.sin(R)*Z,R=Math.cos(R)*Z,y.push(N,0,R),C.push(z.r,z.g,z.b),R=(e+1)/a*2*Math.PI,N=Math.sin(R)*Z,R=Math.cos(R)*Z,y.push(N,0,R),C.push(z.r,z.g,z.b)}n=new $r,n.setAttribute("position",new Or(y,3)),n.setAttribute("color",new Or(C,3)),y=new Yi({vertexColors:!0,toneMapped:!1}),da.call(this,n,y),this.type="PolarGridHelper"}function xs(n,e,r){Cr.call(this),this.light=n,this.light.updateMatrixWorld(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,e===void 0&&(e=1),n=new $r,n.setAttribute("position",new Or([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new Yi({fog:!1,toneMapped:!1}),this.lightPlane=new ks(n,e),this.add(this.lightPlane),n=new $r,n.setAttribute("position",new Or([0,0,0,0,0,1],3)),this.targetLine=new ks(n,e),this.add(this.targetLine),this.update()}function $c(n){function e(K,ne,oe){r(K,oe),r(ne,oe)}function r(K,ne){p.push(0,0,0),y.push(ne.r,ne.g,ne.b),C[K]===void 0&&(C[K]=[]),C[K].push(p.length/3-1)}var a=new $r,u=new Yi({color:16777215,vertexColors:!0,toneMapped:!1}),p=[],y=[],C={},S=new vt(16755200),R=new vt(16711680),N=new vt(43775),z=new vt(16777215),Z=new vt(3355443);e("n1","n2",S),e("n2","n4",S),e("n4","n3",S),e("n3","n1",S),e("f1","f2",S),e("f2","f4",S),e("f4","f3",S),e("f3","f1",S),e("n1","f1",S),e("n2","f2",S),e("n3","f3",S),e("n4","f4",S),e("p","n1",R),e("p","n2",R),e("p","n3",R),e("p","n4",R),e("u1","u2",N),e("u2","u3",N),e("u3","u1",N),e("c","t",z),e("p","c",Z),e("cn1","cn2",Z),e("cn3","cn4",Z),e("cf1","cf2",Z),e("cf3","cf4",Z),a.setAttribute("position",new Or(p,3)),a.setAttribute("color",new Or(y,3)),da.call(this,a,u),this.type="CameraHelper",this.camera=n,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=C,this.update()}function Pa(n,e,r,a,u,p,y){if(hi.set(u,p,y).unproject(a),n=e[n],n!==void 0)for(r=r.getAttribute("position"),e=0,a=n.length;e<a;e++)r.setXYZ(n[e],hi.x,hi.y,hi.z)}function As(n,e){this.object=n,e===void 0&&(e=16776960),n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=new Float32Array(24),a=new $r;a.setIndex(new Jr(n,1)),a.setAttribute("position",new Jr(r,3)),da.call(this,a,new Yi({color:e,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function eh(n,e){this.type="Box3Helper",this.box=n,e=e||16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=new $r;r.setIndex(new Jr(n,1)),r.setAttribute("position",new Or([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),da.call(this,r,new Yi({color:e,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function au(n,e,r){this.plane=n,this.size=e===void 0?1:e,n=r!==void 0?r:16776960,e=new $r,e.setAttribute("position",new Or([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),e.computeBoundingSphere(),ks.call(this,e,new Yi({color:n,toneMapped:!1})),this.type="PlaneHelper",e=new $r,e.setAttribute("position",new Or([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),this.add(new oa(e,new wr({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function Va(n,e,r,a,u,p){Cr.call(this),this.type="ArrowHelper",n===void 0&&(n=new xe(0,0,1)),e===void 0&&(e=new xe(0,0,0)),r===void 0&&(r=1),a===void 0&&(a=16776960),u===void 0&&(u=.2*r),p===void 0&&(p=.2*u),Io===void 0&&(Io=new $r,Io.setAttribute("position",new Or([0,0,0,0,1,0],3)),sc=new zt(0,.5,1,5,1),sc.translate(0,-.5,0)),this.position.copy(e),this.line=new ks(Io,new Yi({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new oa(sc,new wr({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(r,u,p)}function ng(n){n=n||1;var e=[0,0,0,n,0,0,0,0,0,0,n,0,0,0,0,0,0,n];n=new $r,n.setAttribute("position",new Or(e,3)),n.setAttribute("color",new Or([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new Yi({vertexColors:!0,toneMapped:!1}),da.call(this,n,e),this.type="AxesHelper"}function wf(n){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ml.call(this,n),this.type="catmullrom"}function Ic(){}function th(n,e){for(var r in e)n[r]=e[r]}function fs(n,e){this.lng=n,this.lat=e}function vd(n,e){this.x=n,this.y=e}function _f(n){for(var e=n.length;0<=--e;)n[e]=0}function Rh(n,e){return function(r){return e(n(r))}}function p0(n){var e=function(a){return a==null?a:(1<arguments.length&&(a=Array.prototype.slice.call(arguments)),n(a))};return"conversion"in n&&(e.conversion=n.conversion),e}function Cs(n){var e=function(a){if(a==null)return a;1<arguments.length&&(a=Array.prototype.slice.call(arguments));var u=n(a);if((typeof u=="undefined"?"undefined":Jn(u))==="object")for(var p=u.length,y=0;y<p;y++)u[y]=Math.round(u[y]);return u};return"conversion"in n&&(e.conversion=n.conversion),e}function Ki(n,e){if(!(this instanceof Ki))return new Ki(n,e);if(e&&e in Tw&&(e=null),e&&!(e in Hf))throw Error("Unknown model: "+e);if(typeof n=="undefined")this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof Ki)this.model=n.model,this.color=n.color.slice(),this.valpha=n.valpha;else if(typeof n=="string"){if(e=z1.get(n),e===null)throw Error("Unable to parse color from string: "+n);this.model=e.model;var r=Hf[this.model].channels;this.color=e.value.slice(0,r),this.valpha=typeof e.value[r]=="number"?e.value[r]:1}else if(n.length)this.model=e||"rgb",r=Hf[this.model].channels,e=tC.call(n,0,r),this.color=fp(e,r),this.valpha=typeof n[r]=="number"?n[r]:1;else if(typeof n=="number")n&=16777215,this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{if(this.valpha=1,e=Ei(n),"alpha"in n&&(e.splice(e.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0),e=e.sort().join(""),!(e in rC))throw Error("Unable to parse color from object: "+ha(n));this.model=rC[e],r=Hf[this.model].labels;var a=[];for(e=0;e<r.length;e++)a.push(n[r[e]]);this.color=fp(a)}if(uA[this.model])for(r=Hf[this.model].channels,e=0;e<r;e++)(n=uA[this.model][e])&&(this.color[e]=n(this.color[e]));this.valpha=Math.max(0,Math.min(1,this.valpha)),dh&&dh(this)}function ri(n){return function(e){return Number(e.toFixed(n))}}function qo(n,e,r){return n=Array.isArray(n)?n:[n],n.forEach(function(a){(uA[a]||(uA[a]=[]))[e]=r}),n=n[0],function(a){if(arguments.length){r&&(a=r(a));var u=this[n]();return u.color[e]=a,u}return u=this[n]().color[e],r&&(u=r(u)),u}}function po(n){return function(e){return Math.max(0,Math.min(n,e))}}function fp(n,e){for(var r=0;r<e;r++)typeof n[r]!="number"&&(n[r]=0);return n}function ds(){this.needsSwap=this.enabled=!0,this.renderToScreen=this.clear=!1}var vl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Wt!="undefined"?Wt:typeof self!="undefined"?self:{},xi=Ye(function(n){n=n.exports=typeof window!="undefined"&&Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")(),typeof __g=="number"&&(__g=n)}),Un=Ye(function(n){n=n.exports={version:"2.6.5"},typeof __e=="number"&&(__e=n)}),Ju=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e},sa=function(e,r,a){if(Ju(e),r===void 0)return e;switch(a){case 1:return function(u){return e.call(r,u)};case 2:return function(u,p){return e.call(r,u,p)};case 3:return function(u,p,y){return e.call(r,u,p,y)}}return function(){return e.apply(r,arguments)}},Wa=function(e){return typeof e=="object"?e!==null:typeof e=="function"},Ds=function(e){if(!Wa(e))throw TypeError(e+" is not an object!");return e},Ec=function(e){try{return!!e()}catch(r){return!0}},yl=!Ec(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),Dl=xi.document,Mf=Wa(Dl)&&Wa(Dl.createElement),om=!yl&&!Ec(function(){return Object.defineProperty(Mf?Dl.createElement("div"):{},"a",{get:function(){return 7}}).a!=7}),yd=function(e,r){if(!Wa(e))return e;var a,u;if(r&&typeof(a=e.toString)=="function"&&!Wa(u=a.call(e))||typeof(a=e.valueOf)=="function"&&!Wa(u=a.call(e))||!r&&typeof(a=e.toString)=="function"&&!Wa(u=a.call(e)))return u;throw TypeError("Can't convert object to primitive value")},dp=Object.defineProperty,el={f:yl?Object.defineProperty:function(n,e,r){if(Ds(n),e=yd(e,!0),Ds(r),om)try{return dp(n,e,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(n[e]=r.value),n}},tl=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},ws=yl?function(n,e,r){return el.f(n,e,tl(1,r))}:function(n,e,r){return n[e]=r,n},rh={}.hasOwnProperty,uo=function(e,r){return rh.call(e,r)},ya=function n(e,r,a){var u=e&n.F,p=e&n.G,y=e&n.S,C=e&n.P,S=e&n.B,R=e&n.W,N=p?Un:Un[r]||(Un[r]={}),z=N.prototype;y=p?xi:y?xi[r]:(xi[r]||{}).prototype;var Z;p&&(a=r);for(Z in a)if(r=!u&&y&&y[Z]!==void 0,!r||!uo(N,Z)){var K=r?y[Z]:a[Z];N[Z]=p&&typeof y[Z]!="function"?a[Z]:S&&r?sa(K,xi):R&&y[Z]==K?function(ne){var oe=function(je,Ie,ze){if(this instanceof ne){switch(arguments.length){case 0:return new ne;case 1:return new ne(je);case 2:return new ne(je,Ie)}return new ne(je,Ie,ze)}return ne.apply(this,arguments)};return oe.prototype=ne.prototype,oe}(K):C&&typeof K=="function"?sa(Function.call,K):K,C&&((N.virtual||(N.virtual={}))[Z]=K,e&n.R&&z&&!z[Z]&&ws(z,Z,K))}};ya.F=1,ya.G=2,ya.S=4,ya.P=8,ya.B=16,ya.W=32,ya.U=64,ya.R=128;var _r=ya;_r(_r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}});var xd=Un.Math.log2,ig=Ye(function(n){n.exports={default:xd,__esModule:!0}}),Sf=At(ig),pp=Math.ceil,Tf=Math.floor,og=function(e){return isNaN(e=+e)?0:(0<e?Tf:pp)(e)},nh=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e},Xs={},vv={}.toString,rl=function(e){return vv.call(e).slice(8,-1)},gp=Object("z").propertyIsEnumerable(0)?Object:function(n){return rl(n)=="String"?n.split(""):Object(n)},xl=function(e){return gp(nh(e))},ih=Math.min,If=function(e){return 0<e?ih(og(e),9007199254740991):0},oh=Math.max,qu=Math.min,su=Ye(function(n){var e=xi["__core-js_shared__"]||(xi["__core-js_shared__"]={});(n.exports=function(r,a){return e[r]||(e[r]=a!==void 0?a:{})})("versions",[]).push({version:Un.version,mode:"pure",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),yv=0,Ef=Math.random(),Gi=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++yv+Ef).toString(36))},xv=su("keys"),am=function(e){return xv[e]||(xv[e]=Gi(e))},mp=function(n){return function(e,r,a){e=xl(e);var u=If(e.length);if(a=og(a),a=0>a?oh(a+u,0):qu(a,u),n&&r!=r){for(;u>a;)if(r=e[a++],r!=r)return!0}else for(;u>a;a++)if((n||a in e)&&e[a]===r)return n||a||0;return!n&&-1}}(!1),ag=am("IE_PROTO"),Av=function(e,r){e=xl(e);var a=0,u=[],p;for(p in e)p!=ag&&uo(e,p)&&u.push(p);for(;r.length>a;)uo(e,p=r[a++])&&(~mp(u,p)||u.push(p));return u},sg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),nl=Object.keys||function(n){return Av(n,sg)},Cv=yl?Object.defineProperties:function(n,e){Ds(n);for(var r=nl(e),a=r.length,u=0,p;a>u;)el.f(n,p=r[u++],e[p]);return n},vp=xi.document,lg=vp&&vp.documentElement,wv=am("IE_PROTO"),bf=function(){},es=function(){var e=Mf?Dl.createElement("iframe"):{},r=sg.length;for(e.style.display="none",lg.appendChild(e),e.src="javascript:",e=e.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),es=e.F;r--;)delete es.prototype[sg[r]];return es()},ts=Object.create||function(n,e){if(n!==null){bf.prototype=Ds(n);var r=new bf;bf.prototype=null,r[wv]=n}else r=es();return e===void 0?r:Cv(r,e)},Qi=Ye(function(n){var e=su("wks"),r=xi.Symbol,a=typeof r=="function";(n.exports=function(u){return e[u]||(e[u]=a&&r[u]||(a?r:Gi)("Symbol."+u))}).store=e}),ah=el.f,Iu=Qi("toStringTag"),Oh=function(e,r,a){e&&!uo(e=a?e:e.prototype,Iu)&&ah(e,Iu,{configurable:!0,value:r})},ug={};ws(ug,Qi("iterator"),function(){return this});var Fl=function(e,r,a){e.prototype=ts(ug,{next:tl(1,a)}),Oh(e,r+" Iterator")},yp=am("IE_PROTO"),cg=Object.prototype,sh=Object.getPrototypeOf||function(n){return n=Object(nh(n)),uo(n,yp)?n[yp]:typeof n.constructor=="function"&&n instanceof n.constructor?n.constructor.prototype:n instanceof Object?cg:null},hg=Qi("iterator"),Qu=!([].keys&&"next"in[].keys()),sm=function(){return this},Lf=function(e,r,a,u,p,y,C){Fl(a,r,u),u=function(ze){return!Qu&&ze in z?z[ze]:function(){return new a(this,ze)}};var S=r+" Iterator",R=p=="values",N=!1,z=e.prototype,Z=z[hg]||z["@@iterator"]||p&&z[p],K=Z||u(p),ne=p?R?u("entries"):K:void 0,oe=r=="Array"&&z.entries||Z,be;if(oe&&(e=sh(oe.call(new e)),e!==Object.prototype&&e.next&&Oh(e,S,!0)),R&&Z&&Z.name!=="values"&&(N=!0,K=function(){return Z.call(this)}),C&&(Qu||N||!z[hg])&&ws(z,hg,K),Xs[r]=K,Xs[S]=sm,p){var je={values:R?K:u("values"),keys:y?K:u("keys"),entries:ne};if(C)for(be in je)be in z||ws(z,be,je[be]);else _r(_r.P+_r.F*(Qu||N),r,je)}return je},lm=function(n){return function(e,r){e=String(nh(e)),r=og(r);var a=e.length,u;if(0>r||r>=a)return n?"":void 0;var p=e.charCodeAt(r);return 55296>p||56319<p||r+1===a||56320>(u=e.charCodeAt(r+1))||57343<u?n?e.charAt(r):p:n?e.slice(r,r+2):(p-55296<<10)+(u-56320)+65536}}(!0);Lf(String,"String",function(n){this._t=String(n),this._i=0},function(){var n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(n=lm(n,e),this._i+=n.length,{value:n,done:!1})});var um=function(e,r,a,u){try{return u?r(Ds(a)[0],a[1]):r(a)}catch(p){throw r=e.return,r!==void 0&&Ds(r.call(e)),p}},xp=Qi("iterator"),fg=Array.prototype,dg=Qi("toStringTag"),cm=rl(function(){return arguments}())=="Arguments",Eu=function(e){var r;if(e===void 0)var a="Undefined";else{if(e===null)var u="Null";else{e:{var p=e=Object(e);try{u=p[dg];break e}catch(y){}u=void 0}u=typeof(a=u)=="string"?a:cm?rl(e):(r=rl(e))=="Object"&&typeof e.callee=="function"?"Arguments":r}a=u}return a},g0=Qi("iterator"),Ap=Un.getIteratorMethod=function(n){if(n!=null)return n[g0]||n["@@iterator"]||Xs[Eu(n)]},il=Qi("iterator"),$u=!1;try{[7][il]().return=function(){$u=!0}}catch(n){}var Dh=function(e,r){if(!r&&!$u)return!1;var a=!1;try{r=[7];var u=r[il]();u.next=function(){return{done:a=!0}},r[il]=function(){return u},e(r)}catch(p){}return a};_r(_r.S+_r.F*!Dh(function(n){}),"Array",{from:function(e){var r=Object(nh(e)),a=typeof this=="function"?this:Array,u=arguments.length,p=1<u?arguments[1]:void 0,y=p!==void 0,C=0,S=Ap(r),R;if(y&&(p=sa(p,2<u?arguments[2]:void 0,2)),S!=null&&(a!=Array||S===void 0||Xs.Array!==S&&fg[xp]!==S))for(r=S.call(r),a=new a;!(R=r.next()).done;C++)u=a,S=C,R=y?um(r,p,[R.value,C],!0):R.value,S in u?el.f(u,S,tl(0,R)):u[S]=R;else for(u=If(r.length),a=new a(u);u>C;C++){S=a,R=C;var N=y?p(r[C],C):r[C];R in S?el.f(S,R,tl(0,N)):S[R]=N}return a.length=C,a}});var hm=Un.Array.from,Nl=Ye(function(n){n.exports={default:hm,__esModule:!0}}),lh=At(Nl),ec=function(e,r){return{value:r,done:!!e}};Lf(Array,"Array",function(n,e){this._t=xl(n),this._i=0,this._k=e},function(){var n=this._t,e=this._k,r=this._i++;return!n||r>=n.length?(this._t=void 0,ec(1)):e=="keys"?ec(0,r):e=="values"?ec(0,n[r]):ec(0,[r,n[r]])},"values"),Xs.Arguments=Xs.Array;for(var Cp=Qi("toStringTag"),fm="CSSRuleList CSSStyleDeclaration CSSValueList ClientRectList DOMRectList DOMStringList DOMTokenList DataTransferItemList FileList HTMLAllCollection HTMLCollection HTMLFormElement HTMLSelectElement MediaList MimeTypeArray NamedNodeMap NodeList PaintRequestList Plugin PluginArray SVGLengthList SVGNumberList SVGPathSegList SVGPointList SVGStringList SVGTransformList SourceBufferList StyleSheetList TextTrackCueList TextTrackList TouchList".split(" "),Ad=0;Ad<fm.length;Ad++){var ui=fm[Ad],Bl=xi[ui],pg=Bl&&Bl.prototype;pg&&!pg[Cp]&&ws(pg,Cp,ui),Xs[ui]=Xs.Array}var Qr=function(e,r,a,u){if(!(e instanceof r)||u!==void 0&&u in e)throw TypeError(a+": incorrect invocation!");return e},uh=Ye(function(n){var e={},r={};n=n.exports=function(a,u,p,y,C){C=C?function(){return a}:Ap(a),p=sa(p,y,u?2:1),y=0;var S,R;if(typeof C!="function")throw TypeError(a+" is not iterable!");if(C===void 0||Xs.Array!==C&&fg[xp]!==C){for(y=C.call(a);!(R=y.next()).done;)if(C=um(y,p,R.value,u),C===e||C===r)return C}else for(S=If(a.length);S>y;y++)if(C=u?p(Ds(R=a[y])[0],R[1]):p(a[y]),C===e||C===r)return C},n.BREAK=e,n.RETURN=r}),la=Qi("species"),ps=function(e,r){e=Ds(e).constructor;var a;return e===void 0||(a=Ds(e)[la])==null?r:Ju(a)},Fh=function(e,r,a){var u=a===void 0;switch(r.length){case 0:return u?e():e.call(a);case 1:return u?e(r[0]):e.call(a,r[0]);case 2:return u?e(r[0],r[1]):e.call(a,r[0],r[1]);case 3:return u?e(r[0],r[1],r[2]):e.call(a,r[0],r[1],r[2]);case 4:return u?e(r[0],r[1],r[2],r[3]):e.call(a,r[0],r[1],r[2],r[3])}return e.apply(a,r)},gg=xi.process,Cd=xi.setImmediate,_v=xi.clearImmediate,dm=xi.MessageChannel,ch=xi.Dispatch,mg=0,hh={},xo=function(){var e=+this;if(hh.hasOwnProperty(e)){var r=hh[e];delete hh[e],r()}},pm=function(e){xo.call(e.data)};if(!Cd||!_v)if(Cd=function(e){for(var r=[],a=1;arguments.length>a;)r.push(arguments[a++]);return hh[++mg]=function(){Fh(typeof e=="function"?e:Function(e),r)},zl(mg),mg},_v=function(e){delete hh[e]},rl(gg)=="process")var zl=function(e){gg.nextTick(sa(xo,e,1))};else if(ch&&ch.now)zl=function(e){ch.now(sa(xo,e,1))};else if(dm){var vg=new dm,gm=vg.port2;vg.port1.onmessage=pm,zl=sa(gm.postMessage,gm,1)}else xi.addEventListener&&typeof postMessage=="function"&&!xi.importScripts?(zl=function(e){xi.postMessage(e+"","*")},xi.addEventListener("message",pm,!1)):zl="onreadystatechange"in(Mf?Dl.createElement("script"):{})?function(n){lg.appendChild(Mf?Dl.createElement("script"):{}).onreadystatechange=function(){lg.removeChild(this),xo.call(n)}}:function(n){setTimeout(sa(xo,n,1),0)};var mm=Cd,tc=xi.MutationObserver||xi.WebKitMutationObserver,lu=xi.process,yg=xi.Promise,bu=rl(lu)=="process",Nh={f:function(e){return new Ut(e)}},Bh=function(e){try{return{e:!1,v:e()}}catch(r){return{e:!0,v:r}}},wd=xi.navigator,_d=wd&&wd.userAgent||"",bc=function(e,r){if(Ds(e),Wa(r)&&r.constructor===e)return r;e=Nh.f(e);var a=e.resolve;return a(r),e.promise},kn=function(e,r,a){for(var u in r)a&&e[u]?e[u]=r[u]:ws(e,u,r[u]);return e},zh=Qi("species"),Al=function(e){e=typeof Un[e]=="function"?Un[e]:xi[e],yl&&e&&!e[zh]&&el.f(e,zh,{configurable:!0,get:function(){return this}})},Qo=function(){var n,e,r=function(){var S;for(bu&&(S=lu.domain)&&S.exit();n;){var R=n.fn;n=n.next;try{R()}catch(N){throw n?a():e=void 0,N}}e=void 0,S&&S.enter()};if(bu)var a=function(){lu.nextTick(r)};else if(!tc||xi.navigator&&xi.navigator.standalone)if(yg&&yg.resolve){var u=yg.resolve(void 0);a=function(){u.then(r)}}else a=function(){mm.call(xi,r)};else{var p=!0,y=document.createTextNode("");new tc(r).observe(y,{characterData:!0}),a=function(){y.data=p=!p}}return function(C){C={fn:C,next:void 0},e&&(e.next=C),n||(n=C,a()),e=C}}(),In=xi.TypeError,ni=xi.process,vm=ni&&ni.versions,Xa=vm&&vm.v8||"",jr=xi.Promise,wp=Eu(ni)=="process",_p=function(){},ym,Pf=ym=Nh.f,Mp=!!function(){try{var n=jr.resolve(1),e=(n.constructor={})[Qi("species")]=function(r){r(_p,_p)};return(wp||typeof PromiseRejectionEvent=="function")&&n.then(_p)instanceof e&&Xa.indexOf("6.6")!==0&&_d.indexOf("Chrome/66")===-1}catch(r){}}(),Mv=function(e){var r;return Wa(e)&&typeof(r=e.then)=="function"?r:!1},Md=function(e,r){if(!e._n){e._n=!0;var a=e._c;Qo(function(){for(var u=e._v,p=e._s==1,y=0;a.length>y;){var C=void 0,S=void 0,R=void 0,N=a[y++],z=p?N.ok:N.fail,Z=N.resolve,K=N.reject,ne=N.domain;try{z?(p||(e._h==2&&Ys(e),e._h=1),z===!0?R=u:(ne&&ne.enter(),R=z(u),ne&&(ne.exit(),C=!0)),R===N.promise?K(In("Promise-chain cycle")):(S=Mv(R))?S.call(R,Z,K):Z(R)):K(u)}catch(oe){ne&&!C&&ne.exit(),K(oe)}}e._c=[],e._n=!1,r&&!e._h&&Ul(e)})}},Ul=function(e){mm.call(xi,function(){var r=e._v,a=e._h!==1&&(e._a||e._c).length===0,u,p;if(a){var y=Bh(function(){wp?ni.emit("unhandledRejection",r,e):(u=xi.onunhandledrejection)?u({promise:e,reason:r}):(p=xi.console)&&p.error&&p.error("Unhandled promise rejection",r)});e._h=wp||e._h!==1&&(e._a||e._c).length===0?2:1}if(e._a=void 0,a&&y.e)throw y.v})},Ys=function(e){mm.call(xi,function(){var r;wp?ni.emit("rejectionHandled",e):(r=xi.onrejectionhandled)&&r({promise:e,reason:e._v})})},fh=function(e){var r=this;r._d||(r._d=!0,r=r._w||r,r._v=e,r._s=2,r._a||(r._a=r._c.slice()),Md(r,!0))},xg=function n(e){var r=this,a;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw In("Promise can't be resolved itself");(a=Mv(e))?Qo(function(){var u={_w:r,_d:!1};try{a.call(e,sa(n,u,1),sa(fh,u,1))}catch(p){fh.call(u,p)}}):(r._v=e,r._s=1,Md(r,!1))}catch(u){fh.call({_w:r,_d:!1},u)}}};if(!Mp){jr=function(e){Qr(this,jr,"Promise","_h"),Ju(e),Sp.call(this);try{e(sa(xg,this,1),sa(fh,this,1))}catch(r){fh.call(this,r)}};var Sp=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1};Sp.prototype=kn(jr.prototype,{then:function(e,r){var a=Pf(ps(this,jr));return a.ok=typeof e=="function"?e:!0,a.fail=typeof r=="function"&&r,a.domain=wp?ni.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&Md(this,!1),a.promise},catch:function(e){return this.then(void 0,e)}});var Sv=function(){var e=new Sp;this.promise=e,this.resolve=sa(xg,e,1),this.reject=sa(fh,e,1)};Nh.f=Pf=function(e){return e===jr||e===Rf?new Sv(e):ym(e)}}_r(_r.G+_r.W+_r.F*!Mp,{Promise:jr}),Oh(jr,"Promise"),Al("Promise");var Rf=Un.Promise;_r(_r.S+_r.F*!Mp,"Promise",{reject:function(e){var r=Pf(this),a=r.reject;return a(e),r.promise}}),_r(_r.S+1*_r.F,"Promise",{resolve:function(e){return bc(this===Rf?jr:this,e)}}),_r(_r.S+_r.F*!(Mp&&Dh(function(n){jr.all(n).catch(_p)})),"Promise",{all:function(e){var r=this,a=Pf(r),u=a.resolve,p=a.reject,y=Bh(function(){var C=[],S=0,R=1;uh(e,!1,function(N){var z=S++,Z=!1;C.push(void 0),R++,r.resolve(N).then(function(K){Z||(Z=!0,C[z]=K,--R||u(C))},p)}),--R||u(C)});return y.e&&p(y.v),a.promise},race:function(e){var r=this,a=Pf(r),u=a.reject,p=Bh(function(){uh(e,!1,function(y){r.resolve(y).then(a.resolve,u)})});return p.e&&u(p.v),a.promise}}),_r(_r.P+_r.R,"Promise",{finally:function(e){var r=ps(this,Un.Promise||xi.Promise),a=typeof e=="function";return this.then(a?function(u){return bc(r,e()).then(function(){return u})}:e,a?function(u){return bc(r,e()).then(function(){throw u})}:e)}}),_r(_r.S,"Promise",{try:function(e){var r=Nh.f(this);return e=Bh(e),(e.e?r.reject:r.resolve)(e.v),r.promise}});var rc=Un.Promise,Sd=Ye(function(n){n.exports={default:rc,__esModule:!0}}),Si=At(Sd),Td=Ye(function(n){var e=Gi("meta"),r=el.f,a=0,u=Object.isExtensible||function(){return!0},p=!Ec(function(){return u(Object.preventExtensions({}))}),y=function(R){r(R,e,{value:{i:"O"+ ++a,w:{}}})},C=n.exports={KEY:e,NEED:!1,fastKey:function(R,N){if(!Wa(R))return typeof R=="symbol"?R:(typeof R=="string"?"S":"P")+R;if(!uo(R,e)){if(!u(R))return"F";if(!N)return"E";y(R)}return R[e].i},getWeak:function(R,N){if(!uo(R,e)){if(!u(R))return!0;if(!N)return!1;y(R)}return R[e].w},onFreeze:function(R){return p&&C.NEED&&u(R)&&!uo(R,e)&&y(R),R}}}),Tp=function(e,r){var a=(Un.Object||{})[e]||Object[e],u={};u[e]=r(a),_r(_r.S+_r.F*Ec(function(){a(1)}),"Object",u)},m0=Td.onFreeze;Tp("freeze",function(n){return function(e){return n&&Wa(e)?n(m0(e)):e}});var Tv=Un.Object.freeze,Iv=Ye(function(n){n.exports={default:Tv,__esModule:!0}}),dh=At(Iv),Of={f:Qi},Lu=Of.f("iterator"),Zs=Ye(function(n){n.exports={default:Lu,__esModule:!0}});At(Zs);var Ip=el.f,Df=function(e){var r=Un.Symbol||(Un.Symbol={});e.charAt(0)=="_"||e in r||Ip(r,e,{value:Of.f(e)})},Ag=Object.getOwnPropertySymbols,Id={}.propertyIsEnumerable,Ff=Array.isArray||function(n){return rl(n)=="Array"},Ev=sg.concat("length","prototype"),Cl=Object.getOwnPropertyNames||function(n){return Av(n,Ev)},Lc=Cl,xm={}.toString,Ep=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],bv=function(e){if(Ep&&xm.call(e)=="[object Window]")try{var r=Lc(e)}catch(a){r=Ep.slice()}else r=Lc(xl(e));return r},j=Object.getOwnPropertyDescriptor,J={f:yl?j:function(n,e){if(n=xl(n),e=yd(e,!0),om)try{return j(n,e)}catch(r){}if(uo(n,e))return tl(!Id.call(n,e),n[e])}},$=Td.KEY,V=J.f,H=el.f,te=bv,ie=xi.Symbol,le=xi.JSON,ue=le&&le.stringify,we=Qi("_hidden"),Pe=Qi("toPrimitive"),Re={}.propertyIsEnumerable,Ue=su("symbol-registry"),Ke=su("symbols"),it=su("op-symbols"),ut=Object.prototype,rt=typeof ie=="function",Ct=xi.QObject,yt=!Ct||!Ct.prototype||!Ct.prototype.findChild,Kt=yl&&Ec(function(){return ts(H({},"a",{get:function(){return H(this,"a",{value:7}).a}})).a!=7})?function(n,e,r){var a=V(ut,e);a&&delete ut[e],H(n,e,r),a&&n!==ut&&H(ut,e,a)}:H,ar=function(e){var r=Ke[e]=ts(ie.prototype);return r._k=e,r},er=rt&&typeof ie.iterator=="symbol"?function(n){return typeof n=="symbol"}:function(n){return n instanceof ie},Yt=function n(e,r,a){return e===ut&&n(it,r,a),Ds(e),r=yd(r,!0),Ds(a),uo(Ke,r)?(a.enumerable?(uo(e,we)&&e[we][r]&&(e[we][r]=!1),a=ts(a,{enumerable:tl(0,!1)})):(uo(e,we)||H(e,we,tl(1,{})),e[we][r]=!0),Kt(e,r,a)):H(e,r,a)},sr=function(e,r){Ds(e);var a=r=xl(r),u=nl(a),p=Ag;if(p){p=p(a);for(var y=Id,C=0,S;p.length>C;)y.call(a,S=p[C++])&&u.push(S)}a=0,S=u.length;for(var R;S>a;)Yt(e,R=u[a++],r[R]);return e},jt=function(e){var r=Re.call(this,e=yd(e,!0));return this===ut&&uo(Ke,e)&&!uo(it,e)?!1:r||!uo(this,e)||!uo(Ke,e)||uo(this,we)&&this[we][e]?r:!0},gr=function(e,r){if(e=xl(e),r=yd(r,!0),e!==ut||!uo(Ke,r)||uo(it,r)){var a=V(e,r);return!a||!uo(Ke,r)||uo(e,we)&&e[we][r]||(a.enumerable=!0),a}},ir=function(e){e=te(xl(e));for(var r=[],a=0,u;e.length>a;)uo(Ke,u=e[a++])||u==we||u==$||r.push(u);return r},Pr=function(e){var r=e===ut;e=te(r?it:xl(e));for(var a=[],u=0,p;e.length>u;)uo(Ke,p=e[u++])&&(r?uo(ut,p):1)&&a.push(Ke[p]);return a};rt||(ie=function(){if(this instanceof ie)throw TypeError("Symbol is not a constructor!");var e=Gi(0<arguments.length?arguments[0]:void 0),r=function a(u){this===ut&&a.call(it,u),uo(this,we)&&uo(this[we],e)&&(this[we][e]=!1),Kt(this,e,tl(1,u))};return yl&&yt&&Kt(ut,e,{configurable:!0,set:r}),ar(e)},ws(ie.prototype,"toString",function(){return this._k}),J.f=gr,el.f=Yt,Cl=bv=ir,Id=jt,Ag=Pr,Of.f=function(n){return ar(Qi(n))}),_r(_r.G+_r.W+_r.F*!rt,{Symbol:ie});for(var Yr="hasInstance isConcatSpreadable iterator match replace search species split toPrimitive toStringTag unscopables".split(" "),qt=0;Yr.length>qt;)Qi(Yr[qt++]);for(var xr=nl(Qi.store),cn=0;xr.length>cn;)Df(xr[cn++]);_r(_r.S+_r.F*!rt,"Symbol",{for:function(e){return uo(Ue,e+="")?Ue[e]:Ue[e]=ie(e)},keyFor:function(e){if(!er(e))throw TypeError(e+" is not a symbol!");for(var r in Ue)if(Ue[r]===e)return r},useSetter:function(){yt=!0},useSimple:function(){yt=!1}}),_r(_r.S+_r.F*!rt,"Object",{create:function(e,r){return r===void 0?ts(e):sr(ts(e),r)},defineProperty:Yt,defineProperties:sr,getOwnPropertyDescriptor:gr,getOwnPropertyNames:ir,getOwnPropertySymbols:Pr}),le&&_r(_r.S+_r.F*(!rt||Ec(function(){var n=ie();return ue([n])!="[null]"||ue({a:n})!="{}"||ue(Object(n))!="{}"})),"JSON",{stringify:function(e){for(var r=[e],a=1,u;arguments.length>a;)r.push(arguments[a++]);if(u=a=r[1],(Wa(a)||e!==void 0)&&!er(e))return Ff(a)||(a=function(y,C){if(typeof u=="function"&&(C=u.call(this,y,C)),!er(C))return C}),r[1]=a,ue.apply(le,r)}}),ie.prototype[Pe]||ws(ie.prototype,Pe,ie.prototype.valueOf),Oh(ie,"Symbol"),Oh(Math,"Math",!0),Oh(xi.JSON,"JSON",!0),Df("asyncIterator"),Df("observable");var Cn=Un.Symbol,Gn=Ye(function(n){n.exports={default:Cn,__esModule:!0}});At(Gn);var Wr=Ye(function(n,e){e.__esModule=!0,n=Zs&&Zs.__esModule?Zs:{default:Zs};var r=Gn&&Gn.__esModule?Gn:{default:Gn},a=typeof r.default=="function"&&typeof n.default=="symbol"?function(u){return typeof u}:function(u){return u&&typeof r.default=="function"&&u.constructor===r.default&&u!==r.default.prototype?"symbol":typeof u};e.default=typeof r.default=="function"&&a(n.default)==="symbol"?function(u){return typeof u=="undefined"?"undefined":a(u)}:function(u){return u&&typeof r.default=="function"&&u.constructor===r.default&&u!==r.default.prototype?"symbol":typeof u=="undefined"?"undefined":a(u)}}),Jn=At(Wr),jn=function(e,r){if(!Wa(e)||e._t!==r)throw TypeError("Incompatible receiver, "+r+" required!");return e},Xn=el.f,Wi=Td.fastKey,Ai=yl?"_s":"size",Oi=function(e,r){var a=Wi(r);if(a!=="F")return e._i[a];for(e=e._f;e;e=e.n)if(e.k==r)return e},Ji={getConstructor:function(e,r,a,u){var p=e(function(y,C){Qr(y,p,r,"_i"),y._t=r,y._i=ts(null),y._f=void 0,y._l=void 0,y[Ai]=0,C!=null&&uh(C,a,y[u],y)});return kn(p.prototype,{clear:function(){for(var C=jn(this,r),S=C._i,R=C._f;R;R=R.n)R.r=!0,R.p&&(R.p=R.p.n=void 0),delete S[R.i];C._f=C._l=void 0,C[Ai]=0},delete:function(C){var S=jn(this,r);if(C=Oi(S,C)){var R=C.n,N=C.p;delete S._i[C.i],C.r=!0,N&&(N.n=R),R&&(R.p=N),S._f==C&&(S._f=R),S._l==C&&(S._l=N),S[Ai]--}return!!C},forEach:function(C){jn(this,r);for(var S=sa(C,1<arguments.length?arguments[1]:void 0,3),R;R=R?R.n:this._f;)for(S(R.v,R.k,this);R&&R.r;)R=R.p},has:function(C){return!!Oi(jn(this,r),C)}}),yl&&Xn(p.prototype,"size",{get:function(){return jn(this,r)[Ai]}}),p},def:function(e,r,a){var u=Oi(e,r),p;return u?u.v=a:(e._l=u={i:p=Wi(r,!0),k:r,v:a,p:r=e._l,n:void 0,r:!1},e._f||(e._f=u),r&&(r.n=u),e[Ai]++,p!=="F"&&(e._i[p]=u)),e},getEntry:Oi,setStrong:function(e,r,a){Lf(e,r,function(u,p){this._t=jn(u,r),this._k=p,this._l=void 0},function(){for(var u=this._k,p=this._l;p&&p.r;)p=p.p;return this._t&&(this._l=p=p?p.n:this._t._f)?u=="keys"?ec(0,p.k):u=="values"?ec(0,p.v):ec(0,[p.k,p.v]):(this._t=void 0,ec(1))},a?"entries":"values",!a,!0),Al(r)}},En=Qi("species"),$i=function(e,r){if(Ff(e)){var a=e.constructor;typeof a!="function"||a!==Array&&!Ff(a.prototype)||(a=void 0),Wa(a)&&(a=a[En],a===null&&(a=void 0))}return new(a===void 0?Array:a)(r)},no=function(e,r){var a=e==1,u=e==2,p=e==3,y=e==4,C=e==6,S=e==5||C,R=r||$i;return function(N,z,Z){var K=Object(nh(N)),ne=gp(K);z=sa(z,Z,3),Z=If(ne.length);var oe=0;N=a?R(N,Z):u?R(N,0):void 0;for(var be,je;Z>oe;oe++)if((S||oe in ne)&&(be=ne[oe],je=z(be,oe,K),e)){if(a)N[oe]=je;else if(je)switch(e){case 3:return!0;case 5:return be;case 6:return oe;case 2:N.push(be)}else if(y)return!1}return C?-1:p||y?y:N}},Ao=el.f,ua=no(0),ji=function(e,r,a,u,p,y){var C=xi[e],S=C,R=p?"set":"add",N=S&&S.prototype,z={};return yl&&typeof S=="function"&&(y||N.forEach&&!Ec(function(){new S().entries().next()}))?(S=r(function(Z,K){Qr(Z,S,e,"_c"),Z._c=new C,K!=null&&uh(K,p,Z[R],Z)}),ua("add clear delete forEach get has set keys values entries toJSON".split(" "),function(Z){var K=Z=="add"||Z=="set";Z in N&&(!y||Z!="clear")&&ws(S.prototype,Z,function(ne,oe){return Qr(this,S,Z),!K&&y&&!Wa(ne)?Z=="get"?void 0:!1:(ne=this._c[Z](ne===0?0:ne,oe),K?this:ne)})}),y||Ao(S.prototype,"size",{get:function(){return this._c.size}})):(S=u.getConstructor(r,e,p,R),kn(S.prototype,a),Td.NEED=!0),Oh(S,e),z[e]=S,_r(_r.G+_r.W+_r.F,z),y||u.setStrong(S,e,p),S};ji("Map",function(n){return function(){return n(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){return(e=Ji.getEntry(jn(this,"Map"),e))&&e.v},set:function(e,r){return Ji.def(jn(this,"Map"),e===0?0:e,r)}},Ji,!0),_r(_r.P+_r.R,"Map",{toJSON:function(n){return function(){if(Eu(this)!=n)throw TypeError(n+"#toJSON isn't generic");var e=[];return uh(this,!1,e.push,e,void 0),e}}("Map")});var ii=function(e){_r(_r.S,e,{of:function(){for(var a=arguments.length,u=Array(a);a--;)u[a]=arguments[a];return new this(u)}})};ii("Map");var Ti=function(e){_r(_r.S,e,{from:function(a,u,p){var y;if(Ju(this),(y=u!==void 0)&&Ju(u),a==null)return new this;var C=[];if(y){var S=0,R=sa(u,p,2);uh(a,!1,function(N){C.push(R(N,S++))})}else uh(a,!1,C.push,C);return new this(C)}})};Ti("Map");var Co=Un.Map,wo=Ye(function(n){n.exports={default:Co,__esModule:!0}}),Po=At(wo),_o=Object.assign,Ii=!_o||Ec(function(){var n={},e={},r=Symbol();return n[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),_o({},n)[r]!=7||Object.keys(_o({},e)).join("")!="abcdefghijklmnopqrst"})?function(n,e){for(var r=Object(nh(n)),a=arguments.length,u=1,p=Ag,y=Id;a>u;)for(var C=gp(arguments[u++]),S=p?nl(C).concat(p(C)):nl(C),R=S.length,N=0,z;R>N;)y.call(C,z=S[N++])&&(r[z]=C[z]);return r}:_o,qn=Td.getWeak,Di=no(5),Vn=no(6),Yn=0,fn=function(e){return e._l||(e._l=new Vo)},Vo=function(){this.a=[]},rs=function(e,r){return Di(e.a,function(a){return a[0]===r})};Vo.prototype={get:function(e){if(e=rs(this,e))return e[1]},has:function(e){return!!rs(this,e)},set:function(e,r){var a=rs(this,e);a?a[1]=r:this.a.push([e,r])},delete:function(e){var r=Vn(this.a,function(a){return a[0]===e});return~r&&this.a.splice(r,1),!!~r}};var _s={getConstructor:function(e,r,a,u){var p=e(function(y,C){Qr(y,p,r,"_i"),y._t=r,y._i=Yn++,y._l=void 0,C!=null&&uh(C,a,y[u],y)});return kn(p.prototype,{delete:function(C){if(!Wa(C))return!1;var S=qn(C);return S===!0?fn(jn(this,r)).delete(C):S&&uo(S,this._i)&&delete S[this._i]},has:function(C){if(!Wa(C))return!1;var S=qn(C);return S===!0?fn(jn(this,r)).has(C):S&&uo(S,this._i)}}),p},def:function(e,r,a){var u=qn(Ds(r),!0);return u===!0?fn(e).set(r,a):u[e._i]=a,e},ufstore:fn};Ye(function(n){var e=no(0),r=!xi.ActiveXObject&&"ActiveXObject"in xi,a=Td.getWeak,u=Object.isExtensible,p=_s.ufstore,y=function(z){return function(){return z(this,0<arguments.length?arguments[0]:void 0)}},C={get:function(z){if(Wa(z)){var Z=a(z);return Z===!0?p(jn(this,"WeakMap")).get(z):Z?Z[this._i]:void 0}},set:function(z,Z){return _s.def(jn(this,"WeakMap"),z,Z)}},S=n.exports=ji("WeakMap",y,C,_s,!0,!0);if(jn&&r){var R=_s.getConstructor(y,"WeakMap");Ii(R.prototype,C),Td.NEED=!0,e(["delete","has","get","set"],function(N){var z=S.prototype,Z=z[N];ws(z,N,function(K,ne){return Wa(K)&&!u(K)?(this._f||(this._f=new R),K=this._f[N](K,ne),N=="set"?this:K):Z.call(this,K,ne)})})}}),ii("WeakMap"),Ti("WeakMap");var ns=Un.WeakMap,Uh=Ye(function(n){n.exports={default:ns,__esModule:!0}}),Xi=At(Uh);Tp("keys",function(){return function(n){return nl(Object(nh(n)))}});var wl=Un.Object.keys,gs=Ye(function(n){n.exports={default:wl,__esModule:!0}}),Ei=At(gs),ca=Un.JSON||(Un.JSON={stringify:JSON.stringify}),Mo=function(e){return ca.stringify.apply(ca,arguments)},Na=Ye(function(n){n.exports={default:Mo,__esModule:!0}}),ha=At(Na);_r(_r.S,"Object",{create:ts});var kl=Un.Object,Ya=function(e,r){return kl.create(e,r)},Hl=Ye(function(n){n.exports={default:Ya,__esModule:!0}}),me=At(Hl);_r(_r.S+_r.F*!yl,"Object",{defineProperties:Cv});var Za=Un.Object,co=function(e,r){return Za.defineProperties(e,r)},xa=Ye(function(n){n.exports={default:co,__esModule:!0}}),Zr=At(xa);_r(_r.S+_r.F,"Object",{assign:Ii});var No=Un.Object.assign,Wo=Ye(function(n){n.exports={default:No,__esModule:!0}}),Ce=At(Wo);_r(_r.S,"Math",{sign:Math.sign||function(n){return(n=+n)==0||n!=n?n:0>n?-1:1}});var Pu=Un.Math.sign,Ru=Ye(function(n){n.exports={default:Pu,__esModule:!0}}),Ms=At(Ru),kh=Math.floor;_r(_r.S,"Number",{isInteger:function(e){return!Wa(e)&&isFinite(e)&&kh(e)===e}});var Gl=Un.Number.isInteger,nc=Ye(function(n){n.exports={default:Gl,__esModule:!0}}),ol=At(nc);_r(_r.S,"Number",{EPSILON:Math.pow(2,-52)});var ph=Math.pow(2,-52),al=Ye(function(n){n.exports={default:ph,__esModule:!0}}),Ro=At(al),Ou=Ye(function(n,e){(function(r,a){a(e)})(vl,function(r){function a(){}function u(l,t){this.x=l||0,this.y=t||0}function p(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function y(l,t,i,d,v,w,T,b,D,G){Object.defineProperty(this,"id",{value:yS++}),this.uuid=ho.generateUUID(),this.name="",this.image=l!==void 0?l:y.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:y.DEFAULT_MAPPING,this.wrapS=i!==void 0?i:1001,this.wrapT=d!==void 0?d:1001,this.magFilter=v!==void 0?v:1006,this.minFilter=w!==void 0?w:1008,this.anisotropy=D!==void 0?D:1,this.format=T!==void 0?T:1023,this.internalFormat=null,this.type=b!==void 0?b:1009,this.offset=new u(0,0),this.repeat=new u(1,1),this.center=new u(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new p,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=G!==void 0?G:3e3,this.version=0,this.onUpdate=null}function C(l,t,i,d){this.x=l||0,this.y=t||0,this.z=i||0,this.w=d!==void 0?d:1}function S(l,t,i){this.width=l,this.height=t,this.scissor=new C(0,0,l,t),this.scissorTest=!1,this.viewport=new C(0,0,l,t),i=i||{},this.texture=new y(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=l,this.texture.image.height=t,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:1006,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!0,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}function R(l,t,i){S.call(this,l,t,i),this.samples=4}function N(l,t,i,d){this._x=l||0,this._y=t||0,this._z=i||0,this._w=d!==void 0?d:1}function z(l,t,i){this.x=l||0,this.y=t||0,this.z=i||0}function Z(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function K(l,t,i,d){this._x=l||0,this._y=t||0,this._z=i||0,this._order=d||K.DefaultOrder}function ne(){this.mask=1}function oe(){Object.defineProperty(this,"id",{value:CS++}),this.uuid=ho.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=oe.DefaultUp.clone();var l=new z,t=new K,i=new N,d=new z(1,1,1);t._onChange(function(){i.setFromEuler(t,!1)}),i._onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Zr(this,{position:{configurable:!0,enumerable:!0,value:l},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new Z},normalMatrix:{value:new p}}),this.matrix=new Z,this.matrixWorld=new Z,this.matrixAutoUpdate=oe.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ne,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function be(){oe.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.environment=this.background=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function je(l,t){this.min=l!==void 0?l:new z(Infinity,Infinity,Infinity),this.max=t!==void 0?t:new z(-Infinity,-Infinity,-Infinity)}function Ie(l,t,i,d,v){var w,T=0;for(w=l.length-3;T<=w;T+=3){V0.fromArray(l,T);var b=v.x*Math.abs(V0.x)+v.y*Math.abs(V0.y)+v.z*Math.abs(V0.z),D=t.dot(V0),G=i.dot(V0),Y=d.dot(V0);if(Math.max(-Math.max(D,G,Y),Math.min(D,G,Y))>b)return!1}return!0}function ze(l,t){this.center=l!==void 0?l:new z,this.radius=t!==void 0?t:-1}function et(l,t){this.origin=l!==void 0?l:new z,this.direction=t!==void 0?t:new z(0,0,-1)}function xt(l,t){this.normal=l!==void 0?l:new z(1,0,0),this.constant=t!==void 0?t:0}function gt(l,t,i){this.a=l!==void 0?l:new z,this.b=t!==void 0?t:new z,this.c=i!==void 0?i:new z}function We(l,t,i){return t===void 0&&i===void 0?this.set(l):this.setRGB(l,t,i)}function Rt(l,t,i){return 0>i&&(i+=1),1<i&&--i,i<1/6?l+6*(t-l)*i:.5>i?t:i<2/3?l+6*(t-l)*(2/3-i):l}function Pt(l){return .04045>l?.0773993808*l:Math.pow(.9478672986*l+.0521327014,2.4)}function pr(l){return .0031308>l?12.92*l:1.055*Math.pow(l,.41666)-.055}function Rr(l,t,i,d,v,w){this.a=l,this.b=t,this.c=i,this.normal=d&&d.isVector3?d:new z,this.vertexNormals=Array.isArray(d)?d:[],this.color=v&&v.isColor?v:new We,this.vertexColors=Array.isArray(v)?v:[],this.materialIndex=w!==void 0?w:0}function Tt(){Object.defineProperty(this,"id",{value:bS++}),this.uuid=ho.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=this.flatShading=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.version=0}function gn(l){Tt.call(this),this.type="MeshBasicMaterial",this.color=new We(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphTargets=this.skinning=!1,this.setValues(l)}function tr(l,t,i){if(Array.isArray(l))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=l,this.itemSize=t,this.count=l!==void 0?l.length/t:0,this.normalized=i===!0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function bn(l,t,i){tr.call(this,new Int8Array(l),t,i)}function ai(l,t,i){tr.call(this,new Uint8Array(l),t,i)}function wn(l,t,i){tr.call(this,new Uint8ClampedArray(l),t,i)}function Yo(l,t,i){tr.call(this,new Int16Array(l),t,i)}function On(l,t,i){tr.call(this,new Uint16Array(l),t,i)}function qe(l,t,i){tr.call(this,new Int32Array(l),t,i)}function Le(l,t,i){tr.call(this,new Uint32Array(l),t,i)}function Me(l,t,i){tr.call(this,new Float32Array(l),t,i)}function Je(l,t,i){tr.call(this,new Float64Array(l),t,i)}function de(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Te(l){if(l.length===0)return-Infinity;for(var t=l[0],i=1,d=l.length;i<d;++i)l[i]>t&&(t=l[i]);return t}function Fe(){Object.defineProperty(this,"id",{value:LS+=2}),this.uuid=ho.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:Infinity},this.userData={}}function Ve(l,t){oe.call(this),this.type="Mesh",this.geometry=l!==void 0?l:new Fe,this.material=t!==void 0?t:new gn,this.updateMorphTargets()}function at(l,t,i,d,v,w,T,b){return(t.side===1?d.intersectTriangle(T,w,v,!0,b):d.intersectTriangle(v,w,T,t.side!==2,b))===null?null:(h2.copy(b),h2.applyMatrix4(l.matrixWorld),t=i.ray.origin.distanceTo(h2),t<i.near||t>i.far?null:{distance:t,point:h2.clone(),object:l})}function It(l,t,i,d,v,w,T,b,D,G,Y,re){if(t0.fromBufferAttribute(v,G),r0.fromBufferAttribute(v,Y),n0.fromBufferAttribute(v,re),v=l.morphTargetInfluences,t.morphTargets&&w&&v){l2.set(0,0,0),u2.set(0,0,0),c2.set(0,0,0);for(var se=0,ae=w.length;se<ae;se++){var fe=v[se],ve=w[se];fe!==0&&(ew.fromBufferAttribute(ve,G),tw.fromBufferAttribute(ve,Y),rw.fromBufferAttribute(ve,re),T?(l2.addScaledVector(ew,fe),u2.addScaledVector(tw,fe),c2.addScaledVector(rw,fe)):(l2.addScaledVector(ew.sub(t0),fe),u2.addScaledVector(tw.sub(r0),fe),c2.addScaledVector(rw.sub(n0),fe)))}t0.add(l2),r0.add(u2),n0.add(c2)}return l.isSkinnedMesh&&(l.boneTransform(G,t0),l.boneTransform(Y,r0),l.boneTransform(re,n0)),(l=at(l,t,i,d,t0,r0,n0,bx))&&(b&&(i1.fromBufferAttribute(b,G),o1.fromBufferAttribute(b,Y),a1.fromBufferAttribute(b,re),l.uv=gt.getUV(bx,t0,r0,n0,i1,o1,a1,new u)),D&&(i1.fromBufferAttribute(D,G),o1.fromBufferAttribute(D,Y),a1.fromBufferAttribute(D,re),l.uv2=gt.getUV(bx,t0,r0,n0,i1,o1,a1,new u)),b=new Rr(G,Y,re),gt.getNormal(t0,r0,n0,b.normal),l.face=b),l}function Xe(){Object.defineProperty(this,"id",{value:PS+=2}),this.uuid=ho.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function ot(l){var t={},i;for(i in l){t[i]={};for(var d in l[i]){var v=l[i][d];v&&(v.isColor||v.isMatrix3||v.isMatrix4||v.isVector2||v.isVector3||v.isVector4||v.isTexture)?t[i][d]=v.clone():Array.isArray(v)?t[i][d]=v.slice():t[i][d]=v}}return t}function lr(l){for(var t={},i=0;i<l.length;i++){var d=ot(l[i]),v;for(v in d)t[v]=d[v]}return t}function Ft(l){Tt.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,l!==void 0&&(l.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(l))}function Jt(){oe.call(this),this.type="Camera",this.matrixWorldInverse=new Z,this.projectionMatrix=new Z,this.projectionMatrixInverse=new Z}function Ht(l,t,i,d){Jt.call(this),this.type="PerspectiveCamera",this.fov=l!==void 0?l:50,this.zoom=1,this.near=i!==void 0?i:.1,this.far=d!==void 0?d:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function mn(l,t,i){if(oe.call(this),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{this.renderTarget=i;var d=new Ht(90,1,l,t);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new z(1,0,0)),this.add(d);var v=new Ht(90,1,l,t);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new z(-1,0,0)),this.add(v);var w=new Ht(90,1,l,t);w.layers=this.layers,w.up.set(0,0,1),w.lookAt(new z(0,1,0)),this.add(w);var T=new Ht(90,1,l,t);T.layers=this.layers,T.up.set(0,0,-1),T.lookAt(new z(0,-1,0)),this.add(T);var b=new Ht(90,1,l,t);b.layers=this.layers,b.up.set(0,-1,0),b.lookAt(new z(0,0,1)),this.add(b);var D=new Ht(90,1,l,t);D.layers=this.layers,D.up.set(0,-1,0),D.lookAt(new z(0,0,-1)),this.add(D),this.update=function(G,Y){this.parent===null&&this.updateMatrixWorld();var re=G.xr.enabled,se=G.getRenderTarget();G.xr.enabled=!1;var ae=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,G.setRenderTarget(i,0),G.render(Y,d),G.setRenderTarget(i,1),G.render(Y,v),G.setRenderTarget(i,2),G.render(Y,w),G.setRenderTarget(i,3),G.render(Y,T),G.setRenderTarget(i,4),G.render(Y,b),i.texture.generateMipmaps=ae,G.setRenderTarget(i,5),G.render(Y,D),G.setRenderTarget(se),G.xr.enabled=re},this.clear=function(G,Y,re,se){for(var ae=G.getRenderTarget(),fe=0;6>fe;fe++)G.setRenderTarget(i,fe),G.clear(Y,re,se);G.setRenderTarget(ae)}}}function Zn(l,t,i){ol(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),S.call(this,l,l,t)}function nr(l,t,i,d,v,w,T,b,D,G,Y,re){y.call(this,null,w,T,b,D,G,d,v,Y,re),this.image={data:l||null,width:t||1,height:i||1},this.magFilter=D!==void 0?D:1003,this.minFilter=G!==void 0?G:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1,this.needsUpdate=!0}function Ln(l,t,i,d,v,w){this.planes=[l!==void 0?l:new xt,t!==void 0?t:new xt,i!==void 0?i:new xt,d!==void 0?d:new xt,v!==void 0?v:new xt,w!==void 0?w:new xt]}function Sn(){function l(v,w){i!==!1&&(d(v,w),t.requestAnimationFrame(l))}var t=null,i=!1,d=null;return{start:function(){i!==!0&&d!==null&&(t.requestAnimationFrame(l),i=!0)},stop:function(){i=!1},setAnimationLoop:function(w){d=w},setContext:function(w){t=w}}}function Kr(l,t){function i(w,T){var b=w.array,D=w.usage,G=l.createBuffer();return l.bindBuffer(T,G),l.bufferData(T,b,D),w.onUploadCallback(),T=5126,b instanceof Float32Array?T=5126:b instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):b instanceof Uint16Array?T=5123:b instanceof Int16Array?T=5122:b instanceof Uint32Array?T=5125:b instanceof Int32Array?T=5124:b instanceof Int8Array?T=5120:b instanceof Uint8Array&&(T=5121),{buffer:G,type:T,bytesPerElement:b.BYTES_PER_ELEMENT,version:w.version}}var d=t.isWebGL2,v=new Xi;return{get:function(T){return T.isInterleavedBufferAttribute&&(T=T.data),v.get(T)},remove:function(T){T.isInterleavedBufferAttribute&&(T=T.data);var b=v.get(T);b&&(l.deleteBuffer(b.buffer),v.delete(T))},update:function(T,b){T.isInterleavedBufferAttribute&&(T=T.data);var D=v.get(T);if(D===void 0)v.set(T,i(T,b));else if(D.version<T.version){var G=T.array,Y=T.updateRange;l.bindBuffer(b,D.buffer),Y.count===-1?l.bufferSubData(b,0,G):(d?l.bufferSubData(b,Y.offset*G.BYTES_PER_ELEMENT,G,Y.offset,Y.count):l.bufferSubData(b,Y.offset*G.BYTES_PER_ELEMENT,G.subarray(Y.offset,Y.offset+Y.count)),Y.count=-1),D.version=T.version}}}}function Ca(l,t,i,d){Xe.call(this),this.type="PlaneGeometry",this.parameters={width:l,height:t,widthSegments:i,heightSegments:d},this.fromBufferGeometry(new Eo(l,t,i,d)),this.mergeVertices()}function Eo(l,t,i,d){Fe.call(this),this.type="PlaneBufferGeometry",this.parameters={width:l,height:t,widthSegments:i,heightSegments:d},l=l||1,t=t||1;var v=l/2,w=t/2;i=Math.floor(i)||1,d=Math.floor(d)||1;var T=i+1,b=d+1,D=l/i,G=t/d,Y=[],re=[],se=[],ae=[];for(l=0;l<b;l++){var fe=l*G-w;for(t=0;t<T;t++)re.push(t*D-v,-fe,0),se.push(0,0,1),ae.push(t/i),ae.push(1-l/d)}for(l=0;l<d;l++)for(t=0;t<i;t++)v=t+T*(l+1),w=t+1+T*(l+1),b=t+1+T*l,Y.push(t+T*l,v,b),Y.push(v,w,b);this.setIndex(Y),this.setAttribute("position",new Me(re,3)),this.setAttribute("normal",new Me(se,3)),this.setAttribute("uv",new Me(ae,2))}function lc(l,t,i,d){function v(se,ae){t.buffers.color.setClear(se.r,se.g,se.b,ae,d)}var w=new We(0),T=0,b,D,G=null,Y=0,re=null;return{getClearColor:function(){return w},setClearColor:function(ae,fe){w.set(ae),T=fe!==void 0?fe:1,v(w,T)},getClearAlpha:function(){return T},setClearAlpha:function(ae){T=ae,v(w,T)},render:function(ae,fe,ve,Ze){fe=fe.background,ve=l.xr,(ve=ve.getSession&&ve.getSession())&&ve.environmentBlendMode==="additive"&&(fe=null),fe===null?v(w,T):fe&&fe.isColor&&(v(fe,1),Ze=!0),(l.autoClear||Ze)&&l.clear(l.autoClearColor,l.autoClearDepth,l.autoClearStencil),fe&&(fe.isCubeTexture||fe.isWebGLCubeRenderTarget||fe.mapping===306)?(D===void 0&&(D=new Ve(new Lx(1,1,1),new Ft({type:"BackgroundCubeMaterial",uniforms:ot(zg.cube.uniforms),vertexShader:zg.cube.vertexShader,fragmentShader:zg.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),D.geometry.deleteAttribute("normal"),D.geometry.deleteAttribute("uv"),D.onBeforeRender=function(ht,ct,mt){this.matrixWorld.copyPosition(mt.matrixWorld)},Object.defineProperty(D.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(D)),Ze=fe.isWebGLCubeRenderTarget?fe.texture:fe,D.material.uniforms.envMap.value=Ze,D.material.uniforms.flipEnvMap.value=Ze.isCubeTexture?-1:1,(G!==fe||Y!==Ze.version||re!==l.toneMapping)&&(D.material.needsUpdate=!0,G=fe,Y=Ze.version,re=l.toneMapping),ae.unshift(D,D.geometry,D.material,0,0,null)):fe&&fe.isTexture&&(b===void 0&&(b=new Ve(new Eo(2,2),new Ft({type:"BackgroundMaterial",uniforms:ot(zg.background.uniforms),vertexShader:zg.background.vertexShader,fragmentShader:zg.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),b.geometry.deleteAttribute("normal"),Object.defineProperty(b.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(b)),b.material.uniforms.t2D.value=fe,fe.matrixAutoUpdate===!0&&fe.updateMatrix(),b.material.uniforms.uvTransform.value.copy(fe.matrix),(G!==fe||Y!==fe.version||re!==l.toneMapping)&&(b.material.needsUpdate=!0,G=fe,Y=fe.version,re=l.toneMapping),ae.unshift(b,b.geometry,b.material,0,0,null))}}}function Od(l,t,i,d){var v=d.isWebGL2,w;this.setMode=function(T){w=T},this.render=function(T,b){l.drawArrays(w,T,b),i.update(b,w)},this.renderInstances=function(T,b,D,G){if(G!==0){if(v){T=l;var Y="drawArraysInstanced"}else if(T=t.get("ANGLE_instanced_arrays"),Y="drawArraysInstancedANGLE",T===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}T[Y](w,b,D,G),i.update(D,w,G)}}}function Nm(l,t,i){function d(mt){if(mt==="highp"){if(0<l.getShaderPrecisionFormat(35633,36338).precision&&0<l.getShaderPrecisionFormat(35632,36338).precision)return"highp";mt="mediump"}return mt==="mediump"&&0<l.getShaderPrecisionFormat(35633,36337).precision&&0<l.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var v,w=typeof WebGL2RenderingContext!="undefined"&&l instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&l instanceof WebGL2ComputeRenderingContext,T=i.precision!==void 0?i.precision:"highp",b=d(T);b!==T&&(console.warn("THREE.WebGLRenderer:",T,"not supported, using",b,"instead."),T=b),i=i.logarithmicDepthBuffer===!0,b=l.getParameter(34930);var D=l.getParameter(35660),G=l.getParameter(3379),Y=l.getParameter(34076),re=l.getParameter(34921),se=l.getParameter(36347),ae=l.getParameter(36348),fe=l.getParameter(36349),ve=0<D,Ze=w||!!t.get("OES_texture_float"),ht=ve&&Ze,ct=w?l.getParameter(36183):0;return{isWebGL2:w,getMaxAnisotropy:function(){if(v!==void 0)return v;var Mt=t.get("EXT_texture_filter_anisotropic");return v=Mt!==null?l.getParameter(Mt.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:T,logarithmicDepthBuffer:i,maxTextures:b,maxVertexTextures:D,maxTextureSize:G,maxCubemapSize:Y,maxAttributes:re,maxVertexUniforms:se,maxVaryings:ae,maxFragmentUniforms:fe,vertexTextures:ve,floatFragmentTextures:Ze,floatVertexTextures:ht,maxSamples:ct}}function Wh(){function l(){G.value!==d&&(G.value=d,G.needsUpdate=0<v),i.numPlanes=v,i.numIntersection=0}function t(Y,re,se,ae){var fe=Y!==null?Y.length:0,ve=null;if(fe!==0){if(ve=G.value,ae!==!0||ve===null)for(ae=se+4*fe,re=re.matrixWorldInverse,D.getNormalMatrix(re),(ve===null||ve.length<ae)&&(ve=new Float32Array(ae)),ae=0;ae!==fe;++ae,se+=4)b.copy(Y[ae]).applyMatrix4(re,D),b.normal.toArray(ve,se),ve[se+3]=b.constant;G.value=ve,G.needsUpdate=!0}return i.numPlanes=fe,i.numIntersection=0,ve}var i=this,d=null,v=0,w=!1,T=!1,b=new xt,D=new p,G={value:null,needsUpdate:!1};this.uniform=G,this.numIntersection=this.numPlanes=0,this.init=function(Y,re,se){var ae=Y.length!==0||re||v!==0||w;return w=re,d=t(Y,se,0),v=Y.length,ae},this.beginShadows=function(){T=!0,t(null)},this.endShadows=function(){T=!1,l()},this.setState=function(Y,re,se,ae,fe,ve){if(!w||Y===null||Y.length===0||T&&!se)T?t(null):l();else{se=T?0:v;var Ze=4*se,ht=fe.clippingState||null;for(G.value=ht,ht=t(Y,ae,Ze,ve),Y=0;Y!==Ze;++Y)ht[Y]=d[Y];fe.clippingState=ht,this.numIntersection=re?this.numPlanes:0,this.numPlanes+=se}}}function bg(l){var t={};return{get:function(d){if(t[d]!==void 0)return t[d];switch(d){case"WEBGL_depth_texture":var v=l.getExtension("WEBGL_depth_texture")||l.getExtension("MOZ_WEBGL_depth_texture")||l.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":v=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":v=l.getExtension("WEBGL_compressed_texture_s3tc")||l.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":v=l.getExtension("WEBGL_compressed_texture_pvrtc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:v=l.getExtension(d)}return v===null&&console.warn("THREE.WebGLRenderer: "+d+" extension not supported."),t[d]=v}}}function Lg(l,t,i){function d(b){var D=b.target;b=w.get(D),b.index!==null&&t.remove(b.index);for(var G in b.attributes)t.remove(b.attributes[G]);D.removeEventListener("dispose",d),w.delete(D),(G=T.get(b))&&(t.remove(G),T.delete(b)),i.memory.geometries--}function v(b){var D=[],G=b.index,Y=b.attributes.position;if(G!==null){var re=G.array;G=G.version,Y=0;for(var se=re.length;Y<se;Y+=3){var ae=re[Y+0],fe=re[Y+1],ve=re[Y+2];D.push(ae,fe,fe,ve,ve,ae)}}else for(re=Y.array,G=Y.version,Y=0,se=re.length/3-1;Y<se;Y+=3)ae=Y+0,fe=Y+1,ve=Y+2,D.push(ae,fe,fe,ve,ve,ae);D=new(65535<Te(D)?Le:On)(D,1),D.version=G,t.update(D,34963),(re=T.get(b))&&t.remove(re),T.set(b,D)}var w=new Xi,T=new Xi;return{get:function(D,G){var Y=w.get(G);return Y||(G.addEventListener("dispose",d),G.isBufferGeometry?Y=G:G.isGeometry&&(G._bufferGeometry===void 0&&(G._bufferGeometry=new Fe().setFromObject(D)),Y=G._bufferGeometry),w.set(G,Y),i.memory.geometries++,Y)},update:function(D){var G=D.index,Y=D.attributes;G!==null&&t.update(G,34963);for(var re in Y)t.update(Y[re],34962);D=D.morphAttributes;for(re in D){G=D[re],Y=0;for(var se=G.length;Y<se;Y++)t.update(G[Y],34962)}},getWireframeAttribute:function(D){var G=T.get(D);if(G){var Y=D.index;Y!==null&&G.version<Y.version&&v(D)}else v(D);return T.get(D)}}}function xh(l,t,i,d){var v=d.isWebGL2,w,T,b;this.setMode=function(D){w=D},this.setIndex=function(D){T=D.type,b=D.bytesPerElement},this.render=function(D,G){l.drawElements(w,G,T,D*b),i.update(G,w)},this.renderInstances=function(D,G,Y,re){if(re!==0){if(v){D=l;var se="drawElementsInstanced"}else if(D=t.get("ANGLE_instanced_arrays"),se="drawElementsInstancedANGLE",D===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}D[se](w,Y,T,G*b,re),i.update(Y,w,re)}}}function Op(l){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(d,v,w){switch(w=w||1,t.calls++,v){case 4:t.triangles+=d/3*w;break;case 1:t.lines+=d/2*w;break;case 3:t.lines+=w*(d-1);break;case 2:t.lines+=w*d;break;case 0:t.points+=w*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",v)}}}}function Nu(l,t){return Math.abs(t[1])-Math.abs(l[1])}function pA(l){var t={},i=new Float32Array(8);return{update:function(v,w,T,b){var D=v.morphTargetInfluences,G=D===void 0?0:D.length;if(v=t[w.id],v===void 0){v=[];for(var Y=0;Y<G;Y++)v[Y]=[Y,0];t[w.id]=v}var re=T.morphTargets&&w.morphAttributes.position;for(T=T.morphNormals&&w.morphAttributes.normal,Y=0;Y<G;Y++){var se=v[Y];se[1]!==0&&(re&&w.deleteAttribute("morphTarget"+Y),T&&w.deleteAttribute("morphNormal"+Y))}for(Y=0;Y<G;Y++)se=v[Y],se[0]=Y,se[1]=D[Y];for(v.sort(Nu),Y=D=0;8>Y;Y++){if((se=v[Y])&&(G=se[0],se=se[1])){re&&w.setAttribute("morphTarget"+Y,re[G]),T&&w.setAttribute("morphNormal"+Y,T[G]),i[Y]=se,D+=se;continue}i[Y]=0}w=w.morphTargetsRelative?1:1-D,b.getUniforms().setValue(l,"morphTargetBaseInfluence",w),b.getUniforms().setValue(l,"morphTargetInfluences",i)}}}function gA(l,t,i,d){var v=new Xi;return{update:function(T){var b=d.render.frame,D=T.geometry,G=t.get(T,D);return v.get(G)!==b&&(D.isGeometry&&G.updateFromObject(T),t.update(G),v.set(G,b)),T.isInstancedMesh&&i.update(T.instanceMatrix,34962),G},dispose:function(){v=new Xi}}}function Dd(l,t,i,d,v,w,T,b,D,G){l=l!==void 0?l:[],y.call(this,l,t!==void 0?t:301,i,d,v,w,T!==void 0?T:1022,b,D,G),this.flipY=!1}function Oc(l,t,i,d){y.call(this,null),this.image={data:l||null,width:t||1,height:i||1,depth:d||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function Ah(l,t,i,d){y.call(this,null),this.image={data:l||null,width:t||1,height:i||1,depth:d||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function Bm(l,t,i){var d=l[0];if(0>=d||0<d)return l;var v=t*i,w=T_[v];if(w===void 0&&(w=new Float32Array(v),T_[v]=w),t!==0)for(d.toArray(w,0),d=1,v=0;d!==t;++d)v+=i,l[d].toArray(w,v);return w}function Xh(l,t){if(l.length!==t.length)return!1;for(var i=0,d=l.length;i<d;i++)if(l[i]!==t[i])return!1;return!0}function uc(l,t){for(var i=0,d=t.length;i<d;i++)l[i]=t[i]}function I0(l,t){var i=I_[t];i===void 0&&(i=new Int32Array(t),I_[t]=i);for(var d=0;d!==t;++d)i[d]=l.allocateTextureUnit();return i}function He(l,t){var i=this.cache;i[0]!==t&&(l.uniform1f(this.addr,t),i[0]=t)}function ur(l,t){var i=this.cache;t.x!==void 0?(i[0]!==t.x||i[1]!==t.y)&&(l.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y):Xh(i,t)||(l.uniform2fv(this.addr,t),uc(i,t))}function Et(l,t){var i=this.cache;t.x!==void 0?(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(l.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z):t.r!==void 0?(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(l.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b):Xh(i,t)||(l.uniform3fv(this.addr,t),uc(i,t))}function vr(l,t){var i=this.cache;t.x!==void 0?(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(l.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w):Xh(i,t)||(l.uniform4fv(this.addr,t),uc(i,t))}function en(l,t){var i=this.cache,d=t.elements;d===void 0?Xh(i,t)||(l.uniformMatrix2fv(this.addr,!1,t),uc(i,t)):Xh(i,d)||(L_.set(d),l.uniformMatrix2fv(this.addr,!1,L_),uc(i,d))}function eo(l,t){var i=this.cache,d=t.elements;d===void 0?Xh(i,t)||(l.uniformMatrix3fv(this.addr,!1,t),uc(i,t)):Xh(i,d)||(b_.set(d),l.uniformMatrix3fv(this.addr,!1,b_),uc(i,d))}function dn(l,t){var i=this.cache,d=t.elements;d===void 0?Xh(i,t)||(l.uniformMatrix4fv(this.addr,!1,t),uc(i,t)):Xh(i,d)||(E_.set(d),l.uniformMatrix4fv(this.addr,!1,E_),uc(i,d))}function Qn(l,t,i){var d=this.cache,v=i.allocateTextureUnit();d[0]!==v&&(l.uniform1i(this.addr,v),d[0]=v),i.safeSetTexture2D(t||M_,v)}function qi(l,t,i){var d=this.cache,v=i.allocateTextureUnit();d[0]!==v&&(l.uniform1i(this.addr,v),d[0]=v),i.setTexture2DArray(t||RS,v)}function na(l,t,i){var d=this.cache,v=i.allocateTextureUnit();d[0]!==v&&(l.uniform1i(this.addr,v),d[0]=v),i.setTexture3D(t||OS,v)}function Oo(l,t,i){var d=this.cache,v=i.allocateTextureUnit();d[0]!==v&&(l.uniform1i(this.addr,v),d[0]=v),i.safeSetTextureCube(t||S_,v)}function Fd(l,t){var i=this.cache;i[0]!==t&&(l.uniform1i(this.addr,t),i[0]=t)}function as(l,t){var i=this.cache;Xh(i,t)||(l.uniform2iv(this.addr,t),uc(i,t))}function sl(l,t){var i=this.cache;Xh(i,t)||(l.uniform3iv(this.addr,t),uc(i,t))}function Dp(l,t){var i=this.cache;Xh(i,t)||(l.uniform4iv(this.addr,t),uc(i,t))}function mA(l,t){var i=this.cache;i[0]!==t&&(l.uniform1ui(this.addr,t),i[0]=t)}function Gf(l){switch(l){case 5126:return He;case 35664:return ur;case 35665:return Et;case 35666:return vr;case 35674:return en;case 35675:return eo;case 35676:return dn;case 5124:case 35670:return Fd;case 35667:case 35671:return as;case 35668:case 35672:return sl;case 35669:case 35673:return Dp;case 5125:return mA;case 35678:case 36198:case 36298:case 36306:case 35682:return Qn;case 35679:case 36299:case 36307:return na;case 35680:case 36300:case 36308:case 36293:return Oo;case 36289:case 36303:case 36311:case 36292:return qi}}function wy(l,t){l.uniform1fv(this.addr,t)}function zm(l,t){l.uniform1iv(this.addr,t)}function Gv(l,t){l.uniform2iv(this.addr,t)}function aC(l,t){l.uniform3iv(this.addr,t)}function Um(l,t){l.uniform4iv(this.addr,t)}function FM(l,t){t=Bm(t,this.size,2),l.uniform2fv(this.addr,t)}function NM(l,t){t=Bm(t,this.size,3),l.uniform3fv(this.addr,t)}function BM(l,t){t=Bm(t,this.size,4),l.uniform4fv(this.addr,t)}function zM(l,t){t=Bm(t,this.size,4),l.uniformMatrix2fv(this.addr,!1,t)}function UM(l,t){t=Bm(t,this.size,9),l.uniformMatrix3fv(this.addr,!1,t)}function kM(l,t){t=Bm(t,this.size,16),l.uniformMatrix4fv(this.addr,!1,t)}function HM(l,t,i){var d=t.length,v=I0(i,d);for(l.uniform1iv(this.addr,v),l=0;l!==d;++l)i.safeSetTexture2D(t[l]||M_,v[l])}function GM(l,t,i){var d=t.length,v=I0(i,d);for(l.uniform1iv(this.addr,v),l=0;l!==d;++l)i.safeSetTextureCube(t[l]||S_,v[l])}function jM(l){switch(l){case 5126:return wy;case 35664:return FM;case 35665:return NM;case 35666:return BM;case 35674:return zM;case 35675:return UM;case 35676:return kM;case 5124:case 35670:return zm;case 35667:case 35671:return Gv;case 35668:case 35672:return aC;case 35669:case 35673:return Um;case 35678:case 36198:case 36298:case 36306:case 35682:return HM;case 35680:case 36300:case 36308:case 36293:return GM}}function VM(l,t,i){this.id=l,this.addr=i,this.cache=[],this.setValue=Gf(t.type)}function Pw(l,t,i){this.id=l,this.addr=i,this.cache=[],this.size=t.size,this.setValue=jM(t.type)}function Rw(l){this.id=l,this.seq=[],this.map={}}function jv(l,t){this.seq=[],this.map={};for(var i=l.getProgramParameter(t,35718),d=0;d<i;++d){var v=l.getActiveUniform(t,d),w=l.getUniformLocation(t,v.name),T=this,b=v.name,D=b.length;for(ow.lastIndex=0;;){var G=ow.exec(b),Y=ow.lastIndex,re=G[1],se=G[3];if(G[2]==="]"&&(re|=0),se===void 0||se==="["&&Y+2===D){b=T,v=se===void 0?new VM(re,v,w):new Pw(re,v,w),b.seq.push(v),b.map[v.id]=v;break}else se=T.map[re],se===void 0&&(se=new Rw(re),re=T,T=se,re.seq.push(T),re.map[T.id]=T),T=se}}}function Ow(l,t,i){return t=l.createShader(t),l.shaderSource(t,i),l.compileShader(t),t}function Dw(l){switch(l){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+l)}}function Fw(l,t,i){var d=l.getShaderParameter(t,35713),v=l.getShaderInfoLog(t).trim();if(d&&v==="")return"";for(l=l.getShaderSource(t).split(`
`),t=0;t<l.length;t++)l[t]=t+1+": "+l[t];return l=l.join(`
`),"THREE.WebGLShader: gl.getShaderInfoLog() "+i+`
`+v+l}function G1(l,t){return t=Dw(t),"vec4 "+l+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function WM(l,t){return t=Dw(t),"vec4 "+l+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function XM(l,t){switch(t){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Uncharted2";break;case 4:t="OptimizedCineon";break;case 5:t="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+t)}return"vec3 "+l+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function YM(l){var t=[],i;for(i in l){var d=l[i];d!==!1&&t.push("#define "+i+" "+d)}return t.join(`
`)}function j1(l){return l!==""}function Nw(l,t){return l.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Bw(l,t){return l.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function sC(l,t){if(l=zo[t],l===void 0)throw Error("Can not resolve #include <"+t+">");return l.replace(aw,sC)}function zw(l,t,i,d){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),lC(l,t,i,d)}function lC(l,t,i,d){for(l="",t=parseInt(t);t<parseInt(i);t++)l+=d.replace(/\[ i \]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return l}function Uw(l){var t="precision "+l.precision+` float;
precision `+l.precision+" int;";return l.precision==="highp"?t+=`
#define HIGH_PRECISION`:l.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:l.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function ZM(l){var t="SHADOWMAP_TYPE_BASIC";return l.shadowMapType===1?t="SHADOWMAP_TYPE_PCF":l.shadowMapType===2?t="SHADOWMAP_TYPE_PCF_SOFT":l.shadowMapType===3&&(t="SHADOWMAP_TYPE_VSM"),t}function KM(l){var t="ENVMAP_TYPE_CUBE";if(l.envMap)switch(l.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:t="ENVMAP_TYPE_EQUIREC";break;case 305:t="ENVMAP_TYPE_SPHERE"}return t}function JM(l){var t="ENVMAP_MODE_REFLECTION";if(l.envMap)switch(l.envMapMode){case 302:case 304:t="ENVMAP_MODE_REFRACTION"}return t}function qM(l){var t="ENVMAP_BLENDING_NONE";if(l.envMap)switch(l.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}function QM(l,t,i){var d=l.getContext(),v=i.defines,w=i.vertexShader,T=i.fragmentShader,b=ZM(i),D=KM(i),G=JM(i),Y=qM(i),re=0<l.gammaFactor?l.gammaFactor:1,se=i.isWebGL2?"":[i.extensionDerivatives||i.envMapCubeUV||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(j1).join(`
`),ae=YM(v),fe=d.createProgram();i.isRawShaderMaterial?(v=[ae].filter(j1).join(`
`),0<v.length&&(v+=`
`),b=[se,ae].filter(j1).join(`
`),0<b.length&&(b+=`
`)):(v=[Uw(i),"#define SHADER_NAME "+i.shaderName,ae,i.instancing?"#define USE_INSTANCING":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+re,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+G:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+b:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(j1).join(`
`),b=[se,Uw(i),"#define SHADER_NAME "+i.shaderName,ae,i.alphaTest?"#define ALPHATEST "+i.alphaTest+(i.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+re,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+D:"",i.envMap?"#define "+G:"",i.envMap?"#define "+Y:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.sheen?"#define USE_SHEEN":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+b:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==0?"#define TONE_MAPPING":"",i.toneMapping!==0?zo.tonemapping_pars_fragment:"",i.toneMapping!==0?XM("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.outputEncoding||i.mapEncoding||i.matcapEncoding||i.envMapEncoding||i.emissiveMapEncoding||i.lightMapEncoding?zo.encodings_pars_fragment:"",i.mapEncoding?G1("mapTexelToLinear",i.mapEncoding):"",i.matcapEncoding?G1("matcapTexelToLinear",i.matcapEncoding):"",i.envMapEncoding?G1("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMapEncoding?G1("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.lightMapEncoding?G1("lightMapTexelToLinear",i.lightMapEncoding):"",i.outputEncoding?WM("linearToOutputTexel",i.outputEncoding):"",i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(j1).join(`
`)),w=w.replace(aw,sC),w=Nw(w,i),w=Bw(w,i),T=T.replace(aw,sC),T=Nw(T,i),T=Bw(T,i),w=w.replace(R_,lC).replace(P_,zw),T=T.replace(R_,lC).replace(P_,zw),i.isWebGL2&&!i.isRawShaderMaterial&&(D=!1,G=/^\s*#version\s+300\s+es\s*\n/,i.isShaderMaterial&&w.match(G)!==null&&T.match(G)!==null&&(D=!0,w=w.replace(G,""),T=T.replace(G,"")),v=`#version 300 es

#define attribute in
#define varying out
#define texture2D texture
`+v,b=[`#version 300 es

#define varying in`,D?"":"out highp vec4 pc_fragColor;",D?"":"#define gl_FragColor pc_fragColor",`#define gl_FragDepthEXT gl_FragDepth
#define texture2D texture
#define textureCube texture
#define texture2DProj textureProj
#define texture2DLodEXT textureLod
#define texture2DProjLodEXT textureProjLod
#define textureCubeLodEXT textureLod
#define texture2DGradEXT textureGrad
#define texture2DProjGradEXT textureProjGrad
#define textureCubeGradEXT textureGrad`].join(`
`)+`
`+b),T=b+T,w=Ow(d,35633,v+w),T=Ow(d,35632,T),d.attachShader(fe,w),d.attachShader(fe,T),i.index0AttributeName!==void 0?d.bindAttribLocation(fe,0,i.index0AttributeName):i.morphTargets===!0&&d.bindAttribLocation(fe,0,"position"),d.linkProgram(fe),l.debug.checkShaderErrors&&(l=d.getProgramInfoLog(fe).trim(),D=d.getShaderInfoLog(w).trim(),G=d.getShaderInfoLog(T).trim(),re=Y=!0,d.getProgramParameter(fe,35714)===!1?(Y=!1,se=Fw(d,w,"vertex"),ae=Fw(d,T,"fragment"),console.error("THREE.WebGLProgram: shader error: ",d.getError(),"35715",d.getProgramParameter(fe,35715),"gl.getProgramInfoLog",l,se,ae)):l!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",l):(D===""||G==="")&&(re=!1),re&&(this.diagnostics={runnable:Y,programLog:l,vertexShader:{log:D,prefix:v},fragmentShader:{log:G,prefix:b}})),d.deleteShader(w),d.deleteShader(T);var ve;this.getUniforms=function(){return ve===void 0&&(ve=new jv(d,fe)),ve};var Ze;return this.getAttributes=function(){if(Ze===void 0){for(var ht={},ct=d.getProgramParameter(fe,35721),mt=0;mt<ct;mt++){var Mt=d.getActiveAttrib(fe,mt).name;ht[Mt]=d.getAttribLocation(fe,Mt)}Ze=ht}return Ze},this.destroy=function(){d.deleteProgram(fe),this.program=void 0},this.name=i.shaderName,this.id=DS++,this.cacheKey=t,this.usedTimes=1,this.program=fe,this.vertexShader=w,this.fragmentShader=T,this}function $M(l,t,i){function d(ae){if(ae)ae.isTexture?fe=ae.encoding:ae.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),fe=ae.texture.encoding);else var fe=3e3;return fe}var v=[],w=i.isWebGL2,T=i.logarithmicDepthBuffer,b=i.floatVertexTextures,D=i.precision,G=i.maxVertexUniforms,Y=i.vertexTextures,re={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},se="precision isWebGL2 supportsVertexTextures outputEncoding instancing map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(ae,fe,ve,Ze,ht,ct,mt){var Mt=Ze.fog;Ze=ae.isMeshStandardMaterial?Ze.environment:null,Ze=ae.envMap||Ze;var $t=re[ae.type];if(mt.isSkinnedMesh){var Bt=mt.skeleton.bones;if(b)Bt=1024;else{var wt=Math.min(Math.floor((G-20)/4),Bt.length);wt<Bt.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Bt.length+" bones. This GPU supports "+wt+"."),Bt=0):Bt=wt}}else Bt=0;ae.precision!==null&&(D=i.getMaxPrecision(ae.precision),D!==ae.precision&&console.warn("THREE.WebGLProgram.getParameters:",ae.precision,"not supported, using",D,"instead.")),$t?(wt=zg[$t],wt={name:ae.type,uniforms:__.clone(wt.uniforms),vertexShader:wt.vertexShader,fragmentShader:wt.fragmentShader}):wt={name:ae.type,uniforms:ae.uniforms,vertexShader:ae.vertexShader,fragmentShader:ae.fragmentShader},ae.onBeforeCompile(wt,l);var Mr=l.getRenderTarget();return{isWebGL2:w,shaderID:$t,shaderName:wt.name,uniforms:wt.uniforms,vertexShader:wt.vertexShader,fragmentShader:wt.fragmentShader,defines:ae.defines,isRawShaderMaterial:ae.isRawShaderMaterial,isShaderMaterial:ae.isShaderMaterial,precision:D,instancing:mt.isInstancedMesh===!0,supportsVertexTextures:Y,outputEncoding:Mr!==null?d(Mr.texture):l.outputEncoding,map:!!ae.map,mapEncoding:d(ae.map),matcap:!!ae.matcap,matcapEncoding:d(ae.matcap),envMap:!!Ze,envMapMode:Ze&&Ze.mapping,envMapEncoding:d(Ze),envMapCubeUV:!!Ze&&(Ze.mapping===306||Ze.mapping===307),lightMap:!!ae.lightMap,lightMapEncoding:d(ae.lightMap),aoMap:!!ae.aoMap,emissiveMap:!!ae.emissiveMap,emissiveMapEncoding:d(ae.emissiveMap),bumpMap:!!ae.bumpMap,normalMap:!!ae.normalMap,objectSpaceNormalMap:ae.normalMapType===1,tangentSpaceNormalMap:ae.normalMapType===0,clearcoatMap:!!ae.clearcoatMap,clearcoatRoughnessMap:!!ae.clearcoatRoughnessMap,clearcoatNormalMap:!!ae.clearcoatNormalMap,displacementMap:!!ae.displacementMap,roughnessMap:!!ae.roughnessMap,metalnessMap:!!ae.metalnessMap,specularMap:!!ae.specularMap,alphaMap:!!ae.alphaMap,gradientMap:!!ae.gradientMap,sheen:!!ae.sheen,combine:ae.combine,vertexTangents:ae.normalMap&&ae.vertexTangents,vertexColors:ae.vertexColors,vertexUvs:!!ae.map||!!ae.bumpMap||!!ae.normalMap||!!ae.specularMap||!!ae.alphaMap||!!ae.emissiveMap||!!ae.roughnessMap||!!ae.metalnessMap||!!ae.clearcoatMap||!!ae.clearcoatRoughnessMap||!!ae.clearcoatNormalMap||!!ae.displacementMap,uvsVertexOnly:!(ae.map||ae.bumpMap||ae.normalMap||ae.specularMap||ae.alphaMap||ae.emissiveMap||ae.roughnessMap||ae.metalnessMap||ae.clearcoatNormalMap)&&!!ae.displacementMap,fog:!!Mt,useFog:ae.fog,fogExp2:Mt&&Mt.isFogExp2,flatShading:ae.flatShading,sizeAttenuation:ae.sizeAttenuation,logarithmicDepthBuffer:T,skinning:ae.skinning&&0<Bt,maxBones:Bt,useVertexTexture:b,morphTargets:ae.morphTargets,morphNormals:ae.morphNormals,maxMorphTargets:l.maxMorphTargets,maxMorphNormals:l.maxMorphNormals,numDirLights:fe.directional.length,numPointLights:fe.point.length,numSpotLights:fe.spot.length,numRectAreaLights:fe.rectArea.length,numHemiLights:fe.hemi.length,numDirLightShadows:fe.directionalShadowMap.length,numPointLightShadows:fe.pointShadowMap.length,numSpotLightShadows:fe.spotShadowMap.length,numClippingPlanes:ht,numClipIntersection:ct,dithering:ae.dithering,shadowMapEnabled:l.shadowMap.enabled&&0<ve.length,shadowMapType:l.shadowMap.type,toneMapping:ae.toneMapped?l.toneMapping:0,physicallyCorrectLights:l.physicallyCorrectLights,premultipliedAlpha:ae.premultipliedAlpha,alphaTest:ae.alphaTest,doubleSided:ae.side===2,flipSided:ae.side===1,depthPacking:ae.depthPacking!==void 0?ae.depthPacking:!1,index0AttributeName:ae.index0AttributeName,extensionDerivatives:ae.extensions&&ae.extensions.derivatives,extensionFragDepth:ae.extensions&&ae.extensions.fragDepth,extensionDrawBuffers:ae.extensions&&ae.extensions.drawBuffers,extensionShaderTextureLOD:ae.extensions&&ae.extensions.shaderTextureLOD,rendererExtensionFragDepth:w||t.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:w||t.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:w||t.get("EXT_shader_texture_lod")!==null,onBeforeCompile:ae.onBeforeCompile}},this.getProgramCacheKey=function(ae){var fe=[];if(ae.shaderID?fe.push(ae.shaderID):(fe.push(ae.fragmentShader),fe.push(ae.vertexShader)),ae.defines!==void 0)for(var ve in ae.defines)fe.push(ve),fe.push(ae.defines[ve]);if(ae.isRawShaderMaterial===void 0){for(ve=0;ve<se.length;ve++)fe.push(ae[se[ve]]);fe.push(l.outputEncoding),fe.push(l.gammaFactor)}return fe.push(ae.onBeforeCompile.toString()),fe.join()},this.acquireProgram=function(ae,fe){for(var ve,Ze=0,ht=v.length;Ze<ht;Ze++){var ct=v[Ze];if(ct.cacheKey===fe){ve=ct,++ve.usedTimes;break}}return ve===void 0&&(ve=new QM(l,fe,ae),v.push(ve)),ve},this.releaseProgram=function(ae){if(--ae.usedTimes==0){var fe=v.indexOf(ae);v[fe]=v[v.length-1],v.pop(),ae.destroy()}},this.programs=v}function eS(){var l=new Xi;return{get:function(i){var d=l.get(i);return d===void 0&&(d={},l.set(i,d)),d},remove:function(i){l.delete(i)},update:function(i,d,v){l.get(i)[d]=v},dispose:function(){l=new Xi}}}function tS(l,t){return l.groupOrder!==t.groupOrder?l.groupOrder-t.groupOrder:l.renderOrder!==t.renderOrder?l.renderOrder-t.renderOrder:l.program!==t.program?l.program.id-t.program.id:l.material.id!==t.material.id?l.material.id-t.material.id:l.z!==t.z?l.z-t.z:l.id-t.id}function rS(l,t){return l.groupOrder!==t.groupOrder?l.groupOrder-t.groupOrder:l.renderOrder!==t.renderOrder?l.renderOrder-t.renderOrder:l.z!==t.z?t.z-l.z:l.id-t.id}function kw(){function l(T,b,D,G,Y,re){var se=t[i];return se===void 0?(se={id:T.id,object:T,geometry:b,material:D,program:D.program||w,groupOrder:G,renderOrder:T.renderOrder,z:Y,group:re},t[i]=se):(se.id=T.id,se.object=T,se.geometry=b,se.material=D,se.program=D.program||w,se.groupOrder=G,se.renderOrder=T.renderOrder,se.z=Y,se.group=re),i++,se}var t=[],i=0,d=[],v=[],w={id:-1};return{opaque:d,transparent:v,init:function(){i=0,d.length=0,v.length=0},push:function(b,D,G,Y,re,se){b=l(b,D,G,Y,re,se),(G.transparent===!0?v:d).push(b)},unshift:function(b,D,G,Y,re,se){b=l(b,D,G,Y,re,se),(G.transparent===!0?v:d).unshift(b)},finish:function(){for(var b=i,D=t.length;b<D;b++){var G=t[b];if(G.id===null)break;G.id=null,G.object=null,G.geometry=null,G.material=null,G.program=null,G.group=null}},sort:function(b,D){1<d.length&&d.sort(b||tS),1<v.length&&v.sort(D||rS)}}}function nS(){function l(i){i=i.target,i.removeEventListener("dispose",l),t.delete(i)}var t=new Xi;return{get:function(d,v){var w=t.get(d);if(w===void 0){var T=new kw;t.set(d,new Xi),t.get(d).set(v,T),d.addEventListener("dispose",l)}else T=w.get(v),T===void 0&&(T=new kw,w.set(v,T));return T},dispose:function(){t=new Xi}}}function iS(){var l={};return{get:function(i){if(l[i.id]!==void 0)return l[i.id];switch(i.type){case"DirectionalLight":var d={direction:new z,color:new We};break;case"SpotLight":d={position:new z,direction:new z,color:new We,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":d={position:new z,color:new We,distance:0,decay:0};break;case"HemisphereLight":d={direction:new z,skyColor:new We,groundColor:new We};break;case"RectAreaLight":d={color:new We,position:new z,halfWidth:new z,halfHeight:new z}}return l[i.id]=d}}}function oS(){var l={};return{get:function(i){if(l[i.id]!==void 0)return l[i.id];switch(i.type){case"DirectionalLight":var d={shadowBias:0,shadowRadius:1,shadowMapSize:new u};break;case"SpotLight":d={shadowBias:0,shadowRadius:1,shadowMapSize:new u};break;case"PointLight":d={shadowBias:0,shadowRadius:1,shadowMapSize:new u,shadowCameraNear:1,shadowCameraFar:1e3}}return l[i.id]=d}}}function aS(l,t){return(t.castShadow?1:0)-(l.castShadow?1:0)}function sS(){for(var l=new iS,t=oS(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},d=0;9>d;d++)i.probe.push(new z);var v=new z,w=new Z,T=new Z;return{setup:function(D,G,Y){for(var re=0,se=0,ae=0,fe=0;9>fe;fe++)i.probe[fe].set(0,0,0);var ve=G=0,Ze=0,ht=0,ct=0,mt=0,Mt=0,$t=0;Y=Y.matrixWorldInverse,D.sort(aS),fe=0;for(var Bt=D.length;fe<Bt;fe++){var wt=D[fe],Mr=wt.color,Ot=wt.intensity,Hr=wt.distance,rn=wt.shadow&&wt.shadow.map?wt.shadow.map.texture:null;if(wt.isAmbientLight)re+=Mr.r*Ot,se+=Mr.g*Ot,ae+=Mr.b*Ot;else if(wt.isLightProbe)for(rn=0;9>rn;rn++)i.probe[rn].addScaledVector(wt.sh.coefficients[rn],Ot);else if(wt.isDirectionalLight){var Sr=l.get(wt);Sr.color.copy(wt.color).multiplyScalar(wt.intensity),Sr.direction.setFromMatrixPosition(wt.matrixWorld),v.setFromMatrixPosition(wt.target.matrixWorld),Sr.direction.sub(v),Sr.direction.transformDirection(Y),wt.castShadow&&(Ot=wt.shadow,Mr=t.get(wt),Mr.shadowBias=Ot.bias,Mr.shadowRadius=Ot.radius,Mr.shadowMapSize=Ot.mapSize,i.directionalShadow[G]=Mr,i.directionalShadowMap[G]=rn,i.directionalShadowMatrix[G]=wt.shadow.matrix,mt++),i.directional[G]=Sr,G++}else wt.isSpotLight?(Sr=l.get(wt),Sr.position.setFromMatrixPosition(wt.matrixWorld),Sr.position.applyMatrix4(Y),Sr.color.copy(Mr).multiplyScalar(Ot),Sr.distance=Hr,Sr.direction.setFromMatrixPosition(wt.matrixWorld),v.setFromMatrixPosition(wt.target.matrixWorld),Sr.direction.sub(v),Sr.direction.transformDirection(Y),Sr.coneCos=Math.cos(wt.angle),Sr.penumbraCos=Math.cos(wt.angle*(1-wt.penumbra)),Sr.decay=wt.decay,wt.castShadow&&(Ot=wt.shadow,Mr=t.get(wt),Mr.shadowBias=Ot.bias,Mr.shadowRadius=Ot.radius,Mr.shadowMapSize=Ot.mapSize,i.spotShadow[Ze]=Mr,i.spotShadowMap[Ze]=rn,i.spotShadowMatrix[Ze]=wt.shadow.matrix,$t++),i.spot[Ze]=Sr,Ze++):wt.isRectAreaLight?(Sr=l.get(wt),Sr.color.copy(Mr).multiplyScalar(Ot),Sr.position.setFromMatrixPosition(wt.matrixWorld),Sr.position.applyMatrix4(Y),T.identity(),w.copy(wt.matrixWorld),w.premultiply(Y),T.extractRotation(w),Sr.halfWidth.set(.5*wt.width,0,0),Sr.halfHeight.set(0,.5*wt.height,0),Sr.halfWidth.applyMatrix4(T),Sr.halfHeight.applyMatrix4(T),i.rectArea[ht]=Sr,ht++):wt.isPointLight?(Sr=l.get(wt),Sr.position.setFromMatrixPosition(wt.matrixWorld),Sr.position.applyMatrix4(Y),Sr.color.copy(wt.color).multiplyScalar(wt.intensity),Sr.distance=wt.distance,Sr.decay=wt.decay,wt.castShadow&&(Ot=wt.shadow,Mr=t.get(wt),Mr.shadowBias=Ot.bias,Mr.shadowRadius=Ot.radius,Mr.shadowMapSize=Ot.mapSize,Mr.shadowCameraNear=Ot.camera.near,Mr.shadowCameraFar=Ot.camera.far,i.pointShadow[ve]=Mr,i.pointShadowMap[ve]=rn,i.pointShadowMatrix[ve]=wt.shadow.matrix,Mt++),i.point[ve]=Sr,ve++):wt.isHemisphereLight&&(Sr=l.get(wt),Sr.direction.setFromMatrixPosition(wt.matrixWorld),Sr.direction.transformDirection(Y),Sr.direction.normalize(),Sr.skyColor.copy(wt.color).multiplyScalar(Ot),Sr.groundColor.copy(wt.groundColor).multiplyScalar(Ot),i.hemi[ct]=Sr,ct++)}i.ambient[0]=re,i.ambient[1]=se,i.ambient[2]=ae,D=i.hash,(D.directionalLength!==G||D.pointLength!==ve||D.spotLength!==Ze||D.rectAreaLength!==ht||D.hemiLength!==ct||D.numDirectionalShadows!==mt||D.numPointShadows!==Mt||D.numSpotShadows!==$t)&&(i.directional.length=G,i.spot.length=Ze,i.rectArea.length=ht,i.point.length=ve,i.hemi.length=ct,i.directionalShadow.length=mt,i.directionalShadowMap.length=mt,i.pointShadow.length=Mt,i.pointShadowMap.length=Mt,i.spotShadow.length=$t,i.spotShadowMap.length=$t,i.directionalShadowMatrix.length=mt,i.pointShadowMatrix.length=Mt,i.spotShadowMatrix.length=$t,D.directionalLength=G,D.pointLength=ve,D.spotLength=Ze,D.rectAreaLength=ht,D.hemiLength=ct,D.numDirectionalShadows=mt,D.numPointShadows=Mt,D.numSpotShadows=$t,i.version=FS++)},state:i}}function Hw(){var l=new sS,t=[],i=[];return{init:function(){t.length=0,i.length=0},state:{lightsArray:t,shadowsArray:i,lights:l},setupLights:function(v){l.setup(t,i,v)},pushLight:function(v){t.push(v)},pushShadow:function(v){i.push(v)}}}function lS(){function l(i){i=i.target,i.removeEventListener("dispose",l),t.delete(i)}var t=new Xi;return{get:function(d,v){if(t.has(d)===!1){var w=new Hw;t.set(d,new Xi),t.get(d).set(v,w),d.addEventListener("dispose",l)}else t.get(d).has(v)===!1?(w=new Hw,t.get(d).set(v,w)):w=t.get(d).get(v);return w},dispose:function(){t=new Xi}}}function Vv(l){Tt.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(l)}function Wv(l){Tt.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new z,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(l)}function Gw(l,t,i){function d(Mt,$t,Bt){Bt=Mt<<0|$t<<1|Bt<<2;var wt=re[Bt];return wt===void 0&&(wt=new Vv({depthPacking:3201,morphTargets:Mt,skinning:$t}),re[Bt]=wt),wt}function v(Mt,$t,Bt){Bt=Mt<<0|$t<<1|Bt<<2;var wt=se[Bt];return wt===void 0&&(wt=new Wv({morphTargets:Mt,skinning:$t}),se[Bt]=wt),wt}function w(Mt,$t,Bt,wt,Mr,Ot,Hr){var rn=d,Sr=Mt.customDepthMaterial;return wt.isPointLight===!0&&(rn=v,Sr=Mt.customDistanceMaterial),Sr===void 0?(Sr=!1,Bt.morphTargets===!0&&(Sr=$t.morphAttributes&&$t.morphAttributes.position&&0<$t.morphAttributes.position.length),$t=!1,Mt.isSkinnedMesh===!0&&(Bt.skinning===!0?$t=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Mt)),Mt=rn(Sr,$t,Mt.isInstancedMesh===!0)):Mt=Sr,l.localClippingEnabled&&Bt.clipShadows===!0&&Bt.clippingPlanes.length!==0&&(Sr=Mt.uuid,rn=Bt.uuid,$t=ae[Sr],$t===void 0&&($t={},ae[Sr]=$t),Sr=$t[rn],Sr===void 0&&(Sr=Mt.clone(),$t[rn]=Sr),Mt=Sr),Mt.visible=Bt.visible,Mt.wireframe=Bt.wireframe,Mt.side=Hr===3?Bt.shadowSide!==null?Bt.shadowSide:Bt.side:Bt.shadowSide!==null?Bt.shadowSide:fe[Bt.side],Mt.clipShadows=Bt.clipShadows,Mt.clippingPlanes=Bt.clippingPlanes,Mt.clipIntersection=Bt.clipIntersection,Mt.wireframeLinewidth=Bt.wireframeLinewidth,Mt.linewidth=Bt.linewidth,wt.isPointLight===!0&&Mt.isMeshDistanceMaterial===!0&&(Mt.referencePosition.setFromMatrixPosition(wt.matrixWorld),Mt.nearDistance=Mr,Mt.farDistance=Ot),Mt}function T(Mt,$t,Bt,wt,Mr){if(Mt.visible!==!1){if(Mt.layers.test($t.layers)&&(Mt.isMesh||Mt.isLine||Mt.isPoints)&&(Mt.castShadow||Mt.receiveShadow&&Mr===3)&&(!Mt.frustumCulled||b.intersectsObject(Mt))){Mt.modelViewMatrix.multiplyMatrices(Bt.matrixWorldInverse,Mt.matrixWorld);var Ot=t.update(Mt),Hr=Mt.material;if(Array.isArray(Hr))for(var rn=Ot.groups,Sr=0,$n=rn.length;Sr<$n;Sr++){var sn=rn[Sr],Wn=Hr[sn.materialIndex];Wn&&Wn.visible&&(Wn=w(Mt,Ot,Wn,wt,Bt.near,Bt.far,Mr),l.renderBufferDirect(Bt,null,Ot,Wn,Mt,sn))}else Hr.visible&&(Wn=w(Mt,Ot,Hr,wt,Bt.near,Bt.far,Mr),l.renderBufferDirect(Bt,null,Ot,Wn,Mt,null))}for(Mt=Mt.children,Ot=0,Hr=Mt.length;Ot<Hr;Ot++)T(Mt[Ot],$t,Bt,wt,Mr)}}var b=new Ln,D=new u,G=new u,Y=new C,re=[],se=[],ae={},fe={0:1,1:0,2:2},ve=new Ft({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new u},radius:{value:4}},vertexShader:`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`}),Ze=ve.clone();Ze.defines.HORIZONAL_PASS=1;var ht=new Fe;ht.setAttribute("position",new tr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var ct=new Ve(ht,ve),mt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(Mt,$t,Bt){if(mt.enabled!==!1&&(mt.autoUpdate!==!1||mt.needsUpdate!==!1)&&Mt.length!==0){var wt=l.getRenderTarget(),Mr=l.getActiveCubeFace(),Ot=l.getActiveMipmapLevel(),Hr=l.state;Hr.setBlending(0),Hr.buffers.color.setClear(1,1,1,1),Hr.buffers.depth.setTest(!0),Hr.setScissorTest(!1);for(var rn=0,Sr=Mt.length;rn<Sr;rn++){var $n=Mt[rn],sn=$n.shadow;if(sn===void 0)console.warn("THREE.WebGLShadowMap:",$n,"has no shadow.");else{D.copy(sn.mapSize);var Wn=sn.getFrameExtents();D.multiply(Wn),G.copy(sn.mapSize),(D.x>i||D.y>i)&&(D.x>i&&(G.x=Math.floor(i/Wn.x),D.x=G.x*Wn.x,sn.mapSize.x=G.x),D.y>i&&(G.y=Math.floor(i/Wn.y),D.y=G.y*Wn.y,sn.mapSize.y=G.y)),sn.map!==null||sn.isPointLightShadow||this.type!==3||(Wn={minFilter:1006,magFilter:1006,format:1023},sn.map=new S(D.x,D.y,Wn),sn.map.texture.name=$n.name+".shadowMap",sn.mapPass=new S(D.x,D.y,Wn),sn.camera.updateProjectionMatrix()),sn.map===null&&(Wn={minFilter:1003,magFilter:1003,format:1023},sn.map=new S(D.x,D.y,Wn),sn.map.texture.name=$n.name+".shadowMap",sn.camera.updateProjectionMatrix()),l.setRenderTarget(sn.map),l.clear(),Wn=sn.getViewportCount();for(var to=0;to<Wn;to++){var si=sn.getViewport(to);Y.set(G.x*si.x,G.y*si.y,G.x*si.z,G.y*si.w),Hr.viewport(Y),sn.updateMatrices($n,to),b=sn.getFrustum(),T($t,Bt,sn.camera,$n,this.type)}sn.isPointLightShadow||this.type!==3||($n=sn,sn=Bt,Wn=t.update(ct),ve.uniforms.shadow_pass.value=$n.map.texture,ve.uniforms.resolution.value=$n.mapSize,ve.uniforms.radius.value=$n.radius,l.setRenderTarget($n.mapPass),l.clear(),l.renderBufferDirect(sn,null,Wn,ve,ct,null),Ze.uniforms.shadow_pass.value=$n.mapPass.texture,Ze.uniforms.resolution.value=$n.mapSize,Ze.uniforms.radius.value=$n.radius,l.setRenderTarget($n.map),l.clear(),l.renderBufferDirect(sn,null,Wn,Ze,ct,null))}}mt.needsUpdate=!1,l.setRenderTarget(wt,Mr,Ot)}}}function uS(l,t,i){function d(Zt,Dt,xn){var An=new Uint8Array(4),Fi=l.createTexture();for(l.bindTexture(Zt,Fi),l.texParameteri(Zt,10241,9728),l.texParameteri(Zt,10240,9728),Zt=0;Zt<xn;Zt++)l.texImage2D(Dt+Zt,0,6408,1,1,0,6408,5121,An);return Fi}function v(Zt,Dt){Ze[Zt]=1,ht[Zt]===0&&(l.enableVertexAttribArray(Zt),ht[Zt]=1),ct[Zt]!==Dt&&((se?l:t.get("ANGLE_instanced_arrays"))[se?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Zt,Dt),ct[Zt]=Dt)}function w(Zt){mt[Zt]!==!0&&(l.enable(Zt),mt[Zt]=!0)}function T(Zt){mt[Zt]!==!1&&(l.disable(Zt),mt[Zt]=!1)}function b(Zt,Dt,xn,An,Fi,Fr,ln,zi){if(Zt===0)$t&&(T(3042),$t=!1);else if($t||(w(3042),$t=!0),Zt!==5){if(Zt!==Bt||zi!==$n){if((wt!==100||Hr!==100)&&(l.blendEquation(32774),Hr=wt=100),zi)switch(Zt){case 1:l.blendFuncSeparate(1,771,1,771);break;case 2:l.blendFunc(1,1);break;case 3:l.blendFuncSeparate(0,0,769,771);break;case 4:l.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Zt)}else switch(Zt){case 1:l.blendFuncSeparate(770,771,1,771);break;case 2:l.blendFunc(770,1);break;case 3:l.blendFunc(0,769);break;case 4:l.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Zt)}Sr=rn=Ot=Mr=null,Bt=Zt,$n=zi}}else Fi=Fi||Dt,Fr=Fr||xn,ln=ln||An,(Dt!==wt||Fi!==Hr)&&(l.blendEquationSeparate(pn[Dt],pn[Fi]),wt=Dt,Hr=Fi),(xn!==Mr||An!==Ot||Fr!==rn||ln!==Sr)&&(l.blendFuncSeparate(mr[xn],mr[An],mr[Fr],mr[ln]),Mr=xn,Ot=An,rn=Fr,Sr=ln),Bt=Zt,$n=null}function D(Zt){sn!==Zt&&(Zt?l.frontFace(2304):l.frontFace(2305),sn=Zt)}function G(Zt){Zt!==0?(w(2884),Zt!==Wn&&(Zt===1?l.cullFace(1029):Zt===2?l.cullFace(1028):l.cullFace(1032))):T(2884),Wn=Zt}function Y(Zt,Dt,xn){Zt?(w(32823),(si!==Dt||Do!==xn)&&(l.polygonOffset(Dt,xn),si=Dt,Do=xn)):T(32823)}function re(Zt){Zt===void 0&&(Zt=33984+oo-1),za!==Zt&&(l.activeTexture(Zt),za=Zt)}var se=i.isWebGL2,ae=new function(){var Zt=!1,Dt=new C,xn=null,An=new C(0,0,0,0);return{setMask:function(Fr){xn===Fr||Zt||(l.colorMask(Fr,Fr,Fr,Fr),xn=Fr)},setLocked:function(Fr){Zt=Fr},setClear:function(Fr,ln,zi,Ua,Uo){Uo===!0&&(Fr*=Ua,ln*=Ua,zi*=Ua),Dt.set(Fr,ln,zi,Ua),An.equals(Dt)===!1&&(l.clearColor(Fr,ln,zi,Ua),An.copy(Dt))},reset:function(){Zt=!1,xn=null,An.set(-1,0,0,0)}}},fe=new function(){var Zt=!1,Dt=null,xn=null,An=null;return{setTest:function(Fr){Fr?w(2929):T(2929)},setMask:function(Fr){Dt===Fr||Zt||(l.depthMask(Fr),Dt=Fr)},setFunc:function(Fr){if(xn!==Fr){if(Fr)switch(Fr){case 0:l.depthFunc(512);break;case 1:l.depthFunc(519);break;case 2:l.depthFunc(513);break;case 3:l.depthFunc(515);break;case 4:l.depthFunc(514);break;case 5:l.depthFunc(518);break;case 6:l.depthFunc(516);break;case 7:l.depthFunc(517);break;default:l.depthFunc(515)}else l.depthFunc(515);xn=Fr}},setLocked:function(Fr){Zt=Fr},setClear:function(Fr){An!==Fr&&(l.clearDepth(Fr),An=Fr)},reset:function(){Zt=!1,An=xn=Dt=null}}},ve=new function(){var Zt=!1,Dt=null,xn=null,An=null,Fi=null,Fr=null,ln=null,zi=null,Ua=null;return{setTest:function(or){Zt||(or?w(2960):T(2960))},setMask:function(or){Dt===or||Zt||(l.stencilMask(or),Dt=or)},setFunc:function(or,Li,Pi){(xn!==or||An!==Li||Fi!==Pi)&&(l.stencilFunc(or,Li,Pi),xn=or,An=Li,Fi=Pi)},setOp:function(or,Li,Pi){(Fr!==or||ln!==Li||zi!==Pi)&&(l.stencilOp(or,Li,Pi),Fr=or,ln=Li,zi=Pi)},setLocked:function(or){Zt=or},setClear:function(or){Ua!==or&&(l.clearStencil(or),Ua=or)},reset:function(){Zt=!1,Ua=zi=ln=Fr=Fi=An=xn=Dt=null}}};i=l.getParameter(34921);var Ze=new Uint8Array(i),ht=new Uint8Array(i),ct=new Uint8Array(i),mt={},Mt=null,$t=null,Bt=null,wt=null,Mr=null,Ot=null,Hr=null,rn=null,Sr=null,$n=!1,sn=null,Wn=null,to=null,si=null,Do=null,oo=l.getParameter(35661),wa=!1;i=0,i=l.getParameter(7938),i.indexOf("WebGL")!==-1?(i=parseFloat(/^WebGL ([0-9])/.exec(i)[1]),wa=1<=i):i.indexOf("OpenGL ES")!==-1&&(i=parseFloat(/^OpenGL ES ([0-9])/.exec(i)[1]),wa=2<=i);var za=null,ke={},tt=new C,Qt=new C,Vr={};Vr[3553]=d(3553,3553,1),Vr[34067]=d(34067,34069,6),ae.setClear(0,0,0,1),fe.setClear(1),ve.setClear(0),w(2929),fe.setFunc(3),D(!1),G(1),w(2884),b(0);var pn={100:32774,101:32778,102:32779};se?(pn[103]=32775,pn[104]=32776):(i=t.get("EXT_blend_minmax"),i!==null&&(pn[103]=i.MIN_EXT,pn[104]=i.MAX_EXT));var mr={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};return{buffers:{color:ae,depth:fe,stencil:ve},initAttributes:function(){for(var Dt=0,xn=Ze.length;Dt<xn;Dt++)Ze[Dt]=0},enableAttribute:function(Dt){v(Dt,0)},enableAttributeAndDivisor:v,disableUnusedAttributes:function(){for(var Dt=0,xn=ht.length;Dt!==xn;++Dt)ht[Dt]!==Ze[Dt]&&(l.disableVertexAttribArray(Dt),ht[Dt]=0)},vertexAttribPointer:function(Dt,xn,An,Fi,Fr,ln){se!==!0||An!==5124&&An!==5125?l.vertexAttribPointer(Dt,xn,An,Fi,Fr,ln):l.vertexAttribIPointer(Dt,xn,An,Fi,Fr,ln)},enable:w,disable:T,useProgram:function(Dt){return Mt!==Dt?(l.useProgram(Dt),Mt=Dt,!0):!1},setBlending:b,setMaterial:function(Dt,xn){Dt.side===2?T(2884):w(2884);var An=Dt.side===1;xn&&(An=!An),D(An),Dt.blending===1&&Dt.transparent===!1?b(0):b(Dt.blending,Dt.blendEquation,Dt.blendSrc,Dt.blendDst,Dt.blendEquationAlpha,Dt.blendSrcAlpha,Dt.blendDstAlpha,Dt.premultipliedAlpha),fe.setFunc(Dt.depthFunc),fe.setTest(Dt.depthTest),fe.setMask(Dt.depthWrite),ae.setMask(Dt.colorWrite),xn=Dt.stencilWrite,ve.setTest(xn),xn&&(ve.setMask(Dt.stencilWriteMask),ve.setFunc(Dt.stencilFunc,Dt.stencilRef,Dt.stencilFuncMask),ve.setOp(Dt.stencilFail,Dt.stencilZFail,Dt.stencilZPass)),Y(Dt.polygonOffset,Dt.polygonOffsetFactor,Dt.polygonOffsetUnits)},setFlipSided:D,setCullFace:G,setLineWidth:function(Dt){Dt!==to&&(wa&&l.lineWidth(Dt),to=Dt)},setPolygonOffset:Y,setScissorTest:function(Dt){Dt?w(3089):T(3089)},activeTexture:re,bindTexture:function(Dt,xn){za===null&&re();var An=ke[za];An===void 0&&(An={type:void 0,texture:void 0},ke[za]=An),(An.type!==Dt||An.texture!==xn)&&(l.bindTexture(Dt,xn||Vr[Dt]),An.type=Dt,An.texture=xn)},unbindTexture:function(){var Dt=ke[za];Dt!==void 0&&Dt.type!==void 0&&(l.bindTexture(Dt.type,null),Dt.type=void 0,Dt.texture=void 0)},compressedTexImage2D:function(){try{l.compressedTexImage2D.apply(l,arguments)}catch(Dt){console.error("THREE.WebGLState:",Dt)}},texImage2D:function(){try{l.texImage2D.apply(l,arguments)}catch(Dt){console.error("THREE.WebGLState:",Dt)}},texImage3D:function(){try{l.texImage3D.apply(l,arguments)}catch(Dt){console.error("THREE.WebGLState:",Dt)}},scissor:function(Dt){tt.equals(Dt)===!1&&(l.scissor(Dt.x,Dt.y,Dt.z,Dt.w),tt.copy(Dt))},viewport:function(Dt){Qt.equals(Dt)===!1&&(l.viewport(Dt.x,Dt.y,Dt.z,Dt.w),Qt.copy(Dt))},reset:function(){for(var Dt=0;Dt<ht.length;Dt++)ht[Dt]===1&&(l.disableVertexAttribArray(Dt),ht[Dt]=0);mt={},za=null,ke={},Wn=sn=Bt=Mt=null,ae.reset(),fe.reset(),ve.reset()}}}function cS(l,t,i,d,v,w,T){function b(ke,tt){return to?new OffscreenCanvas(ke,tt):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function D(ke,tt,Qt,Vr){var pn=1;if((ke.width>Vr||ke.height>Vr)&&(pn=Vr/Math.max(ke.width,ke.height)),1>pn||tt===!0){if(typeof HTMLImageElement!="undefined"&&ke instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&ke instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&ke instanceof ImageBitmap)return Vr=tt?ho.floorPowerOfTwo:Math.floor,tt=Vr(pn*ke.width),pn=Vr(pn*ke.height),Wn===void 0&&(Wn=b(tt,pn)),Qt=Qt?b(tt,pn):Wn,Qt.width=tt,Qt.height=pn,Qt.getContext("2d").drawImage(ke,0,0,tt,pn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ke.width+"x"+ke.height+") to ("+tt+"x"+pn+")."),Qt;"data"in ke&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ke.width+"x"+ke.height+").")}return ke}function G(ke){return ho.isPowerOfTwo(ke.width)&&ho.isPowerOfTwo(ke.height)}function Y(ke,tt){return ke.generateMipmaps&&tt&&ke.minFilter!==1003&&ke.minFilter!==1006}function re(ke,tt,Qt,Vr){l.generateMipmap(ke),d.get(tt).__maxMipLevel=Math.log(Math.max(Qt,Vr))*Math.LOG2E}function se(ke,tt,Qt){if(Ot===!1)return tt;if(ke!==null){if(l[ke]!==void 0)return l[ke];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ke+"'")}return ke=tt,tt===6403&&(Qt===5126&&(ke=33326),Qt===5131&&(ke=33325),Qt===5121&&(ke=33321)),tt===6407&&(Qt===5126&&(ke=34837),Qt===5131&&(ke=34843),Qt===5121&&(ke=32849)),tt===6408&&(Qt===5126&&(ke=34836),Qt===5131&&(ke=34842),Qt===5121&&(ke=32856)),ke!==33325&&ke!==33326&&ke!==34842&&ke!==34836||t.get("EXT_color_buffer_float"),ke}function ae(ke){return ke===1003||ke===1004||ke===1005?9728:9729}function fe(ke){ke=ke.target,ke.removeEventListener("dispose",fe);var tt=d.get(ke);tt.__webglInit!==void 0&&(l.deleteTexture(tt.__webglTexture),d.remove(ke)),ke.isVideoTexture&&sn.delete(ke),T.memory.textures--}function ve(ke){ke=ke.target,ke.removeEventListener("dispose",ve);var tt=d.get(ke),Qt=d.get(ke.texture);if(ke){if(Qt.__webglTexture!==void 0&&l.deleteTexture(Qt.__webglTexture),ke.depthTexture&&ke.depthTexture.dispose(),ke.isWebGLCubeRenderTarget)for(Qt=0;6>Qt;Qt++)l.deleteFramebuffer(tt.__webglFramebuffer[Qt]),tt.__webglDepthbuffer&&l.deleteRenderbuffer(tt.__webglDepthbuffer[Qt]);else l.deleteFramebuffer(tt.__webglFramebuffer),tt.__webglDepthbuffer&&l.deleteRenderbuffer(tt.__webglDepthbuffer),tt.__webglMultisampledFramebuffer&&l.deleteFramebuffer(tt.__webglMultisampledFramebuffer),tt.__webglColorRenderbuffer&&l.deleteRenderbuffer(tt.__webglColorRenderbuffer),tt.__webglDepthRenderbuffer&&l.deleteRenderbuffer(tt.__webglDepthRenderbuffer);d.remove(ke.texture),d.remove(ke)}T.memory.textures--}function Ze(ke,tt){var Qt=d.get(ke);if(ke.isVideoTexture){var Vr=T.render.frame;sn.get(ke)!==Vr&&(sn.set(ke,Vr),ke.update())}if(0<ke.version&&Qt.__version!==ke.version)if(Vr=ke.image,Vr===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Vr.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$t(Qt,ke,tt);return}i.activeTexture(33984+tt),i.bindTexture(3553,Qt.__webglTexture)}function ht(ke,tt){if(ke.image.length===6){var Qt=d.get(ke);if(0<ke.version&&Qt.__version!==ke.version){Mt(Qt,ke),i.activeTexture(33984+tt),i.bindTexture(34067,Qt.__webglTexture),l.pixelStorei(37440,ke.flipY);var Vr=ke&&(ke.isCompressedTexture||ke.image[0].isCompressedTexture);tt=ke.image[0]&&ke.image[0].isDataTexture;for(var pn=[],mr=0;6>mr;mr++)pn[mr]=Vr||tt?tt?ke.image[mr].image:ke.image[mr]:D(ke.image[mr],!1,!0,rn);var Zt=pn[0],Dt=G(Zt)||Ot,xn=w.convert(ke.format),An=w.convert(ke.type),Fi=se(ke.internalFormat,xn,An);if(mt(34067,ke,Dt),Vr){for(mr=0;6>mr;mr++){var Fr=pn[mr].mipmaps;for(Vr=0;Vr<Fr.length;Vr++){var ln=Fr[Vr];ke.format!==1023&&ke.format!==1022?xn!==null?i.compressedTexImage2D(34069+mr,Vr,Fi,ln.width,ln.height,0,ln.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+mr,Vr,Fi,ln.width,ln.height,0,xn,An,ln.data)}}Qt.__maxMipLevel=Fr.length-1}else{for(Fr=ke.mipmaps,mr=0;6>mr;mr++)if(tt)for(i.texImage2D(34069+mr,0,Fi,pn[mr].width,pn[mr].height,0,xn,An,pn[mr].data),Vr=0;Vr<Fr.length;Vr++)ln=Fr[Vr],ln=ln.image[mr].image,i.texImage2D(34069+mr,Vr+1,Fi,ln.width,ln.height,0,xn,An,ln.data);else for(i.texImage2D(34069+mr,0,Fi,xn,An,pn[mr]),Vr=0;Vr<Fr.length;Vr++)ln=Fr[Vr],i.texImage2D(34069+mr,Vr+1,Fi,xn,An,ln.image[mr]);Qt.__maxMipLevel=Fr.length}Y(ke,Dt)&&re(34067,ke,Zt.width,Zt.height),Qt.__version=ke.version,ke.onUpdate&&ke.onUpdate(ke)}else i.activeTexture(33984+tt),i.bindTexture(34067,Qt.__webglTexture)}}function ct(ke,tt){i.activeTexture(33984+tt),i.bindTexture(34067,d.get(ke).__webglTexture)}function mt(ke,tt,Qt){Qt?(l.texParameteri(ke,10242,Do[tt.wrapS]),l.texParameteri(ke,10243,Do[tt.wrapT]),ke!==32879&&ke!==35866||l.texParameteri(ke,32882,Do[tt.wrapR]),l.texParameteri(ke,10240,oo[tt.magFilter]),l.texParameteri(ke,10241,oo[tt.minFilter])):(l.texParameteri(ke,10242,33071),l.texParameteri(ke,10243,33071),ke!==32879&&ke!==35866||l.texParameteri(ke,32882,33071),tt.wrapS===1001&&tt.wrapT===1001||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),l.texParameteri(ke,10240,ae(tt.magFilter)),l.texParameteri(ke,10241,ae(tt.minFilter)),tt.minFilter!==1003&&tt.minFilter!==1006&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(Qt=t.get("EXT_texture_filter_anisotropic"))||tt.type===1015&&t.get("OES_texture_float_linear")===null||tt.type===1016&&(Ot||t.get("OES_texture_half_float_linear"))===null||!(1<tt.anisotropy||d.get(tt).__currentAnisotropy)||(l.texParameterf(ke,Qt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(tt.anisotropy,v.getMaxAnisotropy())),d.get(tt).__currentAnisotropy=tt.anisotropy)}function Mt(ke,tt){ke.__webglInit===void 0&&(ke.__webglInit=!0,tt.addEventListener("dispose",fe),ke.__webglTexture=l.createTexture(),T.memory.textures++)}function $t(ke,tt,Qt){var Vr=3553;tt.isDataTexture2DArray&&(Vr=35866),tt.isDataTexture3D&&(Vr=32879),Mt(ke,tt),i.activeTexture(33984+Qt),i.bindTexture(Vr,ke.__webglTexture),l.pixelStorei(37440,tt.flipY),l.pixelStorei(37441,tt.premultiplyAlpha),l.pixelStorei(3317,tt.unpackAlignment),Qt=Ot?!1:tt.wrapS!==1001||tt.wrapT!==1001||tt.minFilter!==1003&&tt.minFilter!==1006,Qt=Qt&&G(tt.image)===!1,Qt=D(tt.image,Qt,!1,Sr);var pn=G(Qt)||Ot,mr=w.convert(tt.format),Zt=w.convert(tt.type),Dt=se(tt.internalFormat,mr,Zt);mt(Vr,tt,pn);var xn=tt.mipmaps;if(tt.isDepthTexture)Dt=6402,Ot?Dt=tt.type===1015?36012:tt.type===1014?33190:tt.type===1020?35056:33189:tt.type===1015&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),tt.format===1026&&Dt===6402&&tt.type!==1012&&tt.type!==1014&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),tt.type=1012,Zt=w.convert(tt.type)),tt.format===1027&&Dt===6402&&(Dt=34041,tt.type!==1020&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),tt.type=1020,Zt=w.convert(tt.type))),i.texImage2D(3553,0,Dt,Qt.width,Qt.height,0,mr,Zt,null);else if(tt.isDataTexture)if(0<xn.length&&pn){for(var An=0,Fi=xn.length;An<Fi;An++){var Fr=xn[An];i.texImage2D(3553,An,Dt,Fr.width,Fr.height,0,mr,Zt,Fr.data)}tt.generateMipmaps=!1,ke.__maxMipLevel=xn.length-1}else i.texImage2D(3553,0,Dt,Qt.width,Qt.height,0,mr,Zt,Qt.data),ke.__maxMipLevel=0;else if(tt.isCompressedTexture){for(An=0,Fi=xn.length;An<Fi;An++)Fr=xn[An],tt.format!==1023&&tt.format!==1022?mr!==null?i.compressedTexImage2D(3553,An,Dt,Fr.width,Fr.height,0,Fr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,An,Dt,Fr.width,Fr.height,0,mr,Zt,Fr.data);ke.__maxMipLevel=xn.length-1}else if(tt.isDataTexture2DArray)i.texImage3D(35866,0,Dt,Qt.width,Qt.height,Qt.depth,0,mr,Zt,Qt.data),ke.__maxMipLevel=0;else if(tt.isDataTexture3D)i.texImage3D(32879,0,Dt,Qt.width,Qt.height,Qt.depth,0,mr,Zt,Qt.data),ke.__maxMipLevel=0;else if(0<xn.length&&pn){for(An=0,Fi=xn.length;An<Fi;An++)Fr=xn[An],i.texImage2D(3553,An,Dt,mr,Zt,Fr);tt.generateMipmaps=!1,ke.__maxMipLevel=xn.length-1}else i.texImage2D(3553,0,Dt,mr,Zt,Qt),ke.__maxMipLevel=0;Y(tt,pn)&&re(Vr,tt,Qt.width,Qt.height),ke.__version=tt.version,tt.onUpdate&&tt.onUpdate(tt)}function Bt(ke,tt,Qt,Vr){var pn=w.convert(tt.texture.format),mr=w.convert(tt.texture.type),Zt=se(tt.texture.internalFormat,pn,mr);i.texImage2D(Vr,0,Zt,tt.width,tt.height,0,pn,mr,null),l.bindFramebuffer(36160,ke),l.framebufferTexture2D(36160,Qt,Vr,d.get(tt.texture).__webglTexture,0),l.bindFramebuffer(36160,null)}function wt(ke,tt,Qt){if(l.bindRenderbuffer(36161,ke),tt.depthBuffer&&!tt.stencilBuffer){var Vr=33189;Qt?((Qt=tt.depthTexture)&&Qt.isDepthTexture&&(Qt.type===1015?Vr=36012:Qt.type===1014&&(Vr=33190)),Qt=Mr(tt),l.renderbufferStorageMultisample(36161,Qt,Vr,tt.width,tt.height)):l.renderbufferStorage(36161,Vr,tt.width,tt.height),l.framebufferRenderbuffer(36160,36096,36161,ke)}else tt.depthBuffer&&tt.stencilBuffer?(Qt?(Qt=Mr(tt),l.renderbufferStorageMultisample(36161,Qt,35056,tt.width,tt.height)):l.renderbufferStorage(36161,34041,tt.width,tt.height),l.framebufferRenderbuffer(36160,33306,36161,ke)):(ke=w.convert(tt.texture.format),Vr=w.convert(tt.texture.type),Vr=se(tt.texture.internalFormat,ke,Vr),Qt?(Qt=Mr(tt),l.renderbufferStorageMultisample(36161,Qt,Vr,tt.width,tt.height)):l.renderbufferStorage(36161,Vr,tt.width,tt.height));l.bindRenderbuffer(36161,null)}function Mr(ke){return Ot&&ke.isWebGLMultisampleRenderTarget?Math.min($n,ke.samples):0}var Ot=v.isWebGL2,Hr=v.maxTextures,rn=v.maxCubemapSize,Sr=v.maxTextureSize,$n=v.maxSamples,sn=new Xi,Wn,to=!1;try{to=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(ke){}var si=0,Do={1e3:10497,1001:33071,1002:33648},oo={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987},wa=!1,za=!1;this.allocateTextureUnit=function(){var ke=si;return ke>=Hr&&console.warn("THREE.WebGLTextures: Trying to use "+ke+" texture units while this GPU supports only "+Hr),si+=1,ke},this.resetTextureUnits=function(){si=0},this.setTexture2D=Ze,this.setTexture2DArray=function(ke,tt){var Qt=d.get(ke);0<ke.version&&Qt.__version!==ke.version?$t(Qt,ke,tt):(i.activeTexture(33984+tt),i.bindTexture(35866,Qt.__webglTexture))},this.setTexture3D=function(ke,tt){var Qt=d.get(ke);0<ke.version&&Qt.__version!==ke.version?$t(Qt,ke,tt):(i.activeTexture(33984+tt),i.bindTexture(32879,Qt.__webglTexture))},this.setTextureCube=ht,this.setTextureCubeDynamic=ct,this.setupRenderTarget=function(ke){var tt=d.get(ke),Qt=d.get(ke.texture);ke.addEventListener("dispose",ve),Qt.__webglTexture=l.createTexture(),T.memory.textures++;var Vr=ke.isWebGLCubeRenderTarget===!0,pn=ke.isWebGLMultisampleRenderTarget===!0,mr=G(ke)||Ot;if(!Ot||ke.texture.format!==1022||ke.texture.type!==1015&&ke.texture.type!==1016||(ke.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Vr)for(tt.__webglFramebuffer=[],pn=0;6>pn;pn++)tt.__webglFramebuffer[pn]=l.createFramebuffer();else if(tt.__webglFramebuffer=l.createFramebuffer(),pn)if(Ot){tt.__webglMultisampledFramebuffer=l.createFramebuffer(),tt.__webglColorRenderbuffer=l.createRenderbuffer(),l.bindRenderbuffer(36161,tt.__webglColorRenderbuffer),pn=w.convert(ke.texture.format);var Zt=w.convert(ke.texture.type);pn=se(ke.texture.internalFormat,pn,Zt),Zt=Mr(ke),l.renderbufferStorageMultisample(36161,Zt,pn,ke.width,ke.height),l.bindFramebuffer(36160,tt.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(36160,36064,36161,tt.__webglColorRenderbuffer),l.bindRenderbuffer(36161,null),ke.depthBuffer&&(tt.__webglDepthRenderbuffer=l.createRenderbuffer(),wt(tt.__webglDepthRenderbuffer,ke,!0)),l.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Vr){for(i.bindTexture(34067,Qt.__webglTexture),mt(34067,ke.texture,mr),pn=0;6>pn;pn++)Bt(tt.__webglFramebuffer[pn],ke,36064,34069+pn);Y(ke.texture,mr)&&re(34067,ke.texture,ke.width,ke.height),i.bindTexture(34067,null)}else i.bindTexture(3553,Qt.__webglTexture),mt(3553,ke.texture,mr),Bt(tt.__webglFramebuffer,ke,36064,3553),Y(ke.texture,mr)&&re(3553,ke.texture,ke.width,ke.height),i.bindTexture(3553,null);if(ke.depthBuffer){if(tt=d.get(ke),Qt=ke.isWebGLCubeRenderTarget===!0,ke.depthTexture){if(Qt)throw Error("target.depthTexture not supported in Cube render targets");if(ke&&ke.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(l.bindFramebuffer(36160,tt.__webglFramebuffer),!ke.depthTexture||!ke.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(d.get(ke.depthTexture).__webglTexture&&ke.depthTexture.image.width===ke.width&&ke.depthTexture.image.height===ke.height||(ke.depthTexture.image.width=ke.width,ke.depthTexture.image.height=ke.height,ke.depthTexture.needsUpdate=!0),Ze(ke.depthTexture,0),tt=d.get(ke.depthTexture).__webglTexture,ke.depthTexture.format===1026)l.framebufferTexture2D(36160,36096,3553,tt,0);else if(ke.depthTexture.format===1027)l.framebufferTexture2D(36160,33306,3553,tt,0);else throw Error("Unknown depthTexture format")}else if(Qt)for(tt.__webglDepthbuffer=[],Qt=0;6>Qt;Qt++)l.bindFramebuffer(36160,tt.__webglFramebuffer[Qt]),tt.__webglDepthbuffer[Qt]=l.createRenderbuffer(),wt(tt.__webglDepthbuffer[Qt],ke,!1);else l.bindFramebuffer(36160,tt.__webglFramebuffer),tt.__webglDepthbuffer=l.createRenderbuffer(),wt(tt.__webglDepthbuffer,ke,!1);l.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(ke){var tt=ke.texture,Qt=G(ke)||Ot;if(Y(tt,Qt)){Qt=ke.isWebGLCubeRenderTarget?34067:3553;var Vr=d.get(tt).__webglTexture;i.bindTexture(Qt,Vr),re(Qt,tt,ke.width,ke.height),i.bindTexture(Qt,null)}},this.updateMultisampleRenderTarget=function(ke){if(ke.isWebGLMultisampleRenderTarget)if(Ot){var tt=d.get(ke);l.bindFramebuffer(36008,tt.__webglMultisampledFramebuffer),l.bindFramebuffer(36009,tt.__webglFramebuffer);var Qt=ke.width,Vr=ke.height,pn=16384;ke.depthBuffer&&(pn|=256),ke.stencilBuffer&&(pn|=1024),l.blitFramebuffer(0,0,Qt,Vr,0,0,Qt,Vr,pn,9728),l.bindFramebuffer(36160,tt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(ke,tt){ke&&ke.isWebGLRenderTarget&&(wa===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),wa=!0),ke=ke.texture),Ze(ke,tt)},this.safeSetTextureCube=function(ke,tt){ke&&ke.isWebGLCubeRenderTarget&&(za===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),za=!0),ke=ke.texture),ke&&ke.isCubeTexture||Array.isArray(ke.image)&&ke.image.length===6?ht(ke,tt):ct(ke,tt)}}function jw(l,t,i){var d=i.isWebGL2;return{convert:function(w){if(w===1009)return 5121;if(w===1017)return 32819;if(w===1018)return 32820;if(w===1019)return 33635;if(w===1010)return 5120;if(w===1011)return 5122;if(w===1012)return 5123;if(w===1013)return 5124;if(w===1014)return 5125;if(w===1015)return 5126;if(w===1016){if(d)return 5131;var T=t.get("OES_texture_half_float");return T!==null?T.HALF_FLOAT_OES:null}if(w===1021)return 6406;if(w===1022)return 6407;if(w===1023)return 6408;if(w===1024)return 6409;if(w===1025)return 6410;if(w===1026)return 6402;if(w===1027)return 34041;if(w===1028)return 6403;if(w===1029)return 36244;if(w===1030)return 33319;if(w===1031)return 33320;if(w===1032)return 36248;if(w===1033)return 36249;if(w===33776||w===33777||w===33778||w===33779)if(T=t.get("WEBGL_compressed_texture_s3tc"),T!==null){if(w===33776)return T.COMPRESSED_RGB_S3TC_DXT1_EXT;if(w===33777)return T.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(w===33778)return T.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(w===33779)return T.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(w===35840||w===35841||w===35842||w===35843)if(T=t.get("WEBGL_compressed_texture_pvrtc"),T!==null){if(w===35840)return T.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(w===35841)return T.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(w===35842)return T.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(w===35843)return T.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(w===36196)return T=t.get("WEBGL_compressed_texture_etc1"),T!==null?T.COMPRESSED_RGB_ETC1_WEBGL:null;if((w===37492||w===37496)&&(T=t.get("WEBGL_compressed_texture_etc"),T!==null)){if(w===37492)return T.COMPRESSED_RGB8_ETC2;if(w===37496)return T.COMPRESSED_RGBA8_ETC2_EAC}if(w===37808||w===37809||w===37810||w===37811||w===37812||w===37813||w===37814||w===37815||w===37816||w===37817||w===37818||w===37819||w===37820||w===37821||w===37840||w===37841||w===37842||w===37843||w===37844||w===37845||w===37846||w===37847||w===37848||w===37849||w===37850||w===37851||w===37852||w===37853)return T=t.get("WEBGL_compressed_texture_astc"),T!==null?w:null;if(w===36492)return T=t.get("EXT_texture_compression_bptc"),T!==null?w:null;if(w===1020)return d?34042:(T=t.get("WEBGL_depth_texture"),T!==null?T.UNSIGNED_INT_24_8_WEBGL:null)}}}function vA(l){Ht.call(this),this.cameras=l||[]}function _y(){oe.call(this),this.type="Group"}function yA(){this._grip=this._targetRay=null}function Vw(l,t){function i(Ot){var Hr=fe.get(Ot.inputSource);Hr&&Hr.dispatchEvent({type:Ot.type})}function d(){fe.forEach(function(Ot,Hr){Ot.disconnect(Hr)}),fe.clear(),l.setFramebuffer(null),l.setRenderTarget(l.getRenderTarget()),Mr.stop(),b.isPresenting=!1,b.dispatchEvent({type:"sessionend"})}function v(Ot){Y=Ot,Mr.setContext(D),Mr.start(),b.isPresenting=!0,b.dispatchEvent({type:"sessionstart"})}function w(Ot){for(var Hr=D.inputSources,rn=0;rn<ae.length;rn++)fe.set(Hr[rn],ae[rn]);for(rn=0;rn<Ot.removed.length;rn++){Hr=Ot.removed[rn];var Sr=fe.get(Hr);Sr&&(Sr.dispatchEvent({type:"disconnected",data:Hr}),fe.delete(Hr))}for(rn=0;rn<Ot.added.length;rn++)Hr=Ot.added[rn],(Sr=fe.get(Hr))&&Sr.dispatchEvent({type:"connected",data:Hr})}function T(Ot,Hr){Hr===null?Ot.matrixWorld.copy(Ot.matrix):Ot.matrixWorld.multiplyMatrices(Hr.matrixWorld,Ot.matrix),Ot.matrixWorldInverse.getInverse(Ot.matrixWorld)}var b=this,D=null,G=1,Y=null,re="local-floor",se=null,ae=[],fe=new Po,ve=new Ht;ve.layers.enable(1),ve.viewport=new C;var Ze=new Ht;Ze.layers.enable(2),Ze.viewport=new C;var ht=[ve,Ze],ct=new vA;ct.layers.enable(1),ct.layers.enable(2);var mt=null,Mt=null;this.isPresenting=this.enabled=!1,this.getController=function(Ot){var Hr=ae[Ot];return Hr===void 0&&(Hr=new yA,ae[Ot]=Hr),Hr.getTargetRaySpace()},this.getControllerGrip=function(Ot){var Hr=ae[Ot];return Hr===void 0&&(Hr=new yA,ae[Ot]=Hr),Hr.getGripSpace()},this.setFramebufferScaleFactor=function(Ot){G=Ot,b.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ot){re=Ot,b.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Y},this.getSession=function(){return D},this.setSession=function(Ot){D=Ot,D!==null&&(D.addEventListener("select",i),D.addEventListener("selectstart",i),D.addEventListener("selectend",i),D.addEventListener("squeeze",i),D.addEventListener("squeezestart",i),D.addEventListener("squeezeend",i),D.addEventListener("end",d),Ot=t.getContextAttributes(),Ot.xrCompatible!==!0&&t.makeXRCompatible(),Ot=new XRWebGLLayer(D,t,{antialias:Ot.antialias,alpha:Ot.alpha,depth:Ot.depth,stencil:Ot.stencil,framebufferScaleFactor:G}),D.updateRenderState({baseLayer:Ot}),D.requestReferenceSpace(re).then(v),D.addEventListener("inputsourceschange",w))};var $t=new z,Bt=new z;this.getCamera=function(Ot){ct.near=Ze.near=ve.near=Ot.near,ct.far=Ze.far=ve.far=Ot.far,(mt!==ct.near||Mt!==ct.far)&&(D.updateRenderState({depthNear:ct.near,depthFar:ct.far}),mt=ct.near,Mt=ct.far);var Hr=Ot.parent,rn=ct.cameras;T(ct,Hr);for(var Sr=0;Sr<rn.length;Sr++)T(rn[Sr],Hr);for(Ot.matrixWorld.copy(ct.matrixWorld),Ot=Ot.children,Sr=0,Hr=Ot.length;Sr<Hr;Sr++)Ot[Sr].updateMatrixWorld(!0);if(rn.length===2){$t.setFromMatrixPosition(ve.matrixWorld),Bt.setFromMatrixPosition(Ze.matrixWorld),rn=$t.distanceTo(Bt);var $n=ve.projectionMatrix.elements,sn=Ze.projectionMatrix.elements,Wn=$n[14]/($n[10]-1);Sr=$n[14]/($n[10]+1),Ot=($n[9]+1)/$n[5],Hr=($n[9]-1)/$n[5];var to=($n[8]-1)/$n[0],si=(sn[8]+1)/sn[0];sn=Wn*to,$n=Wn*si,si=rn/(-to+si),to=si*-to,ve.matrixWorld.decompose(ct.position,ct.quaternion,ct.scale),ct.translateX(to),ct.translateZ(si),ct.matrixWorld.compose(ct.position,ct.quaternion,ct.scale),ct.matrixWorldInverse.getInverse(ct.matrixWorld),Wn+=si,si=Sr+si,ct.projectionMatrix.makePerspective(sn-to,$n+(rn-to),Ot*Sr/si*Wn,Hr*Sr/si*Wn,Wn,si)}else ct.projectionMatrix.copy(ve.projectionMatrix);return ct};var wt=null,Mr=new Sn;Mr.setAnimationLoop(function(Ot,Hr){if(se=Hr.getViewerPose(Y),se!==null){var rn=se.views,Sr=D.renderState.baseLayer;l.setFramebuffer(Sr.framebuffer);var $n=!1;rn.length!==ct.cameras.length&&(ct.cameras.length=0,$n=!0);for(var sn=0;sn<rn.length;sn++){var Wn=rn[sn],to=Sr.getViewport(Wn),si=ht[sn];si.matrix.fromArray(Wn.transform.matrix),si.projectionMatrix.fromArray(Wn.projectionMatrix),si.viewport.set(to.x,to.y,to.width,to.height),sn===0&&ct.matrix.copy(si.matrix),$n===!0&&ct.cameras.push(si)}}for(rn=D.inputSources,sn=0;sn<ae.length;sn++)ae[sn].update(rn[sn],Hr,Y);wt&&wt(Ot,Hr)}),this.setAnimationLoop=function(Ot){wt=Ot},this.dispose=function(){}}function hS(l){function t(d,v,w){if(d.opacity.value=v.opacity,v.color&&d.diffuse.value.copy(v.color),v.emissive&&d.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(d.map.value=v.map),v.alphaMap&&(d.alphaMap.value=v.alphaMap),v.specularMap&&(d.specularMap.value=v.specularMap),(w=v.envMap||w)&&(d.envMap.value=w,d.flipEnvMap.value=w.isCubeTexture?-1:1,d.reflectivity.value=v.reflectivity,d.refractionRatio.value=v.refractionRatio,d.maxMipLevel.value=l.get(w).__maxMipLevel),v.lightMap&&(d.lightMap.value=v.lightMap,d.lightMapIntensity.value=v.lightMapIntensity),v.aoMap&&(d.aoMap.value=v.aoMap,d.aoMapIntensity.value=v.aoMapIntensity),v.map)var T=v.map;else v.specularMap?T=v.specularMap:v.displacementMap?T=v.displacementMap:v.normalMap?T=v.normalMap:v.bumpMap?T=v.bumpMap:v.roughnessMap?T=v.roughnessMap:v.metalnessMap?T=v.metalnessMap:v.alphaMap?T=v.alphaMap:v.emissiveMap&&(T=v.emissiveMap);if(T!==void 0&&(T.isWebGLRenderTarget&&(T=T.texture),T.matrixAutoUpdate===!0&&T.updateMatrix(),d.uvTransform.value.copy(T.matrix)),v.aoMap)var b=v.aoMap;else v.lightMap&&(b=v.lightMap);b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),d.uv2Transform.value.copy(b.matrix))}function i(d,v,w){d.roughness.value=v.roughness,d.metalness.value=v.metalness,v.roughnessMap&&(d.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(d.metalnessMap.value=v.metalnessMap),v.emissiveMap&&(d.emissiveMap.value=v.emissiveMap),v.bumpMap&&(d.bumpMap.value=v.bumpMap,d.bumpScale.value=v.bumpScale,v.side===1&&(d.bumpScale.value*=-1)),v.normalMap&&(d.normalMap.value=v.normalMap,d.normalScale.value.copy(v.normalScale),v.side===1&&d.normalScale.value.negate()),v.displacementMap&&(d.displacementMap.value=v.displacementMap,d.displacementScale.value=v.displacementScale,d.displacementBias.value=v.displacementBias),(v.envMap||w)&&(d.envMapIntensity.value=v.envMapIntensity)}return{refreshFogUniforms:function(v,w){v.fogColor.value.copy(w.color),w.isFog?(v.fogNear.value=w.near,v.fogFar.value=w.far):w.isFogExp2&&(v.fogDensity.value=w.density)},refreshMaterialUniforms:function(v,w,T,b,D){if(w.isMeshBasicMaterial)t(v,w);else if(w.isMeshLambertMaterial)t(v,w),w.emissiveMap&&(v.emissiveMap.value=w.emissiveMap);else if(w.isMeshToonMaterial)t(v,w),v.specular.value.copy(w.specular),v.shininess.value=Math.max(w.shininess,1e-4),w.gradientMap&&(v.gradientMap.value=w.gradientMap),w.emissiveMap&&(v.emissiveMap.value=w.emissiveMap),w.bumpMap&&(v.bumpMap.value=w.bumpMap,v.bumpScale.value=w.bumpScale,w.side===1&&(v.bumpScale.value*=-1)),w.normalMap&&(v.normalMap.value=w.normalMap,v.normalScale.value.copy(w.normalScale),w.side===1&&v.normalScale.value.negate()),w.displacementMap&&(v.displacementMap.value=w.displacementMap,v.displacementScale.value=w.displacementScale,v.displacementBias.value=w.displacementBias);else if(w.isMeshPhongMaterial)t(v,w),v.specular.value.copy(w.specular),v.shininess.value=Math.max(w.shininess,1e-4),w.emissiveMap&&(v.emissiveMap.value=w.emissiveMap),w.bumpMap&&(v.bumpMap.value=w.bumpMap,v.bumpScale.value=w.bumpScale,w.side===1&&(v.bumpScale.value*=-1)),w.normalMap&&(v.normalMap.value=w.normalMap,v.normalScale.value.copy(w.normalScale),w.side===1&&v.normalScale.value.negate()),w.displacementMap&&(v.displacementMap.value=w.displacementMap,v.displacementScale.value=w.displacementScale,v.displacementBias.value=w.displacementBias);else if(w.isMeshStandardMaterial)t(v,w,T),w.isMeshPhysicalMaterial?(i(v,w,T),v.reflectivity.value=w.reflectivity,v.clearcoat.value=w.clearcoat,v.clearcoatRoughness.value=w.clearcoatRoughness,w.sheen&&v.sheen.value.copy(w.sheen),w.clearcoatMap&&(v.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),v.clearcoatNormalMap.value=w.clearcoatNormalMap,w.side===1&&v.clearcoatNormalScale.value.negate()),v.transparency.value=w.transparency):i(v,w,T);else if(w.isMeshMatcapMaterial)t(v,w),w.matcap&&(v.matcap.value=w.matcap),w.bumpMap&&(v.bumpMap.value=w.bumpMap,v.bumpScale.value=w.bumpScale,w.side===1&&(v.bumpScale.value*=-1)),w.normalMap&&(v.normalMap.value=w.normalMap,v.normalScale.value.copy(w.normalScale),w.side===1&&v.normalScale.value.negate()),w.displacementMap&&(v.displacementMap.value=w.displacementMap,v.displacementScale.value=w.displacementScale,v.displacementBias.value=w.displacementBias);else if(w.isMeshDepthMaterial)t(v,w),w.displacementMap&&(v.displacementMap.value=w.displacementMap,v.displacementScale.value=w.displacementScale,v.displacementBias.value=w.displacementBias);else if(w.isMeshDistanceMaterial)t(v,w),w.displacementMap&&(v.displacementMap.value=w.displacementMap,v.displacementScale.value=w.displacementScale,v.displacementBias.value=w.displacementBias),v.referencePosition.value.copy(w.referencePosition),v.nearDistance.value=w.nearDistance,v.farDistance.value=w.farDistance;else if(w.isMeshNormalMaterial)t(v,w),w.bumpMap&&(v.bumpMap.value=w.bumpMap,v.bumpScale.value=w.bumpScale,w.side===1&&(v.bumpScale.value*=-1)),w.normalMap&&(v.normalMap.value=w.normalMap,v.normalScale.value.copy(w.normalScale),w.side===1&&v.normalScale.value.negate()),w.displacementMap&&(v.displacementMap.value=w.displacementMap,v.displacementScale.value=w.displacementScale,v.displacementBias.value=w.displacementBias);else if(w.isLineBasicMaterial)v.diffuse.value.copy(w.color),v.opacity.value=w.opacity,w.isLineDashedMaterial&&(v.dashSize.value=w.dashSize,v.totalSize.value=w.dashSize+w.gapSize,v.scale.value=w.scale);else if(w.isPointsMaterial){if(v.diffuse.value.copy(w.color),v.opacity.value=w.opacity,v.size.value=w.size*b,v.scale.value=.5*D,w.map&&(v.map.value=w.map),w.alphaMap&&(v.alphaMap.value=w.alphaMap),w.map)var G=w.map;else w.alphaMap&&(G=w.alphaMap);G!==void 0&&(G.matrixAutoUpdate===!0&&G.updateMatrix(),v.uvTransform.value.copy(G.matrix))}else if(w.isSpriteMaterial){if(v.diffuse.value.copy(w.color),v.opacity.value=w.opacity,v.rotation.value=w.rotation,w.map&&(v.map.value=w.map),w.alphaMap&&(v.alphaMap.value=w.alphaMap),w.map)var Y=w.map;else w.alphaMap&&(Y=w.alphaMap);Y!==void 0&&(Y.matrixAutoUpdate===!0&&Y.updateMatrix(),v.uvTransform.value.copy(Y.matrix))}else w.isShadowMaterial?(v.color.value.copy(w.color),v.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}}}function uC(l){var t;function i(){Li=new bg(or),Pi=new Nm(or,Li,l),Pi.isWebGL2===!1&&(Li.get("WEBGL_depth_texture"),Li.get("OES_texture_float"),Li.get("OES_texture_half_float"),Li.get("OES_texture_half_float_linear"),Li.get("OES_standard_derivatives"),Li.get("OES_element_index_uint"),Li.get("ANGLE_instanced_arrays")),Li.get("OES_texture_float_linear"),Qm=new jw(or,Li,Pi),li=new uS(or,Li,Pi),li.scissor(ke.copy(xn).multiplyScalar(pn).floor()),li.viewport(za.copy(Dt).multiplyScalar(pn).floor()),Nc=new Op(or),Xl=new eS,Wp=new cS(or,Li,li,Xl,Pi,Qm,Nc),d1=new Kr(or,Pi),Cw=new Lg(or,d1,Nc),p1=new gA(or,Cw,d1,Nc),uM=new pA(or),g1=new $M(Ot,Li,Pi),ww=new hS(Xl),O2=new nS,m1=new lS,o0=new lc(Ot,li,p1,mt),cM=new Od(or,Li,Nc,Pi),hM=new xh(or,Li,Nc,Pi),Nc.programs=g1.programs,Ot.capabilities=Pi,Ot.extensions=Li,Ot.properties=Xl,Ot.renderLists=O2,Ot.state=li,Ot.info=Nc}function d(Ge){Ge.preventDefault(),Hr=!0}function v(){Hr=!1,i()}function w(Ge){Ge=Ge.target,Ge.removeEventListener("dispose",w),T(Ge),Xl.remove(Ge)}function T(Ge){var hr=Xl.get(Ge).program;Ge.program=void 0,hr!==void 0&&g1.releaseProgram(hr)}function b(Ge,hr){Ge.render(function(bt){Ot.renderBufferImmediate(bt,hr)})}function D(Ge,hr,bt,yr){if(Ge.visible!==!1){if(Ge.layers.test(hr.layers)){if(Ge.isGroup)bt=Ge.renderOrder;else if(Ge.isLOD)Ge.autoUpdate===!0&&Ge.update(hr);else if(Ge.isLight)Mr.pushLight(Ge),Ge.castShadow&&Mr.pushShadow(Ge);else if(Ge.isSprite){if(!Ge.frustumCulled||Fi.intersectsSprite(Ge)){yr&&Uo.setFromMatrixPosition(Ge.matrixWorld).applyMatrix4(Ua);var an=p1.update(Ge),fo=Ge.material;fo.visible&&wt.push(Ge,an,fo,bt,Uo.z,null)}}else if(Ge.isImmediateRenderObject)yr&&Uo.setFromMatrixPosition(Ge.matrixWorld).applyMatrix4(Ua),wt.push(Ge,null,Ge.material,bt,Uo.z,null);else if((Ge.isMesh||Ge.isLine||Ge.isPoints)&&(Ge.isSkinnedMesh&&Ge.skeleton.frame!==Nc.render.frame&&(Ge.skeleton.update(),Ge.skeleton.frame=Nc.render.frame),!Ge.frustumCulled||Fi.intersectsObject(Ge)))if(yr&&Uo.setFromMatrixPosition(Ge.matrixWorld).applyMatrix4(Ua),an=p1.update(Ge),fo=Ge.material,Array.isArray(fo))for(var yn=an.groups,pi=0,ao=yn.length;pi<ao;pi++){var ma=yn[pi],Zo=fo[ma.materialIndex];Zo&&Zo.visible&&wt.push(Ge,an,Zo,bt,Uo.z,ma)}else fo.visible&&wt.push(Ge,an,fo,bt,Uo.z,null)}for(Ge=Ge.children,pi=0,ao=Ge.length;pi<ao;pi++)D(Ge[pi],hr,bt,yr)}}function G(Ge,hr,bt,yr){for(var an=0,fo=Ge.length;an<fo;an++){var yn=Ge[an],pi=yn.object,ao=yn.geometry,ma=yr===void 0?yn.material:yr;if(yn=yn.group,bt.isArrayCamera){wa=bt;for(var Zo=bt.cameras,Hg=0,Ls=Zo.length;Hg<Ls;Hg++){var Yl=Zo[Hg];pi.layers.test(Yl.layers)&&(li.viewport(za.copy(Yl.viewport)),Mr.setupLights(Yl),Y(pi,hr,Yl,ao,ma,yn))}}else wa=null,Y(pi,hr,bt,ao,ma,yn)}}function Y(Ge,hr,bt,yr,an,fo){if(Ge.onBeforeRender(Ot,hr,bt,yr,an,fo),Mr=m1.get(hr,wa||bt),Ge.modelViewMatrix.multiplyMatrices(bt.matrixWorldInverse,Ge.matrixWorld),Ge.normalMatrix.getNormalMatrix(Ge.modelViewMatrix),Ge.isImmediateRenderObject){var yn=se(bt,hr,an,Ge);li.setMaterial(an),si=t=null,Do=!1,b(Ge,yn)}else Ot.renderBufferDirect(bt,hr,yr,an,Ge,fo);Ge.onAfterRender(Ot,hr,bt,yr,an,fo),Mr=m1.get(hr,wa||bt)}function re(Ge,hr,bt){var yr=Xl.get(Ge),an=Mr.state.lights,fo=an.state.version;bt=g1.getParameters(Ge,an.state,Mr.state.shadowsArray,hr,Fr.numPlanes,Fr.numIntersection,bt);var yn=g1.getProgramCacheKey(bt),pi=yr.program,ao=!0;if(pi===void 0)Ge.addEventListener("dispose",w);else if(pi.cacheKey!==yn)T(Ge);else{if(yr.lightsStateVersion!==fo)yr.lightsStateVersion=fo;else if(bt.shaderID!==void 0)return;ao=!1}if(ao&&(pi=g1.acquireProgram(bt,yn),yr.program=pi,yr.uniforms=bt.uniforms,yr.outputEncoding=bt.outputEncoding,Ge.program=pi),bt=pi.getAttributes(),Ge.morphTargets)for(yn=Ge.numSupportedMorphTargets=0;yn<Ot.maxMorphTargets;yn++)0<=bt["morphTarget"+yn]&&Ge.numSupportedMorphTargets++;if(Ge.morphNormals)for(yn=Ge.numSupportedMorphNormals=0;yn<Ot.maxMorphNormals;yn++)0<=bt["morphNormal"+yn]&&Ge.numSupportedMorphNormals++;bt=yr.uniforms,(!Ge.isShaderMaterial&&!Ge.isRawShaderMaterial||Ge.clipping===!0)&&(yr.numClippingPlanes=Fr.numPlanes,yr.numIntersection=Fr.numIntersection,bt.clippingPlanes=Fr.uniform),yr.environment=Ge.isMeshStandardMaterial?hr.environment:null,yr.fog=hr.fog,yr.needsLights=Ge.isMeshLambertMaterial||Ge.isMeshToonMaterial||Ge.isMeshPhongMaterial||Ge.isMeshStandardMaterial||Ge.isShadowMaterial||Ge.isShaderMaterial&&Ge.lights===!0,yr.lightsStateVersion=fo,yr.needsLights&&(bt.ambientLightColor.value=an.state.ambient,bt.lightProbe.value=an.state.probe,bt.directionalLights.value=an.state.directional,bt.directionalLightShadows.value=an.state.directionalShadow,bt.spotLights.value=an.state.spot,bt.spotLightShadows.value=an.state.spotShadow,bt.rectAreaLights.value=an.state.rectArea,bt.pointLights.value=an.state.point,bt.pointLightShadows.value=an.state.pointShadow,bt.hemisphereLights.value=an.state.hemi,bt.directionalShadowMap.value=an.state.directionalShadowMap,bt.directionalShadowMatrix.value=an.state.directionalShadowMatrix,bt.spotShadowMap.value=an.state.spotShadowMap,bt.spotShadowMatrix.value=an.state.spotShadowMatrix,bt.pointShadowMap.value=an.state.pointShadowMap,bt.pointShadowMatrix.value=an.state.pointShadowMatrix),Ge=yr.program.getUniforms(),Ge=jv.seqWithValue(Ge.seq,bt),yr.uniformsList=Ge}function se(Ge,hr,bt,yr){Wp.resetTextureUnits();var an=hr.fog,fo=bt.isMeshStandardMaterial?hr.environment:null,yn=sn===null?Ot.outputEncoding:sn.texture.encoding,pi=Xl.get(bt),ao=Mr.state.lights;ln&&(zi||Ge!==oo)&&Fr.setState(bt.clippingPlanes,bt.clipIntersection,bt.clipShadows,Ge,pi,Ge===oo&&bt.id===to),bt.version===pi.__version?pi.program===void 0||bt.fog&&pi.fog!==an||pi.environment!==fo||pi.needsLights&&pi.lightsStateVersion!==ao.state.version?re(bt,hr,yr):pi.numClippingPlanes===void 0||pi.numClippingPlanes===Fr.numPlanes&&pi.numIntersection===Fr.numIntersection?pi.outputEncoding!==yn&&re(bt,hr,yr):re(bt,hr,yr):(re(bt,hr,yr),pi.__version=bt.version);var ma=!1,Zo=!1,Hg=!1;if(hr=pi.program,yn=hr.getUniforms(),ao=pi.uniforms,li.useProgram(hr.program)&&(Hg=Zo=ma=!0),bt.id!==to&&(to=bt.id,Zo=!0),(ma||oo!==Ge)&&(yn.setValue(or,"projectionMatrix",Ge.projectionMatrix),Pi.logarithmicDepthBuffer&&yn.setValue(or,"logDepthBufFC",2/(Math.log(Ge.far+1)/Math.LN2)),oo!==Ge&&(oo=Ge,Hg=Zo=!0),(bt.isShaderMaterial||bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshStandardMaterial||bt.envMap)&&(ma=yn.map.cameraPosition,ma!==void 0&&ma.setValue(or,Uo.setFromMatrixPosition(Ge.matrixWorld))),(bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshLambertMaterial||bt.isMeshBasicMaterial||bt.isMeshStandardMaterial||bt.isShaderMaterial)&&yn.setValue(or,"isOrthographic",Ge.isOrthographicCamera===!0),(bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshLambertMaterial||bt.isMeshBasicMaterial||bt.isMeshStandardMaterial||bt.isShaderMaterial||bt.skinning)&&yn.setValue(or,"viewMatrix",Ge.matrixWorldInverse)),bt.skinning&&(yn.setOptional(or,yr,"bindMatrix"),yn.setOptional(or,yr,"bindMatrixInverse"),Ge=yr.skeleton))if(ma=Ge.bones,Pi.floatVertexTextures){if(Ge.boneTexture===void 0){ma=Math.sqrt(4*ma.length),ma=ho.ceilPowerOfTwo(ma),ma=Math.max(ma,4);var Ls=new Float32Array(ma*ma*4);Ls.set(Ge.boneMatrices);var Yl=new nr(Ls,ma,ma,1023,1015);Ge.boneMatrices=Ls,Ge.boneTexture=Yl,Ge.boneTextureSize=ma}yn.setValue(or,"boneTexture",Ge.boneTexture,Wp),yn.setValue(or,"boneTextureSize",Ge.boneTextureSize)}else yn.setOptional(or,Ge,"boneMatrices");return(Zo||pi.receiveShadow!==yr.receiveShadow)&&(pi.receiveShadow=yr.receiveShadow,yn.setValue(or,"receiveShadow",yr.receiveShadow)),Zo&&(yn.setValue(or,"toneMappingExposure",Ot.toneMappingExposure),yn.setValue(or,"toneMappingWhitePoint",Ot.toneMappingWhitePoint),pi.needsLights&&(Zo=Hg,ao.ambientLightColor.needsUpdate=Zo,ao.lightProbe.needsUpdate=Zo,ao.directionalLights.needsUpdate=Zo,ao.directionalLightShadows.needsUpdate=Zo,ao.pointLights.needsUpdate=Zo,ao.pointLightShadows.needsUpdate=Zo,ao.spotLights.needsUpdate=Zo,ao.spotLightShadows.needsUpdate=Zo,ao.rectAreaLights.needsUpdate=Zo,ao.hemisphereLights.needsUpdate=Zo),an&&bt.fog&&ww.refreshFogUniforms(ao,an),ww.refreshMaterialUniforms(ao,bt,fo,pn,Vr),ao.ltc_1!==void 0&&(ao.ltc_1.value=vn.LTC_1),ao.ltc_2!==void 0&&(ao.ltc_2.value=vn.LTC_2),jv.upload(or,pi.uniformsList,ao,Wp)),bt.isShaderMaterial&&bt.uniformsNeedUpdate===!0&&(jv.upload(or,pi.uniformsList,ao,Wp),bt.uniformsNeedUpdate=!1),bt.isSpriteMaterial&&yn.setValue(or,"center",yr.center),yn.setValue(or,"modelViewMatrix",yr.modelViewMatrix),yn.setValue(or,"normalMatrix",yr.normalMatrix),yn.setValue(or,"modelMatrix",yr.matrixWorld),hr}l=l||{};var ae=l.canvas!==void 0?l.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),fe=l.context!==void 0?l.context:null,ve=l.alpha!==void 0?l.alpha:!1,Ze=l.depth!==void 0?l.depth:!0,ht=l.stencil!==void 0?l.stencil:!0,ct=l.antialias!==void 0?l.antialias:!1,mt=l.premultipliedAlpha!==void 0?l.premultipliedAlpha:!0,Mt=l.preserveDrawingBuffer!==void 0?l.preserveDrawingBuffer:!1,$t=l.powerPreference!==void 0?l.powerPreference:"default",Bt=l.failIfMajorPerformanceCaveat!==void 0?l.failIfMajorPerformanceCaveat:!1,wt=null,Mr=null;this.domElement=ae,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingWhitePoint=this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Ot=this,Hr=!1,rn=null,Sr=0,$n=0,sn=null,Wn=null,to=-1,si=t=null,Do=!1,oo=null,wa=null,za=new C,ke=new C,tt=null,Qt=ae.width,Vr=ae.height,pn=1,mr=null,Zt=null,Dt=new C(0,0,Qt,Vr),xn=new C(0,0,Qt,Vr),An=!1,Fi=new Ln,Fr=new Wh,ln=!1,zi=!1,Ua=new Z,Uo=new z;try{ve={alpha:ve,depth:Ze,stencil:ht,antialias:ct,premultipliedAlpha:mt,preserveDrawingBuffer:Mt,powerPreference:$t,failIfMajorPerformanceCaveat:Bt},ae.addEventListener("webglcontextlost",d,!1),ae.addEventListener("webglcontextrestored",v,!1);var or=fe||ae.getContext("webgl",ve)||ae.getContext("experimental-webgl",ve);if(or===null)throw ae.getContext("webgl")!==null?Error("Error creating WebGL context with your selected attributes."):Error("Error creating WebGL context.");or.getShaderPrecisionFormat===void 0&&(or.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ge){throw console.error("THREE.WebGLRenderer: "+Ge.message),Ge}var Li,Pi,li,Nc,Xl,Wp,d1,Cw,p1,g1,ww,O2,m1,o0,uM,cM,hM,Qm;i();var a0=new Vw(Ot,or);this.xr=a0;var fM=new Gw(Ot,p1,Pi.maxTextureSize);this.shadowMap=fM,this.getContext=function(){return or},this.getContextAttributes=function(){return or.getContextAttributes()},this.forceContextLoss=function(){var Ge=Li.get("WEBGL_lose_context");Ge&&Ge.loseContext()},this.forceContextRestore=function(){var Ge=Li.get("WEBGL_lose_context");Ge&&Ge.restoreContext()},this.getPixelRatio=function(){return pn},this.setPixelRatio=function(Ge){Ge!==void 0&&(pn=Ge,this.setSize(Qt,Vr,!1))},this.getSize=function(Ge){return Ge===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),Ge=new u),Ge.set(Qt,Vr)},this.setSize=function(Ge,hr,bt){a0.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Qt=Ge,Vr=hr,ae.width=Math.floor(Ge*pn),ae.height=Math.floor(hr*pn),bt!==!1&&(ae.style.width=Ge+"px",ae.style.height=hr+"px"),this.setViewport(0,0,Ge,hr))},this.getDrawingBufferSize=function(Ge){return Ge===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),Ge=new u),Ge.set(Qt*pn,Vr*pn).floor()},this.setDrawingBufferSize=function(Ge,hr,bt){Qt=Ge,Vr=hr,pn=bt,ae.width=Math.floor(Ge*bt),ae.height=Math.floor(hr*bt),this.setViewport(0,0,Ge,hr)},this.getCurrentViewport=function(Ge){return Ge===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),Ge=new C),Ge.copy(za)},this.getViewport=function(Ge){return Ge.copy(Dt)},this.setViewport=function(Ge,hr,bt,yr){Ge.isVector4?Dt.set(Ge.x,Ge.y,Ge.z,Ge.w):Dt.set(Ge,hr,bt,yr),li.viewport(za.copy(Dt).multiplyScalar(pn).floor())},this.getScissor=function(Ge){return Ge.copy(xn)},this.setScissor=function(Ge,hr,bt,yr){Ge.isVector4?xn.set(Ge.x,Ge.y,Ge.z,Ge.w):xn.set(Ge,hr,bt,yr),li.scissor(ke.copy(xn).multiplyScalar(pn).floor())},this.getScissorTest=function(){return An},this.setScissorTest=function(Ge){li.setScissorTest(An=Ge)},this.setOpaqueSort=function(Ge){mr=Ge},this.setTransparentSort=function(Ge){Zt=Ge},this.getClearColor=function(){return o0.getClearColor()},this.setClearColor=function(){o0.setClearColor.apply(o0,arguments)},this.getClearAlpha=function(){return o0.getClearAlpha()},this.setClearAlpha=function(){o0.setClearAlpha.apply(o0,arguments)},this.clear=function(Ge,hr,bt){var yr=0;(Ge===void 0||Ge)&&(yr|=16384),(hr===void 0||hr)&&(yr|=256),(bt===void 0||bt)&&(yr|=1024),or.clear(yr)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){ae.removeEventListener("webglcontextlost",d,!1),ae.removeEventListener("webglcontextrestored",v,!1),O2.dispose(),m1.dispose(),Xl.dispose(),p1.dispose(),a0.dispose(),D2.stop()},this.renderBufferImmediate=function(Ge,hr){li.initAttributes();var bt=Xl.get(Ge);Ge.hasPositions&&!bt.position&&(bt.position=or.createBuffer()),Ge.hasNormals&&!bt.normal&&(bt.normal=or.createBuffer()),Ge.hasUvs&&!bt.uv&&(bt.uv=or.createBuffer()),Ge.hasColors&&!bt.color&&(bt.color=or.createBuffer()),hr=hr.getAttributes(),Ge.hasPositions&&(or.bindBuffer(34962,bt.position),or.bufferData(34962,Ge.positionArray,35048),li.enableAttribute(hr.position),or.vertexAttribPointer(hr.position,3,5126,!1,0,0)),Ge.hasNormals&&(or.bindBuffer(34962,bt.normal),or.bufferData(34962,Ge.normalArray,35048),li.enableAttribute(hr.normal),or.vertexAttribPointer(hr.normal,3,5126,!1,0,0)),Ge.hasUvs&&(or.bindBuffer(34962,bt.uv),or.bufferData(34962,Ge.uvArray,35048),li.enableAttribute(hr.uv),or.vertexAttribPointer(hr.uv,2,5126,!1,0,0)),Ge.hasColors&&(or.bindBuffer(34962,bt.color),or.bufferData(34962,Ge.colorArray,35048),li.enableAttribute(hr.color),or.vertexAttribPointer(hr.color,3,5126,!1,0,0)),li.disableUnusedAttributes(),or.drawArrays(4,0,Ge.count),Ge.count=0};var QS=new be;this.renderBufferDirect=function(Ge,hr,bt,yr,an,fo){hr===null&&(hr=QS);var yn=an.isMesh&&0>an.matrixWorld.determinant(),pi=se(Ge,hr,yr,an);li.setMaterial(yr,yn);var ao=!1;if((t!==bt.id||si!==pi.id||Do!==(yr.wireframe===!0))&&(t=bt.id,si=pi.id,Do=yr.wireframe===!0,ao=!0),(yr.morphTargets||yr.morphNormals)&&(uM.update(an,bt,yr,pi),ao=!0),an.isInstancedMesh===!0&&(ao=!0),Ge=bt.index,hr=bt.attributes.position,Ge===null){if(hr===void 0||hr.count===0)return}else if(Ge.count===0)return;var ma=1;if(yr.wireframe===!0&&(Ge=Cw.getWireframeAttribute(bt),ma=2),yn=cM,Ge!==null){var Zo=d1.get(Ge);yn=hM,yn.setIndex(Zo)}if(ao){if(Pi.isWebGL2!==!1||!an.isInstancedMesh&&!bt.isInstancedBufferGeometry||Li.get("ANGLE_instanced_arrays")!==null){li.initAttributes(),ao=bt.attributes,pi=pi.getAttributes();var Hg=yr.defaultAttributeValues;for(ey in pi){var Ls=pi[ey];if(0<=Ls){var Yl=ao[ey];if(Yl!==void 0){var $m=Yl.normalized,dM=Yl.itemSize,Xp=d1.get(Yl);if(Xp!==void 0){var F2=Xp.buffer,$0=Xp.type;if(Xp=Xp.bytesPerElement,Yl.isInterleavedBufferAttribute){var v1=Yl.data,$S=v1.stride;Yl=Yl.offset,v1&&v1.isInstancedInterleavedBuffer?(li.enableAttributeAndDivisor(Ls,v1.meshPerAttribute),bt._maxInstanceCount===void 0&&(bt._maxInstanceCount=v1.meshPerAttribute*v1.count)):li.enableAttribute(Ls),or.bindBuffer(34962,F2),li.vertexAttribPointer(Ls,dM,$0,$m,$S*Xp,Yl*Xp)}else Yl.isInstancedBufferAttribute?(li.enableAttributeAndDivisor(Ls,Yl.meshPerAttribute),bt._maxInstanceCount===void 0&&(bt._maxInstanceCount=Yl.meshPerAttribute*Yl.count)):li.enableAttribute(Ls),or.bindBuffer(34962,F2),li.vertexAttribPointer(Ls,dM,$0,$m,0,0)}}else if(ey==="instanceMatrix")Xp=d1.get(an.instanceMatrix),Xp!==void 0&&(F2=Xp.buffer,$0=Xp.type,li.enableAttributeAndDivisor(Ls+0,1),li.enableAttributeAndDivisor(Ls+1,1),li.enableAttributeAndDivisor(Ls+2,1),li.enableAttributeAndDivisor(Ls+3,1),or.bindBuffer(34962,F2),or.vertexAttribPointer(Ls+0,4,$0,!1,64,0),or.vertexAttribPointer(Ls+1,4,$0,!1,64,16),or.vertexAttribPointer(Ls+2,4,$0,!1,64,32),or.vertexAttribPointer(Ls+3,4,$0,!1,64,48));else if(Hg!==void 0&&($m=Hg[ey],$m!==void 0))switch($m.length){case 2:or.vertexAttrib2fv(Ls,$m);break;case 3:or.vertexAttrib3fv(Ls,$m);break;case 4:or.vertexAttrib4fv(Ls,$m);break;default:or.vertexAttrib1fv(Ls,$m)}}}li.disableUnusedAttributes()}Ge!==null&&or.bindBuffer(34963,Zo.buffer)}var ey=bt.drawRange.start*ma;ao=fo!==null?fo.start*ma:0,Zo=Math.max(ey,ao),fo=Math.max(0,Math.min(Ge!==null?Ge.count:hr.count,ey+bt.drawRange.count*ma,ao+(fo!==null?fo.count*ma:Infinity))-1-Zo+1),fo!==0&&(an.isMesh?yr.wireframe===!0?(li.setLineWidth(yr.wireframeLinewidth*(sn===null?pn:1)),yn.setMode(1)):yn.setMode(4):an.isLine?(yr=yr.linewidth,yr===void 0&&(yr=1),li.setLineWidth(yr*(sn===null?pn:1)),an.isLineSegments?yn.setMode(1):an.isLineLoop?yn.setMode(2):yn.setMode(3)):an.isPoints?yn.setMode(0):an.isSprite&&yn.setMode(4),an.isInstancedMesh?yn.renderInstances(bt,Zo,fo,an.count):bt.isInstancedBufferGeometry?yn.renderInstances(bt,Zo,fo,Math.min(bt.instanceCount,bt._maxInstanceCount)):yn.render(Zo,fo))},this.compile=function(Ge,hr){Mr=m1.get(Ge,hr),Mr.init(),Ge.traverse(function(yr){yr.isLight&&(Mr.pushLight(yr),yr.castShadow&&Mr.pushShadow(yr))}),Mr.setupLights(hr);var bt={};Ge.traverse(function(yr){var an=yr.material;if(an)if(Array.isArray(an))for(var fo=0;fo<an.length;fo++){var yn=an[fo];!(yn.uuid in bt)&&(re(yn,Ge,yr),bt[yn.uuid]=!0)}else!(an.uuid in bt)&&(re(an,Ge,yr),bt[an.uuid]=!0)})};var _w=null,D2=new Sn;D2.setAnimationLoop(function(Ge){a0.isPresenting||_w&&_w(Ge)}),typeof window!="undefined"&&D2.setContext(window),this.setAnimationLoop=function(Ge){_w=Ge,a0.setAnimationLoop(Ge),D2.start()},this.render=function(Ge,hr,bt,yr){if(bt!==void 0){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var an=bt}if(yr!==void 0){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var fo=yr}hr&&hr.isCamera?Hr||(si=t=null,Do=!1,to=-1,oo=null,Ge.autoUpdate===!0&&Ge.updateMatrixWorld(),hr.parent===null&&hr.updateMatrixWorld(),a0.enabled&&a0.isPresenting&&(hr=a0.getCamera(hr)),Ge.onBeforeRender(Ot,Ge,hr,an||sn),Mr=m1.get(Ge,hr),Mr.init(),Ua.multiplyMatrices(hr.projectionMatrix,hr.matrixWorldInverse),Fi.setFromProjectionMatrix(Ua),zi=this.localClippingEnabled,ln=Fr.init(this.clippingPlanes,zi,hr),wt=O2.get(Ge,hr),wt.init(),D(Ge,hr,0,Ot.sortObjects),wt.finish(),Ot.sortObjects===!0&&wt.sort(mr,Zt),ln&&Fr.beginShadows(),fM.render(Mr.state.shadowsArray,Ge,hr),Mr.setupLights(hr),ln&&Fr.endShadows(),this.info.autoReset&&this.info.reset(),an!==void 0&&this.setRenderTarget(an),o0.render(wt,Ge,hr,fo),bt=wt.opaque,yr=wt.transparent,Ge.overrideMaterial?(an=Ge.overrideMaterial,bt.length&&G(bt,Ge,hr,an),yr.length&&G(yr,Ge,hr,an)):(bt.length&&G(bt,Ge,hr),yr.length&&G(yr,Ge,hr)),Ge.onAfterRender(Ot,Ge,hr),sn!==null&&(Wp.updateRenderTargetMipmap(sn),Wp.updateMultisampleRenderTarget(sn)),li.buffers.depth.setTest(!0),li.buffers.depth.setMask(!0),li.buffers.color.setMask(!0),li.setPolygonOffset(!1),Mr=wt=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(Ge){rn!==Ge&&sn===null&&or.bindFramebuffer(36160,Ge),rn=Ge},this.getActiveCubeFace=function(){return Sr},this.getActiveMipmapLevel=function(){return $n},this.getRenderTarget=function(){return sn},this.setRenderTarget=function(Ge,hr,bt){sn=Ge,Sr=hr,$n=bt,Ge&&Xl.get(Ge).__webglFramebuffer===void 0&&Wp.setupRenderTarget(Ge);var yr=rn,an=!1;Ge?(yr=Xl.get(Ge).__webglFramebuffer,Ge.isWebGLCubeRenderTarget?(yr=yr[hr||0],an=!0):yr=Ge.isWebGLMultisampleRenderTarget?Xl.get(Ge).__webglMultisampledFramebuffer:yr,za.copy(Ge.viewport),ke.copy(Ge.scissor),tt=Ge.scissorTest):(za.copy(Dt).multiplyScalar(pn).floor(),ke.copy(xn).multiplyScalar(pn).floor(),tt=An),Wn!==yr&&(or.bindFramebuffer(36160,yr),Wn=yr),li.viewport(za),li.scissor(ke),li.setScissorTest(tt),an&&(Ge=Xl.get(Ge.texture),or.framebufferTexture2D(36160,36064,34069+(hr||0),Ge.__webglTexture,bt||0))},this.readRenderTargetPixels=function(Ge,hr,bt,yr,an,fo,yn){if(Ge&&Ge.isWebGLRenderTarget){var pi=Xl.get(Ge).__webglFramebuffer;if(Ge.isWebGLCubeRenderTarget&&yn!==void 0&&(pi=pi[yn]),pi){yn=!1,pi!==Wn&&(or.bindFramebuffer(36160,pi),yn=!0);try{var ao=Ge.texture,ma=ao.format,Zo=ao.type;ma!==1023&&Qm.convert(ma)!==or.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):Zo===1009||Qm.convert(Zo)===or.getParameter(35738)||Zo===1015&&(Pi.isWebGL2||Li.get("OES_texture_float")||Li.get("WEBGL_color_buffer_float"))||Zo===1016&&(Pi.isWebGL2?Li.get("EXT_color_buffer_float"):Li.get("EXT_color_buffer_half_float"))?or.checkFramebufferStatus(36160)===36053?0<=hr&&hr<=Ge.width-yr&&0<=bt&&bt<=Ge.height-an&&or.readPixels(hr,bt,yr,an,Qm.convert(ma),Qm.convert(Zo),fo):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{yn&&or.bindFramebuffer(36160,Wn)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(Ge,hr,bt){bt===void 0&&(bt=0);var yr=Math.pow(2,-bt),an=Math.floor(hr.image.width*yr);yr=Math.floor(hr.image.height*yr);var fo=Qm.convert(hr.format);Wp.setTexture2D(hr,0),or.copyTexImage2D(3553,bt,fo,Ge.x,Ge.y,an,yr,0),li.unbindTexture()},this.copyTextureToTexture=function(Ge,hr,bt,yr){yr===void 0&&(yr=0);var an=hr.image.width,fo=hr.image.height,yn=Qm.convert(bt.format),pi=Qm.convert(bt.type);Wp.setTexture2D(bt,0),hr.isDataTexture?or.texSubImage2D(3553,yr,Ge.x,Ge.y,an,fo,yn,pi,hr.image.data):hr.isCompressedTexture?or.compressedTexSubImage2D(3553,yr,Ge.x,Ge.y,hr.mipmaps[0].width,hr.mipmaps[0].height,yn,hr.mipmaps[0].data):or.texSubImage2D(3553,yr,Ge.x,Ge.y,yn,pi,hr.image),yr===0&&bt.generateMipmaps&&or.generateMipmap(3553),li.unbindTexture()},this.initTexture=function(Ge){Wp.setTexture2D(Ge,0),li.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function xA(l,t){this.name="",this.color=new We(l),this.density=t!==void 0?t:25e-5}function AA(l,t,i){this.name="",this.color=new We(l),this.near=t!==void 0?t:1,this.far=i!==void 0?i:1e3}function km(l,t){this.array=l,this.stride=t,this.count=l!==void 0?l.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function V1(l,t,i,d){this.name="",this.data=l,this.itemSize=t,this.offset=i,this.normalized=d===!0}function Xv(l){Tt.call(this),this.type="SpriteMaterial",this.color=new We(16777215),this.alphaMap=this.map=null,this.rotation=0,this.transparent=this.sizeAttenuation=!0,this.setValues(l)}function W1(l){if(oe.call(this),this.type="Sprite",l1===void 0){l1=new Fe;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);t=new km(t,5),l1.setIndex([0,1,2,0,2,3]),l1.setAttribute("position",new V1(t,3,0,!1)),l1.setAttribute("uv",new V1(t,2,3,!1))}this.geometry=l1,this.material=l!==void 0?l:new Xv,this.center=new u(.5,.5)}function CA(l,t,i,d,v,w){h1.subVectors(l,i).addScalar(.5).multiply(d),v!==void 0?(Rx.x=w*h1.x-v*h1.y,Rx.y=v*h1.x+w*h1.y):Rx.copy(h1),l.copy(t),l.x+=Rx.x,l.y+=Rx.y,l.applyMatrix4(O_)}function X1(){oe.call(this),this._currentLevel=0,this.type="LOD",Zr(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function wA(l,t){l&&l.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Ve.call(this,l,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Z,this.bindMatrixInverse=new Z}function _A(l,t){if(l=l||[],this.bones=l.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],l=0,t=this.bones.length;l<t;l++)this.boneInverses.push(new Z)}function cC(){oe.call(this),this.type="Bone"}function MA(l,t,i){Ve.call(this,l,t),this.instanceMatrix=new tr(new Float32Array(16*i),16),this.count=i,this.frustumCulled=!1}function Fs(l){Tt.call(this),this.type="LineBasicMaterial",this.color=new We(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.morphTargets=!1,this.setValues(l)}function jf(l,t,i){i===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),oe.call(this),this.type="Line",this.geometry=l!==void 0?l:new Fe,this.material=t!==void 0?t:new Fs,this.updateMorphTargets()}function Js(l,t){jf.call(this,l,t),this.type="LineSegments"}function SA(l,t){jf.call(this,l,t),this.type="LineLoop"}function Fp(l){Tt.call(this),this.type="PointsMaterial",this.color=new We(16777215),this.alphaMap=this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(l)}function My(l,t){oe.call(this),this.type="Points",this.geometry=l!==void 0?l:new Fe,this.material=t!==void 0?t:new Fp,this.updateMorphTargets()}function hC(l,t,i,d,v,w,T){var b=lw.distanceSqToPoint(l);b<i&&(i=new z,lw.closestPointToPoint(l,i),i.applyMatrix4(d),l=v.ray.origin.distanceTo(i),l<v.near||l>v.far||w.push({distance:l,distanceToRay:Math.sqrt(b),point:i,index:t,face:null,object:T}))}function fC(l,t,i,d,v,w,T,b,D){y.call(this,l,t,i,d,v,w,T,b,D),this.format=T!==void 0?T:1022,this.minFilter=w!==void 0?w:1006,this.magFilter=v!==void 0?v:1006,this.generateMipmaps=!1}function Sy(l,t,i,d,v,w,T,b,D,G,Y,re){y.call(this,null,w,T,b,D,G,d,v,Y,re),this.image={width:t,height:i},this.mipmaps=l,this.generateMipmaps=this.flipY=!1}function Y1(l,t,i,d,v,w,T,b,D){y.call(this,l,t,i,d,v,w,T,b,D),this.needsUpdate=!0}function Z1(l,t,i,d,v,w,T,b,D,G){if(G=G!==void 0?G:1026,G!==1026&&G!==1027)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&G===1026&&(i=1012),i===void 0&&G===1027&&(i=1020),y.call(this,null,d,v,w,T,b,G,i,D),this.image={width:l,height:t},this.magFilter=T!==void 0?T:1003,this.minFilter=b!==void 0?b:1003,this.generateMipmaps=this.flipY=!1}function Ty(l){Fe.call(this),this.type="WireframeGeometry";var t=[],i,d,v,w=[0,0],T={},b=["a","b","c"];if(l&&l.isGeometry){var D=l.faces,G=0;for(d=D.length;G<d;G++){var Y=D[G];for(i=0;3>i;i++){var re=Y[b[i]],se=Y[b[(i+1)%3]];w[0]=Math.min(re,se),w[1]=Math.max(re,se),re=w[0]+","+w[1],T[re]===void 0&&(T[re]={index1:w[0],index2:w[1]})}}for(re in T)G=T[re],b=l.vertices[G.index1],t.push(b.x,b.y,b.z),b=l.vertices[G.index2],t.push(b.x,b.y,b.z)}else if(l&&l.isBufferGeometry)if(b=new z,l.index!==null){D=l.attributes.position,Y=l.index;var ae=l.groups;for(ae.length===0&&(ae=[{start:0,count:Y.count,materialIndex:0}]),l=0,v=ae.length;l<v;++l)for(G=ae[l],i=G.start,d=G.count,G=i,d=i+d;G<d;G+=3)for(i=0;3>i;i++)re=Y.getX(G+i),se=Y.getX(G+(i+1)%3),w[0]=Math.min(re,se),w[1]=Math.max(re,se),re=w[0]+","+w[1],T[re]===void 0&&(T[re]={index1:w[0],index2:w[1]});for(re in T)G=T[re],b.fromBufferAttribute(D,G.index1),t.push(b.x,b.y,b.z),b.fromBufferAttribute(D,G.index2),t.push(b.x,b.y,b.z)}else for(D=l.attributes.position,G=0,d=D.count/3;G<d;G++)for(i=0;3>i;i++)T=3*G+i,b.fromBufferAttribute(D,T),t.push(b.x,b.y,b.z),T=3*G+(i+1)%3,b.fromBufferAttribute(D,T),t.push(b.x,b.y,b.z);this.setAttribute("position",new Me(t,3))}function K1(l,t,i){Xe.call(this),this.type="ParametricGeometry",this.parameters={func:l,slices:t,stacks:i},this.fromBufferGeometry(new Iy(l,t,i)),this.mergeVertices()}function Iy(l,t,i){Fe.call(this),this.type="ParametricBufferGeometry",this.parameters={func:l,slices:t,stacks:i};var d=[],v=[],w=[],T=[],b=new z,D=new z,G=new z,Y=new z,re=new z,se,ae;3>l.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var fe=t+1;for(se=0;se<=i;se++){var ve=se/i;for(ae=0;ae<=t;ae++){var Ze=ae/t;l(Ze,ve,D),v.push(D.x,D.y,D.z),0<=Ze-1e-5?(l(Ze-1e-5,ve,G),Y.subVectors(D,G)):(l(Ze+1e-5,ve,G),Y.subVectors(G,D)),0<=ve-1e-5?(l(Ze,ve-1e-5,G),re.subVectors(D,G)):(l(Ze,ve+1e-5,G),re.subVectors(G,D)),b.crossVectors(Y,re).normalize(),w.push(b.x,b.y,b.z),T.push(Ze,ve)}}for(se=0;se<i;se++)for(ae=0;ae<t;ae++)l=se*fe+ae+1,b=(se+1)*fe+ae+1,D=(se+1)*fe+ae,d.push(se*fe+ae,l,D),d.push(l,b,D);this.setIndex(d),this.setAttribute("position",new Me(v,3)),this.setAttribute("normal",new Me(w,3)),this.setAttribute("uv",new Me(T,2))}function J1(l,t,i,d){Xe.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:l,indices:t,radius:i,detail:d},this.fromBufferGeometry(new Yh(l,t,i,d)),this.mergeVertices()}function Yh(l,t,i,d){function v(G){b.push(G.x,G.y,G.z)}function w(G,Y){G*=3,Y.x=l[G+0],Y.y=l[G+1],Y.z=l[G+2]}function T(G,Y,re,se){0>se&&G.x===1&&(D[Y]=G.x-1),re.x===0&&re.z===0&&(D[Y]=se/2/Math.PI+.5)}Fe.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:l,indices:t,radius:i,detail:d},i=i||1,d=d||0;var b=[],D=[];(function(G){for(var Y=new z,re=new z,se=new z,ae=0;ae<t.length;ae+=3){w(t[ae+0],Y),w(t[ae+1],re),w(t[ae+2],se);var fe,ve,Ze=Y,ht=re,ct=se,mt=Math.pow(2,G),Mt=[];for(ve=0;ve<=mt;ve++){Mt[ve]=[];var $t=Ze.clone().lerp(ct,ve/mt),Bt=ht.clone().lerp(ct,ve/mt),wt=mt-ve;for(fe=0;fe<=wt;fe++)Mt[ve][fe]=fe===0&&ve===mt?$t:$t.clone().lerp(Bt,fe/wt)}for(ve=0;ve<mt;ve++)for(fe=0;fe<2*(mt-ve)-1;fe++)Ze=Math.floor(fe/2),fe%2==0?(v(Mt[ve][Ze+1]),v(Mt[ve+1][Ze]),v(Mt[ve][Ze])):(v(Mt[ve][Ze+1]),v(Mt[ve+1][Ze+1]),v(Mt[ve+1][Ze]))}})(d),function(G){for(var Y=new z,re=0;re<b.length;re+=3)Y.x=b[re+0],Y.y=b[re+1],Y.z=b[re+2],Y.normalize().multiplyScalar(G),b[re+0]=Y.x,b[re+1]=Y.y,b[re+2]=Y.z}(i),function(){for(var G=new z,Y=0;Y<b.length;Y+=3)G.x=b[Y+0],G.y=b[Y+1],G.z=b[Y+2],D.push(Math.atan2(G.z,-G.x)/2/Math.PI+.5,1-(Math.atan2(-G.y,Math.sqrt(G.x*G.x+G.z*G.z))/Math.PI+.5));G=new z,Y=new z;for(var re=new z,se=new z,ae=new u,fe=new u,ve=new u,Ze=0,ht=0;Ze<b.length;Ze+=9,ht+=6){G.set(b[Ze+0],b[Ze+1],b[Ze+2]),Y.set(b[Ze+3],b[Ze+4],b[Ze+5]),re.set(b[Ze+6],b[Ze+7],b[Ze+8]),ae.set(D[ht+0],D[ht+1]),fe.set(D[ht+2],D[ht+3]),ve.set(D[ht+4],D[ht+5]),se.copy(G).add(Y).add(re).divideScalar(3);var ct=Math.atan2(se.z,-se.x);T(ae,ht+0,G,ct),T(fe,ht+2,Y,ct),T(ve,ht+4,re,ct)}for(G=0;G<D.length;G+=6)Y=D[G+0],re=D[G+2],se=D[G+4],ae=Math.min(Y,re,se),.9<Math.max(Y,re,se)&&.1>ae&&(.2>Y&&(D[G+0]+=1),.2>re&&(D[G+2]+=1),.2>se&&(D[G+4]+=1))}(),this.setAttribute("position",new Me(b,3)),this.setAttribute("normal",new Me(b.slice(),3)),this.setAttribute("uv",new Me(D,2)),d===0?this.computeVertexNormals():this.normalizeNormals()}function q1(l,t){Xe.call(this),this.type="TetrahedronGeometry",this.parameters={radius:l,detail:t},this.fromBufferGeometry(new Ey(l,t)),this.mergeVertices()}function Ey(l,t){Yh.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],l,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:l,detail:t}}function Q1(l,t){Xe.call(this),this.type="OctahedronGeometry",this.parameters={radius:l,detail:t},this.fromBufferGeometry(new E0(l,t)),this.mergeVertices()}function E0(l,t){Yh.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],l,t),this.type="OctahedronBufferGeometry",this.parameters={radius:l,detail:t}}function $1(l,t){Xe.call(this),this.type="IcosahedronGeometry",this.parameters={radius:l,detail:t},this.fromBufferGeometry(new by(l,t)),this.mergeVertices()}function by(l,t){var i=(1+Math.sqrt(5))/2;Yh.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],l,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:l,detail:t}}function ex(l,t){Xe.call(this),this.type="DodecahedronGeometry",this.parameters={radius:l,detail:t},this.fromBufferGeometry(new Ly(l,t)),this.mergeVertices()}function Ly(l,t){var i=(1+Math.sqrt(5))/2,d=1/i;Yh.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-i,0,-d,i,0,d,-i,0,d,i,-d,-i,0,-d,i,0,d,-i,0,d,i,0,-i,0,-d,i,0,-d,-i,0,d,i,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],l,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:l,detail:t}}function tx(l,t,i,d,v,w){Xe.call(this),this.type="TubeGeometry",this.parameters={path:l,tubularSegments:t,radius:i,radialSegments:d,closed:v},w!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed."),l=new b0(l,t,i,d,v),this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals,this.fromBufferGeometry(l),this.mergeVertices()}function b0(l,t,i,d,v){function w(ht){Y=l.getPointAt(ht/t,Y);var ct=T.normals[ht];for(ht=T.binormals[ht],se=0;se<=d;se++){var mt=se/d*Math.PI*2,Mt=Math.sin(mt);mt=-Math.cos(mt),D.x=mt*ct.x+Mt*ht.x,D.y=mt*ct.y+Mt*ht.y,D.z=mt*ct.z+Mt*ht.z,D.normalize(),fe.push(D.x,D.y,D.z),b.x=Y.x+i*D.x,b.y=Y.y+i*D.y,b.z=Y.z+i*D.z,ae.push(b.x,b.y,b.z)}}Fe.call(this),this.type="TubeBufferGeometry",this.parameters={path:l,tubularSegments:t,radius:i,radialSegments:d,closed:v},t=t||64,i=i||1,d=d||8,v=v||!1;var T=l.computeFrenetFrames(t,v);this.tangents=T.tangents,this.normals=T.normals,this.binormals=T.binormals;var b=new z,D=new z,G=new u,Y=new z,re,se,ae=[],fe=[],ve=[],Ze=[];for(re=0;re<t;re++)w(re);for(w(v===!1?t:0),re=0;re<=t;re++)for(se=0;se<=d;se++)G.x=re/t,G.y=se/d,ve.push(G.x,G.y);(function(){for(se=1;se<=t;se++)for(re=1;re<=d;re++){var ht=(d+1)*se+(re-1),ct=(d+1)*se+re,mt=(d+1)*(se-1)+re;Ze.push((d+1)*(se-1)+(re-1),ht,mt),Ze.push(ht,ct,mt)}})(),this.setIndex(Ze),this.setAttribute("position",new Me(ae,3)),this.setAttribute("normal",new Me(fe,3)),this.setAttribute("uv",new Me(ve,2))}function rx(l,t,i,d,v,w,T){Xe.call(this),this.type="TorusKnotGeometry",this.parameters={radius:l,tube:t,tubularSegments:i,radialSegments:d,p:v,q:w},T!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Py(l,t,i,d,v,w)),this.mergeVertices()}function Py(l,t,i,d,v,w){function T(Bt,wt,Mr,Ot,Hr){var rn=Math.sin(Bt);wt=Mr/wt*Bt,Mr=Math.cos(wt),Hr.x=Ot*(2+Mr)*.5*Math.cos(Bt),Hr.y=Ot*(2+Mr)*rn*.5,Hr.z=Ot*Math.sin(wt)*.5}Fe.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:l,tube:t,tubularSegments:i,radialSegments:d,p:v,q:w},l=l||1,t=t||.4,i=Math.floor(i)||64,d=Math.floor(d)||8,v=v||2,w=w||3;var b=[],D=[],G=[],Y=[],re,se=new z,ae=new z,fe=new z,ve=new z,Ze=new z,ht=new z,ct=new z;for(re=0;re<=i;++re){var mt=re/i*v*Math.PI*2;for(T(mt,v,w,l,fe),T(mt+.01,v,w,l,ve),ht.subVectors(ve,fe),ct.addVectors(ve,fe),Ze.crossVectors(ht,ct),ct.crossVectors(Ze,ht),Ze.normalize(),ct.normalize(),mt=0;mt<=d;++mt){var Mt=mt/d*Math.PI*2,$t=-t*Math.cos(Mt);Mt=t*Math.sin(Mt),se.x=fe.x+($t*ct.x+Mt*Ze.x),se.y=fe.y+($t*ct.y+Mt*Ze.y),se.z=fe.z+($t*ct.z+Mt*Ze.z),D.push(se.x,se.y,se.z),ae.subVectors(se,fe).normalize(),G.push(ae.x,ae.y,ae.z),Y.push(re/i),Y.push(mt/d)}}for(mt=1;mt<=i;mt++)for(re=1;re<=d;re++)l=(d+1)*mt+(re-1),t=(d+1)*mt+re,v=(d+1)*(mt-1)+re,b.push((d+1)*(mt-1)+(re-1),l,v),b.push(l,t,v);this.setIndex(b),this.setAttribute("position",new Me(D,3)),this.setAttribute("normal",new Me(G,3)),this.setAttribute("uv",new Me(Y,2))}function nx(l,t,i,d,v){Xe.call(this),this.type="TorusGeometry",this.parameters={radius:l,tube:t,radialSegments:i,tubularSegments:d,arc:v},this.fromBufferGeometry(new Ry(l,t,i,d,v)),this.mergeVertices()}function Ry(l,t,i,d,v){Fe.call(this),this.type="TorusBufferGeometry",this.parameters={radius:l,tube:t,radialSegments:i,tubularSegments:d,arc:v},l=l||1,t=t||.4,i=Math.floor(i)||8,d=Math.floor(d)||6,v=v||2*Math.PI;var w=[],T=[],b=[],D=[],G=new z,Y=new z,re=new z,se,ae;for(se=0;se<=i;se++)for(ae=0;ae<=d;ae++){var fe=ae/d*v,ve=se/i*Math.PI*2;Y.x=(l+t*Math.cos(ve))*Math.cos(fe),Y.y=(l+t*Math.cos(ve))*Math.sin(fe),Y.z=t*Math.sin(ve),T.push(Y.x,Y.y,Y.z),G.x=l*Math.cos(fe),G.y=l*Math.sin(fe),re.subVectors(Y,G).normalize(),b.push(re.x,re.y,re.z),D.push(ae/d),D.push(se/i)}for(se=1;se<=i;se++)for(ae=1;ae<=d;ae++)l=(d+1)*(se-1)+ae-1,t=(d+1)*(se-1)+ae,v=(d+1)*se+ae,w.push((d+1)*se+ae-1,l,v),w.push(l,t,v);this.setIndex(w),this.setAttribute("position",new Me(T,3)),this.setAttribute("normal",new Me(b,3)),this.setAttribute("uv",new Me(D,2))}function Ww(l,t,i,d,v){for(var w,T=0,b=t,D=i-d;b<i;b+=d)T+=(l[D]-l[b])*(l[b+1]+l[D+1]),D=b;if(v===0<T)for(v=t;v<i;v+=d)w=Zw(v,l[v],l[v+1],w);else for(v=i-d;v>=t;v-=d)w=Zw(v,l[v],l[v+1],w);return w&&TA(w,w.next)&&(ax(w),w=w.next),w}function Yv(l,t){if(!l)return l;t||(t=l);do{var i=!1;if(l.steiner||!TA(l,l.next)&&qs(l.prev,l,l.next)!==0)l=l.next;else{if(ax(l),l=t=l.prev,l===l.next)break;i=!0}}while(i||l!==t);return t}function ix(l,t,i,d,v,w,T){if(l){if(!T&&w){var b=l,D=b;do D.z===null&&(D.z=dC(D.x,D.y,d,v,w)),D.prevZ=D.prev,D=D.nextZ=D.next;while(D!==b);D.prevZ.nextZ=null,D.prevZ=null,b=D;var G,Y,re,se,ae=1;do{D=b;var fe=b=null;for(Y=0;D;){Y++;var ve=D;for(G=re=0;G<ae&&(re++,ve=ve.nextZ,ve);G++);for(se=ae;0<re||0<se&&ve;)re!==0&&(se===0||!ve||D.z<=ve.z)?(G=D,D=D.nextZ,re--):(G=ve,ve=ve.nextZ,se--),fe?fe.nextZ=G:b=G,G.prevZ=fe,fe=G;D=ve}fe.nextZ=null,ae*=2}while(1<Y)}for(b=l;l.prev!==l.next;){if(D=l.prev,ve=l.next,w)fe=fS(l,d,v,w);else e:if(fe=l,Y=fe.prev,re=fe,ae=fe.next,0<=qs(Y,re,ae))fe=!1;else{for(G=fe.next.next;G!==fe.prev;){if(Oy(Y.x,Y.y,re.x,re.y,ae.x,ae.y,G.x,G.y)&&0<=qs(G.prev,G,G.next)){fe=!1;break e}G=G.next}fe=!0}if(fe)t.push(D.i/i),t.push(l.i/i),t.push(ve.i/i),ax(l),b=l=ve.next;else if(l=ve,l===b){if(!T)ix(Yv(l),t,i,d,v,w,1);else if(T===1){l=Yv(l),T=t,b=i,D=l;do ve=D.prev,fe=D.next.next,!TA(ve,fe)&&Xw(ve,D,D.next,fe)&&ox(ve,fe)&&ox(fe,ve)&&(T.push(ve.i/b),T.push(D.i/b),T.push(fe.i/b),ax(D),ax(D.next),D=l=fe),D=D.next;while(D!==l);l=Yv(D),ix(l,t,i,d,v,w,2)}else if(T===2)e:{T=l;do{for(b=T.next.next;b!==T.prev;){if(D=T.i!==b.i){if(D=T,ve=b,fe=D.next.i!==ve.i&&D.prev.i!==ve.i){t:{fe=D;do{if(fe.i!==D.i&&fe.next.i!==D.i&&fe.i!==ve.i&&fe.next.i!==ve.i&&Xw(fe,fe.next,D,ve)){fe=!0;break t}fe=fe.next}while(fe!==D);fe=!1}fe=!fe}if(fe){if(fe=ox(D,ve)&&ox(ve,D)){fe=D,Y=!1,re=(D.x+ve.x)/2,ae=(D.y+ve.y)/2;do fe.y>ae!=fe.next.y>ae&&fe.next.y!==fe.y&&re<(fe.next.x-fe.x)*(ae-fe.y)/(fe.next.y-fe.y)+fe.x&&(Y=!Y),fe=fe.next;while(fe!==D);fe=Y}fe=fe&&(qs(D.prev,D,ve.prev)||qs(D,ve.prev,ve))||TA(D,ve)&&0<qs(D.prev,D,D.next)&&0<qs(ve.prev,ve,ve.next)}D=fe}if(D){l=Yw(T,b),T=Yv(T,T.next),l=Yv(l,l.next),ix(T,t,i,d,v,w),ix(l,t,i,d,v,w);break e}b=b.next}T=T.next}while(T!==l)}break}}}}function fS(l,t,i,d){var v=l.prev,w=l.next;if(0<=qs(v,l,w))return!1;var T=v.x>l.x?v.x>w.x?v.x:w.x:l.x>w.x?l.x:w.x,b=v.y>l.y?v.y>w.y?v.y:w.y:l.y>w.y?l.y:w.y,D=dC(v.x<l.x?v.x<w.x?v.x:w.x:l.x<w.x?l.x:w.x,v.y<l.y?v.y<w.y?v.y:w.y:l.y<w.y?l.y:w.y,t,i,d);for(t=dC(T,b,t,i,d),i=l.prevZ,d=l.nextZ;i&&i.z>=D&&d&&d.z<=t;){if(i!==l.prev&&i!==l.next&&Oy(v.x,v.y,l.x,l.y,w.x,w.y,i.x,i.y)&&0<=qs(i.prev,i,i.next)||(i=i.prevZ,d!==l.prev&&d!==l.next&&Oy(v.x,v.y,l.x,l.y,w.x,w.y,d.x,d.y)&&0<=qs(d.prev,d,d.next)))return!1;d=d.nextZ}for(;i&&i.z>=D;){if(i!==l.prev&&i!==l.next&&Oy(v.x,v.y,l.x,l.y,w.x,w.y,i.x,i.y)&&0<=qs(i.prev,i,i.next))return!1;i=i.prevZ}for(;d&&d.z<=t;){if(d!==l.prev&&d!==l.next&&Oy(v.x,v.y,l.x,l.y,w.x,w.y,d.x,d.y)&&0<=qs(d.prev,d,d.next))return!1;d=d.nextZ}return!0}function dS(l,t){return l.x-t.x}function pS(l,t){var i=t,d=l.x,v=l.y,w=-Infinity;do{if(v<=i.y&&v>=i.next.y&&i.next.y!==i.y){var T=i.x+(v-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(T<=d&&T>w){if(w=T,T===d){if(v===i.y)return i;if(v===i.next.y)return i.next}var b=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!b)return null;if(d===w)return b;t=b,T=b.x;var D=b.y,G=Infinity;i=b;do{if(d>=i.x&&i.x>=T&&d!==i.x&&Oy(v<D?d:w,v,T,D,v<D?w:d,v,i.x,i.y)){var Y=Math.abs(v-i.y)/(d-i.x),re;if((re=ox(i,l))&&!(re=Y<G)&&(re=Y===G)&&!(re=i.x>b.x)&&(re=i.x===b.x)){re=b;var se=i;re=0>qs(re.prev,re,se.prev)&&0>qs(se.next,re,re.next)}re&&(b=i,G=Y)}i=i.next}while(i!==t);return b}function dC(l,t,i,d,v){return l=32767*(l-i)*v,t=32767*(t-d)*v,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,(l|l<<1)&1431655765|((t|t<<1)&1431655765)<<1}function gS(l){var t=l,i=l;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==l);return i}function Oy(l,t,i,d,v,w,T,b){return 0<=(v-T)*(t-b)-(l-T)*(w-b)&&0<=(l-T)*(d-b)-(i-T)*(t-b)&&0<=(i-T)*(w-b)-(v-T)*(d-b)}function qs(l,t,i){return(t.y-l.y)*(i.x-t.x)-(t.x-l.x)*(i.y-t.y)}function TA(l,t){return l.x===t.x&&l.y===t.y}function Xw(l,t,i,d){var v=EA(qs(l,t,i)),w=EA(qs(l,t,d)),T=EA(qs(i,d,l)),b=EA(qs(i,d,t));return!!(v!==w&&T!==b||v===0&&IA(l,i,t)||w===0&&IA(l,d,t)||T===0&&IA(i,l,d)||b===0&&IA(i,t,d))}function IA(l,t,i){return t.x<=Math.max(l.x,i.x)&&t.x>=Math.min(l.x,i.x)&&t.y<=Math.max(l.y,i.y)&&t.y>=Math.min(l.y,i.y)}function EA(l){return 0<l?1:0>l?-1:0}function ox(l,t){return 0>qs(l.prev,l,l.next)?0<=qs(l,t,l.next)&&0<=qs(l,l.prev,t):0>qs(l,t,l.prev)||0>qs(l,l.next,t)}function Yw(l,t){var i=new pC(l.i,l.x,l.y),d=new pC(t.i,t.x,t.y),v=l.next,w=t.prev;return l.next=t,t.prev=l,i.next=v,v.prev=i,d.next=i,i.prev=d,w.next=d,d.prev=w,d}function Zw(l,t,i,d){return l=new pC(l,t,i),d?(l.next=d.next,l.prev=d,d.next.prev=l,d.next=l):(l.prev=l,l.next=l),l}function ax(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function pC(l,t,i){this.i=l,this.x=t,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Kw(l){var t=l.length;2<t&&l[t-1].equals(l[0])&&l.pop()}function Jw(l,t){for(var i=0;i<t.length;i++)l.push(t[i].x),l.push(t[i].y)}function L0(l,t){Xe.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:l,options:t},this.fromBufferGeometry(new Pg(l,t)),this.mergeVertices()}function Pg(l,t){function i(D){function G(ln,zi,Ua){return zi||console.error("THREE.ExtrudeGeometry: vec does not exist"),zi.clone().multiplyScalar(Ua).add(ln)}function Y(ln,zi,Ua){var Uo=ln.x-zi.x,or=ln.y-zi.y,Li=Ua.x-ln.x,Pi=Ua.y-ln.y,li=Uo*Uo+or*or;if(Math.abs(Uo*Pi-or*Li)>Ro){var Nc=Math.sqrt(li),Xl=Math.sqrt(Li*Li+Pi*Pi);if(li=zi.x-or/Nc,zi=zi.y+Uo/Nc,Pi=((Ua.x-Pi/Xl-li)*Pi-(Ua.y+Li/Xl-zi)*Li)/(Uo*Pi-or*Li),Li=li+Uo*Pi-ln.x,Uo=zi+or*Pi-ln.y,or=Li*Li+Uo*Uo,2>=or)return new u(Li,Uo);or=Math.sqrt(or/2)}else ln=!1,Uo>Ro?Li>Ro&&(ln=!0):Uo<-Ro?Li<-Ro&&(ln=!0):Ms(or)===Ms(Pi)&&(ln=!0),ln?(Li=-or,or=Math.sqrt(li)):(Li=Uo,Uo=or,or=Math.sqrt(li/2));return new u(Li/or,Uo/or)}function re(ln,zi){for(mr=ln.length;0<=--mr;){var Ua=mr,Uo=mr-1;0>Uo&&(Uo=ln.length-1);var or,Li=ct+2*Mr;for(or=0;or<Li;or++){var Pi=Qt*or,li=Qt*(or+1),Nc=zi+Uo+Pi,Xl=zi+Uo+li;li=zi+Ua+li,fe(zi+Ua+Pi),fe(Nc),fe(li),fe(Nc),fe(Xl),fe(li),Pi=v.length/3,Pi=Hr.generateSideWallUV(d,v,Pi-6,Pi-3,Pi-2,Pi-1),ve(Pi[0]),ve(Pi[1]),ve(Pi[3]),ve(Pi[1]),ve(Pi[2]),ve(Pi[3])}}}function se(ln,zi,Ua){Ze.push(ln),Ze.push(zi),Ze.push(Ua)}function ae(ln,zi,Ua){fe(ln),fe(zi),fe(Ua),ln=v.length/3,ln=Hr.generateTopUV(d,v,ln-3,ln-2,ln-1),ve(ln[0]),ve(ln[1]),ve(ln[2])}function fe(ln){v.push(Ze[3*ln]),v.push(Ze[3*ln+1]),v.push(Ze[3*ln+2])}function ve(ln){w.push(ln.x),w.push(ln.y)}var Ze=[],ht=t.curveSegments!==void 0?t.curveSegments:12,ct=t.steps!==void 0?t.steps:1,mt=t.depth!==void 0?t.depth:100,Mt=t.bevelEnabled!==void 0?t.bevelEnabled:!0,$t=t.bevelThickness!==void 0?t.bevelThickness:6,Bt=t.bevelSize!==void 0?t.bevelSize:$t-2,wt=t.bevelOffset!==void 0?t.bevelOffset:0,Mr=t.bevelSegments!==void 0?t.bevelSegments:3,Ot=t.extrudePath,Hr=t.UVGenerator!==void 0?t.UVGenerator:zS;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),mt=t.amount);var rn=!1;if(Ot){var Sr=Ot.getSpacedPoints(ct);rn=!0,Mt=!1;var $n=Ot.computeFrenetFrames(ct,!1),sn=new z,Wn=new z,to=new z}Mt||(wt=Bt=$t=Mr=0);var si;ht=D.extractPoints(ht),D=ht.shape;var Do=ht.holes;if(!qm.isClockWise(D)){D=D.reverse();var oo=0;for(si=Do.length;oo<si;oo++){var wa=Do[oo];qm.isClockWise(wa)&&(Do[oo]=wa.reverse())}}var za=qm.triangulateShape(D,Do),ke=D;for(oo=0,si=Do.length;oo<si;oo++)wa=Do[oo],D=D.concat(wa);var tt,Qt=D.length,Vr,pn=za.length;ht=[];var mr=0,Zt=ke.length,Dt=Zt-1;for(tt=mr+1;mr<Zt;mr++,Dt++,tt++)Dt===Zt&&(Dt=0),tt===Zt&&(tt=0),ht[mr]=Y(ke[mr],ke[Dt],ke[tt]);Ot=[];var xn=ht.concat();for(oo=0,si=Do.length;oo<si;oo++){wa=Do[oo];var An=[];for(mr=0,Zt=wa.length,Dt=Zt-1,tt=mr+1;mr<Zt;mr++,Dt++,tt++)Dt===Zt&&(Dt=0),tt===Zt&&(tt=0),An[mr]=Y(wa[mr],wa[Dt],wa[tt]);Ot.push(An),xn=xn.concat(An)}for(Dt=0;Dt<Mr;Dt++){Zt=Dt/Mr;var Fi=$t*Math.cos(Zt*Math.PI/2);for(tt=Bt*Math.sin(Zt*Math.PI/2)+wt,mr=0,Zt=ke.length;mr<Zt;mr++){var Fr=G(ke[mr],ht[mr],tt);se(Fr.x,Fr.y,-Fi)}for(oo=0,si=Do.length;oo<si;oo++)for(wa=Do[oo],An=Ot[oo],mr=0,Zt=wa.length;mr<Zt;mr++)Fr=G(wa[mr],An[mr],tt),se(Fr.x,Fr.y,-Fi)}for(tt=Bt+wt,mr=0;mr<Qt;mr++)Fr=Mt?G(D[mr],xn[mr],tt):D[mr],rn?(Wn.copy($n.normals[0]).multiplyScalar(Fr.x),sn.copy($n.binormals[0]).multiplyScalar(Fr.y),to.copy(Sr[0]).add(Wn).add(sn),se(to.x,to.y,to.z)):se(Fr.x,Fr.y,0);for(Zt=1;Zt<=ct;Zt++)for(mr=0;mr<Qt;mr++)Fr=Mt?G(D[mr],xn[mr],tt):D[mr],rn?(Wn.copy($n.normals[Zt]).multiplyScalar(Fr.x),sn.copy($n.binormals[Zt]).multiplyScalar(Fr.y),to.copy(Sr[Zt]).add(Wn).add(sn),se(to.x,to.y,to.z)):se(Fr.x,Fr.y,mt/ct*Zt);for(Dt=Mr-1;0<=Dt;Dt--){for(Zt=Dt/Mr,Fi=$t*Math.cos(Zt*Math.PI/2),tt=Bt*Math.sin(Zt*Math.PI/2)+wt,mr=0,Zt=ke.length;mr<Zt;mr++)Fr=G(ke[mr],ht[mr],tt),se(Fr.x,Fr.y,mt+Fi);for(oo=0,si=Do.length;oo<si;oo++)for(wa=Do[oo],An=Ot[oo],mr=0,Zt=wa.length;mr<Zt;mr++)Fr=G(wa[mr],An[mr],tt),rn?se(Fr.x,Fr.y+Sr[ct-1].y,Sr[ct-1].x+Fi):se(Fr.x,Fr.y,mt+Fi)}(function(){var ln=v.length/3;if(Mt){var zi=0*Qt;for(mr=0;mr<pn;mr++)Vr=za[mr],ae(Vr[2]+zi,Vr[1]+zi,Vr[0]+zi);for(zi=Qt*(ct+2*Mr),mr=0;mr<pn;mr++)Vr=za[mr],ae(Vr[0]+zi,Vr[1]+zi,Vr[2]+zi)}else{for(mr=0;mr<pn;mr++)Vr=za[mr],ae(Vr[2],Vr[1],Vr[0]);for(mr=0;mr<pn;mr++)Vr=za[mr],ae(Vr[0]+Qt*ct,Vr[1]+Qt*ct,Vr[2]+Qt*ct)}d.addGroup(ln,v.length/3-ln,0)})(),function(){var ln=v.length/3,zi=0;for(re(ke,zi),zi+=ke.length,oo=0,si=Do.length;oo<si;oo++)wa=Do[oo],re(wa,zi),zi+=wa.length;d.addGroup(ln,v.length/3-ln,1)}()}Fe.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:l,options:t},l=Array.isArray(l)?l:[l];for(var d=this,v=[],w=[],T=0,b=l.length;T<b;T++)i(l[T]);this.setAttribute("position",new Me(v,3)),this.setAttribute("uv",new Me(w,2)),this.computeVertexNormals()}function qw(l,t,i){if(i.shapes=[],Array.isArray(l))for(var d=0,v=l.length;d<v;d++)i.shapes.push(l[d].uuid);else i.shapes.push(l.uuid);return t.extrudePath!==void 0&&(i.options.extrudePath=t.extrudePath.toJSON()),i}function sx(l,t){Xe.call(this),this.type="TextGeometry",this.parameters={text:l,parameters:t},this.fromBufferGeometry(new Dy(l,t)),this.mergeVertices()}function Dy(l,t){t=t||{};var i=t.font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Xe;l=i.generateShapes(l,t.size),t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),Pg.call(this,l,t),this.type="TextBufferGeometry"}function lx(l,t,i,d,v,w,T){Xe.call(this),this.type="SphereGeometry",this.parameters={radius:l,widthSegments:t,heightSegments:i,phiStart:d,phiLength:v,thetaStart:w,thetaLength:T},this.fromBufferGeometry(new P0(l,t,i,d,v,w,T)),this.mergeVertices()}function P0(l,t,i,d,v,w,T){Fe.call(this),this.type="SphereBufferGeometry",this.parameters={radius:l,widthSegments:t,heightSegments:i,phiStart:d,phiLength:v,thetaStart:w,thetaLength:T},l=l||1,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),d=d!==void 0?d:0,v=v!==void 0?v:2*Math.PI,w=w!==void 0?w:0,T=T!==void 0?T:Math.PI;var b=Math.min(w+T,Math.PI),D,G,Y=0,re=[],se=new z,ae=new z,fe=[],ve=[],Ze=[],ht=[];for(G=0;G<=i;G++){var ct=[],mt=G/i,Mt=0;for(G==0&&w==0?Mt=.5/t:G==i&&b==Math.PI&&(Mt=-.5/t),D=0;D<=t;D++){var $t=D/t;se.x=-l*Math.cos(d+$t*v)*Math.sin(w+mt*T),se.y=l*Math.cos(w+mt*T),se.z=l*Math.sin(d+$t*v)*Math.sin(w+mt*T),ve.push(se.x,se.y,se.z),ae.copy(se).normalize(),Ze.push(ae.x,ae.y,ae.z),ht.push($t+Mt,1-mt),ct.push(Y++)}re.push(ct)}for(G=0;G<i;G++)for(D=0;D<t;D++)l=re[G][D+1],d=re[G][D],v=re[G+1][D],T=re[G+1][D+1],(G!==0||0<w)&&fe.push(l,d,T),(G!==i-1||b<Math.PI)&&fe.push(d,v,T);this.setIndex(fe),this.setAttribute("position",new Me(ve,3)),this.setAttribute("normal",new Me(Ze,3)),this.setAttribute("uv",new Me(ht,2))}function ux(l,t,i,d,v,w){Xe.call(this),this.type="RingGeometry",this.parameters={innerRadius:l,outerRadius:t,thetaSegments:i,phiSegments:d,thetaStart:v,thetaLength:w},this.fromBufferGeometry(new Fy(l,t,i,d,v,w)),this.mergeVertices()}function Fy(l,t,i,d,v,w){Fe.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:l,outerRadius:t,thetaSegments:i,phiSegments:d,thetaStart:v,thetaLength:w},l=l||.5,t=t||1,v=v!==void 0?v:0,w=w!==void 0?w:2*Math.PI,i=i!==void 0?Math.max(3,i):8,d=d!==void 0?Math.max(1,d):1;var T=[],b=[],D=[],G=[],Y=l,re=(t-l)/d,se=new z,ae=new u,fe,ve;for(fe=0;fe<=d;fe++){for(ve=0;ve<=i;ve++)l=v+ve/i*w,se.x=Y*Math.cos(l),se.y=Y*Math.sin(l),b.push(se.x,se.y,se.z),D.push(0,0,1),ae.x=(se.x/t+1)/2,ae.y=(se.y/t+1)/2,G.push(ae.x,ae.y);Y+=re}for(fe=0;fe<d;fe++)for(t=fe*(i+1),ve=0;ve<i;ve++)l=ve+t,v=l+i+1,w=l+i+2,Y=l+1,T.push(l,v,Y),T.push(v,w,Y);this.setIndex(T),this.setAttribute("position",new Me(b,3)),this.setAttribute("normal",new Me(D,3)),this.setAttribute("uv",new Me(G,2))}function cx(l,t,i,d){Xe.call(this),this.type="LatheGeometry",this.parameters={points:l,segments:t,phiStart:i,phiLength:d},this.fromBufferGeometry(new Ny(l,t,i,d)),this.mergeVertices()}function Ny(l,t,i,d){Fe.call(this),this.type="LatheBufferGeometry",this.parameters={points:l,segments:t,phiStart:i,phiLength:d},t=Math.floor(t)||12,i=i||0,d=d||2*Math.PI,d=ho.clamp(d,0,2*Math.PI);var v=[],w=[],T=[],b=1/t,D=new z,G=new u,Y;for(Y=0;Y<=t;Y++){var re=i+Y*b*d,se=Math.sin(re),ae=Math.cos(re);for(re=0;re<=l.length-1;re++)D.x=l[re].x*se,D.y=l[re].y,D.z=l[re].x*ae,w.push(D.x,D.y,D.z),G.x=Y/t,G.y=re/(l.length-1),T.push(G.x,G.y)}for(Y=0;Y<t;Y++)for(re=0;re<l.length-1;re++)i=re+Y*l.length,b=i+l.length,D=i+l.length+1,G=i+1,v.push(i,b,G),v.push(b,D,G);if(this.setIndex(v),this.setAttribute("position",new Me(w,3)),this.setAttribute("uv",new Me(T,2)),this.computeVertexNormals(),d===2*Math.PI)for(d=this.attributes.normal.array,v=new z,w=new z,T=new z,i=t*l.length*3,re=Y=0;Y<l.length;Y++,re+=3)v.x=d[re+0],v.y=d[re+1],v.z=d[re+2],w.x=d[i+re+0],w.y=d[i+re+1],w.z=d[i+re+2],T.addVectors(v,w).normalize(),d[re+0]=d[i+re+0]=T.x,d[re+1]=d[i+re+1]=T.y,d[re+2]=d[i+re+2]=T.z}function R0(l,t){Xe.call(this),this.type="ShapeGeometry",(typeof t=="undefined"?"undefined":Jn(t))==="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:l,curveSegments:t},this.fromBufferGeometry(new O0(l,t)),this.mergeVertices()}function O0(l,t){function i(Y){var re,se=v.length/3;Y=Y.extractPoints(t);var ae=Y.shape,fe=Y.holes;for(qm.isClockWise(ae)===!1&&(ae=ae.reverse()),Y=0,re=fe.length;Y<re;Y++){var ve=fe[Y];qm.isClockWise(ve)===!0&&(fe[Y]=ve.reverse())}var Ze=qm.triangulateShape(ae,fe);for(Y=0,re=fe.length;Y<re;Y++)ve=fe[Y],ae=ae.concat(ve);for(Y=0,re=ae.length;Y<re;Y++)ve=ae[Y],v.push(ve.x,ve.y,0),w.push(0,0,1),T.push(ve.x,ve.y);for(Y=0,re=Ze.length;Y<re;Y++)ae=Ze[Y],d.push(ae[0]+se,ae[1]+se,ae[2]+se),D+=3}Fe.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:l,curveSegments:t},t=t||12;var d=[],v=[],w=[],T=[],b=0,D=0;if(Array.isArray(l)===!1)i(l);else for(var G=0;G<l.length;G++)i(l[G]),this.addGroup(b,D,G),b+=D,D=0;this.setIndex(d),this.setAttribute("position",new Me(v,3)),this.setAttribute("normal",new Me(w,3)),this.setAttribute("uv",new Me(T,2))}function Qw(l,t){if(t.shapes=[],Array.isArray(l))for(var i=0,d=l.length;i<d;i++)t.shapes.push(l[i].uuid);else t.shapes.push(l.uuid);return t}function By(l,t){Fe.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t};var i=[];t=Math.cos(ho.DEG2RAD*(t!==void 0?t:1));var d=[0,0],v={},w=["a","b","c"];if(l.isBufferGeometry){var T=new Xe;T.fromBufferGeometry(l)}else T=l.clone();T.mergeVertices(),T.computeFaceNormals(),l=T.vertices,T=T.faces;for(var b=0,D=T.length;b<D;b++)for(var G=T[b],Y=0;3>Y;Y++){var re=G[w[Y]],se=G[w[(Y+1)%3]];d[0]=Math.min(re,se),d[1]=Math.max(re,se),re=d[0]+","+d[1],v[re]===void 0?v[re]={index1:d[0],index2:d[1],face1:b,face2:void 0}:v[re].face2=b}for(re in v)d=v[re],(d.face2===void 0||T[d.face1].normal.dot(T[d.face2].normal)<=t)&&(w=l[d.index1],i.push(w.x,w.y,w.z),w=l[d.index2],i.push(w.x,w.y,w.z));this.setAttribute("position",new Me(i,3))}function D0(l,t,i,d,v,w,T,b){Xe.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:l,radiusBottom:t,height:i,radialSegments:d,heightSegments:v,openEnded:w,thetaStart:T,thetaLength:b},this.fromBufferGeometry(new Hm(l,t,i,d,v,w,T,b)),this.mergeVertices()}function Hm(l,t,i,d,v,w,T,b){function D(ct){var mt,Mt=new u,$t=new z,Bt=0,wt=ct===!0?l:t,Mr=ct===!0?1:-1,Ot=fe;for(mt=1;mt<=d;mt++)re.push(0,Ze*Mr,0),se.push(0,Mr,0),ae.push(.5,.5),fe++;var Hr=fe;for(mt=0;mt<=d;mt++){var rn=mt/d*b+T,Sr=Math.cos(rn);rn=Math.sin(rn),$t.x=wt*rn,$t.y=Ze*Mr,$t.z=wt*Sr,re.push($t.x,$t.y,$t.z),se.push(0,Mr,0),Mt.x=.5*Sr+.5,Mt.y=.5*rn*Mr+.5,ae.push(Mt.x,Mt.y),fe++}for(mt=0;mt<d;mt++)Mt=Ot+mt,$t=Hr+mt,ct===!0?Y.push($t,$t+1,Mt):Y.push($t+1,$t,Mt),Bt+=3;G.addGroup(ht,Bt,ct===!0?1:2),ht+=Bt}Fe.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:l,radiusBottom:t,height:i,radialSegments:d,heightSegments:v,openEnded:w,thetaStart:T,thetaLength:b};var G=this;l=l!==void 0?l:1,t=t!==void 0?t:1,i=i||1,d=Math.floor(d)||8,v=Math.floor(v)||1,w=w!==void 0?w:!1,T=T!==void 0?T:0,b=b!==void 0?b:2*Math.PI;var Y=[],re=[],se=[],ae=[],fe=0,ve=[],Ze=i/2,ht=0;(function(){var ct,mt,Mt=new z,$t=new z,Bt=0,wt=(t-l)/i;for(mt=0;mt<=v;mt++){var Mr=[],Ot=mt/v,Hr=Ot*(t-l)+l;for(ct=0;ct<=d;ct++){var rn=ct/d,Sr=rn*b+T,$n=Math.sin(Sr);Sr=Math.cos(Sr),$t.x=Hr*$n,$t.y=-Ot*i+Ze,$t.z=Hr*Sr,re.push($t.x,$t.y,$t.z),Mt.set($n,wt,Sr).normalize(),se.push(Mt.x,Mt.y,Mt.z),ae.push(rn,1-Ot),Mr.push(fe++)}ve.push(Mr)}for(ct=0;ct<d;ct++)for(mt=0;mt<v;mt++)Mt=ve[mt+1][ct],$t=ve[mt+1][ct+1],wt=ve[mt][ct+1],Y.push(ve[mt][ct],Mt,wt),Y.push(Mt,$t,wt),Bt+=6;G.addGroup(ht,Bt,0),ht+=Bt})(),w===!1&&(0<l&&D(!0),0<t&&D(!1)),this.setIndex(Y),this.setAttribute("position",new Me(re,3)),this.setAttribute("normal",new Me(se,3)),this.setAttribute("uv",new Me(ae,2))}function hx(l,t,i,d,v,w,T){D0.call(this,0,l,t,i,d,v,w,T),this.type="ConeGeometry",this.parameters={radius:l,height:t,radialSegments:i,heightSegments:d,openEnded:v,thetaStart:w,thetaLength:T}}function fx(l,t,i,d,v,w,T){Hm.call(this,0,l,t,i,d,v,w,T),this.type="ConeBufferGeometry",this.parameters={radius:l,height:t,radialSegments:i,heightSegments:d,openEnded:v,thetaStart:w,thetaLength:T}}function dx(l,t,i,d){Xe.call(this),this.type="CircleGeometry",this.parameters={radius:l,segments:t,thetaStart:i,thetaLength:d},this.fromBufferGeometry(new zy(l,t,i,d)),this.mergeVertices()}function zy(l,t,i,d){Fe.call(this),this.type="CircleBufferGeometry",this.parameters={radius:l,segments:t,thetaStart:i,thetaLength:d},l=l||1,t=t!==void 0?Math.max(3,t):8,i=i!==void 0?i:0,d=d!==void 0?d:2*Math.PI;var v=[],w=[],T=[],b=[],D,G=new z,Y=new u;w.push(0,0,0),T.push(0,0,1),b.push(.5,.5);var re=0;for(D=3;re<=t;re++,D+=3){var se=i+re/t*d;G.x=l*Math.cos(se),G.y=l*Math.sin(se),w.push(G.x,G.y,G.z),T.push(0,0,1),Y.x=(w[D]/l+1)/2,Y.y=(w[D+1]/l+1)/2,b.push(Y.x,Y.y)}for(D=1;D<=t;D++)v.push(D,D+1,0);this.setIndex(v),this.setAttribute("position",new Me(w,3)),this.setAttribute("normal",new Me(T,3)),this.setAttribute("uv",new Me(b,2))}function F0(l){Tt.call(this),this.type="ShadowMaterial",this.color=new We(0),this.transparent=!0,this.setValues(l)}function Gm(l){Ft.call(this,l),this.type="RawShaderMaterial"}function Rg(l){Tt.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new We(16777215),this.roughness=1,this.metalness=0,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new u(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(l)}function N0(l){Rg.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new u(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(l)}function Zv(l){Tt.call(this),this.type="MeshPhongMaterial",this.color=new We(16777215),this.specular=new We(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new u(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(l)}function B0(l){Tt.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new We(16777215),this.specular=new We(1118481),this.shininess=30,this.lightMap=this.gradientMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new u(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=this.specularMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(l)}function z0(l){Tt.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new u(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.fog=!1,this.setValues(l)}function U0(l){Tt.call(this),this.type="MeshLambertMaterial",this.color=new We(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(l)}function k0(l){Tt.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new We(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new u(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(l)}function H0(l){Fs.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(l)}function Vf(l,t,i,d){this.parameterPositions=l,this._cachedIndex=0,this.resultBuffer=d!==void 0?d:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function bA(l,t,i,d){Vf.call(this,l,t,i,d),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function px(l,t,i,d){Vf.call(this,l,t,i,d)}function LA(l,t,i,d){Vf.call(this,l,t,i,d)}function cc(l,t,i,d){if(l===void 0)throw Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw Error("THREE.KeyframeTrack: no keyframes in track named "+l);this.name=l,this.times=Ns.convertArray(t,this.TimeBufferType),this.values=Ns.convertArray(i,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}function PA(l,t,i){cc.call(this,l,t,i)}function RA(l,t,i,d){cc.call(this,l,t,i,d)}function Uy(l,t,i,d){cc.call(this,l,t,i,d)}function OA(l,t,i,d){Vf.call(this,l,t,i,d)}function gx(l,t,i,d){cc.call(this,l,t,i,d)}function DA(l,t,i,d){cc.call(this,l,t,i,d)}function ky(l,t,i,d){cc.call(this,l,t,i,d)}function Nd(l,t,i,d){this.name=l,this.tracks=i,this.duration=t!==void 0?t:-1,this.blendMode=d!==void 0?d:2500,this.uuid=ho.generateUUID(),0>this.duration&&this.resetDuration()}function mS(l){switch(l.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Uy;case"vector":case"vector2":case"vector3":case"vector4":return ky;case"color":return RA;case"quaternion":return gx;case"bool":case"boolean":return PA;case"string":return DA}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+l)}function vS(l){if(l.type===void 0)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=mS(l.type);if(l.times===void 0){var i=[],d=[];Ns.flattenJSON(l.keys,i,d,"value"),l.times=i,l.values=d}return t.parse!==void 0?t.parse(l):new t(l.name,l.times,l.values,l.interpolation)}function gC(l,t,i){var d=this,v=!1,w=0,T=0,b=void 0,D=[];this.onStart=void 0,this.onLoad=l,this.onProgress=t,this.onError=i,this.itemStart=function(G){T++,v===!1&&d.onStart!==void 0&&d.onStart(G,w,T),v=!0},this.itemEnd=function(G){w++,d.onProgress!==void 0&&d.onProgress(G,w,T),w===T&&(v=!1,d.onLoad!==void 0)&&d.onLoad()},this.itemError=function(G){d.onError!==void 0&&d.onError(G)},this.resolveURL=function(G){return b?b(G):G},this.setURLModifier=function(G){return b=G,this},this.addHandler=function(G,Y){return D.push(G,Y),this},this.removeHandler=function(G){return G=D.indexOf(G),G!==-1&&D.splice(G,2),this},this.getHandler=function(G){for(var Y=0,re=D.length;Y<re;Y+=2){var se=D[Y],ae=D[Y+1];if(se.global&&(se.lastIndex=0),se.test(G))return ae}return null}}function Oa(l){this.manager=l!==void 0?l:V_,this.crossOrigin="anonymous",this.resourcePath=this.path="",this.requestHeader={}}function Bd(l){Oa.call(this,l)}function mC(l){Oa.call(this,l)}function vC(l){Oa.call(this,l)}function FA(l){Oa.call(this,l)}function Hy(l){Oa.call(this,l)}function NA(l){Oa.call(this,l)}function BA(l){Oa.call(this,l)}function di(){this.type="Curve",this.arcLengthDivisions=200}function Wf(l,t,i,d,v,w,T,b){di.call(this),this.type="EllipseCurve",this.aX=l||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=d||1,this.aStartAngle=v||0,this.aEndAngle=w||2*Math.PI,this.aClockwise=T||!1,this.aRotation=b||0}function Gy(l,t,i,d,v,w){Wf.call(this,l,t,i,i,d,v,w),this.type="ArcCurve"}function yC(){var l=0,t=0,i=0,d=0;return{initCatmullRom:function(w,T,b,D,G){w=G*(b-w),D=G*(D-T),l=T,t=w,i=-3*T+3*b-2*w-D,d=2*T-2*b+w+D},initNonuniformCatmullRom:function(w,T,b,D,G,Y,re){w=((T-w)/G-(b-w)/(G+Y)+(b-T)/Y)*Y,D=((b-T)/Y-(D-T)/(Y+re)+(D-b)/re)*Y,l=T,t=w,i=-3*T+3*b-2*w-D,d=2*T-2*b+w+D},calc:function(w){var T=w*w;return l+t*w+i*T+d*T*w}}}function Dc(l,t,i,d){di.call(this),this.type="CatmullRomCurve3",this.points=l||[],this.closed=t||!1,this.curveType=i||"centripetal",this.tension=d||.5}function $w(l,t,i,d,v){t=.5*(d-t),v=.5*(v-i);var w=l*l;return(2*i-2*d+t+v)*l*w+(-3*i+3*d-2*t-v)*w+t*l+i}function mx(l,t,i,d){var v=1-l;return v*v*t+2*(1-l)*l*i+l*l*d}function vx(l,t,i,d,v){var w=1-l,T=1-l;return w*w*w*t+3*T*T*l*i+3*(1-l)*l*l*d+l*l*l*v}function Np(l,t,i,d){di.call(this),this.type="CubicBezierCurve",this.v0=l||new u,this.v1=t||new u,this.v2=i||new u,this.v3=d||new u}function Og(l,t,i,d){di.call(this),this.type="CubicBezierCurve3",this.v0=l||new z,this.v1=t||new z,this.v2=i||new z,this.v3=d||new z}function Zh(l,t){di.call(this),this.type="LineCurve",this.v1=l||new u,this.v2=t||new u}function Bp(l,t){di.call(this),this.type="LineCurve3",this.v1=l||new z,this.v2=t||new z}function zp(l,t,i){di.call(this),this.type="QuadraticBezierCurve",this.v0=l||new u,this.v1=t||new u,this.v2=i||new u}function Dg(l,t,i){di.call(this),this.type="QuadraticBezierCurve3",this.v0=l||new z,this.v1=t||new z,this.v2=i||new z}function Up(l){di.call(this),this.type="SplineCurve",this.points=l||[]}function jm(){di.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function kp(l){jm.call(this),this.type="Path",this.currentPoint=new u,l&&this.setFromPoints(l)}function Kv(l){kp.call(this,l),this.uuid=ho.generateUUID(),this.type="Shape",this.holes=[]}function ms(l,t){oe.call(this),this.type="Light",this.color=new We(l),this.intensity=t!==void 0?t:1,this.receiveShadow=void 0}function zA(l,t,i){ms.call(this,l,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(oe.DefaultUp),this.updateMatrix(),this.groundColor=new We(t)}function Fg(l){this.camera=l,this.bias=0,this.radius=1,this.mapSize=new u(512,512),this.mapPass=this.map=null,this.matrix=new Z,this._frustum=new Ln,this._frameExtents=new u(1,1),this._viewportCount=1,this._viewports=[new C(0,0,1,1)]}function UA(){Fg.call(this,new Ht(50,1,.5,500))}function kA(l,t,i,d,v,w){ms.call(this,l,t),this.type="SpotLight",this.position.copy(oe.DefaultUp),this.updateMatrix(),this.target=new oe,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(b){this.intensity=b/Math.PI}}),this.distance=i!==void 0?i:0,this.angle=d!==void 0?d:Math.PI/3,this.penumbra=v!==void 0?v:0,this.decay=w!==void 0?w:1,this.shadow=new UA}function xC(){Fg.call(this,new Ht(90,1,.5,500)),this._frameExtents=new u(4,2),this._viewportCount=6,this._viewports=[new C(2,1,1,1),new C(0,1,1,1),new C(3,1,1,1),new C(1,1,1,1),new C(3,0,1,1),new C(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}function HA(l,t,i,d){ms.call(this,l,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(w){this.intensity=w/(4*Math.PI)}}),this.distance=i!==void 0?i:0,this.decay=d!==void 0?d:1,this.shadow=new xC}function jy(l,t,i,d,v,w){Jt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=l!==void 0?l:-1,this.right=t!==void 0?t:1,this.top=i!==void 0?i:1,this.bottom=d!==void 0?d:-1,this.near=v!==void 0?v:.1,this.far=w!==void 0?w:2e3,this.updateProjectionMatrix()}function GA(){Fg.call(this,new jy(-5,5,5,-5,.5,500))}function jA(l,t){ms.call(this,l,t),this.type="DirectionalLight",this.position.copy(oe.DefaultUp),this.updateMatrix(),this.target=new oe,this.shadow=new GA}function VA(l,t){ms.call(this,l,t),this.type="AmbientLight",this.castShadow=void 0}function WA(l,t,i,d){ms.call(this,l,t),this.type="RectAreaLight",this.width=i!==void 0?i:10,this.height=d!==void 0?d:10}function XA(){this.coefficients=[];for(var l=0;9>l;l++)this.coefficients.push(new z)}function zd(l,t){ms.call(this,void 0,t),this.type="LightProbe",this.sh=l!==void 0?l:new XA}function YA(l){Oa.call(this,l),this.textures={}}function yx(){Fe.call(this),this.type="InstancedBufferGeometry",this.instanceCount=Infinity}function ZA(l,t,i,d){typeof i=="number"&&(d=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),tr.call(this,l,t,i),this.meshPerAttribute=d||1}function KA(l){Oa.call(this,l)}function JA(l){Oa.call(this,l)}function AC(l){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Oa.call(this,l),this.options=void 0}function CC(){this.type="ShapePath",this.color=new We,this.subPaths=[],this.currentPath=null}function wC(l){this.type="Font",this.data=l}function _C(l){Oa.call(this,l)}function qA(l){Oa.call(this,l)}function MC(l,t,i){zd.call(this,void 0,i),l=new We().set(l),i=new We().set(t),t=new z(l.r,l.g,l.b),l=new z(i.r,i.g,i.b),i=Math.sqrt(Math.PI);var d=i*Math.sqrt(.75);this.sh.coefficients[0].copy(t).add(l).multiplyScalar(i),this.sh.coefficients[1].copy(t).sub(l).multiplyScalar(d)}function SC(l,t){zd.call(this,void 0,t),l=new We().set(l),this.sh.coefficients[0].set(l.r,l.g,l.b).multiplyScalar(2*Math.sqrt(Math.PI))}function e_(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ht,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ht,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function TC(l){this.autoStart=l!==void 0?l:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function IC(){oe.call(this),this.type="AudioListener",this.context=gw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new TC}function Vy(l){oe.call(this),this.type="Audio",this.listener=l,this.context=l.context,this.gain=this.context.createGain(),this.gain.connect(l.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.loopEnd=this.loopStart=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._progress=this._startedAt=0,this.filters=[]}function EC(l){Vy.call(this,l),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function bC(l,t){this.analyser=l.context.createAnalyser(),this.analyser.fftSize=t!==void 0?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),l.getOutput().connect(this.analyser)}function LC(l,t,i){switch(this.binding=l,this.valueSize=i,t){case"quaternion":l=this._slerp,t=this._slerpAdditive;var d=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":t=l=this._select,d=this._setAdditiveIdentityOther,this.buffer=Array(5*i);break;default:l=this._lerp,t=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=l,this._mixBufferRegionAdditive=t,this._setIdentity=d,this._origIndex=3,this._addIndex=4,this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}function t_(l,t,i){i=i||Fc.parseTrackName(t),this._targetGroup=l,this._bindings=l.subscribe_(t,i)}function Fc(l,t,i){this.path=t,this.parsedPath=i||Fc.parseTrackName(t),this.node=Fc.findNode(l,this.parsedPath.nodeName)||l,this.rootNode=l}function r_(){this.uuid=ho.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var l={};this._indicesByUUID=l;for(var t=0,i=arguments.length;t!==i;++t)l[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var d=this;this.stats={objects:{get total(){return d._objects.length},get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function n_(l,t,i,d){this._mixer=l,this._clip=t,this._localRoot=i||null,this.blendMode=d||t.blendMode,l=t.tracks,t=l.length,i=Array(t),d={endingStart:2400,endingEnd:2400};for(var v=0;v!==t;++v){var w=l[v].createInterpolant(null);i[v]=w,w.settings=d}this._interpolantSettings=d,this._interpolants=i,this._propertyBindings=Array(t),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function PC(l){this._root=l,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function QA(l,t){typeof l=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),l=t),this.value=l}function RC(l,t,i){km.call(this,l,t),this.meshPerAttribute=i||1}function OC(l,t,i,d){this.ray=new et(l,t),this.near=i||0,this.far=d||Infinity,this.camera=null,this.layers=new ne,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Zr(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function i_(l,t){return l.distance-t.distance}function DC(l,t,i,d){if(l.layers.test(t.layers)&&l.raycast(t,i),d===!0){l=l.children,d=0;for(var v=l.length;d<v;d++)DC(l[d],t,i,!0)}}function o_(l,t,i){return this.radius=l!==void 0?l:1,this.phi=t!==void 0?t:0,this.theta=i!==void 0?i:0,this}function a_(l,t,i){return this.radius=l!==void 0?l:1,this.theta=t!==void 0?t:0,this.y=i!==void 0?i:0,this}function FC(l,t){this.min=l!==void 0?l:new u(Infinity,Infinity),this.max=t!==void 0?t:new u(-Infinity,-Infinity)}function NC(l,t){this.start=l!==void 0?l:new z,this.end=t!==void 0?t:new z}function xx(l){oe.call(this),this.material=l,this.render=function(){},this.hasUvs=this.hasColors=this.hasNormals=this.hasPositions=!1,this.uvArray=this.colorArray=this.normalArray=this.positionArray=null,this.count=0}function Wy(l,t){oe.call(this),this.light=l,this.light.updateMatrixWorld(),this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,l=new Fe,t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,d=1;32>i;i++,d++){var v=i/32*Math.PI*2,w=d/32*Math.PI*2;t.push(Math.cos(v),Math.sin(v),1,Math.cos(w),Math.sin(w),1)}l.setAttribute("position",new Me(t,3)),t=new Fs({fog:!1,toneMapped:!1}),this.cone=new Js(l,t),this.add(this.cone),this.update()}function s_(l){var t=[];l&&l.isBone&&t.push(l);for(var i=0;i<l.children.length;i++)t.push.apply(t,s_(l.children[i]));return t}function G0(l){for(var t=s_(l),i=new Fe,d=[],v=[],w=new We(0,0,1),T=new We(0,1,0),b=0;b<t.length;b++){var D=t[b];D.parent&&D.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),v.push(w.r,w.g,w.b),v.push(T.r,T.g,T.b))}i.setAttribute("position",new Me(d,3)),i.setAttribute("color",new Me(v,3)),d=new Fs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),Js.call(this,i,d),this.type="SkeletonHelper",this.root=l,this.bones=t,this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1}function Xy(l,t,i){this.light=l,this.light.updateMatrixWorld(),this.color=i,l=new P0(t,4,2),t=new gn({wireframe:!0,fog:!1,toneMapped:!1}),Ve.call(this,l,t),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Yy(l,t,i){oe.call(this),this.light=l,this.light.updateMatrixWorld(),this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,l=new E0(t),l.rotateY(.5*Math.PI),this.material=new gn({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0),t=l.getAttribute("position"),t=new Float32Array(3*t.count),l.setAttribute("color",new tr(t,3)),this.add(new Ve(l,this.material)),this.update()}function $A(l,t,i,d){l=l||10,t=t||10,i=new We(i!==void 0?i:4473924),d=new We(d!==void 0?d:8947848);var v=t/2,w=l/t,T=l/2;l=[];for(var b=[],D=0,G=0,Y=-T;D<=t;D++,Y+=w){l.push(-T,0,Y,T,0,Y),l.push(Y,0,-T,Y,0,T);var re=D===v?i:d;re.toArray(b,G),G+=3,re.toArray(b,G),G+=3,re.toArray(b,G),G+=3,re.toArray(b,G),G+=3}t=new Fe,t.setAttribute("position",new Me(l,3)),t.setAttribute("color",new Me(b,3)),i=new Fs({vertexColors:!0,toneMapped:!1}),Js.call(this,t,i),this.type="GridHelper"}function e2(l,t,i,d,v,w){l=l||10,t=t||16,i=i||8,d=d||64,v=new We(v!==void 0?v:4473924),w=new We(w!==void 0?w:8947848);var T=[],b=[],D;for(D=0;D<=t;D++){var G=D/t*2*Math.PI,Y=Math.sin(G)*l;G=Math.cos(G)*l,T.push(0,0,0),T.push(Y,0,G);var re=D&1?v:w;b.push(re.r,re.g,re.b),b.push(re.r,re.g,re.b)}for(D=0;D<=i;D++){re=D&1?v:w;var se=l-l/i*D;for(t=0;t<d;t++)G=t/d*2*Math.PI,Y=Math.sin(G)*se,G=Math.cos(G)*se,T.push(Y,0,G),b.push(re.r,re.g,re.b),G=(t+1)/d*2*Math.PI,Y=Math.sin(G)*se,G=Math.cos(G)*se,T.push(Y,0,G),b.push(re.r,re.g,re.b)}l=new Fe,l.setAttribute("position",new Me(T,3)),l.setAttribute("color",new Me(b,3)),T=new Fs({vertexColors:!0,toneMapped:!1}),Js.call(this,l,T),this.type="PolarGridHelper"}function Zy(l,t,i){oe.call(this),this.light=l,this.light.updateMatrixWorld(),this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1),l=new Fe,l.setAttribute("position",new Me([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),t=new Fs({fog:!1,toneMapped:!1}),this.lightPlane=new jf(l,t),this.add(this.lightPlane),l=new Fe,l.setAttribute("position",new Me([0,0,0,0,0,1],3)),this.targetLine=new jf(l,t),this.add(this.targetLine),this.update()}function Ax(l){function t(ae,fe,ve){i(ae,ve),i(fe,ve)}function i(ae,fe){w.push(0,0,0),T.push(fe.r,fe.g,fe.b),b[ae]===void 0&&(b[ae]=[]),b[ae].push(w.length/3-1)}var d=new Fe,v=new Fs({color:16777215,vertexColors:!0,toneMapped:!1}),w=[],T=[],b={},D=new We(16755200),G=new We(16711680),Y=new We(43775),re=new We(16777215),se=new We(3355443);t("n1","n2",D),t("n2","n4",D),t("n4","n3",D),t("n3","n1",D),t("f1","f2",D),t("f2","f4",D),t("f4","f3",D),t("f3","f1",D),t("n1","f1",D),t("n2","f2",D),t("n3","f3",D),t("n4","f4",D),t("p","n1",G),t("p","n2",G),t("p","n3",G),t("p","n4",G),t("u1","u2",Y),t("u2","u3",Y),t("u3","u1",Y),t("c","t",re),t("p","c",se),t("cn1","cn2",se),t("cn3","cn4",se),t("cf1","cf2",se),t("cf3","cf4",se),d.setAttribute("position",new Me(w,3)),d.setAttribute("color",new Me(T,3)),Js.call(this,d,v),this.type="CameraHelper",this.camera=l,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=b,this.update()}function Ml(l,t,i,d,v,w,T){if(b2.set(v,w,T).unproject(d),l=t[l],l!==void 0)for(i=i.getAttribute("position"),t=0,d=l.length;t<d;t++)i.setXYZ(l[t],b2.x,b2.y,b2.z)}function Vm(l,t){this.object=l,t===void 0&&(t=16776960),l=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),d=new Fe;d.setIndex(new tr(l,1)),d.setAttribute("position",new tr(i,3)),Js.call(this,d,new Fs({color:t,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function Cx(l,t){this.type="Box3Helper",this.box=l,t=t||16776960,l=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Fe;i.setIndex(new tr(l,1)),i.setAttribute("position",new Me([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Js.call(this,i,new Fs({color:t,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function wx(l,t,i){this.plane=l,this.size=t===void 0?1:t,l=i!==void 0?i:16776960,t=new Fe,t.setAttribute("position",new Me([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),t.computeBoundingSphere(),jf.call(this,t,new Fs({color:l,toneMapped:!1})),this.type="PlaneHelper",t=new Fe,t.setAttribute("position",new Me([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),t.computeBoundingSphere(),this.add(new Ve(t,new gn({color:l,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function Wm(l,t,i,d,v,w){oe.call(this),this.type="ArrowHelper",l===void 0&&(l=new z(0,0,1)),t===void 0&&(t=new z(0,0,0)),i===void 0&&(i=1),d===void 0&&(d=16776960),v===void 0&&(v=.2*i),w===void 0&&(w=.2*v),P2===void 0&&(P2=new Fe,P2.setAttribute("position",new Me([0,0,0,0,1,0],3)),vw=new Hm(0,.5,1,5,1),vw.translate(0,-.5,0)),this.position.copy(t),this.line=new jf(P2,new Fs({color:d,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ve(vw,new gn({color:d,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(l),this.setLength(i,v,w)}function _x(l){l=l||1;var t=[0,0,0,l,0,0,0,0,0,0,l,0,0,0,0,0,0,l];l=new Fe,l.setAttribute("position",new Me(t,3)),l.setAttribute("color",new Me([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),t=new Fs({vertexColors:!0,toneMapped:!1}),Js.call(this,l,t),this.type="AxesHelper"}function BC(l){this._renderer=l,this._pingPongRenderTarget=null,l=new Float32Array(20);var t=new z(0,1,0);l=new Gm({defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:l},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:kg[3e3]},outputEncoding:{value:kg[3e3]}},vertexShader:UC(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

`+kC()+`

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:0,depthTest:!1,depthWrite:!1}),l.type="SphericalGaussianBlur",this._blurMaterial=l,this._cubemapShader=this._equirectShader=null,this._compileMaterial(this._blurMaterial)}function l_(l){return l=new S(3*Ug,3*Ug,l),l.texture.mapping=306,l.texture.name="PMREM.cubeUv",l.scissorTest=!0,l}function zC(l,t,i,d,v){l.viewport.set(t,i,d,v),l.scissor.set(t,i,d,v)}function u_(){var l=new u(1,1);return l=new Gm({uniforms:{envMap:{value:null},texelSize:{value:l},inputEncoding:{value:kg[3e3]},outputEncoding:{value:kg[3e3]}},vertexShader:UC(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

`+kC()+`

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:0,depthTest:!1,depthWrite:!1}),l.type="EquirectangularToCubeUV",l}function c_(){var l=new Gm({uniforms:{envMap:{value:null},inputEncoding:{value:kg[3e3]},outputEncoding:{value:kg[3e3]}},vertexShader:UC(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

`+kC()+`

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:0,depthTest:!1,depthWrite:!1});return l.type="CubemapToCubeUV",l}function UC(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function kC(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function h_(l){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Dc.call(this,l),this.type="catmullrom",this.closed=!0}function f_(l){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Dc.call(this,l),this.type="catmullrom"}function HC(l){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Dc.call(this,l),this.type="catmullrom"}Ro===void 0&&(Number.EPSILON=Math.pow(2,-52)),ol===void 0&&(Number.isInteger=function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}),Ms===void 0&&(Math.sign=function(l){return 0>l?-1:0<l?1:+l}),!("name"in Function.prototype)&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Ce===void 0&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(l),i=1;i<arguments.length;i++){var d=arguments[i];if(d!=null)for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(t[v]=d[v])}return t}),Ce(a.prototype,{addEventListener:function(t,i){this._listeners===void 0&&(this._listeners={});var d=this._listeners;d[t]===void 0&&(d[t]=[]),d[t].indexOf(i)===-1&&d[t].push(i)},hasEventListener:function(t,i){if(this._listeners===void 0)return!1;var d=this._listeners;return d[t]!==void 0&&d[t].indexOf(i)!==-1},removeEventListener:function(t,i){this._listeners!==void 0&&(t=this._listeners[t],t!==void 0&&(i=t.indexOf(i),i!==-1&&t.splice(i,1)))},dispatchEvent:function(t){if(this._listeners!==void 0){var i=this._listeners[t.type];if(i!==void 0){t.target=this,i=i.slice(0);for(var d=0,v=i.length;d<v;d++)i[d].call(this,t)}}}});for(var hc=[],Mx=0;256>Mx;Mx++)hc[Mx]=(16>Mx?"0":"")+Mx.toString(16);var ho={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,d=4294967295*Math.random()|0,v=4294967295*Math.random()|0;return(hc[t&255]+hc[t>>8&255]+hc[t>>16&255]+hc[t>>24&255]+"-"+hc[i&255]+hc[i>>8&255]+"-"+hc[i>>16&15|64]+hc[i>>24&255]+"-"+hc[d&63|128]+hc[d>>8&255]+"-"+hc[d>>16&255]+hc[d>>24&255]+hc[v&255]+hc[v>>8&255]+hc[v>>16&255]+hc[v>>24&255]).toUpperCase()},clamp:function(t,i,d){return Math.max(i,Math.min(d,t))},euclideanModulo:function(t,i){return(t%i+i)%i},mapLinear:function(t,i,d,v,w){return v+(t-i)*(w-v)/(d-i)},lerp:function(t,i,d){return(1-d)*t+d*i},smoothstep:function(t,i,d){return t<=i?0:t>=d?1:(t=(t-i)/(d-i),t*t*(3-2*t))},smootherstep:function(t,i,d){return t<=i?0:t>=d?1:(t=(t-i)/(d-i),t*t*t*(t*(6*t-15)+10))},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*ho.DEG2RAD},radToDeg:function(t){return t*ho.RAD2DEG},isPowerOfTwo:function(t){return(t&t-1)==0&&t!==0},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,d,v,w){var T=Math.cos,b=Math.sin,D=T(d/2);d=b(d/2);var G=T((i+v)/2),Y=b((i+v)/2),re=T((i-v)/2),se=b((i-v)/2);switch(T=T((v-i)/2),i=b((v-i)/2),w){case"XYX":t.set(D*Y,d*re,d*se,D*G);break;case"YZY":t.set(d*se,D*Y,d*re,D*G);break;case"ZXZ":t.set(d*re,d*se,D*Y,D*G);break;case"XZX":t.set(D*Y,d*i,d*T,D*G);break;case"YXY":t.set(d*T,D*Y,d*i,D*G);break;case"ZYZ":t.set(d*i,d*T,D*Y,D*G);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+w)}}};Zr(u.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Ce(u.prototype,{isVector2:!0,set:function(t,i){return this.x=t,this.y=i,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,i){return i!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this},sub:function(t,i){return i!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var i=this.x,d=this.y;return t=t.elements,this.x=t[0]*i+t[3]*d+t[6],this.y=t[1]*i+t[4]*d+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this},clampScalar:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this},clampLength:function(t,i){var d=this.length();return this.divideScalar(d||1).multiplyScalar(Math.max(t,Math.min(i,d)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x;return t=this.y-t.y,i*i+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this},lerpVectors:function(t,i,d){return this.x=t.x+(i.x-t.x)*d,this.y=t.y+(i.y-t.y)*d,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,i){return i===void 0&&(i=0),this.x=t[i],this.y=t[i+1],this},toArray:function(t,i){return t===void 0&&(t=[]),i===void 0&&(i=0),t[i]=this.x,t[i+1]=this.y,t},fromBufferAttribute:function(t,i,d){return d!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this},rotateAround:function(t,i){var d=Math.cos(i);i=Math.sin(i);var v=this.x-t.x,w=this.y-t.y;return this.x=v*d-w*i+t.x,this.y=v*i+w*d+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Ce(p.prototype,{isMatrix3:!0,set:function(t,i,d,v,w,T,b,D,G){var Y=this.elements;return Y[0]=t,Y[1]=v,Y[2]=b,Y[3]=i,Y[4]=w,Y[5]=D,Y[6]=d,Y[7]=T,Y[8]=G,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(t){var i=this.elements;return t=t.elements,i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},extractBasis:function(t,i,d){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),d.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,i){var d=t.elements,v=i.elements;i=this.elements,t=d[0];var w=d[3],T=d[6],b=d[1],D=d[4],G=d[7],Y=d[2],re=d[5];d=d[8];var se=v[0],ae=v[3],fe=v[6],ve=v[1],Ze=v[4],ht=v[7],ct=v[2],mt=v[5];return v=v[8],i[0]=t*se+w*ve+T*ct,i[3]=t*ae+w*Ze+T*mt,i[6]=t*fe+w*ht+T*v,i[1]=b*se+D*ve+G*ct,i[4]=b*ae+D*Ze+G*mt,i[7]=b*fe+D*ht+G*v,i[2]=Y*se+re*ve+d*ct,i[5]=Y*ae+re*Ze+d*mt,i[8]=Y*fe+re*ht+d*v,this},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this},determinant:function(){var t=this.elements,i=t[0],d=t[1],v=t[2],w=t[3],T=t[4],b=t[5],D=t[6],G=t[7];return t=t[8],i*T*t-i*b*G-d*w*t+d*b*D+v*w*G-v*T*D},getInverse:function(t,i){i!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var d=t.elements;t=this.elements,i=d[0];var v=d[1],w=d[2],T=d[3],b=d[4],D=d[5],G=d[6],Y=d[7];d=d[8];var re=d*b-D*Y,se=D*G-d*T,ae=Y*T-b*G,fe=i*re+v*se+w*ae;return fe===0?this.set(0,0,0,0,0,0,0,0,0):(fe=1/fe,t[0]=re*fe,t[1]=(w*Y-d*v)*fe,t[2]=(D*v-w*b)*fe,t[3]=se*fe,t[4]=(d*i-w*G)*fe,t[5]=(w*T-D*i)*fe,t[6]=ae*fe,t[7]=(v*G-Y*i)*fe,t[8]=(b*i-v*T)*fe,this)},transpose:function(){var t=this.elements,i=t[1];return t[1]=t[3],t[3]=i,i=t[2],t[2]=t[6],t[6]=i,i=t[5],t[5]=t[7],t[7]=i,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this},setUvTransform:function(t,i,d,v,w,T,b){var D=Math.cos(w);w=Math.sin(w),this.set(d*D,d*w,-d*(D*T+w*b)+T+t,-v*w,v*D,-v*(-w*T+D*b)+b+i,0,0,1)},scale:function(t,i){var d=this.elements;return d[0]*=t,d[3]*=t,d[6]*=t,d[1]*=i,d[4]*=i,d[7]*=i,this},rotate:function(t){var i=Math.cos(t);t=Math.sin(t);var d=this.elements,v=d[0],w=d[3],T=d[6],b=d[1],D=d[4],G=d[7];return d[0]=i*v+t*b,d[3]=i*w+t*D,d[6]=i*T+t*G,d[1]=-t*v+i*b,d[4]=-t*w+i*D,d[7]=-t*T+i*G,this},translate:function(t,i){var d=this.elements;return d[0]+=t*d[2],d[3]+=t*d[5],d[6]+=t*d[8],d[1]+=i*d[2],d[4]+=i*d[5],d[7]+=i*d[8],this},equals:function(t){var i=this.elements;t=t.elements;for(var d=0;9>d;d++)if(i[d]!==t[d])return!1;return!0},fromArray:function(t,i){i===void 0&&(i=0);for(var d=0;9>d;d++)this.elements[d]=t[d+i];return this},toArray:function(t,i){t===void 0&&(t=[]),i===void 0&&(i=0);var d=this.elements;return t[i]=d[0],t[i+1]=d[1],t[i+2]=d[2],t[i+3]=d[3],t[i+4]=d[4],t[i+5]=d[5],t[i+6]=d[6],t[i+7]=d[7],t[i+8]=d[8],t}});var Ky,Jv={getDataURL:function(t){if(typeof HTMLCanvasElement=="undefined")return t.src;if(!(t instanceof HTMLCanvasElement)){Ky===void 0&&(Ky=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ky.width=t.width,Ky.height=t.height;var i=Ky.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),t=Ky}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},yS=0;y.DEFAULT_IMAGE=void 0,y.DEFAULT_MAPPING=300,y.prototype=Ce(me(a.prototype),{constructor:y,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];var d={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var v=this.image;if(v.uuid===void 0&&(v.uuid=ho.generateUUID()),!i&&t.images[v.uuid]===void 0){if(Array.isArray(v))for(var w=[],T=0,b=v.length;T<b;T++)w.push(Jv.getDataURL(v[T]));else w=Jv.getDataURL(v);t.images[v.uuid]={uuid:v.uuid,url:w}}d.image=v.uuid}return i||(t.textures[this.uuid]=d),d},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==300)return t;if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=Math.abs(Math.floor(t.x)%2)===1?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=Math.abs(Math.floor(t.y)%2)===1?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(y.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Zr(C.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Ce(C.prototype,{isVector4:!0,set:function(t,i,d,v){return this.x=t,this.y=i,this.z=d,this.w=v,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this},add:function(t,i){return i!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this},sub:function(t,i){return i!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var i=this.x,d=this.y,v=this.z,w=this.w;return t=t.elements,this.x=t[0]*i+t[4]*d+t[8]*v+t[12]*w,this.y=t[1]*i+t[5]*d+t[9]*v+t[13]*w,this.z=t[2]*i+t[6]*d+t[10]*v+t[14]*w,this.w=t[3]*i+t[7]*d+t[11]*v+t[15]*w,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var i=Math.sqrt(1-t.w*t.w);return 1e-4>i?(this.x=1,this.z=this.y=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this},setAxisAngleFromRotationMatrix:function(t){t=t.elements;var i=t[0],d=t[4],v=t[8],w=t[1],T=t[5],b=t[9],D=t[2],G=t[6],Y=t[10];return .01>Math.abs(d-w)&&.01>Math.abs(v-D)&&.01>Math.abs(b-G)?.1>Math.abs(d+w)&&.1>Math.abs(v+D)&&.1>Math.abs(b+G)&&.1>Math.abs(i+T+Y-3)?(this.set(1,0,0,0),this):(t=Math.PI,i=(i+1)/2,T=(T+1)/2,Y=(Y+1)/2,d=(d+w)/4,v=(v+D)/4,b=(b+G)/4,i>T&&i>Y?.01>i?(G=0,d=D=.707106781):(G=Math.sqrt(i),D=d/G,d=v/G):T>Y?.01>T?(G=.707106781,D=0,d=.707106781):(D=Math.sqrt(T),G=d/D,d=b/D):.01>Y?(D=G=.707106781,d=0):(d=Math.sqrt(Y),G=v/d,D=b/d),this.set(G,D,d,t),this):(t=Math.sqrt((G-b)*(G-b)+(v-D)*(v-D)+(w-d)*(w-d)),.001>Math.abs(t)&&(t=1),this.x=(G-b)/t,this.y=(v-D)/t,this.z=(w-d)/t,this.w=Math.acos((i+T+Y-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this},clampScalar:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this},clampLength:function(t,i){var d=this.length();return this.divideScalar(d||1).multiplyScalar(Math.max(t,Math.min(i,d)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this},lerpVectors:function(t,i,d){return this.x=t.x+(i.x-t.x)*d,this.y=t.y+(i.y-t.y)*d,this.z=t.z+(i.z-t.z)*d,this.w=t.w+(i.w-t.w)*d,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,i){return i===void 0&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this},toArray:function(t,i){return t===void 0&&(t=[]),i===void 0&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t},fromBufferAttribute:function(t,i,d){return d!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),S.prototype=Ce(me(a.prototype),{constructor:S,isWebGLRenderTarget:!0,setSize:function(t,i){(this.width!==t||this.height!==i)&&(this.width=t,this.height=i,this.texture.image.width=t,this.texture.image.height=i,this.dispose()),this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),R.prototype=Ce(me(S.prototype),{constructor:R,isWebGLMultisampleRenderTarget:!0,copy:function(t){return S.prototype.copy.call(this,t),this.samples=t.samples,this}}),Ce(N,{slerp:function(t,i,d,v){return d.copy(t).slerp(i,v)},slerpFlat:function(t,i,d,v,w,T,b){var D=d[v+0],G=d[v+1],Y=d[v+2];d=d[v+3],v=w[T+0];var re=w[T+1],se=w[T+2];if(w=w[T+3],d!==w||D!==v||G!==re||Y!==se){T=1-b;var ae=D*v+G*re+Y*se+d*w,fe=0<=ae?1:-1,ve=1-ae*ae;ve>Ro&&(ve=Math.sqrt(ve),ae=Math.atan2(ve,ae*fe),T=Math.sin(T*ae)/ve,b=Math.sin(b*ae)/ve),fe*=b,D=D*T+v*fe,G=G*T+re*fe,Y=Y*T+se*fe,d=d*T+w*fe,T===1-b&&(b=1/Math.sqrt(D*D+G*G+Y*Y+d*d),D*=b,G*=b,Y*=b,d*=b)}t[i]=D,t[i+1]=G,t[i+2]=Y,t[i+3]=d},multiplyQuaternionsFlat:function(t,i,d,v,w,T){var b=d[v],D=d[v+1],G=d[v+2];d=d[v+3],v=w[T];var Y=w[T+1],re=w[T+2];return w=w[T+3],t[i]=b*w+d*v+D*re-G*Y,t[i+1]=D*w+d*Y+G*v-b*re,t[i+2]=G*w+d*re+b*Y-D*v,t[i+3]=d*w-b*v-D*Y-G*re,t}}),Zr(N.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Ce(N.prototype,{isQuaternion:!0,set:function(t,i,d,v){return this._x=t,this._y=i,this._z=d,this._w=v,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,i){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var d=t._x,v=t._y,w=t._z;t=t.order;var T=Math.cos,b=Math.sin,D=T(d/2),G=T(v/2);switch(T=T(w/2),d=b(d/2),v=b(v/2),w=b(w/2),t){case"XYZ":this._x=d*G*T+D*v*w,this._y=D*v*T-d*G*w,this._z=D*G*w+d*v*T,this._w=D*G*T-d*v*w;break;case"YXZ":this._x=d*G*T+D*v*w,this._y=D*v*T-d*G*w,this._z=D*G*w-d*v*T,this._w=D*G*T+d*v*w;break;case"ZXY":this._x=d*G*T-D*v*w,this._y=D*v*T+d*G*w,this._z=D*G*w+d*v*T,this._w=D*G*T-d*v*w;break;case"ZYX":this._x=d*G*T-D*v*w,this._y=D*v*T+d*G*w,this._z=D*G*w-d*v*T,this._w=D*G*T+d*v*w;break;case"YZX":this._x=d*G*T+D*v*w,this._y=D*v*T+d*G*w,this._z=D*G*w-d*v*T,this._w=D*G*T-d*v*w;break;case"XZY":this._x=d*G*T-D*v*w,this._y=D*v*T-d*G*w,this._z=D*G*w+d*v*T,this._w=D*G*T+d*v*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+t)}return i!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(t,i){i/=2;var d=Math.sin(i);return this._x=t.x*d,this._y=t.y*d,this._z=t.z*d,this._w=Math.cos(i),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var i=t.elements,d=i[0];t=i[4];var v=i[8],w=i[1],T=i[5],b=i[9],D=i[2],G=i[6];i=i[10];var Y=d+T+i;return 0<Y?(d=.5/Math.sqrt(Y+1),this._w=.25/d,this._x=(G-b)*d,this._y=(v-D)*d,this._z=(w-t)*d):d>T&&d>i?(d=2*Math.sqrt(1+d-T-i),this._w=(G-b)/d,this._x=.25*d,this._y=(t+w)/d,this._z=(v+D)/d):T>i?(d=2*Math.sqrt(1+T-d-i),this._w=(v-D)/d,this._x=(t+w)/d,this._y=.25*d,this._z=(b+G)/d):(d=2*Math.sqrt(1+i-d-T),this._w=(w-t)/d,this._x=(v+D)/d,this._y=(b+G)/d,this._z=.25*d),this._onChangeCallback(),this},setFromUnitVectors:function(t,i){var d=t.dot(i)+1;return 1e-6>d?(d=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x),this._w=d,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(ho.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,i){var d=this.angleTo(t);return d===0?this:(this.slerp(t,Math.min(1,i/d)),this)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return t===0?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this._onChangeCallback(),this},multiply:function(t,i){return i!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,i){var d=t._x,v=t._y,w=t._z;t=t._w;var T=i._x,b=i._y,D=i._z;return i=i._w,this._x=d*i+t*T+v*D-w*b,this._y=v*i+t*b+w*T-d*D,this._z=w*i+t*D+d*b-v*T,this._w=t*i-d*T-v*b-w*D,this._onChangeCallback(),this},slerp:function(t,i){if(i===0)return this;if(i===1)return this.copy(t);var d=this._x,v=this._y,w=this._z,T=this._w,b=T*t._w+d*t._x+v*t._y+w*t._z;if(0>b?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,b=-b):this.copy(t),1<=b)return this._w=T,this._x=d,this._y=v,this._z=w,this;if(t=1-b*b,t<=Ro)return b=1-i,this._w=b*T+i*this._w,this._x=b*d+i*this._x,this._y=b*v+i*this._y,this._z=b*w+i*this._z,this.normalize(),this._onChangeCallback(),this;t=Math.sqrt(t);var D=Math.atan2(t,b);return b=Math.sin((1-i)*D)/t,i=Math.sin(i*D)/t,this._w=T*b+this._w*i,this._x=d*b+this._x*i,this._y=v*b+this._y*i,this._z=w*b+this._z*i,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,i){return i===void 0&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this},toArray:function(t,i){return t===void 0&&(t=[]),i===void 0&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},fromBufferAttribute:function(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var GC=new z,d_=new N;Ce(z.prototype,{isVector3:!0,set:function(t,i,d){return this.x=t,this.y=i,this.z=d,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,i){return i!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},sub:function(t,i){return i!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},multiply:function(t,i){return i!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(d_.setFromEuler(t))},applyAxisAngle:function(t,i){return this.applyQuaternion(d_.setFromAxisAngle(t,i))},applyMatrix3:function(t){var i=this.x,d=this.y,v=this.z;return t=t.elements,this.x=t[0]*i+t[3]*d+t[6]*v,this.y=t[1]*i+t[4]*d+t[7]*v,this.z=t[2]*i+t[5]*d+t[8]*v,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var i=this.x,d=this.y,v=this.z;t=t.elements;var w=1/(t[3]*i+t[7]*d+t[11]*v+t[15]);return this.x=(t[0]*i+t[4]*d+t[8]*v+t[12])*w,this.y=(t[1]*i+t[5]*d+t[9]*v+t[13])*w,this.z=(t[2]*i+t[6]*d+t[10]*v+t[14])*w,this},applyQuaternion:function(t){var i=this.x,d=this.y,v=this.z,w=t.x,T=t.y,b=t.z;t=t.w;var D=t*i+T*v-b*d,G=t*d+b*i-w*v,Y=t*v+w*d-T*i;return i=-w*i-T*d-b*v,this.x=D*t+i*-w+G*-b-Y*-T,this.y=G*t+i*-T+Y*-w-D*-b,this.z=Y*t+i*-b+D*-T-G*-w,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var i=this.x,d=this.y,v=this.z;return t=t.elements,this.x=t[0]*i+t[4]*d+t[8]*v,this.y=t[1]*i+t[5]*d+t[9]*v,this.z=t[2]*i+t[6]*d+t[10]*v,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this},clampScalar:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this},clampLength:function(t,i){var d=this.length();return this.divideScalar(d||1).multiplyScalar(Math.max(t,Math.min(i,d)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},lerpVectors:function(t,i,d){return this.x=t.x+(i.x-t.x)*d,this.y=t.y+(i.y-t.y)*d,this.z=t.z+(i.z-t.z)*d,this},cross:function(t,i){return i!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)},crossVectors:function(t,i){var d=t.x,v=t.y;t=t.z;var w=i.x,T=i.y;return i=i.z,this.x=v*i-t*T,this.y=t*w-d*i,this.z=d*T-v*w,this},projectOnVector:function(t){var i=t.lengthSq();return i===0?this.set(0,0,0):(i=t.dot(this)/i,this.copy(t).multiplyScalar(i))},projectOnPlane:function(t){return GC.copy(this).projectOnVector(t),this.sub(GC)},reflect:function(t){return this.sub(GC.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());return i===0?Math.PI/2:(t=this.dot(t)/i,Math.acos(ho.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,d=this.y-t.y;return t=this.z-t.z,i*i+d*d+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,i,d){var v=Math.sin(i)*t;return this.x=v*Math.sin(d),this.y=Math.cos(i)*t,this.z=v*Math.cos(d),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,i,d){return this.x=t*Math.sin(i),this.y=d,this.z=t*Math.cos(i),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var i=this.setFromMatrixColumn(t,0).length(),d=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=i,this.y=d,this.z=t,this},setFromMatrixColumn:function(t,i){return this.fromArray(t.elements,4*i)},setFromMatrix3Column:function(t,i){return this.fromArray(t.elements,3*i)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,i){return i===void 0&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},toArray:function(t,i){return t===void 0&&(t=[]),i===void 0&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t},fromBufferAttribute:function(t,i,d){return d!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Jy=new z,Hp=new Z,xS=new z(0,0,0),AS=new z(1,1,1),qv=new z,t2=new z,Xf=new z;Ce(Z.prototype,{isMatrix4:!0,set:function(t,i,d,v,w,T,b,D,G,Y,re,se,ae,fe,ve,Ze){var ht=this.elements;return ht[0]=t,ht[4]=i,ht[8]=d,ht[12]=v,ht[1]=w,ht[5]=T,ht[9]=b,ht[13]=D,ht[2]=G,ht[6]=Y,ht[10]=re,ht[14]=se,ht[3]=ae,ht[7]=fe,ht[11]=ve,ht[15]=Ze,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Z().fromArray(this.elements)},copy:function(t){var i=this.elements;return t=t.elements,i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this},copyPosition:function(t){var i=this.elements;return t=t.elements,i[12]=t[12],i[13]=t[13],i[14]=t[14],this},extractBasis:function(t,i,d){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),d.setFromMatrixColumn(this,2),this},makeBasis:function(t,i,d){return this.set(t.x,i.x,d.x,0,t.y,i.y,d.y,0,t.z,i.z,d.z,0,0,0,0,1),this},extractRotation:function(t){var i=this.elements,d=t.elements,v=1/Jy.setFromMatrixColumn(t,0).length(),w=1/Jy.setFromMatrixColumn(t,1).length();return t=1/Jy.setFromMatrixColumn(t,2).length(),i[0]=d[0]*v,i[1]=d[1]*v,i[2]=d[2]*v,i[3]=0,i[4]=d[4]*w,i[5]=d[5]*w,i[6]=d[6]*w,i[7]=0,i[8]=d[8]*t,i[9]=d[9]*t,i[10]=d[10]*t,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=this.elements,d=t.x,v=t.y,w=t.z,T=Math.cos(d);d=Math.sin(d);var b=Math.cos(v);v=Math.sin(v);var D=Math.cos(w);if(w=Math.sin(w),t.order==="XYZ"){t=T*D;var G=T*w,Y=d*D,re=d*w;i[0]=b*D,i[4]=-b*w,i[8]=v,i[1]=G+Y*v,i[5]=t-re*v,i[9]=-d*b,i[2]=re-t*v,i[6]=Y+G*v,i[10]=T*b}else t.order==="YXZ"?(t=b*D,G=b*w,Y=v*D,re=v*w,i[0]=t+re*d,i[4]=Y*d-G,i[8]=T*v,i[1]=T*w,i[5]=T*D,i[9]=-d,i[2]=G*d-Y,i[6]=re+t*d,i[10]=T*b):t.order==="ZXY"?(t=b*D,G=b*w,Y=v*D,re=v*w,i[0]=t-re*d,i[4]=-T*w,i[8]=Y+G*d,i[1]=G+Y*d,i[5]=T*D,i[9]=re-t*d,i[2]=-T*v,i[6]=d,i[10]=T*b):t.order==="ZYX"?(t=T*D,G=T*w,Y=d*D,re=d*w,i[0]=b*D,i[4]=Y*v-G,i[8]=t*v+re,i[1]=b*w,i[5]=re*v+t,i[9]=G*v-Y,i[2]=-v,i[6]=d*b,i[10]=T*b):t.order==="YZX"?(t=T*b,G=T*v,Y=d*b,re=d*v,i[0]=b*D,i[4]=re-t*w,i[8]=Y*w+G,i[1]=w,i[5]=T*D,i[9]=-d*D,i[2]=-v*D,i[6]=G*w+Y,i[10]=t-re*w):t.order==="XZY"&&(t=T*b,G=T*v,Y=d*b,re=d*v,i[0]=b*D,i[4]=-w,i[8]=v*D,i[1]=t*w+re,i[5]=T*D,i[9]=G*w-Y,i[2]=Y*w-G,i[6]=d*D,i[10]=re*w+t);return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(xS,t,AS)},lookAt:function(t,i,d){var v=this.elements;return Xf.subVectors(t,i),Xf.lengthSq()===0&&(Xf.z=1),Xf.normalize(),qv.crossVectors(d,Xf),qv.lengthSq()===0&&(Math.abs(d.z)===1?Xf.x+=1e-4:Xf.z+=1e-4,Xf.normalize(),qv.crossVectors(d,Xf)),qv.normalize(),t2.crossVectors(Xf,qv),v[0]=qv.x,v[4]=t2.x,v[8]=Xf.x,v[1]=qv.y,v[5]=t2.y,v[9]=Xf.y,v[2]=qv.z,v[6]=t2.z,v[10]=Xf.z,this},multiply:function(t,i){return i!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,i){var d=t.elements,v=i.elements;i=this.elements,t=d[0];var w=d[4],T=d[8],b=d[12],D=d[1],G=d[5],Y=d[9],re=d[13],se=d[2],ae=d[6],fe=d[10],ve=d[14],Ze=d[3],ht=d[7],ct=d[11];d=d[15];var mt=v[0],Mt=v[4],$t=v[8],Bt=v[12],wt=v[1],Mr=v[5],Ot=v[9],Hr=v[13],rn=v[2],Sr=v[6],$n=v[10],sn=v[14],Wn=v[3],to=v[7],si=v[11];return v=v[15],i[0]=t*mt+w*wt+T*rn+b*Wn,i[4]=t*Mt+w*Mr+T*Sr+b*to,i[8]=t*$t+w*Ot+T*$n+b*si,i[12]=t*Bt+w*Hr+T*sn+b*v,i[1]=D*mt+G*wt+Y*rn+re*Wn,i[5]=D*Mt+G*Mr+Y*Sr+re*to,i[9]=D*$t+G*Ot+Y*$n+re*si,i[13]=D*Bt+G*Hr+Y*sn+re*v,i[2]=se*mt+ae*wt+fe*rn+ve*Wn,i[6]=se*Mt+ae*Mr+fe*Sr+ve*to,i[10]=se*$t+ae*Ot+fe*$n+ve*si,i[14]=se*Bt+ae*Hr+fe*sn+ve*v,i[3]=Ze*mt+ht*wt+ct*rn+d*Wn,i[7]=Ze*Mt+ht*Mr+ct*Sr+d*to,i[11]=Ze*$t+ht*Ot+ct*$n+d*si,i[15]=Ze*Bt+ht*Hr+ct*sn+d*v,this},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this},determinant:function(){var t=this.elements,i=t[0],d=t[4],v=t[8],w=t[12],T=t[1],b=t[5],D=t[9],G=t[13],Y=t[2],re=t[6],se=t[10],ae=t[14];return t[3]*(+w*D*re-v*G*re-w*b*se+d*G*se+v*b*ae-d*D*ae)+t[7]*(+i*D*ae-i*G*se+w*T*se-v*T*ae+v*G*Y-w*D*Y)+t[11]*(+i*G*re-i*b*ae-w*T*re+d*T*ae+w*b*Y-d*G*Y)+t[15]*(-v*b*Y-i*D*re+i*b*se+v*T*re-d*T*se+d*D*Y)},transpose:function(){var t=this.elements,i=t[1];return t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this},setPosition:function(t,i,d){var v=this.elements;return t.isVector3?(v[12]=t.x,v[13]=t.y,v[14]=t.z):(v[12]=t,v[13]=i,v[14]=d),this},getInverse:function(t,i){i!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate."),i=this.elements;var d=t.elements;t=d[0];var v=d[1],w=d[2],T=d[3],b=d[4],D=d[5],G=d[6],Y=d[7],re=d[8],se=d[9],ae=d[10],fe=d[11],ve=d[12],Ze=d[13],ht=d[14];d=d[15];var ct=se*ht*Y-Ze*ae*Y+Ze*G*fe-D*ht*fe-se*G*d+D*ae*d,mt=ve*ae*Y-re*ht*Y-ve*G*fe+b*ht*fe+re*G*d-b*ae*d,Mt=re*Ze*Y-ve*se*Y+ve*D*fe-b*Ze*fe-re*D*d+b*se*d,$t=ve*se*G-re*Ze*G-ve*D*ae+b*Ze*ae+re*D*ht-b*se*ht,Bt=t*ct+v*mt+w*Mt+T*$t;return Bt===0?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(Bt=1/Bt,i[0]=ct*Bt,i[1]=(Ze*ae*T-se*ht*T-Ze*w*fe+v*ht*fe+se*w*d-v*ae*d)*Bt,i[2]=(D*ht*T-Ze*G*T+Ze*w*Y-v*ht*Y-D*w*d+v*G*d)*Bt,i[3]=(se*G*T-D*ae*T-se*w*Y+v*ae*Y+D*w*fe-v*G*fe)*Bt,i[4]=mt*Bt,i[5]=(re*ht*T-ve*ae*T+ve*w*fe-t*ht*fe-re*w*d+t*ae*d)*Bt,i[6]=(ve*G*T-b*ht*T-ve*w*Y+t*ht*Y+b*w*d-t*G*d)*Bt,i[7]=(b*ae*T-re*G*T+re*w*Y-t*ae*Y-b*w*fe+t*G*fe)*Bt,i[8]=Mt*Bt,i[9]=(ve*se*T-re*Ze*T-ve*v*fe+t*Ze*fe+re*v*d-t*se*d)*Bt,i[10]=(b*Ze*T-ve*D*T+ve*v*Y-t*Ze*Y-b*v*d+t*D*d)*Bt,i[11]=(re*D*T-b*se*T-re*v*Y+t*se*Y+b*v*fe-t*D*fe)*Bt,i[12]=$t*Bt,i[13]=(re*Ze*w-ve*se*w+ve*v*ae-t*Ze*ae-re*v*ht+t*se*ht)*Bt,i[14]=(ve*D*w-b*Ze*w-ve*v*G+t*Ze*G+b*v*ht-t*D*ht)*Bt,i[15]=(b*se*w-re*D*w+re*v*G-t*se*G-b*v*ae+t*D*ae)*Bt,this)},scale:function(t){var i=this.elements,d=t.x,v=t.y;return t=t.z,i[0]*=d,i[4]*=v,i[8]*=t,i[1]*=d,i[5]*=v,i[9]*=t,i[2]*=d,i[6]*=v,i[10]*=t,i[3]*=d,i[7]*=v,i[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,i,d){return this.set(1,0,0,t,0,1,0,i,0,0,1,d,0,0,0,1),this},makeRotationX:function(t){var i=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,i,-t,0,0,t,i,0,0,0,0,1),this},makeRotationY:function(t){var i=Math.cos(t);return t=Math.sin(t),this.set(i,0,t,0,0,1,0,0,-t,0,i,0,0,0,0,1),this},makeRotationZ:function(t){var i=Math.cos(t);return t=Math.sin(t),this.set(i,-t,0,0,t,i,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,i){var d=Math.cos(i);i=Math.sin(i);var v=1-d,w=t.x,T=t.y;t=t.z;var b=v*w,D=v*T;return this.set(b*w+d,b*T-i*t,b*t+i*T,0,b*T+i*t,D*T+d,D*t-i*w,0,b*t-i*T,D*t+i*w,v*t*t+d,0,0,0,0,1),this},makeScale:function(t,i,d){return this.set(t,0,0,0,0,i,0,0,0,0,d,0,0,0,0,1),this},makeShear:function(t,i,d){return this.set(1,i,d,0,t,1,d,0,t,i,1,0,0,0,0,1),this},compose:function(t,i,d){var v=this.elements,w=i._x,T=i._y,b=i._z,D=i._w,G=w+w,Y=T+T,re=b+b;i=w*G;var se=w*Y;w*=re;var ae=T*Y;T*=re,b*=re,G*=D,Y*=D,D*=re,re=d.x;var fe=d.y;return d=d.z,v[0]=(1-(ae+b))*re,v[1]=(se+D)*re,v[2]=(w-Y)*re,v[3]=0,v[4]=(se-D)*fe,v[5]=(1-(i+b))*fe,v[6]=(T+G)*fe,v[7]=0,v[8]=(w+Y)*d,v[9]=(T-G)*d,v[10]=(1-(i+ae))*d,v[11]=0,v[12]=t.x,v[13]=t.y,v[14]=t.z,v[15]=1,this},decompose:function(t,i,d){var v=this.elements,w=Jy.set(v[0],v[1],v[2]).length(),T=Jy.set(v[4],v[5],v[6]).length(),b=Jy.set(v[8],v[9],v[10]).length();0>this.determinant()&&(w=-w),t.x=v[12],t.y=v[13],t.z=v[14],Hp.copy(this),t=1/w,v=1/T;var D=1/b;return Hp.elements[0]*=t,Hp.elements[1]*=t,Hp.elements[2]*=t,Hp.elements[4]*=v,Hp.elements[5]*=v,Hp.elements[6]*=v,Hp.elements[8]*=D,Hp.elements[9]*=D,Hp.elements[10]*=D,i.setFromRotationMatrix(Hp),d.x=w,d.y=T,d.z=b,this},makePerspective:function(t,i,d,v,w,T){T===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var b=this.elements;return b[0]=2*w/(i-t),b[4]=0,b[8]=(i+t)/(i-t),b[12]=0,b[1]=0,b[5]=2*w/(d-v),b[9]=(d+v)/(d-v),b[13]=0,b[2]=0,b[6]=0,b[10]=-(T+w)/(T-w),b[14]=-2*T*w/(T-w),b[3]=0,b[7]=0,b[11]=-1,b[15]=0,this},makeOrthographic:function(t,i,d,v,w,T){var b=this.elements,D=1/(i-t),G=1/(d-v),Y=1/(T-w);return b[0]=2*D,b[4]=0,b[8]=0,b[12]=-((i+t)*D),b[1]=0,b[5]=2*G,b[9]=0,b[13]=-((d+v)*G),b[2]=0,b[6]=0,b[10]=-2*Y,b[14]=-((T+w)*Y),b[3]=0,b[7]=0,b[11]=0,b[15]=1,this},equals:function(t){var i=this.elements;t=t.elements;for(var d=0;16>d;d++)if(i[d]!==t[d])return!1;return!0},fromArray:function(t,i){i===void 0&&(i=0);for(var d=0;16>d;d++)this.elements[d]=t[d+i];return this},toArray:function(t,i){t===void 0&&(t=[]),i===void 0&&(i=0);var d=this.elements;return t[i]=d[0],t[i+1]=d[1],t[i+2]=d[2],t[i+3]=d[3],t[i+4]=d[4],t[i+5]=d[5],t[i+6]=d[6],t[i+7]=d[7],t[i+8]=d[8],t[i+9]=d[9],t[i+10]=d[10],t[i+11]=d[11],t[i+12]=d[12],t[i+13]=d[13],t[i+14]=d[14],t[i+15]=d[15],t}});var p_=new Z,g_=new N;K.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),K.DefaultOrder="XYZ",Zr(K.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Ce(K.prototype,{isEuler:!0,set:function(t,i,d,v){return this._x=t,this._y=i,this._z=d,this._order=v||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,i,d){var v=ho.clamp,w=t.elements;t=w[0];var T=w[4],b=w[8],D=w[1],G=w[5],Y=w[9],re=w[2],se=w[6];switch(w=w[10],i=i||this._order,i){case"XYZ":this._y=Math.asin(v(b,-1,1)),.9999999>Math.abs(b)?(this._x=Math.atan2(-Y,w),this._z=Math.atan2(-T,t)):(this._x=Math.atan2(se,G),this._z=0);break;case"YXZ":this._x=Math.asin(-v(Y,-1,1)),.9999999>Math.abs(Y)?(this._y=Math.atan2(b,w),this._z=Math.atan2(D,G)):(this._y=Math.atan2(-re,t),this._z=0);break;case"ZXY":this._x=Math.asin(v(se,-1,1)),.9999999>Math.abs(se)?(this._y=Math.atan2(-re,w),this._z=Math.atan2(-T,G)):(this._y=0,this._z=Math.atan2(D,t));break;case"ZYX":this._y=Math.asin(-v(re,-1,1)),.9999999>Math.abs(re)?(this._x=Math.atan2(se,w),this._z=Math.atan2(D,t)):(this._x=0,this._z=Math.atan2(-T,G));break;case"YZX":this._z=Math.asin(v(D,-1,1)),.9999999>Math.abs(D)?(this._x=Math.atan2(-Y,G),this._y=Math.atan2(-re,t)):(this._x=0,this._y=Math.atan2(b,w));break;case"XZY":this._z=Math.asin(-v(T,-1,1)),.9999999>Math.abs(T)?(this._x=Math.atan2(se,G),this._y=Math.atan2(b,t)):(this._x=Math.atan2(-Y,w),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,d!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(t,i,d){return p_.makeRotationFromQuaternion(t),this.setFromRotationMatrix(p_,i,d)},setFromVector3:function(t,i){return this.set(t.x,t.y,t.z,i||this._order)},reorder:function(t){return g_.setFromEuler(this),this.setFromQuaternion(g_,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,i){return t===void 0&&(t=[]),i===void 0&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new z(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Ce(ne.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return(this.mask&t.mask)!=0}});var CS=0,m_=new z,qy=new N,Xm=new Z,r2=new z,Sx=new z,wS=new z,_S=new N,v_=new z(1,0,0),y_=new z(0,1,0),x_=new z(0,0,1),MS={type:"added"},SS={type:"removed"};oe.DefaultUp=new z(0,1,0),oe.DefaultMatrixAutoUpdate=!0,oe.prototype=Ce(me(a.prototype),{constructor:oe,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,i){this.quaternion.setFromAxisAngle(t,i)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,i){return qy.setFromAxisAngle(t,i),this.quaternion.multiply(qy),this},rotateOnWorldAxis:function(t,i){return qy.setFromAxisAngle(t,i),this.quaternion.premultiply(qy),this},rotateX:function(t){return this.rotateOnAxis(v_,t)},rotateY:function(t){return this.rotateOnAxis(y_,t)},rotateZ:function(t){return this.rotateOnAxis(x_,t)},translateOnAxis:function(t,i){return m_.copy(t).applyQuaternion(this.quaternion),this.position.add(m_.multiplyScalar(i)),this},translateX:function(t){return this.translateOnAxis(v_,t)},translateY:function(t){return this.translateOnAxis(y_,t)},translateZ:function(t){return this.translateOnAxis(x_,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Xm.getInverse(this.matrixWorld))},lookAt:function(t,i,d){t.isVector3?r2.copy(t):r2.set(t,i,d),t=this.parent,this.updateWorldMatrix(!0,!1),Sx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xm.lookAt(Sx,r2,this.up):Xm.lookAt(r2,Sx,this.up),this.quaternion.setFromRotationMatrix(Xm),t&&(Xm.extractRotation(t.matrixWorld),qy.setFromRotationMatrix(Xm),this.quaternion.premultiply(qy.inverse()))},add:function(t){if(1<arguments.length){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(MS)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length){for(var i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}return i=this.children.indexOf(t),i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(SS)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),Xm.getInverse(this.matrixWorld),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Xm.multiply(t.parent.matrixWorld)),t.applyMatrix4(Xm),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,i){if(this[t]===i)return this;for(var d=0,v=this.children.length;d<v;d++){var w=this.children[d].getObjectByProperty(t,i);if(w!==void 0)return w}},getWorldPosition:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new z),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new N),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Sx,t,wS),t},getWorldScale:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new z),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Sx,_S,t),t},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new z),this.updateMatrixWorld(!0);var i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var i=this.children,d=0,v=i.length;d<v;d++)i[d].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var i=this.children,d=0,v=i.length;d<v;d++)i[d].traverseVisible(t)}},traverseAncestors:function(t){var i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var i=this.children,d=0,v=i.length;d<v;d++)i[d].updateMatrixWorld(t)},updateWorldMatrix:function(t,i){var d=this.parent;if(t===!0&&d!==null&&d.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0)for(t=this.children,i=0,d=t.length;i<d;i++)t[i].updateWorldMatrix(!1,!0)},toJSON:function(t){function i(re,se){return re[se.uuid]===void 0&&(re[se.uuid]=se.toJSON(t)),se.uuid}function d(re){var se=[],ae;for(ae in re){var fe=re[ae];delete fe.metadata,se.push(fe)}return se}var v=t===void 0||typeof t=="string",w={};v&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},w.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var T={};if(T.uuid=this.uuid,T.type=this.type,this.name!==""&&(T.name=this.name),this.castShadow===!0&&(T.castShadow=!0),this.receiveShadow===!0&&(T.receiveShadow=!0),this.visible===!1&&(T.visible=!1),this.frustumCulled===!1&&(T.frustumCulled=!1),this.renderOrder!==0&&(T.renderOrder=this.renderOrder),ha(this.userData)!=="{}"&&(T.userData=this.userData),T.layers=this.layers.mask,T.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(T.matrixAutoUpdate=!1),this.isInstancedMesh&&(T.type="InstancedMesh",T.count=this.count,T.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){T.geometry=i(t.geometries,this.geometry);var b=this.geometry.parameters;if(b!==void 0&&b.shapes!==void 0)if(b=b.shapes,Array.isArray(b))for(var D=0,G=b.length;D<G;D++)i(t.shapes,b[D]);else i(t.shapes,b)}if(this.material!==void 0)if(Array.isArray(this.material)){for(b=[],D=0,G=this.material.length;D<G;D++)b.push(i(t.materials,this.material[D]));T.material=b}else T.material=i(t.materials,this.material);if(0<this.children.length)for(T.children=[],D=0;D<this.children.length;D++)T.children.push(this.children[D].toJSON(t).object);if(v){v=d(t.geometries),D=d(t.materials),G=d(t.textures);var Y=d(t.images);b=d(t.shapes),0<v.length&&(w.geometries=v),0<D.length&&(w.materials=D),0<G.length&&(w.textures=G),0<Y.length&&(w.images=Y),0<b.length&&(w.shapes=b)}return w.object=T,w},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t,i){if(i===void 0&&(i=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(ha(t.userData)),i===!0)for(i=0;i<t.children.length;i++)this.add(t.children[i].clone());return this}}),be.prototype=Ce(me(oe.prototype),{constructor:be,isScene:!0,copy:function(t,i){return oe.prototype.copy.call(this,t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var i=oe.prototype.toJSON.call(this,t);return this.background!==null&&(i.object.background=this.background.toJSON(t)),this.environment!==null&&(i.object.environment=this.environment.toJSON(t)),this.fog!==null&&(i.object.fog=this.fog.toJSON()),i},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Ym=[new z,new z,new z,new z,new z,new z,new z,new z],Tx=new z,jC=new je,Qy=new z,$y=new z,e1=new z,Qv=new z,$v=new z,j0=new z,Ix=new z,n2=new z,i2=new z,V0=new z;Ce(je.prototype,{isBox3:!0,set:function(t,i){return this.min.copy(t),this.max.copy(i),this},setFromArray:function(t){for(var i=Infinity,d=Infinity,v=Infinity,w=-Infinity,T=-Infinity,b=-Infinity,D=0,G=t.length;D<G;D+=3){var Y=t[D],re=t[D+1],se=t[D+2];Y<i&&(i=Y),re<d&&(d=re),se<v&&(v=se),Y>w&&(w=Y),re>T&&(T=re),se>b&&(b=se)}return this.min.set(i,d,v),this.max.set(w,T,b),this},setFromBufferAttribute:function(t){for(var i=Infinity,d=Infinity,v=Infinity,w=-Infinity,T=-Infinity,b=-Infinity,D=0,G=t.count;D<G;D++){var Y=t.getX(D),re=t.getY(D),se=t.getZ(D);Y<i&&(i=Y),re<d&&(d=re),se<v&&(v=se),Y>w&&(w=Y),re>T&&(T=re),se>b&&(b=se)}return this.min.set(i,d,v),this.max.set(w,T,b),this},setFromPoints:function(t){this.makeEmpty();for(var i=0,d=t.length;i<d;i++)this.expandByPoint(t[i]);return this},setFromCenterAndSize:function(t,i){return i=Tx.copy(i).multiplyScalar(.5),this.min.copy(t).sub(i),this.max.copy(t).add(i),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return t===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new z),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return t===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new z),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var i=t.geometry;i!==void 0&&(i.boundingBox===null&&i.computeBoundingBox(),jC.copy(i.boundingBox),jC.applyMatrix4(t.matrixWorld),this.union(jC)),t=t.children,i=0;for(var d=t.length;i<d;i++)this.expandByObject(t[i]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,i){return i===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),i=new z),i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,Tx),Tx.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){if(0<t.normal.x)var i=t.normal.x*this.min.x,d=t.normal.x*this.max.x;else i=t.normal.x*this.max.x,d=t.normal.x*this.min.x;return 0<t.normal.y?(i+=t.normal.y*this.min.y,d+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,d+=t.normal.y*this.min.y),0<t.normal.z?(i+=t.normal.z*this.min.z,d+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,d+=t.normal.z*this.min.z),i<=-t.constant&&d>=-t.constant},intersectsTriangle:function(t){return this.isEmpty()||(this.getCenter(Ix),n2.subVectors(this.max,Ix),Qy.subVectors(t.a,Ix),$y.subVectors(t.b,Ix),e1.subVectors(t.c,Ix),Qv.subVectors($y,Qy),$v.subVectors(e1,$y),j0.subVectors(Qy,e1),t=[0,-Qv.z,Qv.y,0,-$v.z,$v.y,0,-j0.z,j0.y,Qv.z,0,-Qv.x,$v.z,0,-$v.x,j0.z,0,-j0.x,-Qv.y,Qv.x,0,-$v.y,$v.x,0,-j0.y,j0.x,0],!Ie(t,Qy,$y,e1,n2))||(t=[1,0,0,0,1,0,0,0,1],!Ie(t,Qy,$y,e1,n2))?!1:(i2.crossVectors(Qv,$v),t=[i2.x,i2.y,i2.z],Ie(t,Qy,$y,e1,n2))},clampPoint:function(t,i){return i===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),i=new z),i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Tx.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return t===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Tx).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(Ym[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ym[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ym[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ym[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ym[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ym[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ym[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ym[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ym),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var TS=new je;Ce(ze.prototype,{set:function(t,i){return this.center.copy(t),this.radius=i,this},setFromPoints:function(t,i){var d=this.center;i!==void 0?d.copy(i):TS.setFromPoints(t).getCenter(d);for(var v=i=0,w=t.length;v<w;v++)i=Math.max(i,d.distanceToSquared(t[v]));return this.radius=Math.sqrt(i),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return 0>this.radius},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,i){var d=this.center.distanceToSquared(t);return i===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),i=new z),i.copy(t),d>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(t){return t===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new je),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var Zm=new z,VC=new z,o2=new z,e0=new z,WC=new z,a2=new z,XC=new z;Ce(et.prototype,{set:function(t,i){return this.origin.copy(t),this.direction.copy(i),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,i){return i===void 0&&(console.warn("THREE.Ray: .at() target is now required"),i=new z),i.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,Zm)),this},closestPointToPoint:function(t,i){return i===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),i=new z),i.subVectors(t,this.origin),t=i.dot(this.direction),0>t?i.copy(this.origin):i.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var i=Zm.subVectors(t,this.origin).dot(this.direction);return 0>i?this.origin.distanceToSquared(t):(Zm.copy(this.direction).multiplyScalar(i).add(this.origin),Zm.distanceToSquared(t))},distanceSqToSegment:function(t,i,d,v){VC.copy(t).add(i).multiplyScalar(.5),o2.copy(i).sub(t).normalize(),e0.copy(this.origin).sub(VC);var w=.5*t.distanceTo(i),T=-this.direction.dot(o2),b=e0.dot(this.direction),D=-e0.dot(o2),G=e0.lengthSq(),Y=Math.abs(1-T*T);if(0<Y){t=T*D-b,i=T*b-D;var re=w*Y;0<=t?i>=-re?i<=re?(w=1/Y,t*=w,i*=w,T=t*(t+T*i+2*b)+i*(T*t+i+2*D)+G):(i=w,t=Math.max(0,-(T*i+b)),T=-t*t+i*(i+2*D)+G):(i=-w,t=Math.max(0,-(T*i+b)),T=-t*t+i*(i+2*D)+G):i<=-re?(t=Math.max(0,-(-T*w+b)),i=0<t?-w:Math.min(Math.max(-w,-D),w),T=-t*t+i*(i+2*D)+G):i<=re?(t=0,i=Math.min(Math.max(-w,-D),w),T=i*(i+2*D)+G):(t=Math.max(0,-(T*w+b)),i=0<t?w:Math.min(Math.max(-w,-D),w),T=-t*t+i*(i+2*D)+G)}else i=0<T?-w:w,t=Math.max(0,-(T*i+b)),T=-t*t+i*(i+2*D)+G;return d&&d.copy(this.direction).multiplyScalar(t).add(this.origin),v&&v.copy(o2).multiplyScalar(i).add(VC),T},intersectSphere:function(t,i){Zm.subVectors(t.center,this.origin);var d=Zm.dot(this.direction),v=Zm.dot(Zm)-d*d;return t=t.radius*t.radius,v>t?null:(t=Math.sqrt(t-v),v=d-t,d+=t,0>v&&0>d?null:0>v?this.at(d,i):this.at(v,i))},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var i=t.normal.dot(this.direction);return i===0?t.distanceToPoint(this.origin)===0?0:null:(t=-(this.origin.dot(t.normal)+t.constant)/i,0<=t?t:null)},intersectPlane:function(t,i){return t=this.distanceToPlane(t),t===null?null:this.at(t,i)},intersectsPlane:function(t){var i=t.distanceToPoint(this.origin);return i===0||0>t.normal.dot(this.direction)*i},intersectBox:function(t,i){var d=1/this.direction.x,v=1/this.direction.y,w=1/this.direction.z,T=this.origin;if(0<=d){var b=(t.min.x-T.x)*d;d*=t.max.x-T.x}else b=(t.max.x-T.x)*d,d*=t.min.x-T.x;if(0<=v){var D=(t.min.y-T.y)*v;v*=t.max.y-T.y}else D=(t.max.y-T.y)*v,v*=t.min.y-T.y;return b>v||D>d||((D>b||b!==b)&&(b=D),(v<d||d!==d)&&(d=v),0<=w?(D=(t.min.z-T.z)*w,t=(t.max.z-T.z)*w):(D=(t.max.z-T.z)*w,t=(t.min.z-T.z)*w),b>t||D>d)?null:((D>b||b!==b)&&(b=D),(t<d||d!==d)&&(d=t),0>d?null:this.at(0<=b?b:d,i))},intersectsBox:function(t){return this.intersectBox(t,Zm)!==null},intersectTriangle:function(t,i,d,v,w){if(WC.subVectors(i,t),a2.subVectors(d,t),XC.crossVectors(WC,a2),i=this.direction.dot(XC),0<i){if(v)return null;v=1}else if(0>i)v=-1,i=-i;else return null;return e0.subVectors(this.origin,t),t=v*this.direction.dot(a2.crossVectors(e0,a2)),0>t||(d=v*this.direction.dot(WC.cross(e0)),0>d||t+d>i)?null:(t=-v*e0.dot(XC),0>t?null:this.at(t/i,w))},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var YC=new z,IS=new z,ES=new p;Ce(xt.prototype,{isPlane:!0,set:function(t,i){return this.normal.copy(t),this.constant=i,this},setComponents:function(t,i,d,v){return this.normal.set(t,i,d),this.constant=v,this},setFromNormalAndCoplanarPoint:function(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this},setFromCoplanarPoints:function(t,i,d){return i=YC.subVectors(d,i).cross(IS.subVectors(t,i)).normalize(),this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,i){return i===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),i=new z),i.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,i){i===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),i=new z);var d=t.delta(YC),v=this.normal.dot(d);if(v===0){if(this.distanceToPoint(t.start)===0)return i.copy(t.start)}else if(v=-(t.start.dot(this.normal)+this.constant)/v,!(0>v||1<v))return i.copy(d).multiplyScalar(v).add(t.start)},intersectsLine:function(t){var i=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>i&&0<t||0>t&&0<i},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return t===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new z),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,i){return i=i||ES.getNormalMatrix(t),t=this.coplanarPoint(YC).applyMatrix4(t),i=this.normal.applyMatrix3(i).normalize(),this.constant=-t.dot(i),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Gp=new z,Km=new z,ZC=new z,Jm=new z,t1=new z,r1=new z,A_=new z,KC=new z,JC=new z,qC=new z;Ce(gt,{getNormal:function(t,i,d,v){return v===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),v=new z),v.subVectors(d,i),Gp.subVectors(t,i),v.cross(Gp),t=v.lengthSq(),0<t?v.multiplyScalar(1/Math.sqrt(t)):v.set(0,0,0)},getBarycoord:function(t,i,d,v,w){Gp.subVectors(v,i),Km.subVectors(d,i),ZC.subVectors(t,i),t=Gp.dot(Gp),i=Gp.dot(Km),d=Gp.dot(ZC);var T=Km.dot(Km);v=Km.dot(ZC);var b=t*T-i*i;return w===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),w=new z),b===0?w.set(-2,-1,-1):(b=1/b,T=(T*d-i*v)*b,t=(t*v-i*d)*b,w.set(1-T-t,t,T))},containsPoint:function(t,i,d,v){return gt.getBarycoord(t,i,d,v,Jm),0<=Jm.x&&0<=Jm.y&&1>=Jm.x+Jm.y},getUV:function(t,i,d,v,w,T,b,D){return this.getBarycoord(t,i,d,v,Jm),D.set(0,0),D.addScaledVector(w,Jm.x),D.addScaledVector(T,Jm.y),D.addScaledVector(b,Jm.z),D},isFrontFacing:function(t,i,d,v){return Gp.subVectors(d,i),Km.subVectors(t,i),0>Gp.cross(Km).dot(v)}}),Ce(gt.prototype,{set:function(t,i,d){return this.a.copy(t),this.b.copy(i),this.c.copy(d),this},setFromPointsAndIndices:function(t,i,d,v){return this.a.copy(t[i]),this.b.copy(t[d]),this.c.copy(t[v]),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Gp.subVectors(this.c,this.b),Km.subVectors(this.a,this.b),.5*Gp.cross(Km).length()},getMidpoint:function(t){return t===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new z),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return gt.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return t===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new xt),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,i){return gt.getBarycoord(t,this.a,this.b,this.c,i)},getUV:function(t,i,d,v,w){return gt.getUV(t,this.a,this.b,this.c,i,d,v,w)},containsPoint:function(t){return gt.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return gt.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,i){i===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),i=new z);var d=this.a,v=this.b,w=this.c;t1.subVectors(v,d),r1.subVectors(w,d),KC.subVectors(t,d);var T=t1.dot(KC),b=r1.dot(KC);if(0>=T&&0>=b)return i.copy(d);JC.subVectors(t,v);var D=t1.dot(JC),G=r1.dot(JC);if(0<=D&&G<=D)return i.copy(v);var Y=T*G-D*b;if(0>=Y&&0<=T&&0>=D)return v=T/(T-D),i.copy(d).addScaledVector(t1,v);qC.subVectors(t,w),t=t1.dot(qC);var re=r1.dot(qC);return 0<=re&&t<=re?i.copy(w):(T=t*b-T*re,0>=T&&0<=b&&0>=re?(Y=b/(b-re),i.copy(d).addScaledVector(r1,Y)):(b=D*re-t*G,0>=b&&0<=G-D&&0<=t-re?(A_.subVectors(w,v),Y=(G-D)/(G-D+(t-re)),i.copy(v).addScaledVector(A_,Y)):(w=1/(b+T+Y),v=T*w,Y*=w,i.copy(d).addScaledVector(t1,v).addScaledVector(r1,Y))))},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var C_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},jp={h:0,s:0,l:0},s2={h:0,s:0,l:0};Ce(We.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this},setRGB:function(t,i,d){return this.r=t,this.g=i,this.b=d,this},setHSL:function(t,i,d){return t=ho.euclideanModulo(t,1),i=ho.clamp(i,0,1),d=ho.clamp(d,0,1),i===0?this.r=this.g=this.b=d:(i=.5>=d?d*(1+i):d+i-d*i,d=2*d-i,this.r=Rt(d,i,t+1/3),this.g=Rt(d,i,t),this.b=Rt(d,i,t-1/3)),this},setStyle:function(t){function i(b){b!==void 0&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var d;if(d=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var v=d[2];switch(d[1]){case"rgb":case"rgba":if(d=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(v))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,i(d[5]),this;if(d=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(v))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,i(d[5]),this;break;case"hsl":case"hsla":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(v)){v=parseFloat(d[1])/360;var w=parseInt(d[2],10)/100,T=parseInt(d[3],10)/100;return i(d[5]),this.setHSL(v,w,T)}}}else if(d=/^#([A-Fa-f0-9]+)$/.exec(t)){if(d=d[1],v=d.length,v===3)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,this;if(v===6)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(t){var i=C_[t];return i!==void 0?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,i){return i===void 0&&(i=2),this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},copyLinearToGamma:function(t,i){return i===void 0&&(i=2),i=0<i?1/i:1,this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=Pt(t.r),this.g=Pt(t.g),this.b=Pt(t.b),this},copyLinearToSRGB:function(t){return this.r=pr(t.r),this.g=pr(t.g),this.b=pr(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){t===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var i=this.r,d=this.g,v=this.b,w=Math.max(i,d,v),T=Math.min(i,d,v),b,D=(T+w)/2;if(T===w)T=b=0;else{var G=w-T;switch(T=.5>=D?G/(w+T):G/(2-w-T),w){case i:b=(d-v)/G+(d<v?6:0);break;case d:b=(v-i)/G+2;break;case v:b=(i-d)/G+4}b/=6}return t.h=b,t.s=T,t.l=D,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,i,d){return this.getHSL(jp),jp.h+=t,jp.s+=i,jp.l+=d,this.setHSL(jp.h,jp.s,jp.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this},lerpHSL:function(t,i){this.getHSL(jp),t.getHSL(s2),t=ho.lerp(jp.h,s2.h,i);var d=ho.lerp(jp.s,s2.s,i);return i=ho.lerp(jp.l,s2.l,i),this.setHSL(t,d,i),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,i){return i===void 0&&(i=0),this.r=t[i],this.g=t[i+1],this.b=t[i+2],this},toArray:function(t,i){return t===void 0&&(t=[]),i===void 0&&(i=0),t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t},toJSON:function(){return this.getHex()}}),We.NAMES=C_,Ce(Rr.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var i=0,d=t.vertexNormals.length;i<d;i++)this.vertexNormals[i]=t.vertexNormals[i].clone();for(i=0,d=t.vertexColors.length;i<d;i++)this.vertexColors[i]=t.vertexColors[i].clone();return this}});var bS=0;Tt.prototype=Ce(me(a.prototype),{constructor:Tt,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(t!==void 0)for(var i in t){var d=t[i];if(d===void 0)console.warn("THREE.Material: '"+i+"' parameter is undefined.");else if(i==="shading")console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=d===1;else{var v=this[i];v===void 0?console.warn("THREE."+this.type+": '"+i+"' is not a property of this material."):v&&v.isColor?v.set(d):v&&v.isVector3&&d&&d.isVector3?v.copy(d):this[i]=d}}},toJSON:function(t){function i(w){var T=[],b;for(b in w){var D=w[b];delete D.metadata,T.push(D)}return T}var d=t===void 0||typeof t=="string";d&&(t={textures:{},images:{}});var v={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return v.uuid=this.uuid,v.type=this.type,this.name!==""&&(v.name=this.name),this.color&&this.color.isColor&&(v.color=this.color.getHex()),this.roughness!==void 0&&(v.roughness=this.roughness),this.metalness!==void 0&&(v.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(v.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(v.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(v.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(v.specular=this.specular.getHex()),this.shininess!==void 0&&(v.shininess=this.shininess),this.clearcoat!==void 0&&(v.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(v.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(v.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(v.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(v.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,v.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(v.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(v.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(v.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(v.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(v.aoMap=this.aoMap.toJSON(t).uuid,v.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(v.bumpMap=this.bumpMap.toJSON(t).uuid,v.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(v.normalMap=this.normalMap.toJSON(t).uuid,v.normalMapType=this.normalMapType,v.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(v.displacementMap=this.displacementMap.toJSON(t).uuid,v.displacementScale=this.displacementScale,v.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(v.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(v.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(v.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(v.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(v.envMap=this.envMap.toJSON(t).uuid,v.reflectivity=this.reflectivity,v.refractionRatio=this.refractionRatio,this.combine!==void 0&&(v.combine=this.combine),this.envMapIntensity!==void 0&&(v.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(v.gradientMap=this.gradientMap.toJSON(t).uuid),this.size!==void 0&&(v.size=this.size),this.sizeAttenuation!==void 0&&(v.sizeAttenuation=this.sizeAttenuation),this.blending!==1&&(v.blending=this.blending),this.flatShading===!0&&(v.flatShading=this.flatShading),this.side!==0&&(v.side=this.side),this.vertexColors&&(v.vertexColors=!0),1>this.opacity&&(v.opacity=this.opacity),this.transparent===!0&&(v.transparent=this.transparent),v.depthFunc=this.depthFunc,v.depthTest=this.depthTest,v.depthWrite=this.depthWrite,v.stencilWrite=this.stencilWrite,v.stencilWriteMask=this.stencilWriteMask,v.stencilFunc=this.stencilFunc,v.stencilRef=this.stencilRef,v.stencilFuncMask=this.stencilFuncMask,v.stencilFail=this.stencilFail,v.stencilZFail=this.stencilZFail,v.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(v.rotation=this.rotation),this.polygonOffset===!0&&(v.polygonOffset=!0),this.polygonOffsetFactor!==0&&(v.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(v.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(v.linewidth=this.linewidth),this.dashSize!==void 0&&(v.dashSize=this.dashSize),this.gapSize!==void 0&&(v.gapSize=this.gapSize),this.scale!==void 0&&(v.scale=this.scale),this.dithering===!0&&(v.dithering=!0),0<this.alphaTest&&(v.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(v.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(v.wireframe=this.wireframe),1<this.wireframeLinewidth&&(v.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(v.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(v.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(v.morphTargets=!0),this.morphNormals===!0&&(v.morphNormals=!0),this.skinning===!0&&(v.skinning=!0),this.visible===!1&&(v.visible=!1),this.toneMapped===!1&&(v.toneMapped=!1),ha(this.userData)!=="{}"&&(v.userData=this.userData),d&&(d=i(t.textures),t=i(t.images),0<d.length&&(v.textures=d),0<t.length&&(v.images=t)),v},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var i=t.clippingPlanes,d=null;if(i!==null){var v=i.length;d=Array(v);for(var w=0;w!==v;++w)d[w]=i[w].clone()}return this.clippingPlanes=d,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(ha(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Tt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),gn.prototype=me(Tt.prototype),gn.prototype.constructor=gn,gn.prototype.isMeshBasicMaterial=!0,gn.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.color.copy(l.color),this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this};var Ka=new z;Object.defineProperty(tr.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Ce(tr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,i,d){t*=this.itemSize,d*=i.itemSize;for(var v=0,w=this.itemSize;v<w;v++)this.array[t+v]=i.array[d+v];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var i=this.array,d=0,v=0,w=t.length;v<w;v++){var T=t[v];T===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",v),T=new We),i[d++]=T.r,i[d++]=T.g,i[d++]=T.b}return this},copyVector2sArray:function(t){for(var i=this.array,d=0,v=0,w=t.length;v<w;v++){var T=t[v];T===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",v),T=new u),i[d++]=T.x,i[d++]=T.y}return this},copyVector3sArray:function(t){for(var i=this.array,d=0,v=0,w=t.length;v<w;v++){var T=t[v];T===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",v),T=new z),i[d++]=T.x,i[d++]=T.y,i[d++]=T.z}return this},copyVector4sArray:function(t){for(var i=this.array,d=0,v=0,w=t.length;v<w;v++){var T=t[v];T===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",v),T=new C),i[d++]=T.x,i[d++]=T.y,i[d++]=T.z,i[d++]=T.w}return this},applyMatrix3:function(t){for(var i=0,d=this.count;i<d;i++)Ka.x=this.getX(i),Ka.y=this.getY(i),Ka.z=this.getZ(i),Ka.applyMatrix3(t),this.setXYZ(i,Ka.x,Ka.y,Ka.z);return this},applyMatrix4:function(t){for(var i=0,d=this.count;i<d;i++)Ka.x=this.getX(i),Ka.y=this.getY(i),Ka.z=this.getZ(i),Ka.applyMatrix4(t),this.setXYZ(i,Ka.x,Ka.y,Ka.z);return this},applyNormalMatrix:function(t){for(var i=0,d=this.count;i<d;i++)Ka.x=this.getX(i),Ka.y=this.getY(i),Ka.z=this.getZ(i),Ka.applyNormalMatrix(t),this.setXYZ(i,Ka.x,Ka.y,Ka.z);return this},transformDirection:function(t){for(var i=0,d=this.count;i<d;i++)Ka.x=this.getX(i),Ka.y=this.getY(i),Ka.z=this.getZ(i),Ka.transformDirection(t),this.setXYZ(i,Ka.x,Ka.y,Ka.z);return this},set:function(t,i){return i===void 0&&(i=0),this.array.set(t,i),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,i){return this.array[t*this.itemSize]=i,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,i){return this.array[t*this.itemSize+1]=i,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,i){return this.array[t*this.itemSize+2]=i,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,i){return this.array[t*this.itemSize+3]=i,this},setXY:function(t,i,d){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=d,this},setXYZ:function(t,i,d,v){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=d,this.array[t+2]=v,this},setXYZW:function(t,i,d,v,w){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=d,this.array[t+2]=v,this.array[t+3]=w,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),bn.prototype=me(tr.prototype),bn.prototype.constructor=bn,ai.prototype=me(tr.prototype),ai.prototype.constructor=ai,wn.prototype=me(tr.prototype),wn.prototype.constructor=wn,Yo.prototype=me(tr.prototype),Yo.prototype.constructor=Yo,On.prototype=me(tr.prototype),On.prototype.constructor=On,qe.prototype=me(tr.prototype),qe.prototype.constructor=qe,Le.prototype=me(tr.prototype),Le.prototype.constructor=Le,Me.prototype=me(tr.prototype),Me.prototype.constructor=Me,Je.prototype=me(tr.prototype),Je.prototype.constructor=Je,Ce(de.prototype,{computeGroups:function(t){var i=[],d=void 0;t=t.faces;for(var v=0;v<t.length;v++){var w=t[v];if(w.materialIndex!==d){d=w.materialIndex,T!==void 0&&(T.count=3*v-T.start,i.push(T));var T={start:3*v,materialIndex:d}}}T!==void 0&&(T.count=3*v-T.start,i.push(T)),this.groups=i},fromGeometry:function(t){var i=t.faces,d=t.vertices,v=t.faceVertexUvs,w=v[0]&&0<v[0].length,T=v[1]&&0<v[1].length,b=t.morphTargets,D=b.length;if(0<D){for(var G=[],Y=0;Y<D;Y++)G[Y]={name:b[Y].name,data:[]};this.morphTargets.position=G}var re=t.morphNormals,se=re.length;if(0<se){var ae=[];for(Y=0;Y<se;Y++)ae[Y]={name:re[Y].name,data:[]};this.morphTargets.normal=ae}var fe=t.skinIndices,ve=t.skinWeights,Ze=fe.length===d.length,ht=ve.length===d.length;for(0<d.length&&i.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),Y=0;Y<i.length;Y++){var ct=i[Y];this.vertices.push(d[ct.a],d[ct.b],d[ct.c]);var mt=ct.vertexNormals;for(mt.length===3?this.normals.push(mt[0],mt[1],mt[2]):(mt=ct.normal,this.normals.push(mt,mt,mt)),mt=ct.vertexColors,mt.length===3?this.colors.push(mt[0],mt[1],mt[2]):(mt=ct.color,this.colors.push(mt,mt,mt)),w===!0&&(mt=v[0][Y],mt!==void 0?this.uvs.push(mt[0],mt[1],mt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Y),this.uvs.push(new u,new u,new u))),T===!0&&(mt=v[1][Y],mt!==void 0?this.uvs2.push(mt[0],mt[1],mt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Y),this.uvs2.push(new u,new u,new u))),mt=0;mt<D;mt++){var Mt=b[mt].vertices;G[mt].data.push(Mt[ct.a],Mt[ct.b],Mt[ct.c])}for(mt=0;mt<se;mt++)Mt=re[mt].vertexNormals[Y],ae[mt].data.push(Mt.a,Mt.b,Mt.c);Ze&&this.skinIndices.push(fe[ct.a],fe[ct.b],fe[ct.c]),ht&&this.skinWeights.push(ve[ct.a],ve[ct.b],ve[ct.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this}});var LS=1,Ng=new Z,QC=new oe,n1=new z,Yf=new je,Ex=new je,Wl=new z;Fe.prototype=Ce(me(a.prototype),{constructor:Fe,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<Te(t)?Le:On)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,i){return this.attributes[t]=i,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,i,d){this.groups.push({start:t,count:i,materialIndex:d!==void 0?d:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,i){this.drawRange.start=t,this.drawRange.count=i},applyMatrix4:function(t){var i=this.attributes.position;if(i!==void 0&&(i.applyMatrix4(t),i.needsUpdate=!0),i=this.attributes.normal,i!==void 0){var d=new p().getNormalMatrix(t);i.applyNormalMatrix(d),i.needsUpdate=!0}return i=this.attributes.tangent,i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(t){return Ng.makeRotationX(t),this.applyMatrix4(Ng),this},rotateY:function(t){return Ng.makeRotationY(t),this.applyMatrix4(Ng),this},rotateZ:function(t){return Ng.makeRotationZ(t),this.applyMatrix4(Ng),this},translate:function(t,i,d){return Ng.makeTranslation(t,i,d),this.applyMatrix4(Ng),this},scale:function(t,i,d){return Ng.makeScale(t,i,d),this.applyMatrix4(Ng),this},lookAt:function(t){return QC.lookAt(t),QC.updateMatrix(),this.applyMatrix4(QC.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(n1).negate(),this.translate(n1.x,n1.y,n1.z),this},setFromObject:function(t){var i=t.geometry;if(t.isPoints||t.isLine){t=new Me(3*i.vertices.length,3);var d=new Me(3*i.colors.length,3);this.setAttribute("position",t.copyVector3sArray(i.vertices)),this.setAttribute("color",d.copyColorsArray(i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length&&(t=new Me(i.lineDistances.length,1),this.setAttribute("lineDistance",t.copyArray(i.lineDistances))),i.boundingSphere!==null&&(this.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(this.boundingBox=i.boundingBox.clone())}else t.isMesh&&i&&i.isGeometry&&this.fromGeometry(i);return this},setFromPoints:function(t){for(var i=[],d=0,v=t.length;d<v;d++){var w=t[d];i.push(w.x,w.y,w.z||0)}return this.setAttribute("position",new Me(i,3)),this},updateFromObject:function(t){var i=t.geometry;if(t.isMesh){var d=i.__directGeometry;if(i.elementsNeedUpdate===!0&&(d=void 0,i.elementsNeedUpdate=!1),d===void 0)return this.fromGeometry(i);d.verticesNeedUpdate=i.verticesNeedUpdate,d.normalsNeedUpdate=i.normalsNeedUpdate,d.colorsNeedUpdate=i.colorsNeedUpdate,d.uvsNeedUpdate=i.uvsNeedUpdate,d.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=d}return i.verticesNeedUpdate===!0&&(d=this.attributes.position,d!==void 0&&(d.copyVector3sArray(i.vertices),d.needsUpdate=!0),i.verticesNeedUpdate=!1),i.normalsNeedUpdate===!0&&(d=this.attributes.normal,d!==void 0&&(d.copyVector3sArray(i.normals),d.needsUpdate=!0),i.normalsNeedUpdate=!1),i.colorsNeedUpdate===!0&&(d=this.attributes.color,d!==void 0&&(d.copyColorsArray(i.colors),d.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(d=this.attributes.uv,d!==void 0&&(d.copyVector2sArray(i.uvs),d.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(d=this.attributes.lineDistance,d!==void 0&&(d.copyArray(i.lineDistances),d.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(t.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=new de().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var i=new Float32Array(3*t.vertices.length);this.setAttribute("position",new tr(i,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(i=new Float32Array(3*t.normals.length),this.setAttribute("normal",new tr(i,3).copyVector3sArray(t.normals))),0<t.colors.length&&(i=new Float32Array(3*t.colors.length),this.setAttribute("color",new tr(i,3).copyColorsArray(t.colors))),0<t.uvs.length&&(i=new Float32Array(2*t.uvs.length),this.setAttribute("uv",new tr(i,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(i=new Float32Array(2*t.uvs2.length),this.setAttribute("uv2",new tr(i,2).copyVector2sArray(t.uvs2))),this.groups=t.groups;for(var d in t.morphTargets){i=[];for(var v=t.morphTargets[d],w=0,T=v.length;w<T;w++){var b=v[w],D=new Me(3*b.data.length,3);D.name=b.name,i.push(D.copyVector3sArray(b.data))}this.morphAttributes[d]=i}return 0<t.skinIndices.length&&(d=new Me(4*t.skinIndices.length,4),this.setAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(d=new Me(4*t.skinWeights.length,4),this.setAttribute("skinWeight",d.copyVector4sArray(t.skinWeights))),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new je);var t=this.attributes.position,i=this.morphAttributes.position;if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),i){t=0;for(var d=i.length;t<d;t++)Yf.setFromBufferAttribute(i[t]),this.morphTargetsRelative?(Wl.addVectors(this.boundingBox.min,Yf.min),this.boundingBox.expandByPoint(Wl),Wl.addVectors(this.boundingBox.max,Yf.max),this.boundingBox.expandByPoint(Wl)):(this.boundingBox.expandByPoint(Yf.min),this.boundingBox.expandByPoint(Yf.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new ze);var t=this.attributes.position,i=this.morphAttributes.position;if(t){var d=this.boundingSphere.center;if(Yf.setFromBufferAttribute(t),i)for(var v=0,w=i.length;v<w;v++){var T=i[v];Ex.setFromBufferAttribute(T),this.morphTargetsRelative?(Wl.addVectors(Yf.min,Ex.min),Yf.expandByPoint(Wl),Wl.addVectors(Yf.max,Ex.max),Yf.expandByPoint(Wl)):(Yf.expandByPoint(Ex.min),Yf.expandByPoint(Ex.max))}Yf.getCenter(d);var b=0;for(v=0,w=t.count;v<w;v++)Wl.fromBufferAttribute(t,v),b=Math.max(b,d.distanceToSquared(Wl));if(i)for(v=0,w=i.length;v<w;v++){T=i[v];for(var D=this.morphTargetsRelative,G=0,Y=T.count;G<Y;G++)Wl.fromBufferAttribute(T,G),D&&(n1.fromBufferAttribute(t,G),Wl.add(n1)),b=Math.max(b,d.distanceToSquared(Wl))}this.boundingSphere.radius=Math.sqrt(b),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,i=this.attributes;if(i.position){var d=i.position.array;if(i.normal===void 0)this.setAttribute("normal",new tr(new Float32Array(d.length),3));else for(var v=i.normal.array,w=0,T=v.length;w<T;w++)v[w]=0;v=i.normal.array;var b=new z,D=new z,G=new z,Y=new z,re=new z;if(t){var se=t.array;for(w=0,T=t.count;w<T;w+=3){t=3*se[w+0];var ae=3*se[w+1],fe=3*se[w+2];b.fromArray(d,t),D.fromArray(d,ae),G.fromArray(d,fe),Y.subVectors(G,D),re.subVectors(b,D),Y.cross(re),v[t]+=Y.x,v[t+1]+=Y.y,v[t+2]+=Y.z,v[ae]+=Y.x,v[ae+1]+=Y.y,v[ae+2]+=Y.z,v[fe]+=Y.x,v[fe+1]+=Y.y,v[fe+2]+=Y.z}}else for(w=0,T=d.length;w<T;w+=9)b.fromArray(d,w),D.fromArray(d,w+3),G.fromArray(d,w+6),Y.subVectors(G,D),re.subVectors(b,D),Y.cross(re),v[w]=Y.x,v[w+1]=Y.y,v[w+2]=Y.z,v[w+3]=Y.x,v[w+4]=Y.y,v[w+5]=Y.z,v[w+6]=Y.x,v[w+7]=Y.y,v[w+8]=Y.z;this.normalizeNormals(),i.normal.needsUpdate=!0}},merge:function(t,i){if(t&&t.isBufferGeometry){i===void 0&&(i=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var d=this.attributes,v;for(v in d)if(t.attributes[v]!==void 0){var w=d[v].array,T=t.attributes[v],b=T.array,D=T.itemSize*i;T=Math.min(b.length,w.length-D);for(var G=0;G<T;G++,D++)w[D]=b[G]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,i=0,d=t.count;i<d;i++)Wl.x=t.getX(i),Wl.y=t.getY(i),Wl.z=t.getZ(i),Wl.normalize(),t.setXYZ(i,Wl.x,Wl.y,Wl.z)},toNonIndexed:function(){function t(re,se){var ae=re.array,fe=re.itemSize;re=re.normalized;for(var ve=new ae.constructor(se.length*fe),Ze,ht=0,ct=0,mt=se.length;ct<mt;ct++){Ze=se[ct]*fe;for(var Mt=0;Mt<fe;Mt++)ve[ht++]=ae[Ze++]}return new tr(ve,fe,re)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var i=new Fe,d=this.index.array,v=this.attributes,w;for(w in v){var T=v[w];T=t(T,d),i.setAttribute(w,T)}var b=this.morphAttributes;for(w in b){var D=[],G=b[w];v=0;for(var Y=G.length;v<Y;v++)T=G[v],T=t(T,d),D.push(T);i.morphAttributes[w]=D}for(i.morphTargetsRelative=this.morphTargetsRelative,d=this.groups,v=0,w=d.length;v<w;v++)T=d[v],i.addGroup(T.start,T.count,T.materialIndex);return i},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),0<Ei(this.userData).length&&(t.userData=this.userData),this.parameters!==void 0){var i=this.parameters;for(Y in i)i[Y]!==void 0&&(t[Y]=i[Y]);return t}t.data={attributes:{}},i=this.index,i!==null&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var d=this.attributes;for(Y in d){i=d[Y];var v=i.toJSON();i.name!==""&&(v.name=i.name),t.data.attributes[Y]=v}d={};var w=!1;for(Y in this.morphAttributes){for(var T=this.morphAttributes[Y],b=[],D=0,G=T.length;D<G;D++)i=T[D],v=i.toJSON(),i.name!==""&&(v.name=i.name),b.push(v);0<b.length&&(d[Y]=b,w=!0)}w&&(t.data.morphAttributes=d,t.data.morphTargetsRelative=this.morphTargetsRelative);var Y=this.groups;return 0<Y.length&&(t.data.groups=JSON.parse(ha(Y))),Y=this.boundingSphere,Y!==null&&(t.data.boundingSphere={center:Y.center.toArray(),radius:Y.radius}),t},clone:function(){return new Fe().copy(this)},copy:function(t){var i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var d=t.index;d!==null&&this.setIndex(d.clone()),d=t.attributes;for(b in d)this.setAttribute(b,d[b].clone());var v=t.morphAttributes;for(b in v){var w=[],T=v[b];for(d=0,i=T.length;d<i;d++)w.push(T[d].clone());this.morphAttributes[b]=w}this.morphTargetsRelative=t.morphTargetsRelative;var b=t.groups;for(d=0,i=b.length;d<i;d++)v=b[d],this.addGroup(v.start,v.count,v.materialIndex);return b=t.boundingBox,b!==null&&(this.boundingBox=b.clone()),b=t.boundingSphere,b!==null&&(this.boundingSphere=b.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var w_=new Z,W0=new et,$C=new ze,t0=new z,r0=new z,n0=new z,ew=new z,tw=new z,rw=new z,l2=new z,u2=new z,c2=new z,i1=new u,o1=new u,a1=new u,bx=new z,h2=new z;Ve.prototype=Ce(me(oe.prototype),{constructor:Ve,isMesh:!0,copy:function(t){return oe.prototype.copy.call(this,t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Ce({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var i=Ei(t);if(0<i.length){var d=t[i[0]];if(d!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,i=d.length;t<i;t++){var v=d[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[v]=t}}}else t=t.morphTargets,t!==void 0&&0<t.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(t,i){var d=this.geometry,v=this.material,w=this.matrixWorld;if(v!==void 0&&(d.boundingSphere===null&&d.computeBoundingSphere(),$C.copy(d.boundingSphere),$C.applyMatrix4(w),t.ray.intersectsSphere($C)!==!1&&(w_.getInverse(w),W0.copy(t.ray).applyMatrix4(w_),d.boundingBox===null||W0.intersectsBox(d.boundingBox)!==!1))){if(d.isBufferGeometry){var T=d.index;w=d.attributes.position;var b=d.morphAttributes.position,D=d.morphTargetsRelative,G=d.attributes.uv,Y=d.attributes.uv2,re=d.groups,se=d.drawRange,ae,fe;if(T!==null)if(Array.isArray(v)){var ve=0;for(ae=re.length;ve<ae;ve++){var Ze=re[ve],ht=v[Ze.materialIndex],ct=Math.max(Ze.start,se.start);for(fe=d=Math.min(Ze.start+Ze.count,se.start+se.count);ct<fe;ct+=3){d=T.getX(ct);var mt=T.getX(ct+1),Mt=T.getX(ct+2);(d=It(this,ht,t,W0,w,b,D,G,Y,d,mt,Mt))&&(d.faceIndex=Math.floor(ct/3),d.face.materialIndex=Ze.materialIndex,i.push(d))}}}else for(ct=Math.max(0,se.start),d=Math.min(T.count,se.start+se.count),ve=ct,ae=d;ve<ae;ve+=3)d=T.getX(ve),mt=T.getX(ve+1),Mt=T.getX(ve+2),(d=It(this,v,t,W0,w,b,D,G,Y,d,mt,Mt))&&(d.faceIndex=Math.floor(ve/3),i.push(d));else if(w!==void 0)if(Array.isArray(v))for(ve=0,ae=re.length;ve<ae;ve++)for(Ze=re[ve],ht=v[Ze.materialIndex],ct=Math.max(Ze.start,se.start),fe=d=Math.min(Ze.start+Ze.count,se.start+se.count);ct<fe;ct+=3)d=ct,mt=ct+1,Mt=ct+2,(d=It(this,ht,t,W0,w,b,D,G,Y,d,mt,Mt))&&(d.faceIndex=Math.floor(ct/3),d.face.materialIndex=Ze.materialIndex,i.push(d));else for(ct=Math.max(0,se.start),d=Math.min(w.count,se.start+se.count),ve=ct,ae=d;ve<ae;ve+=3)d=ve,mt=ve+1,Mt=ve+2,(d=It(this,v,t,W0,w,b,D,G,Y,d,mt,Mt))&&(d.faceIndex=Math.floor(ve/3),i.push(d))}else if(d.isGeometry)for(w=Array.isArray(v),b=d.vertices,D=d.faces,d=d.faceVertexUvs[0],0<d.length&&(T=d),se=0,ve=D.length;se<ve;se++)ae=D[se],d=w?v[ae.materialIndex]:v,d!==void 0&&(G=b[ae.a],Y=b[ae.b],re=b[ae.c],d=at(this,d,t,W0,G,Y,re,bx))&&(T&&T[se]&&(Ze=T[se],i1.copy(Ze[0]),o1.copy(Ze[1]),a1.copy(Ze[2]),d.uv=gt.getUV(bx,G,Y,re,i1,o1,a1,new u)),d.face=ae,d.faceIndex=se,i.push(d))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var PS=0,Bg=new Z,nw=new oe,f2=new z;Xe.prototype=Ce(me(a.prototype),{constructor:Xe,isGeometry:!0,applyMatrix4:function(t){for(var i=new p().getNormalMatrix(t),d=0,v=this.vertices.length;d<v;d++)this.vertices[d].applyMatrix4(t);for(d=0,v=this.faces.length;d<v;d++){t=this.faces[d],t.normal.applyMatrix3(i).normalize();for(var w=0,T=t.vertexNormals.length;w<T;w++)t.vertexNormals[w].applyMatrix3(i).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(t){return Bg.makeRotationX(t),this.applyMatrix4(Bg),this},rotateY:function(t){return Bg.makeRotationY(t),this.applyMatrix4(Bg),this},rotateZ:function(t){return Bg.makeRotationZ(t),this.applyMatrix4(Bg),this},translate:function(t,i,d){return Bg.makeTranslation(t,i,d),this.applyMatrix4(Bg),this},scale:function(t,i,d){return Bg.makeScale(t,i,d),this.applyMatrix4(Bg),this},lookAt:function(t){return nw.lookAt(t),nw.updateMatrix(),this.applyMatrix4(nw.matrix),this},fromBufferGeometry:function(t){function i(fe,ve,Ze,ht){var ct=D===void 0?[]:[d.colors[fe].clone(),d.colors[ve].clone(),d.colors[Ze].clone()],mt=b===void 0?[]:[new z().fromArray(b,3*fe),new z().fromArray(b,3*ve),new z().fromArray(b,3*Ze)];ht=new Rr(fe,ve,Ze,mt,ct,ht),d.faces.push(ht),G!==void 0&&d.faceVertexUvs[0].push([new u().fromArray(G,2*fe),new u().fromArray(G,2*ve),new u().fromArray(G,2*Ze)]),Y!==void 0&&d.faceVertexUvs[1].push([new u().fromArray(Y,2*fe),new u().fromArray(Y,2*ve),new u().fromArray(Y,2*Ze)])}var d=this,v=t.index!==null?t.index.array:void 0,w=t.attributes;if(w.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var T=w.position.array,b=w.normal!==void 0?w.normal.array:void 0,D=w.color!==void 0?w.color.array:void 0,G=w.uv!==void 0?w.uv.array:void 0,Y=w.uv2!==void 0?w.uv2.array:void 0;for(Y!==void 0&&(this.faceVertexUvs[1]=[]),w=0;w<T.length;w+=3)d.vertices.push(new z().fromArray(T,w)),D!==void 0&&d.colors.push(new We().fromArray(D,w));var re=t.groups;if(0<re.length)for(w=0;w<re.length;w++){T=re[w];var se=T.start,ae=se;for(se+=T.count;ae<se;ae+=3)v!==void 0?i(v[ae],v[ae+1],v[ae+2],T.materialIndex):i(ae,ae+1,ae+2,T.materialIndex)}else if(v!==void 0)for(w=0;w<v.length;w+=3)i(v[w],v[w+1],v[w+2]);else for(w=0;w<T.length/3;w+=3)i(w,w+1,w+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(f2).negate(),this.translate(f2.x,f2.y,f2.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,i=this.boundingSphere.radius;i=i===0?1:1/i;var d=new Z;return d.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix4(d),this},computeFaceNormals:function(){for(var t=new z,i=new z,d=0,v=this.faces.length;d<v;d++){var w=this.faces[d],T=this.vertices[w.a],b=this.vertices[w.b];t.subVectors(this.vertices[w.c],b),i.subVectors(T,b),t.cross(i),t.normalize(),w.normal.copy(t)}},computeVertexNormals:function(t){t===void 0&&(t=!0);var i,d=Array(this.vertices.length),v=0;for(i=this.vertices.length;v<i;v++)d[v]=new z;if(t){var w=new z,T=new z;for(t=0,v=this.faces.length;t<v;t++){i=this.faces[t];var b=this.vertices[i.a],D=this.vertices[i.b],G=this.vertices[i.c];w.subVectors(G,D),T.subVectors(b,D),w.cross(T),d[i.a].add(w),d[i.b].add(w),d[i.c].add(w)}}else for(this.computeFaceNormals(),t=0,v=this.faces.length;t<v;t++)i=this.faces[t],d[i.a].add(i.normal),d[i.b].add(i.normal),d[i.c].add(i.normal);for(v=0,i=this.vertices.length;v<i;v++)d[v].normalize();for(t=0,v=this.faces.length;t<v;t++)i=this.faces[t],b=i.vertexNormals,b.length===3?(b[0].copy(d[i.a]),b[1].copy(d[i.b]),b[2].copy(d[i.c])):(b[0]=d[i.a].clone(),b[1]=d[i.b].clone(),b[2]=d[i.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t;this.computeFaceNormals();var i=0;for(t=this.faces.length;i<t;i++){var d=this.faces[i],v=d.vertexNormals;v.length===3?(v[0].copy(d.normal),v[1].copy(d.normal),v[2].copy(d.normal)):(v[0]=d.normal.clone(),v[1]=d.normal.clone(),v[2]=d.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,i,d=0;for(i=this.faces.length;d<i;d++){var v=this.faces[d];v.__originalFaceNormal?v.__originalFaceNormal.copy(v.normal):v.__originalFaceNormal=v.normal.clone(),v.__originalVertexNormals||(v.__originalVertexNormals=[]);var w=0;for(t=v.vertexNormals.length;w<t;w++)v.__originalVertexNormals[w]?v.__originalVertexNormals[w].copy(v.vertexNormals[w]):v.__originalVertexNormals[w]=v.vertexNormals[w].clone()}var T=new Xe;for(T.faces=this.faces,w=0,t=this.morphTargets.length;w<t;w++){if(!this.morphNormals[w]){this.morphNormals[w]={},this.morphNormals[w].faceNormals=[],this.morphNormals[w].vertexNormals=[],v=this.morphNormals[w].faceNormals;var b=this.morphNormals[w].vertexNormals;for(d=0,i=this.faces.length;d<i;d++){var D=new z,G={a:new z,b:new z,c:new z};v.push(D),b.push(G)}}for(b=this.morphNormals[w],T.vertices=this.morphTargets[w].vertices,T.computeFaceNormals(),T.computeVertexNormals(),d=0,i=this.faces.length;d<i;d++)v=this.faces[d],D=b.faceNormals[d],G=b.vertexNormals[d],D.copy(v.normal),G.a.copy(v.vertexNormals[0]),G.b.copy(v.vertexNormals[1]),G.c.copy(v.vertexNormals[2])}for(d=0,i=this.faces.length;d<i;d++)v=this.faces[d],v.normal=v.__originalFaceNormal,v.vertexNormals=v.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new je),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new ze),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,i,d){if(t&&t.isGeometry){var v,w=this.vertices.length,T=this.vertices,b=t.vertices,D=this.faces,G=t.faces,Y=this.colors,re=t.colors;d===void 0&&(d=0),i!==void 0&&(v=new p().getNormalMatrix(i));for(var se=0,ae=b.length;se<ae;se++){var fe=b[se].clone();i!==void 0&&fe.applyMatrix4(i),T.push(fe)}for(se=0,ae=re.length;se<ae;se++)Y.push(re[se].clone());for(se=0,ae=G.length;se<ae;se++){b=G[se];var ve=b.vertexNormals;for(re=b.vertexColors,Y=new Rr(b.a+w,b.b+w,b.c+w),Y.normal.copy(b.normal),v!==void 0&&Y.normal.applyMatrix3(v).normalize(),i=0,T=ve.length;i<T;i++)fe=ve[i].clone(),v!==void 0&&fe.applyMatrix3(v).normalize(),Y.vertexNormals.push(fe);for(Y.color.copy(b.color),i=0,T=re.length;i<T;i++)fe=re[i],Y.vertexColors.push(fe.clone());Y.materialIndex=b.materialIndex+d,D.push(Y)}for(se=0,ae=t.faceVertexUvs.length;se<ae;se++)for(d=t.faceVertexUvs[se],this.faceVertexUvs[se]===void 0&&(this.faceVertexUvs[se]=[]),i=0,T=d.length;i<T;i++){for(v=d[i],w=[],D=0,G=v.length;D<G;D++)w.push(v[D].clone());this.faceVertexUvs[se].push(w)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t={},i=[],d=[],v=Math.pow(10,4),w,T=0;for(w=this.vertices.length;T<w;T++){var b=this.vertices[T];b=Math.round(b.x*v)+"_"+Math.round(b.y*v)+"_"+Math.round(b.z*v),t[b]===void 0?(t[b]=T,i.push(this.vertices[T]),d[T]=i.length-1):d[T]=d[t[b]]}for(t=[],T=0,w=this.faces.length;T<w;T++)for(v=this.faces[T],v.a=d[v.a],v.b=d[v.b],v.c=d[v.c],v=[v.a,v.b,v.c],b=0;3>b;b++)if(v[b]===v[(b+1)%3]){t.push(T);break}for(T=t.length-1;0<=T;T--)for(v=t[T],this.faces.splice(v,1),d=0,w=this.faceVertexUvs.length;d<w;d++)this.faceVertexUvs[d].splice(v,1);return T=this.vertices.length-i.length,this.vertices=i,T},setFromPoints:function(t){this.vertices=[];for(var i=0,d=t.length;i<d;i++){var v=t[i];this.vertices.push(new z(v.x,v.y,v.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,i=t.length,d=0;d<i;d++)t[d]._id=d;t.sort(function(G,Y){return G.materialIndex-Y.materialIndex});var v=this.faceVertexUvs[0],w=this.faceVertexUvs[1],T,b;for(v&&v.length===i&&(T=[]),w&&w.length===i&&(b=[]),d=0;d<i;d++){var D=t[d]._id;T&&T.push(v[D]),b&&b.push(w[D])}T&&(this.faceVertexUvs[0]=T),b&&(this.faceVertexUvs[1]=b)},toJSON:function(){function t(Bt,wt,Mr){return Mr?Bt|1<<wt:Bt&~(1<<wt)}function i(Bt){var wt=Bt.x.toString()+Bt.y.toString()+Bt.z.toString();return Y[wt]!==void 0||(Y[wt]=G.length/3,G.push(Bt.x,Bt.y,Bt.z)),Y[wt]}function d(Bt){var wt=Bt.r.toString()+Bt.g.toString()+Bt.b.toString();return se[wt]!==void 0||(se[wt]=re.length,re.push(Bt.getHex())),se[wt]}function v(Bt){var wt=Bt.x.toString()+Bt.y.toString();return fe[wt]!==void 0||(fe[wt]=ae.length/2,ae.push(Bt.x,Bt.y)),fe[wt]}var w={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(w.uuid=this.uuid,w.type=this.type,this.name!==""&&(w.name=this.name),this.parameters!==void 0){var T=this.parameters,b;for(b in T)T[b]!==void 0&&(w[b]=T[b]);return w}for(T=[],b=0;b<this.vertices.length;b++){var D=this.vertices[b];T.push(D.x,D.y,D.z)}D=[];var G=[],Y={},re=[],se={},ae=[],fe={};for(b=0;b<this.faces.length;b++){var ve=this.faces[b],Ze=this.faceVertexUvs[0][b]!==void 0,ht=0<ve.normal.length(),ct=0<ve.vertexNormals.length,mt=ve.color.r!==1||ve.color.g!==1||ve.color.b!==1,Mt=0<ve.vertexColors.length,$t=0;$t=t($t,0,0),$t=t($t,1,!0),$t=t($t,2,!1),$t=t($t,3,Ze),$t=t($t,4,ht),$t=t($t,5,ct),$t=t($t,6,mt),$t=t($t,7,Mt),D.push($t),D.push(ve.a,ve.b,ve.c),D.push(ve.materialIndex),Ze&&(Ze=this.faceVertexUvs[0][b],D.push(v(Ze[0]),v(Ze[1]),v(Ze[2]))),ht&&D.push(i(ve.normal)),ct&&(ht=ve.vertexNormals,D.push(i(ht[0]),i(ht[1]),i(ht[2]))),mt&&D.push(d(ve.color)),Mt&&(ve=ve.vertexColors,D.push(d(ve[0]),d(ve[1]),d(ve[2])))}return w.data={},w.data.vertices=T,w.data.normals=G,0<re.length&&(w.data.colors=re),0<ae.length&&(w.data.uvs=[ae]),w.data.faces=D,w},clone:function(){return new Xe().copy(this)},copy:function(t){var i,d,v;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var w=t.vertices,T=0;for(i=w.length;T<i;T++)this.vertices.push(w[T].clone());for(w=t.colors,T=0,i=w.length;T<i;T++)this.colors.push(w[T].clone());for(w=t.faces,T=0,i=w.length;T<i;T++)this.faces.push(w[T].clone());for(T=0,i=t.faceVertexUvs.length;T<i;T++){var b=t.faceVertexUvs[T];for(this.faceVertexUvs[T]===void 0&&(this.faceVertexUvs[T]=[]),w=0,d=b.length;w<d;w++){var D=b[w],G=[],Y=0;for(v=D.length;Y<v;Y++)G.push(D[Y].clone());this.faceVertexUvs[T].push(G)}}for(Y=t.morphTargets,T=0,i=Y.length;T<i;T++){if(v={},v.name=Y[T].name,Y[T].vertices!==void 0)for(v.vertices=[],w=0,d=Y[T].vertices.length;w<d;w++)v.vertices.push(Y[T].vertices[w].clone());if(Y[T].normals!==void 0)for(v.normals=[],w=0,d=Y[T].normals.length;w<d;w++)v.normals.push(Y[T].normals[w].clone());this.morphTargets.push(v)}for(Y=t.morphNormals,T=0,i=Y.length;T<i;T++){if(v={},Y[T].vertexNormals!==void 0)for(v.vertexNormals=[],w=0,d=Y[T].vertexNormals.length;w<d;w++)b=Y[T].vertexNormals[w],D={},D.a=b.a.clone(),D.b=b.b.clone(),D.c=b.c.clone(),v.vertexNormals.push(D);if(Y[T].faceNormals!==void 0)for(v.faceNormals=[],w=0,d=Y[T].faceNormals.length;w<d;w++)v.faceNormals.push(Y[T].faceNormals[w].clone());this.morphNormals.push(v)}for(w=t.skinWeights,T=0,i=w.length;T<i;T++)this.skinWeights.push(w[T].clone());for(w=t.skinIndices,T=0,i=w.length;T<i;T++)this.skinIndices.push(w[T].clone());for(w=t.lineDistances,T=0,i=w.length;T<i;T++)this.lineDistances.push(w[T]);return T=t.boundingBox,T!==null&&(this.boundingBox=T.clone()),T=t.boundingSphere,T!==null&&(this.boundingSphere=T.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var iw=function(l){function t(i,d,v,w,T,b){l.call(this),this.type="BoxGeometry",this.parameters={width:i,height:d,depth:v,widthSegments:w,heightSegments:T,depthSegments:b},this.fromBufferGeometry(new Lx(i,d,v,w,T,b)),this.mergeVertices()}return l&&(t.__proto__=l),t.prototype=me(l&&l.prototype),t.prototype.constructor=t}(Xe),Lx=function(l){function t(i,d,v,w,T,b){function D(Ze,ht,ct,mt,Mt,$t,Bt,wt,Mr,Ot,Hr){var rn=$t/Mr,Sr=Bt/Ot,$n=$t/2,sn=Bt/2,Wn=wt/2;Bt=Mr+1;for(var to=Ot+1,si=$t=0,Do=new z,oo=0;oo<to;oo++)for(var wa=oo*Sr-sn,za=0;za<Bt;za++)Do[Ze]=(za*rn-$n)*mt,Do[ht]=wa*Mt,Do[ct]=Wn,re.push(Do.x,Do.y,Do.z),Do[Ze]=0,Do[ht]=0,Do[ct]=0<wt?1:-1,se.push(Do.x,Do.y,Do.z),ae.push(za/Mr),ae.push(1-oo/Ot),$t+=1;for(Ze=0;Ze<Ot;Ze++)for(ht=0;ht<Mr;ht++)ct=fe+ht+Bt*(Ze+1),mt=fe+(ht+1)+Bt*(Ze+1),Mt=fe+(ht+1)+Bt*Ze,Y.push(fe+ht+Bt*Ze,ct,Mt),Y.push(ct,mt,Mt),si+=6;G.addGroup(ve,si,Hr),ve+=si,fe+=$t}l.call(this),this.type="BoxBufferGeometry",this.parameters={width:i,height:d,depth:v,widthSegments:w,heightSegments:T,depthSegments:b};var G=this;i=i||1,d=d||1,v=v||1,w=Math.floor(w)||1,T=Math.floor(T)||1,b=Math.floor(b)||1;var Y=[],re=[],se=[],ae=[],fe=0,ve=0;D("z","y","x",-1,-1,v,d,i,b,T,0),D("z","y","x",1,-1,v,d,-i,b,T,1),D("x","z","y",1,1,i,v,d,w,b,2),D("x","z","y",1,-1,i,v,-d,w,b,3),D("x","y","z",1,-1,i,d,v,w,T,4),D("x","y","z",-1,-1,i,d,-v,w,T,5),this.setIndex(Y),this.setAttribute("position",new Me(re,3)),this.setAttribute("normal",new Me(se,3)),this.setAttribute("uv",new Me(ae,2))}return l&&(t.__proto__=l),t.prototype=me(l&&l.prototype),t.prototype.constructor=t}(Fe),__={clone:ot,merge:lr};Ft.prototype=me(Tt.prototype),Ft.prototype.constructor=Ft,Ft.prototype.isShaderMaterial=!0,Ft.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.fragmentShader=l.fragmentShader,this.vertexShader=l.vertexShader,this.uniforms=ot(l.uniforms),this.defines=Ce({},l.defines),this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.lights=l.lights,this.clipping=l.clipping,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this.extensions=Ce({},l.extensions),this},Ft.prototype.toJSON=function(l){var t=Tt.prototype.toJSON.call(this,l);t.uniforms={};for(var i in this.uniforms){var d=this.uniforms[i].value;t.uniforms[i]=d&&d.isTexture?{type:"t",value:d.toJSON(l).uuid}:d&&d.isColor?{type:"c",value:d.getHex()}:d&&d.isVector2?{type:"v2",value:d.toArray()}:d&&d.isVector3?{type:"v3",value:d.toArray()}:d&&d.isVector4?{type:"v4",value:d.toArray()}:d&&d.isMatrix3?{type:"m3",value:d.toArray()}:d&&d.isMatrix4?{type:"m4",value:d.toArray()}:{value:d}}0<Ei(this.defines).length&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,l={};for(var v in this.extensions)this.extensions[v]===!0&&(l[v]=!0);return 0<Ei(l).length&&(t.extensions=l),t},Jt.prototype=Ce(me(oe.prototype),{constructor:Jt,isCamera:!0,copy:function(t,i){return oe.prototype.copy.call(this,t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new z),this.updateMatrixWorld(!0);var i=this.matrixWorld.elements;return t.set(-i[8],-i[9],-i[10]).normalize()},updateMatrixWorld:function(t){oe.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,i){oe.prototype.updateWorldMatrix.call(this,t,i),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),Ht.prototype=Ce(me(Jt.prototype),{constructor:Ht,isPerspectiveCamera:!0,copy:function(t,i){return Jt.prototype.copy.call(this,t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Ce({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*ho.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*ho.DEG2RAD*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*ho.RAD2DEG*Math.atan(Math.tan(.5*ho.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,i,d,v,w,T){this.aspect=t/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=d,this.view.offsetY=v,this.view.width=w,this.view.height=T,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,i=t*Math.tan(.5*ho.DEG2RAD*this.fov)/this.zoom,d=2*i,v=this.aspect*d,w=-.5*v,T=this.view;if(this.view!==null&&this.view.enabled){var b=T.fullWidth,D=T.fullHeight;w+=T.offsetX*v/b,i-=T.offsetY*d/D,v*=T.width/b,d*=T.height/D}T=this.filmOffset,T!==0&&(w+=t*T/this.getFilmWidth()),this.projectionMatrix.makePerspective(w,w+v,i,i-d,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return t=oe.prototype.toJSON.call(this,t),t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Ce({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),mn.prototype=me(oe.prototype),mn.prototype.constructor=mn,Zn.prototype=me(S.prototype),Zn.prototype.constructor=Zn,Zn.prototype.isWebGLCubeRenderTarget=!0,Zn.prototype.fromEquirectangularTexture=function(l,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var i=new be,d=new Ft({type:"CubemapFromEquirect",uniforms:ot({tEquirect:{value:null}}),vertexShader:`varying vec3 vWorldDirection;
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragmentShader:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
}`,side:1,blending:0});return d.uniforms.tEquirect.value=t,t=new Ve(new Lx(5,5,5),d),i.add(t),new mn(1,10,this).update(l,i),t.geometry.dispose(),t.material.dispose(),this},nr.prototype=me(y.prototype),nr.prototype.constructor=nr,nr.prototype.isDataTexture=!0;var s1=new ze,d2=new z;Ce(Ln.prototype,{set:function(t,i,d,v,w,T){var b=this.planes;return b[0].copy(t),b[1].copy(i),b[2].copy(d),b[3].copy(v),b[4].copy(w),b[5].copy(T),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){for(var i=this.planes,d=0;6>d;d++)i[d].copy(t.planes[d]);return this},setFromProjectionMatrix:function(t){var i=this.planes,d=t.elements;t=d[0];var v=d[1],w=d[2],T=d[3],b=d[4],D=d[5],G=d[6],Y=d[7],re=d[8],se=d[9],ae=d[10],fe=d[11],ve=d[12],Ze=d[13],ht=d[14];return d=d[15],i[0].setComponents(T-t,Y-b,fe-re,d-ve).normalize(),i[1].setComponents(T+t,Y+b,fe+re,d+ve).normalize(),i[2].setComponents(T+v,Y+D,fe+se,d+Ze).normalize(),i[3].setComponents(T-v,Y-D,fe-se,d-Ze).normalize(),i[4].setComponents(T-w,Y-G,fe-ae,d-ht).normalize(),i[5].setComponents(T+w,Y+G,fe+ae,d+ht).normalize(),this},intersectsObject:function(t){var i=t.geometry;return i.boundingSphere===null&&i.computeBoundingSphere(),s1.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(s1)},intersectsSprite:function(t){return s1.center.set(0,0,0),s1.radius=.7071067811865476,s1.applyMatrix4(t.matrixWorld),this.intersectsSphere(s1)},intersectsSphere:function(t){var i=this.planes,d=t.center;t=-t.radius;for(var v=0;6>v;v++)if(i[v].distanceToPoint(d)<t)return!1;return!0},intersectsBox:function(t){for(var i=this.planes,d=0;6>d;d++){var v=i[d];if(d2.x=0<v.normal.x?t.max.x:t.min.x,d2.y=0<v.normal.y?t.max.y:t.min.y,d2.z=0<v.normal.z?t.max.z:t.min.z,0>v.distanceToPoint(d2))return!1}return!0},containsPoint:function(t){for(var i=this.planes,d=0;6>d;d++)if(0>i[d].distanceToPoint(t))return!1;return!0}});var vn={common:{diffuse:{value:new We(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new p},uv2Transform:{value:new p},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new u(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new We(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new We(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new p}},sprite:{diffuse:{value:new We(15658734)},opacity:{value:1},center:{value:new u(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new p}}};Ca.prototype=me(Xe.prototype),Ca.prototype.constructor=Ca,Eo.prototype=me(Fe.prototype),Eo.prototype.constructor=Eo;var zo={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex:`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common:`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin:`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps:`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment:`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex:`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag:`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag:`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert:`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`},zg={basic:{uniforms:lr([vn.common,vn.specularmap,vn.envmap,vn.aomap,vn.lightmap,vn.fog]),vertexShader:zo.meshbasic_vert,fragmentShader:zo.meshbasic_frag},lambert:{uniforms:lr([vn.common,vn.specularmap,vn.envmap,vn.aomap,vn.lightmap,vn.emissivemap,vn.fog,vn.lights,{emissive:{value:new We(0)}}]),vertexShader:zo.meshlambert_vert,fragmentShader:zo.meshlambert_frag},phong:{uniforms:lr([vn.common,vn.specularmap,vn.envmap,vn.aomap,vn.lightmap,vn.emissivemap,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.fog,vn.lights,{emissive:{value:new We(0)},specular:{value:new We(1118481)},shininess:{value:30}}]),vertexShader:zo.meshphong_vert,fragmentShader:zo.meshphong_frag},standard:{uniforms:lr([vn.common,vn.envmap,vn.aomap,vn.lightmap,vn.emissivemap,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.roughnessmap,vn.metalnessmap,vn.fog,vn.lights,{emissive:{value:new We(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zo.meshphysical_vert,fragmentShader:zo.meshphysical_frag},toon:{uniforms:lr([vn.common,vn.specularmap,vn.aomap,vn.lightmap,vn.emissivemap,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.gradientmap,vn.fog,vn.lights,{emissive:{value:new We(0)},specular:{value:new We(1118481)},shininess:{value:30}}]),vertexShader:zo.meshtoon_vert,fragmentShader:zo.meshtoon_frag},matcap:{uniforms:lr([vn.common,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.fog,{matcap:{value:null}}]),vertexShader:zo.meshmatcap_vert,fragmentShader:zo.meshmatcap_frag},points:{uniforms:lr([vn.points,vn.fog]),vertexShader:zo.points_vert,fragmentShader:zo.points_frag},dashed:{uniforms:lr([vn.common,vn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zo.linedashed_vert,fragmentShader:zo.linedashed_frag},depth:{uniforms:lr([vn.common,vn.displacementmap]),vertexShader:zo.depth_vert,fragmentShader:zo.depth_frag},normal:{uniforms:lr([vn.common,vn.bumpmap,vn.normalmap,vn.displacementmap,{opacity:{value:1}}]),vertexShader:zo.normal_vert,fragmentShader:zo.normal_frag},sprite:{uniforms:lr([vn.sprite,vn.fog]),vertexShader:zo.sprite_vert,fragmentShader:zo.sprite_frag},background:{uniforms:{uvTransform:{value:new p},t2D:{value:null}},vertexShader:zo.background_vert,fragmentShader:zo.background_frag},cube:{uniforms:lr([vn.envmap,{opacity:{value:1}}]),vertexShader:zo.cube_vert,fragmentShader:zo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zo.equirect_vert,fragmentShader:zo.equirect_frag},distanceRGBA:{uniforms:lr([vn.common,vn.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zo.distanceRGBA_vert,fragmentShader:zo.distanceRGBA_frag},shadow:{uniforms:lr([vn.lights,vn.fog,{color:{value:new We(0)},opacity:{value:1}}]),vertexShader:zo.shadow_vert,fragmentShader:zo.shadow_frag}};zg.physical={uniforms:lr([zg.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new u(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new We(0)},transparency:{value:0}}]),vertexShader:zo.meshphysical_vert,fragmentShader:zo.meshphysical_frag},Dd.prototype=me(y.prototype),Dd.prototype.constructor=Dd,Dd.prototype.isCubeTexture=!0,Object.defineProperty(Dd.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),Oc.prototype=me(y.prototype),Oc.prototype.constructor=Oc,Oc.prototype.isDataTexture2DArray=!0,Ah.prototype=me(y.prototype),Ah.prototype.constructor=Ah,Ah.prototype.isDataTexture3D=!0;var M_=new y,RS=new Oc,OS=new Ah,S_=new Dd,T_=[],I_=[],E_=new Float32Array(16),b_=new Float32Array(9),L_=new Float32Array(4);Pw.prototype.updateCache=function(l){var t=this.cache;l instanceof Float32Array&&t.length!==l.length&&(this.cache=new Float32Array(l.length)),uc(t,l)},Rw.prototype.setValue=function(l,t,i){for(var d=this.seq,v=0,w=d.length;v!==w;++v){var T=d[v];T.setValue(l,t[T.id],i)}};var ow=/([\w\d_]+)(\])?(\[|\.)?/g;jv.prototype.setValue=function(l,t,i,d){t=this.map[t],t!==void 0&&t.setValue(l,i,d)},jv.prototype.setOptional=function(l,t,i){t=t[i],t!==void 0&&this.setValue(l,i,t)},jv.upload=function(l,t,i,d){for(var v=0,w=t.length;v!==w;++v){var T=t[v],b=i[T.id];b.needsUpdate!==!1&&T.setValue(l,b.value,d)}},jv.seqWithValue=function(l,t){for(var i=[],d=0,v=l.length;d!==v;++d){var w=l[d];w.id in t&&i.push(w)}return i};var DS=0,aw=/^[ \t]*#include +<([\w\d./]+)>/gm,P_=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,R_=/#pragma unroll_loop_start[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,FS=0;Vv.prototype=me(Tt.prototype),Vv.prototype.constructor=Vv,Vv.prototype.isMeshDepthMaterial=!0,Vv.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.depthPacking=l.depthPacking,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.map=l.map,this.alphaMap=l.alphaMap,this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this},Wv.prototype=me(Tt.prototype),Wv.prototype.constructor=Wv,Wv.prototype.isMeshDistanceMaterial=!0,Wv.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.referencePosition.copy(l.referencePosition),this.nearDistance=l.nearDistance,this.farDistance=l.farDistance,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.map=l.map,this.alphaMap=l.alphaMap,this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this},vA.prototype=Ce(me(Ht.prototype),{constructor:vA,isArrayCamera:!0}),_y.prototype=Ce(me(oe.prototype),{constructor:_y,isGroup:!0}),Ce(yA.prototype,{constructor:yA,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new _y,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new _y,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(t,i,d){var v=null,w=null,T=this._targetRay,b=this._grip;return t&&(T!==null&&(v=i.getPose(t.targetRaySpace,d),v!==null&&(T.matrix.fromArray(v.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale))),b!==null&&t.gripSpace&&(w=i.getPose(t.gripSpace,d),w!==null&&(b.matrix.fromArray(w.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale)))),T!==null&&(T.visible=v!==null),b!==null&&(b.visible=w!==null),this}}),Ce(Vw.prototype,a.prototype),Ce(xA.prototype,{isFogExp2:!0,clone:function(){return new xA(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Ce(AA.prototype,{isFog:!0,clone:function(){return new AA(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(km.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Ce(km.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,i,d){t*=this.stride,d*=i.stride;for(var v=0,w=this.stride;v<w;v++)this.array[t+v]=i.array[d+v];return this},set:function(t,i){return i===void 0&&(i=0),this.array.set(t,i),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});var X0=new z;Zr(V1.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Ce(V1.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var i=0,d=this.data.count;i<d;i++)X0.x=this.getX(i),X0.y=this.getY(i),X0.z=this.getZ(i),X0.applyMatrix4(t),this.setXYZ(i,X0.x,X0.y,X0.z);return this},setX:function(t,i){return this.data.array[t*this.data.stride+this.offset]=i,this},setY:function(t,i){return this.data.array[t*this.data.stride+this.offset+1]=i,this},setZ:function(t,i){return this.data.array[t*this.data.stride+this.offset+2]=i,this},setW:function(t,i){return this.data.array[t*this.data.stride+this.offset+3]=i,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,i,d){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=d,this},setXYZ:function(t,i,d,v){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=d,this.data.array[t+2]=v,this},setXYZW:function(t,i,d,v,w){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=d,this.data.array[t+2]=v,this.data.array[t+3]=w,this},clone:function(){for(var t=[],i=0;i<this.count;i++)for(var d=i*this.data.stride+this.offset,v=0;v<this.itemSize;v++)t.push(this.data.array[d+v]);return new tr(new this.array.constructor(t),this.itemSize,this.normalized)},toJSON:function(){for(var t=[],i=0;i<this.count;i++)for(var d=i*this.data.stride+this.offset,v=0;v<this.itemSize;v++)t.push(this.data.array[d+v]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}}),Xv.prototype=me(Tt.prototype),Xv.prototype.constructor=Xv,Xv.prototype.isSpriteMaterial=!0,Xv.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.color.copy(l.color),this.map=l.map,this.alphaMap=l.alphaMap,this.rotation=l.rotation,this.sizeAttenuation=l.sizeAttenuation,this};var l1,Px=new z,u1=new z,c1=new z,h1=new u,Rx=new u,O_=new Z,p2=new z,Ox=new z,g2=new z,D_=new u,sw=new u,F_=new u;W1.prototype=Ce(me(oe.prototype),{constructor:W1,isSprite:!0,raycast:function(t,i){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),u1.setFromMatrixScale(this.matrixWorld),O_.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),c1.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&u1.multiplyScalar(-c1.z);var d=this.material.rotation;if(d!==0)var v=Math.cos(d),w=Math.sin(d);d=this.center,CA(p2.set(-.5,-.5,0),c1,d,u1,w,v),CA(Ox.set(.5,-.5,0),c1,d,u1,w,v),CA(g2.set(.5,.5,0),c1,d,u1,w,v),D_.set(0,0),sw.set(1,0),F_.set(1,1);var T=t.ray.intersectTriangle(p2,Ox,g2,!1,Px);T===null&&(CA(Ox.set(-.5,.5,0),c1,d,u1,w,v),sw.set(0,1),T=t.ray.intersectTriangle(p2,g2,Ox,!1,Px),T===null)||(w=t.ray.origin.distanceTo(Px),w<t.near||w>t.far||i.push({distance:w,point:Px.clone(),uv:gt.getUV(Px,p2,Ox,g2,D_,sw,F_,new u),face:null,object:this}))},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return oe.prototype.copy.call(this,t),t.center!==void 0&&this.center.copy(t.center),this}});var m2=new z,N_=new z;X1.prototype=Ce(me(oe.prototype),{constructor:X1,isLOD:!0,copy:function(t){oe.prototype.copy.call(this,t,!1);for(var i=t.levels,d=0,v=i.length;d<v;d++){var w=i[d];this.addLevel(w.object.clone(),w.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,i){i===void 0&&(i=0),i=Math.abs(i);for(var d=this.levels,v=0;v<d.length&&!(i<d[v].distance);v++);return d.splice(v,0,{distance:i,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var i=this.levels;if(0<i.length){for(var d=1,v=i.length;d<v&&!(t<i[d].distance);d++);return i[d-1].object}return null},raycast:function(t,i){if(0<this.levels.length){m2.setFromMatrixPosition(this.matrixWorld);var d=t.ray.origin.distanceTo(m2);this.getObjectForDistance(d).raycast(t,i)}},update:function(t){var i=this.levels;if(1<i.length){m2.setFromMatrixPosition(t.matrixWorld),N_.setFromMatrixPosition(this.matrixWorld),t=m2.distanceTo(N_)/t.zoom,i[0].object.visible=!0;for(var d=1,v=i.length;d<v&&t>=i[d].distance;d++)i[d-1].object.visible=!1,i[d].object.visible=!0;for(this._currentLevel=d-1;d<v;d++)i[d].object.visible=!1}},toJSON:function(t){t=oe.prototype.toJSON.call(this,t),this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];for(var i=this.levels,d=0,v=i.length;d<v;d++){var w=i[d];t.object.levels.push({object:w.object.uuid,distance:w.distance})}return t}}),wA.prototype=Ce(me(Ve.prototype),{constructor:wA,isSkinnedMesh:!0,bind:function(t,i){this.skeleton=t,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.getInverse(i)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new C,i=this.geometry.attributes.skinWeight,d=0,v=i.count;d<v;d++){t.x=i.getX(d),t.y=i.getY(d),t.z=i.getZ(d),t.w=i.getW(d);var w=1/t.manhattanLength();w!==Infinity?t.multiplyScalar(w):t.set(1,0,0,0),i.setXYZW(d,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Ve.prototype.updateMatrixWorld.call(this,t),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var l=new z,t=new C,i=new C,d=new z,v=new Z;return function(w,T){var b=this.skeleton,D=this.geometry;for(t.fromBufferAttribute(D.attributes.skinIndex,w),i.fromBufferAttribute(D.attributes.skinWeight,w),l.fromBufferAttribute(D.attributes.position,w).applyMatrix4(this.bindMatrix),T.set(0,0,0),w=0;4>w;w++)if(D=i.getComponent(w),D!==0){var G=t.getComponent(w);v.multiplyMatrices(b.bones[G].matrixWorld,b.boneInverses[G]),T.addScaledVector(d.copy(l).applyMatrix4(v),D)}return T.applyMatrix4(this.bindMatrixInverse)}}()});var B_=new Z,NS=new Z;Ce(_A.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,i=this.bones.length;t<i;t++){var d=new Z;this.bones[t]&&d.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(d)}},pose:function(){var t,i,d=0;for(i=this.bones.length;d<i;d++)(t=this.bones[d])&&t.matrixWorld.getInverse(this.boneInverses[d]);for(d=0,i=this.bones.length;d<i;d++)(t=this.bones[d])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,i=this.boneInverses,d=this.boneMatrices,v=this.boneTexture,w=0,T=t.length;w<T;w++)B_.multiplyMatrices(t[w]?t[w].matrixWorld:NS,i[w]),B_.toArray(d,16*w);v!==void 0&&(v.needsUpdate=!0)},clone:function(){return new _A(this.bones,this.boneInverses)},getBoneByName:function(t){for(var i=0,d=this.bones.length;i<d;i++){var v=this.bones[i];if(v.name===t)return v}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),cC.prototype=Ce(me(oe.prototype),{constructor:cC,isBone:!0});var z_=new Z,U_=new Z,v2=[],Dx=new Ve;MA.prototype=Ce(me(Ve.prototype),{constructor:MA,isInstancedMesh:!0,getMatrixAt:function(t,i){i.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,i){var d=this.matrixWorld,v=this.count;if(Dx.geometry=this.geometry,Dx.material=this.material,Dx.material!==void 0)for(var w=0;w<v;w++){this.getMatrixAt(w,z_),U_.multiplyMatrices(d,z_),Dx.matrixWorld=U_,Dx.raycast(t,v2);for(var T=0,b=v2.length;T<b;T++){var D=v2[T];D.instanceId=w,D.object=this,i.push(D)}v2.length=0}},setMatrixAt:function(t,i){i.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),Fs.prototype=me(Tt.prototype),Fs.prototype.constructor=Fs,Fs.prototype.isLineBasicMaterial=!0,Fs.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.color.copy(l.color),this.linewidth=l.linewidth,this.linecap=l.linecap,this.linejoin=l.linejoin,this.morphTargets=l.morphTargets,this};var k_=new z,H_=new z,G_=new Z,y2=new et,x2=new ze;jf.prototype=Ce(me(oe.prototype),{constructor:jf,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var i=t.attributes.position,d=[0],v=1,w=i.count;v<w;v++)k_.fromBufferAttribute(i,v-1),H_.fromBufferAttribute(i,v),d[v]=d[v-1],d[v]+=k_.distanceTo(H_);t.setAttribute("lineDistance",new Me(d,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(i=t.vertices,d=t.lineDistances,d[0]=0,v=1,w=i.length;v<w;v++)d[v]=d[v-1],d[v]+=i[v-1].distanceTo(i[v]);return this},raycast:function(t,i){var d=this.geometry,v=this.matrixWorld,w=t.params.Line.threshold;if(d.boundingSphere===null&&d.computeBoundingSphere(),x2.copy(d.boundingSphere),x2.applyMatrix4(v),x2.radius+=w,t.ray.intersectsSphere(x2)!==!1){G_.getInverse(v),y2.copy(t.ray).applyMatrix4(G_),v=w/((this.scale.x+this.scale.y+this.scale.z)/3),v*=v;var T=new z,b=new z;w=new z;var D=new z,G=this&&this.isLineSegments?2:1;if(d.isBufferGeometry){var Y=d.index,re=d.attributes.position.array;if(Y!==null){Y=Y.array,d=0;for(var se=Y.length-1;d<se;d+=G){var ae=Y[d+1];T.fromArray(re,3*Y[d]),b.fromArray(re,3*ae),ae=y2.distanceSqToSegment(T,b,D,w),ae>v||(D.applyMatrix4(this.matrixWorld),ae=t.ray.origin.distanceTo(D),ae<t.near||ae>t.far||i.push({distance:ae,point:w.clone().applyMatrix4(this.matrixWorld),index:d,face:null,faceIndex:null,object:this}))}}else for(d=0,se=re.length/3-1;d<se;d+=G)T.fromArray(re,3*d),b.fromArray(re,3*d+3),ae=y2.distanceSqToSegment(T,b,D,w),ae>v||(D.applyMatrix4(this.matrixWorld),ae=t.ray.origin.distanceTo(D),ae<t.near||ae>t.far||i.push({distance:ae,point:w.clone().applyMatrix4(this.matrixWorld),index:d,face:null,faceIndex:null,object:this}))}else if(d.isGeometry)for(T=d.vertices,b=T.length,d=0;d<b-1;d+=G)ae=y2.distanceSqToSegment(T[d],T[d+1],D,w),ae>v||(D.applyMatrix4(this.matrixWorld),ae=t.ray.origin.distanceTo(D),ae<t.near||ae>t.far||i.push({distance:ae,point:w.clone().applyMatrix4(this.matrixWorld),index:d,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var i=Ei(t);if(0<i.length){var d=t[i[0]];if(d!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,i=d.length;t<i;t++){var v=d[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[v]=t}}}else t=t.morphTargets,t!==void 0&&0<t.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var A2=new z,C2=new z;Js.prototype=Ce(me(jf.prototype),{constructor:Js,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var i=t.attributes.position,d=[],v=0,w=i.count;v<w;v+=2)A2.fromBufferAttribute(i,v),C2.fromBufferAttribute(i,v+1),d[v]=v===0?0:d[v-1],d[v+1]=d[v]+A2.distanceTo(C2);t.setAttribute("lineDistance",new Me(d,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(i=t.vertices,d=t.lineDistances,v=0,w=i.length;v<w;v+=2)A2.copy(i[v]),C2.copy(i[v+1]),d[v]=v===0?0:d[v-1],d[v+1]=d[v]+A2.distanceTo(C2);return this}}),SA.prototype=Ce(me(jf.prototype),{constructor:SA,isLineLoop:!0}),Fp.prototype=me(Tt.prototype),Fp.prototype.constructor=Fp,Fp.prototype.isPointsMaterial=!0,Fp.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.color.copy(l.color),this.map=l.map,this.alphaMap=l.alphaMap,this.size=l.size,this.sizeAttenuation=l.sizeAttenuation,this.morphTargets=l.morphTargets,this};var j_=new Z,lw=new et,w2=new ze,_2=new z;My.prototype=Ce(me(oe.prototype),{constructor:My,isPoints:!0,raycast:function(t,i){var d=this.geometry,v=this.matrixWorld,w=t.params.Points.threshold;if(d.boundingSphere===null&&d.computeBoundingSphere(),w2.copy(d.boundingSphere),w2.applyMatrix4(v),w2.radius+=w,t.ray.intersectsSphere(w2)!==!1)if(j_.getInverse(v),lw.copy(t.ray).applyMatrix4(j_),w/=(this.scale.x+this.scale.y+this.scale.z)/3,w*=w,d.isBufferGeometry){var T=d.index;if(d=d.attributes.position.array,T!==null){var b=T.array;T=0;for(var D=b.length;T<D;T++){var G=b[T];_2.fromArray(d,3*G),hC(_2,G,w,v,t,i,this)}}else for(T=0,b=d.length/3;T<b;T++)_2.fromArray(d,3*T),hC(_2,T,w,v,t,i,this)}else for(d=d.vertices,T=0,b=d.length;T<b;T++)hC(d[T],T,w,v,t,i,this)},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var i=Ei(t);if(0<i.length){var d=t[i[0]];if(d!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,i=d.length;t<i;t++){var v=d[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[v]=t}}}else t=t.morphTargets,t!==void 0&&0<t.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),fC.prototype=Ce(me(y.prototype),{constructor:fC,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Sy.prototype=me(y.prototype),Sy.prototype.constructor=Sy,Sy.prototype.isCompressedTexture=!0,Y1.prototype=me(y.prototype),Y1.prototype.constructor=Y1,Y1.prototype.isCanvasTexture=!0,Z1.prototype=me(y.prototype),Z1.prototype.constructor=Z1,Z1.prototype.isDepthTexture=!0,Ty.prototype=me(Fe.prototype),Ty.prototype.constructor=Ty,K1.prototype=me(Xe.prototype),K1.prototype.constructor=K1,Iy.prototype=me(Fe.prototype),Iy.prototype.constructor=Iy,J1.prototype=me(Xe.prototype),J1.prototype.constructor=J1,Yh.prototype=me(Fe.prototype),Yh.prototype.constructor=Yh,q1.prototype=me(Xe.prototype),q1.prototype.constructor=q1,Ey.prototype=me(Yh.prototype),Ey.prototype.constructor=Ey,Q1.prototype=me(Xe.prototype),Q1.prototype.constructor=Q1,E0.prototype=me(Yh.prototype),E0.prototype.constructor=E0,$1.prototype=me(Xe.prototype),$1.prototype.constructor=$1,by.prototype=me(Yh.prototype),by.prototype.constructor=by,ex.prototype=me(Xe.prototype),ex.prototype.constructor=ex,Ly.prototype=me(Yh.prototype),Ly.prototype.constructor=Ly,tx.prototype=me(Xe.prototype),tx.prototype.constructor=tx,b0.prototype=me(Fe.prototype),b0.prototype.constructor=b0,b0.prototype.toJSON=function(){var l=Fe.prototype.toJSON.call(this);return l.path=this.parameters.path.toJSON(),l},rx.prototype=me(Xe.prototype),rx.prototype.constructor=rx,Py.prototype=me(Fe.prototype),Py.prototype.constructor=Py,nx.prototype=me(Xe.prototype),nx.prototype.constructor=nx,Ry.prototype=me(Fe.prototype),Ry.prototype.constructor=Ry;var BS={triangulate:function(t,i,d){d=d||2;var v=i&&i.length,w=v?i[0]*d:t.length,T=Ww(t,0,w,d,!0),b=[];if(!T||T.next===T.prev)return b;var D;if(v){var G=d;v=[];var Y,re=0;for(Y=i.length;re<Y;re++){var se=i[re]*G,ae=re<Y-1?i[re+1]*G:t.length;se=Ww(t,se,ae,G,!1),se===se.next&&(se.steiner=!0),v.push(gS(se))}for(v.sort(dS),re=0;re<v.length;re++)G=v[re],i=T,(i=pS(G,i))&&(G=Yw(i,G),Yv(i,i.next),Yv(G,G.next)),T=Yv(T,T.next)}if(t.length>80*d){var fe=D=t[0],ve=v=t[1];for(G=d;G<w;G+=d)re=t[G],i=t[G+1],re<fe&&(fe=re),i<ve&&(ve=i),re>D&&(D=re),i>v&&(v=i);D=Math.max(D-fe,v-ve),D=D!==0?1/D:0}return ix(T,b,d,fe,ve,D),b}},qm={area:function(t){for(var i=t.length,d=0,v=i-1,w=0;w<i;v=w++)d+=t[v].x*t[w].y-t[w].x*t[v].y;return .5*d},isClockWise:function(t){return 0>qm.area(t)},triangulateShape:function(t,i){var d=[],v=[],w=[];Kw(t),Jw(d,t);var T=t.length;for(i.forEach(Kw),t=0;t<i.length;t++)v.push(T),T+=i[t].length,Jw(d,i[t]);for(i=BS.triangulate(d,v),t=0;t<i.length;t+=3)w.push(i.slice(t,t+3));return w}};L0.prototype=me(Xe.prototype),L0.prototype.constructor=L0,L0.prototype.toJSON=function(){var l=Xe.prototype.toJSON.call(this);return qw(this.parameters.shapes,this.parameters.options,l)},Pg.prototype=me(Fe.prototype),Pg.prototype.constructor=Pg,Pg.prototype.toJSON=function(){var l=Fe.prototype.toJSON.call(this);return qw(this.parameters.shapes,this.parameters.options,l)};var zS={generateTopUV:function(t,i,d,v,w){t=i[3*v],v=i[3*v+1];var T=i[3*w];return w=i[3*w+1],[new u(i[3*d],i[3*d+1]),new u(t,v),new u(T,w)]},generateSideWallUV:function(t,i,d,v,w,T){t=i[3*d];var b=i[3*d+1];d=i[3*d+2];var D=i[3*v],G=i[3*v+1];v=i[3*v+2];var Y=i[3*w],re=i[3*w+1];w=i[3*w+2];var se=i[3*T],ae=i[3*T+1];return i=i[3*T+2],.01>Math.abs(b-G)?[new u(t,1-d),new u(D,1-v),new u(Y,1-w),new u(se,1-i)]:[new u(b,1-d),new u(G,1-v),new u(re,1-w),new u(ae,1-i)]}};sx.prototype=me(Xe.prototype),sx.prototype.constructor=sx,Dy.prototype=me(Pg.prototype),Dy.prototype.constructor=Dy,lx.prototype=me(Xe.prototype),lx.prototype.constructor=lx,P0.prototype=me(Fe.prototype),P0.prototype.constructor=P0,ux.prototype=me(Xe.prototype),ux.prototype.constructor=ux,Fy.prototype=me(Fe.prototype),Fy.prototype.constructor=Fy,cx.prototype=me(Xe.prototype),cx.prototype.constructor=cx,Ny.prototype=me(Fe.prototype),Ny.prototype.constructor=Ny,R0.prototype=me(Xe.prototype),R0.prototype.constructor=R0,R0.prototype.toJSON=function(){var l=Xe.prototype.toJSON.call(this);return Qw(this.parameters.shapes,l)},O0.prototype=me(Fe.prototype),O0.prototype.constructor=O0,O0.prototype.toJSON=function(){var l=Fe.prototype.toJSON.call(this);return Qw(this.parameters.shapes,l)},By.prototype=me(Fe.prototype),By.prototype.constructor=By,D0.prototype=me(Xe.prototype),D0.prototype.constructor=D0,Hm.prototype=me(Fe.prototype),Hm.prototype.constructor=Hm,hx.prototype=me(D0.prototype),hx.prototype.constructor=hx,fx.prototype=me(Hm.prototype),fx.prototype.constructor=fx,dx.prototype=me(Xe.prototype),dx.prototype.constructor=dx,zy.prototype=me(Fe.prototype),zy.prototype.constructor=zy;var Ch=dh({__proto__:null,WireframeGeometry:Ty,ParametricGeometry:K1,ParametricBufferGeometry:Iy,TetrahedronGeometry:q1,TetrahedronBufferGeometry:Ey,OctahedronGeometry:Q1,OctahedronBufferGeometry:E0,IcosahedronGeometry:$1,IcosahedronBufferGeometry:by,DodecahedronGeometry:ex,DodecahedronBufferGeometry:Ly,PolyhedronGeometry:J1,PolyhedronBufferGeometry:Yh,TubeGeometry:tx,TubeBufferGeometry:b0,TorusKnotGeometry:rx,TorusKnotBufferGeometry:Py,TorusGeometry:nx,TorusBufferGeometry:Ry,TextGeometry:sx,TextBufferGeometry:Dy,SphereGeometry:lx,SphereBufferGeometry:P0,RingGeometry:ux,RingBufferGeometry:Fy,PlaneGeometry:Ca,PlaneBufferGeometry:Eo,LatheGeometry:cx,LatheBufferGeometry:Ny,ShapeGeometry:R0,ShapeBufferGeometry:O0,ExtrudeGeometry:L0,ExtrudeBufferGeometry:Pg,EdgesGeometry:By,ConeGeometry:hx,ConeBufferGeometry:fx,CylinderGeometry:D0,CylinderBufferGeometry:Hm,CircleGeometry:dx,CircleBufferGeometry:zy,BoxGeometry:iw,BoxBufferGeometry:Lx});F0.prototype=me(Tt.prototype),F0.prototype.constructor=F0,F0.prototype.isShadowMaterial=!0,F0.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.color.copy(l.color),this},Gm.prototype=me(Ft.prototype),Gm.prototype.constructor=Gm,Gm.prototype.isRawShaderMaterial=!0,Rg.prototype=me(Tt.prototype),Rg.prototype.constructor=Rg,Rg.prototype.isMeshStandardMaterial=!0,Rg.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.defines={STANDARD:""},this.color.copy(l.color),this.roughness=l.roughness,this.metalness=l.metalness,this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.roughnessMap=l.roughnessMap,this.metalnessMap=l.metalnessMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.envMapIntensity=l.envMapIntensity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this.vertexTangents=l.vertexTangents,this},N0.prototype=me(Rg.prototype),N0.prototype.constructor=N0,N0.prototype.isMeshPhysicalMaterial=!0,N0.prototype.copy=function(l){return Rg.prototype.copy.call(this,l),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=l.clearcoat,this.clearcoatMap=l.clearcoatMap,this.clearcoatRoughness=l.clearcoatRoughness,this.clearcoatRoughnessMap=l.clearcoatRoughnessMap,this.clearcoatNormalMap=l.clearcoatNormalMap,this.clearcoatNormalScale.copy(l.clearcoatNormalScale),this.reflectivity=l.reflectivity,this.sheen=l.sheen?(this.sheen||new We).copy(l.sheen):null,this.transparency=l.transparency,this},Zv.prototype=me(Tt.prototype),Zv.prototype.constructor=Zv,Zv.prototype.isMeshPhongMaterial=!0,Zv.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.color.copy(l.color),this.specular.copy(l.specular),this.shininess=l.shininess,this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this},B0.prototype=me(Tt.prototype),B0.prototype.constructor=B0,B0.prototype.isMeshToonMaterial=!0,B0.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.color.copy(l.color),this.specular.copy(l.specular),this.shininess=l.shininess,this.map=l.map,this.gradientMap=l.gradientMap,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this},z0.prototype=me(Tt.prototype),z0.prototype.constructor=z0,z0.prototype.isMeshNormalMaterial=!0,z0.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this},U0.prototype=me(Tt.prototype),U0.prototype.constructor=U0,U0.prototype.isMeshLambertMaterial=!0,U0.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.color.copy(l.color),this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this},k0.prototype=me(Tt.prototype),k0.prototype.constructor=k0,k0.prototype.isMeshMatcapMaterial=!0,k0.prototype.copy=function(l){return Tt.prototype.copy.call(this,l),this.defines={MATCAP:""},this.color.copy(l.color),this.matcap=l.matcap,this.map=l.map,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.alphaMap=l.alphaMap,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this},H0.prototype=me(Fs.prototype),H0.prototype.constructor=H0,H0.prototype.isLineDashedMaterial=!0,H0.prototype.copy=function(l){return Fs.prototype.copy.call(this,l),this.scale=l.scale,this.dashSize=l.dashSize,this.gapSize=l.gapSize,this};var US=dh({__proto__:null,ShadowMaterial:F0,SpriteMaterial:Xv,RawShaderMaterial:Gm,ShaderMaterial:Ft,PointsMaterial:Fp,MeshPhysicalMaterial:N0,MeshStandardMaterial:Rg,MeshPhongMaterial:Zv,MeshToonMaterial:B0,MeshNormalMaterial:z0,MeshLambertMaterial:U0,MeshDepthMaterial:Vv,MeshDistanceMaterial:Wv,MeshBasicMaterial:gn,MeshMatcapMaterial:k0,LineDashedMaterial:H0,LineBasicMaterial:Fs,Material:Tt}),Ns={arraySlice:function(t,i,d){return Ns.isTypedArray(t)?new t.constructor(t.subarray(i,d!==void 0?d:t.length)):t.slice(i,d)},convertArray:function(t,i,d){return!t||!d&&t.constructor===i?t:typeof i.BYTES_PER_ELEMENT=="number"?new i(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var i=t.length,d=Array(i),v=0;v!==i;++v)d[v]=v;return d.sort(function(w,T){return t[w]-t[T]}),d},sortedArray:function(t,i,d){for(var v=t.length,w=new t.constructor(v),T=0,b=0;b!==v;++T)for(var D=d[T]*i,G=0;G!==i;++G)w[b++]=t[D+G];return w},flattenJSON:function(t,i,d,v){for(var w=1,T=t[0];T!==void 0&&T[v]===void 0;)T=t[w++];if(T!==void 0){var b=T[v];if(b!==void 0)if(Array.isArray(b))do b=T[v],b!==void 0&&(i.push(T.time),d.push.apply(d,b)),T=t[w++];while(T!==void 0);else if(b.toArray!==void 0)do b=T[v],b!==void 0&&(i.push(T.time),b.toArray(d,d.length)),T=t[w++];while(T!==void 0);else do b=T[v],b!==void 0&&(i.push(T.time),d.push(b)),T=t[w++];while(T!==void 0)}},subclip:function(t,i,d,v,w){w=w||30,t=t.clone(),t.name=i;var T=[];for(i=0;i<t.tracks.length;++i){for(var b=t.tracks[i],D=b.getValueSize(),G=[],Y=[],re=0;re<b.times.length;++re){var se=b.times[re]*w;if(!(se<d||se>=v))for(G.push(b.times[re]),se=0;se<D;++se)Y.push(b.values[re*D+se])}G.length!==0&&(b.times=Ns.convertArray(G,b.times.constructor),b.values=Ns.convertArray(Y,b.values.constructor),T.push(b))}for(t.tracks=T,d=Infinity,i=0;i<t.tracks.length;++i)d>t.tracks[i].times[0]&&(d=t.tracks[i].times[0]);for(i=0;i<t.tracks.length;++i)t.tracks[i].shift(-1*d);return t.resetDuration(),t},makeClipAdditive:function(t,i,d,v){i===void 0&&(i=0),d===void 0&&(d=t),(v===void 0||0>=v)&&(v=30);var w=t.tracks.length;for(i/=v,v=0;v<w;++v){var T=d.tracks[v],b=T.ValueTypeName;if(b!=="bool"&&b!=="string"){var D=t.tracks.find(function(ve){return ve.name===T.name&&ve.ValueTypeName===b});if(D!==void 0){var G=T.getValueSize(),Y=T.times.length-1;i<=T.times[0]?Y=Ns.arraySlice(T.values,0,T.valueSize):i>=T.times[Y]?Y=Ns.arraySlice(T.values,Y*G):(Y=T.createInterpolant(),Y.evaluate(i),Y=Y.resultBuffer),b==="quaternion"&&new N(Y[0],Y[1],Y[2],Y[3]).normalize().conjugate().toArray(Y);for(var re=D.times.length,se=0;se<re;++se){var ae=se*G;if(b==="quaternion")N.multiplyQuaternionsFlat(D.values,ae,Y,0,D.values,ae);else for(var fe=0;fe<G;++fe)D.values[ae+fe]-=Y[fe]}}}}return t.blendMode=2501,t}};Ce(Vf.prototype,{evaluate:function(t){var i=this.parameterPositions,d=this._cachedIndex,v=i[d],w=i[d-1];e:{t:{r:{n:if(!(t<v)){for(var T=d+2;;){if(v===void 0){if(t<w)break n;return this._cachedIndex=d=i.length,this.afterEnd_(d-1,t,w)}if(d===T)break;if(w=v,v=i[++d],t<v)break t}v=i.length;break r}if(t>=w)break e;for(T=i[1],t<T&&(d=2,w=T),T=d-2;;){if(w===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,v);if(d===T)break;if(v=w,w=i[--d-1],t>=w)break t}v=d,d=0}for(;d<v;)w=d+v>>>1,t<i[w]?v=w:d=w+1;if(v=i[d],w=i[d-1],w===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,v);if(v===void 0)return this._cachedIndex=d=i.length,this.afterEnd_(d-1,w,t)}this._cachedIndex=d,this.intervalChanged_(d,w,v)}return this.interpolate_(d,w,t,v)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var i=this.resultBuffer,d=this.sampleValues,v=this.valueSize;t*=v;for(var w=0;w!==v;++w)i[w]=d[t+w];return i},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Ce(Vf.prototype,{beforeStart_:Vf.prototype.copySampleValue_,afterEnd_:Vf.prototype.copySampleValue_}),bA.prototype=Ce(me(Vf.prototype),{constructor:bA,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,i,d){var v=this.parameterPositions,w=t-2,T=t+1,b=v[w],D=v[T];if(b===void 0)switch(this.getSettings_().endingStart){case 2401:w=t,b=2*i-d;break;case 2402:w=v.length-2,b=i+v[w]-v[w+1];break;default:w=t,b=d}if(D===void 0)switch(this.getSettings_().endingEnd){case 2401:T=t,D=2*d-i;break;case 2402:T=1,D=d+v[1]-v[0];break;default:T=t-1,D=i}t=.5*(d-i),v=this.valueSize,this._weightPrev=t/(i-b),this._weightNext=t/(D-d),this._offsetPrev=w*v,this._offsetNext=T*v},interpolate_:function(t,i,d,v){var w=this.resultBuffer,T=this.sampleValues,b=this.valueSize;t*=b;var D=t-b,G=this._offsetPrev,Y=this._offsetNext,re=this._weightPrev,se=this._weightNext,ae=(d-i)/(v-i);for(d=ae*ae,v=d*ae,i=-re*v+2*re*d-re*ae,re=(1+re)*v+(-1.5-2*re)*d+(-.5+re)*ae+1,ae=(-1-se)*v+(1.5+se)*d+.5*ae,se=se*v-se*d,d=0;d!==b;++d)w[d]=i*T[G+d]+re*T[D+d]+ae*T[t+d]+se*T[Y+d];return w}}),px.prototype=Ce(me(Vf.prototype),{constructor:px,interpolate_:function(t,i,d,v){var w=this.resultBuffer,T=this.sampleValues,b=this.valueSize;t*=b;var D=t-b;for(i=(d-i)/(v-i),d=1-i,v=0;v!==b;++v)w[v]=T[D+v]*d+T[t+v]*i;return w}}),LA.prototype=Ce(me(Vf.prototype),{constructor:LA,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Ce(cc,{toJSON:function(t){var i=t.constructor;if(i.toJSON!==void 0)i=i.toJSON(t);else{i={name:t.name,times:Ns.convertArray(t.times,Array),values:Ns.convertArray(t.values,Array)};var d=t.getInterpolation();d!==t.DefaultInterpolation&&(i.interpolation=d)}return i.type=t.ValueTypeName,i}}),Ce(cc.prototype,{constructor:cc,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new LA(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new px(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new bA(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var i=this.InterpolantFactoryMethodDiscrete;break;case 2301:i=this.InterpolantFactoryMethodLinear;break;case 2302:i=this.InterpolantFactoryMethodSmooth}if(i===void 0){if(i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=i,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(t!==0)for(var i=this.times,d=0,v=i.length;d!==v;++d)i[d]+=t;return this},scale:function(t){if(t!==1)for(var i=this.times,d=0,v=i.length;d!==v;++d)i[d]*=t;return this},trim:function(t,i){for(var d=this.times,v=d.length,w=0,T=v-1;w!==v&&d[w]<t;)++w;for(;T!==-1&&d[T]>i;)--T;return++T,(w!==0||T!==v)&&(w>=T&&(T=Math.max(T,1),w=T-1),t=this.getValueSize(),this.times=Ns.arraySlice(d,w,T),this.values=Ns.arraySlice(this.values,w*t,T*t)),this},validate:function(){var t=!0,i=this.getValueSize();i-Math.floor(i)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var d=this.times;i=this.values;var v=d.length;v===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var w=null,T=0;T!==v;T++){var b=d[T];if(typeof b=="number"&&isNaN(b)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,T,b),t=!1;break}if(w!==null&&w>b){console.error("THREE.KeyframeTrack: Out of order keys.",this,T,b,w),t=!1;break}w=b}if(i!==void 0&&Ns.isTypedArray(i)){for(T=0,d=i.length;T!==d;++T)if(v=i[T],isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,T,v),t=!1;break}}return t},optimize:function(){for(var t=Ns.arraySlice(this.times),i=Ns.arraySlice(this.values),d=this.getValueSize(),v=this.getInterpolation()===2302,w=1,T=t.length-1,b=1;b<T;++b){var D=!1,G=t[b];if(G!==t[b+1]&&(b!==1||G!==G[0]))if(v)D=!0;else{var Y=b*d,re=Y-d,se=Y+d;for(G=0;G!==d;++G){var ae=i[Y+G];if(ae!==i[re+G]||ae!==i[se+G]){D=!0;break}}}if(D){if(b!==w)for(t[w]=t[b],D=b*d,Y=w*d,G=0;G!==d;++G)i[Y+G]=i[D+G];++w}}if(0<T){for(t[w]=t[T],D=T*d,Y=w*d,G=0;G!==d;++G)i[Y+G]=i[D+G];++w}return w!==t.length?(this.times=Ns.arraySlice(t,0,w),this.values=Ns.arraySlice(i,0,w*d)):(this.times=t,this.values=i),this},clone:function(){var t=Ns.arraySlice(this.times,0),i=Ns.arraySlice(this.values,0);return t=new this.constructor(this.name,t,i),t.createInterpolant=this.createInterpolant,t}}),PA.prototype=Ce(me(cc.prototype),{constructor:PA,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),RA.prototype=Ce(me(cc.prototype),{constructor:RA,ValueTypeName:"color"}),Uy.prototype=Ce(me(cc.prototype),{constructor:Uy,ValueTypeName:"number"}),OA.prototype=Ce(me(Vf.prototype),{constructor:OA,interpolate_:function(t,i,d,v){var w=this.resultBuffer,T=this.sampleValues,b=this.valueSize;for(t*=b,i=(d-i)/(v-i),d=t+b;t!==d;t+=4)N.slerpFlat(w,0,T,t-b,T,t,i);return w}}),gx.prototype=Ce(me(cc.prototype),{constructor:gx,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new OA(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),DA.prototype=Ce(me(cc.prototype),{constructor:DA,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ky.prototype=Ce(me(cc.prototype),{constructor:ky,ValueTypeName:"vector"}),Ce(Nd,{parse:function(t){for(var i=[],d=t.tracks,v=1/(t.fps||1),w=0,T=d.length;w!==T;++w)i.push(vS(d[w]).scale(v));return new Nd(t.name,t.duration,i,t.blendMode)},toJSON:function(t){var i=[],d=t.tracks;t={name:t.name,duration:t.duration,tracks:i,uuid:t.uuid,blendMode:t.blendMode};for(var v=0,w=d.length;v!==w;++v)i.push(cc.toJSON(d[v]));return t},CreateFromMorphTargetSequence:function(t,i,d,v){for(var w=i.length,T=[],b=0;b<w;b++){var D=[],G=[];D.push((b+w-1)%w,b,(b+1)%w),G.push(0,1,0);var Y=Ns.getKeyframeOrder(D);D=Ns.sortedArray(D,1,Y),G=Ns.sortedArray(G,1,Y),v||D[0]!==0||(D.push(w),G.push(G[0])),T.push(new Uy(".morphTargetInfluences["+i[b].name+"]",D,G).scale(1/d))}return new Nd(t,-1,T)},findByName:function(t,i){var d=t;for(Array.isArray(t)||(d=t.geometry&&t.geometry.animations||t.animations),t=0;t<d.length;t++)if(d[t].name===i)return d[t];return null},CreateClipsFromMorphTargetSequences:function(t,i,d){for(var v={},w=/^([\w-]*?)([\d]+)$/,T=0,b=t.length;T<b;T++){var D=t[T],G=D.name.match(w);if(G&&1<G.length){var Y=G[1];(G=v[Y])||(v[Y]=G=[]),G.push(D)}}t=[];for(Y in v)t.push(Nd.CreateFromMorphTargetSequence(Y,v[Y],i,d));return t},parseAnimation:function(t,i){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var d=function(ct,mt,Mt,$t,Bt){if(Mt.length!==0){var wt=[],Mr=[];Ns.flattenJSON(Mt,wt,Mr,$t),wt.length!==0&&Bt.push(new ct(mt,wt,Mr))}},v=[],w=t.name||"default",T=t.length||-1,b=t.fps||30,D=t.blendMode;t=t.hierarchy||[];for(var G=0;G<t.length;G++){var Y=t[G].keys;if(Y&&Y.length!==0)if(Y[0].morphTargets){T={};for(var re=0;re<Y.length;re++)if(Y[re].morphTargets)for(var se=0;se<Y[re].morphTargets.length;se++)T[Y[re].morphTargets[se]]=-1;for(var ae in T){var fe=[],ve=[];for(se=0;se!==Y[re].morphTargets.length;++se){var Ze=Y[re];fe.push(Ze.time),ve.push(Ze.morphTarget===ae?1:0)}v.push(new Uy(".morphTargetInfluence["+ae+"]",fe,ve))}T=T.length*(b||1)}else re=".bones["+i[G].name+"]",d(ky,re+".position",Y,"pos",v),d(gx,re+".quaternion",Y,"rot",v),d(ky,re+".scale",Y,"scl",v)}return v.length===0?null:new Nd(w,T,v,D)}}),Ce(Nd.prototype,{resetDuration:function(){for(var t=0,i=0,d=this.tracks.length;i!==d;++i){var v=this.tracks[i];t=Math.max(t,v.times[v.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new Nd(this.name,this.duration,t,this.blendMode)}});var Y0={enabled:!1,files:{},add:function(t,i){this.enabled!==!1&&(this.files[t]=i)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},V_=new gC;Ce(Oa.prototype,{load:function(){},loadAsync:function(t,i){var d=this;return new Si(function(v,w){d.load(t,v,i,w)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var Vp={};Bd.prototype=Ce(me(Oa.prototype),{constructor:Bd,load:function(t,i,d,v){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var w=this,T=Y0.get(t);if(T!==void 0)return w.manager.itemStart(t),setTimeout(function(){i&&i(T),w.manager.itemEnd(t)},0),T;if(Vp[t]!==void 0)Vp[t].push({onLoad:i,onProgress:d,onError:v});else{var b=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(b){d=b[1];var D=!!b[2];b=b[3],b=decodeURIComponent(b),D&&(b=atob(b));try{var G=(this.responseType||"").toLowerCase();switch(G){case"arraybuffer":case"blob":var Y=new Uint8Array(b.length);for(D=0;D<b.length;D++)Y[D]=b.charCodeAt(D);var re=G==="blob"?new Blob([Y.buffer],{type:d}):Y.buffer;break;case"document":re=new DOMParser().parseFromString(b,d);break;case"json":re=JSON.parse(b);break;default:re=b}setTimeout(function(){i&&i(re),w.manager.itemEnd(t)},0)}catch(ae){setTimeout(function(){v&&v(ae),w.manager.itemError(t),w.manager.itemEnd(t)},0)}}else{Vp[t]=[],Vp[t].push({onLoad:i,onProgress:d,onError:v});var se=new XMLHttpRequest;se.open("GET",t,!0),se.addEventListener("load",function(ae){var fe=this.response,ve=Vp[t];if(delete Vp[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Y0.add(t,fe);for(var Ze=0,ht=ve.length;Ze<ht;Ze++){var ct=ve[Ze];ct.onLoad&&ct.onLoad(fe)}}else{for(Ze=0,ht=ve.length;Ze<ht;Ze++)ct=ve[Ze],ct.onError&&ct.onError(ae);w.manager.itemError(t)}w.manager.itemEnd(t)},!1),se.addEventListener("progress",function(ae){for(var fe=Vp[t],ve=0,Ze=fe.length;ve<Ze;ve++){var ht=fe[ve];ht.onProgress&&ht.onProgress(ae)}},!1),se.addEventListener("error",function(ae){var fe=Vp[t];delete Vp[t];for(var ve=0,Ze=fe.length;ve<Ze;ve++){var ht=fe[ve];ht.onError&&ht.onError(ae)}w.manager.itemError(t),w.manager.itemEnd(t)},!1),se.addEventListener("abort",function(ae){var fe=Vp[t];delete Vp[t];for(var ve=0,Ze=fe.length;ve<Ze;ve++){var ht=fe[ve];ht.onError&&ht.onError(ae)}w.manager.itemError(t),w.manager.itemEnd(t)},!1),this.responseType!==void 0&&(se.responseType=this.responseType),this.withCredentials!==void 0&&(se.withCredentials=this.withCredentials),se.overrideMimeType&&se.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(D in this.requestHeader)se.setRequestHeader(D,this.requestHeader[D]);se.send(null)}return w.manager.itemStart(t),se}},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),mC.prototype=Ce(me(Oa.prototype),{constructor:mC,load:function(t,i,d,v){var w=this,T=new Bd(w.manager);T.setPath(w.path),T.load(t,function(b){try{i(w.parse(JSON.parse(b)))}catch(D){v?v(D):console.error(D),w.manager.itemError(t)}},d,v)},parse:function(t){for(var i=[],d=0;d<t.length;d++){var v=Nd.parse(t[d]);i.push(v)}return i}}),vC.prototype=Ce(me(Oa.prototype),{constructor:vC,load:function(t,i,d,v){function w(ae){G.load(t[ae],function(fe){fe=T.parse(fe,!0),b[ae]={width:fe.width,height:fe.height,format:fe.format,mipmaps:fe.mipmaps},Y+=1,Y===6&&(fe.mipmapCount===1&&(D.minFilter=1006),D.format=fe.format,D.needsUpdate=!0,i&&i(D))},d,v)}var T=this,b=[],D=new Sy;D.image=b;var G=new Bd(this.manager);if(G.setPath(this.path),G.setResponseType("arraybuffer"),Array.isArray(t))for(var Y=0,re=0,se=t.length;re<se;++re)w(re);else G.load(t,function(ae){if(ae=T.parse(ae,!0),ae.isCubemap)for(var fe=ae.mipmaps.length/ae.mipmapCount,ve=0;ve<fe;ve++){b[ve]={mipmaps:[]};for(var Ze=0;Ze<ae.mipmapCount;Ze++)b[ve].mipmaps.push(ae.mipmaps[ve*ae.mipmapCount+Ze]),b[ve].format=ae.format,b[ve].width=ae.width,b[ve].height=ae.height}else D.image.width=ae.width,D.image.height=ae.height,D.mipmaps=ae.mipmaps;ae.mipmapCount===1&&(D.minFilter=1006),D.format=ae.format,D.needsUpdate=!0,i&&i(D)},d,v);return D}}),FA.prototype=Ce(me(Oa.prototype),{constructor:FA,load:function(t,i,d,v){var w=this,T=new nr,b=new Bd(this.manager);return b.setResponseType("arraybuffer"),b.setPath(this.path),b.load(t,function(D){(D=w.parse(D))&&(D.image!==void 0?T.image=D.image:D.data!==void 0&&(T.image.width=D.width,T.image.height=D.height,T.image.data=D.data),T.wrapS=D.wrapS!==void 0?D.wrapS:1001,T.wrapT=D.wrapT!==void 0?D.wrapT:1001,T.magFilter=D.magFilter!==void 0?D.magFilter:1006,T.minFilter=D.minFilter!==void 0?D.minFilter:1006,T.anisotropy=D.anisotropy!==void 0?D.anisotropy:1,D.format!==void 0&&(T.format=D.format),D.type!==void 0&&(T.type=D.type),D.mipmaps!==void 0&&(T.mipmaps=D.mipmaps,T.minFilter=1008),D.mipmapCount===1&&(T.minFilter=1006),T.needsUpdate=!0,i&&i(T,D))},d,v),T}}),Hy.prototype=Ce(me(Oa.prototype),{constructor:Hy,load:function(t,i,d,v){function w(){G.removeEventListener("load",w,!1),G.removeEventListener("error",T,!1),Y0.add(t,this),i&&i(this),b.manager.itemEnd(t)}function T(Y){G.removeEventListener("load",w,!1),G.removeEventListener("error",T,!1),v&&v(Y),b.manager.itemError(t),b.manager.itemEnd(t)}this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var b=this,D=Y0.get(t);if(D!==void 0)return b.manager.itemStart(t),setTimeout(function(){i&&i(D),b.manager.itemEnd(t)},0),D;var G=document.createElementNS("http://www.w3.org/1999/xhtml","img");return G.addEventListener("load",w,!1),G.addEventListener("error",T,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(G.crossOrigin=this.crossOrigin),b.manager.itemStart(t),G.src=t,G}}),NA.prototype=Ce(me(Oa.prototype),{constructor:NA,load:function(t,i,d,v){function w(G){b.load(t[G],function(Y){T.images[G]=Y,D++,D===6&&(T.needsUpdate=!0,i&&i(T))},void 0,v)}var T=new Dd,b=new Hy(this.manager);b.setCrossOrigin(this.crossOrigin),b.setPath(this.path);var D=0;for(d=0;d<t.length;++d)w(d);return T}}),BA.prototype=Ce(me(Oa.prototype),{constructor:BA,load:function(t,i,d,v){var w=new y,T=new Hy(this.manager);return T.setCrossOrigin(this.crossOrigin),T.setPath(this.path),T.load(t,function(b){w.image=b,b=0<t.search(/\.jpe?g($|\?)/i)||t.search(/^data:image\/jpeg/)===0,w.format=b?1022:1023,w.needsUpdate=!0,i!==void 0&&i(w)},d,v),w}}),Ce(di.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,i){return t=this.getUtoTmapping(t),this.getPoint(t,i)},getPoints:function(t){t===void 0&&(t=5);for(var i=[],d=0;d<=t;d++)i.push(this.getPoint(d/t));return i},getSpacedPoints:function(t){t===void 0&&(t=5);for(var i=[],d=0;d<=t;d++)i.push(this.getPointAt(d/t));return i},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i=[],d=this.getPoint(0),v,w=0;for(i.push(0),v=1;v<=t;v++){var T=this.getPoint(v/t);w+=T.distanceTo(d),i.push(w),d=T}return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,i){var d=this.getLengths(),v=d.length;i=i||t*d[v-1];for(var w=0,T=v-1,b;w<=T;)if(t=Math.floor(w+(T-w)/2),b=d[t]-i,0>b)w=t+1;else if(0<b)T=t-1;else{T=t;break}return t=T,d[t]===i?t/(v-1):(w=d[t],(t+(i-w)/(d[t+1]-w))/(v-1))},getTangent:function(t,i){var d=t-1e-4;return t+=1e-4,0>d&&(d=0),1<t&&(t=1),d=this.getPoint(d),t=this.getPoint(t),i=i||(d.isVector2?new u:new z),i.copy(t).sub(d).normalize(),i},getTangentAt:function(t,i){return t=this.getUtoTmapping(t),this.getTangent(t,i)},computeFrenetFrames:function(t,i){var d=new z,v=[],w=[],T=[],b=new z,D=new Z,G;for(G=0;G<=t;G++){var Y=G/t;v[G]=this.getTangentAt(Y,new z),v[G].normalize()}w[0]=new z,T[0]=new z,G=Number.MAX_VALUE,Y=Math.abs(v[0].x);var re=Math.abs(v[0].y),se=Math.abs(v[0].z);for(Y<=G&&(G=Y,d.set(1,0,0)),re<=G&&(G=re,d.set(0,1,0)),se<=G&&d.set(0,0,1),b.crossVectors(v[0],d).normalize(),w[0].crossVectors(v[0],b),T[0].crossVectors(v[0],w[0]),G=1;G<=t;G++)w[G]=w[G-1].clone(),T[G]=T[G-1].clone(),b.crossVectors(v[G-1],v[G]),b.length()>Ro&&(b.normalize(),d=Math.acos(ho.clamp(v[G-1].dot(v[G]),-1,1)),w[G].applyMatrix4(D.makeRotationAxis(b,d))),T[G].crossVectors(v[G],w[G]);if(i===!0)for(d=Math.acos(ho.clamp(w[0].dot(w[t]),-1,1)),d/=t,0<v[0].dot(b.crossVectors(w[0],w[t]))&&(d=-d),G=1;G<=t;G++)w[G].applyMatrix4(D.makeRotationAxis(v[G],d*G)),T[G].crossVectors(v[G],w[G]);return{tangents:v,normals:w,binormals:T}},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Wf.prototype=me(di.prototype),Wf.prototype.constructor=Wf,Wf.prototype.isEllipseCurve=!0,Wf.prototype.getPoint=function(l,t){t=t||new u;for(var i=2*Math.PI,d=this.aEndAngle-this.aStartAngle,v=Math.abs(d)<Ro;0>d;)d+=i;for(;d>i;)d-=i;d<Ro&&(d=v?0:i),this.aClockwise!==!0||v||(d=d===i?-i:d-i),i=this.aStartAngle+l*d,l=this.aX+this.xRadius*Math.cos(i);var w=this.aY+this.yRadius*Math.sin(i);return this.aRotation!==0&&(i=Math.cos(this.aRotation),d=Math.sin(this.aRotation),v=l-this.aX,w-=this.aY,l=v*i-w*d+this.aX,w=v*d+w*i+this.aY),t.set(l,w)},Wf.prototype.copy=function(l){return di.prototype.copy.call(this,l),this.aX=l.aX,this.aY=l.aY,this.xRadius=l.xRadius,this.yRadius=l.yRadius,this.aStartAngle=l.aStartAngle,this.aEndAngle=l.aEndAngle,this.aClockwise=l.aClockwise,this.aRotation=l.aRotation,this},Wf.prototype.toJSON=function(){var l=di.prototype.toJSON.call(this);return l.aX=this.aX,l.aY=this.aY,l.xRadius=this.xRadius,l.yRadius=this.yRadius,l.aStartAngle=this.aStartAngle,l.aEndAngle=this.aEndAngle,l.aClockwise=this.aClockwise,l.aRotation=this.aRotation,l},Wf.prototype.fromJSON=function(l){return di.prototype.fromJSON.call(this,l),this.aX=l.aX,this.aY=l.aY,this.xRadius=l.xRadius,this.yRadius=l.yRadius,this.aStartAngle=l.aStartAngle,this.aEndAngle=l.aEndAngle,this.aClockwise=l.aClockwise,this.aRotation=l.aRotation,this},Gy.prototype=me(Wf.prototype),Gy.prototype.constructor=Gy,Gy.prototype.isArcCurve=!0;var M2=new z,uw=new yC,cw=new yC,hw=new yC;Dc.prototype=me(di.prototype),Dc.prototype.constructor=Dc,Dc.prototype.isCatmullRomCurve3=!0,Dc.prototype.getPoint=function(l,t){t=t||new z;var i=this.points,d=i.length;l*=d-(this.closed?0:1);var v=Math.floor(l);if(l-=v,this.closed?v+=0<v?0:(Math.floor(Math.abs(v)/d)+1)*d:l===0&&v===d-1&&(v=d-2,l=1),this.closed||0<v)var w=i[(v-1)%d];else M2.subVectors(i[0],i[1]).add(i[0]),w=M2;var T=i[v%d],b=i[(v+1)%d];if(this.closed||v+2<d?i=i[(v+2)%d]:(M2.subVectors(i[d-1],i[d-2]).add(i[d-1]),i=M2),this.curveType==="centripetal"||this.curveType==="chordal"){var D=this.curveType==="chordal"?.5:.25;d=Math.pow(w.distanceToSquared(T),D),v=Math.pow(T.distanceToSquared(b),D),D=Math.pow(b.distanceToSquared(i),D),1e-4>v&&(v=1),1e-4>d&&(d=v),1e-4>D&&(D=v),uw.initNonuniformCatmullRom(w.x,T.x,b.x,i.x,d,v,D),cw.initNonuniformCatmullRom(w.y,T.y,b.y,i.y,d,v,D),hw.initNonuniformCatmullRom(w.z,T.z,b.z,i.z,d,v,D)}else this.curveType==="catmullrom"&&(uw.initCatmullRom(w.x,T.x,b.x,i.x,this.tension),cw.initCatmullRom(w.y,T.y,b.y,i.y,this.tension),hw.initCatmullRom(w.z,T.z,b.z,i.z,this.tension));return t.set(uw.calc(l),cw.calc(l),hw.calc(l)),t},Dc.prototype.copy=function(l){di.prototype.copy.call(this,l),this.points=[];for(var t=0,i=l.points.length;t<i;t++)this.points.push(l.points[t].clone());return this.closed=l.closed,this.curveType=l.curveType,this.tension=l.tension,this},Dc.prototype.toJSON=function(){var l=di.prototype.toJSON.call(this);l.points=[];for(var t=0,i=this.points.length;t<i;t++)l.points.push(this.points[t].toArray());return l.closed=this.closed,l.curveType=this.curveType,l.tension=this.tension,l},Dc.prototype.fromJSON=function(l){di.prototype.fromJSON.call(this,l),this.points=[];for(var t=0,i=l.points.length;t<i;t++){var d=l.points[t];this.points.push(new z().fromArray(d))}return this.closed=l.closed,this.curveType=l.curveType,this.tension=l.tension,this},Np.prototype=me(di.prototype),Np.prototype.constructor=Np,Np.prototype.isCubicBezierCurve=!0,Np.prototype.getPoint=function(l,t){t=t||new u;var i=this.v0,d=this.v1,v=this.v2,w=this.v3;return t.set(vx(l,i.x,d.x,v.x,w.x),vx(l,i.y,d.y,v.y,w.y)),t},Np.prototype.copy=function(l){return di.prototype.copy.call(this,l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this.v3.copy(l.v3),this},Np.prototype.toJSON=function(){var l=di.prototype.toJSON.call(this);return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l.v3=this.v3.toArray(),l},Np.prototype.fromJSON=function(l){return di.prototype.fromJSON.call(this,l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this.v3.fromArray(l.v3),this},Og.prototype=me(di.prototype),Og.prototype.constructor=Og,Og.prototype.isCubicBezierCurve3=!0,Og.prototype.getPoint=function(l,t){t=t||new z;var i=this.v0,d=this.v1,v=this.v2,w=this.v3;return t.set(vx(l,i.x,d.x,v.x,w.x),vx(l,i.y,d.y,v.y,w.y),vx(l,i.z,d.z,v.z,w.z)),t},Og.prototype.copy=function(l){return di.prototype.copy.call(this,l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this.v3.copy(l.v3),this},Og.prototype.toJSON=function(){var l=di.prototype.toJSON.call(this);return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l.v3=this.v3.toArray(),l},Og.prototype.fromJSON=function(l){return di.prototype.fromJSON.call(this,l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this.v3.fromArray(l.v3),this},Zh.prototype=me(di.prototype),Zh.prototype.constructor=Zh,Zh.prototype.isLineCurve=!0,Zh.prototype.getPoint=function(l,t){return t=t||new u,l===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(l).add(this.v1)),t},Zh.prototype.getPointAt=function(l,t){return this.getPoint(l,t)},Zh.prototype.getTangent=function(l,t){return l=t||new u,l=l.copy(this.v2).sub(this.v1).normalize()},Zh.prototype.copy=function(l){return di.prototype.copy.call(this,l),this.v1.copy(l.v1),this.v2.copy(l.v2),this},Zh.prototype.toJSON=function(){var l=di.prototype.toJSON.call(this);return l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l},Zh.prototype.fromJSON=function(l){return di.prototype.fromJSON.call(this,l),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this},Bp.prototype=me(di.prototype),Bp.prototype.constructor=Bp,Bp.prototype.isLineCurve3=!0,Bp.prototype.getPoint=function(l,t){return t=t||new z,l===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(l).add(this.v1)),t},Bp.prototype.getPointAt=function(l,t){return this.getPoint(l,t)},Bp.prototype.copy=function(l){return di.prototype.copy.call(this,l),this.v1.copy(l.v1),this.v2.copy(l.v2),this},Bp.prototype.toJSON=function(){var l=di.prototype.toJSON.call(this);return l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l},Bp.prototype.fromJSON=function(l){return di.prototype.fromJSON.call(this,l),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this},zp.prototype=me(di.prototype),zp.prototype.constructor=zp,zp.prototype.isQuadraticBezierCurve=!0,zp.prototype.getPoint=function(l,t){t=t||new u;var i=this.v0,d=this.v1,v=this.v2;return t.set(mx(l,i.x,d.x,v.x),mx(l,i.y,d.y,v.y)),t},zp.prototype.copy=function(l){return di.prototype.copy.call(this,l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this},zp.prototype.toJSON=function(){var l=di.prototype.toJSON.call(this);return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l},zp.prototype.fromJSON=function(l){return di.prototype.fromJSON.call(this,l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this},Dg.prototype=me(di.prototype),Dg.prototype.constructor=Dg,Dg.prototype.isQuadraticBezierCurve3=!0,Dg.prototype.getPoint=function(l,t){t=t||new z;var i=this.v0,d=this.v1,v=this.v2;return t.set(mx(l,i.x,d.x,v.x),mx(l,i.y,d.y,v.y),mx(l,i.z,d.z,v.z)),t},Dg.prototype.copy=function(l){return di.prototype.copy.call(this,l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this},Dg.prototype.toJSON=function(){var l=di.prototype.toJSON.call(this);return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l},Dg.prototype.fromJSON=function(l){return di.prototype.fromJSON.call(this,l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this},Up.prototype=me(di.prototype),Up.prototype.constructor=Up,Up.prototype.isSplineCurve=!0,Up.prototype.getPoint=function(l,t){t=t||new u;var i=this.points,d=(i.length-1)*l;l=Math.floor(d),d-=l;var v=i[l===0?l:l-1],w=i[l],T=i[l>i.length-2?i.length-1:l+1];return i=i[l>i.length-3?i.length-1:l+2],t.set($w(d,v.x,w.x,T.x,i.x),$w(d,v.y,w.y,T.y,i.y)),t},Up.prototype.copy=function(l){di.prototype.copy.call(this,l),this.points=[];for(var t=0,i=l.points.length;t<i;t++)this.points.push(l.points[t].clone());return this},Up.prototype.toJSON=function(){var l=di.prototype.toJSON.call(this);l.points=[];for(var t=0,i=this.points.length;t<i;t++)l.points.push(this.points[t].toArray());return l},Up.prototype.fromJSON=function(l){di.prototype.fromJSON.call(this,l),this.points=[];for(var t=0,i=l.points.length;t<i;t++){var d=l.points[t];this.points.push(new u().fromArray(d))}return this};var fw=dh({__proto__:null,ArcCurve:Gy,CatmullRomCurve3:Dc,CubicBezierCurve:Np,CubicBezierCurve3:Og,EllipseCurve:Wf,LineCurve:Zh,LineCurve3:Bp,QuadraticBezierCurve:zp,QuadraticBezierCurve3:Dg,SplineCurve:Up});jm.prototype=Ce(me(di.prototype),{constructor:jm,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);t.equals(i)||this.curves.push(new Zh(i,t))},getPoint:function(t){var i=t*this.getLength(),d=this.getCurveLengths();for(t=0;t<d.length;){if(d[t]>=i)return i=d[t]-i,t=this.curves[t],d=t.getLength(),t.getPointAt(d===0?0:1-i/d);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],i=0,d=0,v=this.curves.length;d<v;d++)i+=this.curves[d].getLength(),t.push(i);return this.cacheLengths=t},getSpacedPoints:function(t){t===void 0&&(t=40);for(var i=[],d=0;d<=t;d++)i.push(this.getPoint(d/t));return this.autoClose&&i.push(i[0]),i},getPoints:function(t){t=t||12;for(var i=[],d,v=0,w=this.curves;v<w.length;v++){var T=w[v];T=T.getPoints(T&&T.isEllipseCurve?2*t:T&&(T.isLineCurve||T.isLineCurve3)?1:T&&T.isSplineCurve?t*T.points.length:t);for(var b=0;b<T.length;b++){var D=T[b];d&&d.equals(D)||(i.push(D),d=D)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){di.prototype.copy.call(this,t),this.curves=[];for(var i=0,d=t.curves.length;i<d;i++)this.curves.push(t.curves[i].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=di.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var i=0,d=this.curves.length;i<d;i++)t.curves.push(this.curves[i].toJSON());return t},fromJSON:function(t){di.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var i=0,d=t.curves.length;i<d;i++){var v=t.curves[i];this.curves.push(new fw[v.type]().fromJSON(v))}return this}}),kp.prototype=Ce(me(jm.prototype),{constructor:kp,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var i=1,d=t.length;i<d;i++)this.lineTo(t[i].x,t[i].y);return this},moveTo:function(t,i){return this.currentPoint.set(t,i),this},lineTo:function(t,i){var d=new Zh(this.currentPoint.clone(),new u(t,i));return this.curves.push(d),this.currentPoint.set(t,i),this},quadraticCurveTo:function(t,i,d,v){return t=new zp(this.currentPoint.clone(),new u(t,i),new u(d,v)),this.curves.push(t),this.currentPoint.set(d,v),this},bezierCurveTo:function(t,i,d,v,w,T){return t=new Np(this.currentPoint.clone(),new u(t,i),new u(d,v),new u(w,T)),this.curves.push(t),this.currentPoint.set(w,T),this},splineThru:function(t){var i=[this.currentPoint.clone()].concat(t);return i=new Up(i),this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,i,d,v,w,T){return this.absarc(t+this.currentPoint.x,i+this.currentPoint.y,d,v,w,T),this},absarc:function(t,i,d,v,w,T){return this.absellipse(t,i,d,d,v,w,T),this},ellipse:function(t,i,d,v,w,T,b,D){return this.absellipse(t+this.currentPoint.x,i+this.currentPoint.y,d,v,w,T,b,D),this},absellipse:function(t,i,d,v,w,T,b,D){return t=new Wf(t,i,d,v,w,T,b,D),0<this.curves.length&&(i=t.getPoint(0),i.equals(this.currentPoint)||this.lineTo(i.x,i.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t),this},copy:function(t){return jm.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=jm.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return jm.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Kv.prototype=Ce(me(kp.prototype),{constructor:Kv,getPointsHoles:function(t){for(var i=[],d=0,v=this.holes.length;d<v;d++)i[d]=this.holes[d].getPoints(t);return i},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){kp.prototype.copy.call(this,t),this.holes=[];for(var i=0,d=t.holes.length;i<d;i++)this.holes.push(t.holes[i].clone());return this},toJSON:function(){var t=kp.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var i=0,d=this.holes.length;i<d;i++)t.holes.push(this.holes[i].toJSON());return t},fromJSON:function(t){kp.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var i=0,d=t.holes.length;i<d;i++){var v=t.holes[i];this.holes.push(new kp().fromJSON(v))}return this}}),ms.prototype=Ce(me(oe.prototype),{constructor:ms,isLight:!0,copy:function(t){return oe.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return t=oe.prototype.toJSON.call(this,t),t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}),zA.prototype=Ce(me(ms.prototype),{constructor:zA,isHemisphereLight:!0,copy:function(t){return ms.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Ce(Fg.prototype,{_projScreenMatrix:new Z,_lightPositionWorld:new z,_lookTarget:new z,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var i=this.camera,d=this.matrix,v=this._projScreenMatrix,w=this._lookTarget,T=this._lightPositionWorld;T.setFromMatrixPosition(t.matrixWorld),i.position.copy(T),w.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(w),i.updateMatrixWorld(),v.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(v),d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(i.projectionMatrix),d.multiply(i.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t={};return this.bias!==0&&(t.bias=this.bias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),UA.prototype=Ce(me(Fg.prototype),{constructor:UA,isSpotLightShadow:!0,updateMatrices:function(t){var i=this.camera,d=2*ho.RAD2DEG*t.angle,v=this.mapSize.width/this.mapSize.height,w=t.distance||i.far;(d!==i.fov||v!==i.aspect||w!==i.far)&&(i.fov=d,i.aspect=v,i.far=w,i.updateProjectionMatrix()),Fg.prototype.updateMatrices.call(this,t)}}),kA.prototype=Ce(me(ms.prototype),{constructor:kA,isSpotLight:!0,copy:function(t){return ms.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),xC.prototype=Ce(me(Fg.prototype),{constructor:xC,isPointLightShadow:!0,updateMatrices:function(t,i){i===void 0&&(i=0);var d=this.camera,v=this.matrix,w=this._lightPositionWorld,T=this._lookTarget,b=this._projScreenMatrix;w.setFromMatrixPosition(t.matrixWorld),d.position.copy(w),T.copy(d.position),T.add(this._cubeDirections[i]),d.up.copy(this._cubeUps[i]),d.lookAt(T),d.updateMatrixWorld(),v.makeTranslation(-w.x,-w.y,-w.z),b.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),this._frustum.setFromProjectionMatrix(b)}}),HA.prototype=Ce(me(ms.prototype),{constructor:HA,isPointLight:!0,copy:function(t){return ms.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),jy.prototype=Ce(me(Jt.prototype),{constructor:jy,isOrthographicCamera:!0,copy:function(t,i){return Jt.prototype.copy.call(this,t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Ce({},t.view),this},setViewOffset:function(t,i,d,v,w,T){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=d,this.view.offsetY=v,this.view.width=w,this.view.height=T,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),d=(this.right+this.left)/2,v=(this.top+this.bottom)/2,w=d-t;d+=t,t=v+i,i=v-i,this.view!==null&&this.view.enabled&&(v=(this.right-this.left)/this.view.fullWidth/this.zoom,i=(this.top-this.bottom)/this.view.fullHeight/this.zoom,w+=v*this.view.offsetX,d=w+v*this.view.width,t-=i*this.view.offsetY,i=t-i*this.view.height),this.projectionMatrix.makeOrthographic(w,d,t,i,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return t=oe.prototype.toJSON.call(this,t),t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Ce({},this.view)),t}}),GA.prototype=Ce(me(Fg.prototype),{constructor:GA,isDirectionalLightShadow:!0,updateMatrices:function(t){Fg.prototype.updateMatrices.call(this,t)}}),jA.prototype=Ce(me(ms.prototype),{constructor:jA,isDirectionalLight:!0,copy:function(t){return ms.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),VA.prototype=Ce(me(ms.prototype),{constructor:VA,isAmbientLight:!0}),WA.prototype=Ce(me(ms.prototype),{constructor:WA,isRectAreaLight:!0,copy:function(t){return ms.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return t=ms.prototype.toJSON.call(this,t),t.object.width=this.width,t.object.height=this.height,t}}),Ce(XA.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var i=0;9>i;i++)this.coefficients[i].copy(t[i]);return this},zero:function(){for(var t=0;9>t;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,i){var d=t.x,v=t.y;t=t.z;var w=this.coefficients;return i.copy(w[0]).multiplyScalar(.282095),i.addScaledVector(w[1],.488603*v),i.addScaledVector(w[2],.488603*t),i.addScaledVector(w[3],.488603*d),i.addScaledVector(w[4],1.092548*d*v),i.addScaledVector(w[5],1.092548*v*t),i.addScaledVector(w[6],.315392*(3*t*t-1)),i.addScaledVector(w[7],1.092548*d*t),i.addScaledVector(w[8],.546274*(d*d-v*v)),i},getIrradianceAt:function(t,i){var d=t.x,v=t.y;t=t.z;var w=this.coefficients;return i.copy(w[0]).multiplyScalar(.886227),i.addScaledVector(w[1],1.023328*v),i.addScaledVector(w[2],1.023328*t),i.addScaledVector(w[3],1.023328*d),i.addScaledVector(w[4],.858086*d*v),i.addScaledVector(w[5],.858086*v*t),i.addScaledVector(w[6],.743125*t*t-.247708),i.addScaledVector(w[7],.858086*d*t),i.addScaledVector(w[8],.429043*(d*d-v*v)),i},add:function(t){for(var i=0;9>i;i++)this.coefficients[i].add(t.coefficients[i]);return this},addScaledSH:function(t,i){for(var d=0;9>d;d++)this.coefficients[d].addScaledVector(t.coefficients[d],i);return this},scale:function(t){for(var i=0;9>i;i++)this.coefficients[i].multiplyScalar(t);return this},lerp:function(t,i){for(var d=0;9>d;d++)this.coefficients[d].lerp(t.coefficients[d],i);return this},equals:function(t){for(var i=0;9>i;i++)if(!this.coefficients[i].equals(t.coefficients[i]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(t,i){i===void 0&&(i=0);for(var d=this.coefficients,v=0;9>v;v++)d[v].fromArray(t,i+3*v);return this},toArray:function(t,i){t===void 0&&(t=[]),i===void 0&&(i=0);for(var d=this.coefficients,v=0;9>v;v++)d[v].toArray(t,i+3*v);return t}}),Ce(XA,{getBasisAt:function(t,i){var d=t.x,v=t.y;t=t.z,i[0]=.282095,i[1]=.488603*v,i[2]=.488603*t,i[3]=.488603*d,i[4]=1.092548*d*v,i[5]=1.092548*v*t,i[6]=.315392*(3*t*t-1),i[7]=1.092548*d*t,i[8]=.546274*(d*d-v*v)}}),zd.prototype=Ce(me(ms.prototype),{constructor:zd,isLightProbe:!0,copy:function(t){return ms.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){return t=ms.prototype.toJSON.call(this,t),t.object.sh=this.sh.toArray(),t}}),YA.prototype=Ce(me(Oa.prototype),{constructor:YA,load:function(t,i,d,v){var w=this,T=new Bd(w.manager);T.setPath(w.path),T.load(t,function(b){try{i(w.parse(JSON.parse(b)))}catch(D){v?v(D):console.error(D),w.manager.itemError(t)}},d,v)},parse:function(t){function i(D){return d[D]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",D),d[D]}var d=this.textures,v=new US[t.type];if(t.uuid!==void 0&&(v.uuid=t.uuid),t.name!==void 0&&(v.name=t.name),t.color!==void 0&&v.color.setHex(t.color),t.roughness!==void 0&&(v.roughness=t.roughness),t.metalness!==void 0&&(v.metalness=t.metalness),t.sheen!==void 0&&(v.sheen=new We().setHex(t.sheen)),t.emissive!==void 0&&v.emissive.setHex(t.emissive),t.specular!==void 0&&v.specular.setHex(t.specular),t.shininess!==void 0&&(v.shininess=t.shininess),t.clearcoat!==void 0&&(v.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(v.clearcoatRoughness=t.clearcoatRoughness),t.fog!==void 0&&(v.fog=t.fog),t.flatShading!==void 0&&(v.flatShading=t.flatShading),t.blending!==void 0&&(v.blending=t.blending),t.combine!==void 0&&(v.combine=t.combine),t.side!==void 0&&(v.side=t.side),t.opacity!==void 0&&(v.opacity=t.opacity),t.transparent!==void 0&&(v.transparent=t.transparent),t.alphaTest!==void 0&&(v.alphaTest=t.alphaTest),t.depthTest!==void 0&&(v.depthTest=t.depthTest),t.depthWrite!==void 0&&(v.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(v.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(v.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(v.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(v.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(v.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(v.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(v.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(v.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(v.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(v.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(v.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(v.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(v.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(v.rotation=t.rotation),t.linewidth!==1&&(v.linewidth=t.linewidth),t.dashSize!==void 0&&(v.dashSize=t.dashSize),t.gapSize!==void 0&&(v.gapSize=t.gapSize),t.scale!==void 0&&(v.scale=t.scale),t.polygonOffset!==void 0&&(v.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(v.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(v.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(v.skinning=t.skinning),t.morphTargets!==void 0&&(v.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(v.morphNormals=t.morphNormals),t.dithering!==void 0&&(v.dithering=t.dithering),t.vertexTangents!==void 0&&(v.vertexTangents=t.vertexTangents),t.visible!==void 0&&(v.visible=t.visible),t.toneMapped!==void 0&&(v.toneMapped=t.toneMapped),t.userData!==void 0&&(v.userData=t.userData),t.vertexColors!==void 0&&(v.vertexColors=typeof t.vertexColors=="number"?0<t.vertexColors:t.vertexColors),t.uniforms!==void 0)for(var w in t.uniforms){var T=t.uniforms[w];switch(v.uniforms[w]={},T.type){case"t":v.uniforms[w].value=i(T.value);break;case"c":v.uniforms[w].value=new We().setHex(T.value);break;case"v2":v.uniforms[w].value=new u().fromArray(T.value);break;case"v3":v.uniforms[w].value=new z().fromArray(T.value);break;case"v4":v.uniforms[w].value=new C().fromArray(T.value);break;case"m3":v.uniforms[w].value=new p().fromArray(T.value);case"m4":v.uniforms[w].value=new Z().fromArray(T.value);break;default:v.uniforms[w].value=T.value}}if(t.defines!==void 0&&(v.defines=t.defines),t.vertexShader!==void 0&&(v.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(v.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(var b in t.extensions)v.extensions[b]=t.extensions[b];return t.shading!==void 0&&(v.flatShading=t.shading===1),t.size!==void 0&&(v.size=t.size),t.sizeAttenuation!==void 0&&(v.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(v.map=i(t.map)),t.matcap!==void 0&&(v.matcap=i(t.matcap)),t.alphaMap!==void 0&&(v.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&&(v.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&&(v.bumpScale=t.bumpScale),t.normalMap!==void 0&&(v.normalMap=i(t.normalMap)),t.normalMapType!==void 0&&(v.normalMapType=t.normalMapType),t.normalScale!==void 0&&(w=t.normalScale,Array.isArray(w)===!1&&(w=[w,w]),v.normalScale=new u().fromArray(w)),t.displacementMap!==void 0&&(v.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&&(v.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(v.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(v.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&&(v.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&&(v.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&&(v.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(v.specularMap=i(t.specularMap)),t.envMap!==void 0&&(v.envMap=i(t.envMap)),t.envMapIntensity!==void 0&&(v.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(v.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(v.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(v.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&&(v.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(v.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&&(v.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(v.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&&(v.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(v.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(v.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(v.clearcoatNormalScale=new u().fromArray(t.clearcoatNormalScale)),v},setTextures:function(t){return this.textures=t,this}});var dw={decodeText:function(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);for(var i="",d=0,v=t.length;d<v;d++)i+=String.fromCharCode(t[d]);try{return decodeURIComponent(escape(i))}catch(w){return i}},extractUrlBase:function(t){var i=t.lastIndexOf("/");return i===-1?"./":t.substr(0,i+1)}};yx.prototype=Ce(me(Fe.prototype),{constructor:yx,isInstancedBufferGeometry:!0,copy:function(t){return Fe.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t=Fe.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),ZA.prototype=Ce(me(tr.prototype),{constructor:ZA,isInstancedBufferAttribute:!0,copy:function(t){return tr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=tr.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),KA.prototype=Ce(me(Oa.prototype),{constructor:KA,load:function(t,i,d,v){var w=this,T=new Bd(w.manager);T.setPath(w.path),T.load(t,function(b){try{i(w.parse(JSON.parse(b)))}catch(D){v?v(D):console.error(D),w.manager.itemError(t)}},d,v)},parse:function(t){var i=t.isInstancedBufferGeometry?new yx:new Fe,d=t.data.index;if(d!==void 0){var v=new pw[d.type](d.array);i.setIndex(new tr(v,1))}d=t.data.attributes;for(var w in d){var T=d[w];v=new pw[T.type](T.array),v=new(T.isInstancedBufferAttribute?ZA:tr)(v,T.itemSize,T.normalized),T.name!==void 0&&(v.name=T.name),i.setAttribute(w,v)}var b=t.data.morphAttributes;if(b)for(w in b){var D=b[w],G=[];d=0;for(var Y=D.length;d<Y;d++)T=D[d],v=new pw[T.type](T.array),v=new tr(v,T.itemSize,T.normalized),T.name!==void 0&&(v.name=T.name),G.push(v);i.morphAttributes[w]=G}if(t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0),w=t.data.groups||t.data.drawcalls||t.data.offsets,w!==void 0)for(d=0,T=w.length;d!==T;++d)v=w[d],i.addGroup(v.start,v.count,v.materialIndex);return d=t.data.boundingSphere,d!==void 0&&(w=new z,d.center!==void 0&&w.fromArray(d.center),i.boundingSphere=new ze(w,d.radius)),t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}});var pw={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};JA.prototype=Ce(me(Oa.prototype),{constructor:JA,load:function(t,i,d,v){var w=this,T=this.path===""?dw.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||T,T=new Bd(w.manager),T.setPath(this.path),T.load(t,function(b){var D=null;try{D=JSON.parse(b)}catch(G){v!==void 0&&v(G),console.error("THREE:ObjectLoader: Can't parse "+t+".",G.message);return}b=D.metadata,b===void 0||b.type===void 0||b.type.toLowerCase()==="geometry"?console.error("THREE.ObjectLoader: Can't load "+t):w.parse(D,i)},d,v)},parse:function(t,i){var d=this.parseShape(t.shapes);d=this.parseGeometries(t.geometries,d);var v=this.parseImages(t.images,function(){i!==void 0&&i(w)});v=this.parseTextures(t.textures,v),v=this.parseMaterials(t.materials,v);var w=this.parseObject(t.object,d,v);return t.animations&&(w.animations=this.parseAnimations(t.animations)),t.images!==void 0&&t.images.length!==0||i===void 0||i(w),w},parseShape:function(t){var i={};if(t!==void 0)for(var d=0,v=t.length;d<v;d++){var w=new Kv().fromJSON(t[d]);i[w.uuid]=w}return i},parseGeometries:function(t,i){var d={};if(t!==void 0)for(var v=new KA,w=0,T=t.length;w<T;w++){var b=t[w];switch(b.type){case"PlaneGeometry":case"PlaneBufferGeometry":var D=new Ch[b.type](b.width,b.height,b.widthSegments,b.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":D=new Ch[b.type](b.width,b.height,b.depth,b.widthSegments,b.heightSegments,b.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":D=new Ch[b.type](b.radius,b.segments,b.thetaStart,b.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":D=new Ch[b.type](b.radiusTop,b.radiusBottom,b.height,b.radialSegments,b.heightSegments,b.openEnded,b.thetaStart,b.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":D=new Ch[b.type](b.radius,b.height,b.radialSegments,b.heightSegments,b.openEnded,b.thetaStart,b.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":D=new Ch[b.type](b.radius,b.widthSegments,b.heightSegments,b.phiStart,b.phiLength,b.thetaStart,b.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":D=new Ch[b.type](b.radius,b.detail);break;case"RingGeometry":case"RingBufferGeometry":D=new Ch[b.type](b.innerRadius,b.outerRadius,b.thetaSegments,b.phiSegments,b.thetaStart,b.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":D=new Ch[b.type](b.radius,b.tube,b.radialSegments,b.tubularSegments,b.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":D=new Ch[b.type](b.radius,b.tube,b.tubularSegments,b.radialSegments,b.p,b.q);break;case"TubeGeometry":case"TubeBufferGeometry":D=new Ch[b.type](new fw[b.path.type]().fromJSON(b.path),b.tubularSegments,b.radius,b.radialSegments,b.closed);break;case"LatheGeometry":case"LatheBufferGeometry":D=new Ch[b.type](b.points,b.segments,b.phiStart,b.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":D=new Ch[b.type](b.vertices,b.indices,b.radius,b.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":D=[];for(var G=0,Y=b.shapes.length;G<Y;G++){var re=i[b.shapes[G]];D.push(re)}D=new Ch[b.type](D,b.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(D=[],G=0,Y=b.shapes.length;G<Y;G++)re=i[b.shapes[G]],D.push(re);G=b.options.extrudePath,G!==void 0&&(b.options.extrudePath=new fw[G.type]().fromJSON(G)),D=new Ch[b.type](D,b.options);break;case"BufferGeometry":case"InstancedBufferGeometry":D=v.parse(b);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+b.type+'"');continue}D.uuid=b.uuid,b.name!==void 0&&(D.name=b.name),D.isBufferGeometry===!0&&b.userData!==void 0&&(D.userData=b.userData),d[b.uuid]=D}return d},parseMaterials:function(t,i){var d={},v={};if(t!==void 0){var w=new YA;w.setTextures(i),i=0;for(var T=t.length;i<T;i++){var b=t[i];if(b.type==="MultiMaterial"){for(var D=[],G=0;G<b.materials.length;G++){var Y=b.materials[G];d[Y.uuid]===void 0&&(d[Y.uuid]=w.parse(Y)),D.push(d[Y.uuid])}v[b.uuid]=D}else d[b.uuid]===void 0&&(d[b.uuid]=w.parse(b)),v[b.uuid]=d[b.uuid]}}return v},parseAnimations:function(t){for(var i=[],d=0;d<t.length;d++){var v=t[d],w=Nd.parse(v);v.uuid!==void 0&&(w.uuid=v.uuid),i.push(w)}return i},parseImages:function(t,i){function d(ae){return v.manager.itemStart(ae),T.load(ae,function(){v.manager.itemEnd(ae)},void 0,function(){v.manager.itemError(ae),v.manager.itemEnd(ae)})}var v=this,w={};if(t!==void 0&&0<t.length){i=new gC(i);var T=new Hy(i);T.setCrossOrigin(this.crossOrigin),i=0;for(var b=t.length;i<b;i++){var D=t[i],G=D.url;if(Array.isArray(G)){w[D.uuid]=[];for(var Y=0,re=G.length;Y<re;Y++){var se=G[Y];se=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(se)?se:v.resourcePath+se,w[D.uuid].push(d(se))}}else se=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(D.url)?D.url:v.resourcePath+D.url,w[D.uuid]=d(se)}}return w},parseTextures:function(t,i){function d(G,Y){return typeof G=="number"?G:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",G),Y[G])}var v={};if(t!==void 0)for(var w=0,T=t.length;w<T;w++){var b=t[w];b.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',b.uuid),i[b.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",b.image);var D=Array.isArray(i[b.image])?new Dd(i[b.image]):new y(i[b.image]);D.needsUpdate=!0,D.uuid=b.uuid,b.name!==void 0&&(D.name=b.name),b.mapping!==void 0&&(D.mapping=d(b.mapping,kS)),b.offset!==void 0&&D.offset.fromArray(b.offset),b.repeat!==void 0&&D.repeat.fromArray(b.repeat),b.center!==void 0&&D.center.fromArray(b.center),b.rotation!==void 0&&(D.rotation=b.rotation),b.wrap!==void 0&&(D.wrapS=d(b.wrap[0],W_),D.wrapT=d(b.wrap[1],W_)),b.format!==void 0&&(D.format=b.format),b.type!==void 0&&(D.type=b.type),b.encoding!==void 0&&(D.encoding=b.encoding),b.minFilter!==void 0&&(D.minFilter=d(b.minFilter,X_)),b.magFilter!==void 0&&(D.magFilter=d(b.magFilter,X_)),b.anisotropy!==void 0&&(D.anisotropy=b.anisotropy),b.flipY!==void 0&&(D.flipY=b.flipY),b.premultiplyAlpha!==void 0&&(D.premultiplyAlpha=b.premultiplyAlpha),b.unpackAlignment!==void 0&&(D.unpackAlignment=b.unpackAlignment),v[b.uuid]=D}return v},parseObject:function(t,i,d){function v(Y){return i[Y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Y),i[Y]}function w(Y){if(Y!==void 0){if(Array.isArray(Y)){for(var re=[],se=0,ae=Y.length;se<ae;se++){var fe=Y[se];d[fe]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",fe),re.push(d[fe])}return re}return d[Y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Y),d[Y]}}switch(t.type){case"Scene":var T=new be;t.background!==void 0&&ol(t.background)&&(T.background=new We(t.background)),t.fog!==void 0&&(t.fog.type==="Fog"?T.fog=new AA(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(T.fog=new xA(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":T=new Ht(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(T.focus=t.focus),t.zoom!==void 0&&(T.zoom=t.zoom),t.filmGauge!==void 0&&(T.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(T.filmOffset=t.filmOffset),t.view!==void 0&&(T.view=Ce({},t.view));break;case"OrthographicCamera":T=new jy(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(T.zoom=t.zoom),t.view!==void 0&&(T.view=Ce({},t.view));break;case"AmbientLight":T=new VA(t.color,t.intensity);break;case"DirectionalLight":T=new jA(t.color,t.intensity);break;case"PointLight":T=new HA(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":T=new WA(t.color,t.intensity,t.width,t.height);break;case"SpotLight":T=new kA(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":T=new zA(t.color,t.groundColor,t.intensity);break;case"LightProbe":T=new zd().fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":T=v(t.geometry);var b=w(t.material);T=new Ve(T,b);break;case"InstancedMesh":T=v(t.geometry),b=w(t.material);var D=t.instanceMatrix;T=new MA(T,b,t.count),T.instanceMatrix=new tr(new Float32Array(D.array),16);break;case"LOD":T=new X1;break;case"Line":T=new jf(v(t.geometry),w(t.material),t.mode);break;case"LineLoop":T=new SA(v(t.geometry),w(t.material));break;case"LineSegments":T=new Js(v(t.geometry),w(t.material));break;case"PointCloud":case"Points":T=new My(v(t.geometry),w(t.material));break;case"Sprite":T=new W1(w(t.material));break;case"Group":T=new _y;break;default:T=new oe}if(T.uuid=t.uuid,t.name!==void 0&&(T.name=t.name),t.matrix!==void 0?(T.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(T.matrixAutoUpdate=t.matrixAutoUpdate),T.matrixAutoUpdate&&T.matrix.decompose(T.position,T.quaternion,T.scale)):(t.position!==void 0&&T.position.fromArray(t.position),t.rotation!==void 0&&T.rotation.fromArray(t.rotation),t.quaternion!==void 0&&T.quaternion.fromArray(t.quaternion),t.scale!==void 0&&T.scale.fromArray(t.scale)),t.castShadow!==void 0&&(T.castShadow=t.castShadow),t.receiveShadow!==void 0&&(T.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(T.shadow.bias=t.shadow.bias),t.shadow.radius!==void 0&&(T.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&T.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(T.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(T.visible=t.visible),t.frustumCulled!==void 0&&(T.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(T.renderOrder=t.renderOrder),t.userData!==void 0&&(T.userData=t.userData),t.layers!==void 0&&(T.layers.mask=t.layers),t.children!==void 0)for(D=t.children,b=0;b<D.length;b++)T.add(this.parseObject(D[b],i,d));if(t.type==="LOD")for(t.autoUpdate!==void 0&&(T.autoUpdate=t.autoUpdate),t=t.levels,D=0;D<t.length;D++){b=t[D];var G=T.getObjectByProperty("uuid",b.object);G!==void 0&&T.addLevel(G,b.distance)}return T}});var kS={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},W_={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},X_={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};AC.prototype=Ce(me(Oa.prototype),{constructor:AC,setOptions:function(t){return this.options=t,this},load:function(t,i,d,v){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var w=this,T=Y0.get(t);if(T!==void 0)return w.manager.itemStart(t),setTimeout(function(){i&&i(T),w.manager.itemEnd(t)},0),T;fetch(t).then(function(b){return b.blob()}).then(function(b){return w.options===void 0?createImageBitmap(b):createImageBitmap(b,w.options)}).then(function(b){Y0.add(t,b),i&&i(b),w.manager.itemEnd(t)}).catch(function(b){v&&v(b),w.manager.itemError(t),w.manager.itemEnd(t)}),w.manager.itemStart(t)}}),Ce(CC.prototype,{moveTo:function(t,i){return this.currentPath=new kp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,i),this},lineTo:function(t,i){return this.currentPath.lineTo(t,i),this},quadraticCurveTo:function(t,i,d,v){return this.currentPath.quadraticCurveTo(t,i,d,v),this},bezierCurveTo:function(t,i,d,v,w,T){return this.currentPath.bezierCurveTo(t,i,d,v,w,T),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,i){function d(ht){for(var ct=[],mt=0,Mt=ht.length;mt<Mt;mt++){var $t=ht[mt],Bt=new Kv;Bt.curves=$t.curves,ct.push(Bt)}return ct}function v(ht,ct){for(var mt=ct.length,Mt=!1,$t=mt-1,Bt=0;Bt<mt;$t=Bt++){var wt=ct[$t],Mr=ct[Bt],Ot=Mr.x-wt.x,Hr=Mr.y-wt.y;if(Math.abs(Hr)>Ro){if(0>Hr&&(wt=ct[Bt],Ot=-Ot,Mr=ct[$t],Hr=-Hr),!(ht.y<wt.y||ht.y>Mr.y))if(ht.y===wt.y){if(ht.x===wt.x)return!0}else{if($t=Hr*(ht.x-wt.x)-Ot*(ht.y-wt.y),$t===0)return!0;0>$t||(Mt=!Mt)}}else if(ht.y===wt.y&&(Mr.x<=ht.x&&ht.x<=wt.x||wt.x<=ht.x&&ht.x<=Mr.x))return!0}return Mt}var w=qm.isClockWise,T=this.subPaths;if(T.length===0)return[];if(i===!0)return d(T);if(i=[],T.length===1){var b=T[0],D=new Kv;return D.curves=b.curves,i.push(D),i}var G=!w(T[0].getPoints());G=t?!G:G,D=[];var Y=[],re=[],se=0;Y[se]=void 0,re[se]=[];for(var ae=0,fe=T.length;ae<fe;ae++){b=T[ae];var ve=b.getPoints(),Ze=w(ve);(Ze=t?!Ze:Ze)?(!G&&Y[se]&&se++,Y[se]={s:new Kv,p:ve},Y[se].s.curves=b.curves,G&&se++,re[se]=[]):re[se].push({h:b,p:ve[0]})}if(!Y[0])return d(T);if(1<Y.length){for(ae=!1,t=[],w=0,T=Y.length;w<T;w++)D[w]=[];for(w=0,T=Y.length;w<T;w++)for(b=re[w],Ze=0;Ze<b.length;Ze++){for(G=b[Ze],se=!0,ve=0;ve<Y.length;ve++)v(G.p,Y[ve].p)&&(w!==ve&&t.push({froms:w,tos:ve,hole:Ze}),se?(se=!1,D[ve].push(G)):ae=!0);se&&D[w].push(G)}0<t.length&&(ae||(re=D))}for(ae=0,w=Y.length;ae<w;ae++)for(D=Y[ae].s,i.push(D),t=re[ae],T=0,b=t.length;T<b;T++)D.holes.push(t[T].h);return i}}),Ce(wC.prototype,{isFont:!0,generateShapes:function(t,i){i===void 0&&(i=100);var d=[],v=i;i=this.data;var w=lh?lh(t):String(t).split("");v/=i.resolution;var T=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*v;t=[];for(var b=0,D=0,G=0;G<w.length;G++){var Y=w[G];if(Y===`
`)b=0,D-=T;else{var re=Y;Y=v;var se=b,ae=D,fe=i,ve=fe.glyphs[re]||fe.glyphs["?"];if(ve){if(re=new CC,ve.o){fe=ve._cachedOutline||(ve._cachedOutline=ve.o.split(" "));for(var Ze=0,ht=fe.length;Ze<ht;)switch(fe[Ze++]){case"m":var ct=fe[Ze++]*Y+se,mt=fe[Ze++]*Y+ae;re.moveTo(ct,mt);break;case"l":ct=fe[Ze++]*Y+se,mt=fe[Ze++]*Y+ae,re.lineTo(ct,mt);break;case"q":var Mt=fe[Ze++]*Y+se,$t=fe[Ze++]*Y+ae,Bt=fe[Ze++]*Y+se,wt=fe[Ze++]*Y+ae;re.quadraticCurveTo(Bt,wt,Mt,$t);break;case"b":Mt=fe[Ze++]*Y+se,$t=fe[Ze++]*Y+ae,Bt=fe[Ze++]*Y+se,wt=fe[Ze++]*Y+ae,ct=fe[Ze++]*Y+se,mt=fe[Ze++]*Y+ae,re.bezierCurveTo(Bt,wt,ct,mt,Mt,$t)}}Y={offsetX:ve.ha*Y,path:re}}else console.error('THREE.Font: character "'+re+'" does not exists in font family '+fe.familyName+"."),Y=void 0;b+=Y.offsetX,t.push(Y.path)}}for(i=0,w=t.length;i<w;i++)Array.prototype.push.apply(d,t[i].toShapes());return d}}),_C.prototype=Ce(me(Oa.prototype),{constructor:_C,load:function(t,i,d,v){var w=this,T=new Bd(this.manager);T.setPath(this.path),T.load(t,function(b){try{var D=JSON.parse(b)}catch(G){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),D=JSON.parse(b.substring(65,b.length-2))}b=w.parse(D),i&&i(b)},d,v)},parse:function(t){return new wC(t)}});var S2,gw={getContext:function(){return S2===void 0&&(S2=new(window.AudioContext||window.webkitAudioContext)),S2},setContext:function(t){S2=t}};qA.prototype=Ce(me(Oa.prototype),{constructor:qA,load:function(t,i,d,v){var w=this,T=new Bd(w.manager);T.setResponseType("arraybuffer"),T.setPath(w.path),T.load(t,function(b){try{var D=b.slice(0);gw.getContext().decodeAudioData(D,function(G){i(G)})}catch(G){v?v(G):console.error(G),w.manager.itemError(t)}},d,v)}}),MC.prototype=Ce(me(zd.prototype),{constructor:MC,isHemisphereLightProbe:!0,copy:function(t){return zd.prototype.copy.call(this,t),this},toJSON:function(t){return zd.prototype.toJSON.call(this,t)}}),SC.prototype=Ce(me(zd.prototype),{constructor:SC,isAmbientLightProbe:!0,copy:function(t){return zd.prototype.copy.call(this,t),this},toJSON:function(t){return zd.prototype.toJSON.call(this,t)}});var Y_=new Z,Z_=new Z;Ce(e_.prototype,{update:function(t){var i=this._cache;if(i.focus!==t.focus||i.fov!==t.fov||i.aspect!==t.aspect*this.aspect||i.near!==t.near||i.far!==t.far||i.zoom!==t.zoom||i.eyeSep!==this.eyeSep){i.focus=t.focus,i.fov=t.fov,i.aspect=t.aspect*this.aspect,i.near=t.near,i.far=t.far,i.zoom=t.zoom,i.eyeSep=this.eyeSep;var d=t.projectionMatrix.clone(),v=i.eyeSep/2,w=v*i.near/i.focus,T=i.near*Math.tan(ho.DEG2RAD*i.fov*.5)/i.zoom;Z_.elements[12]=-v,Y_.elements[12]=v,v=-T*i.aspect+w;var b=T*i.aspect+w;d.elements[0]=2*i.near/(b-v),d.elements[8]=(b+v)/(b-v),this.cameraL.projectionMatrix.copy(d),v=-T*i.aspect-w,b=T*i.aspect-w,d.elements[0]=2*i.near/(b-v),d.elements[8]=(b+v)/(b-v),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Z_),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Y_)}}),Ce(TC.prototype,{start:function(){this.oldTime=this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var i=(typeof performance=="undefined"?Date:performance).now();t=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=t}return t}});var Z0=new z,K_=new N,HS=new z,K0=new z;IC.prototype=Ce(me(oe.prototype),{constructor:IC,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){oe.prototype.updateMatrixWorld.call(this,t),t=this.context.listener;var i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Z0,K_,HS),K0.set(0,0,-1).applyQuaternion(K_),t.positionX){var d=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Z0.x,d),t.positionY.linearRampToValueAtTime(Z0.y,d),t.positionZ.linearRampToValueAtTime(Z0.z,d),t.forwardX.linearRampToValueAtTime(K0.x,d),t.forwardY.linearRampToValueAtTime(K0.y,d),t.forwardZ.linearRampToValueAtTime(K0.z,d),t.upX.linearRampToValueAtTime(i.x,d),t.upY.linearRampToValueAtTime(i.y,d),t.upZ.linearRampToValueAtTime(i.z,d)}else t.setPosition(Z0.x,Z0.y,Z0.z),t.setOrientation(K0.x,K0.y,K0.z,i.x,i.y,i.z)}}),Vy.prototype=Ce(me(oe.prototype),{constructor:Vy,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(t===void 0&&(t=0),this.isPlaying===!0)console.warn("THREE.Audio: Audio is already playing.");else if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+t,t=this.context.createBufferSource(),t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,i=this.filters.length;t<i;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,i=this.filters.length;t<i;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var J0=new z,J_=new N,GS=new z,q0=new z;EC.prototype=Ce(me(Vy.prototype),{constructor:EC,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,i,d){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=i,this.panner.coneOuterGain=d,this},updateMatrixWorld:function(t){if(oe.prototype.updateMatrixWorld.call(this,t),this.hasPlaybackControl!==!0||this.isPlaying!==!1)if(this.matrixWorld.decompose(J0,J_,GS),q0.set(0,0,1).applyQuaternion(J_),t=this.panner,t.positionX){var i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(J0.x,i),t.positionY.linearRampToValueAtTime(J0.y,i),t.positionZ.linearRampToValueAtTime(J0.z,i),t.orientationX.linearRampToValueAtTime(q0.x,i),t.orientationY.linearRampToValueAtTime(q0.y,i),t.orientationZ.linearRampToValueAtTime(q0.z,i)}else t.setPosition(J0.x,J0.y,J0.z),t.setOrientation(q0.x,q0.y,q0.z)}}),Ce(bC.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,i=this.getFrequencyData(),d=0;d<i.length;d++)t+=i[d];return t/i.length}}),Ce(LC.prototype,{accumulate:function(t,i){var d=this.buffer,v=this.valueSize;t=t*v+v;var w=this.cumulativeWeight;if(w===0){for(w=0;w!==v;++w)d[t+w]=d[w];w=i}else w+=i,this._mixBufferRegion(d,t,0,i/w,v);this.cumulativeWeight=w},accumulateAdditive:function(t){var i=this.buffer,d=this.valueSize,v=d*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,v,0,t,d),this.cumulativeWeightAdditive+=t},apply:function(t){var i=this.valueSize,d=this.buffer;t=t*i+i;var v=this.cumulativeWeight,w=this.cumulativeWeightAdditive,T=this.binding;for(this.cumulativeWeightAdditive=this.cumulativeWeight=0,1>v&&this._mixBufferRegion(d,t,i*this._origIndex,1-v,i),0<w&&this._mixBufferRegionAdditive(d,t,this._addIndex*i,1,i),v=i,w=i+i;v!==w;++v)if(d[v]!==d[v+i]){T.setValue(d,t);break}},saveOriginalState:function(){var t=this.buffer,i=this.valueSize,d=i*this._origIndex;this.binding.getValue(t,d);for(var v=i;v!==d;++v)t[v]=t[d+v%i];this._setIdentity(),this.cumulativeWeightAdditive=this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,i=t+this.valueSize;t<i;t++)this.buffer[t]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize,d=0;d<this.valueSize;d++)this.buffer[i+d]=this.buffer[t+d]},_select:function(t,i,d,v,w){if(.5<=v)for(v=0;v!==w;++v)t[i+v]=t[d+v]},_slerp:function(t,i,d,v){N.slerpFlat(t,i,t,i,t,d,v)},_slerpAdditive:function(t,i,d,v,w){w*=this._workIndex,N.multiplyQuaternionsFlat(t,w,t,i,t,d),N.slerpFlat(t,i,t,i,t,w,v)},_lerp:function(t,i,d,v,w){for(var T=1-v,b=0;b!==w;++b){var D=i+b;t[D]=t[D]*T+t[d+b]*v}},_lerpAdditive:function(t,i,d,v,w){for(var T=0;T!==w;++T){var b=i+T;t[b]+=t[d+T]*v}}});var jS=/[\[\]\.:\/]/g,VS="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",WS=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),XS=/(WCOD+)?/.source.replace("WCOD",VS),YS=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),ZS=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),KS=new RegExp("^"+WS+XS+YS+ZS+"$"),JS=["material","materials","bones"];Ce(t_.prototype,{getValue:function(t,i){this.bind();var d=this._bindings[this._targetGroup.nCachedObjects_];d!==void 0&&d.getValue(t,i)},setValue:function(t,i){for(var d=this._bindings,v=this._targetGroup.nCachedObjects_,w=d.length;v!==w;++v)d[v].setValue(t,i)},bind:function(){for(var t=this._bindings,i=this._targetGroup.nCachedObjects_,d=t.length;i!==d;++i)t[i].bind()},unbind:function(){for(var t=this._bindings,i=this._targetGroup.nCachedObjects_,d=t.length;i!==d;++i)t[i].unbind()}}),Ce(Fc,{Composite:t_,create:function(t,i,d){return t&&t.isAnimationObjectGroup?new Fc.Composite(t,i,d):new Fc(t,i,d)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(jS,"")},parseTrackName:function(t){var i=KS.exec(t);if(!i)throw Error("PropertyBinding: Cannot parse trackName: "+t);i={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]};var d=i.nodeName&&i.nodeName.lastIndexOf(".");if(d!==void 0&&d!==-1){var v=i.nodeName.substring(d+1);JS.indexOf(v)!==-1&&(i.nodeName=i.nodeName.substring(0,d),i.objectName=v)}if(i.propertyName===null||i.propertyName.length===0)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i},findNode:function(t,i){if(!i||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){var d=t.skeleton.getBoneByName(i);if(d!==void 0)return d}return t.children&&(t=function v(w){for(var T=0;T<w.length;T++){var b=w[T];if(b.name===i||b.uuid===i||(b=v(b.children)))return b}return null}(t.children))?t:null}}),Ce(Fc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(l,t){l[t]=this.node[this.propertyName]},function(l,t){for(var i=this.resolvedProperty,d=0,v=i.length;d!==v;++d)l[t++]=i[d]},function(l,t){l[t]=this.resolvedProperty[this.propertyIndex]},function(l,t){this.resolvedProperty.toArray(l,t)}],SetterByBindingTypeAndVersioning:[[function(l,t){this.targetObject[this.propertyName]=l[t]},function(l,t){this.targetObject[this.propertyName]=l[t],this.targetObject.needsUpdate=!0},function(l,t){this.targetObject[this.propertyName]=l[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(l,t){for(var i=this.resolvedProperty,d=0,v=i.length;d!==v;++d)i[d]=l[t++]},function(l,t){for(var i=this.resolvedProperty,d=0,v=i.length;d!==v;++d)i[d]=l[t++];this.targetObject.needsUpdate=!0},function(l,t){for(var i=this.resolvedProperty,d=0,v=i.length;d!==v;++d)i[d]=l[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(l,t){this.resolvedProperty[this.propertyIndex]=l[t]},function(l,t){this.resolvedProperty[this.propertyIndex]=l[t],this.targetObject.needsUpdate=!0},function(l,t){this.resolvedProperty[this.propertyIndex]=l[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(l,t){this.resolvedProperty.fromArray(l,t)},function(l,t){this.resolvedProperty.fromArray(l,t),this.targetObject.needsUpdate=!0},function(l,t){this.resolvedProperty.fromArray(l,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,i){this.bind(),this.getValue(t,i)},setValue:function(t,i){this.bind(),this.setValue(t,i)},bind:function(){var t=this.node,i=this.parsedPath,d=i.objectName,v=i.propertyName,w=i.propertyIndex;if(t||(this.node=t=Fc.findNode(this.rootNode,i.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(d){var T=i.objectIndex;switch(d){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}for(t=t.skeleton.bones,d=0;d<t.length;d++)if(t[d].name===T){T=d;break}break;default:if(t[d]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[d]}if(T!==void 0){if(t[T]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[T]}}if(T=t[v],T===void 0)console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+v+" but it wasn't found.",t);else{if(i=this.Versioning.None,this.targetObject=t,t.needsUpdate!==void 0?i=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(i=this.Versioning.MatrixWorldNeedsUpdate),d=this.BindingType.Direct,w!==void 0){if(v==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[w]!==void 0&&(w=t.morphTargetDictionary[w])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}d=this.BindingType.ArrayElement,this.resolvedProperty=T,this.propertyIndex=w}else T.fromArray!==void 0&&T.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=T):Array.isArray(T)?(d=this.BindingType.EntireArray,this.resolvedProperty=T):this.propertyName=v;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][i]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Ce(Fc.prototype,{_getValue_unbound:Fc.prototype.getValue,_setValue_unbound:Fc.prototype.setValue}),Ce(r_.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,i=t.length,d=this.nCachedObjects_,v=this._indicesByUUID,w=this._paths,T=this._parsedPaths,b=this._bindings,D=b.length,G=void 0,Y=0,re=arguments.length;Y!==re;++Y){var se=arguments[Y],ae=se.uuid,fe=v[ae];if(fe===void 0){fe=i++,v[ae]=fe,t.push(se),ae=0;for(var ve=D;ae!==ve;++ae)b[ae].push(new Fc(se,w[ae],T[ae]))}else if(fe<d){G=t[fe];var Ze=--d;for(ve=t[Ze],v[ve.uuid]=fe,t[fe]=ve,v[ae]=Ze,t[Ze]=se,ae=0,ve=D;ae!==ve;++ae){var ht=b[ae],ct=ht[fe];ht[fe]=ht[Ze],ct===void 0&&(ct=new Fc(se,w[ae],T[ae])),ht[Ze]=ct}}else t[fe]!==G&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d},remove:function(){for(var t=this._objects,i=this.nCachedObjects_,d=this._indicesByUUID,v=this._bindings,w=v.length,T=0,b=arguments.length;T!==b;++T){var D=arguments[T],G=D.uuid,Y=d[G];if(Y!==void 0&&Y>=i){var re=i++,se=t[re];for(d[se.uuid]=Y,t[Y]=se,d[G]=re,t[re]=D,D=0,G=w;D!==G;++D){se=v[D];var ae=se[Y];se[Y]=se[re],se[re]=ae}}}this.nCachedObjects_=i},uncache:function(){for(var t=this._objects,i=t.length,d=this.nCachedObjects_,v=this._indicesByUUID,w=this._bindings,T=w.length,b=0,D=arguments.length;b!==D;++b){var G=arguments[b].uuid,Y=v[G];if(Y!==void 0)if(delete v[G],Y<d){G=--d;var re=t[G],se=--i,ae=t[se];for(v[re.uuid]=Y,t[Y]=re,v[ae.uuid]=G,t[G]=ae,t.pop(),re=0,ae=T;re!==ae;++re){var fe=w[re],ve=fe[se];fe[Y]=fe[G],fe[G]=ve,fe.pop()}}else for(se=--i,ae=t[se],v[ae.uuid]=Y,t[Y]=ae,t.pop(),re=0,ae=T;re!==ae;++re)fe=w[re],fe[Y]=fe[se],fe.pop()}this.nCachedObjects_=d},subscribe_:function(t,i){var d=this._bindingsIndicesByPath,v=d[t],w=this._bindings;if(v!==void 0)return w[v];var T=this._paths,b=this._parsedPaths,D=this._objects,G=this.nCachedObjects_,Y=Array(D.length);for(v=w.length,d[t]=v,T.push(t),b.push(i),w.push(Y),d=G,v=D.length;d!==v;++d)Y[d]=new Fc(D[d],t,i);return Y},unsubscribe_:function(t){var i=this._bindingsIndicesByPath,d=i[t];if(d!==void 0){var v=this._paths,w=this._parsedPaths,T=this._bindings,b=T.length-1,D=T[b];i[t[b]]=d,T[d]=D,T.pop(),w[d]=w[b],w.pop(),v[d]=v[b],v.pop()}}}),Ce(n_.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,i){return this.loop=t,this.repetitions=i,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,i,d){if(t.fadeOut(i),this.fadeIn(i),d){d=this._clip.duration;var v=t._clip.duration,w=d/v;t.warp(1,v/d,i),this.warp(w,1,i)}return this},crossFadeTo:function(t,i,d){return t.crossFadeFrom(this,i,d)},stopFading:function(){var t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,i,d){var v=this._mixer,w=v.time,T=this._timeScaleInterpolant,b=this.timeScale;return T===null&&(this._timeScaleInterpolant=T=v._lendControlInterpolant()),v=T.parameterPositions,T=T.sampleValues,v[0]=w,v[1]=w+d,T[0]=t/b,T[1]=i/b,this},stopWarping:function(){var t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,i,d,v){if(this.enabled){var w=this._startTime;if(w!==null){if(i=(t-w)*d,0>i||d===0)return;this._startTime=null,i*=d}if(i*=this._updateTimeScale(t),d=this._updateTime(i),t=this._updateWeight(t),0<t)switch(i=this._interpolants,w=this._propertyBindings,this.blendMode){case 2501:for(var T=0,b=i.length;T!==b;++T)i[T].evaluate(d),w[T].accumulateAdditive(t);break;default:for(T=0,b=i.length;T!==b;++T)i[T].evaluate(d),w[T].accumulate(v,t)}}else this._updateWeight(t)},_updateWeight:function(t){var i=0;if(this.enabled){i=this.weight;var d=this._weightInterpolant;if(d!==null){var v=d.evaluate(t)[0];i*=v,t>d.parameterPositions[1]&&(this.stopFading(),v===0&&(this.enabled=!1))}}return this._effectiveWeight=i},_updateTimeScale:function(t){var i=0;if(!this.paused){i=this.timeScale;var d=this._timeScaleInterpolant;if(d!==null){var v=d.evaluate(t)[0];i*=v,t>d.parameterPositions[1]&&(this.stopWarping(),i===0?this.paused=!0:this.timeScale=i)}}return this._effectiveTimeScale=i},_updateTime:function(t){var i=this.time+t,d=this._clip.duration,v=this.loop,w=this._loopCount,T=v===2202;if(t===0)return w===-1?i:T&&(w&1)==1?d-i:i;if(v===2200)e:{if(w===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1)),i>=d)i=d;else if(0>i)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}else{if(w===-1&&(0<=t?(w=0,this._setEndings(!0,this.repetitions===0,T)):this._setEndings(this.repetitions===0,!0,T)),i>=d||0>i){v=Math.floor(i/d),i-=d*v,w+=Math.abs(v);var b=this.repetitions-w;0>=b?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i=0<t?d:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(b===1?(t=0>t,this._setEndings(t,!t,T)):this._setEndings(!1,!1,T),this._loopCount=w,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:v}))}else this.time=i;if(T&&(w&1)==1)return d-i}return i},_setEndings:function(t,i,d){var v=this._interpolantSettings;d?(v.endingStart=2401,v.endingEnd=2401):(v.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,v.endingEnd=i?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,i,d){var v=this._mixer,w=v.time,T=this._weightInterpolant;return T===null&&(this._weightInterpolant=T=v._lendControlInterpolant()),v=T.parameterPositions,T=T.sampleValues,v[0]=w,T[0]=i,v[1]=w+t,T[1]=d,this}}),PC.prototype=Ce(me(a.prototype),{constructor:PC,_bindAction:function(t,i){var d=t._localRoot||this._root,v=t._clip.tracks,w=v.length,T=t._propertyBindings;t=t._interpolants;var b=d.uuid,D=this._bindingsByRootAndName,G=D[b];for(G===void 0&&(G={},D[b]=G),D=0;D!==w;++D){var Y=v[D],re=Y.name,se=G[re];if(se===void 0){if(se=T[D],se!==void 0){se._cacheIndex===null&&(++se.referenceCount,this._addInactiveBinding(se,b,re));continue}se=new LC(Fc.create(d,re,i&&i._propertyBindings[D].binding.parsedPath),Y.ValueTypeName,Y.getValueSize()),++se.referenceCount,this._addInactiveBinding(se,b,re)}T[D]=se,t[D].resultBuffer=se.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){var i=(t._localRoot||this._root).uuid,d=t._clip.uuid,v=this._actionsByClip[d];this._bindAction(t,v&&v.knownActions[0]),this._addInactiveAction(t,d,i)}for(i=t._propertyBindings,d=0,v=i.length;d!==v;++d){var w=i[d];w.useCount++==0&&(this._lendBinding(w),w.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var i=t._propertyBindings,d=0,v=i.length;d!==v;++d){var w=i[d];--w.useCount==0&&(w.restoreOriginalState(),this._takeBackBinding(w))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return t=t._cacheIndex,t!==null&&t<this._nActiveActions},_addInactiveAction:function(t,i,d){var v=this._actions,w=this._actionsByClip,T=w[i];T===void 0?(T={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,w[i]=T):(i=T.knownActions,t._byClipCacheIndex=i.length,i.push(t)),t._cacheIndex=v.length,v.push(t),T.actionByRoot[d]=t},_removeInactiveAction:function(t){var i=this._actions,d=i[i.length-1],v=t._cacheIndex;d._cacheIndex=v,i[v]=d,i.pop(),t._cacheIndex=null,i=t._clip.uuid,d=this._actionsByClip,v=d[i];var w=v.knownActions,T=w[w.length-1],b=t._byClipCacheIndex;T._byClipCacheIndex=b,w[b]=T,w.pop(),t._byClipCacheIndex=null,delete v.actionByRoot[(t._localRoot||this._root).uuid],w.length===0&&delete d[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){t=t._propertyBindings;for(var i=0,d=t.length;i!==d;++i){var v=t[i];--v.referenceCount==0&&this._removeInactiveBinding(v)}},_lendAction:function(t){var i=this._actions,d=t._cacheIndex,v=this._nActiveActions++,w=i[v];t._cacheIndex=v,i[v]=t,w._cacheIndex=d,i[d]=w},_takeBackAction:function(t){var i=this._actions,d=t._cacheIndex,v=--this._nActiveActions,w=i[v];t._cacheIndex=v,i[v]=t,w._cacheIndex=d,i[d]=w},_addInactiveBinding:function(t,i,d){var v=this._bindingsByRootAndName,w=v[i],T=this._bindings;w===void 0&&(w={},v[i]=w),w[d]=t,t._cacheIndex=T.length,T.push(t)},_removeInactiveBinding:function(t){var i=this._bindings,d=t.binding,v=d.rootNode.uuid;d=d.path;var w=this._bindingsByRootAndName,T=w[v],b=i[i.length-1];t=t._cacheIndex,b._cacheIndex=t,i[t]=b,i.pop(),delete T[d],Ei(T).length===0&&delete w[v]},_lendBinding:function(t){var i=this._bindings,d=t._cacheIndex,v=this._nActiveBindings++,w=i[v];t._cacheIndex=v,i[v]=t,w._cacheIndex=d,i[d]=w},_takeBackBinding:function(t){var i=this._bindings,d=t._cacheIndex,v=--this._nActiveBindings,w=i[v];t._cacheIndex=v,i[v]=t,w._cacheIndex=d,i[d]=w},_lendControlInterpolant:function(){var t=this._controlInterpolants,i=this._nActiveControlInterpolants++,d=t[i];return d===void 0&&(d=new px(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),d.__cacheIndex=i,t[i]=d),d},_takeBackControlInterpolant:function(t){var i=this._controlInterpolants,d=t.__cacheIndex,v=--this._nActiveControlInterpolants,w=i[v];t.__cacheIndex=v,i[v]=t,w.__cacheIndex=d,i[d]=w},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,i,d){var v=i||this._root,w=v.uuid;v=typeof t=="string"?Nd.findByName(v,t):t,t=v!==null?v.uuid:t;var T=this._actionsByClip[t],b=null;if(d===void 0&&(d=v!==null?v.blendMode:2500),T!==void 0){if(b=T.actionByRoot[w],b!==void 0&&b.blendMode===d)return b;b=T.knownActions[0],v===null&&(v=b._clip)}return v===null?null:(i=new n_(this,v,i,d),this._bindAction(i,b),this._addInactiveAction(i,t,w),i)},existingAction:function(t,i){var d=i||this._root;return i=d.uuid,d=typeof t=="string"?Nd.findByName(d,t):t,t=this._actionsByClip[d?d.uuid:t],t!==void 0&&t.actionByRoot[i]||null},stopAllAction:function(){for(var t=this._actions,i=this._nActiveActions-1;0<=i;--i)t[i].stop();return this},update:function(t){t*=this.timeScale;for(var i=this._actions,d=this._nActiveActions,v=this.time+=t,w=Ms(t),T=this._accuIndex^=1,b=0;b!==d;++b)i[b]._update(v,t,w,T);for(t=this._bindings,i=this._nActiveBindings,b=0;b!==i;++b)t[b].apply(T);return this},setTime:function(t){for(var i=this.time=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var i=this._actions;t=t.uuid;var d=this._actionsByClip,v=d[t];if(v!==void 0){v=v.knownActions;for(var w=0,T=v.length;w!==T;++w){var b=v[w];this._deactivateAction(b);var D=b._cacheIndex,G=i[i.length-1];b._cacheIndex=null,b._byClipCacheIndex=null,G._cacheIndex=D,i[D]=G,i.pop(),this._removeInactiveBindingsForAction(b)}delete d[t]}},uncacheRoot:function(t){t=t.uuid;var i=this._actionsByClip;for(v in i){var d=i[v].actionByRoot[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}var v=this._bindingsByRootAndName[t];if(v!==void 0)for(var w in v)t=v[w],t.restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,i){t=this.existingAction(t,i),t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}}),QA.prototype.clone=function(){return new QA(this.value.clone===void 0?this.value:this.value.clone())},RC.prototype=Ce(me(km.prototype),{constructor:RC,isInstancedInterleavedBuffer:!0,copy:function(t){return km.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Ce(OC.prototype,{set:function(t,i){this.ray.set(t,i)},setFromCamera:function(t,i){i&&i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i&&i.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,i,d){return d=d||[],DC(t,this,d,i),d.sort(i_),d},intersectObjects:function(t,i,d){if(d=d||[],Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),d;for(var v=0,w=t.length;v<w;v++)DC(t[v],this,d,i);return d.sort(i_),d}}),Ce(o_.prototype,{set:function(t,i,d){return this.radius=t,this.phi=i,this.theta=d,this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,i,d){return this.radius=Math.sqrt(t*t+i*i+d*d),this.radius===0?this.phi=this.theta=0:(this.theta=Math.atan2(t,d),this.phi=Math.acos(ho.clamp(i/this.radius,-1,1))),this}}),Ce(a_.prototype,{set:function(t,i,d){return this.radius=t,this.theta=i,this.y=d,this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,i,d){return this.radius=Math.sqrt(t*t+d*d),this.theta=Math.atan2(t,d),this.y=i,this}});var q_=new u;Ce(FC.prototype,{set:function(t,i){return this.min.copy(t),this.max.copy(i),this},setFromPoints:function(t){this.makeEmpty();for(var i=0,d=t.length;i<d;i++)this.expandByPoint(t[i]);return this},setFromCenterAndSize:function(t,i){return i=q_.copy(i).multiplyScalar(.5),this.min.copy(t).sub(i),this.max.copy(t).add(i),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return t===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new u),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return t===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new u),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,i){return i===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),i=new u),i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,i){return i===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),i=new u),i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return q_.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Q_=new z,T2=new z;Ce(NC.prototype,{set:function(t,i){return this.start.copy(t),this.end.copy(i),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return t===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new z),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return t===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),t=new z),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,i){return i===void 0&&(console.warn("THREE.Line3: .at() target is now required"),i=new z),this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,i){return Q_.subVectors(t,this.start),T2.subVectors(this.end,this.start),t=T2.dot(T2),t=T2.dot(Q_)/t,i&&(t=ho.clamp(t,0,1)),t},closestPointToPoint:function(t,i,d){return t=this.closestPointToPointParameter(t,i),d===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),d=new z),this.delta(d).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),xx.prototype=me(oe.prototype),xx.prototype.constructor=xx,xx.prototype.isImmediateRenderObject=!0;var $_=new z;Wy.prototype=me(oe.prototype),Wy.prototype.constructor=Wy,Wy.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Wy.prototype.update=function(){this.light.updateMatrixWorld();var l=this.light.distance?this.light.distance:1e3,t=l*Math.tan(this.light.angle);this.cone.scale.set(t,t,l),$_.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt($_),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var i0=new z,I2=new Z,mw=new Z;G0.prototype=me(Js.prototype),G0.prototype.constructor=G0,G0.prototype.isSkeletonHelper=!0,G0.prototype.updateMatrixWorld=function(l){var t=this.bones,i=this.geometry,d=i.getAttribute("position");mw.getInverse(this.root.matrixWorld);for(var v=0,w=0;v<t.length;v++){var T=t[v];T.parent&&T.parent.isBone&&(I2.multiplyMatrices(mw,T.matrixWorld),i0.setFromMatrixPosition(I2),d.setXYZ(w,i0.x,i0.y,i0.z),I2.multiplyMatrices(mw,T.parent.matrixWorld),i0.setFromMatrixPosition(I2),d.setXYZ(w+1,i0.x,i0.y,i0.z),w+=2)}i.getAttribute("position").needsUpdate=!0,oe.prototype.updateMatrixWorld.call(this,l)},Xy.prototype=me(Ve.prototype),Xy.prototype.constructor=Xy,Xy.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Xy.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var qS=new z,eM=new We,tM=new We;Yy.prototype=me(oe.prototype),Yy.prototype.constructor=Yy,Yy.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Yy.prototype.update=function(){var l=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var t=l.geometry.getAttribute("color");eM.copy(this.light.color),tM.copy(this.light.groundColor);for(var i=0,d=t.count;i<d;i++){var v=i<d/2?eM:tM;t.setXYZ(i,v.r,v.g,v.b)}t.needsUpdate=!0}l.lookAt(qS.setFromMatrixPosition(this.light.matrixWorld).negate())},$A.prototype=Ce(me(Js.prototype),{constructor:$A,copy:function(t){return Js.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return new this.constructor().copy(this)}}),e2.prototype=me(Js.prototype),e2.prototype.constructor=e2;var rM=new z,E2=new z,nM=new z;Zy.prototype=me(oe.prototype),Zy.prototype.constructor=Zy,Zy.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Zy.prototype.update=function(){rM.setFromMatrixPosition(this.light.matrixWorld),E2.setFromMatrixPosition(this.light.target.matrixWorld),nM.subVectors(E2,rM),this.lightPlane.lookAt(E2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(E2),this.targetLine.scale.z=nM.length()};var b2=new z,ll=new Jt;Ax.prototype=me(Js.prototype),Ax.prototype.constructor=Ax,Ax.prototype.update=function(){var l=this.geometry,t=this.pointMap;ll.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ml("c",t,l,ll,0,0,-1),Ml("t",t,l,ll,0,0,1),Ml("n1",t,l,ll,-1,-1,-1),Ml("n2",t,l,ll,1,-1,-1),Ml("n3",t,l,ll,-1,1,-1),Ml("n4",t,l,ll,1,1,-1),Ml("f1",t,l,ll,-1,-1,1),Ml("f2",t,l,ll,1,-1,1),Ml("f3",t,l,ll,-1,1,1),Ml("f4",t,l,ll,1,1,1),Ml("u1",t,l,ll,.7,1.1,-1),Ml("u2",t,l,ll,-.7,1.1,-1),Ml("u3",t,l,ll,0,2,-1),Ml("cf1",t,l,ll,-1,0,1),Ml("cf2",t,l,ll,1,0,1),Ml("cf3",t,l,ll,0,-1,1),Ml("cf4",t,l,ll,0,1,1),Ml("cn1",t,l,ll,-1,0,-1),Ml("cn2",t,l,ll,1,0,-1),Ml("cn3",t,l,ll,0,-1,-1),Ml("cn4",t,l,ll,0,1,-1),l.getAttribute("position").needsUpdate=!0};var L2=new je;Vm.prototype=me(Js.prototype),Vm.prototype.constructor=Vm,Vm.prototype.update=function(l){if(l!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&L2.setFromObject(this.object),!L2.isEmpty()){l=L2.min;var t=L2.max,i=this.geometry.attributes.position,d=i.array;d[0]=t.x,d[1]=t.y,d[2]=t.z,d[3]=l.x,d[4]=t.y,d[5]=t.z,d[6]=l.x,d[7]=l.y,d[8]=t.z,d[9]=t.x,d[10]=l.y,d[11]=t.z,d[12]=t.x,d[13]=t.y,d[14]=l.z,d[15]=l.x,d[16]=t.y,d[17]=l.z,d[18]=l.x,d[19]=l.y,d[20]=l.z,d[21]=t.x,d[22]=l.y,d[23]=l.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Vm.prototype.setFromObject=function(l){return this.object=l,this.update(),this},Vm.prototype.copy=function(l){return Js.prototype.copy.call(this,l),this.object=l.object,this},Vm.prototype.clone=function(){return new this.constructor().copy(this)},Cx.prototype=me(Js.prototype),Cx.prototype.constructor=Cx,Cx.prototype.updateMatrixWorld=function(l){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),oe.prototype.updateMatrixWorld.call(this,l))},wx.prototype=me(jf.prototype),wx.prototype.constructor=wx,wx.prototype.updateMatrixWorld=function(l){var t=-this.plane.constant;1e-8>Math.abs(t)&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=0>t?1:0,this.lookAt(this.plane.normal),oe.prototype.updateMatrixWorld.call(this,l)};var iM=new z,P2,vw;Wm.prototype=me(oe.prototype),Wm.prototype.constructor=Wm,Wm.prototype.setDirection=function(l){.99999<l.y?this.quaternion.set(0,0,0,1):-.99999>l.y?this.quaternion.set(1,0,0,0):(iM.set(l.z,0,-l.x).normalize(),this.quaternion.setFromAxisAngle(iM,Math.acos(l.y)))},Wm.prototype.setLength=function(l,t,i){t===void 0&&(t=.2*l),i===void 0&&(i=.2*t),this.line.scale.set(1,Math.max(1e-4,l-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=l,this.cone.updateMatrix()},Wm.prototype.setColor=function(l){this.line.material.color.set(l),this.cone.material.color.set(l)},Wm.prototype.copy=function(l){return oe.prototype.copy.call(this,l,!1),this.line.copy(l.line),this.cone.copy(l.cone),this},Wm.prototype.clone=function(){return new this.constructor().copy(this)},_x.prototype=me(Js.prototype),_x.prototype.constructor=_x;var Ug=Math.pow(2,8),oM=[.125,.215,.35,.446,.526,.582],aM=5+oM.length,kg={3e3:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},yw=new jy,xw=function(){for(var l=[],t=[],i=[],d=8,v=0;v<aM;v++){var w=Math.pow(2,d);t.push(w);var T=1/w;4<v?T=oM[v-8+4-1]:v==0&&(T=0),i.push(T),T=1/(w-1),w=-T/2,T=1+T/2;var b=[w,w,T,w,T,T,w,w,T,T,w,T];w=new Float32Array(108),T=new Float32Array(72);for(var D=new Float32Array(36),G=0;6>G;G++){var Y=G%3*2/3-1,re=2<G?0:-1;w.set([Y,re,0,Y+2/3,re,0,Y+2/3,re+1,0,Y,re,0,Y+2/3,re+1,0,Y,re+1,0],18*G),T.set(b,12*G),D.set([G,G,G,G,G,G],6*G)}b=new Fe,b.setAttribute("position",new tr(w,3)),b.setAttribute("uv",new tr(T,2)),b.setAttribute("faceIndex",new tr(D,1)),l.push(b),4<d&&d--}return{_lodPlanes:l,_sizeLods:t,_sigmas:i}}(),Fx=xw._lodPlanes,sM=xw._sizeLods,R2=xw._sigmas,Aw=null,Q0=(1+Math.sqrt(5))/2,f1=1/Q0,lM=[new z(1,1,1),new z(-1,1,1),new z(1,1,-1),new z(-1,1,-1),new z(0,Q0,f1),new z(0,Q0,-f1),new z(f1,0,Q0),new z(-f1,0,Q0),new z(Q0,f1,0),new z(-Q0,f1,0)];BC.prototype={constructor:BC,fromScene:function(t,i,d,v){i===void 0&&(i=0),d===void 0&&(d=.1),v===void 0&&(v=100),Aw=this._renderer.getRenderTarget();var w=this._allocateTargets();return this._sceneToCubeUV(t,d,v,w),0<i&&this._blur(w,0,0,i),this._applyPMREM(w),this._cleanup(w),w},fromEquirectangular:function(t){return t.magFilter=1003,t.minFilter=1003,t.generateMipmaps=!1,this.fromCubemap(t)},fromCubemap:function(t){Aw=this._renderer.getRenderTarget();var i=this._allocateTargets(t);return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=c_(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=u_(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var t=0;t<Fx.length;t++)Fx[t].dispose()},_cleanup:function(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Aw),t.scissorTest=!1,t.setSize(t.width,t.height)},_allocateTargets:function(t){var i=t===void 0||t.type!==1009?!1:t.encoding===3e3||t.encoding===3001||t.encoding===3007;i={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:i?t.encoding:3002,depthBuffer:!1,stencilBuffer:!1};var d=l_(i);return d.depthBuffer=!t,this._pingPongRenderTarget=l_(i),d},_compileMaterial:function(t){t=new Ve(Fx[0],t),this._renderer.compile(t,yw)},_sceneToCubeUV:function(t,i,d,v){i=new Ht(90,1,i,d),d=[1,-1,1,1,1,1];var w=[1,1,1,-1,-1,-1],T=this._renderer,b=T.outputEncoding,D=T.toneMapping,G=T.toneMappingExposure,Y=T.getClearColor(),re=T.getClearAlpha();T.toneMapping=1,T.toneMappingExposure=1,T.outputEncoding=3e3;var se=t.background;if(se&&se.isColor){se.convertSRGBToLinear();var ae=Math.min(Math.max(Math.ceil(Sf(Math.max(se.r,se.g,se.b))),-128),127);se=se.multiplyScalar(Math.pow(2,-ae)),T.setClearColor(se,(ae+128)/255),t.background=null}for(se=0;6>se;se++)ae=se%3,ae==0?(i.up.set(0,d[se],0),i.lookAt(w[se],0,0)):ae==1?(i.up.set(0,0,d[se]),i.lookAt(0,w[se],0)):(i.up.set(0,d[se],0),i.lookAt(0,0,w[se])),zC(v,ae*Ug,2<se?Ug:0,Ug,Ug),T.setRenderTarget(v),T.render(t,i);T.toneMapping=D,T.toneMappingExposure=G,T.outputEncoding=b,T.setClearColor(Y,re)},_textureToCubeUV:function(t,i){var d=this._renderer;t.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=c_()):this._equirectShader==null&&(this._equirectShader=u_());var v=t.isCubeTexture?this._cubemapShader:this._equirectShader,w=new Ve(Fx[0],v);v=v.uniforms,v.envMap.value=t,t.isCubeTexture||v.texelSize.value.set(1/t.image.width,1/t.image.height),v.inputEncoding.value=kg[t.encoding],v.outputEncoding.value=kg[i.texture.encoding],zC(i,0,0,3*Ug,2*Ug),d.setRenderTarget(i),d.render(w,yw)},_applyPMREM:function(t){var i=this._renderer,d=i.autoClear;i.autoClear=!1;for(var v=1;v<aM;v++)this._blur(t,v-1,v,Math.sqrt(R2[v]*R2[v]-R2[v-1]*R2[v-1]),lM[(v-1)%lM.length]);i.autoClear=d},_blur:function(t,i,d,v,w){var T=this._pingPongRenderTarget;this._halfBlur(t,T,i,d,v,"latitudinal",w),this._halfBlur(T,t,d,d,v,"longitudinal",w)},_halfBlur:function(t,i,d,v,w,T,b){var D=this._renderer,G=this._blurMaterial;T!=="latitudinal"&&T!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Y=new Ve(Fx[v],G);G=G.uniforms;var re=sM[d]-1;re=isFinite(w)?Math.PI/(2*re):2*Math.PI/39;var se=w/re,ae=isFinite(w)?1+Math.floor(3*se):20;20<ae&&console.warn("sigmaRadians, "+w+", is too large and will clip, as it requested "+ae+" samples when the maximum is set to 20"),w=[];for(var fe=0,ve=0;20>ve;++ve){var Ze=ve/se;Ze=Math.exp(-Ze*Ze/2),w.push(Ze),ve==0?fe+=Ze:ve<ae&&(fe+=2*Ze)}for(ve=0;ve<w.length;ve++)w[ve]/=fe;G.envMap.value=t.texture,G.samples.value=ae,G.weights.value=w,G.latitudinal.value=T==="latitudinal",b&&(G.poleAxis.value=b),G.dTheta.value=re,G.mipInt.value=8-d,G.inputEncoding.value=kg[t.texture.encoding],G.outputEncoding.value=kg[t.texture.encoding],t=sM[v],Ze=3*Math.max(0,Ug-2*t),zC(i,Ze,(v===0?0:2*Ug)+2*t*(4<v?v-8+4:0),3*t,2*t),D.setRenderTarget(i),D.render(Y,yw)}},di.create=function(l,t){return l.prototype=me(di.prototype),l.prototype.constructor=l,l.prototype.getPoint=t,l},Ce(jm.prototype,{createPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var i=new Xe,d=0,v=t.length;d<v;d++){var w=t[d];i.vertices.push(new z(w.x,w.y,w.z||0))}return i}}),Ce(kp.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),h_.prototype=me(Dc.prototype),f_.prototype=me(Dc.prototype),HC.prototype=me(Dc.prototype),Ce(HC.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),$A.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},G0.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Ce(Oa.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),dw.extractUrlBase(t)}}),Oa.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Ce(JA.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Ce(FC.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Ce(je.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Ce(ze.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Ln.prototype.setFromMatrix=function(l){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(l)},NC.prototype.center=function(l){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(l)},Ce(ho,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ho.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ho.ceilPowerOfTwo(t)}}),Ce(p.prototype,{flattenToArrayOffset:function(t,i){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,i)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Ce(Z.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,i){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,i)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new z().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,i,d,v,w,T){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,i,v,d,w,T)}}),xt.prototype.isIntersectionLine=function(l){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(l)},N.prototype.multiplyVector3=function(l){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),l.applyQuaternion(this)},Ce(et.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Ce(gt.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,i)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Ce(gt,{barycoordFromPoint:function(t,i,d,v,w){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),gt.getBarycoord(t,i,d,v,w)},normal:function(t,i,d,v){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),gt.getNormal(t,i,d,v)}}),Ce(Kv.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new L0(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new R0(this,t)}}),Ce(u.prototype,{fromAttribute:function(t,i,d){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,i,d)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Ce(z.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,i){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(i,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,i,d){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,i,d)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Ce(C.prototype,{fromAttribute:function(t,i,d){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,i,d)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Ce(Xe.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Ce(oe.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,i){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(i,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Zr(oe.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Ce(Ve.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Zr(Ve.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Zr(X1.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(_A.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),wA.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(di.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Ht.prototype.setLens=function(l,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(l)},Zr(ms.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Zr(tr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===35048},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Ce(tr.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Ce(Fe.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,i,d){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),i&&i.isBufferAttribute||i&&i.isInterleavedBufferAttribute?t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(i),this):this.setAttribute(t,i):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new tr(i,d)))},addDrawCall:function(t,i,d){d!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,i)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Zr(Fe.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Zr(yx.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Zr(OC.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Zr(km.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===35048},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Ce(km.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Ce(Pg.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Zr(QA.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Zr(Tt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new We}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===1}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Zr(Zv.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Zr(Ft.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Ce(uC.prototype,{clearTarget:function(t,i,d,v){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(i,d,v)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Zr(uC.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?3001:3e3}}}),Zr(Gw.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Zr(S.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Zr(Vy.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var i=this;return new qA().load(t,function(d){i.setBuffer(d)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),bC.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},mn.prototype.updateCubeMap=function(l,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(l,t)},Jv.crossOrigin=void 0,Jv.loadTexture=function(l,t,i,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var v=new BA;return v.setCrossOrigin(this.crossOrigin),l=v.load(l,i,void 0,d),t&&(l.mapping=t),l},Jv.loadTextureCube=function(l,t,i,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var v=new NA;return v.setCrossOrigin(this.crossOrigin),l=v.load(l,i,void 0,d),t&&(l.mapping=t),l},Jv.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Jv.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"117"}})),r.ACESFilmicToneMapping=5,r.AddEquation=100,r.AddOperation=2,r.AdditiveAnimationBlendMode=2501,r.AdditiveBlending=2,r.AlphaFormat=1021,r.AlwaysDepth=1,r.AlwaysStencilFunc=519,r.AmbientLight=VA,r.AmbientLightProbe=SC,r.AnimationClip=Nd,r.AnimationLoader=mC,r.AnimationMixer=PC,r.AnimationObjectGroup=r_,r.AnimationUtils=Ns,r.ArcCurve=Gy,r.ArrayCamera=vA,r.ArrowHelper=Wm,r.Audio=Vy,r.AudioAnalyser=bC,r.AudioContext=gw,r.AudioListener=IC,r.AudioLoader=qA,r.AxesHelper=_x,r.AxisHelper=function(l){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new _x(l)},r.BackSide=1,r.BasicDepthPacking=3200,r.BasicShadowMap=0,r.BinaryTextureLoader=function(l){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new FA(l)},r.Bone=cC,r.BooleanKeyframeTrack=PA,r.BoundingBoxHelper=function(l,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Vm(l,t)},r.Box2=FC,r.Box3=je,r.Box3Helper=Cx,r.BoxBufferGeometry=Lx,r.BoxGeometry=iw,r.BoxHelper=Vm,r.BufferAttribute=tr,r.BufferGeometry=Fe,r.BufferGeometryLoader=KA,r.ByteType=1010,r.Cache=Y0,r.Camera=Jt,r.CameraHelper=Ax,r.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},r.CanvasTexture=Y1,r.CatmullRomCurve3=Dc,r.CineonToneMapping=4,r.CircleBufferGeometry=zy,r.CircleGeometry=dx,r.ClampToEdgeWrapping=1001,r.Clock=TC,r.ClosedSplineCurve3=h_,r.Color=We,r.ColorKeyframeTrack=RA,r.CompressedTexture=Sy,r.CompressedTextureLoader=vC,r.ConeBufferGeometry=fx,r.ConeGeometry=hx,r.CubeCamera=mn,r.CubeGeometry=iw,r.CubeReflectionMapping=301,r.CubeRefractionMapping=302,r.CubeTexture=Dd,r.CubeTextureLoader=NA,r.CubeUVReflectionMapping=306,r.CubeUVRefractionMapping=307,r.CubicBezierCurve=Np,r.CubicBezierCurve3=Og,r.CubicInterpolant=bA,r.CullFaceBack=1,r.CullFaceFront=2,r.CullFaceFrontBack=3,r.CullFaceNone=0,r.Curve=di,r.CurvePath=jm,r.CustomBlending=5,r.CylinderBufferGeometry=Hm,r.CylinderGeometry=D0,r.Cylindrical=a_,r.DataTexture=nr,r.DataTexture2DArray=Oc,r.DataTexture3D=Ah,r.DataTextureLoader=FA,r.DecrementStencilOp=7683,r.DecrementWrapStencilOp=34056,r.DefaultLoadingManager=V_,r.DepthFormat=1026,r.DepthStencilFormat=1027,r.DepthTexture=Z1,r.DirectionalLight=jA,r.DirectionalLightHelper=Zy,r.DirectionalLightShadow=GA,r.DiscreteInterpolant=LA,r.DodecahedronBufferGeometry=Ly,r.DodecahedronGeometry=ex,r.DoubleSide=2,r.DstAlphaFactor=206,r.DstColorFactor=208,r.DynamicBufferAttribute=function(l,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new tr(l,t).setUsage(35048)},r.DynamicCopyUsage=35050,r.DynamicDrawUsage=35048,r.DynamicReadUsage=35049,r.EdgesGeometry=By,r.EdgesHelper=function(l,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Js(new By(l.geometry),new Fs({color:t!==void 0?t:16777215}))},r.EllipseCurve=Wf,r.EqualDepth=4,r.EqualStencilFunc=514,r.EquirectangularReflectionMapping=303,r.EquirectangularRefractionMapping=304,r.Euler=K,r.EventDispatcher=a,r.ExtrudeBufferGeometry=Pg,r.ExtrudeGeometry=L0,r.Face3=Rr,r.Face4=function(l,t,i,d,v,w,T){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Rr(l,t,i,v,w,T)},r.FaceColors=1,r.FileLoader=Bd,r.FlatShading=1,r.Float32Attribute=function(l,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Me(l,t)},r.Float32BufferAttribute=Me,r.Float64Attribute=function(l,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Je(l,t)},r.Float64BufferAttribute=Je,r.FloatType=1015,r.Fog=AA,r.FogExp2=xA,r.Font=wC,r.FontLoader=_C,r.FrontFaceDirectionCCW=1,r.FrontFaceDirectionCW=0,r.FrontSide=0,r.Frustum=Ln,r.GammaEncoding=3007,r.Geometry=Xe,r.GeometryUtils={merge:function(t,i,d){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),i.isMesh){i.matrixAutoUpdate&&i.updateMatrix();var v=i.matrix;i=i.geometry}t.merge(i,v,d)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},r.GreaterDepth=6,r.GreaterEqualDepth=5,r.GreaterEqualStencilFunc=518,r.GreaterStencilFunc=516,r.GridHelper=$A,r.Group=_y,r.HalfFloatType=1016,r.HemisphereLight=zA,r.HemisphereLightHelper=Yy,r.HemisphereLightProbe=MC,r.IcosahedronBufferGeometry=by,r.IcosahedronGeometry=$1,r.ImageBitmapLoader=AC,r.ImageLoader=Hy,r.ImageUtils=Jv,r.ImmediateRenderObject=xx,r.IncrementStencilOp=7682,r.IncrementWrapStencilOp=34055,r.InstancedBufferAttribute=ZA,r.InstancedBufferGeometry=yx,r.InstancedInterleavedBuffer=RC,r.InstancedMesh=MA,r.Int16Attribute=function(l,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Yo(l,t)},r.Int16BufferAttribute=Yo,r.Int32Attribute=function(l,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new qe(l,t)},r.Int32BufferAttribute=qe,r.Int8Attribute=function(l,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new bn(l,t)},r.Int8BufferAttribute=bn,r.IntType=1013,r.InterleavedBuffer=km,r.InterleavedBufferAttribute=V1,r.Interpolant=Vf,r.InterpolateDiscrete=2300,r.InterpolateLinear=2301,r.InterpolateSmooth=2302,r.InvertStencilOp=5386,r.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},r.KeepStencilOp=7680,r.KeyframeTrack=cc,r.LOD=X1,r.LatheBufferGeometry=Ny,r.LatheGeometry=cx,r.Layers=ne,r.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},r.LessDepth=2,r.LessEqualDepth=3,r.LessEqualStencilFunc=515,r.LessStencilFunc=513,r.Light=ms,r.LightProbe=zd,r.LightShadow=Fg,r.Line=jf,r.Line3=NC,r.LineBasicMaterial=Fs,r.LineCurve=Zh,r.LineCurve3=Bp,r.LineDashedMaterial=H0,r.LineLoop=SA,r.LinePieces=1,r.LineSegments=Js,r.LineStrip=0,r.LinearEncoding=3e3,r.LinearFilter=1006,r.LinearInterpolant=px,r.LinearMipMapLinearFilter=1008,r.LinearMipMapNearestFilter=1007,r.LinearMipmapLinearFilter=1008,r.LinearMipmapNearestFilter=1007,r.LinearToneMapping=1,r.Loader=Oa,r.LoaderUtils=dw,r.LoadingManager=gC,r.LogLuvEncoding=3003,r.LoopOnce=2200,r.LoopPingPong=2202,r.LoopRepeat=2201,r.LuminanceAlphaFormat=1025,r.LuminanceFormat=1024,r.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},r.Material=Tt,r.MaterialLoader=YA,r.Math=ho,r.MathUtils=ho,r.Matrix3=p,r.Matrix4=Z,r.MaxEquation=104,r.Mesh=Ve,r.MeshBasicMaterial=gn,r.MeshDepthMaterial=Vv,r.MeshDistanceMaterial=Wv,r.MeshFaceMaterial=function(l){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),l},r.MeshLambertMaterial=U0,r.MeshMatcapMaterial=k0,r.MeshNormalMaterial=z0,r.MeshPhongMaterial=Zv,r.MeshPhysicalMaterial=N0,r.MeshStandardMaterial=Rg,r.MeshToonMaterial=B0,r.MinEquation=103,r.MirroredRepeatWrapping=1002,r.MixOperation=1,r.MultiMaterial=function(l){return l===void 0&&(l=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),l.isMultiMaterial=!0,l.materials=l,l.clone=function(){return l.slice()},l},r.MultiplyBlending=4,r.MultiplyOperation=0,r.NearestFilter=1003,r.NearestMipMapLinearFilter=1005,r.NearestMipMapNearestFilter=1004,r.NearestMipmapLinearFilter=1005,r.NearestMipmapNearestFilter=1004,r.NeverDepth=0,r.NeverStencilFunc=512,r.NoBlending=0,r.NoColors=0,r.NoToneMapping=0,r.NormalAnimationBlendMode=2500,r.NormalBlending=1,r.NotEqualDepth=7,r.NotEqualStencilFunc=517,r.NumberKeyframeTrack=Uy,r.Object3D=oe,r.ObjectLoader=JA,r.ObjectSpaceNormalMap=1,r.OctahedronBufferGeometry=E0,r.OctahedronGeometry=Q1,r.OneFactor=201,r.OneMinusDstAlphaFactor=207,r.OneMinusDstColorFactor=209,r.OneMinusSrcAlphaFactor=205,r.OneMinusSrcColorFactor=203,r.OrthographicCamera=jy,r.PCFShadowMap=1,r.PCFSoftShadowMap=2,r.PMREMGenerator=BC,r.ParametricBufferGeometry=Iy,r.ParametricGeometry=K1,r.Particle=function(l){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new W1(l)},r.ParticleBasicMaterial=function(l){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Fp(l)},r.ParticleSystem=function(l,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new My(l,t)},r.ParticleSystemMaterial=function(l){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Fp(l)},r.Path=kp,r.PerspectiveCamera=Ht,r.Plane=xt,r.PlaneBufferGeometry=Eo,r.PlaneGeometry=Ca,r.PlaneHelper=wx,r.PointCloud=function(l,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new My(l,t)},r.PointCloudMaterial=function(l){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Fp(l)},r.PointLight=HA,r.PointLightHelper=Xy,r.Points=My,r.PointsMaterial=Fp,r.PolarGridHelper=e2,r.PolyhedronBufferGeometry=Yh,r.PolyhedronGeometry=J1,r.PositionalAudio=EC,r.PropertyBinding=Fc,r.PropertyMixer=LC,r.QuadraticBezierCurve=zp,r.QuadraticBezierCurve3=Dg,r.Quaternion=N,r.QuaternionKeyframeTrack=gx,r.QuaternionLinearInterpolant=OA,r.REVISION="117",r.RGBADepthPacking=3201,r.RGBAFormat=1023,r.RGBAIntegerFormat=1033,r.RGBA_ASTC_10x10_Format=37819,r.RGBA_ASTC_10x5_Format=37816,r.RGBA_ASTC_10x6_Format=37817,r.RGBA_ASTC_10x8_Format=37818,r.RGBA_ASTC_12x10_Format=37820,r.RGBA_ASTC_12x12_Format=37821,r.RGBA_ASTC_4x4_Format=37808,r.RGBA_ASTC_5x4_Format=37809,r.RGBA_ASTC_5x5_Format=37810,r.RGBA_ASTC_6x5_Format=37811,r.RGBA_ASTC_6x6_Format=37812,r.RGBA_ASTC_8x5_Format=37813,r.RGBA_ASTC_8x6_Format=37814,r.RGBA_ASTC_8x8_Format=37815,r.RGBA_BPTC_Format=36492,r.RGBA_ETC2_EAC_Format=37496,r.RGBA_PVRTC_2BPPV1_Format=35843,r.RGBA_PVRTC_4BPPV1_Format=35842,r.RGBA_S3TC_DXT1_Format=33777,r.RGBA_S3TC_DXT3_Format=33778,r.RGBA_S3TC_DXT5_Format=33779,r.RGBDEncoding=3006,r.RGBEEncoding=3002,r.RGBEFormat=1023,r.RGBFormat=1022,r.RGBIntegerFormat=1032,r.RGBM16Encoding=3005,r.RGBM7Encoding=3004,r.RGB_ETC1_Format=36196,r.RGB_ETC2_Format=37492,r.RGB_PVRTC_2BPPV1_Format=35841,r.RGB_PVRTC_4BPPV1_Format=35840,r.RGB_S3TC_DXT1_Format=33776,r.RGFormat=1030,r.RGIntegerFormat=1031,r.RawShaderMaterial=Gm,r.Ray=et,r.Raycaster=OC,r.RectAreaLight=WA,r.RedFormat=1028,r.RedIntegerFormat=1029,r.ReinhardToneMapping=2,r.RepeatWrapping=1e3,r.ReplaceStencilOp=7681,r.ReverseSubtractEquation=102,r.RingBufferGeometry=Fy,r.RingGeometry=ux,r.SRGB8_ALPHA8_ASTC_10x10_Format=37851,r.SRGB8_ALPHA8_ASTC_10x5_Format=37848,r.SRGB8_ALPHA8_ASTC_10x6_Format=37849,r.SRGB8_ALPHA8_ASTC_10x8_Format=37850,r.SRGB8_ALPHA8_ASTC_12x10_Format=37852,r.SRGB8_ALPHA8_ASTC_12x12_Format=37853,r.SRGB8_ALPHA8_ASTC_4x4_Format=37840,r.SRGB8_ALPHA8_ASTC_5x4_Format=37841,r.SRGB8_ALPHA8_ASTC_5x5_Format=37842,r.SRGB8_ALPHA8_ASTC_6x5_Format=37843,r.SRGB8_ALPHA8_ASTC_6x6_Format=37844,r.SRGB8_ALPHA8_ASTC_8x5_Format=37845,r.SRGB8_ALPHA8_ASTC_8x6_Format=37846,r.SRGB8_ALPHA8_ASTC_8x8_Format=37847,r.Scene=be,r.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}},r.ShaderChunk=zo,r.ShaderLib=zg,r.ShaderMaterial=Ft,r.ShadowMaterial=F0,r.Shape=Kv,r.ShapeBufferGeometry=O0,r.ShapeGeometry=R0,r.ShapePath=CC,r.ShapeUtils=qm,r.ShortType=1011,r.Skeleton=_A,r.SkeletonHelper=G0,r.SkinnedMesh=wA,r.SmoothShading=2,r.Sphere=ze,r.SphereBufferGeometry=P0,r.SphereGeometry=lx,r.Spherical=o_,r.SphericalHarmonics3=XA,r.SphericalReflectionMapping=305,r.Spline=HC,r.SplineCurve=Up,r.SplineCurve3=f_,r.SpotLight=kA,r.SpotLightHelper=Wy,r.SpotLightShadow=UA,r.Sprite=W1,r.SpriteMaterial=Xv,r.SrcAlphaFactor=204,r.SrcAlphaSaturateFactor=210,r.SrcColorFactor=202,r.StaticCopyUsage=35046,r.StaticDrawUsage=35044,r.StaticReadUsage=35045,r.StereoCamera=e_,r.StreamCopyUsage=35042,r.StreamDrawUsage=35040,r.StreamReadUsage=35041,r.StringKeyframeTrack=DA,r.SubtractEquation=101,r.SubtractiveBlending=3,r.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},r.TangentSpaceNormalMap=0,r.TetrahedronBufferGeometry=Ey,r.TetrahedronGeometry=q1,r.TextBufferGeometry=Dy,r.TextGeometry=sx,r.Texture=y,r.TextureLoader=BA,r.TorusBufferGeometry=Ry,r.TorusGeometry=nx,r.TorusKnotBufferGeometry=Py,r.TorusKnotGeometry=rx,r.Triangle=gt,r.TriangleFanDrawMode=2,r.TriangleStripDrawMode=1,r.TrianglesDrawMode=0,r.TubeBufferGeometry=b0,r.TubeGeometry=tx,r.UVMapping=300,r.Uint16Attribute=function(l,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new On(l,t)},r.Uint16BufferAttribute=On,r.Uint32Attribute=function(l,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Le(l,t)},r.Uint32BufferAttribute=Le,r.Uint8Attribute=function(l,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ai(l,t)},r.Uint8BufferAttribute=ai,r.Uint8ClampedAttribute=function(l,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new wn(l,t)},r.Uint8ClampedBufferAttribute=wn,r.Uncharted2ToneMapping=3,r.Uniform=QA,r.UniformsLib=vn,r.UniformsUtils=__,r.UnsignedByteType=1009,r.UnsignedInt248Type=1020,r.UnsignedIntType=1014,r.UnsignedShort4444Type=1017,r.UnsignedShort5551Type=1018,r.UnsignedShort565Type=1019,r.UnsignedShortType=1012,r.VSMShadowMap=3,r.Vector2=u,r.Vector3=z,r.Vector4=C,r.VectorKeyframeTrack=ky,r.Vertex=function(l,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new z(l,t,i)},r.VertexColors=2,r.VideoTexture=fC,r.WebGLCubeRenderTarget=Zn,r.WebGLMultisampleRenderTarget=R,r.WebGLRenderTarget=S,r.WebGLRenderTargetCube=function(l,t,i){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Zn(l,i)},r.WebGLRenderer=uC,r.WebGLUtils=jw,r.WireframeGeometry=Ty,r.WireframeHelper=function(l,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Js(new Ty(l.geometry),new Fs({color:t!==void 0?t:16777215}))},r.WrapAroundEnding=2402,r.XHRLoader=function(l){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Bd(l)},r.ZeroCurvatureEnding=2400,r.ZeroFactor=200,r.ZeroSlopeEnding=2401,r.ZeroStencilOp=0,r.sRGBEncoding=3001,Object.defineProperty(r,"__esModule",{value:!0})})}),gh=At(Ou);_r(_r.S+_r.F*!yl,"Object",{defineProperty:el.f});var ic=Un.Object,Nf=function(e,r,a){return ic.defineProperty(e,r,a)},go=Ye(function(n){n.exports={default:Nf,__esModule:!0}});At(go);var io=Ye(function(n,e){e.__esModule=!0;var r=go&&go.__esModule?go:{default:go};e.default=function(a,u,p){return u in a?(0,r.default)(a,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):a[u]=p,a}}),oi=At(io);Tp("getPrototypeOf",function(){return function(n){return sh(Object(nh(n)))}});var uu=Un.Object.getPrototypeOf,pa=Ye(function(n){n.exports={default:uu,__esModule:!0}}),mo=At(pa),Hh=Ye(function(n,e){e.__esModule=!0,e.default=function(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}}),yi=At(Hh),Am=Ye(function(n,e){e.__esModule=!0;var r=Wr&&Wr.__esModule?Wr:{default:Wr};e.default=function(a,u){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||(typeof u=="undefined"?"undefined":(0,r.default)(u))!=="object"&&typeof u!="function"?a:u}}),Aa=At(Am),bp=Object.setPrototypeOf||("__proto__"in{}?function(n,e,r){try{r=sa(Function.call,J.f(Object.prototype,"__proto__").set,2),r(n,[]),e=!(n instanceof Array)}catch(a){e=!0}return function(a,u){if(Ds(a),!Wa(u)&&u!==null)throw TypeError(u+": can't set as prototype!");return e?a.__proto__=u:r(a,u),a}}({},!1):void 0);_r(_r.S,"Object",{setPrototypeOf:bp});var mh=Un.Object.setPrototypeOf,Cg=Ye(function(n){n.exports={default:mh,__esModule:!0}});At(Cg);var Ed=Ye(function(n,e){function r(y){return y&&y.__esModule?y:{default:y}}e.__esModule=!0;var a=r(Cg),u=r(Hl),p=r(Wr);e.default=function(y,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof C=="undefined"?"undefined":(0,p.default)(C)));y.prototype=(0,u.default)(C&&C.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),C&&(a.default?(0,a.default)(y,C):y.__proto__=C)}}),Ss=At(Ed);Ro===void 0&&(Number.EPSILON=Math.pow(2,-52)),ol===void 0&&(Number.isInteger=function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}),Ms===void 0&&(Math.sign=function(n){return 0>n?-1:0<n?1:+n}),!("name"in Function.prototype)&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Ce===void 0&&(Object.assign=function(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(n),r=1;r<arguments.length;r++){var a=arguments[r];if(a!=null)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e}),Ce(St.prototype,{addEventListener:function(e,r){this._listeners===void 0&&(this._listeners={});var a=this._listeners;a[e]===void 0&&(a[e]=[]),a[e].indexOf(r)===-1&&a[e].push(r)},hasEventListener:function(e,r){if(this._listeners===void 0)return!1;var a=this._listeners;return a[e]!==void 0&&a[e].indexOf(r)!==-1},removeEventListener:function(e,r){this._listeners!==void 0&&(e=this._listeners[e],e!==void 0&&(r=e.indexOf(r),r!==-1&&e.splice(r,1)))},dispatchEvent:function(e){if(this._listeners!==void 0){var r=this._listeners[e.type];if(r!==void 0){e.target=this,r=r.slice(0);for(var a=0,u=r.length;a<u;a++)r[a].call(this,e)}}}});for(var ga=[],bd=0;256>bd;bd++)ga[bd]=(16>bd?"0":"")+bd.toString(16);var Bi={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,r=4294967295*Math.random()|0,a=4294967295*Math.random()|0,u=4294967295*Math.random()|0;return(ga[e&255]+ga[e>>8&255]+ga[e>>16&255]+ga[e>>24&255]+"-"+ga[r&255]+ga[r>>8&255]+"-"+ga[r>>16&15|64]+ga[r>>24&255]+"-"+ga[a&63|128]+ga[a>>8&255]+"-"+ga[a>>16&255]+ga[a>>24&255]+ga[u&255]+ga[u>>8&255]+ga[u>>16&255]+ga[u>>24&255]).toUpperCase()},clamp:function(e,r,a){return Math.max(r,Math.min(a,e))},euclideanModulo:function(e,r){return(e%r+r)%r},mapLinear:function(e,r,a,u,p){return u+(e-r)*(p-u)/(a-r)},lerp:function(e,r,a){return(1-a)*e+a*r},smoothstep:function(e,r,a){return e<=r?0:e>=a?1:(e=(e-r)/(a-r),e*e*(3-2*e))},smootherstep:function(e,r,a){return e<=r?0:e>=a?1:(e=(e-r)/(a-r),e*e*e*(e*(6*e-15)+10))},randInt:function(e,r){return e+Math.floor(Math.random()*(r-e+1))},randFloat:function(e,r){return e+Math.random()*(r-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Bi.DEG2RAD},radToDeg:function(e){return e*Bi.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)==0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,r,a,u,p){var y=Math.cos,C=Math.sin,S=y(a/2);a=C(a/2);var R=y((r+u)/2),N=C((r+u)/2),z=y((r-u)/2),Z=C((r-u)/2);switch(y=y((u-r)/2),r=C((u-r)/2),p){case"XYX":e.set(S*N,a*z,a*Z,S*R);break;case"YZY":e.set(a*Z,S*N,a*z,S*R);break;case"ZXZ":e.set(a*z,a*Z,S*N,S*R);break;case"XZX":e.set(S*N,a*r,a*y,S*R);break;case"YXY":e.set(a*y,S*N,a*r,S*R);break;case"ZYZ":e.set(a*r,a*y,S*N,S*R);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+p)}}};Zr(ce.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Ce(ce.prototype,{isVector2:!0,set:function(e,r){return this.x=e,this.y=r,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,r){return r!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,r)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this},addScaledVector:function(e,r){return this.x+=e.x*r,this.y+=e.y*r,this},sub:function(e,r){return r!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,r)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var r=this.x,a=this.y;return e=e.elements,this.x=e[0]*r+e[3]*a+e[6],this.y=e[1]*r+e[4]*a+e[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this},clampScalar:function(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this},clampLength:function(e,r){var a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(r,a)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var r=this.x-e.x;return e=this.y-e.y,r*r+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this},lerpVectors:function(e,r,a){return this.x=e.x+(r.x-e.x)*a,this.y=e.y+(r.y-e.y)*a,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,r){return r===void 0&&(r=0),this.x=e[r],this.y=e[r+1],this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this.x,e[r+1]=this.y,e},fromBufferAttribute:function(e,r,a){return a!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(r),this.y=e.getY(r),this},rotateAround:function(e,r){var a=Math.cos(r);r=Math.sin(r);var u=this.x-e.x,p=this.y-e.y;return this.x=u*a-p*r+e.x,this.y=u*r+p*a+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Ce(Ne.prototype,{isMatrix3:!0,set:function(e,r,a,u,p,y,C,S,R){var N=this.elements;return N[0]=e,N[1]=u,N[2]=C,N[3]=r,N[4]=p,N[5]=S,N[6]=a,N[7]=y,N[8]=R,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var r=this.elements;return e=e.elements,r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],this},extractBasis:function(e,r,a){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),a.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,r){var a=e.elements,u=r.elements;r=this.elements,e=a[0];var p=a[3],y=a[6],C=a[1],S=a[4],R=a[7],N=a[2],z=a[5];a=a[8];var Z=u[0],K=u[3],ne=u[6],oe=u[1],be=u[4],je=u[7],Ie=u[2],ze=u[5];return u=u[8],r[0]=e*Z+p*oe+y*Ie,r[3]=e*K+p*be+y*ze,r[6]=e*ne+p*je+y*u,r[1]=C*Z+S*oe+R*Ie,r[4]=C*K+S*be+R*ze,r[7]=C*ne+S*je+R*u,r[2]=N*Z+z*oe+a*Ie,r[5]=N*K+z*be+a*ze,r[8]=N*ne+z*je+a*u,this},multiplyScalar:function(e){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this},determinant:function(){var e=this.elements,r=e[0],a=e[1],u=e[2],p=e[3],y=e[4],C=e[5],S=e[6],R=e[7];return e=e[8],r*y*e-r*C*R-a*p*e+a*C*S+u*p*R-u*y*S},getInverse:function(e,r){r!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var a=e.elements;e=this.elements,r=a[0];var u=a[1],p=a[2],y=a[3],C=a[4],S=a[5],R=a[6],N=a[7];a=a[8];var z=a*C-S*N,Z=S*R-a*y,K=N*y-C*R,ne=r*z+u*Z+p*K;return ne===0?this.set(0,0,0,0,0,0,0,0,0):(ne=1/ne,e[0]=z*ne,e[1]=(p*N-a*u)*ne,e[2]=(S*u-p*C)*ne,e[3]=Z*ne,e[4]=(a*r-p*R)*ne,e[5]=(p*y-S*r)*ne,e[6]=K*ne,e[7]=(u*R-N*r)*ne,e[8]=(C*r-u*y)*ne,this)},transpose:function(){var e=this.elements,r=e[1];return e[1]=e[3],e[3]=r,r=e[2],e[2]=e[6],e[6]=r,r=e[5],e[5]=e[7],e[7]=r,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this},setUvTransform:function(e,r,a,u,p,y,C){var S=Math.cos(p);p=Math.sin(p),this.set(a*S,a*p,-a*(S*y+p*C)+y+e,-u*p,u*S,-u*(-p*y+S*C)+C+r,0,0,1)},scale:function(e,r){var a=this.elements;return a[0]*=e,a[3]*=e,a[6]*=e,a[1]*=r,a[4]*=r,a[7]*=r,this},rotate:function(e){var r=Math.cos(e);e=Math.sin(e);var a=this.elements,u=a[0],p=a[3],y=a[6],C=a[1],S=a[4],R=a[7];return a[0]=r*u+e*C,a[3]=r*p+e*S,a[6]=r*y+e*R,a[1]=-e*u+r*C,a[4]=-e*p+r*S,a[7]=-e*y+r*R,this},translate:function(e,r){var a=this.elements;return a[0]+=e*a[2],a[3]+=e*a[5],a[6]+=e*a[8],a[1]+=r*a[2],a[4]+=r*a[5],a[7]+=r*a[8],this},equals:function(e){var r=this.elements;e=e.elements;for(var a=0;9>a;a++)if(r[a]!==e[a])return!1;return!0},fromArray:function(e,r){r===void 0&&(r=0);for(var a=0;9>a;a++)this.elements[a]=e[a+r];return this},toArray:function(e,r){e===void 0&&(e=[]),r===void 0&&(r=0);var a=this.elements;return e[r]=a[0],e[r+1]=a[1],e[r+2]=a[2],e[r+3]=a[3],e[r+4]=a[4],e[r+5]=a[5],e[r+6]=a[6],e[r+7]=a[7],e[r+8]=a[8],e}});var vh,Pc={getDataURL:function(e){if(typeof HTMLCanvasElement=="undefined")return e.src;if(!(e instanceof HTMLCanvasElement)){vh===void 0&&(vh=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),vh.width=e.width,vh.height=e.height;var r=vh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),e=vh}return 2048<e.width||2048<e.height?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},wg=0;Q.DEFAULT_IMAGE=void 0,Q.DEFAULT_MAPPING=300,Q.prototype=Ce(me(St.prototype),{constructor:Q,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];var a={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var u=this.image;if(u.uuid===void 0&&(u.uuid=Bi.generateUUID()),!r&&e.images[u.uuid]===void 0){if(Array.isArray(u))for(var p=[],y=0,C=u.length;y<C;y++)p.push(Pc.getDataURL(u[y]));else p=Pc.getDataURL(u);e.images[u.uuid]={uuid:u.uuid,url:p}}a.image=u.uuid}return r||(e.textures[this.uuid]=a),a},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==300)return e;if(e.applyMatrix3(this.matrix),0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=Math.abs(Math.floor(e.x)%2)===1?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=Math.abs(Math.floor(e.y)%2)===1?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Q.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Zr(Oe.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Ce(Oe.prototype,{isVector4:!0,set:function(e,r,a,u){return this.x=e,this.y=r,this.z=a,this.w=u,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,r){return r!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,r)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this},addScaledVector:function(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this},sub:function(e,r){return r!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,r)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var r=this.x,a=this.y,u=this.z,p=this.w;return e=e.elements,this.x=e[0]*r+e[4]*a+e[8]*u+e[12]*p,this.y=e[1]*r+e[5]*a+e[9]*u+e[13]*p,this.z=e[2]*r+e[6]*a+e[10]*u+e[14]*p,this.w=e[3]*r+e[7]*a+e[11]*u+e[15]*p,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var r=Math.sqrt(1-e.w*e.w);return 1e-4>r?(this.x=1,this.z=this.y=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this},setAxisAngleFromRotationMatrix:function(e){e=e.elements;var r=e[0],a=e[4],u=e[8],p=e[1],y=e[5],C=e[9],S=e[2],R=e[6],N=e[10];return .01>Math.abs(a-p)&&.01>Math.abs(u-S)&&.01>Math.abs(C-R)?.1>Math.abs(a+p)&&.1>Math.abs(u+S)&&.1>Math.abs(C+R)&&.1>Math.abs(r+y+N-3)?(this.set(1,0,0,0),this):(e=Math.PI,r=(r+1)/2,y=(y+1)/2,N=(N+1)/2,a=(a+p)/4,u=(u+S)/4,C=(C+R)/4,r>y&&r>N?.01>r?(R=0,a=S=.707106781):(R=Math.sqrt(r),S=a/R,a=u/R):y>N?.01>y?(R=.707106781,S=0,a=.707106781):(S=Math.sqrt(y),R=a/S,a=C/S):.01>N?(S=R=.707106781,a=0):(a=Math.sqrt(N),R=u/a,S=C/a),this.set(R,S,a,e),this):(e=Math.sqrt((R-C)*(R-C)+(u-S)*(u-S)+(p-a)*(p-a)),.001>Math.abs(e)&&(e=1),this.x=(R-C)/e,this.y=(u-S)/e,this.z=(p-a)/e,this.w=Math.acos((r+y+N-1)/2),this)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this.w=Math.max(e.w,Math.min(r.w,this.w)),this},clampScalar:function(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this.w=Math.max(e,Math.min(r,this.w)),this},clampLength:function(e,r){var a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(r,a)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this},lerpVectors:function(e,r,a){return this.x=e.x+(r.x-e.x)*a,this.y=e.y+(r.y-e.y)*a,this.z=e.z+(r.z-e.z)*a,this.w=e.w+(r.w-e.w)*a,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,r){return r===void 0&&(r=0),this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e},fromBufferAttribute:function(e,r,a){return a!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),pt.prototype=Ce(me(St.prototype),{constructor:pt,isWebGLRenderTarget:!0,setSize:function(e,r){(this.width!==e||this.height!==r)&&(this.width=e,this.height=r,this.texture.image.width=e,this.texture.image.height=r,this.dispose()),this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Lt.prototype=Ce(me(pt.prototype),{constructor:Lt,isWebGLMultisampleRenderTarget:!0,copy:function(e){return pt.prototype.copy.call(this,e),this.samples=e.samples,this}}),Ce(Er,{slerp:function(e,r,a,u){return a.copy(e).slerp(r,u)},slerpFlat:function(e,r,a,u,p,y,C){var S=a[u+0],R=a[u+1],N=a[u+2];a=a[u+3],u=p[y+0];var z=p[y+1],Z=p[y+2];if(p=p[y+3],a!==p||S!==u||R!==z||N!==Z){y=1-C;var K=S*u+R*z+N*Z+a*p,ne=0<=K?1:-1,oe=1-K*K;oe>Ro&&(oe=Math.sqrt(oe),K=Math.atan2(oe,K*ne),y=Math.sin(y*K)/oe,C=Math.sin(C*K)/oe),ne*=C,S=S*y+u*ne,R=R*y+z*ne,N=N*y+Z*ne,a=a*y+p*ne,y===1-C&&(C=1/Math.sqrt(S*S+R*R+N*N+a*a),S*=C,R*=C,N*=C,a*=C)}e[r]=S,e[r+1]=R,e[r+2]=N,e[r+3]=a},multiplyQuaternionsFlat:function(e,r,a,u,p,y){var C=a[u],S=a[u+1],R=a[u+2];a=a[u+3],u=p[y];var N=p[y+1],z=p[y+2];return p=p[y+3],e[r]=C*p+a*u+S*z-R*N,e[r+1]=S*p+a*N+R*u-C*z,e[r+2]=R*p+a*z+C*N-S*u,e[r+3]=a*p-C*u-S*N-R*z,e}}),Zr(Er.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Ce(Er.prototype,{isQuaternion:!0,set:function(e,r,a,u){return this._x=e,this._y=r,this._z=a,this._w=u,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,r){if(!e||!e.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var a=e._x,u=e._y,p=e._z;e=e.order;var y=Math.cos,C=Math.sin,S=y(a/2),R=y(u/2);switch(y=y(p/2),a=C(a/2),u=C(u/2),p=C(p/2),e){case"XYZ":this._x=a*R*y+S*u*p,this._y=S*u*y-a*R*p,this._z=S*R*p+a*u*y,this._w=S*R*y-a*u*p;break;case"YXZ":this._x=a*R*y+S*u*p,this._y=S*u*y-a*R*p,this._z=S*R*p-a*u*y,this._w=S*R*y+a*u*p;break;case"ZXY":this._x=a*R*y-S*u*p,this._y=S*u*y+a*R*p,this._z=S*R*p+a*u*y,this._w=S*R*y-a*u*p;break;case"ZYX":this._x=a*R*y-S*u*p,this._y=S*u*y+a*R*p,this._z=S*R*p-a*u*y,this._w=S*R*y+a*u*p;break;case"YZX":this._x=a*R*y+S*u*p,this._y=S*u*y+a*R*p,this._z=S*R*p-a*u*y,this._w=S*R*y-a*u*p;break;case"XZY":this._x=a*R*y-S*u*p,this._y=S*u*y-a*R*p,this._z=S*R*p+a*u*y,this._w=S*R*y+a*u*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+e)}return r!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(e,r){r/=2;var a=Math.sin(r);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(r),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var r=e.elements,a=r[0];e=r[4];var u=r[8],p=r[1],y=r[5],C=r[9],S=r[2],R=r[6];r=r[10];var N=a+y+r;return 0<N?(a=.5/Math.sqrt(N+1),this._w=.25/a,this._x=(R-C)*a,this._y=(u-S)*a,this._z=(p-e)*a):a>y&&a>r?(a=2*Math.sqrt(1+a-y-r),this._w=(R-C)/a,this._x=.25*a,this._y=(e+p)/a,this._z=(u+S)/a):y>r?(a=2*Math.sqrt(1+y-a-r),this._w=(u-S)/a,this._x=(e+p)/a,this._y=.25*a,this._z=(C+R)/a):(a=2*Math.sqrt(1+r-a-y),this._w=(p-e)/a,this._x=(u+S)/a,this._y=(C+R)/a,this._z=.25*a),this._onChangeCallback(),this},setFromUnitVectors:function(e,r){var a=e.dot(r)+1;return 1e-6>a?(a=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x),this._w=a,this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Bi.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,r){var a=this.angleTo(e);return a===0?this:(this.slerp(e,Math.min(1,r/a)),this)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this._onChangeCallback(),this},multiply:function(e,r){return r!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,r)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,r){var a=e._x,u=e._y,p=e._z;e=e._w;var y=r._x,C=r._y,S=r._z;return r=r._w,this._x=a*r+e*y+u*S-p*C,this._y=u*r+e*C+p*y-a*S,this._z=p*r+e*S+a*C-u*y,this._w=e*r-a*y-u*C-p*S,this._onChangeCallback(),this},slerp:function(e,r){if(r===0)return this;if(r===1)return this.copy(e);var a=this._x,u=this._y,p=this._z,y=this._w,C=y*e._w+a*e._x+u*e._y+p*e._z;if(0>C?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,C=-C):this.copy(e),1<=C)return this._w=y,this._x=a,this._y=u,this._z=p,this;if(e=1-C*C,e<=Ro)return C=1-r,this._w=C*y+r*this._w,this._x=C*a+r*this._x,this._y=C*u+r*this._y,this._z=C*p+r*this._z,this.normalize(),this._onChangeCallback(),this;e=Math.sqrt(e);var S=Math.atan2(e,C);return C=Math.sin((1-r)*S)/e,r=Math.sin(r*S)/e,this._w=y*C+this._w*r,this._x=a*C+this._x*r,this._y=u*C+this._y*r,this._z=p*C+this._z*r,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,r){return r===void 0&&(r=0),this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e},fromBufferAttribute:function(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Ld=new xe,Cm=new Er;Ce(xe.prototype,{isVector3:!0,set:function(e,r,a){return this.x=e,this.y=r,this.z=a,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,r){return r!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,r)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this},addScaledVector:function(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this},sub:function(e,r){return r!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,r)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this},multiply:function(e,r){return r!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,r)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Cm.setFromEuler(e))},applyAxisAngle:function(e,r){return this.applyQuaternion(Cm.setFromAxisAngle(e,r))},applyMatrix3:function(e){var r=this.x,a=this.y,u=this.z;return e=e.elements,this.x=e[0]*r+e[3]*a+e[6]*u,this.y=e[1]*r+e[4]*a+e[7]*u,this.z=e[2]*r+e[5]*a+e[8]*u,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var r=this.x,a=this.y,u=this.z;e=e.elements;var p=1/(e[3]*r+e[7]*a+e[11]*u+e[15]);return this.x=(e[0]*r+e[4]*a+e[8]*u+e[12])*p,this.y=(e[1]*r+e[5]*a+e[9]*u+e[13])*p,this.z=(e[2]*r+e[6]*a+e[10]*u+e[14])*p,this},applyQuaternion:function(e){var r=this.x,a=this.y,u=this.z,p=e.x,y=e.y,C=e.z;e=e.w;var S=e*r+y*u-C*a,R=e*a+C*r-p*u,N=e*u+p*a-y*r;return r=-p*r-y*a-C*u,this.x=S*e+r*-p+R*-C-N*-y,this.y=R*e+r*-y+N*-p-S*-C,this.z=N*e+r*-C+S*-y-R*-p,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var r=this.x,a=this.y,u=this.z;return e=e.elements,this.x=e[0]*r+e[4]*a+e[8]*u,this.y=e[1]*r+e[5]*a+e[9]*u,this.z=e[2]*r+e[6]*a+e[10]*u,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this},clampScalar:function(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this},clampLength:function(e,r){var a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(r,a)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this},lerpVectors:function(e,r,a){return this.x=e.x+(r.x-e.x)*a,this.y=e.y+(r.y-e.y)*a,this.z=e.z+(r.z-e.z)*a,this},cross:function(e,r){return r!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,r)):this.crossVectors(this,e)},crossVectors:function(e,r){var a=e.x,u=e.y;e=e.z;var p=r.x,y=r.y;return r=r.z,this.x=u*r-e*y,this.y=e*p-a*r,this.z=a*y-u*p,this},projectOnVector:function(e){var r=e.lengthSq();return r===0?this.set(0,0,0):(r=e.dot(this)/r,this.copy(e).multiplyScalar(r))},projectOnPlane:function(e){return Ld.copy(this).projectOnVector(e),this.sub(Ld)},reflect:function(e){return this.sub(Ld.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var r=Math.sqrt(this.lengthSq()*e.lengthSq());return r===0?Math.PI/2:(e=this.dot(e)/r,Math.acos(Bi.clamp(e,-1,1)))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var r=this.x-e.x,a=this.y-e.y;return e=this.z-e.z,r*r+a*a+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,r,a){var u=Math.sin(r)*e;return this.x=u*Math.sin(a),this.y=Math.cos(r)*e,this.z=u*Math.cos(a),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,r,a){return this.x=e*Math.sin(r),this.y=a,this.z=e*Math.cos(r),this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var r=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=r,this.y=a,this.z=e,this},setFromMatrixColumn:function(e,r){return this.fromArray(e.elements,4*r)},setFromMatrix3Column:function(e,r){return this.fromArray(e.elements,3*r)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,r){return r===void 0&&(r=0),this.x=e[r],this.y=e[r+1],this.z=e[r+2],this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e},fromBufferAttribute:function(e,r,a){return a!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Gh=new xe,oc=new Lr,v0=new xe(0,0,0),y0=new xe(1,1,1),bi=new xe,vo=new xe,Bo=new xe;Ce(Lr.prototype,{isMatrix4:!0,set:function(e,r,a,u,p,y,C,S,R,N,z,Z,K,ne,oe,be){var je=this.elements;return je[0]=e,je[4]=r,je[8]=a,je[12]=u,je[1]=p,je[5]=y,je[9]=C,je[13]=S,je[2]=R,je[6]=N,je[10]=z,je[14]=Z,je[3]=K,je[7]=ne,je[11]=oe,je[15]=be,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Lr().fromArray(this.elements)},copy:function(e){var r=this.elements;return e=e.elements,r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],this},copyPosition:function(e){var r=this.elements;return e=e.elements,r[12]=e[12],r[13]=e[13],r[14]=e[14],this},extractBasis:function(e,r,a){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this},makeBasis:function(e,r,a){return this.set(e.x,r.x,a.x,0,e.y,r.y,a.y,0,e.z,r.z,a.z,0,0,0,0,1),this},extractRotation:function(e){var r=this.elements,a=e.elements,u=1/Gh.setFromMatrixColumn(e,0).length(),p=1/Gh.setFromMatrixColumn(e,1).length();return e=1/Gh.setFromMatrixColumn(e,2).length(),r[0]=a[0]*u,r[1]=a[1]*u,r[2]=a[2]*u,r[3]=0,r[4]=a[4]*p,r[5]=a[5]*p,r[6]=a[6]*p,r[7]=0,r[8]=a[8]*e,r[9]=a[9]*e,r[10]=a[10]*e,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=this.elements,a=e.x,u=e.y,p=e.z,y=Math.cos(a);a=Math.sin(a);var C=Math.cos(u);u=Math.sin(u);var S=Math.cos(p);if(p=Math.sin(p),e.order==="XYZ"){e=y*S;var R=y*p,N=a*S,z=a*p;r[0]=C*S,r[4]=-C*p,r[8]=u,r[1]=R+N*u,r[5]=e-z*u,r[9]=-a*C,r[2]=z-e*u,r[6]=N+R*u,r[10]=y*C}else e.order==="YXZ"?(e=C*S,R=C*p,N=u*S,z=u*p,r[0]=e+z*a,r[4]=N*a-R,r[8]=y*u,r[1]=y*p,r[5]=y*S,r[9]=-a,r[2]=R*a-N,r[6]=z+e*a,r[10]=y*C):e.order==="ZXY"?(e=C*S,R=C*p,N=u*S,z=u*p,r[0]=e-z*a,r[4]=-y*p,r[8]=N+R*a,r[1]=R+N*a,r[5]=y*S,r[9]=z-e*a,r[2]=-y*u,r[6]=a,r[10]=y*C):e.order==="ZYX"?(e=y*S,R=y*p,N=a*S,z=a*p,r[0]=C*S,r[4]=N*u-R,r[8]=e*u+z,r[1]=C*p,r[5]=z*u+e,r[9]=R*u-N,r[2]=-u,r[6]=a*C,r[10]=y*C):e.order==="YZX"?(e=y*C,R=y*u,N=a*C,z=a*u,r[0]=C*S,r[4]=z-e*p,r[8]=N*p+R,r[1]=p,r[5]=y*S,r[9]=-a*S,r[2]=-u*S,r[6]=R*p+N,r[10]=e-z*p):e.order==="XZY"&&(e=y*C,R=y*u,N=a*C,z=a*u,r[0]=C*S,r[4]=-p,r[8]=u*S,r[1]=e*p+z,r[5]=y*S,r[9]=R*p-N,r[2]=N*p-R,r[6]=a*S,r[10]=z*p+e);return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(v0,e,y0)},lookAt:function(e,r,a){var u=this.elements;return Bo.subVectors(e,r),Bo.lengthSq()===0&&(Bo.z=1),Bo.normalize(),bi.crossVectors(a,Bo),bi.lengthSq()===0&&(Math.abs(a.z)===1?Bo.x+=1e-4:Bo.z+=1e-4,Bo.normalize(),bi.crossVectors(a,Bo)),bi.normalize(),vo.crossVectors(Bo,bi),u[0]=bi.x,u[4]=vo.x,u[8]=Bo.x,u[1]=bi.y,u[5]=vo.y,u[9]=Bo.y,u[2]=bi.z,u[6]=vo.z,u[10]=Bo.z,this},multiply:function(e,r){return r!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,r)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,r){var a=e.elements,u=r.elements;r=this.elements,e=a[0];var p=a[4],y=a[8],C=a[12],S=a[1],R=a[5],N=a[9],z=a[13],Z=a[2],K=a[6],ne=a[10],oe=a[14],be=a[3],je=a[7],Ie=a[11];a=a[15];var ze=u[0],et=u[4],xt=u[8],gt=u[12],We=u[1],Rt=u[5],Pt=u[9],pr=u[13],Rr=u[2],Tt=u[6],gn=u[10],tr=u[14],bn=u[3],ai=u[7],wn=u[11];return u=u[15],r[0]=e*ze+p*We+y*Rr+C*bn,r[4]=e*et+p*Rt+y*Tt+C*ai,r[8]=e*xt+p*Pt+y*gn+C*wn,r[12]=e*gt+p*pr+y*tr+C*u,r[1]=S*ze+R*We+N*Rr+z*bn,r[5]=S*et+R*Rt+N*Tt+z*ai,r[9]=S*xt+R*Pt+N*gn+z*wn,r[13]=S*gt+R*pr+N*tr+z*u,r[2]=Z*ze+K*We+ne*Rr+oe*bn,r[6]=Z*et+K*Rt+ne*Tt+oe*ai,r[10]=Z*xt+K*Pt+ne*gn+oe*wn,r[14]=Z*gt+K*pr+ne*tr+oe*u,r[3]=be*ze+je*We+Ie*Rr+a*bn,r[7]=be*et+je*Rt+Ie*Tt+a*ai,r[11]=be*xt+je*Pt+Ie*gn+a*wn,r[15]=be*gt+je*pr+Ie*tr+a*u,this},multiplyScalar:function(e){var r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this},determinant:function(){var e=this.elements,r=e[0],a=e[4],u=e[8],p=e[12],y=e[1],C=e[5],S=e[9],R=e[13],N=e[2],z=e[6],Z=e[10],K=e[14];return e[3]*(+p*S*z-u*R*z-p*C*Z+a*R*Z+u*C*K-a*S*K)+e[7]*(+r*S*K-r*R*Z+p*y*Z-u*y*K+u*R*N-p*S*N)+e[11]*(+r*R*z-r*C*K-p*y*z+a*y*K+p*C*N-a*R*N)+e[15]*(-u*C*N-r*S*z+r*C*Z+u*y*z-a*y*Z+a*S*N)},transpose:function(){var e=this.elements,r=e[1];return e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this},setPosition:function(e,r,a){var u=this.elements;return e.isVector3?(u[12]=e.x,u[13]=e.y,u[14]=e.z):(u[12]=e,u[13]=r,u[14]=a),this},getInverse:function(e,r){r!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate."),r=this.elements;var a=e.elements;e=a[0];var u=a[1],p=a[2],y=a[3],C=a[4],S=a[5],R=a[6],N=a[7],z=a[8],Z=a[9],K=a[10],ne=a[11],oe=a[12],be=a[13],je=a[14];a=a[15];var Ie=Z*je*N-be*K*N+be*R*ne-S*je*ne-Z*R*a+S*K*a,ze=oe*K*N-z*je*N-oe*R*ne+C*je*ne+z*R*a-C*K*a,et=z*be*N-oe*Z*N+oe*S*ne-C*be*ne-z*S*a+C*Z*a,xt=oe*Z*R-z*be*R-oe*S*K+C*be*K+z*S*je-C*Z*je,gt=e*Ie+u*ze+p*et+y*xt;return gt===0?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(gt=1/gt,r[0]=Ie*gt,r[1]=(be*K*y-Z*je*y-be*p*ne+u*je*ne+Z*p*a-u*K*a)*gt,r[2]=(S*je*y-be*R*y+be*p*N-u*je*N-S*p*a+u*R*a)*gt,r[3]=(Z*R*y-S*K*y-Z*p*N+u*K*N+S*p*ne-u*R*ne)*gt,r[4]=ze*gt,r[5]=(z*je*y-oe*K*y+oe*p*ne-e*je*ne-z*p*a+e*K*a)*gt,r[6]=(oe*R*y-C*je*y-oe*p*N+e*je*N+C*p*a-e*R*a)*gt,r[7]=(C*K*y-z*R*y+z*p*N-e*K*N-C*p*ne+e*R*ne)*gt,r[8]=et*gt,r[9]=(oe*Z*y-z*be*y-oe*u*ne+e*be*ne+z*u*a-e*Z*a)*gt,r[10]=(C*be*y-oe*S*y+oe*u*N-e*be*N-C*u*a+e*S*a)*gt,r[11]=(z*S*y-C*Z*y-z*u*N+e*Z*N+C*u*ne-e*S*ne)*gt,r[12]=xt*gt,r[13]=(z*be*p-oe*Z*p+oe*u*K-e*be*K-z*u*je+e*Z*je)*gt,r[14]=(oe*S*p-C*be*p-oe*u*R+e*be*R+C*u*je-e*S*je)*gt,r[15]=(C*Z*p-z*S*p+z*u*R-e*Z*R-C*u*K+e*S*K)*gt,this)},scale:function(e){var r=this.elements,a=e.x,u=e.y;return e=e.z,r[0]*=a,r[4]*=u,r[8]*=e,r[1]*=a,r[5]*=u,r[9]*=e,r[2]*=a,r[6]*=u,r[10]*=e,r[3]*=a,r[7]*=u,r[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,r,a){return this.set(1,0,0,e,0,1,0,r,0,0,1,a,0,0,0,1),this},makeRotationX:function(e){var r=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,r,-e,0,0,e,r,0,0,0,0,1),this},makeRotationY:function(e){var r=Math.cos(e);return e=Math.sin(e),this.set(r,0,e,0,0,1,0,0,-e,0,r,0,0,0,0,1),this},makeRotationZ:function(e){var r=Math.cos(e);return e=Math.sin(e),this.set(r,-e,0,0,e,r,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,r){var a=Math.cos(r);r=Math.sin(r);var u=1-a,p=e.x,y=e.y;e=e.z;var C=u*p,S=u*y;return this.set(C*p+a,C*y-r*e,C*e+r*y,0,C*y+r*e,S*y+a,S*e-r*p,0,C*e-r*y,S*e+r*p,u*e*e+a,0,0,0,0,1),this},makeScale:function(e,r,a){return this.set(e,0,0,0,0,r,0,0,0,0,a,0,0,0,0,1),this},makeShear:function(e,r,a){return this.set(1,r,a,0,e,1,a,0,e,r,1,0,0,0,0,1),this},compose:function(e,r,a){var u=this.elements,p=r._x,y=r._y,C=r._z,S=r._w,R=p+p,N=y+y,z=C+C;r=p*R;var Z=p*N;p*=z;var K=y*N;y*=z,C*=z,R*=S,N*=S,S*=z,z=a.x;var ne=a.y;return a=a.z,u[0]=(1-(K+C))*z,u[1]=(Z+S)*z,u[2]=(p-N)*z,u[3]=0,u[4]=(Z-S)*ne,u[5]=(1-(r+C))*ne,u[6]=(y+R)*ne,u[7]=0,u[8]=(p+N)*a,u[9]=(y-R)*a,u[10]=(1-(r+K))*a,u[11]=0,u[12]=e.x,u[13]=e.y,u[14]=e.z,u[15]=1,this},decompose:function(e,r,a){var u=this.elements,p=Gh.set(u[0],u[1],u[2]).length(),y=Gh.set(u[4],u[5],u[6]).length(),C=Gh.set(u[8],u[9],u[10]).length();0>this.determinant()&&(p=-p),e.x=u[12],e.y=u[13],e.z=u[14],oc.copy(this),e=1/p,u=1/y;var S=1/C;return oc.elements[0]*=e,oc.elements[1]*=e,oc.elements[2]*=e,oc.elements[4]*=u,oc.elements[5]*=u,oc.elements[6]*=u,oc.elements[8]*=S,oc.elements[9]*=S,oc.elements[10]*=S,r.setFromRotationMatrix(oc),a.x=p,a.y=y,a.z=C,this},makePerspective:function(e,r,a,u,p,y){y===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var C=this.elements;return C[0]=2*p/(r-e),C[4]=0,C[8]=(r+e)/(r-e),C[12]=0,C[1]=0,C[5]=2*p/(a-u),C[9]=(a+u)/(a-u),C[13]=0,C[2]=0,C[6]=0,C[10]=-(y+p)/(y-p),C[14]=-2*y*p/(y-p),C[3]=0,C[7]=0,C[11]=-1,C[15]=0,this},makeOrthographic:function(e,r,a,u,p,y){var C=this.elements,S=1/(r-e),R=1/(a-u),N=1/(y-p);return C[0]=2*S,C[4]=0,C[8]=0,C[12]=-((r+e)*S),C[1]=0,C[5]=2*R,C[9]=0,C[13]=-((a+u)*R),C[2]=0,C[6]=0,C[10]=-2*N,C[14]=-((y+p)*N),C[3]=0,C[7]=0,C[11]=0,C[15]=1,this},equals:function(e){var r=this.elements;e=e.elements;for(var a=0;16>a;a++)if(r[a]!==e[a])return!1;return!0},fromArray:function(e,r){r===void 0&&(r=0);for(var a=0;16>a;a++)this.elements[a]=e[a+r];return this},toArray:function(e,r){e===void 0&&(e=[]),r===void 0&&(r=0);var a=this.elements;return e[r]=a[0],e[r+1]=a[1],e[r+2]=a[2],e[r+3]=a[3],e[r+4]=a[4],e[r+5]=a[5],e[r+6]=a[6],e[r+7]=a[7],e[r+8]=a[8],e[r+9]=a[9],e[r+10]=a[10],e[r+11]=a[11],e[r+12]=a[12],e[r+13]=a[13],e[r+14]=a[14],e[r+15]=a[15],e}});var jl=new Lr,wm=new Er;Hn.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),Hn.DefaultOrder="XYZ",Zr(Hn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Ce(Hn.prototype,{isEuler:!0,set:function(e,r,a,u){return this._x=e,this._y=r,this._z=a,this._order=u||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,r,a){var u=Bi.clamp,p=e.elements;e=p[0];var y=p[4],C=p[8],S=p[1],R=p[5],N=p[9],z=p[2],Z=p[6];switch(p=p[10],r=r||this._order,r){case"XYZ":this._y=Math.asin(u(C,-1,1)),.9999999>Math.abs(C)?(this._x=Math.atan2(-N,p),this._z=Math.atan2(-y,e)):(this._x=Math.atan2(Z,R),this._z=0);break;case"YXZ":this._x=Math.asin(-u(N,-1,1)),.9999999>Math.abs(N)?(this._y=Math.atan2(C,p),this._z=Math.atan2(S,R)):(this._y=Math.atan2(-z,e),this._z=0);break;case"ZXY":this._x=Math.asin(u(Z,-1,1)),.9999999>Math.abs(Z)?(this._y=Math.atan2(-z,p),this._z=Math.atan2(-y,R)):(this._y=0,this._z=Math.atan2(S,e));break;case"ZYX":this._y=Math.asin(-u(z,-1,1)),.9999999>Math.abs(z)?(this._x=Math.atan2(Z,p),this._z=Math.atan2(S,e)):(this._x=0,this._z=Math.atan2(-y,R));break;case"YZX":this._z=Math.asin(u(S,-1,1)),.9999999>Math.abs(S)?(this._x=Math.atan2(-N,R),this._y=Math.atan2(-z,e)):(this._x=0,this._y=Math.atan2(C,p));break;case"XZY":this._z=Math.asin(-u(y,-1,1)),.9999999>Math.abs(y)?(this._x=Math.atan2(Z,R),this._y=Math.atan2(C,e)):(this._x=Math.atan2(-N,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,a!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(e,r,a){return jl.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jl,r,a)},setFromVector3:function(e,r){return this.set(e.x,e.y,e.z,r||this._order)},reorder:function(e){return wm.setFromEuler(this),this.setFromQuaternion(wm,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new xe(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Ce(bo.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask=this.mask|1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return(this.mask&e.mask)!=0}});var Ts=0,_m=new xe,jh=new Er,is=new Lr,ci=new xe,_g=new xe,Ks=new xe,Is=new Er,ty=new xe(1,0,0),Bf=new xe(0,1,0),ry=new xe(0,0,1),y1={type:"added"},x1={type:"removed"};Cr.DefaultUp=new xe(0,1,0),Cr.DefaultMatrixAutoUpdate=!0,Cr.prototype=Ce(me(St.prototype),{constructor:Cr,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,r){this.quaternion.setFromAxisAngle(e,r)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,r){return jh.setFromAxisAngle(e,r),this.quaternion.multiply(jh),this},rotateOnWorldAxis:function(e,r){return jh.setFromAxisAngle(e,r),this.quaternion.premultiply(jh),this},rotateX:function(e){return this.rotateOnAxis(ty,e)},rotateY:function(e){return this.rotateOnAxis(Bf,e)},rotateZ:function(e){return this.rotateOnAxis(ry,e)},translateOnAxis:function(e,r){return _m.copy(e).applyQuaternion(this.quaternion),this.position.add(_m.multiplyScalar(r)),this},translateX:function(e){return this.translateOnAxis(ty,e)},translateY:function(e){return this.translateOnAxis(Bf,e)},translateZ:function(e){return this.translateOnAxis(ry,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(is.getInverse(this.matrixWorld))},lookAt:function(e,r,a){e.isVector3?ci.copy(e):ci.set(e,r,a),e=this.parent,this.updateWorldMatrix(!0,!1),_g.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?is.lookAt(_g,ci,this.up):is.lookAt(ci,_g,this.up),this.quaternion.setFromRotationMatrix(is),e&&(is.extractRotation(e.matrixWorld),jh.setFromRotationMatrix(is),this.quaternion.premultiply(jh.inverse()))},add:function(e){if(1<arguments.length){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(y1)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(1<arguments.length){for(var r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}return r=this.children.indexOf(e),r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(x1)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),is.getInverse(this.matrixWorld),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),is.multiply(e.parent.matrixWorld)),e.applyMatrix4(is),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,r){if(this[e]===r)return this;for(var a=0,u=this.children.length;a<u;a++){var p=this.children[a].getObjectByProperty(e,r);if(p!==void 0)return p}},getWorldPosition:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new xe),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Er),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_g,e,Ks),e},getWorldScale:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new xe),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_g,Is,e),e},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new xe),this.updateMatrixWorld(!0);var r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var r=this.children,a=0,u=r.length;a<u;a++)r[a].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var r=this.children,a=0,u=r.length;a<u;a++)r[a].traverseVisible(e)}},traverseAncestors:function(e){var r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var r=this.children,a=0,u=r.length;a<u;a++)r[a].updateMatrixWorld(e)},updateWorldMatrix:function(e,r){var a=this.parent;if(e===!0&&a!==null&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),r===!0)for(e=this.children,r=0,a=e.length;r<a;r++)e[r].updateWorldMatrix(!1,!0)},toJSON:function(e){function r(z,Z){return z[Z.uuid]===void 0&&(z[Z.uuid]=Z.toJSON(e)),Z.uuid}function a(z){var Z=[],K;for(K in z){var ne=z[K];delete ne.metadata,Z.push(ne)}return Z}var u=e===void 0||typeof e=="string",p={};u&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},p.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var y={};if(y.uuid=this.uuid,y.type=this.type,this.name!==""&&(y.name=this.name),this.castShadow===!0&&(y.castShadow=!0),this.receiveShadow===!0&&(y.receiveShadow=!0),this.visible===!1&&(y.visible=!1),this.frustumCulled===!1&&(y.frustumCulled=!1),this.renderOrder!==0&&(y.renderOrder=this.renderOrder),ha(this.userData)!=="{}"&&(y.userData=this.userData),y.layers=this.layers.mask,y.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(y.matrixAutoUpdate=!1),this.isInstancedMesh&&(y.type="InstancedMesh",y.count=this.count,y.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){y.geometry=r(e.geometries,this.geometry);var C=this.geometry.parameters;if(C!==void 0&&C.shapes!==void 0)if(C=C.shapes,Array.isArray(C))for(var S=0,R=C.length;S<R;S++)r(e.shapes,C[S]);else r(e.shapes,C)}if(this.material!==void 0)if(Array.isArray(this.material)){for(C=[],S=0,R=this.material.length;S<R;S++)C.push(r(e.materials,this.material[S]));y.material=C}else y.material=r(e.materials,this.material);if(0<this.children.length)for(y.children=[],S=0;S<this.children.length;S++)y.children.push(this.children[S].toJSON(e).object);if(u){u=a(e.geometries),S=a(e.materials),R=a(e.textures);var N=a(e.images);C=a(e.shapes),0<u.length&&(p.geometries=u),0<S.length&&(p.materials=S),0<R.length&&(p.textures=R),0<N.length&&(p.images=N),0<C.length&&(p.shapes=C)}return p.object=y,p},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,r){if(r===void 0&&(r=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(ha(e.userData)),r===!0)for(r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}),Lo.prototype=Ce(me(Cr.prototype),{constructor:Lo,isScene:!0,copy:function(e,r){return Cr.prototype.copy.call(this,e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var r=Cr.prototype.toJSON.call(this,e);return this.background!==null&&(r.object.background=this.background.toJSON(e)),this.environment!==null&&(r.object.environment=this.environment.toJSON(e)),this.fog!==null&&(r.object.fog=this.fog.toJSON()),r},dispose:function(){this.dispatchEvent({type:"dispose"})}});var zf=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe],Mm=new xe,Sm=new Ui,Mg=new xe,Du=new xe,m=new xe,o=new xe,c=new xe,s=new xe,h=new xe,f=new xe,x=new xe,g=new xe;Ce(Ui.prototype,{isBox3:!0,set:function(e,r){return this.min.copy(e),this.max.copy(r),this},setFromArray:function(e){for(var r=Infinity,a=Infinity,u=Infinity,p=-Infinity,y=-Infinity,C=-Infinity,S=0,R=e.length;S<R;S+=3){var N=e[S],z=e[S+1],Z=e[S+2];N<r&&(r=N),z<a&&(a=z),Z<u&&(u=Z),N>p&&(p=N),z>y&&(y=z),Z>C&&(C=Z)}return this.min.set(r,a,u),this.max.set(p,y,C),this},setFromBufferAttribute:function(e){for(var r=Infinity,a=Infinity,u=Infinity,p=-Infinity,y=-Infinity,C=-Infinity,S=0,R=e.count;S<R;S++){var N=e.getX(S),z=e.getY(S),Z=e.getZ(S);N<r&&(r=N),z<a&&(a=z),Z<u&&(u=Z),N>p&&(p=N),z>y&&(y=z),Z>C&&(C=Z)}return this.min.set(r,a,u),this.max.set(p,y,C),this},setFromPoints:function(e){this.makeEmpty();for(var r=0,a=e.length;r<a;r++)this.expandByPoint(e[r]);return this},setFromCenterAndSize:function(e,r){return r=Mm.copy(r).multiplyScalar(.5),this.min.copy(e).sub(r),this.max.copy(e).add(r),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new xe),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new xe),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var r=e.geometry;r!==void 0&&(r.boundingBox===null&&r.computeBoundingBox(),Sm.copy(r.boundingBox),Sm.applyMatrix4(e.matrixWorld),this.union(Sm)),e=e.children,r=0;for(var a=e.length;r<a;r++)this.expandByObject(e[r]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,r){return r===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),r=new xe),r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,Mm),Mm.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){if(0<e.normal.x)var r=e.normal.x*this.min.x,a=e.normal.x*this.max.x;else r=e.normal.x*this.max.x,a=e.normal.x*this.min.x;return 0<e.normal.y?(r+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),0<e.normal.z?(r+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),r<=-e.constant&&a>=-e.constant},intersectsTriangle:function(e){return this.isEmpty()||(this.getCenter(h),f.subVectors(this.max,h),Mg.subVectors(e.a,h),Du.subVectors(e.b,h),m.subVectors(e.c,h),o.subVectors(Du,Mg),c.subVectors(m,Du),s.subVectors(Mg,m),e=[0,-o.z,o.y,0,-c.z,c.y,0,-s.z,s.y,o.z,0,-o.x,c.z,0,-c.x,s.z,0,-s.x,-o.y,o.x,0,-c.y,c.x,0,-s.y,s.x,0],!mi(e,Mg,Du,m,f))||(e=[1,0,0,0,1,0,0,0,1],!mi(e,Mg,Du,m,f))?!1:(x.crossVectors(o,c),e=[x.x,x.y,x.z],mi(e,Mg,Du,m,f))},clampPoint:function(e,r){return r===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),r=new xe),r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Mm.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Mm).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()?this:(zf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),zf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),zf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),zf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),zf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),zf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),zf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),zf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(zf),this)},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var _=new Ui;Ce(Ko.prototype,{set:function(e,r){return this.center.copy(e),this.radius=r,this},setFromPoints:function(e,r){var a=this.center;r!==void 0?a.copy(r):_.setFromPoints(e).getCenter(a);for(var u=r=0,p=e.length;u<p;u++)r=Math.max(r,a.distanceToSquared(e[u]));return this.radius=Math.sqrt(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return 0>this.radius},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,r){var a=this.center.distanceToSquared(e);return r===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),r=new xe),r.copy(e),a>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Ui),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var L=new xe,F=new xe,M=new xe,E=new xe,P=new xe,O=new xe,B=new xe;Ce(ro.prototype,{set:function(e,r){return this.origin.copy(e),this.direction.copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,r){return r===void 0&&(console.warn("THREE.Ray: .at() target is now required"),r=new xe),r.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,L)),this},closestPointToPoint:function(e,r){return r===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),r=new xe),r.subVectors(e,this.origin),e=r.dot(this.direction),0>e?r.copy(this.origin):r.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var r=L.subVectors(e,this.origin).dot(this.direction);return 0>r?this.origin.distanceToSquared(e):(L.copy(this.direction).multiplyScalar(r).add(this.origin),L.distanceToSquared(e))},distanceSqToSegment:function(e,r,a,u){F.copy(e).add(r).multiplyScalar(.5),M.copy(r).sub(e).normalize(),E.copy(this.origin).sub(F);var p=.5*e.distanceTo(r),y=-this.direction.dot(M),C=E.dot(this.direction),S=-E.dot(M),R=E.lengthSq(),N=Math.abs(1-y*y);if(0<N){e=y*S-C,r=y*C-S;var z=p*N;0<=e?r>=-z?r<=z?(p=1/N,e*=p,r*=p,y=e*(e+y*r+2*C)+r*(y*e+r+2*S)+R):(r=p,e=Math.max(0,-(y*r+C)),y=-e*e+r*(r+2*S)+R):(r=-p,e=Math.max(0,-(y*r+C)),y=-e*e+r*(r+2*S)+R):r<=-z?(e=Math.max(0,-(-y*p+C)),r=0<e?-p:Math.min(Math.max(-p,-S),p),y=-e*e+r*(r+2*S)+R):r<=z?(e=0,r=Math.min(Math.max(-p,-S),p),y=r*(r+2*S)+R):(e=Math.max(0,-(y*p+C)),r=0<e?p:Math.min(Math.max(-p,-S),p),y=-e*e+r*(r+2*S)+R)}else r=0<y?-p:p,e=Math.max(0,-(y*r+C)),y=-e*e+r*(r+2*S)+R;return a&&a.copy(this.direction).multiplyScalar(e).add(this.origin),u&&u.copy(M).multiplyScalar(r).add(F),y},intersectSphere:function(e,r){L.subVectors(e.center,this.origin);var a=L.dot(this.direction),u=L.dot(L)-a*a;return e=e.radius*e.radius,u>e?null:(e=Math.sqrt(e-u),u=a-e,a+=e,0>u&&0>a?null:0>u?this.at(a,r):this.at(u,r))},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var r=e.normal.dot(this.direction);return r===0?e.distanceToPoint(this.origin)===0?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/r,0<=e?e:null)},intersectPlane:function(e,r){return e=this.distanceToPlane(e),e===null?null:this.at(e,r)},intersectsPlane:function(e){var r=e.distanceToPoint(this.origin);return r===0||0>e.normal.dot(this.direction)*r},intersectBox:function(e,r){var a=1/this.direction.x,u=1/this.direction.y,p=1/this.direction.z,y=this.origin;if(0<=a){var C=(e.min.x-y.x)*a;a*=e.max.x-y.x}else C=(e.max.x-y.x)*a,a*=e.min.x-y.x;if(0<=u){var S=(e.min.y-y.y)*u;u*=e.max.y-y.y}else S=(e.max.y-y.y)*u,u*=e.min.y-y.y;return C>u||S>a||((S>C||C!==C)&&(C=S),(u<a||a!==a)&&(a=u),0<=p?(S=(e.min.z-y.z)*p,e=(e.max.z-y.z)*p):(S=(e.max.z-y.z)*p,e=(e.min.z-y.z)*p),C>e||S>a)?null:((S>C||C!==C)&&(C=S),(e<a||a!==a)&&(a=e),0>a?null:this.at(0<=C?C:a,r))},intersectsBox:function(e){return this.intersectBox(e,L)!==null},intersectTriangle:function(e,r,a,u,p){if(P.subVectors(r,e),O.subVectors(a,e),B.crossVectors(P,O),r=this.direction.dot(B),0<r){if(u)return null;u=1}else if(0>r)u=-1,r=-r;else return null;return E.subVectors(this.origin,e),e=u*this.direction.dot(O.crossVectors(E,O)),0>e||(a=u*this.direction.dot(P.cross(E)),0>a||e+a>r)?null:(e=-u*E.dot(B),0>e?null:this.at(e/r,p))},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var X=new xe,W=new xe,U=new Ne;Ce(ia.prototype,{isPlane:!0,set:function(e,r){return this.normal.copy(e),this.constant=r,this},setComponents:function(e,r,a,u){return this.normal.set(e,r,a),this.constant=u,this},setFromNormalAndCoplanarPoint:function(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this},setFromCoplanarPoints:function(e,r,a){return r=X.subVectors(a,r).cross(W.subVectors(e,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,e),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,r){return r===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),r=new xe),r.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,r){r===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),r=new xe);var a=e.delta(X),u=this.normal.dot(a);if(u===0){if(this.distanceToPoint(e.start)===0)return r.copy(e.start)}else if(u=-(e.start.dot(this.normal)+this.constant)/u,!(0>u||1<u))return r.copy(a).multiplyScalar(u).add(e.start)},intersectsLine:function(e){var r=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>r&&0<e||0>e&&0<r},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new xe),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,r){return r=r||U.getNormalMatrix(e),e=this.coplanarPoint(X).applyMatrix4(e),r=this.normal.applyMatrix3(r).normalize(),this.constant=-e.dot(r),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var q=new xe,he=new xe,ge=new xe,_e=new xe,Se=new xe,$e=new xe,Be=new xe,lt=new xe,kt=new xe,cr=new xe;Ce(Xt,{getNormal:function(e,r,a,u){return u===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),u=new xe),u.subVectors(a,r),q.subVectors(e,r),u.cross(q),e=u.lengthSq(),0<e?u.multiplyScalar(1/Math.sqrt(e)):u.set(0,0,0)},getBarycoord:function(e,r,a,u,p){q.subVectors(u,r),he.subVectors(a,r),ge.subVectors(e,r),e=q.dot(q),r=q.dot(he),a=q.dot(ge);var y=he.dot(he);u=he.dot(ge);var C=e*y-r*r;return p===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),p=new xe),C===0?p.set(-2,-1,-1):(C=1/C,y=(y*a-r*u)*C,e=(e*u-r*a)*C,p.set(1-y-e,e,y))},containsPoint:function(e,r,a,u){return Xt.getBarycoord(e,r,a,u,_e),0<=_e.x&&0<=_e.y&&1>=_e.x+_e.y},getUV:function(e,r,a,u,p,y,C,S){return this.getBarycoord(e,r,a,u,_e),S.set(0,0),S.addScaledVector(p,_e.x),S.addScaledVector(y,_e.y),S.addScaledVector(C,_e.z),S},isFrontFacing:function(e,r,a,u){return q.subVectors(a,r),he.subVectors(e,r),0>q.cross(he).dot(u)}}),Ce(Xt.prototype,{set:function(e,r,a){return this.a.copy(e),this.b.copy(r),this.c.copy(a),this},setFromPointsAndIndices:function(e,r,a,u){return this.a.copy(e[r]),this.b.copy(e[a]),this.c.copy(e[u]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return q.subVectors(this.c,this.b),he.subVectors(this.a,this.b),.5*q.cross(he).length()},getMidpoint:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new xe),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Xt.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new ia),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,r){return Xt.getBarycoord(e,this.a,this.b,this.c,r)},getUV:function(e,r,a,u,p){return Xt.getUV(e,this.a,this.b,this.c,r,a,u,p)},containsPoint:function(e){return Xt.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return Xt.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,r){r===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),r=new xe);var a=this.a,u=this.b,p=this.c;Se.subVectors(u,a),$e.subVectors(p,a),lt.subVectors(e,a);var y=Se.dot(lt),C=$e.dot(lt);if(0>=y&&0>=C)return r.copy(a);kt.subVectors(e,u);var S=Se.dot(kt),R=$e.dot(kt);if(0<=S&&R<=S)return r.copy(u);var N=y*R-S*C;if(0>=N&&0<=y&&0>=S)return u=y/(y-S),r.copy(a).addScaledVector(Se,u);cr.subVectors(e,p),e=Se.dot(cr);var z=$e.dot(cr);return 0<=z&&e<=z?r.copy(p):(y=e*C-y*z,0>=y&&0<=C&&0>=z?(N=C/(C-z),r.copy(a).addScaledVector($e,N)):(C=S*z-e*R,0>=C&&0<=R-S&&0<=e-z?(Be.subVectors(p,u),N=(R-S)/(R-S+(e-z)),r.copy(u).addScaledVector(Be,N)):(p=1/(C+y+N),u=y*p,N*=p,r.copy(a).addScaledVector(Se,u).addScaledVector($e,N))))},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ar={h:0,s:0,l:0},zr={h:0,s:0,l:0};Ce(vt.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,r,a){return this.r=e,this.g=r,this.b=a,this},setHSL:function(e,r,a){return e=Bi.euclideanModulo(e,1),r=Bi.clamp(r,0,1),a=Bi.clamp(a,0,1),r===0?this.r=this.g=this.b=a:(r=.5>=a?a*(1+r):a+r-a*r,a=2*a-r,this.r=Dr(a,r,e+1/3),this.g=Dr(a,r,e),this.b=Dr(a,r,e-1/3)),this},setStyle:function(e){function r(C){C!==void 0&&1>parseFloat(C)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var a;if(a=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var u=a[2];switch(a[1]){case"rgb":case"rgba":if(a=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,r(a[5]),this;if(a=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,r(a[5]),this;break;case"hsl":case"hsla":if(a=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(u)){u=parseFloat(a[1])/360;var p=parseInt(a[2],10)/100,y=parseInt(a[3],10)/100;return r(a[5]),this.setHSL(u,p,y)}}}else if(a=/^#([A-Fa-f0-9]+)$/.exec(e)){if(a=a[1],u=a.length,u===3)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255,this;if(u===6)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,this}return e&&0<e.length?this.setColorName(e):this},setColorName:function(e){var r=Ur[e];return r!==void 0?this.setHex(r):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,r){return r===void 0&&(r=2),this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},copyLinearToGamma:function(e,r){return r===void 0&&(r=2),r=0<r?1/r:1,this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=Br(e.r),this.g=Br(e.g),this.b=Br(e.b),this},copyLinearToSRGB:function(e){return this.r=Gr(e.r),this.g=Gr(e.g),this.b=Gr(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var r=this.r,a=this.g,u=this.b,p=Math.max(r,a,u),y=Math.min(r,a,u),C,S=(y+p)/2;if(y===p)y=C=0;else{var R=p-y;switch(y=.5>=S?R/(p+y):R/(2-p-y),p){case r:C=(a-u)/R+(a<u?6:0);break;case a:C=(u-r)/R+2;break;case u:C=(r-a)/R+4}C/=6}return e.h=C,e.s=y,e.l=S,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,r,a){return this.getHSL(Ar),Ar.h+=e,Ar.s+=r,Ar.l+=a,this.setHSL(Ar.h,Ar.s,Ar.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this},lerpHSL:function(e,r){this.getHSL(Ar),e.getHSL(zr),e=Bi.lerp(Ar.h,zr.h,r);var a=Bi.lerp(Ar.s,zr.s,r);return r=Bi.lerp(Ar.l,zr.l,r),this.setHSL(e,a,r),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,r){return r===void 0&&(r=0),this.r=e[r],this.g=e[r+1],this.b=e[r+2],this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e},toJSON:function(){return this.getHex()}}),vt.NAMES=Ur,Ce(kr.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var r=0,a=e.vertexNormals.length;r<a;r++)this.vertexNormals[r]=e.vertexNormals[r].clone();for(r=0,a=e.vertexColors.length;r<a;r++)this.vertexColors[r]=e.vertexColors[r].clone();return this}});var Gt=0;Nr.prototype=Ce(me(St.prototype),{constructor:Nr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(e!==void 0)for(var r in e){var a=e[r];if(a===void 0)console.warn("THREE.Material: '"+r+"' parameter is undefined.");else if(r==="shading")console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=a===1;else{var u=this[r];u===void 0?console.warn("THREE."+this.type+": '"+r+"' is not a property of this material."):u&&u.isColor?u.set(a):u&&u.isVector3&&a&&a.isVector3?u.copy(a):this[r]=a}}},toJSON:function(e){function r(p){var y=[],C;for(C in p){var S=p[C];delete S.metadata,y.push(S)}return y}var a=e===void 0||typeof e=="string";a&&(e={textures:{},images:{}});var u={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return u.uuid=this.uuid,u.type=this.type,this.name!==""&&(u.name=this.name),this.color&&this.color.isColor&&(u.color=this.color.getHex()),this.roughness!==void 0&&(u.roughness=this.roughness),this.metalness!==void 0&&(u.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(u.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(u.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(u.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(u.specular=this.specular.getHex()),this.shininess!==void 0&&(u.shininess=this.shininess),this.clearcoat!==void 0&&(u.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(u.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(u.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(u.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(u.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,u.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(u.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(u.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(u.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(u.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(u.aoMap=this.aoMap.toJSON(e).uuid,u.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(u.bumpMap=this.bumpMap.toJSON(e).uuid,u.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(u.normalMap=this.normalMap.toJSON(e).uuid,u.normalMapType=this.normalMapType,u.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(u.displacementMap=this.displacementMap.toJSON(e).uuid,u.displacementScale=this.displacementScale,u.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(u.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(u.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(u.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(u.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(u.envMap=this.envMap.toJSON(e).uuid,u.reflectivity=this.reflectivity,u.refractionRatio=this.refractionRatio,this.combine!==void 0&&(u.combine=this.combine),this.envMapIntensity!==void 0&&(u.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(u.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(u.size=this.size),this.sizeAttenuation!==void 0&&(u.sizeAttenuation=this.sizeAttenuation),this.blending!==1&&(u.blending=this.blending),this.flatShading===!0&&(u.flatShading=this.flatShading),this.side!==0&&(u.side=this.side),this.vertexColors&&(u.vertexColors=!0),1>this.opacity&&(u.opacity=this.opacity),this.transparent===!0&&(u.transparent=this.transparent),u.depthFunc=this.depthFunc,u.depthTest=this.depthTest,u.depthWrite=this.depthWrite,u.stencilWrite=this.stencilWrite,u.stencilWriteMask=this.stencilWriteMask,u.stencilFunc=this.stencilFunc,u.stencilRef=this.stencilRef,u.stencilFuncMask=this.stencilFuncMask,u.stencilFail=this.stencilFail,u.stencilZFail=this.stencilZFail,u.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(u.rotation=this.rotation),this.polygonOffset===!0&&(u.polygonOffset=!0),this.polygonOffsetFactor!==0&&(u.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(u.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(u.linewidth=this.linewidth),this.dashSize!==void 0&&(u.dashSize=this.dashSize),this.gapSize!==void 0&&(u.gapSize=this.gapSize),this.scale!==void 0&&(u.scale=this.scale),this.dithering===!0&&(u.dithering=!0),0<this.alphaTest&&(u.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(u.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(u.wireframe=this.wireframe),1<this.wireframeLinewidth&&(u.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(u.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(u.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(u.morphTargets=!0),this.morphNormals===!0&&(u.morphNormals=!0),this.skinning===!0&&(u.skinning=!0),this.visible===!1&&(u.visible=!1),this.toneMapped===!1&&(u.toneMapped=!1),ha(this.userData)!=="{}"&&(u.userData=this.userData),a&&(a=r(e.textures),e=r(e.images),0<a.length&&(u.textures=a),0<e.length&&(u.images=e)),u},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var r=e.clippingPlanes,a=null;if(r!==null){var u=r.length;a=Array(u);for(var p=0;p!==u;++p)a[p]=r[p].clone()}return this.clippingPlanes=a,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(ha(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Nr.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),wr.prototype=me(Nr.prototype),wr.prototype.constructor=wr,wr.prototype.isMeshBasicMaterial=!0,wr.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this};var Vt=new xe;Object.defineProperty(Jr.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Ce(Jr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,r,a){e*=this.itemSize,a*=r.itemSize;for(var u=0,p=this.itemSize;u<p;u++)this.array[e+u]=r.array[a+u];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var r=this.array,a=0,u=0,p=e.length;u<p;u++){var y=e[u];y===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",u),y=new vt),r[a++]=y.r,r[a++]=y.g,r[a++]=y.b}return this},copyVector2sArray:function(e){for(var r=this.array,a=0,u=0,p=e.length;u<p;u++){var y=e[u];y===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",u),y=new ce),r[a++]=y.x,r[a++]=y.y}return this},copyVector3sArray:function(e){for(var r=this.array,a=0,u=0,p=e.length;u<p;u++){var y=e[u];y===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",u),y=new xe),r[a++]=y.x,r[a++]=y.y,r[a++]=y.z}return this},copyVector4sArray:function(e){for(var r=this.array,a=0,u=0,p=e.length;u<p;u++){var y=e[u];y===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",u),y=new Oe),r[a++]=y.x,r[a++]=y.y,r[a++]=y.z,r[a++]=y.w}return this},applyMatrix3:function(e){for(var r=0,a=this.count;r<a;r++)Vt.x=this.getX(r),Vt.y=this.getY(r),Vt.z=this.getZ(r),Vt.applyMatrix3(e),this.setXYZ(r,Vt.x,Vt.y,Vt.z);return this},applyMatrix4:function(e){for(var r=0,a=this.count;r<a;r++)Vt.x=this.getX(r),Vt.y=this.getY(r),Vt.z=this.getZ(r),Vt.applyMatrix4(e),this.setXYZ(r,Vt.x,Vt.y,Vt.z);return this},applyNormalMatrix:function(e){for(var r=0,a=this.count;r<a;r++)Vt.x=this.getX(r),Vt.y=this.getY(r),Vt.z=this.getZ(r),Vt.applyNormalMatrix(e),this.setXYZ(r,Vt.x,Vt.y,Vt.z);return this},transformDirection:function(e){for(var r=0,a=this.count;r<a;r++)Vt.x=this.getX(r),Vt.y=this.getY(r),Vt.z=this.getZ(r),Vt.transformDirection(e),this.setXYZ(r,Vt.x,Vt.y,Vt.z);return this},set:function(e,r){return r===void 0&&(r=0),this.array.set(e,r),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,r){return this.array[e*this.itemSize]=r,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,r){return this.array[e*this.itemSize+1]=r,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,r){return this.array[e*this.itemSize+2]=r,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,r){return this.array[e*this.itemSize+3]=r,this},setXY:function(e,r,a){return e*=this.itemSize,this.array[e+0]=r,this.array[e+1]=a,this},setXYZ:function(e,r,a,u){return e*=this.itemSize,this.array[e+0]=r,this.array[e+1]=a,this.array[e+2]=u,this},setXYZW:function(e,r,a,u,p){return e*=this.itemSize,this.array[e+0]=r,this.array[e+1]=a,this.array[e+2]=u,this.array[e+3]=p,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Tn.prototype=me(Jr.prototype),Tn.prototype.constructor=Tn,fa.prototype=me(Jr.prototype),fa.prototype.constructor=fa,Ja.prototype=me(Jr.prototype),Ja.prototype.constructor=Ja,ki.prototype=me(Jr.prototype),ki.prototype.constructor=ki,vs.prototype=me(Jr.prototype),vs.prototype.constructor=vs,Bc.prototype=me(Jr.prototype),Bc.prototype.constructor=Bc,fu.prototype=me(Jr.prototype),fu.prototype.constructor=fu,Or.prototype=me(Jr.prototype),Or.prototype.constructor=Or,Sl.prototype=me(Jr.prototype),Sl.prototype.constructor=Sl,Ce(Yp.prototype,{computeGroups:function(e){var r=[],a=void 0;e=e.faces;for(var u=0;u<e.length;u++){var p=e[u];if(p.materialIndex!==a){a=p.materialIndex,y!==void 0&&(y.count=3*u-y.start,r.push(y));var y={start:3*u,materialIndex:a}}}y!==void 0&&(y.count=3*u-y.start,r.push(y)),this.groups=r},fromGeometry:function(e){var r=e.faces,a=e.vertices,u=e.faceVertexUvs,p=u[0]&&0<u[0].length,y=u[1]&&0<u[1].length,C=e.morphTargets,S=C.length;if(0<S){for(var R=[],N=0;N<S;N++)R[N]={name:C[N].name,data:[]};this.morphTargets.position=R}var z=e.morphNormals,Z=z.length;if(0<Z){var K=[];for(N=0;N<Z;N++)K[N]={name:z[N].name,data:[]};this.morphTargets.normal=K}var ne=e.skinIndices,oe=e.skinWeights,be=ne.length===a.length,je=oe.length===a.length;for(0<a.length&&r.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),N=0;N<r.length;N++){var Ie=r[N];this.vertices.push(a[Ie.a],a[Ie.b],a[Ie.c]);var ze=Ie.vertexNormals;for(ze.length===3?this.normals.push(ze[0],ze[1],ze[2]):(ze=Ie.normal,this.normals.push(ze,ze,ze)),ze=Ie.vertexColors,ze.length===3?this.colors.push(ze[0],ze[1],ze[2]):(ze=Ie.color,this.colors.push(ze,ze,ze)),p===!0&&(ze=u[0][N],ze!==void 0?this.uvs.push(ze[0],ze[1],ze[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",N),this.uvs.push(new ce,new ce,new ce))),y===!0&&(ze=u[1][N],ze!==void 0?this.uvs2.push(ze[0],ze[1],ze[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",N),this.uvs2.push(new ce,new ce,new ce))),ze=0;ze<S;ze++){var et=C[ze].vertices;R[ze].data.push(et[Ie.a],et[Ie.b],et[Ie.c])}for(ze=0;ze<Z;ze++)et=z[ze].vertexNormals[N],K[ze].data.push(et.a,et.b,et.c);be&&this.skinIndices.push(ne[Ie.a],ne[Ie.b],ne[Ie.c]),je&&this.skinWeights.push(oe[Ie.a],oe[Ie.b],oe[Ie.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}});var Pn=1,Mn=new Lr,Rn=new Cr,gi=new xe,os=new Ui,Xo=new Ui,$o=new xe;$r.prototype=Ce(me(St.prototype),{constructor:$r,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<Zl(e)?fu:vs)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,r){return this.attributes[e]=r,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,r,a){this.groups.push({start:e,count:r,materialIndex:a!==void 0?a:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,r){this.drawRange.start=e,this.drawRange.count=r},applyMatrix4:function(e){var r=this.attributes.position;if(r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0),r=this.attributes.normal,r!==void 0){var a=new Ne().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}return r=this.attributes.tangent,r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return Mn.makeRotationX(e),this.applyMatrix4(Mn),this},rotateY:function(e){return Mn.makeRotationY(e),this.applyMatrix4(Mn),this},rotateZ:function(e){return Mn.makeRotationZ(e),this.applyMatrix4(Mn),this},translate:function(e,r,a){return Mn.makeTranslation(e,r,a),this.applyMatrix4(Mn),this},scale:function(e,r,a){return Mn.makeScale(e,r,a),this.applyMatrix4(Mn),this},lookAt:function(e){return Rn.lookAt(e),Rn.updateMatrix(),this.applyMatrix4(Rn.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(gi).negate(),this.translate(gi.x,gi.y,gi.z),this},setFromObject:function(e){var r=e.geometry;if(e.isPoints||e.isLine){e=new Or(3*r.vertices.length,3);var a=new Or(3*r.colors.length,3);this.setAttribute("position",e.copyVector3sArray(r.vertices)),this.setAttribute("color",a.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length&&(e=new Or(r.lineDistances.length,1),this.setAttribute("lineDistance",e.copyArray(r.lineDistances))),r.boundingSphere!==null&&(this.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(this.boundingBox=r.boundingBox.clone())}else e.isMesh&&r&&r.isGeometry&&this.fromGeometry(r);return this},setFromPoints:function(e){for(var r=[],a=0,u=e.length;a<u;a++){var p=e[a];r.push(p.x,p.y,p.z||0)}return this.setAttribute("position",new Or(r,3)),this},updateFromObject:function(e){var r=e.geometry;if(e.isMesh){var a=r.__directGeometry;if(r.elementsNeedUpdate===!0&&(a=void 0,r.elementsNeedUpdate=!1),a===void 0)return this.fromGeometry(r);a.verticesNeedUpdate=r.verticesNeedUpdate,a.normalsNeedUpdate=r.normalsNeedUpdate,a.colorsNeedUpdate=r.colorsNeedUpdate,a.uvsNeedUpdate=r.uvsNeedUpdate,a.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=a}return r.verticesNeedUpdate===!0&&(a=this.attributes.position,a!==void 0&&(a.copyVector3sArray(r.vertices),a.needsUpdate=!0),r.verticesNeedUpdate=!1),r.normalsNeedUpdate===!0&&(a=this.attributes.normal,a!==void 0&&(a.copyVector3sArray(r.normals),a.needsUpdate=!0),r.normalsNeedUpdate=!1),r.colorsNeedUpdate===!0&&(a=this.attributes.color,a!==void 0&&(a.copyColorsArray(r.colors),a.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(a=this.attributes.uv,a!==void 0&&(a.copyVector2sArray(r.uvs),a.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(a=this.attributes.lineDistance,a!==void 0&&(a.copyArray(r.lineDistances),a.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(e.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new Yp().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var r=new Float32Array(3*e.vertices.length);this.setAttribute("position",new Jr(r,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(r=new Float32Array(3*e.normals.length),this.setAttribute("normal",new Jr(r,3).copyVector3sArray(e.normals))),0<e.colors.length&&(r=new Float32Array(3*e.colors.length),this.setAttribute("color",new Jr(r,3).copyColorsArray(e.colors))),0<e.uvs.length&&(r=new Float32Array(2*e.uvs.length),this.setAttribute("uv",new Jr(r,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(r=new Float32Array(2*e.uvs2.length),this.setAttribute("uv2",new Jr(r,2).copyVector2sArray(e.uvs2))),this.groups=e.groups;for(var a in e.morphTargets){r=[];for(var u=e.morphTargets[a],p=0,y=u.length;p<y;p++){var C=u[p],S=new Or(3*C.data.length,3);S.name=C.name,r.push(S.copyVector3sArray(C.data))}this.morphAttributes[a]=r}return 0<e.skinIndices.length&&(a=new Or(4*e.skinIndices.length,4),this.setAttribute("skinIndex",a.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(a=new Or(4*e.skinWeights.length,4),this.setAttribute("skinWeight",a.copyVector4sArray(e.skinWeights))),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Ui);var e=this.attributes.position,r=this.morphAttributes.position;if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r){e=0;for(var a=r.length;e<a;e++)os.setFromBufferAttribute(r[e]),this.morphTargetsRelative?($o.addVectors(this.boundingBox.min,os.min),this.boundingBox.expandByPoint($o),$o.addVectors(this.boundingBox.max,os.max),this.boundingBox.expandByPoint($o)):(this.boundingBox.expandByPoint(os.min),this.boundingBox.expandByPoint(os.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Ko);var e=this.attributes.position,r=this.morphAttributes.position;if(e){var a=this.boundingSphere.center;if(os.setFromBufferAttribute(e),r)for(var u=0,p=r.length;u<p;u++){var y=r[u];Xo.setFromBufferAttribute(y),this.morphTargetsRelative?($o.addVectors(os.min,Xo.min),os.expandByPoint($o),$o.addVectors(os.max,Xo.max),os.expandByPoint($o)):(os.expandByPoint(Xo.min),os.expandByPoint(Xo.max))}os.getCenter(a);var C=0;for(u=0,p=e.count;u<p;u++)$o.fromBufferAttribute(e,u),C=Math.max(C,a.distanceToSquared($o));if(r)for(u=0,p=r.length;u<p;u++){y=r[u];for(var S=this.morphTargetsRelative,R=0,N=y.count;R<N;R++)$o.fromBufferAttribute(y,R),S&&(gi.fromBufferAttribute(e,R),$o.add(gi)),C=Math.max(C,a.distanceToSquared($o))}this.boundingSphere.radius=Math.sqrt(C),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,r=this.attributes;if(r.position){var a=r.position.array;if(r.normal===void 0)this.setAttribute("normal",new Jr(new Float32Array(a.length),3));else for(var u=r.normal.array,p=0,y=u.length;p<y;p++)u[p]=0;u=r.normal.array;var C=new xe,S=new xe,R=new xe,N=new xe,z=new xe;if(e){var Z=e.array;for(p=0,y=e.count;p<y;p+=3){e=3*Z[p+0];var K=3*Z[p+1],ne=3*Z[p+2];C.fromArray(a,e),S.fromArray(a,K),R.fromArray(a,ne),N.subVectors(R,S),z.subVectors(C,S),N.cross(z),u[e]+=N.x,u[e+1]+=N.y,u[e+2]+=N.z,u[K]+=N.x,u[K+1]+=N.y,u[K+2]+=N.z,u[ne]+=N.x,u[ne+1]+=N.y,u[ne+2]+=N.z}}else for(p=0,y=a.length;p<y;p+=9)C.fromArray(a,p),S.fromArray(a,p+3),R.fromArray(a,p+6),N.subVectors(R,S),z.subVectors(C,S),N.cross(z),u[p]=N.x,u[p+1]=N.y,u[p+2]=N.z,u[p+3]=N.x,u[p+4]=N.y,u[p+5]=N.z,u[p+6]=N.x,u[p+7]=N.y,u[p+8]=N.z;this.normalizeNormals(),r.normal.needsUpdate=!0}},merge:function(e,r){if(e&&e.isBufferGeometry){r===void 0&&(r=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var a=this.attributes,u;for(u in a)if(e.attributes[u]!==void 0){var p=a[u].array,y=e.attributes[u],C=y.array,S=y.itemSize*r;y=Math.min(C.length,p.length-S);for(var R=0;R<y;R++,S++)p[S]=C[R]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,r=0,a=e.count;r<a;r++)$o.x=e.getX(r),$o.y=e.getY(r),$o.z=e.getZ(r),$o.normalize(),e.setXYZ(r,$o.x,$o.y,$o.z)},toNonIndexed:function(){function e(z,Z){var K=z.array,ne=z.itemSize;z=z.normalized;for(var oe=new K.constructor(Z.length*ne),be,je=0,Ie=0,ze=Z.length;Ie<ze;Ie++){be=Z[Ie]*ne;for(var et=0;et<ne;et++)oe[je++]=K[be++]}return new Jr(oe,ne,z)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var r=new $r,a=this.index.array,u=this.attributes,p;for(p in u){var y=u[p];y=e(y,a),r.setAttribute(p,y)}var C=this.morphAttributes;for(p in C){var S=[],R=C[p];u=0;for(var N=R.length;u<N;u++)y=R[u],y=e(y,a),S.push(y);r.morphAttributes[p]=S}for(r.morphTargetsRelative=this.morphTargetsRelative,a=this.groups,u=0,p=a.length;u<p;u++)y=a[u],r.addGroup(y.start,y.count,y.materialIndex);return r},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),0<Ei(this.userData).length&&(e.userData=this.userData),this.parameters!==void 0){var r=this.parameters;for(N in r)r[N]!==void 0&&(e[N]=r[N]);return e}e.data={attributes:{}},r=this.index,r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var a=this.attributes;for(N in a){r=a[N];var u=r.toJSON();r.name!==""&&(u.name=r.name),e.data.attributes[N]=u}a={};var p=!1;for(N in this.morphAttributes){for(var y=this.morphAttributes[N],C=[],S=0,R=y.length;S<R;S++)r=y[S],u=r.toJSON(),r.name!==""&&(u.name=r.name),C.push(u);0<C.length&&(a[N]=C,p=!0)}p&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);var N=this.groups;return 0<N.length&&(e.data.groups=JSON.parse(ha(N))),N=this.boundingSphere,N!==null&&(e.data.boundingSphere={center:N.center.toArray(),radius:N.radius}),e},clone:function(){return new $r().copy(this)},copy:function(e){var r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var a=e.index;a!==null&&this.setIndex(a.clone()),a=e.attributes;for(C in a)this.setAttribute(C,a[C].clone());var u=e.morphAttributes;for(C in u){var p=[],y=u[C];for(a=0,r=y.length;a<r;a++)p.push(y[a].clone());this.morphAttributes[C]=p}this.morphTargetsRelative=e.morphTargetsRelative;var C=e.groups;for(a=0,r=C.length;a<r;a++)u=C[a],this.addGroup(u.start,u.count,u.materialIndex);return C=e.boundingBox,C!==null&&(this.boundingBox=C.clone()),C=e.boundingSphere,C!==null&&(this.boundingSphere=C.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Lv=new Lr,Ra=new ro,Tm=new Ko,Pd=new xe,Rc=new xe,Sg=new xe,A1=new xe,x0=new xe,C1=new xe,Pv=new xe,ny=new xe,iy=new xe,Rv=new ce,Es=new ce,_l=new ce,A0=new xe,oy=new xe;oa.prototype=Ce(me(Cr.prototype),{constructor:oa,isMesh:!0,copy:function(e){return Cr.prototype.copy.call(this,e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Ce({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var r=Ei(e);if(0<r.length){var a=e[r[0]];if(a!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,r=a.length;e<r;e++){var u=a[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=e}}}else e=e.morphTargets,e!==void 0&&0<e.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(e,r){var a=this.geometry,u=this.material,p=this.matrixWorld;if(u!==void 0&&(a.boundingSphere===null&&a.computeBoundingSphere(),Tm.copy(a.boundingSphere),Tm.applyMatrix4(p),e.ray.intersectsSphere(Tm)!==!1&&(Lv.getInverse(p),Ra.copy(e.ray).applyMatrix4(Lv),a.boundingBox===null||Ra.intersectsBox(a.boundingBox)!==!1))){if(a.isBufferGeometry){var y=a.index;p=a.attributes.position;var C=a.morphAttributes.position,S=a.morphTargetsRelative,R=a.attributes.uv,N=a.attributes.uv2,z=a.groups,Z=a.drawRange,K,ne;if(y!==null)if(Array.isArray(u)){var oe=0;for(K=z.length;oe<K;oe++){var be=z[oe],je=u[be.materialIndex],Ie=Math.max(be.start,Z.start);for(ne=a=Math.min(be.start+be.count,Z.start+Z.count);Ie<ne;Ie+=3){a=y.getX(Ie);var ze=y.getX(Ie+1),et=y.getX(Ie+2);(a=wh(this,je,e,Ra,p,C,S,R,N,a,ze,et))&&(a.faceIndex=Math.floor(Ie/3),a.face.materialIndex=be.materialIndex,r.push(a))}}}else for(Ie=Math.max(0,Z.start),a=Math.min(y.count,Z.start+Z.count),oe=Ie,K=a;oe<K;oe+=3)a=y.getX(oe),ze=y.getX(oe+1),et=y.getX(oe+2),(a=wh(this,u,e,Ra,p,C,S,R,N,a,ze,et))&&(a.faceIndex=Math.floor(oe/3),r.push(a));else if(p!==void 0)if(Array.isArray(u))for(oe=0,K=z.length;oe<K;oe++)for(be=z[oe],je=u[be.materialIndex],Ie=Math.max(be.start,Z.start),ne=a=Math.min(be.start+be.count,Z.start+Z.count);Ie<ne;Ie+=3)a=Ie,ze=Ie+1,et=Ie+2,(a=wh(this,je,e,Ra,p,C,S,R,N,a,ze,et))&&(a.faceIndex=Math.floor(Ie/3),a.face.materialIndex=be.materialIndex,r.push(a));else for(Ie=Math.max(0,Z.start),a=Math.min(p.count,Z.start+Z.count),oe=Ie,K=a;oe<K;oe+=3)a=oe,ze=oe+1,et=oe+2,(a=wh(this,u,e,Ra,p,C,S,R,N,a,ze,et))&&(a.faceIndex=Math.floor(oe/3),r.push(a))}else if(a.isGeometry)for(p=Array.isArray(u),C=a.vertices,S=a.faces,a=a.faceVertexUvs[0],0<a.length&&(y=a),Z=0,oe=S.length;Z<oe;Z++)K=S[Z],a=p?u[K.materialIndex]:u,a!==void 0&&(R=C[K.a],N=C[K.b],z=C[K.c],a=Kh(this,a,e,Ra,R,N,z,A0))&&(y&&y[Z]&&(be=y[Z],Rv.copy(be[0]),Es.copy(be[1]),_l.copy(be[2]),a.uv=Xt.getUV(A0,R,N,z,Rv,Es,_l,new ce)),a.face=K,a.faceIndex=Z,r.push(a))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var N2=0,Uf=new Lr,w1=new Cr,ay=new xe;ei.prototype=Ce(me(St.prototype),{constructor:ei,isGeometry:!0,applyMatrix4:function(e){for(var r=new Ne().getNormalMatrix(e),a=0,u=this.vertices.length;a<u;a++)this.vertices[a].applyMatrix4(e);for(a=0,u=this.faces.length;a<u;a++){e=this.faces[a],e.normal.applyMatrix3(r).normalize();for(var p=0,y=e.vertexNormals.length;p<y;p++)e.vertexNormals[p].applyMatrix3(r).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(e){return Uf.makeRotationX(e),this.applyMatrix4(Uf),this},rotateY:function(e){return Uf.makeRotationY(e),this.applyMatrix4(Uf),this},rotateZ:function(e){return Uf.makeRotationZ(e),this.applyMatrix4(Uf),this},translate:function(e,r,a){return Uf.makeTranslation(e,r,a),this.applyMatrix4(Uf),this},scale:function(e,r,a){return Uf.makeScale(e,r,a),this.applyMatrix4(Uf),this},lookAt:function(e){return w1.lookAt(e),w1.updateMatrix(),this.applyMatrix4(w1.matrix),this},fromBufferGeometry:function(e){function r(ne,oe,be,je){var Ie=S===void 0?[]:[a.colors[ne].clone(),a.colors[oe].clone(),a.colors[be].clone()],ze=C===void 0?[]:[new xe().fromArray(C,3*ne),new xe().fromArray(C,3*oe),new xe().fromArray(C,3*be)];je=new kr(ne,oe,be,ze,Ie,je),a.faces.push(je),R!==void 0&&a.faceVertexUvs[0].push([new ce().fromArray(R,2*ne),new ce().fromArray(R,2*oe),new ce().fromArray(R,2*be)]),N!==void 0&&a.faceVertexUvs[1].push([new ce().fromArray(N,2*ne),new ce().fromArray(N,2*oe),new ce().fromArray(N,2*be)])}var a=this,u=e.index!==null?e.index.array:void 0,p=e.attributes;if(p.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var y=p.position.array,C=p.normal!==void 0?p.normal.array:void 0,S=p.color!==void 0?p.color.array:void 0,R=p.uv!==void 0?p.uv.array:void 0,N=p.uv2!==void 0?p.uv2.array:void 0;for(N!==void 0&&(this.faceVertexUvs[1]=[]),p=0;p<y.length;p+=3)a.vertices.push(new xe().fromArray(y,p)),S!==void 0&&a.colors.push(new vt().fromArray(S,p));var z=e.groups;if(0<z.length)for(p=0;p<z.length;p++){y=z[p];var Z=y.start,K=Z;for(Z+=y.count;K<Z;K+=3)u!==void 0?r(u[K],u[K+1],u[K+2],y.materialIndex):r(K,K+1,K+2,y.materialIndex)}else if(u!==void 0)for(p=0;p<u.length;p+=3)r(u[p],u[p+1],u[p+2]);else for(p=0;p<y.length/3;p+=3)r(p,p+1,p+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ay).negate(),this.translate(ay.x,ay.y,ay.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,r=this.boundingSphere.radius;r=r===0?1:1/r;var a=new Lr;return a.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(a),this},computeFaceNormals:function(){for(var e=new xe,r=new xe,a=0,u=this.faces.length;a<u;a++){var p=this.faces[a],y=this.vertices[p.a],C=this.vertices[p.b];e.subVectors(this.vertices[p.c],C),r.subVectors(y,C),e.cross(r),e.normalize(),p.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);var r,a=Array(this.vertices.length),u=0;for(r=this.vertices.length;u<r;u++)a[u]=new xe;if(e){var p=new xe,y=new xe;for(e=0,u=this.faces.length;e<u;e++){r=this.faces[e];var C=this.vertices[r.a],S=this.vertices[r.b],R=this.vertices[r.c];p.subVectors(R,S),y.subVectors(C,S),p.cross(y),a[r.a].add(p),a[r.b].add(p),a[r.c].add(p)}}else for(this.computeFaceNormals(),e=0,u=this.faces.length;e<u;e++)r=this.faces[e],a[r.a].add(r.normal),a[r.b].add(r.normal),a[r.c].add(r.normal);for(u=0,r=this.vertices.length;u<r;u++)a[u].normalize();for(e=0,u=this.faces.length;e<u;e++)r=this.faces[e],C=r.vertexNormals,C.length===3?(C[0].copy(a[r.a]),C[1].copy(a[r.b]),C[2].copy(a[r.c])):(C[0]=a[r.a].clone(),C[1]=a[r.b].clone(),C[2]=a[r.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var r=0;for(e=this.faces.length;r<e;r++){var a=this.faces[r],u=a.vertexNormals;u.length===3?(u[0].copy(a.normal),u[1].copy(a.normal),u[2].copy(a.normal)):(u[0]=a.normal.clone(),u[1]=a.normal.clone(),u[2]=a.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,r,a=0;for(r=this.faces.length;a<r;a++){var u=this.faces[a];u.__originalFaceNormal?u.__originalFaceNormal.copy(u.normal):u.__originalFaceNormal=u.normal.clone(),u.__originalVertexNormals||(u.__originalVertexNormals=[]);var p=0;for(e=u.vertexNormals.length;p<e;p++)u.__originalVertexNormals[p]?u.__originalVertexNormals[p].copy(u.vertexNormals[p]):u.__originalVertexNormals[p]=u.vertexNormals[p].clone()}var y=new ei;for(y.faces=this.faces,p=0,e=this.morphTargets.length;p<e;p++){if(!this.morphNormals[p]){this.morphNormals[p]={},this.morphNormals[p].faceNormals=[],this.morphNormals[p].vertexNormals=[],u=this.morphNormals[p].faceNormals;var C=this.morphNormals[p].vertexNormals;for(a=0,r=this.faces.length;a<r;a++){var S=new xe,R={a:new xe,b:new xe,c:new xe};u.push(S),C.push(R)}}for(C=this.morphNormals[p],y.vertices=this.morphTargets[p].vertices,y.computeFaceNormals(),y.computeVertexNormals(),a=0,r=this.faces.length;a<r;a++)u=this.faces[a],S=C.faceNormals[a],R=C.vertexNormals[a],S.copy(u.normal),R.a.copy(u.vertexNormals[0]),R.b.copy(u.vertexNormals[1]),R.c.copy(u.vertexNormals[2])}for(a=0,r=this.faces.length;a<r;a++)u=this.faces[a],u.normal=u.__originalFaceNormal,u.vertexNormals=u.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Ui),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Ko),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,r,a){if(e&&e.isGeometry){var u,p=this.vertices.length,y=this.vertices,C=e.vertices,S=this.faces,R=e.faces,N=this.colors,z=e.colors;a===void 0&&(a=0),r!==void 0&&(u=new Ne().getNormalMatrix(r));for(var Z=0,K=C.length;Z<K;Z++){var ne=C[Z].clone();r!==void 0&&ne.applyMatrix4(r),y.push(ne)}for(Z=0,K=z.length;Z<K;Z++)N.push(z[Z].clone());for(Z=0,K=R.length;Z<K;Z++){C=R[Z];var oe=C.vertexNormals;for(z=C.vertexColors,N=new kr(C.a+p,C.b+p,C.c+p),N.normal.copy(C.normal),u!==void 0&&N.normal.applyMatrix3(u).normalize(),r=0,y=oe.length;r<y;r++)ne=oe[r].clone(),u!==void 0&&ne.applyMatrix3(u).normalize(),N.vertexNormals.push(ne);for(N.color.copy(C.color),r=0,y=z.length;r<y;r++)ne=z[r],N.vertexColors.push(ne.clone());N.materialIndex=C.materialIndex+a,S.push(N)}for(Z=0,K=e.faceVertexUvs.length;Z<K;Z++)for(a=e.faceVertexUvs[Z],this.faceVertexUvs[Z]===void 0&&(this.faceVertexUvs[Z]=[]),r=0,y=a.length;r<y;r++){for(u=a[r],p=[],S=0,R=u.length;S<R;S++)p.push(u[S].clone());this.faceVertexUvs[Z].push(p)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e={},r=[],a=[],u=Math.pow(10,4),p,y=0;for(p=this.vertices.length;y<p;y++){var C=this.vertices[y];C=Math.round(C.x*u)+"_"+Math.round(C.y*u)+"_"+Math.round(C.z*u),e[C]===void 0?(e[C]=y,r.push(this.vertices[y]),a[y]=r.length-1):a[y]=a[e[C]]}for(e=[],y=0,p=this.faces.length;y<p;y++)for(u=this.faces[y],u.a=a[u.a],u.b=a[u.b],u.c=a[u.c],u=[u.a,u.b,u.c],C=0;3>C;C++)if(u[C]===u[(C+1)%3]){e.push(y);break}for(y=e.length-1;0<=y;y--)for(u=e[y],this.faces.splice(u,1),a=0,p=this.faceVertexUvs.length;a<p;a++)this.faceVertexUvs[a].splice(u,1);return y=this.vertices.length-r.length,this.vertices=r,y},setFromPoints:function(e){this.vertices=[];for(var r=0,a=e.length;r<a;r++){var u=e[r];this.vertices.push(new xe(u.x,u.y,u.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,r=e.length,a=0;a<r;a++)e[a]._id=a;e.sort(function(R,N){return R.materialIndex-N.materialIndex});var u=this.faceVertexUvs[0],p=this.faceVertexUvs[1],y,C;for(u&&u.length===r&&(y=[]),p&&p.length===r&&(C=[]),a=0;a<r;a++){var S=e[a]._id;y&&y.push(u[S]),C&&C.push(p[S])}y&&(this.faceVertexUvs[0]=y),C&&(this.faceVertexUvs[1]=C)},toJSON:function(){function e(gt,We,Rt){return Rt?gt|1<<We:gt&~(1<<We)}function r(gt){var We=gt.x.toString()+gt.y.toString()+gt.z.toString();return N[We]!==void 0||(N[We]=R.length/3,R.push(gt.x,gt.y,gt.z)),N[We]}function a(gt){var We=gt.r.toString()+gt.g.toString()+gt.b.toString();return Z[We]!==void 0||(Z[We]=z.length,z.push(gt.getHex())),Z[We]}function u(gt){var We=gt.x.toString()+gt.y.toString();return ne[We]!==void 0||(ne[We]=K.length/2,K.push(gt.x,gt.y)),ne[We]}var p={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(p.uuid=this.uuid,p.type=this.type,this.name!==""&&(p.name=this.name),this.parameters!==void 0){var y=this.parameters,C;for(C in y)y[C]!==void 0&&(p[C]=y[C]);return p}for(y=[],C=0;C<this.vertices.length;C++){var S=this.vertices[C];y.push(S.x,S.y,S.z)}S=[];var R=[],N={},z=[],Z={},K=[],ne={};for(C=0;C<this.faces.length;C++){var oe=this.faces[C],be=this.faceVertexUvs[0][C]!==void 0,je=0<oe.normal.length(),Ie=0<oe.vertexNormals.length,ze=oe.color.r!==1||oe.color.g!==1||oe.color.b!==1,et=0<oe.vertexColors.length,xt=0;xt=e(xt,0,0),xt=e(xt,1,!0),xt=e(xt,2,!1),xt=e(xt,3,be),xt=e(xt,4,je),xt=e(xt,5,Ie),xt=e(xt,6,ze),xt=e(xt,7,et),S.push(xt),S.push(oe.a,oe.b,oe.c),S.push(oe.materialIndex),be&&(be=this.faceVertexUvs[0][C],S.push(u(be[0]),u(be[1]),u(be[2]))),je&&S.push(r(oe.normal)),Ie&&(je=oe.vertexNormals,S.push(r(je[0]),r(je[1]),r(je[2]))),ze&&S.push(a(oe.color)),et&&(oe=oe.vertexColors,S.push(a(oe[0]),a(oe[1]),a(oe[2])))}return p.data={},p.data.vertices=y,p.data.normals=R,0<z.length&&(p.data.colors=z),0<K.length&&(p.data.uvs=[K]),p.data.faces=S,p},clone:function(){return new ei().copy(this)},copy:function(e){var r,a,u;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var p=e.vertices,y=0;for(r=p.length;y<r;y++)this.vertices.push(p[y].clone());for(p=e.colors,y=0,r=p.length;y<r;y++)this.colors.push(p[y].clone());for(p=e.faces,y=0,r=p.length;y<r;y++)this.faces.push(p[y].clone());for(y=0,r=e.faceVertexUvs.length;y<r;y++){var C=e.faceVertexUvs[y];for(this.faceVertexUvs[y]===void 0&&(this.faceVertexUvs[y]=[]),p=0,a=C.length;p<a;p++){var S=C[p],R=[],N=0;for(u=S.length;N<u;N++)R.push(S[N].clone());this.faceVertexUvs[y].push(R)}}for(N=e.morphTargets,y=0,r=N.length;y<r;y++){if(u={},u.name=N[y].name,N[y].vertices!==void 0)for(u.vertices=[],p=0,a=N[y].vertices.length;p<a;p++)u.vertices.push(N[y].vertices[p].clone());if(N[y].normals!==void 0)for(u.normals=[],p=0,a=N[y].normals.length;p<a;p++)u.normals.push(N[y].normals[p].clone());this.morphTargets.push(u)}for(N=e.morphNormals,y=0,r=N.length;y<r;y++){if(u={},N[y].vertexNormals!==void 0)for(u.vertexNormals=[],p=0,a=N[y].vertexNormals.length;p<a;p++)C=N[y].vertexNormals[p],S={},S.a=C.a.clone(),S.b=C.b.clone(),S.c=C.c.clone(),u.vertexNormals.push(S);if(N[y].faceNormals!==void 0)for(u.faceNormals=[],p=0,a=N[y].faceNormals.length;p<a;p++)u.faceNormals.push(N[y].faceNormals[p].clone());this.morphNormals.push(u)}for(p=e.skinWeights,y=0,r=p.length;y<r;y++)this.skinWeights.push(p[y].clone());for(p=e.skinIndices,y=0,r=p.length;y<r;y++)this.skinIndices.push(p[y].clone());for(p=e.lineDistances,y=0,r=p.length;y<r;y++)this.lineDistances.push(p[y]);return y=e.boundingBox,y!==null&&(this.boundingBox=y.clone()),y=e.boundingSphere,y!==null&&(this.boundingSphere=y.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var B2=function(n){function e(r,a,u,p,y,C){yi(this,e);var S=Aa(this,(e.__proto__||mo(e)).call(this));return S.type="BoxGeometry",S.parameters={width:r,height:a,depth:u,widthSegments:p,heightSegments:y,depthSegments:C},S.fromBufferGeometry(new C0(r,a,u,p,y,C)),S.mergeVertices(),S}return Ss(e,n),e}(ei),C0=function(n){function e(r,a,u,p,y,C){function S(je,Ie,ze,et,xt,gt,We,Rt,Pt,pr,Rr){var Tt=gt/Pt,gn=We/pr,tr=gt/2,bn=We/2,ai=Rt/2;We=Pt+1;for(var wn=pr+1,Yo=gt=0,On=new xe,qe=0;qe<wn;qe++)for(var Le=qe*gn-bn,Me=0;Me<We;Me++)On[je]=(Me*Tt-tr)*et,On[Ie]=Le*xt,On[ze]=ai,Z.push(On.x,On.y,On.z),On[je]=0,On[Ie]=0,On[ze]=0<Rt?1:-1,K.push(On.x,On.y,On.z),ne.push(Me/Pt),ne.push(1-qe/pr),gt+=1;for(je=0;je<pr;je++)for(Ie=0;Ie<Pt;Ie++)ze=oe+Ie+We*(je+1),et=oe+(Ie+1)+We*(je+1),xt=oe+(Ie+1)+We*je,z.push(oe+Ie+We*je,ze,xt),z.push(ze,et,xt),Yo+=6;N.addGroup(be,Yo,Rr),be+=Yo,oe+=gt}yi(this,e);var R=Aa(this,(e.__proto__||mo(e)).call(this));R.type="BoxBufferGeometry",R.parameters={width:r,height:a,depth:u,widthSegments:p,heightSegments:y,depthSegments:C};var N=R;r=r||1,a=a||1,u=u||1,p=Math.floor(p)||1,y=Math.floor(y)||1,C=Math.floor(C)||1;var z=[],Z=[],K=[],ne=[],oe=0,be=0;return S("z","y","x",-1,-1,u,a,r,C,y,0),S("z","y","x",1,-1,u,a,-r,C,y,1),S("x","z","y",1,1,r,u,a,p,C,2),S("x","z","y",1,-1,r,u,-a,p,C,3),S("x","y","z",1,-1,r,a,u,p,y,4),S("x","y","z",-1,-1,r,a,-u,p,y,5),R.setIndex(z),R.setAttribute("position",new Or(Z,3)),R.setAttribute("normal",new Or(K,3)),R.setAttribute("uv",new Or(ne,2)),R}return Ss(e,n),e}($r),Im={clone:ul,merge:ko};_i.prototype=me(Nr.prototype),_i.prototype.constructor=_i,_i.prototype.isShaderMaterial=!0,_i.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=ul(n.uniforms),this.defines=Ce({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.lights=n.lights,this.clipping=n.clipping,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this.extensions=Ce({},n.extensions),this},_i.prototype.toJSON=function(n){var e=Nr.prototype.toJSON.call(this,n);e.uniforms={};for(var r in this.uniforms){var a=this.uniforms[r].value;e.uniforms[r]=a&&a.isTexture?{type:"t",value:a.toJSON(n).uuid}:a&&a.isColor?{type:"c",value:a.getHex()}:a&&a.isVector2?{type:"v2",value:a.toArray()}:a&&a.isVector3?{type:"v3",value:a.toArray()}:a&&a.isVector4?{type:"v4",value:a.toArray()}:a&&a.isMatrix3?{type:"m3",value:a.toArray()}:a&&a.isMatrix4?{type:"m4",value:a.toArray()}:{value:a}}0<Ei(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,n={};for(var u in this.extensions)this.extensions[u]===!0&&(n[u]=!0);return 0<Ei(n).length&&(e.extensions=n),e},ss.prototype=Ce(me(Cr.prototype),{constructor:ss,isCamera:!0,copy:function(e,r){return Cr.prototype.copy.call(this,e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new xe),this.updateMatrixWorld(!0);var r=this.matrixWorld.elements;return e.set(-r[8],-r[9],-r[10]).normalize()},updateMatrixWorld:function(e){Cr.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,r){Cr.prototype.updateWorldMatrix.call(this,e,r),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),qa.prototype=Ce(me(ss.prototype),{constructor:qa,isPerspectiveCamera:!0,copy:function(e,r){return ss.prototype.copy.call(this,e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Ce({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*Bi.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Bi.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Bi.RAD2DEG*Math.atan(Math.tan(.5*Bi.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,r,a,u,p,y){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=a,this.view.offsetY=u,this.view.width=p,this.view.height=y,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,r=e*Math.tan(.5*Bi.DEG2RAD*this.fov)/this.zoom,a=2*r,u=this.aspect*a,p=-.5*u,y=this.view;if(this.view!==null&&this.view.enabled){var C=y.fullWidth,S=y.fullHeight;p+=y.offsetX*u/C,r-=y.offsetY*a/S,u*=y.width/C,a*=y.height/S}y=this.filmOffset,y!==0&&(p+=e*y/this.getFilmWidth()),this.projectionMatrix.makePerspective(p,p+u,r,r-a,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return e=Cr.prototype.toJSON.call(this,e),e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Ce({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),zc.prototype=me(Cr.prototype),zc.prototype.constructor=zc,Bu.prototype=me(pt.prototype),Bu.prototype.constructor=Bu,Bu.prototype.isWebGLCubeRenderTarget=!0,Bu.prototype.fromEquirectangularTexture=function(n,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var r=new Lo,a=new _i({type:"CubemapFromEquirect",uniforms:ul({tEquirect:{value:null}}),vertexShader:`varying vec3 vWorldDirection;
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragmentShader:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
}`,side:1,blending:0});return a.uniforms.tEquirect.value=e,e=new oa(new C0(5,5,5),a),r.add(e),new zc(1,10,this).update(n,r),e.geometry.dispose(),e.material.dispose(),this},_a.prototype=me(Q.prototype),_a.prototype.constructor=_a,_a.prototype.isDataTexture=!0;var Ov=new Ko,sy=new xe;Ce(Ia.prototype,{set:function(e,r,a,u,p,y){var C=this.planes;return C[0].copy(e),C[1].copy(r),C[2].copy(a),C[3].copy(u),C[4].copy(p),C[5].copy(y),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var r=this.planes,a=0;6>a;a++)r[a].copy(e.planes[a]);return this},setFromProjectionMatrix:function(e){var r=this.planes,a=e.elements;e=a[0];var u=a[1],p=a[2],y=a[3],C=a[4],S=a[5],R=a[6],N=a[7],z=a[8],Z=a[9],K=a[10],ne=a[11],oe=a[12],be=a[13],je=a[14];return a=a[15],r[0].setComponents(y-e,N-C,ne-z,a-oe).normalize(),r[1].setComponents(y+e,N+C,ne+z,a+oe).normalize(),r[2].setComponents(y+u,N+S,ne+Z,a+be).normalize(),r[3].setComponents(y-u,N-S,ne-Z,a-be).normalize(),r[4].setComponents(y-p,N-R,ne-K,a-je).normalize(),r[5].setComponents(y+p,N+R,ne+K,a+je).normalize(),this},intersectsObject:function(e){var r=e.geometry;return r.boundingSphere===null&&r.computeBoundingSphere(),Ov.copy(r.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ov)},intersectsSprite:function(e){return Ov.center.set(0,0,0),Ov.radius=.7071067811865476,Ov.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ov)},intersectsSphere:function(e){var r=this.planes,a=e.center;e=-e.radius;for(var u=0;6>u;u++)if(r[u].distanceToPoint(a)<e)return!1;return!0},intersectsBox:function(e){for(var r=this.planes,a=0;6>a;a++){var u=r[a];if(sy.x=0<u.normal.x?e.max.x:e.min.x,sy.y=0<u.normal.y?e.max.y:e.min.y,sy.z=0<u.normal.z?e.max.z:e.min.z,0>u.distanceToPoint(sy))return!1}return!0},containsPoint:function(e){for(var r=this.planes,a=0;6>a;a++)if(0>r[a].distanceToPoint(e))return!1;return!0}});var hn={common:{diffuse:{value:new vt(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ne},uv2Transform:{value:new Ne},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new vt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Ne}},sprite:{diffuse:{value:new vt(15658734)},opacity:{value:1},center:{value:new ce(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Ne}}};Kl.prototype=me(ei.prototype),Kl.prototype.constructor=Kl,Uc.prototype=me($r.prototype),Uc.prototype.constructor=Uc;var So={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex:`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common:`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin:`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps:`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment:`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex:`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag:`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag:`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert:`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`},Lp={basic:{uniforms:ko([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.fog]),vertexShader:So.meshbasic_vert,fragmentShader:So.meshbasic_frag},lambert:{uniforms:ko([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.fog,hn.lights,{emissive:{value:new vt(0)}}]),vertexShader:So.meshlambert_vert,fragmentShader:So.meshlambert_frag},phong:{uniforms:ko([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,hn.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:So.meshphong_vert,fragmentShader:So.meshphong_frag},standard:{uniforms:ko([hn.common,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.roughnessmap,hn.metalnessmap,hn.fog,hn.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:So.meshphysical_vert,fragmentShader:So.meshphysical_frag},toon:{uniforms:ko([hn.common,hn.specularmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.gradientmap,hn.fog,hn.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:So.meshtoon_vert,fragmentShader:So.meshtoon_frag},matcap:{uniforms:ko([hn.common,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,{matcap:{value:null}}]),vertexShader:So.meshmatcap_vert,fragmentShader:So.meshmatcap_frag},points:{uniforms:ko([hn.points,hn.fog]),vertexShader:So.points_vert,fragmentShader:So.points_frag},dashed:{uniforms:ko([hn.common,hn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:So.linedashed_vert,fragmentShader:So.linedashed_frag},depth:{uniforms:ko([hn.common,hn.displacementmap]),vertexShader:So.depth_vert,fragmentShader:So.depth_frag},normal:{uniforms:ko([hn.common,hn.bumpmap,hn.normalmap,hn.displacementmap,{opacity:{value:1}}]),vertexShader:So.normal_vert,fragmentShader:So.normal_frag},sprite:{uniforms:ko([hn.sprite,hn.fog]),vertexShader:So.sprite_vert,fragmentShader:So.sprite_frag},background:{uniforms:{uvTransform:{value:new Ne},t2D:{value:null}},vertexShader:So.background_vert,fragmentShader:So.background_frag},cube:{uniforms:ko([hn.envmap,{opacity:{value:1}}]),vertexShader:So.cube_vert,fragmentShader:So.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:So.equirect_vert,fragmentShader:So.equirect_frag},distanceRGBA:{uniforms:ko([hn.common,hn.displacementmap,{referencePosition:{value:new xe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:So.distanceRGBA_vert,fragmentShader:So.distanceRGBA_frag},shadow:{uniforms:ko([hn.lights,hn.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:So.shadow_vert,fragmentShader:So.shadow_frag}};Lp.physical={uniforms:ko([Lp.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ce(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new vt(0)},transparency:{value:0}}]),vertexShader:So.meshphysical_vert,fragmentShader:So.meshphysical_frag},Hc.prototype=me(Q.prototype),Hc.prototype.constructor=Hc,Hc.prototype.isCubeTexture=!0,Object.defineProperty(Hc.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Hd.prototype=me(Q.prototype),Hd.prototype.constructor=Hd,Hd.prototype.isDataTexture2DArray=!0,Jh.prototype=me(Q.prototype),Jh.prototype.constructor=Jh,Jh.prototype.isDataTexture3D=!0;var Nx=new Q,z2=new Hd,U2=new Jh,Em=new Hc,Bx=[],zx=[],Ux=new Float32Array(16),kx=new Float32Array(9),Hx=new Float32Array(4);Yg.prototype.updateCache=function(n){var e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Tl(e,n)},sv.prototype.setValue=function(n,e,r){for(var a=this.seq,u=0,p=a.length;u!==p;++u){var y=a[u];y.setValue(n,e[y.id],r)}};var ly=/([\w\d_]+)(\])?(\[|\.)?/g;gc.prototype.setValue=function(n,e,r,a){e=this.map[e],e!==void 0&&e.setValue(n,r,a)},gc.prototype.setOptional=function(n,e,r){e=e[r],e!==void 0&&this.setValue(n,r,e)},gc.upload=function(n,e,r,a){for(var u=0,p=e.length;u!==p;++u){var y=e[u],C=r[y.id];C.needsUpdate!==!1&&y.setValue(n,C.value,a)}},gc.seqWithValue=function(n,e){for(var r=[],a=0,u=n.length;a!==u;++a){var p=n[a];p.id in e&&r.push(p)}return r};var Gx=0,_1=/^[ \t]*#include +<([\w\d./]+)>/gm,jx=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Vx=/#pragma unroll_loop_start[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,k2=0;Qh.prototype=me(Nr.prototype),Qh.prototype.constructor=Qh,Qh.prototype.isMeshDepthMaterial=!0,Qh.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.depthPacking=n.depthPacking,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this},du.prototype=me(Nr.prototype),du.prototype.constructor=du,du.prototype.isMeshDistanceMaterial=!0,du.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.referencePosition.copy(n.referencePosition),this.nearDistance=n.nearDistance,this.farDistance=n.farDistance,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this},zs.prototype=Ce(me(qa.prototype),{constructor:zs,isArrayCamera:!0}),Ha.prototype=Ce(me(Cr.prototype),{constructor:Ha,isGroup:!0}),Ce(yc.prototype,{constructor:yc,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Ha,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Ha,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(e,r,a){var u=null,p=null,y=this._targetRay,C=this._grip;return e&&(y!==null&&(u=r.getPose(e.targetRaySpace,a),u!==null&&(y.matrix.fromArray(u.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale))),C!==null&&e.gripSpace&&(p=r.getPose(e.gripSpace,a),p!==null&&(C.matrix.fromArray(p.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale)))),y!==null&&(y.visible=u!==null),C!==null&&(C.visible=p!==null),this}}),Ce(so.prototype,St.prototype),Ce($p.prototype,{isFogExp2:!0,clone:function(){return new $p(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Ce(fl.prototype,{isFog:!0,clone:function(){return new fl(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Gu.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Ce(Gu.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,r,a){e*=this.stride,a*=r.stride;for(var u=0,p=this.stride;u<p;u++)this.array[e+u]=r.array[a+u];return this},set:function(e,r){return r===void 0&&(r=0),this.array.set(e,r),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var bm=new xe;Zr(Us.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Ce(Us.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var r=0,a=this.data.count;r<a;r++)bm.x=this.getX(r),bm.y=this.getY(r),bm.z=this.getZ(r),bm.applyMatrix4(e),this.setXYZ(r,bm.x,bm.y,bm.z);return this},setX:function(e,r){return this.data.array[e*this.data.stride+this.offset]=r,this},setY:function(e,r){return this.data.array[e*this.data.stride+this.offset+1]=r,this},setZ:function(e,r){return this.data.array[e*this.data.stride+this.offset+2]=r,this},setW:function(e,r){return this.data.array[e*this.data.stride+this.offset+3]=r,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,r,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=r,this.data.array[e+1]=a,this},setXYZ:function(e,r,a,u){return e=e*this.data.stride+this.offset,this.data.array[e+0]=r,this.data.array[e+1]=a,this.data.array[e+2]=u,this},setXYZW:function(e,r,a,u,p){return e=e*this.data.stride+this.offset,this.data.array[e+0]=r,this.data.array[e+1]=a,this.data.array[e+2]=u,this.data.array[e+3]=p,this},clone:function(){for(var e=[],r=0;r<this.count;r++)for(var a=r*this.data.stride+this.offset,u=0;u<this.itemSize;u++)e.push(this.data.array[a+u]);return new Jr(new this.array.constructor(e),this.itemSize,this.normalized)},toJSON:function(){for(var e=[],r=0;r<this.count;r++)for(var a=r*this.data.stride+this.offset,u=0;u<this.itemSize;u++)e.push(this.data.array[a+u]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}),El.prototype=me(Nr.prototype),El.prototype.constructor=El,El.prototype.isSpriteMaterial=!0,El.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.rotation=n.rotation,this.sizeAttenuation=n.sizeAttenuation,this};var Dv,w0=new xe,Fv=new xe,Nv=new xe,Bv=new ce,_0=new ce,Wx=new Lr,uy=new xe,M0=new xe,cy=new xe,Xx=new ce,M1=new ce,Yx=new ce;pu.prototype=Ce(me(Cr.prototype),{constructor:pu,isSprite:!0,raycast:function(e,r){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fv.setFromMatrixScale(this.matrixWorld),Wx.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Nv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Fv.multiplyScalar(-Nv.z);var a=this.material.rotation;if(a!==0)var u=Math.cos(a),p=Math.sin(a);a=this.center,gu(uy.set(-.5,-.5,0),Nv,a,Fv,p,u),gu(M0.set(.5,-.5,0),Nv,a,Fv,p,u),gu(cy.set(.5,.5,0),Nv,a,Fv,p,u),Xx.set(0,0),M1.set(1,0),Yx.set(1,1);var y=e.ray.intersectTriangle(uy,M0,cy,!1,w0);y===null&&(gu(M0.set(-.5,.5,0),Nv,a,Fv,p,u),M1.set(0,1),y=e.ray.intersectTriangle(uy,cy,M0,!1,w0),y===null)||(p=e.ray.origin.distanceTo(w0),p<e.near||p>e.far||r.push({distance:p,point:w0.clone(),uv:Xt.getUV(w0,uy,M0,cy,Xx,M1,Yx,new ce),face:null,object:this}))},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Cr.prototype.copy.call(this,e),e.center!==void 0&&this.center.copy(e.center),this}});var hy=new xe,Zx=new xe;Xr.prototype=Ce(me(Cr.prototype),{constructor:Xr,isLOD:!0,copy:function(e){Cr.prototype.copy.call(this,e,!1);for(var r=e.levels,a=0,u=r.length;a<u;a++){var p=r[a];this.addLevel(p.object.clone(),p.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,r){r===void 0&&(r=0),r=Math.abs(r);for(var a=this.levels,u=0;u<a.length&&!(r<a[u].distance);u++);return a.splice(u,0,{distance:r,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var r=this.levels;if(0<r.length){for(var a=1,u=r.length;a<u&&!(e<r[a].distance);a++);return r[a-1].object}return null},raycast:function(e,r){if(0<this.levels.length){hy.setFromMatrixPosition(this.matrixWorld);var a=e.ray.origin.distanceTo(hy);this.getObjectForDistance(a).raycast(e,r)}},update:function(e){var r=this.levels;if(1<r.length){hy.setFromMatrixPosition(e.matrixWorld),Zx.setFromMatrixPosition(this.matrixWorld),e=hy.distanceTo(Zx)/e.zoom,r[0].object.visible=!0;for(var a=1,u=r.length;a<u&&e>=r[a].distance;a++)r[a-1].object.visible=!1,r[a].object.visible=!0;for(this._currentLevel=a-1;a<u;a++)r[a].object.visible=!1}},toJSON:function(e){e=Cr.prototype.toJSON.call(this,e),this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];for(var r=this.levels,a=0,u=r.length;a<u;a++){var p=r[a];e.object.levels.push({object:p.object.uuid,distance:p.distance})}return e}}),Wc.prototype=Ce(me(oa.prototype),{constructor:Wc,isSkinnedMesh:!0,bind:function(e,r){this.skeleton=e,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.getInverse(r)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Oe,r=this.geometry.attributes.skinWeight,a=0,u=r.count;a<u;a++){e.x=r.getX(a),e.y=r.getY(a),e.z=r.getZ(a),e.w=r.getW(a);var p=1/e.manhattanLength();p!==Infinity?e.multiplyScalar(p):e.set(1,0,0,0),r.setXYZW(a,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){oa.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var n=new xe,e=new Oe,r=new Oe,a=new xe,u=new Lr;return function(p,y){var C=this.skeleton,S=this.geometry;for(e.fromBufferAttribute(S.attributes.skinIndex,p),r.fromBufferAttribute(S.attributes.skinWeight,p),n.fromBufferAttribute(S.attributes.position,p).applyMatrix4(this.bindMatrix),y.set(0,0,0),p=0;4>p;p++)if(S=r.getComponent(p),S!==0){var R=e.getComponent(p);u.multiplyMatrices(C.bones[R].matrixWorld,C.boneInverses[R]),y.addScaledVector(a.copy(n).applyMatrix4(u),S)}return y.applyMatrix4(this.bindMatrixInverse)}}()});var Kx=new Lr,H2=new Lr;Ce(Xc.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,r=this.bones.length;e<r;e++){var a=new Lr;this.bones[e]&&a.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(a)}},pose:function(){var e,r,a=0;for(r=this.bones.length;a<r;a++)(e=this.bones[a])&&e.matrixWorld.getInverse(this.boneInverses[a]);for(a=0,r=this.bones.length;a<r;a++)(e=this.bones[a])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,r=this.boneInverses,a=this.boneMatrices,u=this.boneTexture,p=0,y=e.length;p<y;p++)Kx.multiplyMatrices(e[p]?e[p].matrixWorld:H2,r[p]),Kx.toArray(a,16*p);u!==void 0&&(u.needsUpdate=!0)},clone:function(){return new Xc(this.bones,this.boneInverses)},getBoneByName:function(e){for(var r=0,a=this.bones.length;r<a;r++){var u=this.bones[r];if(u.name===e)return u}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),ef.prototype=Ce(me(Cr.prototype),{constructor:ef,isBone:!0});var Jx=new Lr,qx=new Lr,fy=[],Lm=new oa;Fa.prototype=Ce(me(oa.prototype),{constructor:Fa,isInstancedMesh:!0,getMatrixAt:function(e,r){r.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,r){var a=this.matrixWorld,u=this.count;if(Lm.geometry=this.geometry,Lm.material=this.material,Lm.material!==void 0)for(var p=0;p<u;p++){this.getMatrixAt(p,Jx),qx.multiplyMatrices(a,Jx),Lm.matrixWorld=qx,Lm.raycast(e,fy);for(var y=0,C=fy.length;y<C;y++){var S=fy[y];S.instanceId=p,S.object=this,r.push(S)}fy.length=0}},setMatrixAt:function(e,r){r.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),Yi.prototype=me(Nr.prototype),Yi.prototype.constructor=Yi,Yi.prototype.isLineBasicMaterial=!0,Yi.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.color.copy(n.color),this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.morphTargets=n.morphTargets,this};var S1=new xe,T1=new xe,Qx=new Lr,dy=new ro,py=new Ko;ks.prototype=Ce(me(Cr.prototype),{constructor:ks,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(e.index===null){for(var r=e.attributes.position,a=[0],u=1,p=r.count;u<p;u++)S1.fromBufferAttribute(r,u-1),T1.fromBufferAttribute(r,u),a[u]=a[u-1],a[u]+=S1.distanceTo(T1);e.setAttribute("lineDistance",new Or(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(r=e.vertices,a=e.lineDistances,a[0]=0,u=1,p=r.length;u<p;u++)a[u]=a[u-1],a[u]+=r[u-1].distanceTo(r[u]);return this},raycast:function(e,r){var a=this.geometry,u=this.matrixWorld,p=e.params.Line.threshold;if(a.boundingSphere===null&&a.computeBoundingSphere(),py.copy(a.boundingSphere),py.applyMatrix4(u),py.radius+=p,e.ray.intersectsSphere(py)!==!1){Qx.getInverse(u),dy.copy(e.ray).applyMatrix4(Qx),u=p/((this.scale.x+this.scale.y+this.scale.z)/3),u*=u;var y=new xe,C=new xe;p=new xe;var S=new xe,R=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var N=a.index,z=a.attributes.position.array;if(N!==null){N=N.array,a=0;for(var Z=N.length-1;a<Z;a+=R){var K=N[a+1];y.fromArray(z,3*N[a]),C.fromArray(z,3*K),K=dy.distanceSqToSegment(y,C,S,p),K>u||(S.applyMatrix4(this.matrixWorld),K=e.ray.origin.distanceTo(S),K<e.near||K>e.far||r.push({distance:K,point:p.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}}else for(a=0,Z=z.length/3-1;a<Z;a+=R)y.fromArray(z,3*a),C.fromArray(z,3*a+3),K=dy.distanceSqToSegment(y,C,S,p),K>u||(S.applyMatrix4(this.matrixWorld),K=e.ray.origin.distanceTo(S),K<e.near||K>e.far||r.push({distance:K,point:p.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}else if(a.isGeometry)for(y=a.vertices,C=y.length,a=0;a<C-1;a+=R)K=dy.distanceSqToSegment(y[a],y[a+1],S,p),K>u||(S.applyMatrix4(this.matrixWorld),K=e.ray.origin.distanceTo(S),K<e.near||K>e.far||r.push({distance:K,point:p.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var r=Ei(e);if(0<r.length){var a=e[r[0]];if(a!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,r=a.length;e<r;e++){var u=a[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=e}}}else e=e.morphTargets,e!==void 0&&0<e.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var zv=new xe,gy=new xe;da.prototype=Ce(me(ks.prototype),{constructor:da,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(e.index===null){for(var r=e.attributes.position,a=[],u=0,p=r.count;u<p;u+=2)zv.fromBufferAttribute(r,u),gy.fromBufferAttribute(r,u+1),a[u]=u===0?0:a[u-1],a[u+1]=a[u]+zv.distanceTo(gy);e.setAttribute("lineDistance",new Or(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(r=e.vertices,a=e.lineDistances,u=0,p=r.length;u<p;u+=2)zv.copy(r[u]),gy.copy(r[u+1]),a[u]=u===0?0:a[u-1],a[u+1]=a[u]+zv.distanceTo(gy);return this}}),Kd.prototype=Ce(me(ks.prototype),{constructor:Kd,isLineLoop:!0}),mu.prototype=me(Nr.prototype),mu.prototype.constructor=mu,mu.prototype.isPointsMaterial=!0,mu.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this.morphTargets=n.morphTargets,this};var $x=new Lr,I1=new ro,cu=new Ko,Uv=new xe;Mh.prototype=Ce(me(Cr.prototype),{constructor:Mh,isPoints:!0,raycast:function(e,r){var a=this.geometry,u=this.matrixWorld,p=e.params.Points.threshold;if(a.boundingSphere===null&&a.computeBoundingSphere(),cu.copy(a.boundingSphere),cu.applyMatrix4(u),cu.radius+=p,e.ray.intersectsSphere(cu)!==!1)if($x.getInverse(u),I1.copy(e.ray).applyMatrix4($x),p/=(this.scale.x+this.scale.y+this.scale.z)/3,p*=p,a.isBufferGeometry){var y=a.index;if(a=a.attributes.position.array,y!==null){var C=y.array;y=0;for(var S=C.length;y<S;y++){var R=C[y];Uv.fromArray(a,3*R),vi(Uv,R,p,u,e,r,this)}}else for(y=0,C=a.length/3;y<C;y++)Uv.fromArray(a,3*y),vi(Uv,y,p,u,e,r,this)}else for(a=a.vertices,y=0,C=a.length;y<C;y++)vi(a[y],y,p,u,e,r,this)},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var r=Ei(e);if(0<r.length){var a=e[r[0]];if(a!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,r=a.length;e<r;e++){var u=a[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=e}}}else e=e.morphTargets,e!==void 0&&0<e.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ps.prototype=Ce(me(Q.prototype),{constructor:Ps,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Jd.prototype=me(Q.prototype),Jd.prototype.constructor=Jd,Jd.prototype.isCompressedTexture=!0,Ma.prototype=me(Q.prototype),Ma.prototype.constructor=Ma,Ma.prototype.isCanvasTexture=!0,td.prototype=me(Q.prototype),td.prototype.constructor=td,td.prototype.isDepthTexture=!0,xc.prototype=me($r.prototype),xc.prototype.constructor=xc,nn.prototype=me(ei.prototype),nn.prototype.constructor=nn,Sh.prototype=me($r.prototype),Sh.prototype.constructor=Sh,rd.prototype=me(ei.prototype),rd.prototype.constructor=rd,Ci.prototype=me($r.prototype),Ci.prototype.constructor=Ci,Jo.prototype=me(ei.prototype),Jo.prototype.constructor=Jo,Yc.prototype=me(Ci.prototype),Yc.prototype.constructor=Yc,on.prototype=me(ei.prototype),on.prototype.constructor=on,Rs.prototype=me(Ci.prototype),Rs.prototype.constructor=Rs,nd.prototype=me(ei.prototype),nd.prototype.constructor=nd,id.prototype=me(Ci.prototype),id.prototype.constructor=id,od.prototype=me(ei.prototype),od.prototype.constructor=od,tf.prototype=me(Ci.prototype),tf.prototype.constructor=tf,Zc.prototype=me(ei.prototype),Zc.prototype.constructor=Zc,bl.prototype=me($r.prototype),bl.prototype.constructor=bl,bl.prototype.toJSON=function(){var n=$r.prototype.toJSON.call(this);return n.path=this.parameters.path.toJSON(),n},vu.prototype=me(ei.prototype),vu.prototype.constructor=vu,Ea.prototype=me($r.prototype),Ea.prototype.constructor=Ea,qd.prototype=me(ei.prototype),qd.prototype.constructor=qd,Ac.prototype=me($r.prototype),Ac.prototype.constructor=Ac;var G2={triangulate:function(e,r,a){a=a||2;var u=r&&r.length,p=u?r[0]*a:e.length,y=Cc(e,0,p,a,!0),C=[];if(!y||y.next===y.prev)return C;var S;if(u){var R=a;u=[];var N,z=0;for(N=r.length;z<N;z++){var Z=r[z]*R,K=z<N-1?r[z+1]*R:e.length;Z=Cc(e,Z,K,R,!1),Z===Z.next&&(Z.steiner=!0),u.push(Ql(Z))}for(u.sort(rf),z=0;z<u.length;z++)R=u[z],r=y,(r=Jg(R,r))&&(R=sd(r,R),wc(r,r.next),wc(R,R.next)),y=wc(y,y.next)}if(e.length>80*a){var ne=S=e[0],oe=u=e[1];for(R=a;R<p;R+=a)z=e[R],r=e[R+1],z<ne&&(ne=z),r<oe&&(oe=r),z>S&&(S=z),r>u&&(u=r);S=Math.max(S-ne,u-oe),S=S!==0?1/S:0}return Qd(y,C,a,ne,oe,S),C}},Tg={area:function(e){for(var r=e.length,a=0,u=r-1,p=0;p<r;u=p++)a+=e[u].x*e[p].y-e[p].x*e[u].y;return .5*a},isClockWise:function(e){return 0>Tg.area(e)},triangulateShape:function(e,r){var a=[],u=[],p=[];pv(e),ud(a,e);var y=e.length;for(r.forEach(pv),e=0;e<r.length;e++)u.push(y),y+=r[e].length,ud(a,r[e]);for(r=G2.triangulate(a,u),e=0;e<r.length;e+=3)p.push(r.slice(e,e+3));return p}};ju.prototype=me(ei.prototype),ju.prototype.constructor=ju,ju.prototype.toJSON=function(){var n=ei.prototype.toJSON.call(this);return af(this.parameters.shapes,this.parameters.options,n)},Hs.prototype=me($r.prototype),Hs.prototype.constructor=Hs,Hs.prototype.toJSON=function(){var n=$r.prototype.toJSON.call(this);return af(this.parameters.shapes,this.parameters.options,n)};var j2={generateTopUV:function(e,r,a,u,p){e=r[3*u],u=r[3*u+1];var y=r[3*p];return p=r[3*p+1],[new ce(r[3*a],r[3*a+1]),new ce(e,u),new ce(y,p)]},generateSideWallUV:function(e,r,a,u,p,y){e=r[3*a];var C=r[3*a+1];a=r[3*a+2];var S=r[3*u],R=r[3*u+1];u=r[3*u+2];var N=r[3*p],z=r[3*p+1];p=r[3*p+2];var Z=r[3*y],K=r[3*y+1];return r=r[3*y+2],.01>Math.abs(C-R)?[new ce(e,1-a),new ce(S,1-u),new ce(N,1-p),new ce(Z,1-r)]:[new ce(C,1-a),new ce(R,1-u),new ce(z,1-p),new ce(K,1-r)]}};np.prototype=me(ei.prototype),np.prototype.constructor=np,sf.prototype=me(Hs.prototype),sf.prototype.constructor=sf,cd.prototype=me(ei.prototype),cd.prototype.constructor=cd,yu.prototype=me($r.prototype),yu.prototype.constructor=yu,gl.prototype=me(ei.prototype),gl.prototype.constructor=gl,xu.prototype=me($r.prototype),xu.prototype.constructor=xu,ip.prototype=me(ei.prototype),ip.prototype.constructor=ip,hd.prototype=me($r.prototype),hd.prototype.constructor=hd,Au.prototype=me(ei.prototype),Au.prototype.constructor=Au,Au.prototype.toJSON=function(){var n=ei.prototype.toJSON.call(this);return Qs(this.parameters.shapes,n)},lf.prototype=me($r.prototype),lf.prototype.constructor=lf,lf.prototype.toJSON=function(){var n=$r.prototype.toJSON.call(this);return Qs(this.parameters.shapes,n)},_c.prototype=me($r.prototype),_c.prototype.constructor=_c,dt.prototype=me(ei.prototype),dt.prototype.constructor=dt,zt.prototype=me($r.prototype),zt.prototype.constructor=zt,Nt.prototype=me(dt.prototype),Nt.prototype.constructor=Nt,un.prototype=me(zt.prototype),un.prototype.constructor=un,Kn.prototype=me(ei.prototype),Kn.prototype.constructor=Kn,Ri.prototype=me($r.prototype),Ri.prototype.constructor=Ri;var ac=dh({__proto__:null,WireframeGeometry:xc,ParametricGeometry:nn,ParametricBufferGeometry:Sh,TetrahedronGeometry:Jo,TetrahedronBufferGeometry:Yc,OctahedronGeometry:on,OctahedronBufferGeometry:Rs,IcosahedronGeometry:nd,IcosahedronBufferGeometry:id,DodecahedronGeometry:od,DodecahedronBufferGeometry:tf,PolyhedronGeometry:rd,PolyhedronBufferGeometry:Ci,TubeGeometry:Zc,TubeBufferGeometry:bl,TorusKnotGeometry:vu,TorusKnotBufferGeometry:Ea,TorusGeometry:qd,TorusBufferGeometry:Ac,TextGeometry:np,TextBufferGeometry:sf,SphereGeometry:cd,SphereBufferGeometry:yu,RingGeometry:gl,RingBufferGeometry:xu,PlaneGeometry:Kl,PlaneBufferGeometry:Uc,LatheGeometry:ip,LatheBufferGeometry:hd,ShapeGeometry:Au,ShapeBufferGeometry:lf,ExtrudeGeometry:ju,ExtrudeBufferGeometry:Hs,EdgesGeometry:_c,ConeGeometry:Nt,ConeBufferGeometry:un,CylinderGeometry:dt,CylinderBufferGeometry:zt,CircleGeometry:Kn,CircleBufferGeometry:Ri,BoxGeometry:B2,BoxBufferGeometry:C0});lo.prototype=me(Nr.prototype),lo.prototype.constructor=lo,lo.prototype.isShadowMaterial=!0,lo.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.color.copy(n.color),this},wi.prototype=me(_i.prototype),wi.prototype.constructor=wi,wi.prototype.isRawShaderMaterial=!0,Sa.prototype=me(Nr.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isMeshStandardMaterial=!0,Sa.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapIntensity=n.envMapIntensity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this.vertexTangents=n.vertexTangents,this},Kc.prototype=me(Sa.prototype),Kc.prototype.constructor=Kc,Kc.prototype.isMeshPhysicalMaterial=!0,Kc.prototype.copy=function(n){return Sa.prototype.copy.call(this,n),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.reflectivity=n.reflectivity,this.sheen=n.sheen?(this.sheen||new vt).copy(n.sheen):null,this.transparency=n.transparency,this},Ga.prototype=me(Nr.prototype),Ga.prototype.constructor=Ga,Ga.prototype.isMeshPhongMaterial=!0,Ga.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this},Vu.prototype=me(Nr.prototype),Vu.prototype.constructor=Vu,Vu.prototype.isMeshToonMaterial=!0,Vu.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.gradientMap=n.gradientMap,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this},uf.prototype=me(Nr.prototype),uf.prototype.constructor=uf,uf.prototype.isMeshNormalMaterial=!0,uf.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this},Gs.prototype=me(Nr.prototype),Gs.prototype.constructor=Gs,Gs.prototype.isMeshLambertMaterial=!0,Gs.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this},js.prototype=me(Nr.prototype),js.prototype.constructor=js,js.prototype.isMeshMatcapMaterial=!0,js.prototype.copy=function(n){return Nr.prototype.copy.call(this,n),this.defines={MATCAP:""},this.color.copy(n.color),this.matcap=n.matcap,this.map=n.map,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this},Wu.prototype=me(Yi.prototype),Wu.prototype.constructor=Wu,Wu.prototype.isLineDashedMaterial=!0,Wu.prototype.copy=function(n){return Yi.prototype.copy.call(this,n),this.scale=n.scale,this.dashSize=n.dashSize,this.gapSize=n.gapSize,this};var E1=dh({__proto__:null,ShadowMaterial:lo,SpriteMaterial:El,RawShaderMaterial:wi,ShaderMaterial:_i,PointsMaterial:mu,MeshPhysicalMaterial:Kc,MeshStandardMaterial:Sa,MeshPhongMaterial:Ga,MeshToonMaterial:Vu,MeshNormalMaterial:uf,MeshLambertMaterial:Gs,MeshDepthMaterial:Qh,MeshDistanceMaterial:du,MeshBasicMaterial:wr,MeshMatcapMaterial:js,LineDashedMaterial:Wu,LineBasicMaterial:Yi,Material:Nr}),bs={arraySlice:function(e,r,a){return bs.isTypedArray(e)?new e.constructor(e.subarray(r,a!==void 0?a:e.length)):e.slice(r,a)},convertArray:function(e,r,a){return!e||!a&&e.constructor===r?e:typeof r.BYTES_PER_ELEMENT=="number"?new r(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var r=e.length,a=Array(r),u=0;u!==r;++u)a[u]=u;return a.sort(function(p,y){return e[p]-e[y]}),a},sortedArray:function(e,r,a){for(var u=e.length,p=new e.constructor(u),y=0,C=0;C!==u;++y)for(var S=a[y]*r,R=0;R!==r;++R)p[C++]=e[S+R];return p},flattenJSON:function(e,r,a,u){for(var p=1,y=e[0];y!==void 0&&y[u]===void 0;)y=e[p++];if(y!==void 0){var C=y[u];if(C!==void 0)if(Array.isArray(C))do C=y[u],C!==void 0&&(r.push(y.time),a.push.apply(a,C)),y=e[p++];while(y!==void 0);else if(C.toArray!==void 0)do C=y[u],C!==void 0&&(r.push(y.time),C.toArray(a,a.length)),y=e[p++];while(y!==void 0);else do C=y[u],C!==void 0&&(r.push(y.time),a.push(C)),y=e[p++];while(y!==void 0)}},subclip:function(e,r,a,u,p){p=p||30,e=e.clone(),e.name=r;var y=[];for(r=0;r<e.tracks.length;++r){for(var C=e.tracks[r],S=C.getValueSize(),R=[],N=[],z=0;z<C.times.length;++z){var Z=C.times[z]*p;if(!(Z<a||Z>=u))for(R.push(C.times[z]),Z=0;Z<S;++Z)N.push(C.values[z*S+Z])}R.length!==0&&(C.times=bs.convertArray(R,C.times.constructor),C.values=bs.convertArray(N,C.values.constructor),y.push(C))}for(e.tracks=y,a=Infinity,r=0;r<e.tracks.length;++r)a>e.tracks[r].times[0]&&(a=e.tracks[r].times[0]);for(r=0;r<e.tracks.length;++r)e.tracks[r].shift(-1*a);return e.resetDuration(),e},makeClipAdditive:function(e,r,a,u){r===void 0&&(r=0),a===void 0&&(a=e),(u===void 0||0>=u)&&(u=30);var p=e.tracks.length;for(r/=u,u=0;u<p;++u){var y=a.tracks[u],C=y.ValueTypeName;if(C!=="bool"&&C!=="string"){var S=e.tracks.find(function(oe){return oe.name===y.name&&oe.ValueTypeName===C});if(S!==void 0){var R=y.getValueSize(),N=y.times.length-1;r<=y.times[0]?N=bs.arraySlice(y.values,0,y.valueSize):r>=y.times[N]?N=bs.arraySlice(y.values,N*R):(N=y.createInterpolant(),N.evaluate(r),N=N.resultBuffer),C==="quaternion"&&new Er(N[0],N[1],N[2],N[3]).normalize().conjugate().toArray(N);for(var z=S.times.length,Z=0;Z<z;++Z){var K=Z*R;if(C==="quaternion")Er.multiplyQuaternionsFlat(S.values,K,N,0,S.values,K);else for(var ne=0;ne<R;++ne)S.values[K+ne]-=N[ne]}}}}return e.blendMode=2501,e}};Ce(Ni.prototype,{evaluate:function(e){var r=this.parameterPositions,a=this._cachedIndex,u=r[a],p=r[a-1];e:{t:{r:{n:if(!(e<u)){for(var y=a+2;;){if(u===void 0){if(e<p)break n;return this._cachedIndex=a=r.length,this.afterEnd_(a-1,e,p)}if(a===y)break;if(p=u,u=r[++a],e<u)break t}u=r.length;break r}if(e>=p)break e;for(y=r[1],e<y&&(a=2,p=y),y=a-2;;){if(p===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,u);if(a===y)break;if(u=p,p=r[--a-1],e>=p)break t}u=a,a=0}for(;a<u;)p=a+u>>>1,e<r[p]?u=p:a=p+1;if(u=r[a],p=r[a-1],p===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,u);if(u===void 0)return this._cachedIndex=a=r.length,this.afterEnd_(a-1,p,e)}this._cachedIndex=a,this.intervalChanged_(a,p,u)}return this.interpolate_(a,p,e,u)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var r=this.resultBuffer,a=this.sampleValues,u=this.valueSize;e*=u;for(var p=0;p!==u;++p)r[p]=a[e+p];return r},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Ce(Ni.prototype,{beforeStart_:Ni.prototype.copySampleValue_,afterEnd_:Ni.prototype.copySampleValue_}),eg.prototype=Ce(me(Ni.prototype),{constructor:eg,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,r,a){var u=this.parameterPositions,p=e-2,y=e+1,C=u[p],S=u[y];if(C===void 0)switch(this.getSettings_().endingStart){case 2401:p=e,C=2*r-a;break;case 2402:p=u.length-2,C=r+u[p]-u[p+1];break;default:p=e,C=a}if(S===void 0)switch(this.getSettings_().endingEnd){case 2401:y=e,S=2*a-r;break;case 2402:y=1,S=a+u[1]-u[0];break;default:y=e-1,S=r}e=.5*(a-r),u=this.valueSize,this._weightPrev=e/(r-C),this._weightNext=e/(S-a),this._offsetPrev=p*u,this._offsetNext=y*u},interpolate_:function(e,r,a,u){var p=this.resultBuffer,y=this.sampleValues,C=this.valueSize;e*=C;var S=e-C,R=this._offsetPrev,N=this._offsetNext,z=this._weightPrev,Z=this._weightNext,K=(a-r)/(u-r);for(a=K*K,u=a*K,r=-z*u+2*z*a-z*K,z=(1+z)*u+(-1.5-2*z)*a+(-.5+z)*K+1,K=(-1-Z)*u+(1.5+Z)*a+.5*K,Z=Z*u-Z*a,a=0;a!==C;++a)p[a]=r*y[R+a]+z*y[S+a]+K*y[e+a]+Z*y[N+a];return p}}),Th.prototype=Ce(me(Ni.prototype),{constructor:Th,interpolate_:function(e,r,a,u){var p=this.resultBuffer,y=this.sampleValues,C=this.valueSize;e*=C;var S=e-C;for(r=(a-r)/(u-r),a=1-r,u=0;u!==C;++u)p[u]=y[S+u]*a+y[e+u]*r;return p}}),cf.prototype=Ce(me(Ni.prototype),{constructor:cf,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Ce(Vs,{toJSON:function(e){var r=e.constructor;if(r.toJSON!==void 0)r=r.toJSON(e);else{r={name:e.name,times:bs.convertArray(e.times,Array),values:bs.convertArray(e.values,Array)};var a=e.getInterpolation();a!==e.DefaultInterpolation&&(r.interpolation=a)}return r.type=e.ValueTypeName,r}}),Ce(Vs.prototype,{constructor:Vs,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new cf(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Th(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new eg(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var r=this.InterpolantFactoryMethodDiscrete;break;case 2301:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(r===void 0){if(r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=r,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0)for(var r=this.times,a=0,u=r.length;a!==u;++a)r[a]+=e;return this},scale:function(e){if(e!==1)for(var r=this.times,a=0,u=r.length;a!==u;++a)r[a]*=e;return this},trim:function(e,r){for(var a=this.times,u=a.length,p=0,y=u-1;p!==u&&a[p]<e;)++p;for(;y!==-1&&a[y]>r;)--y;return++y,(p!==0||y!==u)&&(p>=y&&(y=Math.max(y,1),p=y-1),e=this.getValueSize(),this.times=bs.arraySlice(a,p,y),this.values=bs.arraySlice(this.values,p*e,y*e)),this},validate:function(){var e=!0,r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var a=this.times;r=this.values;var u=a.length;u===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var p=null,y=0;y!==u;y++){var C=a[y];if(typeof C=="number"&&isNaN(C)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,y,C),e=!1;break}if(p!==null&&p>C){console.error("THREE.KeyframeTrack: Out of order keys.",this,y,C,p),e=!1;break}p=C}if(r!==void 0&&bs.isTypedArray(r)){for(y=0,a=r.length;y!==a;++y)if(u=r[y],isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,y,u),e=!1;break}}return e},optimize:function(){for(var e=bs.arraySlice(this.times),r=bs.arraySlice(this.values),a=this.getValueSize(),u=this.getInterpolation()===2302,p=1,y=e.length-1,C=1;C<y;++C){var S=!1,R=e[C];if(R!==e[C+1]&&(C!==1||R!==R[0]))if(u)S=!0;else{var N=C*a,z=N-a,Z=N+a;for(R=0;R!==a;++R){var K=r[N+R];if(K!==r[z+R]||K!==r[Z+R]){S=!0;break}}}if(S){if(C!==p)for(e[p]=e[C],S=C*a,N=p*a,R=0;R!==a;++R)r[N+R]=r[S+R];++p}}if(0<y){for(e[p]=e[y],S=y*a,N=p*a,R=0;R!==a;++R)r[N+R]=r[S+R];++p}return p!==e.length?(this.times=bs.arraySlice(e,0,p),this.values=bs.arraySlice(r,0,p*a)):(this.times=e,this.values=r),this},clone:function(){var e=bs.arraySlice(this.times,0),r=bs.arraySlice(this.values,0);return e=new this.constructor(this.name,e,r),e.createInterpolant=this.createInterpolant,e}}),Xu.prototype=Ce(me(Vs.prototype),{constructor:Xu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),op.prototype=Ce(me(Vs.prototype),{constructor:op,ValueTypeName:"color"}),Mc.prototype=Ce(me(Vs.prototype),{constructor:Mc,ValueTypeName:"number"}),Sc.prototype=Ce(me(Ni.prototype),{constructor:Sc,interpolate_:function(e,r,a,u){var p=this.resultBuffer,y=this.sampleValues,C=this.valueSize;for(e*=C,r=(a-r)/(u-r),a=e+C;e!==a;e+=4)Er.slerpFlat(p,0,y,e-C,y,e,r);return p}}),$l.prototype=Ce(me(Vs.prototype),{constructor:$l,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Sc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),hf.prototype=Ce(me(Vs.prototype),{constructor:hf,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ll.prototype=Ce(me(Vs.prototype),{constructor:Ll,ValueTypeName:"vector"}),Ce(Ta,{parse:function(e){for(var r=[],a=e.tracks,u=1/(e.fps||1),p=0,y=a.length;p!==y;++p)r.push(Fn(a[p]).scale(u));return new Ta(e.name,e.duration,r,e.blendMode)},toJSON:function(e){var r=[],a=e.tracks;e={name:e.name,duration:e.duration,tracks:r,uuid:e.uuid,blendMode:e.blendMode};for(var u=0,p=a.length;u!==p;++u)r.push(Vs.toJSON(a[u]));return e},CreateFromMorphTargetSequence:function(e,r,a,u){for(var p=r.length,y=[],C=0;C<p;C++){var S=[],R=[];S.push((C+p-1)%p,C,(C+1)%p),R.push(0,1,0);var N=bs.getKeyframeOrder(S);S=bs.sortedArray(S,1,N),R=bs.sortedArray(R,1,N),u||S[0]!==0||(S.push(p),R.push(R[0])),y.push(new Mc(".morphTargetInfluences["+r[C].name+"]",S,R).scale(1/a))}return new Ta(e,-1,y)},findByName:function(e,r){var a=e;for(Array.isArray(e)||(a=e.geometry&&e.geometry.animations||e.animations),e=0;e<a.length;e++)if(a[e].name===r)return a[e];return null},CreateClipsFromMorphTargetSequences:function(e,r,a){for(var u={},p=/^([\w-]*?)([\d]+)$/,y=0,C=e.length;y<C;y++){var S=e[y],R=S.name.match(p);if(R&&1<R.length){var N=R[1];(R=u[N])||(u[N]=R=[]),R.push(S)}}e=[];for(N in u)e.push(Ta.CreateFromMorphTargetSequence(N,u[N],r,a));return e},parseAnimation:function(e,r){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var a=function(Ie,ze,et,xt,gt){if(et.length!==0){var We=[],Rt=[];bs.flattenJSON(et,We,Rt,xt),We.length!==0&&gt.push(new Ie(ze,We,Rt))}},u=[],p=e.name||"default",y=e.length||-1,C=e.fps||30,S=e.blendMode;e=e.hierarchy||[];for(var R=0;R<e.length;R++){var N=e[R].keys;if(N&&N.length!==0)if(N[0].morphTargets){y={};for(var z=0;z<N.length;z++)if(N[z].morphTargets)for(var Z=0;Z<N[z].morphTargets.length;Z++)y[N[z].morphTargets[Z]]=-1;for(var K in y){var ne=[],oe=[];for(Z=0;Z!==N[z].morphTargets.length;++Z){var be=N[z];ne.push(be.time),oe.push(be.morphTarget===K?1:0)}u.push(new Mc(".morphTargetInfluence["+K+"]",ne,oe))}y=y.length*(C||1)}else z=".bones["+r[R].name+"]",a(Ll,z+".position",N,"pos",u),a($l,z+".quaternion",N,"rot",u),a(Ll,z+".scale",N,"scl",u)}return u.length===0?null:new Ta(p,y,u,S)}}),Ce(Ta.prototype,{resetDuration:function(){for(var e=0,r=0,a=this.tracks.length;r!==a;++r){var u=this.tracks[r];e=Math.max(e,u.times[u.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,r=0;r<this.tracks.length;r++)e=e&&this.tracks[r].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());return new Ta(this.name,this.duration,e,this.blendMode)}});var Ig={enabled:!1,files:{},add:function(e,r){this.enabled!==!1&&(this.files[e]=r)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},eA=new Qg;Ce(Zi.prototype,{load:function(){},loadAsync:function(e,r){var a=this;return new Si(function(u,p){a.load(e,u,r,p)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});var kf={};ja.prototype=Ce(me(Zi.prototype),{constructor:ja,load:function(e,r,a,u){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var p=this,y=Ig.get(e);if(y!==void 0)return p.manager.itemStart(e),setTimeout(function(){r&&r(y),p.manager.itemEnd(e)},0),y;if(kf[e]!==void 0)kf[e].push({onLoad:r,onProgress:a,onError:u});else{var C=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(C){a=C[1];var S=!!C[2];C=C[3],C=decodeURIComponent(C),S&&(C=atob(C));try{var R=(this.responseType||"").toLowerCase();switch(R){case"arraybuffer":case"blob":var N=new Uint8Array(C.length);for(S=0;S<C.length;S++)N[S]=C.charCodeAt(S);var z=R==="blob"?new Blob([N.buffer],{type:a}):N.buffer;break;case"document":z=new DOMParser().parseFromString(C,a);break;case"json":z=JSON.parse(C);break;default:z=C}setTimeout(function(){r&&r(z),p.manager.itemEnd(e)},0)}catch(K){setTimeout(function(){u&&u(K),p.manager.itemError(e),p.manager.itemEnd(e)},0)}}else{kf[e]=[],kf[e].push({onLoad:r,onProgress:a,onError:u});var Z=new XMLHttpRequest;Z.open("GET",e,!0),Z.addEventListener("load",function(K){var ne=this.response,oe=kf[e];if(delete kf[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Ig.add(e,ne);for(var be=0,je=oe.length;be<je;be++){var Ie=oe[be];Ie.onLoad&&Ie.onLoad(ne)}}else{for(be=0,je=oe.length;be<je;be++)Ie=oe[be],Ie.onError&&Ie.onError(K);p.manager.itemError(e)}p.manager.itemEnd(e)},!1),Z.addEventListener("progress",function(K){for(var ne=kf[e],oe=0,be=ne.length;oe<be;oe++){var je=ne[oe];je.onProgress&&je.onProgress(K)}},!1),Z.addEventListener("error",function(K){var ne=kf[e];delete kf[e];for(var oe=0,be=ne.length;oe<be;oe++){var je=ne[oe];je.onError&&je.onError(K)}p.manager.itemError(e),p.manager.itemEnd(e)},!1),Z.addEventListener("abort",function(K){var ne=kf[e];delete kf[e];for(var oe=0,be=ne.length;oe<be;oe++){var je=ne[oe];je.onError&&je.onError(K)}p.manager.itemError(e),p.manager.itemEnd(e)},!1),this.responseType!==void 0&&(Z.responseType=this.responseType),this.withCredentials!==void 0&&(Z.withCredentials=this.withCredentials),Z.overrideMimeType&&Z.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(S in this.requestHeader)Z.setRequestHeader(S,this.requestHeader[S]);Z.send(null)}return p.manager.itemStart(e),Z}},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),ap.prototype=Ce(me(Zi.prototype),{constructor:ap,load:function(e,r,a,u){var p=this,y=new ja(p.manager);y.setPath(p.path),y.load(e,function(C){try{r(p.parse(JSON.parse(C)))}catch(S){u?u(S):console.error(S),p.manager.itemError(e)}},a,u)},parse:function(e){for(var r=[],a=0;a<e.length;a++){var u=Ta.parse(e[a]);r.push(u)}return r}}),$g.prototype=Ce(me(Zi.prototype),{constructor:$g,load:function(e,r,a,u){function p(K){R.load(e[K],function(ne){ne=y.parse(ne,!0),C[K]={width:ne.width,height:ne.height,format:ne.format,mipmaps:ne.mipmaps},N+=1,N===6&&(ne.mipmapCount===1&&(S.minFilter=1006),S.format=ne.format,S.needsUpdate=!0,r&&r(S))},a,u)}var y=this,C=[],S=new Jd;S.image=C;var R=new ja(this.manager);if(R.setPath(this.path),R.setResponseType("arraybuffer"),Array.isArray(e))for(var N=0,z=0,Z=e.length;z<Z;++z)p(z);else R.load(e,function(K){if(K=y.parse(K,!0),K.isCubemap)for(var ne=K.mipmaps.length/K.mipmapCount,oe=0;oe<ne;oe++){C[oe]={mipmaps:[]};for(var be=0;be<K.mipmapCount;be++)C[oe].mipmaps.push(K.mipmaps[oe*K.mipmapCount+be]),C[oe].format=K.format,C[oe].width=K.width,C[oe].height=K.height}else S.image.width=K.width,S.image.height=K.height,S.mipmaps=K.mipmaps;K.mipmapCount===1&&(S.minFilter=1006),S.format=K.format,S.needsUpdate=!0,r&&r(S)},a,u);return S}}),em.prototype=Ce(me(Zi.prototype),{constructor:em,load:function(e,r,a,u){var p=this,y=new _a,C=new ja(this.manager);return C.setResponseType("arraybuffer"),C.setPath(this.path),C.load(e,function(S){(S=p.parse(S))&&(S.image!==void 0?y.image=S.image:S.data!==void 0&&(y.image.width=S.width,y.image.height=S.height,y.image.data=S.data),y.wrapS=S.wrapS!==void 0?S.wrapS:1001,y.wrapT=S.wrapT!==void 0?S.wrapT:1001,y.magFilter=S.magFilter!==void 0?S.magFilter:1006,y.minFilter=S.minFilter!==void 0?S.minFilter:1006,y.anisotropy=S.anisotropy!==void 0?S.anisotropy:1,S.format!==void 0&&(y.format=S.format),S.type!==void 0&&(y.type=S.type),S.mipmaps!==void 0&&(y.mipmaps=S.mipmaps,y.minFilter=1008),S.mipmapCount===1&&(y.minFilter=1006),y.needsUpdate=!0,r&&r(y,S))},a,u),y}}),sp.prototype=Ce(me(Zi.prototype),{constructor:sp,load:function(e,r,a,u){function p(){R.removeEventListener("load",p,!1),R.removeEventListener("error",y,!1),Ig.add(e,this),r&&r(this),C.manager.itemEnd(e)}function y(N){R.removeEventListener("load",p,!1),R.removeEventListener("error",y,!1),u&&u(N),C.manager.itemError(e),C.manager.itemEnd(e)}this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var C=this,S=Ig.get(e);if(S!==void 0)return C.manager.itemStart(e),setTimeout(function(){r&&r(S),C.manager.itemEnd(e)},0),S;var R=document.createElementNS("http://www.w3.org/1999/xhtml","img");return R.addEventListener("load",p,!1),R.addEventListener("error",y,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(R.crossOrigin=this.crossOrigin),C.manager.itemStart(e),R.src=e,R}}),fd.prototype=Ce(me(Zi.prototype),{constructor:fd,load:function(e,r,a,u){function p(R){C.load(e[R],function(N){y.images[R]=N,S++,S===6&&(y.needsUpdate=!0,r&&r(y))},void 0,u)}var y=new Hc,C=new sp(this.manager);C.setCrossOrigin(this.crossOrigin),C.setPath(this.path);var S=0;for(a=0;a<e.length;++a)p(a);return y}}),_n.prototype=Ce(me(Zi.prototype),{constructor:_n,load:function(e,r,a,u){var p=new Q,y=new sp(this.manager);return y.setCrossOrigin(this.crossOrigin),y.setPath(this.path),y.load(e,function(C){p.image=C,C=0<e.search(/\.jpe?g($|\?)/i)||e.search(/^data:image\/jpeg/)===0,p.format=C?1022:1023,p.needsUpdate=!0,r!==void 0&&r(p)},a,u),p}}),Ce(zn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,r){return e=this.getUtoTmapping(e),this.getPoint(e,r)},getPoints:function(e){e===void 0&&(e=5);for(var r=[],a=0;a<=e;a++)r.push(this.getPoint(a/e));return r},getSpacedPoints:function(e){e===void 0&&(e=5);for(var r=[],a=0;a<=e;a++)r.push(this.getPointAt(a/e));return r},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r=[],a=this.getPoint(0),u,p=0;for(r.push(0),u=1;u<=e;u++){var y=this.getPoint(u/e);p+=y.distanceTo(a),r.push(p),a=y}return this.cacheArcLengths=r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,r){var a=this.getLengths(),u=a.length;r=r||e*a[u-1];for(var p=0,y=u-1,C;p<=y;)if(e=Math.floor(p+(y-p)/2),C=a[e]-r,0>C)p=e+1;else if(0<C)y=e-1;else{y=e;break}return e=y,a[e]===r?e/(u-1):(p=a[e],(e+(r-p)/(a[e+1]-p))/(u-1))},getTangent:function(e,r){var a=e-1e-4;return e+=1e-4,0>a&&(a=0),1<e&&(e=1),a=this.getPoint(a),e=this.getPoint(e),r=r||(a.isVector2?new ce:new xe),r.copy(e).sub(a).normalize(),r},getTangentAt:function(e,r){return e=this.getUtoTmapping(e),this.getTangent(e,r)},computeFrenetFrames:function(e,r){var a=new xe,u=[],p=[],y=[],C=new xe,S=new Lr,R;for(R=0;R<=e;R++){var N=R/e;u[R]=this.getTangentAt(N,new xe),u[R].normalize()}p[0]=new xe,y[0]=new xe,R=Number.MAX_VALUE,N=Math.abs(u[0].x);var z=Math.abs(u[0].y),Z=Math.abs(u[0].z);for(N<=R&&(R=N,a.set(1,0,0)),z<=R&&(R=z,a.set(0,1,0)),Z<=R&&a.set(0,0,1),C.crossVectors(u[0],a).normalize(),p[0].crossVectors(u[0],C),y[0].crossVectors(u[0],p[0]),R=1;R<=e;R++)p[R]=p[R-1].clone(),y[R]=y[R-1].clone(),C.crossVectors(u[R-1],u[R]),C.length()>Ro&&(C.normalize(),a=Math.acos(Bi.clamp(u[R-1].dot(u[R]),-1,1)),p[R].applyMatrix4(S.makeRotationAxis(C,a))),y[R].crossVectors(u[R],p[R]);if(r===!0)for(a=Math.acos(Bi.clamp(p[0].dot(p[e]),-1,1)),a/=e,0<u[0].dot(C.crossVectors(p[0],p[e]))&&(a=-a),R=1;R<=e;R++)p[R].applyMatrix4(S.makeRotationAxis(u[R],a*R)),y[R].crossVectors(u[R],p[R]);return{tangents:u,normals:p,binormals:y}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Cu.prototype=me(zn.prototype),Cu.prototype.constructor=Cu,Cu.prototype.isEllipseCurve=!0,Cu.prototype.getPoint=function(n,e){e=e||new ce;for(var r=2*Math.PI,a=this.aEndAngle-this.aStartAngle,u=Math.abs(a)<Ro;0>a;)a+=r;for(;a>r;)a-=r;a<Ro&&(a=u?0:r),this.aClockwise!==!0||u||(a=a===r?-r:a-r),r=this.aStartAngle+n*a,n=this.aX+this.xRadius*Math.cos(r);var p=this.aY+this.yRadius*Math.sin(r);return this.aRotation!==0&&(r=Math.cos(this.aRotation),a=Math.sin(this.aRotation),u=n-this.aX,p-=this.aY,n=u*r-p*a+this.aX,p=u*a+p*r+this.aY),e.set(n,p)},Cu.prototype.copy=function(n){return zn.prototype.copy.call(this,n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this},Cu.prototype.toJSON=function(){var n=zn.prototype.toJSON.call(this);return n.aX=this.aX,n.aY=this.aY,n.xRadius=this.xRadius,n.yRadius=this.yRadius,n.aStartAngle=this.aStartAngle,n.aEndAngle=this.aEndAngle,n.aClockwise=this.aClockwise,n.aRotation=this.aRotation,n},Cu.prototype.fromJSON=function(n){return zn.prototype.fromJSON.call(this,n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this},Tc.prototype=me(Cu.prototype),Tc.prototype.constructor=Tc,Tc.prototype.isArcCurve=!0;var my=new xe,b1=new tm,vy=new tm,L1=new tm;ml.prototype=me(zn.prototype),ml.prototype.constructor=ml,ml.prototype.isCatmullRomCurve3=!0,ml.prototype.getPoint=function(n,e){e=e||new xe;var r=this.points,a=r.length;n*=a-(this.closed?0:1);var u=Math.floor(n);if(n-=u,this.closed?u+=0<u?0:(Math.floor(Math.abs(u)/a)+1)*a:n===0&&u===a-1&&(u=a-2,n=1),this.closed||0<u)var p=r[(u-1)%a];else my.subVectors(r[0],r[1]).add(r[0]),p=my;var y=r[u%a],C=r[(u+1)%a];if(this.closed||u+2<a?r=r[(u+2)%a]:(my.subVectors(r[a-1],r[a-2]).add(r[a-1]),r=my),this.curveType==="centripetal"||this.curveType==="chordal"){var S=this.curveType==="chordal"?.5:.25;a=Math.pow(p.distanceToSquared(y),S),u=Math.pow(y.distanceToSquared(C),S),S=Math.pow(C.distanceToSquared(r),S),1e-4>u&&(u=1),1e-4>a&&(a=u),1e-4>S&&(S=u),b1.initNonuniformCatmullRom(p.x,y.x,C.x,r.x,a,u,S),vy.initNonuniformCatmullRom(p.y,y.y,C.y,r.y,a,u,S),L1.initNonuniformCatmullRom(p.z,y.z,C.z,r.z,a,u,S)}else this.curveType==="catmullrom"&&(b1.initCatmullRom(p.x,y.x,C.x,r.x,this.tension),vy.initCatmullRom(p.y,y.y,C.y,r.y,this.tension),L1.initCatmullRom(p.z,y.z,C.z,r.z,this.tension));return e.set(b1.calc(n),vy.calc(n),L1.calc(n)),e},ml.prototype.copy=function(n){zn.prototype.copy.call(this,n),this.points=[];for(var e=0,r=n.points.length;e<r;e++)this.points.push(n.points[e].clone());return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this},ml.prototype.toJSON=function(){var n=zn.prototype.toJSON.call(this);n.points=[];for(var e=0,r=this.points.length;e<r;e++)n.points.push(this.points[e].toArray());return n.closed=this.closed,n.curveType=this.curveType,n.tension=this.tension,n},ml.prototype.fromJSON=function(n){zn.prototype.fromJSON.call(this,n),this.points=[];for(var e=0,r=n.points.length;e<r;e++){var a=n.points[e];this.points.push(new xe().fromArray(a))}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this},Yu.prototype=me(zn.prototype),Yu.prototype.constructor=Yu,Yu.prototype.isCubicBezierCurve=!0,Yu.prototype.getPoint=function(n,e){e=e||new ce;var r=this.v0,a=this.v1,u=this.v2,p=this.v3;return e.set(ff(n,r.x,a.x,u.x,p.x),ff(n,r.y,a.y,u.y,p.y)),e},Yu.prototype.copy=function(n){return zn.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this},Yu.prototype.toJSON=function(){var n=zn.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n},Yu.prototype.fromJSON=function(n){return zn.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this},cs.prototype=me(zn.prototype),cs.prototype.constructor=cs,cs.prototype.isCubicBezierCurve3=!0,cs.prototype.getPoint=function(n,e){e=e||new xe;var r=this.v0,a=this.v1,u=this.v2,p=this.v3;return e.set(ff(n,r.x,a.x,u.x,p.x),ff(n,r.y,a.y,u.y,p.y),ff(n,r.z,a.z,u.z,p.z)),e},cs.prototype.copy=function(n){return zn.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this},cs.prototype.toJSON=function(){var n=zn.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n},cs.prototype.fromJSON=function(n){return zn.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this},Os.prototype=me(zn.prototype),Os.prototype.constructor=Os,Os.prototype.isLineCurve=!0,Os.prototype.getPoint=function(n,e){return e=e||new ce,n===1?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(n).add(this.v1)),e},Os.prototype.getPointAt=function(n,e){return this.getPoint(n,e)},Os.prototype.getTangent=function(n,e){return n=e||new ce,n=n.copy(this.v2).sub(this.v1).normalize()},Os.prototype.copy=function(n){return zn.prototype.copy.call(this,n),this.v1.copy(n.v1),this.v2.copy(n.v2),this},Os.prototype.toJSON=function(){var n=zn.prototype.toJSON.call(this);return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n},Os.prototype.fromJSON=function(n){return zn.prototype.fromJSON.call(this,n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this},wu.prototype=me(zn.prototype),wu.prototype.constructor=wu,wu.prototype.isLineCurve3=!0,wu.prototype.getPoint=function(n,e){return e=e||new xe,n===1?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(n).add(this.v1)),e},wu.prototype.getPointAt=function(n,e){return this.getPoint(n,e)},wu.prototype.copy=function(n){return zn.prototype.copy.call(this,n),this.v1.copy(n.v1),this.v2.copy(n.v2),this},wu.prototype.toJSON=function(){var n=zn.prototype.toJSON.call(this);return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n},wu.prototype.fromJSON=function(n){return zn.prototype.fromJSON.call(this,n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this},Hi.prototype=me(zn.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isQuadraticBezierCurve=!0,Hi.prototype.getPoint=function(n,e){e=e||new ce;var r=this.v0,a=this.v1,u=this.v2;return e.set(us(n,r.x,a.x,u.x),us(n,r.y,a.y,u.y)),e},Hi.prototype.copy=function(n){return zn.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this},Hi.prototype.toJSON=function(){var n=zn.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n},Hi.prototype.fromJSON=function(n){return zn.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this},_u.prototype=me(zn.prototype),_u.prototype.constructor=_u,_u.prototype.isQuadraticBezierCurve3=!0,_u.prototype.getPoint=function(n,e){e=e||new xe;var r=this.v0,a=this.v1,u=this.v2;return e.set(us(n,r.x,a.x,u.x),us(n,r.y,a.y,u.y),us(n,r.z,a.z,u.z)),e},_u.prototype.copy=function(n){return zn.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this},_u.prototype.toJSON=function(){var n=zn.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n},_u.prototype.fromJSON=function(n){return zn.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this},Ws.prototype=me(zn.prototype),Ws.prototype.constructor=Ws,Ws.prototype.isSplineCurve=!0,Ws.prototype.getPoint=function(n,e){e=e||new ce;var r=this.points,a=(r.length-1)*n;n=Math.floor(a),a-=n;var u=r[n===0?n:n-1],p=r[n],y=r[n>r.length-2?r.length-1:n+1];return r=r[n>r.length-3?r.length-1:n+2],e.set(ba(a,u.x,p.x,y.x,r.x),ba(a,u.y,p.y,y.y,r.y)),e},Ws.prototype.copy=function(n){zn.prototype.copy.call(this,n),this.points=[];for(var e=0,r=n.points.length;e<r;e++)this.points.push(n.points[e].clone());return this},Ws.prototype.toJSON=function(){var n=zn.prototype.toJSON.call(this);n.points=[];for(var e=0,r=this.points.length;e<r;e++)n.points.push(this.points[e].toArray());return n},Ws.prototype.fromJSON=function(n){zn.prototype.fromJSON.call(this,n),this.points=[];for(var e=0,r=n.points.length;e<r;e++){var a=n.points[e];this.points.push(new ce().fromArray(a))}return this};var P1=dh({__proto__:null,ArcCurve:Tc,CatmullRomCurve3:ml,CubicBezierCurve:Yu,CubicBezierCurve3:cs,EllipseCurve:Cu,LineCurve:Os,LineCurve3:wu,QuadraticBezierCurve:Hi,QuadraticBezierCurve3:_u,SplineCurve:Ws});Pl.prototype=Ce(me(zn.prototype),{constructor:Pl,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);e.equals(r)||this.curves.push(new Os(r,e))},getPoint:function(e){var r=e*this.getLength(),a=this.getCurveLengths();for(e=0;e<a.length;){if(a[e]>=r)return r=a[e]-r,e=this.curves[e],a=e.getLength(),e.getPointAt(a===0?0:1-r/a);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],r=0,a=0,u=this.curves.length;a<u;a++)r+=this.curves[a].getLength(),e.push(r);return this.cacheLengths=e},getSpacedPoints:function(e){e===void 0&&(e=40);for(var r=[],a=0;a<=e;a++)r.push(this.getPoint(a/e));return this.autoClose&&r.push(r[0]),r},getPoints:function(e){e=e||12;for(var r=[],a,u=0,p=this.curves;u<p.length;u++){var y=p[u];y=y.getPoints(y&&y.isEllipseCurve?2*e:y&&(y.isLineCurve||y.isLineCurve3)?1:y&&y.isSplineCurve?e*y.points.length:e);for(var C=0;C<y.length;C++){var S=y[C];a&&a.equals(S)||(r.push(S),a=S)}}return this.autoClose&&1<r.length&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(e){zn.prototype.copy.call(this,e),this.curves=[];for(var r=0,a=e.curves.length;r<a;r++)this.curves.push(e.curves[r].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=zn.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var r=0,a=this.curves.length;r<a;r++)e.curves.push(this.curves[r].toJSON());return e},fromJSON:function(e){zn.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var r=0,a=e.curves.length;r<a;r++){var u=e.curves[r];this.curves.push(new P1[u.type]().fromJSON(u))}return this}}),$s.prototype=Ce(me(Pl.prototype),{constructor:$s,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var r=1,a=e.length;r<a;r++)this.lineTo(e[r].x,e[r].y);return this},moveTo:function(e,r){return this.currentPoint.set(e,r),this},lineTo:function(e,r){var a=new Os(this.currentPoint.clone(),new ce(e,r));return this.curves.push(a),this.currentPoint.set(e,r),this},quadraticCurveTo:function(e,r,a,u){return e=new Hi(this.currentPoint.clone(),new ce(e,r),new ce(a,u)),this.curves.push(e),this.currentPoint.set(a,u),this},bezierCurveTo:function(e,r,a,u,p,y){return e=new Yu(this.currentPoint.clone(),new ce(e,r),new ce(a,u),new ce(p,y)),this.curves.push(e),this.currentPoint.set(p,y),this},splineThru:function(e){var r=[this.currentPoint.clone()].concat(e);return r=new Ws(r),this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,r,a,u,p,y){return this.absarc(e+this.currentPoint.x,r+this.currentPoint.y,a,u,p,y),this},absarc:function(e,r,a,u,p,y){return this.absellipse(e,r,a,a,u,p,y),this},ellipse:function(e,r,a,u,p,y,C,S){return this.absellipse(e+this.currentPoint.x,r+this.currentPoint.y,a,u,p,y,C,S),this},absellipse:function(e,r,a,u,p,y,C,S){return e=new Cu(e,r,a,u,p,y,C,S),0<this.curves.length&&(r=e.getPoint(0),r.equals(this.currentPoint)||this.lineTo(r.x,r.y)),this.curves.push(e),e=e.getPoint(1),this.currentPoint.copy(e),this},copy:function(e){return Pl.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Pl.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Pl.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Zu.prototype=Ce(me($s.prototype),{constructor:Zu,getPointsHoles:function(e){for(var r=[],a=0,u=this.holes.length;a<u;a++)r[a]=this.holes[a].getPoints(e);return r},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){$s.prototype.copy.call(this,e),this.holes=[];for(var r=0,a=e.holes.length;r<a;r++)this.holes.push(e.holes[r].clone());return this},toJSON:function(){var e=$s.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var r=0,a=this.holes.length;r<a;r++)e.holes.push(this.holes[r].toJSON());return e},fromJSON:function(e){$s.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var r=0,a=e.holes.length;r<a;r++){var u=e.holes[r];this.holes.push(new $s().fromJSON(u))}return this}}),yo.prototype=Ce(me(Cr.prototype),{constructor:yo,isLight:!0,copy:function(e){return Cr.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return e=Cr.prototype.toJSON.call(this,e),e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}),rm.prototype=Ce(me(yo.prototype),{constructor:rm,isHemisphereLight:!0,copy:function(e){return yo.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Ce(eu.prototype,{_projScreenMatrix:new Lr,_lightPositionWorld:new xe,_lookTarget:new xe,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var r=this.camera,a=this.matrix,u=this._projScreenMatrix,p=this._lookTarget,y=this._lightPositionWorld;y.setFromMatrixPosition(e.matrixWorld),r.position.copy(y),p.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(p),r.updateMatrixWorld(),u.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(u),a.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),a.multiply(r.projectionMatrix),a.multiply(r.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return this.bias!==0&&(e.bias=this.bias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),dd.prototype=Ce(me(eu.prototype),{constructor:dd,isSpotLightShadow:!0,updateMatrices:function(e){var r=this.camera,a=2*Bi.RAD2DEG*e.angle,u=this.mapSize.width/this.mapSize.height,p=e.distance||r.far;(a!==r.fov||u!==r.aspect||p!==r.far)&&(r.fov=a,r.aspect=u,r.far=p,r.updateProjectionMatrix()),eu.prototype.updateMatrices.call(this,e)}}),tg.prototype=Ce(me(yo.prototype),{constructor:tg,isSpotLight:!0,copy:function(e){return yo.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Vi.prototype=Ce(me(eu.prototype),{constructor:Vi,isPointLightShadow:!0,updateMatrices:function(e,r){r===void 0&&(r=0);var a=this.camera,u=this.matrix,p=this._lightPositionWorld,y=this._lookTarget,C=this._projScreenMatrix;p.setFromMatrixPosition(e.matrixWorld),a.position.copy(p),y.copy(a.position),y.add(this._cubeDirections[r]),a.up.copy(this._cubeUps[r]),a.lookAt(y),a.updateMatrixWorld(),u.makeTranslation(-p.x,-p.y,-p.z),C.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(C)}}),Ih.prototype=Ce(me(yo.prototype),{constructor:Ih,isPointLight:!0,copy:function(e){return yo.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Mu.prototype=Ce(me(ss.prototype),{constructor:Mu,isOrthographicCamera:!0,copy:function(e,r){return ss.prototype.copy.call(this,e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Ce({},e.view),this},setViewOffset:function(e,r,a,u,p,y){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=a,this.view.offsetY=u,this.view.width=p,this.view.height=y,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,u=(this.top+this.bottom)/2,p=a-e;a+=e,e=u+r,r=u-r,this.view!==null&&this.view.enabled&&(u=(this.right-this.left)/this.view.fullWidth/this.zoom,r=(this.top-this.bottom)/this.view.fullHeight/this.zoom,p+=u*this.view.offsetX,a=p+u*this.view.width,e-=r*this.view.offsetY,r=e-r*this.view.height),this.projectionMatrix.makeOrthographic(p,a,e,r,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return e=Cr.prototype.toJSON.call(this,e),e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Ce({},this.view)),e}}),nm.prototype=Ce(me(eu.prototype),{constructor:nm,isDirectionalLightShadow:!0,updateMatrices:function(e){eu.prototype.updateMatrices.call(this,e)}}),Ee.prototype=Ce(me(yo.prototype),{constructor:Ee,isDirectionalLight:!0,copy:function(e){return yo.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Jc.prototype=Ce(me(yo.prototype),{constructor:Jc,isAmbientLight:!0}),lp.prototype=Ce(me(yo.prototype),{constructor:lp,isRectAreaLight:!0,copy:function(e){return yo.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){return e=yo.prototype.toJSON.call(this,e),e.object.width=this.width,e.object.height=this.height,e}}),Ce(tu.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var r=0;9>r;r++)this.coefficients[r].copy(e[r]);return this},zero:function(){for(var e=0;9>e;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,r){var a=e.x,u=e.y;e=e.z;var p=this.coefficients;return r.copy(p[0]).multiplyScalar(.282095),r.addScaledVector(p[1],.488603*u),r.addScaledVector(p[2],.488603*e),r.addScaledVector(p[3],.488603*a),r.addScaledVector(p[4],1.092548*a*u),r.addScaledVector(p[5],1.092548*u*e),r.addScaledVector(p[6],.315392*(3*e*e-1)),r.addScaledVector(p[7],1.092548*a*e),r.addScaledVector(p[8],.546274*(a*a-u*u)),r},getIrradianceAt:function(e,r){var a=e.x,u=e.y;e=e.z;var p=this.coefficients;return r.copy(p[0]).multiplyScalar(.886227),r.addScaledVector(p[1],1.023328*u),r.addScaledVector(p[2],1.023328*e),r.addScaledVector(p[3],1.023328*a),r.addScaledVector(p[4],.858086*a*u),r.addScaledVector(p[5],.858086*u*e),r.addScaledVector(p[6],.743125*e*e-.247708),r.addScaledVector(p[7],.858086*a*e),r.addScaledVector(p[8],.429043*(a*a-u*u)),r},add:function(e){for(var r=0;9>r;r++)this.coefficients[r].add(e.coefficients[r]);return this},addScaledSH:function(e,r){for(var a=0;9>a;a++)this.coefficients[a].addScaledVector(e.coefficients[a],r);return this},scale:function(e){for(var r=0;9>r;r++)this.coefficients[r].multiplyScalar(e);return this},lerp:function(e,r){for(var a=0;9>a;a++)this.coefficients[a].lerp(e.coefficients[a],r);return this},equals:function(e){for(var r=0;9>r;r++)if(!this.coefficients[r].equals(e.coefficients[r]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(e,r){r===void 0&&(r=0);for(var a=this.coefficients,u=0;9>u;u++)a[u].fromArray(e,r+3*u);return this},toArray:function(e,r){e===void 0&&(e=[]),r===void 0&&(r=0);for(var a=this.coefficients,u=0;9>u;u++)a[u].toArray(e,r+3*u);return e}}),Ce(tu,{getBasisAt:function(e,r){var a=e.x,u=e.y;e=e.z,r[0]=.282095,r[1]=.488603*u,r[2]=.488603*e,r[3]=.488603*a,r[4]=1.092548*a*u,r[5]=1.092548*u*e,r[6]=.315392*(3*e*e-1),r[7]=1.092548*a*e,r[8]=.546274*(a*a-u*u)}}),ti.prototype=Ce(me(yo.prototype),{constructor:ti,isLightProbe:!0,copy:function(e){return yo.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){return e=yo.prototype.toJSON.call(this,e),e.object.sh=this.sh.toArray(),e}}),ru.prototype=Ce(me(Zi.prototype),{constructor:ru,load:function(e,r,a,u){var p=this,y=new ja(p.manager);y.setPath(p.path),y.load(e,function(C){try{r(p.parse(JSON.parse(C)))}catch(S){u?u(S):console.error(S),p.manager.itemError(e)}},a,u)},parse:function(e){function r(S){return a[S]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",S),a[S]}var a=this.textures,u=new E1[e.type];if(e.uuid!==void 0&&(u.uuid=e.uuid),e.name!==void 0&&(u.name=e.name),e.color!==void 0&&u.color.setHex(e.color),e.roughness!==void 0&&(u.roughness=e.roughness),e.metalness!==void 0&&(u.metalness=e.metalness),e.sheen!==void 0&&(u.sheen=new vt().setHex(e.sheen)),e.emissive!==void 0&&u.emissive.setHex(e.emissive),e.specular!==void 0&&u.specular.setHex(e.specular),e.shininess!==void 0&&(u.shininess=e.shininess),e.clearcoat!==void 0&&(u.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(u.clearcoatRoughness=e.clearcoatRoughness),e.fog!==void 0&&(u.fog=e.fog),e.flatShading!==void 0&&(u.flatShading=e.flatShading),e.blending!==void 0&&(u.blending=e.blending),e.combine!==void 0&&(u.combine=e.combine),e.side!==void 0&&(u.side=e.side),e.opacity!==void 0&&(u.opacity=e.opacity),e.transparent!==void 0&&(u.transparent=e.transparent),e.alphaTest!==void 0&&(u.alphaTest=e.alphaTest),e.depthTest!==void 0&&(u.depthTest=e.depthTest),e.depthWrite!==void 0&&(u.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(u.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(u.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(u.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(u.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(u.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(u.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(u.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(u.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(u.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(u.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(u.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(u.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(u.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(u.rotation=e.rotation),e.linewidth!==1&&(u.linewidth=e.linewidth),e.dashSize!==void 0&&(u.dashSize=e.dashSize),e.gapSize!==void 0&&(u.gapSize=e.gapSize),e.scale!==void 0&&(u.scale=e.scale),e.polygonOffset!==void 0&&(u.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(u.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(u.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(u.skinning=e.skinning),e.morphTargets!==void 0&&(u.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(u.morphNormals=e.morphNormals),e.dithering!==void 0&&(u.dithering=e.dithering),e.vertexTangents!==void 0&&(u.vertexTangents=e.vertexTangents),e.visible!==void 0&&(u.visible=e.visible),e.toneMapped!==void 0&&(u.toneMapped=e.toneMapped),e.userData!==void 0&&(u.userData=e.userData),e.vertexColors!==void 0&&(u.vertexColors=typeof e.vertexColors=="number"?0<e.vertexColors:e.vertexColors),e.uniforms!==void 0)for(var p in e.uniforms){var y=e.uniforms[p];switch(u.uniforms[p]={},y.type){case"t":u.uniforms[p].value=r(y.value);break;case"c":u.uniforms[p].value=new vt().setHex(y.value);break;case"v2":u.uniforms[p].value=new ce().fromArray(y.value);break;case"v3":u.uniforms[p].value=new xe().fromArray(y.value);break;case"v4":u.uniforms[p].value=new Oe().fromArray(y.value);break;case"m3":u.uniforms[p].value=new Ne().fromArray(y.value);case"m4":u.uniforms[p].value=new Lr().fromArray(y.value);break;default:u.uniforms[p].value=y.value}}if(e.defines!==void 0&&(u.defines=e.defines),e.vertexShader!==void 0&&(u.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(u.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(var C in e.extensions)u.extensions[C]=e.extensions[C];return e.shading!==void 0&&(u.flatShading=e.shading===1),e.size!==void 0&&(u.size=e.size),e.sizeAttenuation!==void 0&&(u.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(u.map=r(e.map)),e.matcap!==void 0&&(u.matcap=r(e.matcap)),e.alphaMap!==void 0&&(u.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(u.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(u.bumpScale=e.bumpScale),e.normalMap!==void 0&&(u.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(u.normalMapType=e.normalMapType),e.normalScale!==void 0&&(p=e.normalScale,Array.isArray(p)===!1&&(p=[p,p]),u.normalScale=new ce().fromArray(p)),e.displacementMap!==void 0&&(u.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(u.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(u.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(u.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(u.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(u.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(u.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(u.specularMap=r(e.specularMap)),e.envMap!==void 0&&(u.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(u.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(u.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(u.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(u.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(u.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(u.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(u.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(u.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(u.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(u.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(u.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(u.clearcoatNormalScale=new ce().fromArray(e.clearcoatNormalScale)),u},setTextures:function(e){return this.textures=e,this}});var Eg={decodeText:function(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);for(var r="",a=0,u=e.length;a<u;a++)r+=String.fromCharCode(e[a]);try{return decodeURIComponent(escape(r))}catch(p){return r}},extractUrlBase:function(e){var r=e.lastIndexOf("/");return r===-1?"./":e.substr(0,r+1)}};im.prototype=Ce(me($r.prototype),{constructor:im,isInstancedBufferGeometry:!0,copy:function(e){return $r.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e=$r.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),gv.prototype=Ce(me(Jr.prototype),{constructor:gv,isInstancedBufferAttribute:!0,copy:function(e){return Jr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=Jr.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),qc.prototype=Ce(me(Zi.prototype),{constructor:qc,load:function(e,r,a,u){var p=this,y=new ja(p.manager);y.setPath(p.path),y.load(e,function(C){try{r(p.parse(JSON.parse(C)))}catch(S){u?u(S):console.error(S),p.manager.itemError(e)}},a,u)},parse:function(e){var r=e.isInstancedBufferGeometry?new im:new $r,a=e.data.index;if(a!==void 0){var u=new S0[a.type](a.array);r.setIndex(new Jr(u,1))}a=e.data.attributes;for(var p in a){var y=a[p];u=new S0[y.type](y.array),u=new(y.isInstancedBufferAttribute?gv:Jr)(u,y.itemSize,y.normalized),y.name!==void 0&&(u.name=y.name),r.setAttribute(p,u)}var C=e.data.morphAttributes;if(C)for(p in C){var S=C[p],R=[];a=0;for(var N=S.length;a<N;a++)y=S[a],u=new S0[y.type](y.array),u=new Jr(u,y.itemSize,y.normalized),y.name!==void 0&&(u.name=y.name),R.push(u);r.morphAttributes[p]=R}if(e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0),p=e.data.groups||e.data.drawcalls||e.data.offsets,p!==void 0)for(a=0,y=p.length;a!==y;++a)u=p[a],r.addGroup(u.start,u.count,u.materialIndex);return a=e.data.boundingSphere,a!==void 0&&(p=new xe,a.center!==void 0&&p.fromArray(a.center),r.boundingSphere=new Ko(p,a.radius)),e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}});var S0={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};df.prototype=Ce(me(Zi.prototype),{constructor:df,load:function(e,r,a,u){var p=this,y=this.path===""?Eg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||y,y=new ja(p.manager),y.setPath(this.path),y.load(e,function(C){var S=null;try{S=JSON.parse(C)}catch(R){u!==void 0&&u(R),console.error("THREE:ObjectLoader: Can't parse "+e+".",R.message);return}C=S.metadata,C===void 0||C.type===void 0||C.type.toLowerCase()==="geometry"?console.error("THREE.ObjectLoader: Can't load "+e):p.parse(S,r)},a,u)},parse:function(e,r){var a=this.parseShape(e.shapes);a=this.parseGeometries(e.geometries,a);var u=this.parseImages(e.images,function(){r!==void 0&&r(p)});u=this.parseTextures(e.textures,u),u=this.parseMaterials(e.materials,u);var p=this.parseObject(e.object,a,u);return e.animations&&(p.animations=this.parseAnimations(e.animations)),e.images!==void 0&&e.images.length!==0||r===void 0||r(p),p},parseShape:function(e){var r={};if(e!==void 0)for(var a=0,u=e.length;a<u;a++){var p=new Zu().fromJSON(e[a]);r[p.uuid]=p}return r},parseGeometries:function(e,r){var a={};if(e!==void 0)for(var u=new qc,p=0,y=e.length;p<y;p++){var C=e[p];switch(C.type){case"PlaneGeometry":case"PlaneBufferGeometry":var S=new ac[C.type](C.width,C.height,C.widthSegments,C.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":S=new ac[C.type](C.width,C.height,C.depth,C.widthSegments,C.heightSegments,C.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":S=new ac[C.type](C.radius,C.segments,C.thetaStart,C.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":S=new ac[C.type](C.radiusTop,C.radiusBottom,C.height,C.radialSegments,C.heightSegments,C.openEnded,C.thetaStart,C.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":S=new ac[C.type](C.radius,C.height,C.radialSegments,C.heightSegments,C.openEnded,C.thetaStart,C.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":S=new ac[C.type](C.radius,C.widthSegments,C.heightSegments,C.phiStart,C.phiLength,C.thetaStart,C.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":S=new ac[C.type](C.radius,C.detail);break;case"RingGeometry":case"RingBufferGeometry":S=new ac[C.type](C.innerRadius,C.outerRadius,C.thetaSegments,C.phiSegments,C.thetaStart,C.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":S=new ac[C.type](C.radius,C.tube,C.radialSegments,C.tubularSegments,C.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":S=new ac[C.type](C.radius,C.tube,C.tubularSegments,C.radialSegments,C.p,C.q);break;case"TubeGeometry":case"TubeBufferGeometry":S=new ac[C.type](new P1[C.path.type]().fromJSON(C.path),C.tubularSegments,C.radius,C.radialSegments,C.closed);break;case"LatheGeometry":case"LatheBufferGeometry":S=new ac[C.type](C.points,C.segments,C.phiStart,C.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":S=new ac[C.type](C.vertices,C.indices,C.radius,C.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":S=[];for(var R=0,N=C.shapes.length;R<N;R++){var z=r[C.shapes[R]];S.push(z)}S=new ac[C.type](S,C.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(S=[],R=0,N=C.shapes.length;R<N;R++)z=r[C.shapes[R]],S.push(z);R=C.options.extrudePath,R!==void 0&&(C.options.extrudePath=new P1[R.type]().fromJSON(R)),S=new ac[C.type](S,C.options);break;case"BufferGeometry":case"InstancedBufferGeometry":S=u.parse(C);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+C.type+'"');continue}S.uuid=C.uuid,C.name!==void 0&&(S.name=C.name),S.isBufferGeometry===!0&&C.userData!==void 0&&(S.userData=C.userData),a[C.uuid]=S}return a},parseMaterials:function(e,r){var a={},u={};if(e!==void 0){var p=new ru;p.setTextures(r),r=0;for(var y=e.length;r<y;r++){var C=e[r];if(C.type==="MultiMaterial"){for(var S=[],R=0;R<C.materials.length;R++){var N=C.materials[R];a[N.uuid]===void 0&&(a[N.uuid]=p.parse(N)),S.push(a[N.uuid])}u[C.uuid]=S}else a[C.uuid]===void 0&&(a[C.uuid]=p.parse(C)),u[C.uuid]=a[C.uuid]}}return u},parseAnimations:function(e){for(var r=[],a=0;a<e.length;a++){var u=e[a],p=Ta.parse(u);u.uuid!==void 0&&(p.uuid=u.uuid),r.push(p)}return r},parseImages:function(e,r){function a(K){return u.manager.itemStart(K),y.load(K,function(){u.manager.itemEnd(K)},void 0,function(){u.manager.itemError(K),u.manager.itemEnd(K)})}var u=this,p={};if(e!==void 0&&0<e.length){r=new Qg(r);var y=new sp(r);y.setCrossOrigin(this.crossOrigin),r=0;for(var C=e.length;r<C;r++){var S=e[r],R=S.url;if(Array.isArray(R)){p[S.uuid]=[];for(var N=0,z=R.length;N<z;N++){var Z=R[N];Z=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Z)?Z:u.resourcePath+Z,p[S.uuid].push(a(Z))}}else Z=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(S.url)?S.url:u.resourcePath+S.url,p[S.uuid]=a(Z)}}return p},parseTextures:function(e,r){function a(R,N){return typeof R=="number"?R:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",R),N[R])}var u={};if(e!==void 0)for(var p=0,y=e.length;p<y;p++){var C=e[p];C.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',C.uuid),r[C.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",C.image);var S=Array.isArray(r[C.image])?new Hc(r[C.image]):new Q(r[C.image]);S.needsUpdate=!0,S.uuid=C.uuid,C.name!==void 0&&(S.name=C.name),C.mapping!==void 0&&(S.mapping=a(C.mapping,R1)),C.offset!==void 0&&S.offset.fromArray(C.offset),C.repeat!==void 0&&S.repeat.fromArray(C.repeat),C.center!==void 0&&S.center.fromArray(C.center),C.rotation!==void 0&&(S.rotation=C.rotation),C.wrap!==void 0&&(S.wrapS=a(C.wrap[0],tA),S.wrapT=a(C.wrap[1],tA)),C.format!==void 0&&(S.format=C.format),C.type!==void 0&&(S.type=C.type),C.encoding!==void 0&&(S.encoding=C.encoding),C.minFilter!==void 0&&(S.minFilter=a(C.minFilter,rA)),C.magFilter!==void 0&&(S.magFilter=a(C.magFilter,rA)),C.anisotropy!==void 0&&(S.anisotropy=C.anisotropy),C.flipY!==void 0&&(S.flipY=C.flipY),C.premultiplyAlpha!==void 0&&(S.premultiplyAlpha=C.premultiplyAlpha),C.unpackAlignment!==void 0&&(S.unpackAlignment=C.unpackAlignment),u[C.uuid]=S}return u},parseObject:function(e,r,a){function u(N){return r[N]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",N),r[N]}function p(N){if(N!==void 0){if(Array.isArray(N)){for(var z=[],Z=0,K=N.length;Z<K;Z++){var ne=N[Z];a[ne]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ne),z.push(a[ne])}return z}return a[N]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",N),a[N]}}switch(e.type){case"Scene":var y=new Lo;e.background!==void 0&&ol(e.background)&&(y.background=new vt(e.background)),e.fog!==void 0&&(e.fog.type==="Fog"?y.fog=new fl(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(y.fog=new $p(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":y=new qa(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(y.focus=e.focus),e.zoom!==void 0&&(y.zoom=e.zoom),e.filmGauge!==void 0&&(y.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(y.filmOffset=e.filmOffset),e.view!==void 0&&(y.view=Ce({},e.view));break;case"OrthographicCamera":y=new Mu(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(y.zoom=e.zoom),e.view!==void 0&&(y.view=Ce({},e.view));break;case"AmbientLight":y=new Jc(e.color,e.intensity);break;case"DirectionalLight":y=new Ee(e.color,e.intensity);break;case"PointLight":y=new Ih(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":y=new lp(e.color,e.intensity,e.width,e.height);break;case"SpotLight":y=new tg(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":y=new rm(e.color,e.groundColor,e.intensity);break;case"LightProbe":y=new ti().fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":y=u(e.geometry);var C=p(e.material);y=new oa(y,C);break;case"InstancedMesh":y=u(e.geometry),C=p(e.material);var S=e.instanceMatrix;y=new Fa(y,C,e.count),y.instanceMatrix=new Jr(new Float32Array(S.array),16);break;case"LOD":y=new Xr;break;case"Line":y=new ks(u(e.geometry),p(e.material),e.mode);break;case"LineLoop":y=new Kd(u(e.geometry),p(e.material));break;case"LineSegments":y=new da(u(e.geometry),p(e.material));break;case"PointCloud":case"Points":y=new Mh(u(e.geometry),p(e.material));break;case"Sprite":y=new pu(p(e.material));break;case"Group":y=new Ha;break;default:y=new Cr}if(y.uuid=e.uuid,e.name!==void 0&&(y.name=e.name),e.matrix!==void 0?(y.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(y.matrixAutoUpdate=e.matrixAutoUpdate),y.matrixAutoUpdate&&y.matrix.decompose(y.position,y.quaternion,y.scale)):(e.position!==void 0&&y.position.fromArray(e.position),e.rotation!==void 0&&y.rotation.fromArray(e.rotation),e.quaternion!==void 0&&y.quaternion.fromArray(e.quaternion),e.scale!==void 0&&y.scale.fromArray(e.scale)),e.castShadow!==void 0&&(y.castShadow=e.castShadow),e.receiveShadow!==void 0&&(y.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(y.shadow.bias=e.shadow.bias),e.shadow.radius!==void 0&&(y.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&y.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(y.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(y.visible=e.visible),e.frustumCulled!==void 0&&(y.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(y.renderOrder=e.renderOrder),e.userData!==void 0&&(y.userData=e.userData),e.layers!==void 0&&(y.layers.mask=e.layers),e.children!==void 0)for(S=e.children,C=0;C<S.length;C++)y.add(this.parseObject(S[C],r,a));if(e.type==="LOD")for(e.autoUpdate!==void 0&&(y.autoUpdate=e.autoUpdate),e=e.levels,S=0;S<e.length;S++){C=e[S];var R=y.getObjectByProperty("uuid",C.object);R!==void 0&&y.addLevel(R,C.distance)}return y}});var R1={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},tA={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},rA={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};La.prototype=Ce(me(Zi.prototype),{constructor:La,setOptions:function(e){return this.options=e,this},load:function(e,r,a,u){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var p=this,y=Ig.get(e);if(y!==void 0)return p.manager.itemStart(e),setTimeout(function(){r&&r(y),p.manager.itemEnd(e)},0),y;fetch(e).then(function(C){return C.blob()}).then(function(C){return p.options===void 0?createImageBitmap(C):createImageBitmap(C,p.options)}).then(function(C){Ig.add(e,C),r&&r(C),p.manager.itemEnd(e)}).catch(function(C){u&&u(C),p.manager.itemError(e),p.manager.itemEnd(e)}),p.manager.itemStart(e)}}),Ce(up.prototype,{moveTo:function(e,r){return this.currentPath=new $s,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,r),this},lineTo:function(e,r){return this.currentPath.lineTo(e,r),this},quadraticCurveTo:function(e,r,a,u){return this.currentPath.quadraticCurveTo(e,r,a,u),this},bezierCurveTo:function(e,r,a,u,p,y){return this.currentPath.bezierCurveTo(e,r,a,u,p,y),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,r){function a(je){for(var Ie=[],ze=0,et=je.length;ze<et;ze++){var xt=je[ze],gt=new Zu;gt.curves=xt.curves,Ie.push(gt)}return Ie}function u(je,Ie){for(var ze=Ie.length,et=!1,xt=ze-1,gt=0;gt<ze;xt=gt++){var We=Ie[xt],Rt=Ie[gt],Pt=Rt.x-We.x,pr=Rt.y-We.y;if(Math.abs(pr)>Ro){if(0>pr&&(We=Ie[gt],Pt=-Pt,Rt=Ie[xt],pr=-pr),!(je.y<We.y||je.y>Rt.y))if(je.y===We.y){if(je.x===We.x)return!0}else{if(xt=pr*(je.x-We.x)-Pt*(je.y-We.y),xt===0)return!0;0>xt||(et=!et)}}else if(je.y===We.y&&(Rt.x<=je.x&&je.x<=We.x||We.x<=je.x&&je.x<=Rt.x))return!0}return et}var p=Tg.isClockWise,y=this.subPaths;if(y.length===0)return[];if(r===!0)return a(y);if(r=[],y.length===1){var C=y[0],S=new Zu;return S.curves=C.curves,r.push(S),r}var R=!p(y[0].getPoints());R=e?!R:R,S=[];var N=[],z=[],Z=0;N[Z]=void 0,z[Z]=[];for(var K=0,ne=y.length;K<ne;K++){C=y[K];var oe=C.getPoints(),be=p(oe);(be=e?!be:be)?(!R&&N[Z]&&Z++,N[Z]={s:new Zu,p:oe},N[Z].s.curves=C.curves,R&&Z++,z[Z]=[]):z[Z].push({h:C,p:oe[0]})}if(!N[0])return a(y);if(1<N.length){for(K=!1,e=[],p=0,y=N.length;p<y;p++)S[p]=[];for(p=0,y=N.length;p<y;p++)for(C=z[p],be=0;be<C.length;be++){for(R=C[be],Z=!0,oe=0;oe<N.length;oe++)u(R.p,N[oe].p)&&(p!==oe&&e.push({froms:p,tos:oe,hole:be}),Z?(Z=!1,S[oe].push(R)):K=!0);Z&&S[p].push(R)}0<e.length&&(K||(z=S))}for(K=0,p=N.length;K<p;K++)for(S=N[K].s,r.push(S),e=z[K],y=0,C=e.length;y<C;y++)S.holes.push(e[y].h);return r}}),Ce(cp.prototype,{isFont:!0,generateShapes:function(e,r){r===void 0&&(r=100);var a=[],u=r;r=this.data;var p=lh?lh(e):String(e).split("");u/=r.resolution;var y=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*u;e=[];for(var C=0,S=0,R=0;R<p.length;R++){var N=p[R];if(N===`
`)C=0,S-=y;else{var z=N;N=u;var Z=C,K=S,ne=r,oe=ne.glyphs[z]||ne.glyphs["?"];if(oe){if(z=new up,oe.o){ne=oe._cachedOutline||(oe._cachedOutline=oe.o.split(" "));for(var be=0,je=ne.length;be<je;)switch(ne[be++]){case"m":var Ie=ne[be++]*N+Z,ze=ne[be++]*N+K;z.moveTo(Ie,ze);break;case"l":Ie=ne[be++]*N+Z,ze=ne[be++]*N+K,z.lineTo(Ie,ze);break;case"q":var et=ne[be++]*N+Z,xt=ne[be++]*N+K,gt=ne[be++]*N+Z,We=ne[be++]*N+K;z.quadraticCurveTo(gt,We,et,xt);break;case"b":et=ne[be++]*N+Z,xt=ne[be++]*N+K,gt=ne[be++]*N+Z,We=ne[be++]*N+K,Ie=ne[be++]*N+Z,ze=ne[be++]*N+K,z.bezierCurveTo(gt,We,Ie,ze,et,xt)}}N={offsetX:oe.ha*N,path:z}}else console.error('THREE.Font: character "'+z+'" does not exists in font family '+ne.familyName+"."),N=void 0;C+=N.offsetX,e.push(N.path)}}for(r=0,p=e.length;r<p;r++)Array.prototype.push.apply(a,e[r].toShapes());return a}}),pf.prototype=Ce(me(Zi.prototype),{constructor:pf,load:function(e,r,a,u){var p=this,y=new ja(this.manager);y.setPath(this.path),y.load(e,function(C){try{var S=JSON.parse(C)}catch(R){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),S=JSON.parse(C.substring(65,C.length-2))}C=p.parse(S),r&&r(C)},a,u)},parse:function(e){return new cp(e)}});var yy,nA={getContext:function(){return yy===void 0&&(yy=new(window.AudioContext||window.webkitAudioContext)),yy},setContext:function(e){yy=e}};Ku.prototype=Ce(me(Zi.prototype),{constructor:Ku,load:function(e,r,a,u){var p=this,y=new ja(p.manager);y.setResponseType("arraybuffer"),y.setPath(p.path),y.load(e,function(C){try{var S=C.slice(0);nA.getContext().decodeAudioData(S,function(R){r(R)})}catch(R){u?u(R):console.error(R),p.manager.itemError(e)}},a,u)}}),gf.prototype=Ce(me(ti.prototype),{constructor:gf,isHemisphereLightProbe:!0,copy:function(e){return ti.prototype.copy.call(this,e),this},toJSON:function(e){return ti.prototype.toJSON.call(this,e)}}),nu.prototype=Ce(me(ti.prototype),{constructor:nu,isAmbientLightProbe:!0,copy:function(e){return ti.prototype.copy.call(this,e),this},toJSON:function(e){return ti.prototype.toJSON.call(this,e)}});var iA=new Lr,oA=new Lr;Ce(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new qa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new qa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function(e){var r=this._cache;if(r.focus!==e.focus||r.fov!==e.fov||r.aspect!==e.aspect*this.aspect||r.near!==e.near||r.far!==e.far||r.zoom!==e.zoom||r.eyeSep!==this.eyeSep){r.focus=e.focus,r.fov=e.fov,r.aspect=e.aspect*this.aspect,r.near=e.near,r.far=e.far,r.zoom=e.zoom,r.eyeSep=this.eyeSep;var a=e.projectionMatrix.clone(),u=r.eyeSep/2,p=u*r.near/r.focus,y=r.near*Math.tan(Bi.DEG2RAD*r.fov*.5)/r.zoom;oA.elements[12]=-u,iA.elements[12]=u,u=-y*r.aspect+p;var C=y*r.aspect+p;a.elements[0]=2*r.near/(C-u),a.elements[8]=(C+u)/(C-u),this.cameraL.projectionMatrix.copy(a),u=-y*r.aspect-p,C=y*r.aspect-p,a.elements[0]=2*r.near/(C-u),a.elements[8]=(C+u)/(C-u),this.cameraR.projectionMatrix.copy(a)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(oA),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(iA)}}),Ce(Rl.prototype,{start:function(){this.oldTime=this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var r=(typeof performance=="undefined"?Date:performance).now();e=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=e}return e}});var Pm=new xe,aA=new Er,V2=new xe,Rm=new xe;rg.prototype=Ce(me(Cr.prototype),{constructor:rg,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){Cr.prototype.updateMatrixWorld.call(this,e),e=this.context.listener;var r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Pm,aA,V2),Rm.set(0,0,-1).applyQuaternion(aA),e.positionX){var a=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Pm.x,a),e.positionY.linearRampToValueAtTime(Pm.y,a),e.positionZ.linearRampToValueAtTime(Pm.z,a),e.forwardX.linearRampToValueAtTime(Rm.x,a),e.forwardY.linearRampToValueAtTime(Rm.y,a),e.forwardZ.linearRampToValueAtTime(Rm.z,a),e.upX.linearRampToValueAtTime(r.x,a),e.upY.linearRampToValueAtTime(r.y,a),e.upZ.linearRampToValueAtTime(r.z,a)}else e.setPosition(Pm.x,Pm.y,Pm.z),e.setOrientation(Rm.x,Rm.y,Rm.z,r.x,r.y,r.z)}}),mf.prototype=Ce(me(Cr.prototype),{constructor:mf,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(e===void 0&&(e=0),this.isPlaying===!0)console.warn("THREE.Audio: Audio is already playing.");else if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+e,e=this.context.createBufferSource(),e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,r=this.filters.length;e<r;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,r=this.filters.length;e<r;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Om=new xe,sA=new Er,W2=new xe,Dm=new xe;iu.prototype=Ce(me(mf.prototype),{constructor:iu,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,r,a){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=r,this.panner.coneOuterGain=a,this},updateMatrixWorld:function(e){if(Cr.prototype.updateMatrixWorld.call(this,e),this.hasPlaybackControl!==!0||this.isPlaying!==!1)if(this.matrixWorld.decompose(Om,sA,W2),Dm.set(0,0,1).applyQuaternion(sA),e=this.panner,e.positionX){var r=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Om.x,r),e.positionY.linearRampToValueAtTime(Om.y,r),e.positionZ.linearRampToValueAtTime(Om.z,r),e.orientationX.linearRampToValueAtTime(Dm.x,r),e.orientationY.linearRampToValueAtTime(Dm.y,r),e.orientationZ.linearRampToValueAtTime(Dm.z,r)}else e.setPosition(Om.x,Om.y,Om.z),e.setOrientation(Dm.x,Dm.y,Dm.z)}}),Ce(mv.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,r=this.getFrequencyData(),a=0;a<r.length;a++)e+=r[a];return e/r.length}}),Ce(pd.prototype,{accumulate:function(e,r){var a=this.buffer,u=this.valueSize;e=e*u+u;var p=this.cumulativeWeight;if(p===0){for(p=0;p!==u;++p)a[e+p]=a[p];p=r}else p+=r,this._mixBufferRegion(a,e,0,r/p,u);this.cumulativeWeight=p},accumulateAdditive:function(e){var r=this.buffer,a=this.valueSize,u=a*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(r,u,0,e,a),this.cumulativeWeightAdditive+=e},apply:function(e){var r=this.valueSize,a=this.buffer;e=e*r+r;var u=this.cumulativeWeight,p=this.cumulativeWeightAdditive,y=this.binding;for(this.cumulativeWeightAdditive=this.cumulativeWeight=0,1>u&&this._mixBufferRegion(a,e,r*this._origIndex,1-u,r),0<p&&this._mixBufferRegionAdditive(a,e,this._addIndex*r,1,r),u=r,p=r+r;u!==p;++u)if(a[u]!==a[u+r]){y.setValue(a,e);break}},saveOriginalState:function(){var e=this.buffer,r=this.valueSize,a=r*this._origIndex;this.binding.getValue(e,a);for(var u=r;u!==a;++u)e[u]=e[a+u%r];this._setIdentity(),this.cumulativeWeightAdditive=this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,r=e+this.valueSize;e<r;e++)this.buffer[e]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize,a=0;a<this.valueSize;a++)this.buffer[r+a]=this.buffer[e+a]},_select:function(e,r,a,u,p){if(.5<=u)for(u=0;u!==p;++u)e[r+u]=e[a+u]},_slerp:function(e,r,a,u){Er.slerpFlat(e,r,e,r,e,a,u)},_slerpAdditive:function(e,r,a,u,p){p*=this._workIndex,Er.multiplyQuaternionsFlat(e,p,e,r,e,a),Er.slerpFlat(e,r,e,r,e,p,u)},_lerp:function(e,r,a,u,p){for(var y=1-u,C=0;C!==p;++C){var S=r+C;e[S]=e[S]*y+e[a+C]*u}},_lerpAdditive:function(e,r,a,u,p){for(var y=0;y!==p;++y){var C=r+y;e[C]+=e[a+y]*u}}});var X2=/[\[\]\.:\/]/g,Y2="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Z2=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),K2=/(WCOD+)?/.source.replace("WCOD",Y2),J2=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),q2=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Q2=new RegExp("^"+Z2+K2+J2+q2+"$"),A=["material","materials","bones"];Ce(Qc.prototype,{getValue:function(e,r){this.bind();var a=this._bindings[this._targetGroup.nCachedObjects_];a!==void 0&&a.getValue(e,r)},setValue:function(e,r){for(var a=this._bindings,u=this._targetGroup.nCachedObjects_,p=a.length;u!==p;++u)a[u].setValue(e,r)},bind:function(){for(var e=this._bindings,r=this._targetGroup.nCachedObjects_,a=e.length;r!==a;++r)e[r].bind()},unbind:function(){for(var e=this._bindings,r=this._targetGroup.nCachedObjects_,a=e.length;r!==a;++r)e[r].unbind()}}),Ce(hs,{Composite:Qc,create:function(e,r,a){return e&&e.isAnimationObjectGroup?new hs.Composite(e,r,a):new hs(e,r,a)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(X2,"")},parseTrackName:function(e){var r=Q2.exec(e);if(!r)throw Error("PropertyBinding: Cannot parse trackName: "+e);r={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]};var a=r.nodeName&&r.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){var u=r.nodeName.substring(a+1);A.indexOf(u)!==-1&&(r.nodeName=r.nodeName.substring(0,a),r.objectName=u)}if(r.propertyName===null||r.propertyName.length===0)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r},findNode:function(e,r){if(!r||r===""||r==="."||r===-1||r===e.name||r===e.uuid)return e;if(e.skeleton){var a=e.skeleton.getBoneByName(r);if(a!==void 0)return a}return e.children&&(e=function u(p){for(var y=0;y<p.length;y++){var C=p[y];if(C.name===r||C.uuid===r||(C=u(C.children)))return C}return null}(e.children))?e:null}}),Ce(hs.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(n,e){n[e]=this.node[this.propertyName]},function(n,e){for(var r=this.resolvedProperty,a=0,u=r.length;a!==u;++a)n[e++]=r[a]},function(n,e){n[e]=this.resolvedProperty[this.propertyIndex]},function(n,e){this.resolvedProperty.toArray(n,e)}],SetterByBindingTypeAndVersioning:[[function(n,e){this.targetObject[this.propertyName]=n[e]},function(n,e){this.targetObject[this.propertyName]=n[e],this.targetObject.needsUpdate=!0},function(n,e){this.targetObject[this.propertyName]=n[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(n,e){for(var r=this.resolvedProperty,a=0,u=r.length;a!==u;++a)r[a]=n[e++]},function(n,e){for(var r=this.resolvedProperty,a=0,u=r.length;a!==u;++a)r[a]=n[e++];this.targetObject.needsUpdate=!0},function(n,e){for(var r=this.resolvedProperty,a=0,u=r.length;a!==u;++a)r[a]=n[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(n,e){this.resolvedProperty[this.propertyIndex]=n[e]},function(n,e){this.resolvedProperty[this.propertyIndex]=n[e],this.targetObject.needsUpdate=!0},function(n,e){this.resolvedProperty[this.propertyIndex]=n[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(n,e){this.resolvedProperty.fromArray(n,e)},function(n,e){this.resolvedProperty.fromArray(n,e),this.targetObject.needsUpdate=!0},function(n,e){this.resolvedProperty.fromArray(n,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,r){this.bind(),this.getValue(e,r)},setValue:function(e,r){this.bind(),this.setValue(e,r)},bind:function(){var e=this.node,r=this.parsedPath,a=r.objectName,u=r.propertyName,p=r.propertyIndex;if(e||(this.node=e=hs.findNode(this.rootNode,r.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(a){var y=r.objectIndex;switch(a){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}for(e=e.skeleton.bones,a=0;a<e.length;a++)if(e[a].name===y){y=a;break}break;default:if(e[a]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[a]}if(y!==void 0){if(e[y]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[y]}}if(y=e[u],y===void 0)console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+u+" but it wasn't found.",e);else{if(r=this.Versioning.None,this.targetObject=e,e.needsUpdate!==void 0?r=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(r=this.Versioning.MatrixWorldNeedsUpdate),a=this.BindingType.Direct,p!==void 0){if(u==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[p]!==void 0&&(p=e.morphTargetDictionary[p])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}a=this.BindingType.ArrayElement,this.resolvedProperty=y,this.propertyIndex=p}else y.fromArray!==void 0&&y.toArray!==void 0?(a=this.BindingType.HasFromToArray,this.resolvedProperty=y):Array.isArray(y)?(a=this.BindingType.EntireArray,this.resolvedProperty=y):this.propertyName=u;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][r]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Ce(hs.prototype,{_getValue_unbound:hs.prototype.getValue,_setValue_unbound:hs.prototype.setValue}),Ce(function(){this.uuid=Bi.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var n={};this._indicesByUUID=n;for(var e=0,r=arguments.length;e!==r;++e)n[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,r=e.length,a=this.nCachedObjects_,u=this._indicesByUUID,p=this._paths,y=this._parsedPaths,C=this._bindings,S=C.length,R=void 0,N=0,z=arguments.length;N!==z;++N){var Z=arguments[N],K=Z.uuid,ne=u[K];if(ne===void 0){ne=r++,u[K]=ne,e.push(Z),K=0;for(var oe=S;K!==oe;++K)C[K].push(new hs(Z,p[K],y[K]))}else if(ne<a){R=e[ne];var be=--a;for(oe=e[be],u[oe.uuid]=ne,e[ne]=oe,u[K]=be,e[be]=Z,K=0,oe=S;K!==oe;++K){var je=C[K],Ie=je[ne];je[ne]=je[be],Ie===void 0&&(Ie=new hs(Z,p[K],y[K])),je[be]=Ie}}else e[ne]!==R&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=a},remove:function(){for(var e=this._objects,r=this.nCachedObjects_,a=this._indicesByUUID,u=this._bindings,p=u.length,y=0,C=arguments.length;y!==C;++y){var S=arguments[y],R=S.uuid,N=a[R];if(N!==void 0&&N>=r){var z=r++,Z=e[z];for(a[Z.uuid]=N,e[N]=Z,a[R]=z,e[z]=S,S=0,R=p;S!==R;++S){Z=u[S];var K=Z[N];Z[N]=Z[z],Z[z]=K}}}this.nCachedObjects_=r},uncache:function(){for(var e=this._objects,r=e.length,a=this.nCachedObjects_,u=this._indicesByUUID,p=this._bindings,y=p.length,C=0,S=arguments.length;C!==S;++C){var R=arguments[C].uuid,N=u[R];if(N!==void 0)if(delete u[R],N<a){R=--a;var z=e[R],Z=--r,K=e[Z];for(u[z.uuid]=N,e[N]=z,u[K.uuid]=R,e[R]=K,e.pop(),z=0,K=y;z!==K;++z){var ne=p[z],oe=ne[Z];ne[N]=ne[R],ne[R]=oe,ne.pop()}}else for(Z=--r,K=e[Z],u[K.uuid]=N,e[N]=K,e.pop(),z=0,K=y;z!==K;++z)ne=p[z],ne[N]=ne[Z],ne.pop()}this.nCachedObjects_=a},subscribe_:function(e,r){var a=this._bindingsIndicesByPath,u=a[e],p=this._bindings;if(u!==void 0)return p[u];var y=this._paths,C=this._parsedPaths,S=this._objects,R=this.nCachedObjects_,N=Array(S.length);for(u=p.length,a[e]=u,y.push(e),C.push(r),p.push(N),a=R,u=S.length;a!==u;++a)N[a]=new hs(S[a],e,r);return N},unsubscribe_:function(e){var r=this._bindingsIndicesByPath,a=r[e];if(a!==void 0){var u=this._paths,p=this._parsedPaths,y=this._bindings,C=y.length-1,S=y[C];r[e[C]]=a,y[a]=S,y.pop(),p[a]=p[C],p.pop(),u[a]=u[C],u.pop()}}}),Ce(vf.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,r){return this.loop=e,this.repetitions=r,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,r,a){if(e.fadeOut(r),this.fadeIn(r),a){a=this._clip.duration;var u=e._clip.duration,p=a/u;e.warp(1,u/a,r),this.warp(p,1,r)}return this},crossFadeTo:function(e,r,a){return e.crossFadeFrom(this,r,a)},stopFading:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,r,a){var u=this._mixer,p=u.time,y=this._timeScaleInterpolant,C=this.timeScale;return y===null&&(this._timeScaleInterpolant=y=u._lendControlInterpolant()),u=y.parameterPositions,y=y.sampleValues,u[0]=p,u[1]=p+a,y[0]=e/C,y[1]=r/C,this},stopWarping:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,r,a,u){if(this.enabled){var p=this._startTime;if(p!==null){if(r=(e-p)*a,0>r||a===0)return;this._startTime=null,r*=a}if(r*=this._updateTimeScale(e),a=this._updateTime(r),e=this._updateWeight(e),0<e)switch(r=this._interpolants,p=this._propertyBindings,this.blendMode){case 2501:for(var y=0,C=r.length;y!==C;++y)r[y].evaluate(a),p[y].accumulateAdditive(e);break;default:for(y=0,C=r.length;y!==C;++y)r[y].evaluate(a),p[y].accumulate(u,e)}}else this._updateWeight(e)},_updateWeight:function(e){var r=0;if(this.enabled){r=this.weight;var a=this._weightInterpolant;if(a!==null){var u=a.evaluate(e)[0];r*=u,e>a.parameterPositions[1]&&(this.stopFading(),u===0&&(this.enabled=!1))}}return this._effectiveWeight=r},_updateTimeScale:function(e){var r=0;if(!this.paused){r=this.timeScale;var a=this._timeScaleInterpolant;if(a!==null){var u=a.evaluate(e)[0];r*=u,e>a.parameterPositions[1]&&(this.stopWarping(),r===0?this.paused=!0:this.timeScale=r)}}return this._effectiveTimeScale=r},_updateTime:function(e){var r=this.time+e,a=this._clip.duration,u=this.loop,p=this._loopCount,y=u===2202;if(e===0)return p===-1?r:y&&(p&1)==1?a-r:r;if(u===2200)e:{if(p===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1)),r>=a)r=a;else if(0>r)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}else{if(p===-1&&(0<=e?(p=0,this._setEndings(!0,this.repetitions===0,y)):this._setEndings(this.repetitions===0,!0,y)),r>=a||0>r){u=Math.floor(r/a),r-=a*u,p+=Math.abs(u);var C=this.repetitions-p;0>=C?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r=0<e?a:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(C===1?(e=0>e,this._setEndings(e,!e,y)):this._setEndings(!1,!1,y),this._loopCount=p,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u}))}else this.time=r;if(y&&(p&1)==1)return a-r}return r},_setEndings:function(e,r,a){var u=this._interpolantSettings;a?(u.endingStart=2401,u.endingEnd=2401):(u.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,u.endingEnd=r?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,r,a){var u=this._mixer,p=u.time,y=this._weightInterpolant;return y===null&&(this._weightInterpolant=y=u._lendControlInterpolant()),u=y.parameterPositions,y=y.sampleValues,u[0]=p,y[0]=r,u[1]=p+e,y[1]=a,this}}),ou.prototype=Ce(me(St.prototype),{constructor:ou,_bindAction:function(e,r){var a=e._localRoot||this._root,u=e._clip.tracks,p=u.length,y=e._propertyBindings;e=e._interpolants;var C=a.uuid,S=this._bindingsByRootAndName,R=S[C];for(R===void 0&&(R={},S[C]=R),S=0;S!==p;++S){var N=u[S],z=N.name,Z=R[z];if(Z===void 0){if(Z=y[S],Z!==void 0){Z._cacheIndex===null&&(++Z.referenceCount,this._addInactiveBinding(Z,C,z));continue}Z=new pd(hs.create(a,z,r&&r._propertyBindings[S].binding.parsedPath),N.ValueTypeName,N.getValueSize()),++Z.referenceCount,this._addInactiveBinding(Z,C,z)}y[S]=Z,e[S].resultBuffer=Z.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var r=(e._localRoot||this._root).uuid,a=e._clip.uuid,u=this._actionsByClip[a];this._bindAction(e,u&&u.knownActions[0]),this._addInactiveAction(e,a,r)}for(r=e._propertyBindings,a=0,u=r.length;a!==u;++a){var p=r[a];p.useCount++==0&&(this._lendBinding(p),p.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var r=e._propertyBindings,a=0,u=r.length;a!==u;++a){var p=r[a];--p.useCount==0&&(p.restoreOriginalState(),this._takeBackBinding(p))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return e=e._cacheIndex,e!==null&&e<this._nActiveActions},_addInactiveAction:function(e,r,a){var u=this._actions,p=this._actionsByClip,y=p[r];y===void 0?(y={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,p[r]=y):(r=y.knownActions,e._byClipCacheIndex=r.length,r.push(e)),e._cacheIndex=u.length,u.push(e),y.actionByRoot[a]=e},_removeInactiveAction:function(e){var r=this._actions,a=r[r.length-1],u=e._cacheIndex;a._cacheIndex=u,r[u]=a,r.pop(),e._cacheIndex=null,r=e._clip.uuid,a=this._actionsByClip,u=a[r];var p=u.knownActions,y=p[p.length-1],C=e._byClipCacheIndex;y._byClipCacheIndex=C,p[C]=y,p.pop(),e._byClipCacheIndex=null,delete u.actionByRoot[(e._localRoot||this._root).uuid],p.length===0&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){e=e._propertyBindings;for(var r=0,a=e.length;r!==a;++r){var u=e[r];--u.referenceCount==0&&this._removeInactiveBinding(u)}},_lendAction:function(e){var r=this._actions,a=e._cacheIndex,u=this._nActiveActions++,p=r[u];e._cacheIndex=u,r[u]=e,p._cacheIndex=a,r[a]=p},_takeBackAction:function(e){var r=this._actions,a=e._cacheIndex,u=--this._nActiveActions,p=r[u];e._cacheIndex=u,r[u]=e,p._cacheIndex=a,r[a]=p},_addInactiveBinding:function(e,r,a){var u=this._bindingsByRootAndName,p=u[r],y=this._bindings;p===void 0&&(p={},u[r]=p),p[a]=e,e._cacheIndex=y.length,y.push(e)},_removeInactiveBinding:function(e){var r=this._bindings,a=e.binding,u=a.rootNode.uuid;a=a.path;var p=this._bindingsByRootAndName,y=p[u],C=r[r.length-1];e=e._cacheIndex,C._cacheIndex=e,r[e]=C,r.pop(),delete y[a],Ei(y).length===0&&delete p[u]},_lendBinding:function(e){var r=this._bindings,a=e._cacheIndex,u=this._nActiveBindings++,p=r[u];e._cacheIndex=u,r[u]=e,p._cacheIndex=a,r[a]=p},_takeBackBinding:function(e){var r=this._bindings,a=e._cacheIndex,u=--this._nActiveBindings,p=r[u];e._cacheIndex=u,r[u]=e,p._cacheIndex=a,r[a]=p},_lendControlInterpolant:function(){var e=this._controlInterpolants,r=this._nActiveControlInterpolants++,a=e[r];return a===void 0&&(a=new Th(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),a.__cacheIndex=r,e[r]=a),a},_takeBackControlInterpolant:function(e){var r=this._controlInterpolants,a=e.__cacheIndex,u=--this._nActiveControlInterpolants,p=r[u];e.__cacheIndex=u,r[u]=e,p.__cacheIndex=a,r[a]=p},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,r,a){var u=r||this._root,p=u.uuid;u=typeof e=="string"?Ta.findByName(u,e):e,e=u!==null?u.uuid:e;var y=this._actionsByClip[e],C=null;if(a===void 0&&(a=u!==null?u.blendMode:2500),y!==void 0){if(C=y.actionByRoot[p],C!==void 0&&C.blendMode===a)return C;C=y.knownActions[0],u===null&&(u=C._clip)}return u===null?null:(r=new vf(this,u,r,a),this._bindAction(r,C),this._addInactiveAction(r,e,p),r)},existingAction:function(e,r){var a=r||this._root;return r=a.uuid,a=typeof e=="string"?Ta.findByName(a,e):e,e=this._actionsByClip[a?a.uuid:e],e!==void 0&&e.actionByRoot[r]||null},stopAllAction:function(){for(var e=this._actions,r=this._nActiveActions-1;0<=r;--r)e[r].stop();return this},update:function(e){e*=this.timeScale;for(var r=this._actions,a=this._nActiveActions,u=this.time+=e,p=Ms(e),y=this._accuIndex^=1,C=0;C!==a;++C)r[C]._update(u,e,p,y);for(e=this._bindings,r=this._nActiveBindings,C=0;C!==r;++C)e[C].apply(y);return this},setTime:function(e){for(var r=this.time=0;r<this._actions.length;r++)this._actions[r].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var r=this._actions;e=e.uuid;var a=this._actionsByClip,u=a[e];if(u!==void 0){u=u.knownActions;for(var p=0,y=u.length;p!==y;++p){var C=u[p];this._deactivateAction(C);var S=C._cacheIndex,R=r[r.length-1];C._cacheIndex=null,C._byClipCacheIndex=null,R._cacheIndex=S,r[S]=R,r.pop(),this._removeInactiveBindingsForAction(C)}delete a[e]}},uncacheRoot:function(e){e=e.uuid;var r=this._actionsByClip;for(u in r){var a=r[u].actionByRoot[e];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}var u=this._bindingsByRootAndName[e];if(u!==void 0)for(var p in u)e=u[p],e.restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,r){e=this.existingAction(e,r),e!==null&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),gd.prototype.clone=function(){return new gd(this.value.clone===void 0?this.value:this.value.clone())},yf.prototype=Ce(me(Gu.prototype),{constructor:yf,isInstancedInterleavedBuffer:!0,copy:function(e){return Gu.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Ce(Ol.prototype,{set:function(e,r){this.ray.set(e,r)},setFromCamera:function(e,r){r&&r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r&&r.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,r,a){return a=a||[],Su(e,this,a,r),a.sort(hp),a},intersectObjects:function(e,r,a){if(a=a||[],Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),a;for(var u=0,p=e.length;u<p;u++)Su(e[u],this,a,r);return a.sort(hp),a}}),Ce(function(n,e,r){return this.radius=n!==void 0?n:1,this.phi=e!==void 0?e:0,this.theta=r!==void 0?r:0,this}.prototype,{set:function(e,r,a){return this.radius=e,this.phi=r,this.theta=a,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,r,a){return this.radius=Math.sqrt(e*e+r*r+a*a),this.radius===0?this.phi=this.theta=0:(this.theta=Math.atan2(e,a),this.phi=Math.acos(Bi.clamp(r/this.radius,-1,1))),this}}),Ce(function(n,e,r){return this.radius=n!==void 0?n:1,this.theta=e!==void 0?e:0,this.y=r!==void 0?r:0,this}.prototype,{set:function(e,r,a){return this.radius=e,this.theta=r,this.y=a,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,r,a){return this.radius=Math.sqrt(e*e+a*a),this.theta=Math.atan2(e,a),this.y=r,this}});var I=new ce;Ce(xf.prototype,{set:function(e,r){return this.min.copy(e),this.max.copy(r),this},setFromPoints:function(e){this.makeEmpty();for(var r=0,a=e.length;r<a;r++)this.expandByPoint(e[r]);return this},setFromCenterAndSize:function(e,r){return r=I.copy(r).multiplyScalar(.5),this.min.copy(e).sub(r),this.max.copy(e).add(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new ce),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new ce),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,r){return r===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),r=new ce),r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,r){return r===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),r=new ce),r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return I.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var k=new xe,ee=new xe;Ce(Eh.prototype,{set:function(e,r){return this.start.copy(e),this.end.copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return e===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new xe),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return e===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),e=new xe),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,r){return r===void 0&&(console.warn("THREE.Line3: .at() target is now required"),r=new xe),this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,r){return k.subVectors(e,this.start),ee.subVectors(this.end,this.start),e=ee.dot(ee),e=ee.dot(k)/e,r&&(e=Bi.clamp(e,0,1)),e},closestPointToPoint:function(e,r,a){return e=this.closestPointToPointParameter(e,r),a===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),a=new xe),this.delta(a).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),bh.prototype=me(Cr.prototype),bh.prototype.constructor=bh,bh.prototype.isImmediateRenderObject=!0;var pe=new xe;Lh.prototype=me(Cr.prototype),Lh.prototype.constructor=Lh,Lh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Lh.prototype.update=function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,e=n*Math.tan(this.light.angle);this.cone.scale.set(e,e,n),pe.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pe),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var De=new xe,Qe=new Lr,nt=new Lr;Cf.prototype=me(da.prototype),Cf.prototype.constructor=Cf,Cf.prototype.isSkeletonHelper=!0,Cf.prototype.updateMatrixWorld=function(n){var e=this.bones,r=this.geometry,a=r.getAttribute("position");nt.getInverse(this.root.matrixWorld);for(var u=0,p=0;u<e.length;u++){var y=e[u];y.parent&&y.parent.isBone&&(Qe.multiplyMatrices(nt,y.matrixWorld),De.setFromMatrixPosition(Qe),a.setXYZ(p,De.x,De.y,De.z),Qe.multiplyMatrices(nt,y.parent.matrixWorld),De.setFromMatrixPosition(Qe),a.setXYZ(p+1,De.x,De.y,De.z),p+=2)}r.getAttribute("position").needsUpdate=!0,Cr.prototype.updateMatrixWorld.call(this,n)},md.prototype=me(oa.prototype),md.prototype.constructor=md,md.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},md.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _t=new xe,fr=new vt,dr=new vt;Ph.prototype=me(Cr.prototype),Ph.prototype.constructor=Ph,Ph.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ph.prototype.update=function(){var n=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var e=n.geometry.getAttribute("color");fr.copy(this.light.color),dr.copy(this.light.groundColor);for(var r=0,a=e.count;r<a;r++){var u=r<a/2?fr:dr;e.setXYZ(r,u.r,u.g,u.b)}e.needsUpdate=!0}n.lookAt(_t.setFromMatrixPosition(this.light.matrixWorld).negate())},Tu.prototype=Ce(me(da.prototype),{constructor:Tu,copy:function(e){return da.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return new this.constructor().copy(this)}}),ys.prototype=me(da.prototype),ys.prototype.constructor=ys;var br=new xe,tn=new xe,Nn=new xe;xs.prototype=me(Cr.prototype),xs.prototype.constructor=xs,xs.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},xs.prototype.update=function(){br.setFromMatrixPosition(this.light.matrixWorld),tn.setFromMatrixPosition(this.light.target.matrixWorld),Nn.subVectors(tn,br),this.lightPlane.lookAt(tn),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(tn),this.targetLine.scale.z=Nn.length()};var hi=new xe,Bn=new ss;$c.prototype=me(da.prototype),$c.prototype.constructor=$c,$c.prototype.update=function(){var n=this.geometry,e=this.pointMap;Bn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Pa("c",e,n,Bn,0,0,-1),Pa("t",e,n,Bn,0,0,1),Pa("n1",e,n,Bn,-1,-1,-1),Pa("n2",e,n,Bn,1,-1,-1),Pa("n3",e,n,Bn,-1,1,-1),Pa("n4",e,n,Bn,1,1,-1),Pa("f1",e,n,Bn,-1,-1,1),Pa("f2",e,n,Bn,1,-1,1),Pa("f3",e,n,Bn,-1,1,1),Pa("f4",e,n,Bn,1,1,1),Pa("u1",e,n,Bn,.7,1.1,-1),Pa("u2",e,n,Bn,-.7,1.1,-1),Pa("u3",e,n,Bn,0,2,-1),Pa("cf1",e,n,Bn,-1,0,1),Pa("cf2",e,n,Bn,1,0,1),Pa("cf3",e,n,Bn,0,-1,1),Pa("cf4",e,n,Bn,0,1,1),Pa("cn1",e,n,Bn,-1,0,-1),Pa("cn2",e,n,Bn,1,0,-1),Pa("cn3",e,n,Bn,0,-1,-1),Pa("cn4",e,n,Bn,0,1,-1),n.getAttribute("position").needsUpdate=!0};var fi=new Ui;As.prototype=me(da.prototype),As.prototype.constructor=As,As.prototype.update=function(n){if(n!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&fi.setFromObject(this.object),!fi.isEmpty()){n=fi.min;var e=fi.max,r=this.geometry.attributes.position,a=r.array;a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=n.x,a[4]=e.y,a[5]=e.z,a[6]=n.x,a[7]=n.y,a[8]=e.z,a[9]=e.x,a[10]=n.y,a[11]=e.z,a[12]=e.x,a[13]=e.y,a[14]=n.z,a[15]=n.x,a[16]=e.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=e.x,a[22]=n.y,a[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}},As.prototype.setFromObject=function(n){return this.object=n,this.update(),this},As.prototype.copy=function(n){return da.prototype.copy.call(this,n),this.object=n.object,this},As.prototype.clone=function(){return new this.constructor().copy(this)},eh.prototype=me(da.prototype),eh.prototype.constructor=eh,eh.prototype.updateMatrixWorld=function(n){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Cr.prototype.updateMatrixWorld.call(this,n))},au.prototype=me(ks.prototype),au.prototype.constructor=au,au.prototype.updateMatrixWorld=function(n){var e=-this.plane.constant;1e-8>Math.abs(e)&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=0>e?1:0,this.lookAt(this.plane.normal),Cr.prototype.updateMatrixWorld.call(this,n)};var To=new xe,Io,sc;Va.prototype=me(Cr.prototype),Va.prototype.constructor=Va,Va.prototype.setDirection=function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(To.set(n.z,0,-n.x).normalize(),this.quaternion.setFromAxisAngle(To,Math.acos(n.y)))},Va.prototype.setLength=function(n,e,r){e===void 0&&(e=.2*n),r===void 0&&(r=.2*e),this.line.scale.set(1,Math.max(1e-4,n-e),1),this.line.updateMatrix(),this.cone.scale.set(r,e,r),this.cone.position.y=n,this.cone.updateMatrix()},Va.prototype.setColor=function(n){this.line.material.color.set(n),this.cone.material.color.set(n)},Va.prototype.copy=function(n){return Cr.prototype.copy.call(this,n,!1),this.line.copy(n.line),this.cone.copy(n.cone),this},Va.prototype.clone=function(){return new this.constructor().copy(this)},ng.prototype=me(da.prototype),ng.prototype.constructor=ng;var Fu=[.125,.215,.35,.446,.526,.582],yh=5+Fu.length,Ba={};oi(Ba,3e3,0),oi(Ba,3001,1),oi(Ba,3002,2),oi(Ba,3004,3),oi(Ba,3005,4),oi(Ba,3006,5),oi(Ba,3007,6),new Mu,function(){for(var n=[],e=[],r=[],a=8,u=0;u<yh;u++){var p=Math.pow(2,a);e.push(p);var y=1/p;4<u?y=Fu[u-8+4-1]:u==0&&(y=0),r.push(y),y=1/(p-1),p=-y/2,y=1+y/2;var C=[p,p,y,p,y,y,p,p,y,y,p,y];p=new Float32Array(108),y=new Float32Array(72);for(var S=new Float32Array(36),R=0;6>R;R++){var N=R%3*2/3-1,z=2<R?0:-1;p.set([N,z,0,N+2/3,z,0,N+2/3,z+1,0,N,z,0,N+2/3,z+1,0,N,z+1,0],18*R),y.set(C,12*R),S.set([R,R,R,R,R,R],6*R)}C=new $r,C.setAttribute("position",new Jr(p,3)),C.setAttribute("uv",new Jr(y,2)),C.setAttribute("faceIndex",new Jr(S,1)),n.push(C),4<a&&a--}return{_lodPlanes:n,_sizeLods:e,_sigmas:r}}(),zn.create=function(n,e){return n.prototype=me(zn.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},Ce(Pl.prototype,{createPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var r=new ei,a=0,u=e.length;a<u;a++){var p=e[a];r.vertices.push(new xe(p.x,p.y,p.z||0))}return r}}),Ce($s.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),function(n){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ml.call(this,n),this.type="catmullrom",this.closed=!0}.prototype=me(ml.prototype),function(n){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ml.call(this,n),this.type="catmullrom"}.prototype=me(ml.prototype),wf.prototype=me(ml.prototype),Ce(wf.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Tu.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Cf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Ce(Zi.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Eg.extractUrlBase(e)}}),Zi.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Ce(df.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Ce(xf.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Ce(Ui.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Ce(Ko.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Ia.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},Eh.prototype.center=function(n){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(n)},Ce(Bi,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Bi.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Bi.ceilPowerOfTwo(e)}}),Ce(Ne.prototype,{flattenToArrayOffset:function(e,r){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,r)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Ce(Lr.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,r){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,r)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new xe().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,r,a,u,p,y){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,r,u,a,p,y)}}),ia.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},Er.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},Ce(ro.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Ce(Xt.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,r)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Ce(Xt,{barycoordFromPoint:function(e,r,a,u,p){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Xt.getBarycoord(e,r,a,u,p)},normal:function(e,r,a,u){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Xt.getNormal(e,r,a,u)}}),Ce(Zu.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ju(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Au(this,e)}}),Ce(ce.prototype,{fromAttribute:function(e,r,a){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,r,a)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Ce(xe.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,r){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(r,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,r,a){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,r,a)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Ce(Oe.prototype,{fromAttribute:function(e,r,a){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,r,a)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Ce(ei.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Ce(Cr.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,r){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(r,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Zr(Cr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Ce(oa.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Zr(oa.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Zr(Xr.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Xc.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Wc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(zn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),qa.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)},Zr(yo.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Zr(Jr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===35048},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Ce(Jr.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Ce($r.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,r,a){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),r&&r.isBufferAttribute||r&&r.isInterleavedBufferAttribute?e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(r),this):this.setAttribute(e,r):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Jr(r,a)))},addDrawCall:function(e,r,a){a!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,r)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Zr($r.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Zr(im.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Zr(Ol.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Zr(Gu.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===35048},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Ce(Gu.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Ce(Hs.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Zr(gd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Zr(Nr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new vt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===1}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Zr(Ga.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Zr(_i.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Ce(Zd.prototype,{clearTarget:function(e,r,a,u){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(r,a,u)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Zr(Zd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=e===!0?3001:3e3}}}),Zr($f.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Zr(pt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Zr(mf.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var r=this;return new Ku().load(e,function(a){r.setBuffer(a)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),mv.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},zc.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},Pc.crossOrigin=void 0,Pc.loadTexture=function(n,e,r,a){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var u=new _n;return u.setCrossOrigin(this.crossOrigin),n=u.load(n,r,void 0,a),e&&(n.mapping=e),n},Pc.loadTextureCube=function(n,e,r,a){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var u=new fd;return u.setCrossOrigin(this.crossOrigin),n=u.load(n,r,void 0,a),e&&(n.mapping=e),n},Pc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Pc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"117"}}));var hu=function(e){Zi.call(this,e)};hu.prototype=Ce(me(Zi.prototype),{constructor:hu,load:function(e,r,a,u){var p=this,y=this.path===""?Eg.extractUrlBase(e):this.path,C=new ja(this.manager);C.setPath(this.path),C.load(e,function(S){try{r(p.parse(S,y))}catch(R){u?u(R):console.error(R),p.manager.itemError(e)}},a,u)},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e,r){var a=e.split(`
`),u={},p=/\s+/;e={};for(var y=0;y<a.length;y++){var C=a[y];if(C=C.trim(),C.length!==0&&C.charAt(0)!=="#"){var S=C.indexOf(" "),R=0<=S?C.substring(0,S):C;R=R.toLowerCase(),C=0<=S?C.substring(S+1):"",C=C.trim(),R==="newmtl"?(u={name:C},e[C]=u):R==="ka"||R==="kd"||R==="ks"||R==="ke"?(C=C.split(p,3),u[R]=[parseFloat(C[0]),parseFloat(C[1]),parseFloat(C[2])]):u[R]=C}}return r=new hu.MaterialCreator(this.resourcePath||r,this.materialOptions),r.setCrossOrigin(this.crossOrigin),r.setManager(this.manager),r.setMaterials(e),r}}),hu.MaterialCreator=function(n,e){this.baseUrl=n||"",this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:0,this.wrap=this.options&&this.options.wrap?this.options.wrap:1e3},hu.MaterialCreator.prototype={constructor:hu.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var r={},a;for(a in e){var u=e[a],p={};r[a]=p;for(var y in u){var C=!0,S=u[y],R=y.toLowerCase();switch(R){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(S=[S[0]/255,S[1]/255,S[2]/255]),this.options&&this.options.ignoreZeroRGBs&&S[0]===0&&S[1]===0&&S[2]===0&&(C=!1)}C&&(p[R]=S)}}return r},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0,r;for(r in this.materialsInfo)this.materialsArray[e]=this.create(r),this.nameLookup[r]=e,e++;return this.materialsArray},create:function(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){function r(R,N){return typeof N!="string"||N===""?"":/^https?:\/\//i.test(N)?N:R+N}function a(R,N){if(!y[R]){N=u.getTextureParams(N,y);var z=u.loadTexture(r(u.baseUrl,N.url));z.repeat.copy(N.scale),z.offset.copy(N.offset),z.wrapS=u.wrap,z.wrapT=u.wrap,y[R]=z}}var u=this,p=this.materialsInfo[e],y={name:e,side:this.side},C;for(C in p){var S=p[C];if(S!=="")switch(C.toLowerCase()){case"kd":y.color=new vt().fromArray(S);break;case"ks":y.specular=new vt().fromArray(S);break;case"ke":y.emissive=new vt().fromArray(S);break;case"map_kd":a("map",S);break;case"map_ks":a("specularMap",S);break;case"map_ke":a("emissiveMap",S);break;case"norm":a("normalMap",S);break;case"map_bump":case"bump":a("bumpMap",S);break;case"map_d":a("alphaMap",S),y.transparent=!0;break;case"ns":y.shininess=parseFloat(S);break;case"d":S=parseFloat(S),1>S&&(y.opacity=S,y.transparent=!0);break;case"tr":S=parseFloat(S),this.options&&this.options.invertTrProperty&&(S=1-S),0<S&&(y.opacity=1-S,y.transparent=!0)}}return this.materials[e]=new Ga(y),this.materials[e]},getTextureParams:function(e,r){var a={scale:new ce(1,1),offset:new ce(0,0)};e=e.split(/\s+/);var u=e.indexOf("-bm");return 0<=u&&(r.bumpScale=parseFloat(e[u+1]),e.splice(u,2)),u=e.indexOf("-s"),0<=u&&(a.scale.set(parseFloat(e[u+1]),parseFloat(e[u+2])),e.splice(u,4)),u=e.indexOf("-o"),0<=u&&(a.offset.set(parseFloat(e[u+1]),parseFloat(e[u+2])),e.splice(u,4)),a.url=e.join(" ").trim(),a},loadTexture:function(e,r,a,u,p){var y=this.manager!==void 0?this.manager:eA,C=y.getHandler(e);return C===null&&(C=new _n(y)),C.setCrossOrigin&&C.setCrossOrigin(this.crossOrigin),e=C.load(e,a,u,p),r!==void 0&&(e.mapping=r),e}};var Pp=function(){function n(){var z={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(K,ne){if(this.object&&this.object.fromDeclaration===!1)this.object.name=K,this.object.fromDeclaration=ne!==!1;else{var oe=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:K||"",fromDeclaration:ne!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasNormalIndices:!1,hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(je,Ie){var ze=this._finalize(!1);return ze&&(ze.inherited||0>=ze.groupCount)&&this.materials.splice(ze.index,1),je={index:this.materials.length,name:je||"",mtllib:Array.isArray(Ie)&&0<Ie.length?Ie[Ie.length-1]:"",smooth:ze!==void 0?ze.smooth:this.smooth,groupStart:ze!==void 0?ze.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(xt){return xt={index:typeof xt=="number"?xt:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1},xt.clone=this.clone.bind(xt),xt}},this.materials.push(je),je},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(je){var Ie=this.currentMaterial();if(Ie&&Ie.groupEnd===-1&&(Ie.groupEnd=this.geometry.vertices.length/3,Ie.groupCount=Ie.groupEnd-Ie.groupStart,Ie.inherited=!1),je&&1<this.materials.length)for(var ze=this.materials.length-1;0<=ze;ze--)0>=this.materials[ze].groupCount&&this.materials.splice(ze,1);return je&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),Ie}},oe&&oe.name&&typeof oe.clone=="function"&&(K=oe.clone(0),K.inherited=!0,this.object.materials.push(K)),this.objects.push(this.object)}},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(K,ne){return K=parseInt(K,10),3*(0<=K?K-1:K+ne/3)},parseNormalIndex:function(K,ne){return K=parseInt(K,10),3*(0<=K?K-1:K+ne/3)},parseUVIndex:function(K,ne){return K=parseInt(K,10),2*(0<=K?K-1:K+ne/2)},addVertex:function(K,ne,oe){var be=this.vertices,je=this.object.geometry.vertices;je.push(be[K+0],be[K+1],be[K+2]),je.push(be[ne+0],be[ne+1],be[ne+2]),je.push(be[oe+0],be[oe+1],be[oe+2])},addVertexPoint:function(K){var ne=this.vertices;this.object.geometry.vertices.push(ne[K+0],ne[K+1],ne[K+2])},addVertexLine:function(K){var ne=this.vertices;this.object.geometry.vertices.push(ne[K+0],ne[K+1],ne[K+2])},addNormal:function(K,ne,oe){var be=this.normals,je=this.object.geometry.normals;je.push(be[K+0],be[K+1],be[K+2]),je.push(be[ne+0],be[ne+1],be[ne+2]),je.push(be[oe+0],be[oe+1],be[oe+2])},addFaceNormal:function(K,ne,oe){var be=this.vertices,je=this.object.geometry.normals;y.fromArray(be,K),C.fromArray(be,ne),S.fromArray(be,oe),N.subVectors(S,C),R.subVectors(y,C),N.cross(R),N.normalize(),je.push(N.x,N.y,N.z),je.push(N.x,N.y,N.z),je.push(N.x,N.y,N.z)},addColor:function(K,ne,oe){var be=this.colors,je=this.object.geometry.colors;be[K]!==void 0&&je.push(be[K+0],be[K+1],be[K+2]),be[ne]!==void 0&&je.push(be[ne+0],be[ne+1],be[ne+2]),be[oe]!==void 0&&je.push(be[oe+0],be[oe+1],be[oe+2])},addUV:function(K,ne,oe){var be=this.uvs,je=this.object.geometry.uvs;je.push(be[K+0],be[K+1]),je.push(be[ne+0],be[ne+1]),je.push(be[oe+0],be[oe+1])},addDefaultUV:function(){var K=this.object.geometry.uvs;K.push(0,0),K.push(0,0),K.push(0,0)},addUVLine:function(K){var ne=this.uvs;this.object.geometry.uvs.push(ne[K+0],ne[K+1])},addFace:function(K,ne,oe,be,je,Ie,ze,et,xt){var gt=this.vertices.length;K=this.parseVertexIndex(K,gt),ne=this.parseVertexIndex(ne,gt),oe=this.parseVertexIndex(oe,gt),this.addVertex(K,ne,oe),this.addColor(K,ne,oe),ze!==void 0&&ze!==""?(oe=this.normals.length,K=this.parseNormalIndex(ze,oe),ne=this.parseNormalIndex(et,oe),oe=this.parseNormalIndex(xt,oe),this.addNormal(K,ne,oe),this.object.geometry.hasNormalIndices=!0):this.addFaceNormal(K,ne,oe),be!==void 0&&be!==""?(ze=this.uvs.length,K=this.parseUVIndex(be,ze),ne=this.parseUVIndex(je,ze),oe=this.parseUVIndex(Ie,ze),this.addUV(K,ne,oe),this.object.geometry.hasUVIndices=!0):this.addDefaultUV()},addPointGeometry:function(K){this.object.geometry.type="Points";for(var ne=this.vertices.length,oe=0,be=K.length;oe<be;oe++)this.addVertexPoint(this.parseVertexIndex(K[oe],ne))},addLineGeometry:function(K,ne){this.object.geometry.type="Line";for(var oe=this.vertices.length,be=this.uvs.length,je=0,Ie=K.length;je<Ie;je++)this.addVertexLine(this.parseVertexIndex(K[je],oe));for(K=0,Ie=ne.length;K<Ie;K++)this.addUVLine(this.parseUVIndex(ne[K],be))}};return z.startObject("",!1),z}function e(z){Zi.call(this,z),this.materials=null}var r=/^[og]\s*(.+)?/,a=/^mtllib /,u=/^usemtl /,p=/^usemap /,y=new xe,C=new xe,S=new xe,R=new xe,N=new xe;return e.prototype=Ce(me(Zi.prototype),{constructor:e,load:function(Z,K,ne,oe){var be=this,je=new ja(be.manager);je.setPath(this.path),je.load(Z,function(Ie){try{K(be.parse(Ie))}catch(ze){oe?oe(ze):console.error(ze),be.manager.itemError(Z)}},ne,oe)},setMaterials:function(Z){return this.materials=Z,this},parse:function(Z){var K=new n;Z.indexOf(`\r
`)!==-1&&(Z=Z.replace(/\r\n/g,`
`)),Z.indexOf(`\\
`)!==-1&&(Z=Z.replace(/\\\n/g,""));var ne=Z.split(`
`),oe,be=typeof"".trimLeft=="function";Z=0;for(var je=ne.length;Z<je;Z++){var Ie=ne[Z];Ie=be?Ie.trimLeft():Ie.trim();var ze=Ie.length;if(ze!==0&&(ze=Ie.charAt(0),ze!=="#"))if(ze==="v")switch(Ie=Ie.split(/\s+/),Ie[0]){case"v":K.vertices.push(parseFloat(Ie[1]),parseFloat(Ie[2]),parseFloat(Ie[3])),7<=Ie.length?K.colors.push(parseFloat(Ie[4]),parseFloat(Ie[5]),parseFloat(Ie[6])):K.colors.push(void 0,void 0,void 0);break;case"vn":K.normals.push(parseFloat(Ie[1]),parseFloat(Ie[2]),parseFloat(Ie[3]));break;case"vt":K.uvs.push(parseFloat(Ie[1]),parseFloat(Ie[2]))}else if(ze==="f"){Ie=Ie.substr(1).trim();var et=Ie.split(/\s+/);for(Ie=[],ze=0,oe=et.length;ze<oe;ze++){var xt=et[ze];0<xt.length&&(xt=xt.split("/"),Ie.push(xt))}for(et=Ie[0],ze=1,oe=Ie.length-1;ze<oe;ze++){xt=Ie[ze];var gt=Ie[ze+1];K.addFace(et[0],xt[0],gt[0],et[1],xt[1],gt[1],et[2],xt[2],gt[2])}}else if(ze==="l"){if(ze=Ie.substring(1).trim().split(" "),oe=[],et=[],Ie.indexOf("/")===-1)oe=ze;else for(Ie=0,xt=ze.length;Ie<xt;Ie++)gt=ze[Ie].split("/"),gt[0]!==""&&oe.push(gt[0]),gt[1]!==""&&et.push(gt[1]);K.addLineGeometry(oe,et)}else ze==="p"?(Ie=Ie.substr(1).trim(),Ie=Ie.split(" "),K.addPointGeometry(Ie)):(oe=r.exec(Ie))!==null?(Ie=(" "+oe[0].substr(1).trim()).substr(1),K.startObject(Ie)):u.test(Ie)?K.object.startMaterial(Ie.substring(7).trim(),K.materialLibraries):a.test(Ie)?K.materialLibraries.push(Ie.substring(7).trim()):p.test(Ie)?console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.'):ze==="s"?(oe=Ie.split(" "),1<oe.length?(Ie=oe[1].trim().toLowerCase(),K.object.smooth=Ie!=="0"&&Ie!=="off"):K.object.smooth=!0,(Ie=K.object.currentMaterial())&&(Ie.smooth=K.object.smooth)):Ie!=="\0"&&console.warn('THREE.OBJLoader: Unexpected line: "'+Ie+'"')}for(K.finalize(),ne=new Ha,ne.materialLibraries=[].concat(K.materialLibraries),Z=0,je=K.objects.length;Z<je;Z++)if(be=K.objects[Z],Ie=be.geometry,ze=be.materials,oe=Ie.type==="Line",et=Ie.type==="Points",xt=!1,Ie.vertices.length!==0){gt=new $r,gt.setAttribute("position",new Or(Ie.vertices,3)),Ie.hasNormalIndices===!0&&gt.setAttribute("normal",new Or(Ie.normals,3)),0<Ie.colors.length&&(xt=!0,gt.setAttribute("color",new Or(Ie.colors,3))),Ie.hasUVIndices===!0&&gt.setAttribute("uv",new Or(Ie.uvs,2));for(var We=[],Rt=0,Pt=ze.length;Rt<Pt;Rt++){var pr=ze[Rt],Rr=pr.name+"_"+pr.smooth+"_"+xt;if(Ie=K.materials[Rr],this.materials!==null)if(Ie=this.materials.create(pr.name),!oe||!Ie||Ie instanceof Yi)!et||!Ie||Ie instanceof mu||(Tt=new mu({size:10,sizeAttenuation:!1}),Nr.prototype.copy.call(Tt,Ie),Tt.color.copy(Ie.color),Tt.map=Ie.map,Ie=Tt);else{var Tt=new Yi;Nr.prototype.copy.call(Tt,Ie),Tt.color.copy(Ie.color),Ie=Tt}Ie===void 0&&(Ie=oe?new Yi:et?new mu({size:1,sizeAttenuation:!1}):new Ga,Ie.name=pr.name,Ie.flatShading=!pr.smooth,Ie.vertexColors=xt,K.materials[Rr]=Ie),We.push(Ie)}if(1<We.length){for(Rt=0,Pt=ze.length;Rt<Pt;Rt++)pr=ze[Rt],gt.addGroup(pr.groupStart,pr.groupCount,Rt);Ie=oe?new da(gt,We):et?new Mh(gt,We):new oa(gt,We)}else Ie=oe?new da(gt,We[0]):et?new Mh(gt,We[0]):new oa(gt,We[0]);Ie.name=be.name,ne.add(Ie)}return ne}}),e}(),lA=function(){function n(qe){Zi.call(this,qe),this.ddsLoader=this.dracoLoader=null}function e(){var qe={};return{get:function(Me){return qe[Me]},add:function(Me,Je){qe[Me]=Je},remove:function(Me){delete qe[Me]},removeAll:function(){qe={}}}}function r(qe){if(!qe)throw Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=Rt.MSFT_TEXTURE_DDS,this.ddsLoader=qe}function a(qe){this.name=Rt.KHR_LIGHTS_PUNCTUAL,this.lightDefs=(qe.extensions&&qe.extensions[Rt.KHR_LIGHTS_PUNCTUAL]||{}).lights||[]}function u(){this.name=Rt.KHR_MATERIALS_UNLIT}function p(){this.name=Rt.KHR_MATERIALS_CLEARCOAT}function y(qe){this.name=Rt.KHR_BINARY_GLTF,this.body=this.content=null;var Le=new DataView(qe,0,pr);if(this.header={magic:Eg.decodeText(new Uint8Array(qe.slice(0,4))),version:Le.getUint32(4,!0),length:Le.getUint32(8,!0)},this.header.magic!==Pt)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(2>this.header.version)throw Error("THREE.GLTFLoader: Legacy binary file detected.");Le=new DataView(qe,pr);for(var Me=0;Me<Le.byteLength;){var Je=Le.getUint32(Me,!0);Me+=4;var de=Le.getUint32(Me,!0);Me+=4,de===Rr.JSON?(de=new Uint8Array(qe,pr+Me,Je),this.content=Eg.decodeText(de)):de===Rr.BIN&&(de=pr+Me,this.body=qe.slice(de,de+Je)),Me+=Je}if(this.content===null)throw Error("THREE.GLTFLoader: JSON content not found.")}function C(qe,Le){if(!Le)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rt.KHR_DRACO_MESH_COMPRESSION,this.json=qe,this.dracoLoader=Le,this.dracoLoader.preload()}function S(){this.name=Rt.KHR_TEXTURE_TRANSFORM}function R(qe){Sa.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var Le={specular:{value:new vt().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Le,this.onBeforeCompile=function(Me){for(var Je in Le)Me.uniforms[Je]=Le[Je];Me.fragmentShader=Me.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),Me.fragmentShader=Me.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),Me.fragmentShader=Me.fragmentShader.replace("#include <roughnessmap_pars_fragment>",`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`),Me.fragmentShader=Me.fragmentShader.replace("#include <metalnessmap_pars_fragment>",`#ifdef USE_GLOSSINESSMAP
	uniform sampler2D glossinessMap;
#endif`),Me.fragmentShader=Me.fragmentShader.replace("#include <roughnessmap_fragment>",`vec3 specularFactor = specular;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	texelSpecular = sRGBToLinear( texelSpecular );
	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture
	specularFactor *= texelSpecular.rgb;
#endif`),Me.fragmentShader=Me.fragmentShader.replace("#include <metalnessmap_fragment>",`float glossinessFactor = glossiness;
#ifdef USE_GLOSSINESSMAP
	vec4 texelGlossiness = texture2D( glossinessMap, vUv );
	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture
	glossinessFactor *= texelGlossiness.a;
#endif`),Me.fragmentShader=Me.fragmentShader.replace("#include <lights_physical_fragment>",`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.
material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
material.specularColor = specularFactor.rgb;`)},Zr(this,{specular:{get:function(){return Le.specular.value},set:function(Je){Le.specular.value=Je}},specularMap:{get:function(){return Le.specularMap.value},set:function(Je){Le.specularMap.value=Je}},glossiness:{get:function(){return Le.glossiness.value},set:function(Je){Le.glossiness.value=Je}},glossinessMap:{get:function(){return Le.glossinessMap.value},set:function(Je){(Le.glossinessMap.value=Je)?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(qe)}function N(){return{name:Rt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:"color map lightMap lightMapIntensity aoMap aoMapIntensity emissive emissiveIntensity emissiveMap bumpMap bumpScale normalMap normalMapType displacementMap displacementScale displacementBias specularMap specular glossinessMap glossiness alphaMap envMap envMapIntensity refractionRatio".split(" "),getMaterialType:function(){return R},extendParams:function(Le,Me,Je){var de=Me.extensions[this.name];if(Le.color=new vt(1,1,1),Le.opacity=1,Me=[],Array.isArray(de.diffuseFactor)){var Te=de.diffuseFactor;Le.color.fromArray(Te),Le.opacity=Te[3]}return de.diffuseTexture!==void 0&&Me.push(Je.assignTexture(Le,"map",de.diffuseTexture)),Le.emissive=new vt(0,0,0),Le.glossiness=de.glossinessFactor!==void 0?de.glossinessFactor:1,Le.specular=new vt(1,1,1),Array.isArray(de.specularFactor)&&Le.specular.fromArray(de.specularFactor),de.specularGlossinessTexture!==void 0&&(de=de.specularGlossinessTexture,Me.push(Je.assignTexture(Le,"glossinessMap",de)),Me.push(Je.assignTexture(Le,"specularMap",de))),Si.all(Me)},createMaterial:function(Le){var Me=new R(Le);return Me.fog=!0,Me.color=Le.color,Me.map=Le.map===void 0?null:Le.map,Me.lightMap=null,Me.lightMapIntensity=1,Me.aoMap=Le.aoMap===void 0?null:Le.aoMap,Me.aoMapIntensity=1,Me.emissive=Le.emissive,Me.emissiveIntensity=1,Me.emissiveMap=Le.emissiveMap===void 0?null:Le.emissiveMap,Me.bumpMap=Le.bumpMap===void 0?null:Le.bumpMap,Me.bumpScale=1,Me.normalMap=Le.normalMap===void 0?null:Le.normalMap,Me.normalMapType=0,Le.normalScale&&(Me.normalScale=Le.normalScale),Me.displacementMap=null,Me.displacementScale=1,Me.displacementBias=0,Me.specularMap=Le.specularMap===void 0?null:Le.specularMap,Me.specular=Le.specular,Me.glossinessMap=Le.glossinessMap===void 0?null:Le.glossinessMap,Me.glossiness=Le.glossiness,Me.alphaMap=null,Me.envMap=Le.envMap===void 0?null:Le.envMap,Me.envMapIntensity=1,Me.refractionRatio=.98,Me}}}function z(){this.name=Rt.KHR_MESH_QUANTIZATION}function Z(qe,Le,Me,Je){Ni.call(this,qe,Le,Me,Je)}function K(qe,Le){return typeof qe!="string"||qe===""?"":(/^https?:\/\//i.test(Le)&&/^\//.test(qe)&&(Le=Le.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(qe)||/^data:.*,.*$/i.test(qe)||/^blob:.*$/i.test(qe)?qe:Le+qe)}function ne(qe){return qe.DefaultMaterial===void 0&&(qe.DefaultMaterial=new Sa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),qe.DefaultMaterial}function oe(qe,Le,Me){for(var Je in Me.extensions)qe[Je]===void 0&&(Le.userData.gltfExtensions=Le.userData.gltfExtensions||{},Le.userData.gltfExtensions[Je]=Me.extensions[Je])}function be(qe,Le){Le.extras!==void 0&&(Jn(Le.extras)==="object"?Ce(qe.userData,Le.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Le.extras))}function je(qe,Le,Me){for(var Je=!1,de=!1,Te=0,Fe=Le.length;Te<Fe;Te++){var Ve=Le[Te];if(Ve.POSITION!==void 0&&(Je=!0),Ve.NORMAL!==void 0&&(de=!0),Je&&de)break}if(!Je&&!de)return Si.resolve(qe);var at=[],It=[];for(Te=0,Fe=Le.length;Te<Fe;Te++){if(Ve=Le[Te],Je){var Xe=Ve.POSITION!==void 0?Me.getDependency("accessor",Ve.POSITION):qe.attributes.position;at.push(Xe)}de&&(Xe=Ve.NORMAL!==void 0?Me.getDependency("accessor",Ve.NORMAL):qe.attributes.normal,It.push(Xe))}return Si.all([Si.all(at),Si.all(It)]).then(function(ot){var lr=ot[0];return ot=ot[1],Je&&(qe.morphAttributes.position=lr),de&&(qe.morphAttributes.normal=ot),qe.morphTargetsRelative=!0,qe})}function Ie(qe){var Le=qe.extensions&&qe.extensions[Rt.KHR_DRACO_MESH_COMPRESSION];return Le?"draco:"+Le.bufferView+":"+Le.indices+":"+ze(Le.attributes):qe.indices+":"+ze(qe.attributes)+":"+qe.mode}function ze(qe){for(var Le="",Me=Ei(qe).sort(),Je=0,de=Me.length;Je<de;Je++)Le+=Me[Je]+":"+qe[Me[Je]]+";";return Le}function et(qe,Le,Me){this.json=qe||{},this.extensions=Le||{},this.options=Me||{},this.cache=new e,this.associations=new Po,this.primitiveCache={},this.textureLoader=new _n(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new ja(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}function xt(qe,Le,Me){var Je=Le.attributes,de=new Ui;if(Je.POSITION!==void 0){var Te=Me.json.accessors[Je.POSITION];if(Je=Te.min,Te=Te.max,Je!==void 0&&Te!==void 0){if(de.set(new xe(Je[0],Je[1],Je[2]),new xe(Te[0],Te[1],Te[2])),Le=Le.targets,Le!==void 0){for(var Fe=new xe,Ve=new xe,at=0,It=Le.length;at<It;at++)Je=Le[at],Je.POSITION!==void 0&&(Te=Me.json.accessors[Je.POSITION],Je=Te.min,Te=Te.max,Je!==void 0&&Te!==void 0?(Ve.setX(Math.max(Math.abs(Je[0]),Math.abs(Te[0]))),Ve.setY(Math.max(Math.abs(Je[1]),Math.abs(Te[1]))),Ve.setZ(Math.max(Math.abs(Je[2]),Math.abs(Te[2]))),Fe.max(Ve)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."));de.expandByVector(Fe)}qe.boundingBox=de,Me=new Ko,de.getCenter(Me.center),Me.radius=de.min.distanceTo(de.max)/2,qe.boundingSphere=Me}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function gt(qe,Le,Me){function Je(at,It){return Me.getDependency("accessor",at).then(function(Xe){qe.setAttribute(It,Xe)})}var de=Le.attributes,Te=[],Fe;for(Fe in de){var Ve=ai[Fe]||Fe.toLowerCase();Ve in qe.attributes||Te.push(Je(de[Fe],Ve))}return Le.indices===void 0||qe.index||(de=Me.getDependency("accessor",Le.indices).then(function(at){qe.setIndex(at)}),Te.push(de)),be(qe,Le),xt(qe,Le,Me),Si.all(Te).then(function(){return Le.targets!==void 0?je(qe,Le.targets,Me):qe})}function We(qe,Le){var Me=qe.getIndex();if(Me===null){var Je=[];if(Me=qe.getAttribute("position"),Me!==void 0){for(var de=0;de<Me.count;de++)Je.push(de);qe.setIndex(Je),Me=qe.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),qe}var Te=Me.count-2;if(Je=[],Le===2)for(de=1;de<=Te;de++)Je.push(Me.getX(0)),Je.push(Me.getX(de)),Je.push(Me.getX(de+1));else for(de=0;de<Te;de++)de%2==0?(Je.push(Me.getX(de)),Je.push(Me.getX(de+1)),Je.push(Me.getX(de+2))):(Je.push(Me.getX(de+2)),Je.push(Me.getX(de+1)),Je.push(Me.getX(de)));return Je.length/3!==Te&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles."),qe=qe.clone(),qe.setIndex(Je),qe}n.prototype=Ce(me(Zi.prototype),{constructor:n,load:function(Le,Me,Je,de){var Te=this,Fe=this.resourcePath!==""?this.resourcePath:this.path!==""?this.path:Eg.extractUrlBase(Le);Te.manager.itemStart(Le);var Ve=function(Xe){de?de(Xe):console.error(Xe),Te.manager.itemError(Le),Te.manager.itemEnd(Le)},at=new ja(Te.manager);at.setPath(this.path),at.setResponseType("arraybuffer"),at.setRequestHeader(this.requestHeader),Te.crossOrigin==="use-credentials"&&at.setWithCredentials(!0),at.load(Le,function(It){try{Te.parse(It,Fe,function(Xe){Me(Xe),Te.manager.itemEnd(Le)},Ve)}catch(Xe){Ve(Xe)}},Je,Ve)},setDRACOLoader:function(Le){return this.dracoLoader=Le,this},setDDSLoader:function(Le){return this.ddsLoader=Le,this},parse:function(Le,Me,Je,de){var Te={};if(typeof Le!="string")if(Eg.decodeText(new Uint8Array(Le,0,4))===Pt){try{Te[Rt.KHR_BINARY_GLTF]=new y(Le)}catch(It){de&&de(It);return}Le=Te[Rt.KHR_BINARY_GLTF].content}else Le=Eg.decodeText(new Uint8Array(Le));if(Le=JSON.parse(Le),Le.asset===void 0||2>Le.asset.version[0])de&&de(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(Le.extensionsUsed)for(var Fe=0;Fe<Le.extensionsUsed.length;++Fe){var Ve=Le.extensionsUsed[Fe],at=Le.extensionsRequired||[];switch(Ve){case Rt.KHR_LIGHTS_PUNCTUAL:Te[Ve]=new a(Le);break;case Rt.KHR_MATERIALS_CLEARCOAT:Te[Ve]=new p;break;case Rt.KHR_MATERIALS_UNLIT:Te[Ve]=new u;break;case Rt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Te[Ve]=new N;break;case Rt.KHR_DRACO_MESH_COMPRESSION:Te[Ve]=new C(Le,this.dracoLoader);break;case Rt.MSFT_TEXTURE_DDS:Te[Ve]=new r(this.ddsLoader);break;case Rt.KHR_TEXTURE_TRANSFORM:Te[Ve]=new S;break;case Rt.KHR_MESH_QUANTIZATION:Te[Ve]=new z;break;default:0<=at.indexOf(Ve)&&console.warn('THREE.GLTFLoader: Unknown extension "'+Ve+'".')}}Me=new et(Le,Te,{path:Me||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}),Me.fileLoader.setRequestHeader(this.requestHeader),Me.parse(Je,de)}}});var Rt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};a.prototype.loadLight=function(qe){var Le=this.lightDefs[qe],Me=new vt(16777215);Le.color!==void 0&&Me.fromArray(Le.color);var Je=Le.range!==void 0?Le.range:0;switch(Le.type){case"directional":Me=new Ee(Me),Me.target.position.set(0,0,-1),Me.add(Me.target);break;case"point":Me=new Ih(Me),Me.distance=Je;break;case"spot":Me=new tg(Me),Me.distance=Je,Le.spot=Le.spot||{},Le.spot.innerConeAngle=Le.spot.innerConeAngle!==void 0?Le.spot.innerConeAngle:0,Le.spot.outerConeAngle=Le.spot.outerConeAngle!==void 0?Le.spot.outerConeAngle:Math.PI/4,Me.angle=Le.spot.outerConeAngle,Me.penumbra=1-Le.spot.innerConeAngle/Le.spot.outerConeAngle,Me.target.position.set(0,0,-1),Me.add(Me.target);break;default:throw Error('THREE.GLTFLoader: Unexpected light type, "'+Le.type+'".')}return Me.position.set(0,0,0),Me.decay=2,Le.intensity!==void 0&&(Me.intensity=Le.intensity),Me.name=Le.name||"light_"+qe,Si.resolve(Me)},u.prototype.getMaterialType=function(){return wr},u.prototype.extendParams=function(qe,Le,Me){var Je=[];if(qe.color=new vt(1,1,1),qe.opacity=1,Le=Le.pbrMetallicRoughness){if(Array.isArray(Le.baseColorFactor)){var de=Le.baseColorFactor;qe.color.fromArray(de),qe.opacity=de[3]}Le.baseColorTexture!==void 0&&Je.push(Me.assignTexture(qe,"map",Le.baseColorTexture))}return Si.all(Je)},p.prototype.getMaterialType=function(){return Kc},p.prototype.extendParams=function(qe,Le,Me){var Je=[];return Le=Le.extensions[this.name],Le.clearcoatFactor!==void 0&&(qe.clearcoat=Le.clearcoatFactor),Le.clearcoatTexture!==void 0&&Je.push(Me.assignTexture(qe,"clearcoatMap",Le.clearcoatTexture)),Le.clearcoatRoughnessFactor!==void 0&&(qe.clearcoatRoughness=Le.clearcoatRoughnessFactor),Le.clearcoatRoughnessTexture!==void 0&&Je.push(Me.assignTexture(qe,"clearcoatRoughnessMap",Le.clearcoatRoughnessTexture)),Le.clearcoatNormalTexture!==void 0&&(Je.push(Me.assignTexture(qe,"clearcoatNormalMap",Le.clearcoatNormalTexture)),Le.clearcoatNormalTexture.scale!==void 0&&(Me=Le.clearcoatNormalTexture.scale,qe.clearcoatNormalScale=new ce(Me,Me))),Si.all(Je)};var Pt="glTF",pr=12,Rr={JSON:1313821514,BIN:5130562};C.prototype.decodePrimitive=function(qe,Le){var Me=this.json,Je=this.dracoLoader,de=qe.extensions[this.name].bufferView,Te=qe.extensions[this.name].attributes,Fe={},Ve={},at={},It;for(It in Te){var Xe=ai[It]||It.toLowerCase();Fe[Xe]=Te[It]}for(It in qe.attributes)if(Xe=ai[It]||It.toLowerCase(),Te[It]!==void 0){var ot=Me.accessors[qe.attributes[It]];at[Xe]=Tt[ot.componentType],Ve[Xe]=ot.normalized===!0}return Le.getDependency("bufferView",de).then(function(lr){return new Si(function(Ft){Je.decodeDracoFile(lr,function(Jt){for(var Ht in Jt.attributes){var mn=Jt.attributes[Ht],Zn=Ve[Ht];Zn!==void 0&&(mn.normalized=Zn)}Ft(Jt)},Fe,at)})})},S.prototype.extendTexture=function(qe,Le){return qe=qe.clone(),Le.offset!==void 0&&qe.offset.fromArray(Le.offset),Le.rotation!==void 0&&(qe.rotation=Le.rotation),Le.scale!==void 0&&qe.repeat.fromArray(Le.scale),Le.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),qe.needsUpdate=!0,qe},R.prototype=me(Sa.prototype),R.prototype.constructor=R,R.prototype.copy=function(qe){return Sa.prototype.copy.call(this,qe),this.specularMap=qe.specularMap,this.specular.copy(qe.specular),this.glossinessMap=qe.glossinessMap,this.glossiness=qe.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},Z.prototype=me(Ni.prototype),Z.prototype.constructor=Z,Z.prototype.copySampleValue_=function(qe){var Le=this.resultBuffer,Me=this.sampleValues,Je=this.valueSize;qe=qe*Je*3+Je;for(var de=0;de!==Je;de++)Le[de]=Me[qe+de];return Le},Z.prototype.beforeStart_=Z.prototype.copySampleValue_,Z.prototype.afterEnd_=Z.prototype.copySampleValue_,Z.prototype.interpolate_=function(qe,Le,Me,Je){var de=this.resultBuffer,Te=this.sampleValues,Fe=this.valueSize,Ve=2*Fe,at=3*Fe;Je-=Le,Le=(Me-Le)/Je,Me=Le*Le;var It=Me*Le;qe*=at,at=qe-at;var Xe=-2*It+3*Me;It-=Me;var ot=1-Xe;for(Le=It-Me+Le,Me=0;Me!==Fe;Me++)de[Me]=ot*Te[at+Me+Fe]+Le*Te[at+Me+Ve]*Je+Xe*Te[qe+Me+Fe]+It*Te[qe+Me]*Je;return de};var Tt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},gn={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},tr={33071:1001,33648:1002,10497:1e3},bn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ai={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},wn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Yo={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300},On={"image/png":1023,"image/jpeg":1022};return et.prototype.parse=function(qe,Le){var Me=this,Je=this.json,de=this.extensions;this.cache.removeAll(),this.markDefs(),Si.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(Te){Te={scene:Te[0][Je.scene||0],scenes:Te[0],animations:Te[1],cameras:Te[2],asset:Je.asset,parser:Me,userData:{}},oe(de,Te,Je),be(Te,Je),qe(Te)}).catch(Le)},et.prototype.markDefs=function(){for(var qe=this.json.nodes||[],Le=this.json.skins||[],Me=this.json.meshes||[],Je={},de={},Te=0,Fe=Le.length;Te<Fe;Te++)for(var Ve=Le[Te].joints,at=0,It=Ve.length;at<It;at++)qe[Ve[at]].isBone=!0;for(Le=0,Te=qe.length;Le<Te;Le++)Fe=qe[Le],Fe.mesh!==void 0&&(Je[Fe.mesh]===void 0&&(Je[Fe.mesh]=de[Fe.mesh]=0),Je[Fe.mesh]++,Fe.skin!==void 0&&(Me[Fe.mesh].isSkinnedMesh=!0));this.json.meshReferences=Je,this.json.meshUses=de},et.prototype.getDependency=function(qe,Le){var Me=qe+":"+Le,Je=this.cache.get(Me);if(!Je){switch(qe){case"scene":Je=this.loadScene(Le);break;case"node":Je=this.loadNode(Le);break;case"mesh":Je=this.loadMesh(Le);break;case"accessor":Je=this.loadAccessor(Le);break;case"bufferView":Je=this.loadBufferView(Le);break;case"buffer":Je=this.loadBuffer(Le);break;case"material":Je=this.loadMaterial(Le);break;case"texture":Je=this.loadTexture(Le);break;case"skin":Je=this.loadSkin(Le);break;case"animation":Je=this.loadAnimation(Le);break;case"camera":Je=this.loadCamera(Le);break;case"light":Je=this.extensions[Rt.KHR_LIGHTS_PUNCTUAL].loadLight(Le);break;default:throw Error("Unknown type: "+qe)}this.cache.add(Me,Je)}return Je},et.prototype.getDependencies=function(qe){var Le=this.cache.get(qe);if(!Le){var Me=this;Le=Si.all((this.json[qe+(qe==="mesh"?"es":"s")]||[]).map(function(Je,de){return Me.getDependency(qe,de)})),this.cache.add(qe,Le)}return Le},et.prototype.loadBuffer=function(qe){var Le=this.json.buffers[qe],Me=this.fileLoader;if(Le.type&&Le.type!=="arraybuffer")throw Error("THREE.GLTFLoader: "+Le.type+" buffer type is not supported.");if(Le.uri===void 0&&qe===0)return Si.resolve(this.extensions[Rt.KHR_BINARY_GLTF].body);var Je=this.options;return new Si(function(de,Te){Me.load(K(Le.uri,Je.path),de,void 0,function(){Te(Error('THREE.GLTFLoader: Failed to load buffer "'+Le.uri+'".'))})})},et.prototype.loadBufferView=function(qe){var Le=this.json.bufferViews[qe];return this.getDependency("buffer",Le.buffer).then(function(Me){var Je=Le.byteOffset||0;return Me.slice(Je,Je+(Le.byteLength||0))})},et.prototype.loadAccessor=function(qe){var Le=this,Me=this.json,Je=this.json.accessors[qe];return Je.bufferView===void 0&&Je.sparse===void 0?Si.resolve(null):(qe=[],Je.bufferView!==void 0?qe.push(this.getDependency("bufferView",Je.bufferView)):qe.push(null),Je.sparse!==void 0&&(qe.push(this.getDependency("bufferView",Je.sparse.indices.bufferView)),qe.push(this.getDependency("bufferView",Je.sparse.values.bufferView))),Si.all(qe).then(function(de){var Te=de[0],Fe=bn[Je.type],Ve=Tt[Je.componentType],at=Ve.BYTES_PER_ELEMENT,It=Je.byteOffset||0,Xe=Je.bufferView!==void 0?Me.bufferViews[Je.bufferView].byteStride:void 0,ot=Je.normalized===!0;if(Xe&&Xe!==at*Fe){var lr=Math.floor(It/Xe),Ft="InterleavedBuffer:"+Je.bufferView+":"+Je.componentType+":"+lr+":"+Je.count,Jt=Le.cache.get(Ft);Jt||(lr=new Ve(Te,lr*Xe,Je.count*Xe/at),Jt=new Gu(lr,Xe/at),Le.cache.add(Ft,Jt)),at=new Us(Jt,Fe,It%Xe/at,ot)}else lr=Te===null?new Ve(Je.count*Fe):new Ve(Te,It,Je.count*Fe),at=new Jr(lr,Fe,ot);if(Je.sparse!==void 0){for(Xe=Je.sparse.values.byteOffset||0,It=new Tt[Je.sparse.indices.componentType](de[1],Je.sparse.indices.byteOffset||0,Je.sparse.count*bn.SCALAR),de=new Ve(de[2],Xe,Je.sparse.count*Fe),Te!==null&&(at=new Jr(at.array.slice(),at.itemSize,at.normalized)),Te=0,Ve=It.length;Te<Ve;Te++)if(Xe=It[Te],at.setX(Xe,de[Te*Fe]),2<=Fe&&at.setY(Xe,de[Te*Fe+1]),3<=Fe&&at.setZ(Xe,de[Te*Fe+2]),4<=Fe&&at.setW(Xe,de[Te*Fe+3]),5<=Fe)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}return at}))},et.prototype.loadTexture=function(qe){var Le=this,Me=this.json,Je=this.options,de=this.textureLoader,Te=self.URL||self.webkitURL,Fe=Me.textures[qe],Ve=Fe.extensions||{},at=Ve[Rt.MSFT_TEXTURE_DDS]?Me.images[Ve[Rt.MSFT_TEXTURE_DDS].source]:Me.images[Fe.source],It=at.uri,Xe=!1;return at.bufferView!==void 0&&(It=Le.getDependency("bufferView",at.bufferView).then(function(ot){return Xe=!0,ot=new Blob([ot],{type:at.mimeType}),It=Te.createObjectURL(ot)})),Si.resolve(It).then(function(ot){var lr=Je.manager.getHandler(ot);return lr||(lr=Ve[Rt.MSFT_TEXTURE_DDS]?Le.extensions[Rt.MSFT_TEXTURE_DDS].ddsLoader:de),new Si(function(Ft,Jt){lr.load(K(ot,Je.path),Ft,void 0,Jt)})}).then(function(ot){Xe===!0&&Te.revokeObjectURL(It),ot.flipY=!1,Fe.name&&(ot.name=Fe.name),at.mimeType in On&&(ot.format=On[at.mimeType]);var lr=(Me.samplers||{})[Fe.sampler]||{};return ot.magFilter=gn[lr.magFilter]||1006,ot.minFilter=gn[lr.minFilter]||1008,ot.wrapS=tr[lr.wrapS]||1e3,ot.wrapT=tr[lr.wrapT]||1e3,Le.associations.set(ot,{type:"textures",index:qe}),ot})},et.prototype.assignTexture=function(qe,Le,Me){var Je=this;return this.getDependency("texture",Me.index).then(function(de){if(!de.isCompressedTexture)switch(Le){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":de.format=1022}if(Me.texCoord===void 0||Me.texCoord==0||Le==="aoMap"&&Me.texCoord==1||console.warn("THREE.GLTFLoader: Custom UV set "+Me.texCoord+" for texture "+Le+" not yet supported."),Je.extensions[Rt.KHR_TEXTURE_TRANSFORM]){var Te=Me.extensions!==void 0?Me.extensions[Rt.KHR_TEXTURE_TRANSFORM]:void 0;if(Te){var Fe=Je.associations.get(de);de=Je.extensions[Rt.KHR_TEXTURE_TRANSFORM].extendTexture(de,Te),Je.associations.set(de,Fe)}}qe[Le]=de})},et.prototype.assignFinalMaterial=function(qe){var Le=qe.geometry,Me=qe.material,Je=Le.attributes.tangent!==void 0,de=Le.attributes.color!==void 0,Te=Le.attributes.normal===void 0,Fe=qe.isSkinnedMesh===!0,Ve=0<Ei(Le.morphAttributes).length,at=Ve&&Le.morphAttributes.normal!==void 0;if(qe.isPoints){var It="PointsMaterial:"+Me.uuid,Xe=this.cache.get(It);Xe||(Xe=new mu,Nr.prototype.copy.call(Xe,Me),Xe.color.copy(Me.color),Xe.map=Me.map,Xe.sizeAttenuation=!1,this.cache.add(It,Xe)),Me=Xe}else qe.isLine&&(It="LineBasicMaterial:"+Me.uuid,Xe=this.cache.get(It),Xe||(Xe=new Yi,Nr.prototype.copy.call(Xe,Me),Xe.color.copy(Me.color),this.cache.add(It,Xe)),Me=Xe);(Je||de||Te||Fe||Ve)&&(It="ClonedMaterial:"+Me.uuid+":",Me.isGLTFSpecularGlossinessMaterial&&(It+="specular-glossiness:"),Fe&&(It+="skinning:"),Je&&(It+="vertex-tangents:"),de&&(It+="vertex-colors:"),Te&&(It+="flat-shading:"),Ve&&(It+="morph-targets:"),at&&(It+="morph-normals:"),Xe=this.cache.get(It),Xe||(Xe=Me.clone(),Fe&&(Xe.skinning=!0),Je&&(Xe.vertexTangents=!0),de&&(Xe.vertexColors=!0),Te&&(Xe.flatShading=!0),Ve&&(Xe.morphTargets=!0),at&&(Xe.morphNormals=!0),this.cache.add(It,Xe),this.associations.set(Xe,this.associations.get(Me))),Me=Xe),Me.aoMap&&Le.attributes.uv2===void 0&&Le.attributes.uv!==void 0&&Le.setAttribute("uv2",Le.attributes.uv),Me.normalScale&&!Je&&(Me.normalScale.y=-Me.normalScale.y),Me.clearcoatNormalScale&&!Je&&(Me.clearcoatNormalScale.y=-Me.clearcoatNormalScale.y),qe.material=Me},et.prototype.loadMaterial=function(qe){var Le=this,Me=this.extensions,Je=this.json.materials[qe],de={},Te=Je.extensions||{},Fe=[];if(Te[Rt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var Ve=Me[Rt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS],at=Ve.getMaterialType();Fe.push(Ve.extendParams(de,Je,Le))}else if(Te[Rt.KHR_MATERIALS_UNLIT])Ve=Me[Rt.KHR_MATERIALS_UNLIT],at=Ve.getMaterialType(),Fe.push(Ve.extendParams(de,Je,Le));else{if(at=Sa,Ve=Je.pbrMetallicRoughness||{},de.color=new vt(1,1,1),de.opacity=1,Array.isArray(Ve.baseColorFactor)){var It=Ve.baseColorFactor;de.color.fromArray(It),de.opacity=It[3]}Ve.baseColorTexture!==void 0&&Fe.push(Le.assignTexture(de,"map",Ve.baseColorTexture)),de.metalness=Ve.metallicFactor!==void 0?Ve.metallicFactor:1,de.roughness=Ve.roughnessFactor!==void 0?Ve.roughnessFactor:1,Ve.metallicRoughnessTexture!==void 0&&(Fe.push(Le.assignTexture(de,"metalnessMap",Ve.metallicRoughnessTexture)),Fe.push(Le.assignTexture(de,"roughnessMap",Ve.metallicRoughnessTexture)))}return Je.doubleSided===!0&&(de.side=2),Ve=Je.alphaMode||"OPAQUE",Ve==="BLEND"?(de.transparent=!0,de.depthWrite=!1):(de.transparent=!1,Ve==="MASK"&&(de.alphaTest=Je.alphaCutoff!==void 0?Je.alphaCutoff:.5)),Je.normalTexture!==void 0&&at!==wr&&(Fe.push(Le.assignTexture(de,"normalMap",Je.normalTexture)),de.normalScale=new ce(1,1),Je.normalTexture.scale!==void 0&&de.normalScale.set(Je.normalTexture.scale,Je.normalTexture.scale)),Je.occlusionTexture!==void 0&&at!==wr&&(Fe.push(Le.assignTexture(de,"aoMap",Je.occlusionTexture)),Je.occlusionTexture.strength!==void 0&&(de.aoMapIntensity=Je.occlusionTexture.strength)),Je.emissiveFactor!==void 0&&at!==wr&&(de.emissive=new vt().fromArray(Je.emissiveFactor)),Je.emissiveTexture!==void 0&&at!==wr&&Fe.push(Le.assignTexture(de,"emissiveMap",Je.emissiveTexture)),Te[Rt.KHR_MATERIALS_CLEARCOAT]&&(Ve=Me[Rt.KHR_MATERIALS_CLEARCOAT],at=Ve.getMaterialType(),Fe.push(Ve.extendParams(de,{extensions:Te},Le))),Si.all(Fe).then(function(){var Xe=at===R?Me[Rt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(de):new at(de);return Je.name&&(Xe.name=Je.name),Xe.map&&(Xe.map.encoding=3001),Xe.emissiveMap&&(Xe.emissiveMap.encoding=3001),be(Xe,Je),Le.associations.set(Xe,{type:"materials",index:qe}),Je.extensions&&oe(Me,Xe,Je),Xe})},et.prototype.loadGeometries=function(qe){function Le(ot){return Je[Rt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(ot,Me).then(function(lr){return gt(lr,ot,Me)})}for(var Me=this,Je=this.extensions,de=this.primitiveCache,Te=[],Fe=0,Ve=qe.length;Fe<Ve;Fe++){var at=qe[Fe],It=Ie(at),Xe=de[It];Xe?Te.push(Xe.promise):(Xe=at.extensions&&at.extensions[Rt.KHR_DRACO_MESH_COMPRESSION]?Le(at):gt(new $r,at,Me),de[It]={primitive:at,promise:Xe},Te.push(Xe))}return Si.all(Te)},et.prototype.loadMesh=function(qe){for(var Le=this,Me=this.json.meshes[qe],Je=Me.primitives,de=[],Te=0,Fe=Je.length;Te<Fe;Te++){var Ve=Je[Te].material===void 0?ne(this.cache):this.getDependency("material",Je[Te].material);de.push(Ve)}return de.push(Le.loadGeometries(Je)),Si.all(de).then(function(at){var It=at.slice(0,at.length-1),Xe=at[at.length-1];at=[];for(var ot=0,lr=Xe.length;ot<lr;ot++){var Ft=Xe[ot],Jt=Je[ot],Ht=It[ot];if(Jt.mode===4||Jt.mode===5||Jt.mode===6||Jt.mode===void 0)Ft=Me.isSkinnedMesh===!0?new Wc(Ft,Ht):new oa(Ft,Ht),Ft.isSkinnedMesh!==!0||Ft.geometry.attributes.skinWeight.normalized||Ft.normalizeSkinWeights(),Jt.mode===5?Ft.geometry=We(Ft.geometry,1):Jt.mode===6&&(Ft.geometry=We(Ft.geometry,2));else if(Jt.mode===1)Ft=new da(Ft,Ht);else if(Jt.mode===3)Ft=new ks(Ft,Ht);else if(Jt.mode===2)Ft=new Kd(Ft,Ht);else if(Jt.mode===0)Ft=new Mh(Ft,Ht);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+Jt.mode);if(0<Ei(Ft.geometry.morphAttributes).length){Jt=Ft;var mn=Me;if(Jt.updateMorphTargets(),mn.weights!==void 0){Ht=0;for(var Zn=mn.weights.length;Ht<Zn;Ht++)Jt.morphTargetInfluences[Ht]=mn.weights[Ht]}if(mn.extras&&Array.isArray(mn.extras.targetNames))if(mn=mn.extras.targetNames,Jt.morphTargetInfluences.length===mn.length)for(Jt.morphTargetDictionary={},Ht=0,Zn=mn.length;Ht<Zn;Ht++)Jt.morphTargetDictionary[mn[Ht]]=Ht;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}Ft.name=Me.name||"mesh_"+qe,1<Xe.length&&(Ft.name+="_"+ot),be(Ft,Me),Le.assignFinalMaterial(Ft),at.push(Ft)}if(at.length===1)return at[0];for(It=new Ha,ot=0,lr=at.length;ot<lr;ot++)It.add(at[ot]);return It})},et.prototype.loadCamera=function(qe){var Le;qe=this.json.cameras[qe];var Me=qe[qe.type];if(Me)return qe.type==="perspective"?Le=new qa(Bi.radToDeg(Me.yfov),Me.aspectRatio||1,Me.znear||1,Me.zfar||2e6):qe.type==="orthographic"&&(Le=new Mu(-Me.xmag,Me.xmag,Me.ymag,-Me.ymag,Me.znear,Me.zfar)),qe.name&&(Le.name=qe.name),be(Le,qe),Si.resolve(Le);console.warn("THREE.GLTFLoader: Missing camera parameters.")},et.prototype.loadSkin=function(qe){qe=this.json.skins[qe];var Le={joints:qe.joints};return qe.inverseBindMatrices===void 0?Si.resolve(Le):this.getDependency("accessor",qe.inverseBindMatrices).then(function(Me){return Le.inverseBindMatrices=Me,Le})},et.prototype.loadAnimation=function(qe){for(var Le=this.json.animations[qe],Me=[],Je=[],de=[],Te=[],Fe=[],Ve=0,at=Le.channels.length;Ve<at;Ve++){var It=Le.channels[Ve],Xe=Le.samplers[It.sampler];It=It.target;var ot=Le.parameters!==void 0?Le.parameters[Xe.input]:Xe.input,lr=Le.parameters!==void 0?Le.parameters[Xe.output]:Xe.output;Me.push(this.getDependency("node",It.node!==void 0?It.node:It.id)),Je.push(this.getDependency("accessor",ot)),de.push(this.getDependency("accessor",lr)),Te.push(Xe),Fe.push(It)}return Si.all([Si.all(Me),Si.all(Je),Si.all(de),Si.all(Te),Si.all(Fe)]).then(function(Ft){var Jt=Ft[0],Ht=Ft[1],mn=Ft[2],Zn=Ft[3];Ft=Ft[4];for(var nr=[],Ln=0,Sn=Jt.length;Ln<Sn;Ln++){var Kr=Jt[Ln],Ca=Ht[Ln],Eo=mn[Ln],lc=Zn[Ln],Od=Ft[Ln];if(Kr!==void 0){switch(Kr.updateMatrix(),Kr.matrixAutoUpdate=!0,wn[Od.path]){case wn.weights:var Nm=Mc;break;case wn.rotation:Nm=$l;break;default:Nm=Ll}var Wh=Kr.name?Kr.name:Kr.uuid,bg=lc.interpolation!==void 0?Yo[lc.interpolation]:2301,Lg=[];if(wn[Od.path]===wn.weights?Kr.traverse(function(Nu){Nu.isMesh===!0&&Nu.morphTargetInfluences&&Lg.push(Nu.name?Nu.name:Nu.uuid)}):Lg.push(Wh),Kr=Eo.array,Eo.normalized){if(Kr.constructor===Int8Array)var xh=1/127;else if(Kr.constructor===Uint8Array)xh=1/255;else if(Kr.constructor==Int16Array)xh=1/32767;else if(Kr.constructor===Uint16Array)xh=1/65535;else throw Error("THREE.GLTFLoader: Unsupported output accessor component type.");var Op=new Float32Array(Kr.length);for(Eo=0,Wh=Kr.length;Eo<Wh;Eo++)Op[Eo]=Kr[Eo]*xh;Kr=Op}for(Eo=0,Wh=Lg.length;Eo<Wh;Eo++)xh=new Nm(Lg[Eo]+"."+wn[Od.path],Ca.array,Kr,bg),lc.interpolation==="CUBICSPLINE"&&(xh.createInterpolant=function(Nu){return new Z(this.times,this.values,this.getValueSize()/3,Nu)},xh.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),nr.push(xh)}}return new Ta(Le.name?Le.name:"animation_"+qe,void 0,nr)})},et.prototype.loadNode=function(qe){var Le=this.json,Me=this.extensions,Je=this,de=Le.meshReferences,Te=Le.meshUses,Fe=Le.nodes[qe];return function(){var Ve=[];return Fe.mesh!==void 0&&Ve.push(Je.getDependency("mesh",Fe.mesh).then(function(at){if(1<de[Fe.mesh]){var It=Te[Fe.mesh]++;at=at.clone(),at.name+="_instance_"+It}return Fe.weights!==void 0&&at.traverse(function(Xe){if(Xe.isMesh)for(var ot=0,lr=Fe.weights.length;ot<lr;ot++)Xe.morphTargetInfluences[ot]=Fe.weights[ot]}),at})),Fe.camera!==void 0&&Ve.push(Je.getDependency("camera",Fe.camera)),Fe.extensions&&Fe.extensions[Rt.KHR_LIGHTS_PUNCTUAL]&&Fe.extensions[Rt.KHR_LIGHTS_PUNCTUAL].light!==void 0&&Ve.push(Je.getDependency("light",Fe.extensions[Rt.KHR_LIGHTS_PUNCTUAL].light)),Si.all(Ve)}().then(function(Ve){var at=Fe.isBone===!0?new ef:1<Ve.length?new Ha:Ve.length===1?Ve[0]:new Cr;if(at!==Ve[0])for(var It=0,Xe=Ve.length;It<Xe;It++)at.add(Ve[It]);return Fe.name&&(at.userData.name=Fe.name,at.name=hs.sanitizeNodeName(Fe.name)),be(at,Fe),Fe.extensions&&oe(Me,at,Fe),Fe.matrix!==void 0?(Ve=new Lr,Ve.fromArray(Fe.matrix),at.applyMatrix4(Ve)):(Fe.translation!==void 0&&at.position.fromArray(Fe.translation),Fe.rotation!==void 0&&at.quaternion.fromArray(Fe.rotation),Fe.scale!==void 0&&at.scale.fromArray(Fe.scale)),Je.associations.set(at,{type:"nodes",index:qe}),at})},et.prototype.loadScene=function(){function qe(Le,Me,Je,de){var Te=Je.nodes[Le];return de.getDependency("node",Le).then(function(Fe){if(Te.skin===void 0)return Fe;var Ve;return de.getDependency("skin",Te.skin).then(function(at){Ve=at,at=[];for(var It=0,Xe=Ve.joints.length;It<Xe;It++)at.push(de.getDependency("node",Ve.joints[It]));return Si.all(at)}).then(function(at){return Fe.traverse(function(It){if(It.isMesh){for(var Xe=[],ot=[],lr=0,Ft=at.length;lr<Ft;lr++){var Jt=at[lr];Jt?(Xe.push(Jt),Jt=new Lr,Ve.inverseBindMatrices!==void 0&&Jt.fromArray(Ve.inverseBindMatrices.array,16*lr),ot.push(Jt)):console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Ve.joints[lr])}It.bind(new Xc(Xe,ot),It.matrixWorld)}}),Fe})}).then(function(Fe){Me.add(Fe);var Ve=[];if(Te.children)for(var at=Te.children,It=0,Xe=at.length;It<Xe;It++)Ve.push(qe(at[It],Fe,Je,de));return Si.all(Ve)})}return function(Le){var Me=this.json,Je=this.extensions;Le=this.json.scenes[Le];var de=new Ha;Le.name&&(de.name=Le.name),be(de,Le),Le.extensions&&oe(Je,de,Le),Je=Le.nodes||[],Le=[];for(var Te=0,Fe=Je.length;Te<Fe;Te++)Le.push(qe(Je[Te],de,Me,this));return Si.all(Le).then(function(){return de})}}(),n}(),O1=gh;O1.MTLLoader=hu,O1.OBJLoader=Pp,O1.GLTFLoader=lA,window.THREE&&(O1=window.THREE);var ea=O1,pM=Ye(function(n,e){e.__esModule=!0;var r=go&&go.__esModule?go:{default:go};e.default=function(){function a(u,p){for(var y=0;y<p.length;y++){var C=p[y];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),(0,r.default)(u,C.key,C)}}return function(u,p,y){return p&&a(u.prototype,p),y&&a(u,y),u}}()}),Vl=At(pM);th(fs.prototype,{equals:function(e){return this.lat===e.lat&&this.lng===e.lng},clone:function(){return new fs(this.lat,this.lng)},getLngSpan:function(e){return e=Math.abs(e-this.lng),180<e&&(e=360-e),e},sub:function(e){return new fs(this.lat-e.lat,this.lng-e.lng)},toString:function(){return"Point"}}),th(Ic,{EARTHRADIUS:637099681e-2,MCBAND:[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,1704480524535203,-10338987376042340,26112667856603880,-35149669176653700,26595700718403920,-10725012454188240,1800819912950474,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],getDistanceByMC:function(e,r){if(!e||!r||(e=this.convertMC2LL(e),!e))return 0;var a=this.toRadians(e.lng);if(e=this.toRadians(e.lat),r=this.convertMC2LL(r),!r)return 0;var u=this.toRadians(r.lng);return r=this.toRadians(r.lat),this.getDistance(a,u,e,r)},getDistanceByLL:function(e,r){if(!e||!r)return 0;e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74),r.lng=this.getLoop(r.lng,-180,180),r.lat=this.getRange(r.lat,-74,74);var a=this.toRadians(e.lng),u=this.toRadians(e.lat);return e=this.toRadians(r.lng),r=this.toRadians(r.lat),this.getDistance(a,e,u,r)},convertMC2LL:function(e){if(e==null)return new fs(0,0);if(180>e.lng&&-180<e.lng&&90>e.lat&&-90<e.lat)return e;for(var r=new fs(Math.abs(e.lng),Math.abs(e.lat)),a=0;a<this.MCBAND.length;a++)if(r.lat>=this.MCBAND[a]){var u=this.MC2LL[a];break}return e=this.convertor(e,u),e=new fs(e.lng.toFixed(6),e.lat.toFixed(6))},convertLL2MC:function(e){if(e==null)return new fs(0,0);if(180<e.lng||-180>e.lng||90<e.lat||-90>e.lat)return e;e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74);for(var r=new fs(e.lng,e.lat),a=0;a<this.LLBAND.length;a++)if(r.lat>=this.LLBAND[a]){var u=this.LL2MC[a];break}if(!u){for(a=0;a<this.LLBAND.length;a++)if(r.lat<=-this.LLBAND[a]){u=this.LL2MC[a];break}}return e=this.convertor(e,u),e=new fs(Number(e.lng.toFixed(2)),Number(e.lat.toFixed(2)))},convertor:function(e,r){if(e&&r){var a=r[0]+r[1]*Math.abs(e.lng),u=Math.abs(e.lat)/r[9];return r=r[2]+r[3]*u+r[4]*u*u+r[5]*u*u*u+r[6]*u*u*u*u+r[7]*u*u*u*u*u+r[8]*u*u*u*u*u*u,a*=0>e.lng?-1:1,r*=0>e.lat?-1:1,new fs(a,r)}},getDistance:function(e,r,a,u){return this.EARTHRADIUS*Math.acos(Math.sin(a)*Math.sin(u)+Math.cos(a)*Math.cos(u)*Math.cos(r-e))},toRadians:function(e){return Math.PI*e/180},toDegrees:function(e){return 180*e/Math.PI},getRange:function(e,r,a){return r!=null&&(e=Math.max(e,r)),a!=null&&(e=Math.min(e,a)),e},getLoop:function(e,r,a){for(;e>a;)e-=a-r;for(;e<r;)e+=a-r;return e}}),th(Ic.prototype,{lngLatToMercator:function(e){return Ic.convertLL2MC(e)},lngLatToPoint:function(e){return e=Ic.convertLL2MC(e),new vd(e.lng,e.lat)},mercatorToLngLat:function(e){return Ic.convertMC2LL(e)},pointToLngLat:function(e){return e=new fs(e.x,e.y),Ic.convertMC2LL(e)},pointToPixel:function(e,r,a,u,p){if(e)return e=this.lngLatToMercator(e,p),r=this.getZoomUnits(r),new vd(Math.round((e.lng-a.lng)/r+u.width/2),Math.round((a.lat-e.lat)/r+u.height/2))},pixelToPoint:function(e,r,a,u,p){if(e)return r=this.getZoomUnits(r),e=new fs(a.lng+r*(e.x-u.width/2),a.lat-r*(e.y-u.height/2)),this.mercatorToLngLat(e,p)},getZoomUnits:function(e){return Math.pow(2,18-e)}});var gM=Ye(function(n,e){e.__esModule=!0;var r=Nl&&Nl.__esModule?Nl:{default:Nl};e.default=function(a){if(Array.isArray(a)){for(var u=0,p=Array(a.length);u<a.length;u++)p[u]=a[u];return p}return(0,r.default)(a)}}),Mw=At(gM);(function(){function n(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};yi(this,n),this.options=e,this._initialize()}return Vl(n,[{key:"_initialize",value:function(){this.points=this.options.points}},{key:"_normalizaCoord",value:function(r){return r?(r instanceof Array&&(r={lng:Number(r[0]),lat:Number(r[1])}),Ic.convertLL2MC(r)):null}},{key:"setOptions",value:function(){this.options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},this._initialize()}},{key:"getPoints",value:function(r){for(var a=[],u=this.points,p=0;p<u.length-1;p++){var y=this.getCurveByTwoPoints(this._normalizaCoord(u[p]),this._normalizaCoord(u[p+1]),r);y&&0<y.length&&(a=a.concat(y))}return a}},{key:"getCurveByTwoPoints",value:function(r,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:20;if(!r||!a)return null;var p=[],y=0;if((typeof a=="undefined"?"undefined":Jn(a))===void 0)typeof p=="undefined"||Jn(p);else{var C=parseFloat(r.lat),S=parseFloat(a.lat),R=parseFloat(r.lng),N=parseFloat(a.lng);N>R&&180<parseFloat(N-R)&&0>R&&(R=parseFloat(360+R),N=parseFloat(360+N));var z=0;if(S===C)var Z=0,K=R-N;else N===R?(Z=Math.PI/2,K=C-S):(Z=Math.atan((S-C)/(N-R)),K=(S-C)/Math.sin(Z));for(z===0&&(z=Z+Math.PI/5),K/=2,Z=K*Math.cos(z)+R,z=K*Math.sin(z)+C,K=0;K<u+1;K++){var ne=R*(1-2*y+y*y)+Z*(2*y-2*y*y)+N*y*y,oe=a.lng;p.push([0>r.lng&&0<oe?ne-360:ne,C*(1-2*y+y*y)+z*(2*y-2*y*y)+S*y*y]),y+=1/u}return p}}}]),n})();var D1=void 0;(function(){if(D1!==void 0)return D1;var n=navigator.userAgent,e="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";");D1=!1;for(var r=0;r<e.length;r++)if(0<n.indexOf(e[r])){D1=!0;break}return D1})(),_f(Array(576)),_f(Array(60)),_f(Array(512)),_f(Array(256)),_f(Array(29)),_f(Array(30)),new Uint32Array(function(){for(var n,e=[],r=0;256>r;r++){n=r;for(var a=0;8>a;a++)n=n&1?3988292384^n>>>1:n>>>1;e[r]=n}return e}());try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(n){}for(var $2=new Uint8Array(256),kv=0;256>kv;kv++)$2[kv]=252<=kv?6:248<=kv?5:240<=kv?4:224<=kv?3:192<=kv?2:1;$2[254]=$2[254]=1;var Sw=function(){function n(e){yi(this,n),this._visible=!0,this.options=this.getCommonDefaultOptions(),this.options=Ce(this.options,this.getDefaultOptions()),this.autoUpdate=!1,this.options=Ce(this.options,e),this.options.data&&(this.data=this.options.data,delete this.options.data)}return Vl(n,[{key:"getCommonDefaultOptions",value:function(){return{}}},{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(r){}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy()}},{key:"show",value:function(){this._visible=!0}},{key:"hide",value:function(){this._visible=!1}},{key:"render",value:function(){}},{key:"setData",value:function(r,a){a=a||{},this.data=r,this.onDataChanged&&this.onDataChanged(this.getData()),this.onChanged&&this.onChanged(this.getOptions(),this.getData(),a),a.autoRender!==!1&&this.webglLayer&&this.webglLayer.render()}},{key:"getData",value:function(){return this.data||[]}},{key:"setOptions",value:function(r){r=r||{};var a=Ce({},this.getOptions());Ce(this.options,r),this.onOptionsChanged&&this.onOptionsChanged(this.getOptions(),a),this.onChanged&&this.onChanged(this.getOptions(),this.getData()),r.data?(this.setData(r.data),delete r.data):this.webglLayer&&this.webglLayer.render()}},{key:"getOptions",value:function(){return this.options||{}}},{key:"onOptionsChanged",value:function(r,a){}},{key:"onDataChanged",value:function(r){}},{key:"onChanged",value:function(r,a){}},{key:"onDestroy",value:function(){}},{key:"lnglatToMercator",value:function(r,a){}},{key:"setWebglLayer",value:function(r){this.webglLayer=r}},{key:"getWebglLayer",value:function(){return this.webglLayer}},{key:"isRequestAnimation",value:function(){return this.autoUpdate}}]),n}(),mM=Qi("iterator"),vM=Un.isIterable=function(n){return n=Object(n),n[mM]!==void 0||"@@iterator"in n||Xs.hasOwnProperty(Eu(n))},F1=Ye(function(n){n.exports={default:vM,__esModule:!0}});At(F1);var yM=Un.getIterator=function(n){var e=Ap(n);if(typeof e!="function")throw TypeError(n+" is not iterable!");return Ds(e.call(n))},N1=Ye(function(n){n.exports={default:yM,__esModule:!0}});At(N1);var xM=Ye(function(n,e){e.__esModule=!0;var r=F1&&F1.__esModule?F1:{default:F1},a=N1&&N1.__esModule?N1:{default:N1};e.default=function(){return function(u,p){if(Array.isArray(u))return u;if((0,r.default)(Object(u))){var y=[],C=!0,S=!1,R=void 0;try{for(var N=(0,a.default)(u),z;!(C=(z=N.next()).done)&&(y.push(z.value),!p||y.length!==p);C=!0);}catch(Z){S=!0,R=Z}finally{try{!C&&N.return&&N.return()}finally{if(S)throw R}}return y}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),eC=At(xM),Rp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},AM=J.f;Tp("getOwnPropertyDescriptor",function(){return function(n,e){return AM(xl(n),e)}});var CM=Un.Object,wM=function(e,r){return CM.getOwnPropertyDescriptor(e,r)},_M=Ye(function(n){n.exports={default:wM,__esModule:!0}}),MM=At(_M),B1=Ye(function(n){var e=Array.prototype.concat,r=Array.prototype.slice,a=n.exports=function(u){for(var p=[],y=0,C=u.length;y<C;y++){var S=u[y],R=(R=S)&&typeof R!="string"?R instanceof Array||Array.isArray(R)||0<=R.length&&(R.splice instanceof Function||MM(R,R.length-1)&&R.constructor.name!=="String"):!1;R?p=e.call(p,r.call(S)):p.push(S)}return p};a.wrap=function(u){return function(){return u(a(arguments))}}}),z1=Ye(function(n){function e(y,C,S){return Math.min(Math.max(C,y),S)}function r(y){return y=y.toString(16).toUpperCase(),2>y.length?"0"+y:y}var a={},u;for(u in Rp)Rp.hasOwnProperty(u)&&(a[Rp[u]]=u);var p=n.exports={to:{},get:{}};p.get=function(y){switch(y.substring(0,3).toLowerCase()){case"hsl":y=p.get.hsl(y);var C="hsl";break;case"hwb":y=p.get.hwb(y),C="hwb";break;default:y=p.get.rgb(y),C="rgb"}return y?{model:C,value:y}:null},p.get.rgb=function(y){if(!y)return null;var C=/^#([a-f0-9]{3,4})$/i,S=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,R=/^rgba?\(\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,N=/(\D+)/,z=[0,0,0,1],Z;if(Z=y.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(C=Z[2],Z=Z[1],y=0;3>y;y++)S=2*y,z[y]=parseInt(Z.slice(S,S+2),16);C&&(z[3]=Math.round(parseInt(C,16)/255*100)/100)}else if(Z=y.match(C)){for(Z=Z[1],C=Z[3],y=0;3>y;y++)z[y]=parseInt(Z[y]+Z[y],16);C&&(z[3]=Math.round(parseInt(C+C,16)/255*100)/100)}else if(Z=y.match(S)){for(y=0;3>y;y++)z[y]=parseInt(Z[y+1],0);Z[4]&&(z[3]=parseFloat(Z[4]))}else if(Z=y.match(R)){for(y=0;3>y;y++)z[y]=Math.round(2.55*parseFloat(Z[y+1]));Z[4]&&(z[3]=parseFloat(Z[4]))}else return(Z=y.match(N))?Z[1]==="transparent"?[0,0,0,0]:(z=Rp[Z[1]],z?(z[3]=1,z):null):null;for(y=0;3>y;y++)z[y]=e(z[y],0,255);return z[3]=e(z[3],0,1),z},p.get.hsl=function(y){if(!y)return null;var C=y.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(C){var S=parseFloat(C[4]);y=(parseFloat(C[1])+360)%360;var R=e(parseFloat(C[2]),0,100);return C=e(parseFloat(C[3]),0,100),S=e(isNaN(S)?1:S,0,1),[y,R,C,S]}return null},p.get.hwb=function(y){if(!y)return null;var C=y.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(C){var S=parseFloat(C[4]);y=(parseFloat(C[1])%360+360)%360;var R=e(parseFloat(C[2]),0,100);return C=e(parseFloat(C[3]),0,100),S=e(isNaN(S)?1:S,0,1),[y,R,C,S]}return null},p.to.hex=function(){var y=B1(arguments);return"#"+r(y[0])+r(y[1])+r(y[2])+(1>y[3]?r(Math.round(255*y[3])):"")},p.to.rgb=function(){var y=B1(arguments);return 4>y.length||y[3]===1?"rgb("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+")":"rgba("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+", "+y[3]+")"},p.to.rgb.percent=function(){var y=B1(arguments),C=Math.round(y[0]/255*100),S=Math.round(y[1]/255*100),R=Math.round(y[2]/255*100);return 4>y.length||y[3]===1?"rgb("+C+"%, "+S+"%, "+R+"%)":"rgba("+C+"%, "+S+"%, "+R+"%, "+y[3]+")"},p.to.hsl=function(){var y=B1(arguments);return 4>y.length||y[3]===1?"hsl("+y[0]+", "+y[1]+"%, "+y[2]+"%)":"hsla("+y[0]+", "+y[1]+"%, "+y[2]+"%, "+y[3]+")"},p.to.hwb=function(){var y=B1(arguments),C="";return 4<=y.length&&y[3]!==1&&(C=", "+y[3]),"hwb("+y[0]+", "+y[1]+"%, "+y[2]+"%"+C+")"},p.to.keyword=function(y){return a[y.slice(0,3)]}}),T0=Ye(function(n){var e={};for(u in Rp)Rp.hasOwnProperty(u)&&(e[Rp[u]]=u);var r=n.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},a;for(a in r)if(r.hasOwnProperty(a)){if(!("channels"in r[a]))throw Error("missing channels property: "+a);if(!("labels"in r[a]))throw Error("missing channel labels property: "+a);if(r[a].labels.length!==r[a].channels)throw Error("channel and label counts mismatch: "+a);n=r[a].channels;var u=r[a].labels;delete r[a].channels,delete r[a].labels,Object.defineProperty(r[a],"channels",{value:n}),Object.defineProperty(r[a],"labels",{value:u})}r.rgb.hsl=function(p){var y=p[0]/255,C=p[1]/255,S=p[2]/255;p=Math.min(y,C,S);var R=Math.max(y,C,S),N=R-p,z;return R===p?z=0:y===R?z=(C-S)/N:C===R?z=2+(S-y)/N:S===R&&(z=4+(y-C)/N),z=Math.min(60*z,360),0>z&&(z+=360),y=(p+R)/2,[z,100*(R===p?0:.5>=y?N/(R+p):N/(2-R-p)),100*y]},r.rgb.hsv=function(p){var y,C=p[0]/255,S=p[1]/255,R=p[2]/255,N=Math.max(C,S,R),z=N-Math.min(C,S,R);if(z===0)var Z=y=0;else{y=z/N,p=(N-C)/6/z+.5;var K=(N-S)/6/z+.5;z=(N-R)/6/z+.5,C===N?Z=z-K:S===N?Z=1/3+p-z:R===N&&(Z=2/3+K-p),0>Z?Z+=1:1<Z&&--Z}return[360*Z,100*y,100*N]},r.rgb.hwb=function(p){var y=p[0],C=p[1],S=p[2];p=r.rgb.hsl(p)[0];var R=1/255*Math.min(y,Math.min(C,S));return S=1-1/255*Math.max(y,Math.max(C,S)),[p,100*R,100*S]},r.rgb.cmyk=function(p){var y=p[0]/255,C=p[1]/255;p=p[2]/255;var S=Math.min(1-y,1-C,1-p);return[100*((1-y-S)/(1-S)||0),100*((1-C-S)/(1-S)||0),100*((1-p-S)/(1-S)||0),100*S]},r.rgb.keyword=function(p){var y=e[p];if(y)return y;y=Infinity;var C;for(C in Rp)if(Rp.hasOwnProperty(C)){var S=Rp[C];if(S=Math.pow(p[0]-S[0],2)+Math.pow(p[1]-S[1],2)+Math.pow(p[2]-S[2],2),S<y){y=S;var R=C}}return R},r.keyword.rgb=function(p){return Rp[p]},r.rgb.xyz=function(p){var y=p[0]/255,C=p[1]/255;return p=p[2]/255,y=.04045<y?Math.pow((y+.055)/1.055,2.4):y/12.92,C=.04045<C?Math.pow((C+.055)/1.055,2.4):C/12.92,p=.04045<p?Math.pow((p+.055)/1.055,2.4):p/12.92,[100*(.4124*y+.3576*C+.1805*p),100*(.2126*y+.7152*C+.0722*p),100*(.0193*y+.1192*C+.9505*p)]},r.rgb.lab=function(p){var y=r.rgb.xyz(p);p=y[0];var C=y[1];return y=y[2],p/=95.047,C/=100,y/=108.883,p=.008856<p?Math.pow(p,1/3):7.787*p+16/116,C=.008856<C?Math.pow(C,1/3):7.787*C+16/116,y=.008856<y?Math.pow(y,1/3):7.787*y+16/116,[116*C-16,500*(p-C),200*(C-y)]},r.hsl.rgb=function(p){var y=p[0]/360,C=p[1]/100;if(p=p[2]/100,C===0){var S=255*p;return[S,S,S]}C=.5>p?p*(1+C):p+C-p*C,p=2*p-C;for(var R=[0,0,0],N=0;3>N;N++)S=y+1/3*-(N-1),0>S&&S++,1<S&&S--,S=1>6*S?p+6*(C-p)*S:1>2*S?C:2>3*S?p+(C-p)*(2/3-S)*6:p,R[N]=255*S;return R},r.hsl.hsv=function(p){var y=p[0],C=p[1]/100;p=p[2]/100;var S=C,R=Math.max(p,.01);return p*=2,C*=1>=p?p:2-p,S*=1>=R?R:2-R,[y,100*(p===0?2*S/(R+S):2*C/(p+C)),(p+C)/2*100]},r.hsv.rgb=function(p){var y=p[0]/60,C=p[1]/100;p=p[2]/100;var S=Math.floor(y)%6,R=y-Math.floor(y);y=255*p*(1-C);var N=255*p*(1-C*R);switch(C=255*p*(1-C*(1-R)),p*=255,S){case 0:return[p,C,y];case 1:return[N,p,y];case 2:return[y,p,C];case 3:return[y,N,p];case 4:return[C,y,p];case 5:return[p,y,N]}},r.hsv.hsl=function(p){var y=p[0],C=p[1]/100;p=p[2]/100;var S=Math.max(p,.01),R=(2-C)*S;return S=C*S/(1>=R?R:2-R)||0,[y,100*S,(2-C)*p/2*100]},r.hwb.rgb=function(p){var y=p[0]/360,C=p[1]/100;p=p[2]/100;var S=C+p;switch(1<S&&(C/=S,p/=S),S=Math.floor(6*y),p=1-p,y=6*y-S,(S&1)!=0&&(y=1-y),y=C+y*(p-C),S){default:case 6:case 0:S=p;var R=y;break;case 1:S=y,R=p;break;case 2:S=C,R=p,C=y;break;case 3:S=C,R=y,C=p;break;case 4:S=y,R=C,C=p;break;case 5:S=p,R=C,C=y}return[255*S,255*R,255*C]},r.cmyk.rgb=function(p){var y=p[3]/100;return[255*(1-Math.min(1,p[0]/100*(1-y)+y)),255*(1-Math.min(1,p[1]/100*(1-y)+y)),255*(1-Math.min(1,p[2]/100*(1-y)+y))]},r.xyz.rgb=function(p){var y=p[0]/100,C=p[1]/100,S=p[2]/100;p=3.2406*y+-1.5372*C+-.4986*S;var R=-.9689*y+1.8758*C+.0415*S;return y=.0557*y+-.204*C+1.057*S,p=.0031308<p?1.055*Math.pow(p,1/2.4)-.055:12.92*p,R=.0031308<R?1.055*Math.pow(R,1/2.4)-.055:12.92*R,y=.0031308<y?1.055*Math.pow(y,1/2.4)-.055:12.92*y,p=Math.min(Math.max(0,p),1),R=Math.min(Math.max(0,R),1),y=Math.min(Math.max(0,y),1),[255*p,255*R,255*y]},r.xyz.lab=function(p){var y=p[0],C=p[1];return p=p[2],y/=95.047,C/=100,p/=108.883,y=.008856<y?Math.pow(y,1/3):7.787*y+16/116,C=.008856<C?Math.pow(C,1/3):7.787*C+16/116,p=.008856<p?Math.pow(p,1/3):7.787*p+16/116,[116*C-16,500*(y-C),200*(C-p)]},r.lab.xyz=function(p){var y=p[1],C=p[2];p=(p[0]+16)/116,y=y/500+p,C=p-C/200;var S=Math.pow(p,3),R=Math.pow(y,3),N=Math.pow(C,3);return[95.047*(.008856<R?R:(y-16/116)/7.787),100*(.008856<S?S:(p-16/116)/7.787),108.883*(.008856<N?N:(C-16/116)/7.787)]},r.lab.lch=function(p){var y=p[0],C=p[1];p=p[2];var S=360*Math.atan2(p,C)/2/Math.PI;return 0>S&&(S+=360),[y,Math.sqrt(C*C+p*p),S]},r.lch.lab=function(p){var y=p[0],C=p[1];return p=p[2]/360*2*Math.PI,[y,C*Math.cos(p),C*Math.sin(p)]},r.rgb.ansi16=function(p){var y=p[0],C=p[1],S=p[2],R=1 in arguments?arguments[1]:r.rgb.hsv(p)[2];return R=Math.round(R/50),R===0?30:(y=30+(Math.round(S/255)<<2|Math.round(C/255)<<1|Math.round(y/255)),R===2&&(y+=60),y)},r.hsv.ansi16=function(p){return r.rgb.ansi16(r.hsv.rgb(p),p[2])},r.rgb.ansi256=function(p){var y=p[0],C=p[1];return p=p[2],y===C&&C===p?8>y?16:248<y?231:Math.round((y-8)/247*24)+232:16+36*Math.round(y/255*5)+6*Math.round(C/255*5)+Math.round(p/255*5)},r.ansi16.rgb=function(p){var y=p%10;return y===0||y===7?(50<p&&(y+=3.5),y=y/10.5*255,[y,y,y]):(p=.5*(~~(50<p)+1),[(y&1)*p*255,(y>>1&1)*p*255,(y>>2&1)*p*255])},r.ansi256.rgb=function(p){if(232<=p){var y=10*(p-232)+8;return[y,y,y]}p-=16,y=Math.floor(p/36)/5*255;var C=Math.floor((p%=36)/6)/5*255;return[y,C,p%6/5*255]},r.rgb.hex=function(p){return p=(((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255)).toString(16).toUpperCase(),"000000".substring(p.length)+p},r.hex.rgb=function(p){if(p=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i),!p)return[0,0,0];var y=p[0];return p[0].length===3&&(y=y.split("").map(function(C){return C+C}).join("")),p=parseInt(y,16),[p>>16&255,p>>8&255,p&255]},r.rgb.hcg=function(p){var y=p[0]/255,C=p[1]/255;p=p[2]/255;var S=Math.max(Math.max(y,C),p),R=Math.min(Math.min(y,C),p),N=S-R;return[(0>=N?0:S===y?(C-p)/N%6:S===C?2+(p-y)/N:(y-C)/N+8)/6%1*360,100*N,100*(1>N?R/(1-N):0)]},r.hsl.hcg=function(p){var y=p[1]/100,C=p[2]/100,S=0;return y=.5>C?2*y*C:2*y*(1-C),1>y&&(S=(C-.5*y)/(1-y)),[p[0],100*y,100*S]},r.hsv.hcg=function(p){var y=p[2]/100,C=p[1]/100*y,S=0;return 1>C&&(S=(y-C)/(1-C)),[p[0],100*C,100*S]},r.hcg.rgb=function(p){var y=p[1]/100,C=p[2]/100;if(y===0)return[255*C,255*C,255*C];var S=[0,0,0];p=p[0]/360%1*6;var R=p%1,N=1-R;switch(Math.floor(p)){case 0:S[0]=1,S[1]=R,S[2]=0;break;case 1:S[0]=N,S[1]=1,S[2]=0;break;case 2:S[0]=0,S[1]=1,S[2]=R;break;case 3:S[0]=0,S[1]=N,S[2]=1;break;case 4:S[0]=R,S[1]=0,S[2]=1;break;default:S[0]=1,S[1]=0,S[2]=N}return C*=1-y,[255*(y*S[0]+C),255*(y*S[1]+C),255*(y*S[2]+C)]},r.hcg.hsv=function(p){var y=p[1]/100,C=y+p[2]/100*(1-y),S=0;return 0<C&&(S=y/C),[p[0],100*S,100*C]},r.hcg.hsl=function(p){var y=p[1]/100,C=p[2]/100*(1-y)+.5*y,S=0;return 0<C&&.5>C?S=y/(2*C):.5<=C&&1>C&&(S=y/(2*(1-C))),[p[0],100*S,100*C]},r.hcg.hwb=function(p){var y=p[1]/100,C=y+p[2]/100*(1-y);return[p[0],100*(C-y),100*(1-C)]},r.hwb.hcg=function(p){var y=1-p[2]/100,C=y-p[1]/100,S=0;return 1>C&&(S=(y-C)/(1-C)),[p[0],100*C,100*S]},r.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},r.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},r.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},r.gray.hsl=r.gray.hsv=function(p){return[0,0,p[0]]},r.gray.hwb=function(p){return[0,100,p[0]]},r.gray.cmyk=function(p){return[0,0,0,p[0]]},r.gray.lab=function(p){return[p[0],0,0]},r.gray.hex=function(p){return p=Math.round(p[0]/100*255)&255,p=((p<<16)+(p<<8)+p).toString(16).toUpperCase(),"000000".substring(p.length)+p},r.rgb.gray=function(p){return[(p[0]+p[1]+p[2])/3/255*100]}}),SM=function(e){for(var r={},a=Ei(T0),u=a.length,p=0;p<u;p++)r[a[p]]={distance:-1,parent:null};for(a=[e],r[e].distance=0;a.length;){e=a.pop(),u=Ei(T0[e]),p=u.length;for(var y=0;y<p;y++){var C=u[y],S=r[C];S.distance===-1&&(S.distance=r[e].distance+1,S.parent=e,a.unshift(C))}}for(a={},e=Ei(r),u=e.length,p=0;p<u;p++){var R=e[p];if(r[R].parent!==null){y=R,C=r,S=[C[R].parent,R];var N=T0[C[R].parent][R];for(R=C[R].parent;C[R].parent;)S.unshift(C[R].parent),N=Rh(T0[C[R].parent][R],N),R=C[R].parent;N.conversion=S,a[y]=N}}return a},xy={};Ei(T0).forEach(function(n){xy[n]={},Object.defineProperty(xy[n],"channels",{value:T0[n].channels}),Object.defineProperty(xy[n],"labels",{value:T0[n].labels});var e=SM(n);Ei(e).forEach(function(r){var a=e[r];xy[n][r]=Cs(a),xy[n][r].raw=p0(a)})});var Hf=xy,tC=[].slice,Tw=["keyword","gray","hex"],rC={};Ei(Hf).forEach(function(n){rC[tC.call(Hf[n].labels).sort().join("")]=n});var uA={};Ki.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var r=this.model in z1.to?this:this.rgb();return r=r.round(typeof e=="number"?e:1),e=r.valpha===1?r.color:r.color.concat(this.valpha),z1.to[r.model](e)},percentString:function(e){return e=this.rgb().round(typeof e=="number"?e:1),e=e.valpha===1?e.color:e.color.concat(this.valpha),z1.to.rgb.percent(e)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},r=Hf[this.model].channels,a=Hf[this.model].labels,u=0;u<r;u++)e[a[u]]=this.color[u];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new Ki(this.color.map(ri(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new Ki(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:qo("rgb",0,po(255)),green:qo("rgb",1,po(255)),blue:qo("rgb",2,po(255)),hue:qo(["hsl","hsv","hsl","hwb","hcg"],0,function(n){return(n%360+360)%360}),saturationl:qo("hsl",1,po(100)),lightness:qo("hsl",2,po(100)),saturationv:qo("hsv",1,po(100)),value:qo("hsv",2,po(100)),chroma:qo("hcg",1,po(100)),gray:qo("hcg",2,po(100)),white:qo("hwb",1,po(100)),wblack:qo("hwb",2,po(100)),cyan:qo("cmyk",0,po(100)),magenta:qo("cmyk",1,po(100)),yellow:qo("cmyk",2,po(100)),black:qo("cmyk",3,po(100)),x:qo("xyz",0,po(100)),y:qo("xyz",1,po(100)),z:qo("xyz",2,po(100)),l:qo("lab",0,po(100)),a:qo("lab",1),b:qo("lab",2),keyword:function(e){return arguments.length?new Ki(e):Hf[this.model].keyword(this.color)},hex:function(e){return arguments.length?new Ki(e):z1.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,r=[],a=0;a<e.length;a++){var u=e[a]/255;r[a]=.03928>=u?u/12.92:Math.pow((u+.055)/1.055,2.4)}return .2126*r[0]+.7152*r[1]+.0722*r[2]},contrast:function(e){var r=this.luminosity();return e=e.luminosity(),r>e?(r+.05)/(e+.05):(e+.05)/(r+.05)},level:function(e){return e=this.contrast(e),7.1<=e?"AAA":4.5<=e?"AA":""},isDark:function(){var e=this.rgb().color;return 128>(299*e[0]+587*e[1]+114*e[2])/1e3},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),r=0;3>r;r++)e.color[r]=255-e.color[r];return e},lighten:function(e){var r=this.hsl();return r.color[2]+=r.color[2]*e,r},darken:function(e){var r=this.hsl();return r.color[2]-=r.color[2]*e,r},saturate:function(e){var r=this.hsl();return r.color[1]+=r.color[1]*e,r},desaturate:function(e){var r=this.hsl();return r.color[1]-=r.color[1]*e,r},whiten:function(e){var r=this.hwb();return r.color[1]+=r.color[1]*e,r},blacken:function(e){var r=this.hwb();return r.color[2]+=r.color[2]*e,r},grayscale:function(){var e=this.rgb().color;return e=.3*e[0]+.59*e[1]+.11*e[2],Ki.rgb(e,e,e)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var r=this.hsl(),a=r.color[0];return a=(a+e)%360,r.color[0]=0>a?360+a:a,r},mix:function(e,r){if(!e||!e.rgb)throw Error('Argument to "mix" was not a Color instance, but rather an instance of '+(typeof e=="undefined"?"undefined":Jn(e)));e=e.rgb();var a=this.rgb();r=r===void 0?.5:r;var u=2*r-1,p=e.alpha()-a.alpha();return u=((u*p==-1?u:(u+p)/(1+u*p))+1)/2,p=1-u,Ki.rgb(u*e.red()+p*a.red(),u*e.green()+p*a.green(),u*e.blue()+p*a.blue(),e.alpha()*r+a.alpha()*(1-r))}},Ei(Hf).forEach(function(n){if(Tw.indexOf(n)===-1){var e=Hf[n].channels;Ki.prototype[n]=function(){if(this.model===n)return new Ki(this);if(arguments.length)return new Ki(arguments,n);var r=typeof arguments[e]=="number"?e:this.valpha,a=Hf[this.model][n].raw(this.color);return a=Array.isArray(a)?a:[a],new Ki(a.concat(r),n)},Ki[n]=function(r){return typeof r=="number"&&(r=fp(tC.call(arguments),e)),new Ki(r,n)}}});var Rd=function(){function n(e,r,a){yi(this,n),this.options=r,this.gl=e,a&&(this.map=a.map),a=this.getVertexShader(r.vertexShader);var u=this.getFragmentShader(r.fragmentShader);r=e.createShader(e.VERTEX_SHADER),e.shaderSource(r,a),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?(a=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(a,u),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS)?(u=e.createProgram(),e.attachShader(u,r),e.attachShader(u,a),e.deleteShader(r),e.deleteShader(a),e.linkProgram(u),e.getProgramParameter(u,e.LINK_STATUS)?r=u:(r="Shader program failed to link.  The error log is:"+e.getProgramInfoLog(u),console.error(r),r=-1)):(r="Fragment shader failed to compile.  The error log is:"+e.getShaderInfoLog(a),console.error(r),r=-1)):(r="Vertex shader failed to compile.  The error log is:"+e.getShaderInfoLog(r),console.error(r),r=-1),r=this.program=r,a={},u=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(var p=0;p<u;p++){var y=e.getActiveAttrib(r,p);a[y.name]=e.getAttribLocation(r,y.name)}p={},y={};for(var C=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),S=0;S<C;S++){var R=e.getActiveUniform(r,S);p[R.name]=e.getUniformLocation(r,R.name),y[R.name]=R.type}this.parameter=e={attributes:a,numAttributes:u,uniformsType:y,uniforms:p},this.attributes=e.attributes,this.uniforms=e.uniforms,this.parameter=e}return Vl(n,[{key:"getVertexShader",value:function(r){var a="";return this.map&&this.map.type==="cesium"&&(a=`#define LOG_DEPTH
`),a+=`#ifdef LOG_DEPTH
uniform float currentFrustumX;varying float v_depthFromNearPlusOne;
#endif
uniform vec2 MAPV_resolution;
#if defined(PICK)
uniform bool uIsPickRender;attribute vec3 aPickColor;uniform vec3 uPickedColor;varying vec4 vPickColor;uniform bool uEnablePicked;bool mapvIsPicked(){return uEnablePicked&&aPickColor==uPickedColor;}
#endif
void afterMain(){
#if defined(LOG_DEPTH)
v_depthFromNearPlusOne=(gl_Position.w-currentFrustumX)+1.0;gl_Position.z=clamp(gl_Position.z/gl_Position.w,-1.0,1.0)*gl_Position.w;
#endif
#if defined(PICK)
vPickColor=vec4(aPickColor,0.0);if(mapvIsPicked()){vPickColor.a=1.0;}
#endif
}`,r=this.getDefines()+a+r,r=r.replace("void main","void originMain"),r+"void main() {originMain(); afterMain();}"}},{key:"getFragmentShader",value:function(r){var a="";return this.map&&this.map.type==="cesium"&&(a=`#define LOG_DEPTH
`),a+=`#if defined(LOG_DEPTH)
#extension GL_EXT_frag_depth : enable
#endif
precision highp float;uniform vec2 MAPV_resolution;uniform bool uIsPickRender;
#if defined(PICK)
varying vec4 vPickColor;bool mapvIsPicked(){return vPickColor.a==1.0;}
#endif
#if defined(LOG_DEPTH)
uniform float oneOverLog2FarDepthFromNearPlusOne;uniform float farDepthFromNearPlusOne;varying float v_depthFromNearPlusOne;void writeLogDepth(float depth){if(depth<=0.9999999||depth>farDepthFromNearPlusOne){discard;}gl_FragDepthEXT=log2(depth)*oneOverLog2FarDepthFromNearPlusOne;}
#endif
void afterMain(){
#if defined(PICK)
if(uIsPickRender){gl_FragColor=vec4(vPickColor.rgb,1.0);return;}
#endif
#if defined(LOG_DEPTH)
writeLogDepth(v_depthFromNearPlusOne);
#endif
}`,r=this.getDefines()+a+r,r=r.replace("void main","void originMain"),r+"void main() {originMain(); afterMain();}"}},{key:"getDefines",value:function(){var r="",a=this.options.defines;if(a)for(var u=0;u<a.length;u++)r+="#define "+a[u]+`
`;return r}},{key:"use",value:function(r,a){this.gl=r,r.useProgram(this.program),this.map&&this.map.type==="cesium"&&this.setUniforms({currentFrustumX:this.map.map.scene.camera.frustum.near,oneOverLog2FarDepthFromNearPlusOne:this.map.map.scene.context.uniformState.oneOverLog2FarDepthFromNearPlusOne,farDepthFromNearPlusOne:this.map.map.scene.context.uniformState.farDepthFromNearPlusOne}),this.uniforms.MAPV_resolution&&this.setUniforms({MAPV_resolution:[r.canvas.width,r.canvas.height]})}},{key:"setUniform",value:function(r,a){var u=this.gl,p=this.uniforms[r];if(p)switch(this.parameter.uniformsType[r]){case u.FLOAT:u.uniform1f(p,a);break;case u.FLOAT_VEC2:u.uniform2f(p,a[0],a[1]);break;case u.FLOAT_VEC3:u.uniform3f(p,a[0],a[1],a[2]);break;case u.FLOAT_VEC4:u.uniform4f(p,a[0],a[1],a[2],a[3]);break;case u.SAMPLER_2D:case u.SAMPLER_CUBE:u.activeTexture(u["TEXTURE"+this.textureIndex]),u.uniform1i(p,this.textureIndex),u.bindTexture(u.TEXTURE_2D,a),this.textureIndex++;break;case u.INT:case u.BOOL:u.uniform1i(p,a);break;case u.INT_VEC2:case u.BOOL_VEC2:u.uniform2i(p,a[0],a[1]);break;case u.INT_VEC3:case u.BOOL_VEC3:u.uniform3i(p,a[0],a[1],a[2]);break;case u.INT_VEC4:case u.BOOL_VEC4:u.uniform4i(p,a[0],a[1],a[2],a[3]);break;case u.FLOAT_MAT2:u.uniformMatrix2fv(p,!1,a);break;case u.FLOAT_MAT3:u.uniformMatrix3fv(p,!1,a);break;case u.FLOAT_MAT4:u.uniformMatrix4fv(p,!1,a);break;default:console.error("Unrecognized uniform type: "+r)}else console.warn("Unrecognized uniform type: "+r)}},{key:"setUniforms",value:function(r){this.textureIndex=0;for(var a in r)this.setUniform(a,r[a])}}]),n}(),Fm=function(e,r,a,u){var p=a?a.call(u,e,r):void 0;if(p!==void 0)return!!p;if(e===r)return!0;if((typeof e=="undefined"?"undefined":Jn(e))!=="object"||!e||(typeof r=="undefined"?"undefined":Jn(r))!=="object"||!r)return!1;var y=Ei(e),C=Ei(r);if(y.length!==C.length)return!1;C=Object.prototype.hasOwnProperty.bind(r);for(var S=0;S<y.length;S++){if(p=y[S],!C(p))return!1;var R=e[p],N=r[p];if(p=a?a.call(u,R,N,p):void 0,p===!1||p===void 0&&R!==N)return!1}return!0};(function(){function n(e){yi(this,n),this.options=e,this.gl=e.gl,this.savedState=[],this.currentState=this.getDefaultState()}return Vl(n,[{key:"setDefaultState",value:function(){this.setState()}},{key:"getDefaultState",value:function(){var r=this.gl;return{blend:!1,blendEquation:r.FUNC_ADD,blendFunc:[r.ONE,r.ZERO],depthMask:!0,depthTest:!0,depthFunc:r.LEQUAL,polygonOffset:[0,0],cullFace:!1,stencilTest:!1}}},{key:"getRealState",value:function(){var r=this.gl;return{blend:r.getParameter(r.BLEND),blendEquation:r.getParameter(r.BLEND_EQUATION),depthMask:r.getParameter(r.DEPTH_WRITEMASK),depthTest:r.getParameter(r.DEPTH_TEST),depthFunc:r.getParameter(r.DEPTH_FUNC),polygonOffset:[r.getParameter(r.POLYGON_OFFSET_FACTOR),r.getParameter(r.POLYGON_OFFSET_UNITS)],cullFace:r.getParameter(r.CULL_FACE),stencilTest:r.getParameter(r.STENCIL_TEST)}}},{key:"getCurrentState",value:function(){return this.currentState}},{key:"save",value:function(){this.savedState.push(this.getCurrentState())}},{key:"restore",value:function(){var r=this.savedState.pop();this.setState(r,{force:!0})}},{key:"setState",value:function(r){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};r=Ce(this.getDefaultState(),r),this.setBlend(r,a),this.setDepth(r,a),this.setCullFace(r,a),this.setPolygonOffset(r,a),this.setStencil(r,a),this.currentState=r}},{key:"setBlend",value:function(r,a){var u=this.gl,p=this.getCurrentState();((a=a.force)||!Fm(r.blend,p.blend))&&(r.blend?u.enable(u.BLEND):u.disable(u.BLEND)),!a&&Fm(r.blendEquation,p.blendEquation)||u.blendEquation(r.blendEquation),!a&&Fm(r.blendFunc,p.blendFunc)||u.blendFunc(r.blendFunc[0],r.blendFunc[1])}},{key:"setDepth",value:function(r,a){var u=this.gl,p=this.getCurrentState();((a=a.force)||!Fm(r.depthTest,p.depthTest))&&(r.depthTest?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST)),(a||!Fm(r.depthMask,p.depthMask))&&(r.depthMask?u.depthMask(!0):u.depthMask(!1)),!a&&Fm(r.depthFunc,p.depthFunc)||u.depthFunc(r.depthFunc)}},{key:"setPolygonOffset",value:function(r,a){var u=this.gl,p=this.getCurrentState();(a.force||!Fm(r.polygonOffset,p.polygonOffset))&&(r.polygonOffset[0]!==0&&r.polygonOffset[1]!==0?u.enable(u.POLYGON_OFFSET_FILL):u.disable(u.POLYGON_OFFSET_FILL),u.polygonOffset(r.polygonOffset[0],r.polygonOffset[1]))}},{key:"setCullFace",value:function(r,a){var u=this.gl,p=this.getCurrentState();(a.force||!Fm(r.cullFace,p.cullFace))&&(r.cullFace?(u.enable(u.CULL_FACE),u.cullFace(u.BACK)):u.disable(u.CULL_FACE))}},{key:"setStencil",value:function(r,a){var u=this.gl,p=this.getCurrentState();(a.force||!Fm(r.stencilTest,p.stencilTest))&&(r.stencilTest?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST))}}]),n})();var U1=function(){function n(e){yi(this,n),this.options=e,this.gl=e.gl,this.buffer=this.gl.createBuffer(),e.data&&this.updateData(e.data)}return Vl(n,[{key:"updateData",value:function(r){var a=this.options,u=this.gl;this.bind(),u.bufferData(u[a.target],r,u[a.usage])}},{key:"bind",value:function(r){r=r||this.gl,r.bindBuffer(r[this.options.target],this.buffer)}},{key:"unBind",value:function(r){r=r||this.gl,r.bindBuffer(r[this.options.target],null)}},{key:"destroy",value:function(){this.buffer=null}}]),n}(),TM={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FLOAT:4},cA=function(){function n(e){for(yi(this,n),this.options=e,this.attributes=e.attributes,this.gl=e.gl,this.program=e.program,e=this.stride=0;e<this.attributes.length;e++)this.stride+=TM[this.attributes[e].type]*this.attributes[e].size}return Vl(n,[{key:"setVertexAttribPointers",value:function(){for(var r=this.gl,a=this.program,u=0;u<this.attributes.length;u++){var p=this.attributes[u],y=a.attributes[p.name];y!==void 0&&(p.buffer.bind(r),r.vertexAttribPointer(y,p.size,r[p.type],p.normalize||!1,p.stride!==void 0?p.stride:this.stride,p.offset),r.enableVertexAttribArray(y))}}},{key:"bind",value:function(){this.setVertexAttribPointers()}},{key:"destroy",value:function(){}}]),n}(),Vh=function n(e,r,a){yi(this,n),r=r||e.canvas.width,a=a||e.canvas.height;var u=e.createFramebuffer(),p=e.createTexture();e.bindTexture(e.TEXTURE_2D,p),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,a,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),u.texture=p;var y=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,y),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r,a),u.depthBuffer=y,e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,p,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,y),r=e.checkFramebufferStatus(e.FRAMEBUFFER),e.FRAMEBUFFER_COMPLETE===r&&(e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),this.framebuffer=u)},Ay=function(){function n(e){yi(this,n),this.options={},Ce(this.options,e),this.vertex=[-1,1,0,-1,-1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0],this.sampleCoord=[0,1,0,0,1,1,1,1,0,0,1,0]}return Vl(n,[{key:"getOptions",value:function(){return this.options}},{key:"onResize",value:function(r){}},{key:"render",value:function(r){var a=r.gl;r=r.texture;var u=this.programSample;a.useProgram(u.program);var p=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,p);var y=[-1,-1,0,-1,1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0];a.bufferData(a.ARRAY_BUFFER,new Float32Array(y),a.STATIC_DRAW),a.enableVertexAttribArray(u.attributes.aPos),a.vertexAttribPointer(u.attributes.aPos,3,a.FLOAT,!1,0,0),p=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,p),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,1,1,1,0,0,1,0]),a.STATIC_DRAW),a.enableVertexAttribArray(u.attributes.aTextureCoord),a.vertexAttribPointer(u.attributes.aTextureCoord,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,r),a.uniform1i(u.uniforms.uSampler,0),a.drawArrays(a.TRIANGLES,0,y.length/3)}}]),n}();(function(n){function e(r){return yi(this,e),Aa(this,(e.__proto__||mo(e)).call(this,r))}return Ss(e,n),Vl(e,[{key:"getProgram",value:function(a){return this.programSample||(this.programSample=new Rd(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(void){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision highp float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;vec4 fxaa_2_0(sampler2D tex,vec2 fragCoord,vec2 resolution,vec2 v_rgbNW,vec2 v_rgbNE,vec2 v_rgbSW,vec2 v_rgbSE,vec2 v_rgbM){vec4 color;mediump vec2 inverseVP=vec2(1.0/resolution.x,1.0/resolution.y);vec3 rgbNW=texture2D(tex,v_rgbNW).xyz;vec3 rgbNE=texture2D(tex,v_rgbNE).xyz;vec3 rgbSW=texture2D(tex,v_rgbSW).xyz;vec3 rgbSE=texture2D(tex,v_rgbSE).xyz;vec4 texColor=texture2D(tex,v_rgbM);vec3 rgbM=texColor.xyz;vec3 luma=vec3(0.299,0.587,0.114);float lumaNW=dot(rgbNW,luma);float lumaNE=dot(rgbNE,luma);float lumaSW=dot(rgbSW,luma);float lumaSE=dot(rgbSE,luma);float lumaM=dot(rgbM,luma);float lumaMin=min(lumaM,min(min(lumaNW,lumaNE),min(lumaSW,lumaSE)));float lumaMax=max(lumaM,max(max(lumaNW,lumaNE),max(lumaSW,lumaSE)));mediump vec2 dir;dir.x=-((lumaNW+lumaNE)-(lumaSW+lumaSE));dir.y=((lumaNW+lumaSW)-(lumaNE+lumaSE));float dirReduce=max((lumaNW+lumaNE+lumaSW+lumaSE)*(0.25*1.0/8.0),1.0/128.0);float rcpDirMin=1.0/(min(abs(dir.x),abs(dir.y))+dirReduce);dir=min(vec2(8.0,8.0),max(vec2(-8.0,-8.0),dir*rcpDirMin))*inverseVP;vec3 rgbA=0.5*(texture2D(tex,fragCoord*inverseVP+dir*(1.0/3.0-0.5)).xyz+texture2D(tex,fragCoord*inverseVP+dir*(2.0/3.0-0.5)).xyz);vec3 rgbB=rgbA*0.5+0.25*(texture2D(tex,fragCoord*inverseVP+dir*-0.5).xyz+texture2D(tex,fragCoord*inverseVP+dir*0.5).xyz);float lumaB=dot(rgbB,luma);if((lumaB<lumaMin)||(lumaB>lumaMax)){color=vec4(rgbA,texColor.a);}else{color=vec4(rgbB,texColor.a);}return color;}void texcoords_3_1(vec2 fragCoord,vec2 resolution,out vec2 v_rgbNW,out vec2 v_rgbNE,out vec2 v_rgbSW,out vec2 v_rgbSE,out vec2 v_rgbM){vec2 inverseVP=1.0/resolution.xy;v_rgbNW=(fragCoord+vec2(-1.0,-1.0))*inverseVP;v_rgbNE=(fragCoord+vec2(1.0,-1.0))*inverseVP;v_rgbSW=(fragCoord+vec2(-1.0,1.0))*inverseVP;v_rgbSE=(fragCoord+vec2(1.0,1.0))*inverseVP;v_rgbM=vec2(fragCoord*inverseVP);}vec4 apply_1_2(sampler2D tex,vec2 fragCoord,vec2 resolution){mediump vec2 v_rgbNW;mediump vec2 v_rgbNE;mediump vec2 v_rgbSW;mediump vec2 v_rgbSE;mediump vec2 v_rgbM;texcoords_3_1(fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);return fxaa_2_0(tex,fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);}void main(void){vec2 fragCoord=vTextureCoord*canvasSize;gl_FragColor=apply_1_2(uSampler,fragCoord,canvasSize);}"})),this.programSample}},{key:"render",value:function(a){var u=a.gl;a=a.texture,this.getOptions(),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);var p=this.getProgram(u);u.useProgram(p.program);var y=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,y),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.vertex),u.STATIC_DRAW),u.enableVertexAttribArray(p.attributes.aPos),u.vertexAttribPointer(p.attributes.aPos,3,u.FLOAT,!1,0,0),y=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,y),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.sampleCoord),u.STATIC_DRAW),u.enableVertexAttribArray(p.attributes.aTextureCoord),u.vertexAttribPointer(p.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,a),u.uniform1i(p.uniforms.uSampler,1),u.uniform2fv(p.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.bindBuffer(u.ARRAY_BUFFER,null),u.useProgram(null)}}]),e})(Ay),function(n){function e(r){return yi(this,e),Aa(this,(e.__proto__||mo(e)).call(this,r))}return Ss(e,n),Vl(e,[{key:"getProgram",value:function(a){if(this.program1||(this.program1=new Rd(a,{vertexShader:"attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];void SMAAEdgeDetectionVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);vOffset[2]=texcoord.xyxy+resolution.xyxy*vec4(-2.0,0.0,0.0,2.0);}void main(){vUv=uv;SMAAEdgeDetectionVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:`precision highp float;
#define SMAA_THRESHOLD 0.1
uniform sampler2D tDiffuse;varying vec2 vUv;varying vec4 vOffset[3];vec4 SMAAColorEdgeDetectionPS(vec2 texcoord,vec4 offset[3],sampler2D colorTex){vec2 threshold=vec2(SMAA_THRESHOLD,SMAA_THRESHOLD);vec4 delta;vec3 C=texture2D(colorTex,texcoord).rgb;vec3 Cleft=texture2D(colorTex,offset[0].xy).rgb;vec3 t=abs(C-Cleft);delta.x=max(max(t.r,t.g),t.b);vec3 Ctop=texture2D(colorTex,offset[0].zw).rgb;t=abs(C-Ctop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0,1.0))==0.0)discard;vec3 Cright=texture2D(colorTex,offset[1].xy).rgb;t=abs(C-Cright);delta.z=max(max(t.r,t.g),t.b);vec3 Cbottom=texture2D(colorTex,offset[1].zw).rgb;t=abs(C-Cbottom);delta.w=max(max(t.r,t.g),t.b);float maxDelta=max(max(max(delta.x,delta.y),delta.z),delta.w);vec3 Cleftleft=texture2D(colorTex,offset[2].xy).rgb;t=abs(C-Cleftleft);delta.z=max(max(t.r,t.g),t.b);vec3 Ctoptop=texture2D(colorTex,offset[2].zw).rgb;t=abs(C-Ctoptop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(max(maxDelta,delta.z),delta.w);edges.xy*=step(0.5*maxDelta,delta.xy);return vec4(edges,0.0,0.0);}void main(){gl_FragColor=SMAAColorEdgeDetectionPS(vUv,vOffset,tDiffuse);}`})),this.program2||(this.program2=new Rd(a,{vertexShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;void SMAABlendingWeightCalculationVS(vec2 texcoord){vPixcoord=texcoord/resolution;vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-0.25,0.125,1.25,0.125);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(-0.125,0.25,-0.125,-1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*resolution.xxyy*float(SMAA_MAX_SEARCH_STEPS);}void main(){vUv=uv;SMAABlendingWeightCalculationVS(vUv);gl_Position=vec4(position,1.0);}`,fragmentShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )
uniform sampler2D tDiffuse;uniform sampler2D tArea;uniform sampler2D tSearch;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;vec2 round(vec2 x){return sign(x)*floor(abs(x)+0.5);}float SMAASearchLength(sampler2D searchTex,vec2 e,float bias,float scale){e.r=bias+e.r*scale;return 255.0*texture2D(searchTex,e,0.0).r;}float SMAASearchXLeft(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){/***@PSEUDO_GATHER4*This texcoord has been offset by(-0.25,-0.125)in the vertex shader to*sample between edge,thus fetching four edges in a row.*Sampling with different offsets in each direction allows to disambiguate*which edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(2.0,0.0)*resolution;if(!(texcoord.x>end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x+=0.25*resolution.x;texcoord.x+=resolution.x;texcoord.x+=2.0*resolution.x;texcoord.x-=resolution.x*SMAASearchLength(searchTex,e,0.0,0.5);return texcoord.x;}float SMAASearchXRight(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(2.0,0.0)*resolution;if(!(texcoord.x<end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x-=0.25*resolution.x;texcoord.x-=resolution.x;texcoord.x-=2.0*resolution.x;texcoord.x+=resolution.x*SMAASearchLength(searchTex,e,0.5,0.5);return texcoord.x;}float SMAASearchYUp(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(0.0,2.0)*resolution;if(!(texcoord.y>end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y-=0.25*resolution.y;texcoord.y-=resolution.y;texcoord.y-=2.0*resolution.y;texcoord.y+=resolution.y*SMAASearchLength(searchTex,e.gr,0.0,0.5);return texcoord.y;}float SMAASearchYDown(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(0.0,2.0)*resolution;if(!(texcoord.y<end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y+=0.25*resolution.y;texcoord.y+=resolution.y;texcoord.y+=2.0*resolution.y;texcoord.y-=resolution.y*SMAASearchLength(searchTex,e.gr,0.5,0.5);return texcoord.y;}vec2 SMAAArea(sampler2D areaTex,vec2 dist,float e1,float e2,float offset){vec2 texcoord=float(SMAA_AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texcoord=SMAA_AREATEX_PIXEL_SIZE*texcoord+(0.5*SMAA_AREATEX_PIXEL_SIZE);texcoord.y+=SMAA_AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTex,texcoord,0.0).rg;}vec4 SMAABlendingWeightCalculationPS(vec2 texcoord,vec2 pixcoord,vec4 offset[3],sampler2D edgesTex,sampler2D areaTex,sampler2D searchTex,ivec4 subsampleIndices){vec4 weights=vec4(0.0,0.0,0.0,0.0);vec2 e=texture2D(edgesTex,texcoord).rg;if(e.g>0.0){vec2 d;vec2 coords;coords.x=SMAASearchXLeft(edgesTex,searchTex,offset[0].xy,offset[2].x);coords.y=offset[1].y;d.x=coords.x;float e1=texture2D(edgesTex,coords,0.0).r;coords.x=SMAASearchXRight(edgesTex,searchTex,offset[0].zw,offset[2].y);d.y=coords.x;d=d/resolution.x-pixcoord.x;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(1,0)).r;weights.rg=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.y));}if(e.r>0.0){vec2 d;vec2 coords;coords.y=SMAASearchYUp(edgesTex,searchTex,offset[1].xy,offset[2].z);coords.x=offset[0].x;d.x=coords.y;float e1=texture2D(edgesTex,coords,0.0).g;coords.y=SMAASearchYDown(edgesTex,searchTex,offset[1].zw,offset[2].w);d.y=coords.y;d=d/resolution.y-pixcoord.y;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(0,1)).g;weights.ba=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.x));}return weights;}void main(){gl_FragColor=SMAABlendingWeightCalculationPS(vUv,vPixcoord,vOffset,tDiffuse,tArea,tSearch,ivec4(0.0));}`})),this.program3||(this.program3=new Rd(a,{vertexShader:"precision highp float;uniform vec2 resolution;attribute vec3 position;attribute vec2 uv;varying vec2 vUv;varying vec4 vOffset[2];void SMAANeighborhoodBlendingVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);}void main(){vUv=uv;SMAANeighborhoodBlendingVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:"precision highp float;uniform sampler2D tDiffuse;uniform sampler2D tColor;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[2];vec4 SMAANeighborhoodBlendingPS(vec2 texcoord,vec4 offset[2],sampler2D colorTex,sampler2D blendTex){vec4 a;a.xz=texture2D(blendTex,texcoord).xz;a.y=texture2D(blendTex,offset[1].zw).g;a.w=texture2D(blendTex,offset[1].xy).a;if(dot(a,vec4(1.0,1.0,1.0,1.0))<1e-5){return texture2D(colorTex,texcoord,0.0);}else{vec2 offset;offset.x=a.a>a.b ? a.a :-a.b;offset.y=a.g>a.r ?-a.g : a.r;if(abs(offset.x)>abs(offset.y)){offset.y=0.0;}else{offset.x=0.0;}vec4 C=texture2D(colorTex,texcoord,0.0);texcoord+=sign(offset)*resolution;vec4 Cop=texture2D(colorTex,texcoord,0.0);float s=abs(offset.x)>abs(offset.y)? abs(offset.x): abs(offset.y);C.xyz=pow(C.xyz,vec3(2.2));Cop.xyz=pow(Cop.xyz,vec3(2.2));vec4 mixed=mix(C,Cop,s);mixed.xyz=pow(mixed.xyz,vec3(1.0/2.2));return mixed;}}void main(){gl_FragColor=SMAANeighborhoodBlendingPS(vUv,vOffset,tColor,tDiffuse);}"})),!this.vertexBuffer||!this.sampleBuffer){this.vertexBuffer=new U1({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new U1({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord));var u=[{stride:12,name:"position",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"uv",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}];this.vertexArray1=new cA({gl:a,program:this.program1,attributes:u}),this.vertexArray2=new cA({gl:a,program:this.program2,attributes:u}),this.vertexArray3=new cA({gl:a,program:this.program3,attributes:u})}return{program1:this.program1,program2:this.program2,program3:this.program3}}},{key:"onResize",value:function(a){this.collectBrightBuffer=new Vh(a),this.bloomBuffer=new Vh(a)}},{key:"getExtraFbo",value:function(a){return this.collectBrightBuffer||(this.collectBrightBuffer=new Vh(a)),this.bloomBuffer||(this.bloomBuffer=new Vh(a)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(a){var u=a.gl,p=a.texture;a=a.fbo,this.getOptions(),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);var y=this.getProgram(u),C=y.program1,S=y.program2;y=y.program3;var R=this.getExtraFbo(u),N=R.collectBrightBuffer;R=R.bloomBuffer;var z=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,z),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.vertex),u.STATIC_DRAW),u.enableVertexAttribArray(C.attributes.position),u.vertexAttribPointer(C.attributes.position,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(S.attributes.position),u.vertexAttribPointer(S.attributes.position,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(y.attributes.position),u.vertexAttribPointer(y.attributes.position,3,u.FLOAT,!1,0,0),z=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,z),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.sampleCoord),u.STATIC_DRAW),u.enableVertexAttribArray(C.attributes.uv),u.vertexAttribPointer(C.attributes.uv,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(S.attributes.uv),u.vertexAttribPointer(S.attributes.uv,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(y.attributes.uv),u.vertexAttribPointer(y.attributes.uv,2,u.FLOAT,!1,0,0),u.useProgram(C.program),u.bindFramebuffer(u.FRAMEBUFFER,N),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,p),u.uniform1i(C.uniforms.tDiffuse,2),u.uniform2fv(C.uniforms.resolution,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(S.program),u.bindFramebuffer(u.FRAMEBUFFER,R),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,N.texture),u.uniform1i(S.uniforms.uSampler,2),u.uniform2fv(S.uniforms.resolution,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(y.program),u.bindFramebuffer(u.FRAMEBUFFER,a),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,p),u.uniform1i(y.uniforms.tDiffuse,2),u.activeTexture(u.TEXTURE3),u.bindTexture(u.TEXTURE_2D,R.texture),u.uniform1i(y.uniforms.tColor,3),u.uniform2fv(y.uniforms.resolution,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.bindBuffer(u.ARRAY_BUFFER,null),u.useProgram(null)}},{key:"getAreaTexture",value:function(){return"data:image/png;base64,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"}},{key:"getSearchTexture",value:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAIAAADiVupLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrs00EKgAAIRNEZ739mTQoiwmhRi4L/FiKiu9ERISkzbXdTVV3H4WhfOG6ehl1rNR7qDSF8hwkVcJXt+3A//I0Nv0GoCBUAAAAAAMA/LAIMAB+Dcg2OE2zsAAAAAElFTkSuQmCC"}}]),e}(Ay),function(n){function e(r){return yi(this,e),Aa(this,(e.__proto__||mo(e)).call(this,r))}return Ss(e,n),Vl(e,[{key:"getProgram",value:function(a){return this.programSample||(this.programSample=new Rd(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){float fStep=1.0/512.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;gl_FragColor=blurSample;}"}),this.vertexBuffer=new U1({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new U1({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord)),this.vertexArray=new cA({gl:a,program:this.programSample,attributes:[{stride:12,name:"aPos",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"aTextureCoord",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}]})),this.programSample}},{key:"render",value:function(a){var u=a.gl;a=a.texture,u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);var p=this.getProgram(u);p.use(u),this.vertexArray.bind(),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,a),u.uniform1i(p.uniforms.uSampler,1),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3)}}]),e}(Ay),function(n){function e(r){return yi(this,e),Aa(this,(e.__proto__||mo(e)).call(this,r))}return Ss(e,n),Vl(e,[{key:"getProgram",value:function(a){return this.programBright||(this.programBright=new Rd(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-(1.0-threshold)/5.0));float brightness=dot(color.rgb,vec3(0.2126,0.7152,0.0722));if(brightness>threshold){color=lightColor;}else{color=vec4(0.0);}gl_FragColor=color;}"})),this.programBloom||(this.programBloom=new Rd(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new Rd(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord);vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(a){this.collectBrightBuffer=new Vh(a),this.bloomBuffer=new Vh(a)}},{key:"getExtraFbo",value:function(a){return this.collectBrightBuffer||(this.collectBrightBuffer=new Vh(a)),this.bloomBuffer||(this.bloomBuffer=new Vh(a)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(a){var u=a.gl,p=a.texture;a=a.fbo;var y=this.getOptions();u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);var C=this.getProgram(u),S=C.programBright,R=C.programBloom;C=C.programResult;var N=this.getExtraFbo(u),z=N.collectBrightBuffer;N=N.bloomBuffer;var Z=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,Z),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.vertex),u.STATIC_DRAW),u.enableVertexAttribArray(S.attributes.aPos),u.vertexAttribPointer(S.attributes.aPos,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(R.attributes.aPos),u.vertexAttribPointer(R.attributes.aPos,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(C.attributes.aPos),u.vertexAttribPointer(C.attributes.aPos,3,u.FLOAT,!1,0,0),Z=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,Z),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.sampleCoord),u.STATIC_DRAW),u.enableVertexAttribArray(S.attributes.aTextureCoord),u.vertexAttribPointer(S.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(R.attributes.aTextureCoord),u.vertexAttribPointer(R.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(C.attributes.aTextureCoord),u.vertexAttribPointer(C.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.useProgram(S.program),u.bindFramebuffer(u.FRAMEBUFFER,z),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,p),u.uniform1i(S.uniforms.uSampler,1),u.uniform1f(S.uniforms.threshold,y.threshold||0),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(R.program),u.bindFramebuffer(u.FRAMEBUFFER,N),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,z.texture),u.uniform1i(R.uniforms.uSampler,1),u.uniform1i(R.uniforms.isVertical,!0),u.uniform1f(R.uniforms.blurSize,y.blurSize||2),u.uniform1f(R.uniforms.devicePixelRatio,window.devicePixelRatio),u.uniform2fv(R.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(R.program),u.bindFramebuffer(u.FRAMEBUFFER,z),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,N.texture),u.uniform1i(R.uniforms.uSampler,1),u.uniform1i(R.uniforms.isVertical,!1),u.uniform1f(R.uniforms.blurSize,y.blurSize||2),u.uniform1f(R.uniforms.devicePixelRatio,window.devicePixelRatio),u.uniform2fv(R.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(C.program),u.bindFramebuffer(u.FRAMEBUFFER,a),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,p),u.uniform1i(C.uniforms.originalTexture,1),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,z.texture),u.uniform1i(C.uniforms.bloomTexture,0),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.bindBuffer(u.ARRAY_BUFFER,null),u.useProgram(null)}}]),e}(Ay),function(n){function e(r){return yi(this,e),Aa(this,(e.__proto__||mo(e)).call(this,r))}return Ss(e,n),Vl(e,[{key:"getProgram",value:function(a){return this.programBright||(this.programBright=new Rd(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-threshold));gl_FragColor=lightColor;}"})),this.programBloom||(this.programBloom=new Rd(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new Rd(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;uniform float toneScale;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord)*toneScale;vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(a){this.collectBrightBuffer=new Vh(a),this.bloomBuffer=new Vh(a)}},{key:"getExtraFbo",value:function(a){return this.collectBrightBuffer||(this.collectBrightBuffer=new Vh(a)),this.bloomBuffer||(this.bloomBuffer=new Vh(a)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(a){var u=a.gl,p=a.texture;a=a.fbo;var y=this.getOptions(),C="clarity"in y?y.clarity:1;C=Math.max(0,C),C=Math.min(1,C),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);var S=this.getProgram(u),R=S.programBright,N=S.programBloom;S=S.programResult;var z=this.getExtraFbo(u),Z=z.collectBrightBuffer;z=z.bloomBuffer;var K=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,K),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.vertex),u.STATIC_DRAW),u.enableVertexAttribArray(R.attributes.aPos),u.vertexAttribPointer(R.attributes.aPos,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(N.attributes.aPos),u.vertexAttribPointer(N.attributes.aPos,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(S.attributes.aPos),u.vertexAttribPointer(S.attributes.aPos,3,u.FLOAT,!1,0,0),K=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,K),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.sampleCoord),u.STATIC_DRAW),u.enableVertexAttribArray(R.attributes.aTextureCoord),u.vertexAttribPointer(R.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(N.attributes.aTextureCoord),u.vertexAttribPointer(N.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(S.attributes.aTextureCoord),u.vertexAttribPointer(S.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.useProgram(R.program),u.bindFramebuffer(u.FRAMEBUFFER,Z),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,p),u.uniform1i(R.uniforms.uSampler,1),u.uniform1f(R.uniforms.threshold,y.threshold||0),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(N.program),u.bindFramebuffer(u.FRAMEBUFFER,z),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,Z.texture),u.uniform1i(N.uniforms.uSampler,1),u.uniform1i(N.uniforms.isVertical,!0),u.uniform1f(N.uniforms.blurSize,y.blurSize||2),u.uniform1f(N.uniforms.devicePixelRatio,window.devicePixelRatio),u.uniform2fv(N.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(N.program),u.bindFramebuffer(u.FRAMEBUFFER,Z),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,z.texture),u.uniform1i(N.uniforms.uSampler,1),u.uniform1i(N.uniforms.isVertical,!1),u.uniform1f(N.uniforms.blurSize,y.blurSize||2),u.uniform1f(N.uniforms.devicePixelRatio,window.devicePixelRatio),u.uniform2fv(N.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(S.program),u.bindFramebuffer(u.FRAMEBUFFER,a),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,p),u.uniform1i(S.uniforms.originalTexture,1),u.uniform1f(S.uniforms.toneScale,C),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,Z.texture),u.uniform1i(S.uniforms.bloomTexture,0),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.bindBuffer(u.ARRAY_BUFFER,null),u.useProgram(null)}}]),e}(Ay),function(n){function e(r){return yi(this,e),Aa(this,(e.__proto__||mo(e)).call(this,r))}return Ss(e,n),Vl(e,[{key:"getProgram",value:function(a){return this.programSample||(this.programSample=new Rd(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;void main(){float fStep=1.0/312.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;float desX=abs((gl_FragCoord.x-canvasSize.x/2.0)/(canvasSize.x/2.0));float desY=abs((gl_FragCoord.y-canvasSize.y/2.0)/(canvasSize.y/2.0));float factor=max(desX,desY);gl_FragColor=(sample22*(1.0-factor)+blurSample*factor);}"})),this.programSample}},{key:"render",value:function(a){var u=a.gl;a=a.texture;var p=this.getProgram(u);u.useProgram(p.program);var y=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,y),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.vertex),u.STATIC_DRAW),u.enableVertexAttribArray(p.attributes.aPos),u.vertexAttribPointer(p.attributes.aPos,3,u.FLOAT,!1,0,0),y=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,y),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.sampleCoord),u.STATIC_DRAW),u.enableVertexAttribArray(p.attributes.aTextureCoord),u.vertexAttribPointer(p.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,a),u.uniform1i(p.uniforms.uSampler,1),u.uniform2fv(p.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3)}}]),e}(Ay),function(){function n(e){yi(this,n),this.gl=e,this.effects=[],this.initFbo()}return Vl(n,[{key:"addEffect",value:function(r){this.effects.push(r)}},{key:"removeEffect",value:function(r){}},{key:"setEffects",value:function(r){this.effects=r}},{key:"onResize",value:function(){this.initFbo();var r=this.gl,a=this.effects;if(a&&1<a.length)for(var u=1;u<a.length;u++){var p=a[u];p.onResize&&p.onResize(r)}}},{key:"initFbo",value:function(){var r=this.gl;r&&(this.fbo=[new Vh(r),new Vh(r)])}},{key:"destroy",value:function(){this.effects=[],this.fbo=[],this.gl=null}},{key:"render",value:function(){var r=this.gl,a=this.effects;if(a&&0<a.length)for(var u={},p=0;p<a.length;p++){var y=this.fbo[p%2].framebuffer;p===a.length-1&&(y=null),r.bindFramebuffer(r.FRAMEBUFFER,y);var C=[0,0,0,0];r.clearColor(C[0],C[1],C[2],C[3]),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),a[p].render({isPickRender:!1,gl:r,texture:u.texture,fbo:y}),u=y}}}]),n}();var Iw=function(n){function e(r){return yi(this,e),r=Aa(this,(e.__proto__||mo(e)).call(this,r)),r.layerType="ThreeLayer",r}return Ss(e,n),Vl(e,[{key:"initialize",value:function(a){this.getOptions();var u=this.webglLayer.map.map;this.webglLayer.map.type==="three"?(this.camera=u.camera,this.scene=u.scene):(this.camera=new ea.PerspectiveCamera,this.scene=new ea.Scene),this.world=new ea.Group,this.scene.add(this.world),this.webglLayer.map.type!=="three"&&(this.camera.matrixAutoUpdate=!1,this.world.matrixAutoUpdate=!1,this.renderer=new ea.WebGLRenderer({alpha:!0,antialias:!0,canvas:a.canvas,context:a}),this.renderer.autoClear=!1)}},{key:"_add",value:function(a,u){var p=this.getOptions();this.scene.add(a);var y=[0,0];p.enabledPointOffset===!0&&(y=this.getPointOffset()),u?(p=new ea.Group,p.isGeoGroup=!0,p.object=a,p.point=u,p.add(a),p.position.x=u.lng-y[0],p.position.y=u.lat-y[1],p.position.z=a.position.z,this.world.add(p)):this.world.add(a)}},{key:"add",value:function(a,u){this._add(a,u),this.update()}},{key:"update",value:function(){this.webglLayer.render()}},{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getRenderer",value:function(){return this.renderer}},{key:"getWorld",value:function(){return this.world}},{key:"updatePoint",value:function(a,u){for(var p=this.world.children,y=0;y<p.length;y++)if(p[y].isGeoGroup&&p[y].object===a){var C=p[y];C.position.x=u.lng,C.position.y=u.lat,C.position.z=a.position.z}}},{key:"remove",value:function(a){this.world.remove(a);for(var u=this.world.children,p=0;p<u.length;p++)u[p].children&&0<u[p].children.length&&u[p].children[0]===a&&this.world.remove(u[p]);this.update()}},{key:"updateCamera",value:function(){var a=this.world,u=this.map.getZoomUnits();a=a.children;for(var p=0;p<a.length;p++)a[p].point&&a[p].scale.set(u,u,u)}},{key:"render",value:function(a){var u=this.getOptions();if(a){if(!this.webglLayer.map.map.camera){this.updateCamera();var p=this.getPointOffset(),y=new ea.Matrix4().fromArray(a.viewMatrix);this.camera.projectionMatrix=new ea.Matrix4().fromArray(a.projectionMatrix),this.camera.projectionMatrixInverse.getInverse(this.camera.projectionMatrix),u.enabledPointOffset===!0?this.world.matrix=y:(a=new ea.Matrix4().makeTranslation(-p[0],-p[1],0),this.world.matrix=y.multiply(a)),this.renderer.state.reset(),this.postProcessing?this.postProcessing.render():this.renderer.render(this.scene,this.camera)}}else this.update()}}]),e}(function(n){function e(r){return yi(this,e),r=Aa(this,(e.__proto__||mo(e)).call(this,r)),r.pickedColor=[-1,-1,-1],r}return Ss(e,n),Vl(e,[{key:"getCommonDefaultOptions",value:function(){return{zIndex:0,zoomThreshold:[0,30],repeat:!1,enablePicked:!1,autoSelect:!1,selectedIndex:-1,selectedColor:"rgba(20, 20, 200, 1.0)"}}},{key:"commonInitialize",value:function(a){var u=this.getOptions();this.gl=a,u.enablePicked&&(this.pickBuffer=new U1({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}))}},{key:"getCommonAttributes",value:function(){var a=[];return this.getOptions().enablePicked&&a.push({name:"aPickColor",buffer:this.pickBuffer,size:3,type:"FLOAT",stride:12,offset:0}),a}},{key:"getProperty",value:function(a,u,p){return Object.prototype.toString.call(u)==="[object Function]"?u(p):(u=p[a]||u,"properties"in p&&a in p.properties&&(u=p.properties[a]),u)}},{key:"normizedColor",value:function(a){var u=a;return a instanceof Array||(u=Ki(a).unitArray()),u[3]===void 0&&(u[3]=1),u}},{key:"normizedPoint",value:function(a){var u=this.getPointOffset();if(!a||!a[0]||!a[1])return[u[0],u[1],0];var p=Number(a[0]),y=Number(a[1]);-180<=p&&180>=p&&-90<=y&&90>=y&&(y=this.webglLayer.map.lnglatToMercator(p,y),p=y[0],y=y[1]);var C=Number(a[2])||0;return this.webglLayer&&this.webglLayer.options.mapType==="cesium"&&window.Cesium?(p=this.convertLngLat([p,y]),C=window.Cesium.Cartesian3.fromDegrees(p[0],p[1],C),p=C.x,y=C.y,C=C.z):this.webglLayer&&this.webglLayer.options.mapType==="bmapgl"&&this.webglLayer.map.map.mapType==="B_EARTH_MAP"&&(p=this.convertLngLat([p,y]),C=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:p[0],lat:p[1]}),p=C.x,y=C.y,C=C.z),3<a.length?[p-u[0],y-u[1],C].concat(Mw(a.slice(3))):[p-u[0],y-u[1],C]}},{key:"convertLngLat",value:function(a){return[a[0]/2003750834e-2*180,180/Math.PI*(2*Math.atan(Math.exp(a[1]/2003750834e-2*180*Math.PI/180))-Math.PI/2)]}},{key:"getPointOffset",value:function(){var a=[0,0],u=this.getOptions();return this.webglLayer&&this.webglLayer.options.pointOffset?a=this.webglLayer.options.pointOffset:u.pointOffset&&(a=u.pointOffset),a}},{key:"indexToRgb",value:function(a){a++;var u=Math.floor(a/65536);a-=65536*u;var p=Math.floor(a/256);return[a-256*p,p,u]}},{key:"rgbToIndex",value:function(a){return a[0]+256*a[1]+65536*a[2]-1}},{key:"getCommonUniforms",value:function(a){a=a.isPickRender;var u=this.getOptions(),p={};if(u.enablePicked){var y=0<=u.selectedIndex?u.selectedIndex:-1;y=u.autoSelect?this.pickedColor:this.indexToRgb(y),p=Ce(p,{uSelectedColor:this.normizedColor(u.selectedColor),uEnablePicked:u.enablePicked,uPickedColor:y.map(function(C){return C/255}),uIsPickRender:!!a})}return p}},{key:"pick",value:function(a,u){var p=this.gl,y=this.webglLayer._dpr;this.webglLayer.saveFramebuffer(),this.webglLayer.bindFramebuffer(this.webglLayer.pickFBO),this.webglLayer.clear(),this.render({gl:p,isPickRender:!0,matrix:this.webglLayer.matrix,projectionMatrix:this.webglLayer.projectionMatrix,viewMatrix:this.webglLayer.viewMatrix,orthoMatrix:this.webglLayer.orthoMatrix});var C=new Uint8Array(4);return p.readPixels(a*y,p.canvas.height-u*y,1,1,p.RGBA,p.UNSIGNED_BYTE,C),a=this.rgbToIndex(C),u=this.getData(),this.pickedColor=[C[0],C[1],C[2]],this.webglLayer.restoreFramebuffer(),{dataIndex:a,dataItem:u[a]}}},{key:"setGLState",value:function(a){this.webglLayer.stateManager.setState(a)}},{key:"addMultipleCoords",value:function(a,u,p){if(!this.options.repeat||!this.webglLayer||this.webglLayer.options.mapType!=="bmapgl"||this.webglLayer.map.map.mapType==="B_EARTH_MAP")return[a];var y=this.webglLayer.map.map;u=u||y.getZoom();var C=p?y.worldSize(u):4007545274461451e-8;if(u=function(oe){return[[oe[0]-C,oe[1],oe[2]||0],[oe[0]+C,oe[1],oe[2]||0]]},a instanceof Array&&!(a[0]instanceof Array))return u=u(a),u=eC(u,2),[a,u[0],u[1]];if(a instanceof Array&&a[0]instanceof Array&&!(a[0][0]instanceof Array)){p=[],y=[];for(var S=0;S<a.length;S++){var R=u(a[S]);R=eC(R,2);var N=R[1];p.push(R[0]),y.push(N)}return[a,p,y]}for(p=[],y=[],S=0;S<a.length;S++){R=[],N=[];for(var z=0;z<a[S].length;z++){var Z=u(a[S][z]);Z=eC(Z,2);var K=Z[1];R.push(Z[0]),N.push(K)}p.push(R),y.push(N)}return[a,p,y]}}]),e}(Sw)),nC=function(n){function e(r){yi(this,e);var a=Aa(this,(e.__proto__||mo(e)).call(this,r));return a.layerType="threeLayer",a.setOptions(r),a}return Ss(e,n),Vl(e,[{key:"getCommonDefaultOptions",value:function(){return{zIndex:0,zoomThreshold:[0,30]}}},{key:"setWebglLayer",value:function(a){a.threeLayer||(a.threeLayer=new Iw({enabledPointOffset:!0,webglLayer:a})),this.threeLayer=a.threeLayer}},{key:"getPointOffset",value:function(){return this.threeLayer.getPointOffset()}},{key:"getThreeLayer",value:function(){return this.threeLayer}}]),e}(Sw),Cy={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`varying vec2 vUv;
void main() {
	vUv = uv;
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform float opacity;
uniform sampler2D tDiffuse;
varying vec2 vUv;
void main() {
	vec4 texel = texture2D( tDiffuse, vUv );
	gl_FragColor = opacity * texel;
}`};Ce(ds.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),ds.FullScreenQuad=function(){var n=new Mu(-1,1,1,-1,0,1),e=new Uc(2,2),r=function(u){this._mesh=new oa(e,u)};return Object.defineProperty(r.prototype,"material",{get:function(){return this._mesh.material},set:function(u){this._mesh.material=u}}),Ce(r.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(u){u.render(this._mesh,n)}}),r}();var hA=function(e,r){ds.call(this),this.textureID=r!==void 0?r:"tDiffuse",e instanceof _i?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Im.clone(e.uniforms),this.material=new _i({defines:Ce({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new ds.FullScreenQuad(this.material)};hA.prototype=Ce(me(ds.prototype),{constructor:hA,render:function(e,r,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=a.texture),this.fsQuad.material=this.material,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)),this.fsQuad.render(e)}});var fA=function(e,r){ds.call(this),this.scene=e,this.camera=r,this.clear=!0,this.inverse=this.needsSwap=!1};fA.prototype=Ce(me(ds.prototype),{constructor:fA,render:function(e,r,a){var u=e.getContext(),p=e.state;if(p.buffers.color.setMask(!1),p.buffers.depth.setMask(!1),p.buffers.color.setLocked(!0),p.buffers.depth.setLocked(!0),this.inverse)var y=0,C=1;else y=1,C=0;p.buffers.stencil.setTest(!0),p.buffers.stencil.setOp(u.REPLACE,u.REPLACE,u.REPLACE),p.buffers.stencil.setFunc(u.ALWAYS,y,4294967295),p.buffers.stencil.setClear(C),p.buffers.stencil.setLocked(!0),e.setRenderTarget(a),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),p.buffers.color.setLocked(!1),p.buffers.depth.setLocked(!1),p.buffers.stencil.setLocked(!1),p.buffers.stencil.setFunc(u.EQUAL,1,4294967295),p.buffers.stencil.setOp(u.KEEP,u.KEEP,u.KEEP),p.buffers.stencil.setLocked(!0)}});var iC=function(){ds.call(this),this.needsSwap=!1};iC.prototype=me(ds.prototype),Ce(iC.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var Ew=function(e,r){this.renderer=e,r===void 0?(r=e.getSize(new ce),this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,r=new pt(this._width*this._pixelRatio,this._height*this._pixelRatio,{minFilter:1006,magFilter:1006,format:1023,stencilBuffer:!1}),r.texture.name="EffectComposer.rt1"):(this._pixelRatio=1,this._width=r.width,this._height=r.height),this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],Cy===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),hA===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new hA(Cy),this.clock=new Rl};Ce(Ew.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},isLastEnabledPass:function(e){for(e+=1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render:function(e){e===void 0&&(e=this.clock.getDelta());var r=this.renderer.getRenderTarget(),a=!1,u,p=this.passes.length;for(u=0;u<p;u++){var y=this.passes[u];if(y.enabled!==!1){if(y.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(u),y.render(this.renderer,this.writeBuffer,this.readBuffer,e,a),y.needsSwap){if(a){var C=this.renderer.getContext(),S=this.renderer.state.buffers.stencil;S.setFunc(C.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),S.setFunc(C.EQUAL,1,4294967295)}this.swapBuffers()}fA!==void 0&&(y instanceof fA?a=!0:y instanceof iC&&(a=!1))}}this.renderer.setRenderTarget(r)},reset:function(e){e===void 0&&(e=this.renderer.getSize(new ce),this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)),this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,r){this._width=e,this._height=r,e=this._width*this._pixelRatio,r=this._height*this._pixelRatio,this.renderTarget1.setSize(e,r),this.renderTarget2.setSize(e,r);for(var a=0;a<this.passes.length;a++)this.passes[a].setSize(e,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var bw=function(){this.needsSwap=this.enabled=!0,this.renderToScreen=this.clear=!1};Ce(bw.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),bw.FullScreenQuad=function(){var n=new Mu(-1,1,1,-1,0,1),e=new Uc(2,2),r=function(u){this._mesh=new oa(e,u)};return Object.defineProperty(r.prototype,"material",{get:function(){return this._mesh.material},set:function(u){this._mesh.material=u}}),Ce(r.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(u){u.render(this._mesh,n)}}),r}();var k1=function(e,r,a,u,p){ds.call(this),this.scene=e,this.camera=r,this.overrideMaterial=a,this.clearColor=u,this.clearAlpha=p!==void 0?p:0,this.clear=!0,this.needsSwap=this.clearDepth=!1};k1.prototype=Ce(me(ds.prototype),{constructor:k1,render:function(e,r,a){if(r=e.autoClear,e.autoClear=!1,this.overrideMaterial!==void 0){var u=this.scene.overrideMaterial;this.scene.overrideMaterial=this.overrideMaterial}if(this.clearColor){var p=e.getClearColor().getHex(),y=e.getClearAlpha();e.setClearColor(this.clearColor,this.clearAlpha)}this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:a),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(p,y),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=u),e.autoClear=r}});var H1={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new ce(1/1024,1/512)}},vertexShader:`uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 3 ];
void SMAAEdgeDetectionVS( vec2 texcoord ) {
	vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );
	vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );
	vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );
}
void main() {
	vUv = uv;
	SMAAEdgeDetectionVS( vUv );
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D tDiffuse;
varying vec2 vUv;
varying vec4 vOffset[ 3 ];
vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
	vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );
	vec4 delta;
	vec3 C = texture2D( colorTex, texcoord ).rgb;
	vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
	vec3 t = abs( C - Cleft );
	delta.x = max( max( t.r, t.g ), t.b );
	vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
	t = abs( C - Ctop );
	delta.y = max( max( t.r, t.g ), t.b );
	vec2 edges = step( threshold, delta.xy );
	if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
		discard;
	vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
	t = abs( C - Cright );
	delta.z = max( max( t.r, t.g ), t.b );
	vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
	t = abs( C - Cbottom );
	delta.w = max( max( t.r, t.g ), t.b );
	float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );
	vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
	t = abs( C - Cleftleft );
	delta.z = max( max( t.r, t.g ), t.b );
	vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
	t = abs( C - Ctoptop );
	delta.w = max( max( t.r, t.g ), t.b );
	maxDelta = max( max( maxDelta, delta.z ), delta.w );
	edges.xy *= step( 0.5 * maxDelta, delta.xy );
	return vec4( edges, 0.0, 0.0 );
}
void main() {
	gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );
}`},IM={SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},EM={tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new ce(1/1024,1/512)}},bM={tDiffuse:{value:null},tColor:{value:null},resolution:{value:new ce(1/1024,1/512)}},oC=function(e,r){ds.call(this),this.edgesRT=new pt(e,r,{depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,minFilter:1006,format:1022}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new pt(e,r,{depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,minFilter:1006,format:1023}),this.weightsRT.texture.name="SMAAPass.weights";var a=this,u=new Image;u.src=this.getAreaTexture(),u.onload=function(){a.areaTexture.needsUpdate=!0},this.areaTexture=new Q,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=u,this.areaTexture.format=1022,this.areaTexture.minFilter=1006,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1,u=new Image,u.src=this.getSearchTexture(),u.onload=function(){a.searchTexture.needsUpdate=!0},this.searchTexture=new Q,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=u,this.searchTexture.magFilter=1003,this.searchTexture.minFilter=1003,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,H1===void 0&&console.error("SMAAPass relies on SMAAShader"),this.uniformsEdges=Im.clone(H1.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/r),this.materialEdges=new _i({defines:Ce({},H1.defines),uniforms:this.uniformsEdges,vertexShader:H1.vertexShader,fragmentShader:H1.fragmentShader}),this.uniformsWeights=Im.clone(EM),this.uniformsWeights.resolution.value.set(1/e,1/r),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new _i({defines:Ce({},IM),uniforms:this.uniformsWeights,vertexShader:`uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 3 ];
varying vec2 vPixcoord;
void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
	vPixcoord = texcoord / resolution;
	vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 );
	vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 );
	vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );
}
void main() {
	vUv = uv;
	SMAABlendingWeightCalculationVS( vUv );
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )
uniform sampler2D tDiffuse;
uniform sampler2D tArea;
uniform sampler2D tSearch;
uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[3];
varying vec2 vPixcoord;
#if __VERSION__ == 100
vec2 round( vec2 x ) {
	return sign( x ) * floor( abs( x ) + 0.5 );
}
#endif
float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
	e.r = bias + e.r * scale;
	return 255.0 * texture2D( searchTex, e, 0.0 ).r;
}
float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 0.0, 1.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord -= vec2( 2.0, 0.0 ) * resolution;
		if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
	}
	texcoord.x += 0.25 * resolution.x;
	texcoord.x += resolution.x;
	texcoord.x += 2.0 * resolution.x;
	texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);
	return texcoord.x;
}
float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 0.0, 1.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord += vec2( 2.0, 0.0 ) * resolution;
		if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
	}
	texcoord.x -= 0.25 * resolution.x;
	texcoord.x -= resolution.x;
	texcoord.x -= 2.0 * resolution.x;
	texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );
	return texcoord.x;
}
float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 1.0, 0.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord += vec2( 0.0, 2.0 ) * resolution;
		if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
	}
	texcoord.y -= 0.25 * resolution.y;
	texcoord.y -= resolution.y;
	texcoord.y -= 2.0 * resolution.y;
	texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 );
	return texcoord.y;
}
float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 1.0, 0.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord -= vec2( 0.0, 2.0 ) * resolution;
		if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
	}
	texcoord.y += 0.25 * resolution.y;
	texcoord.y += resolution.y;
	texcoord.y += 2.0 * resolution.y;
	texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 );
	return texcoord.y;
}
vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
	vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;
	texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );
	texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;
	return texture2D( areaTex, texcoord, 0.0 ).rg;
}
vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
	vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );
	vec2 e = texture2D( edgesTex, texcoord ).rg;
	if ( e.g > 0.0 ) {
		vec2 d;
		vec2 coords;
		coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
		coords.y = offset[ 1 ].y;
		d.x = coords.x;
		float e1 = texture2D( edgesTex, coords, 0.0 ).r;
		coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
		d.y = coords.x;
		d = d / resolution.x - pixcoord.x;
		vec2 sqrt_d = sqrt( abs( d ) );
		coords.y -= 1.0 * resolution.y;
		float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;
		weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
	}
	if ( e.r > 0.0 ) {
		vec2 d;
		vec2 coords;
		coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
		coords.x = offset[ 0 ].x;
		d.x = coords.y;
		float e1 = texture2D( edgesTex, coords, 0.0 ).g;
		coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
		d.y = coords.y;
		d = d / resolution.y - pixcoord.y;
		vec2 sqrt_d = sqrt( abs( d ) );
		coords.y -= 1.0 * resolution.y;
		float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;
		weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
	}
	return weights;
}
void main() {
	gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );
}`}),this.uniformsBlend=Im.clone(bM),this.uniformsBlend.resolution.value.set(1/e,1/r),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new _i({uniforms:this.uniformsBlend,vertexShader:`uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 2 ];
void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
	vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 );
	vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 );
}
void main() {
	vUv = uv;
	SMAANeighborhoodBlendingVS( vUv );
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D tDiffuse;
uniform sampler2D tColor;
uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 2 ];
vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
	vec4 a;
	a.xz = texture2D( blendTex, texcoord ).xz;
	a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
	a.w = texture2D( blendTex, offset[ 1 ].xy ).a;
	if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
		return texture2D( colorTex, texcoord, 0.0 );
	} else {
		vec2 offset;
		offset.x = a.a > a.b ? a.a : -a.b;
		offset.y = a.g > a.r ? -a.g : a.r;
		if ( abs( offset.x ) > abs( offset.y )) {
			offset.y = 0.0;
		} else {
			offset.x = 0.0;
		}
		vec4 C = texture2D( colorTex, texcoord, 0.0 );
		texcoord += sign( offset ) * resolution;
		vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
		float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );
		C.xyz = pow(C.xyz, vec3(2.2));
		Cop.xyz = pow(Cop.xyz, vec3(2.2));
		vec4 mixed = mix(C, Cop, s);
		mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));
		return mixed;
	}
}
void main() {
	gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );
}`}),this.needsSwap=!1,this.fsQuad=new ds.FullScreenQuad(null)};oC.prototype=Ce(me(ds.prototype),{constructor:oC,render:function(e,r,a){this.uniformsEdges.tDiffuse.value=a.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=a.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(r),this.clear&&e.clear()),this.fsQuad.render(e)},setSize:function(e,r){this.edgesRT.setSize(e,r),this.weightsRT.setSize(e,r),this.materialEdges.uniforms.resolution.value.set(1/e,1/r),this.materialWeights.uniforms.resolution.value.set(1/e,1/r),this.materialBlend.uniforms.resolution.value.set(1/e,1/r)},getAreaTexture:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="},getSearchTexture:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}});var dA={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new vt(0)},defaultOpacity:{value:0}},vertexShader:`varying vec2 vUv;
void main() {
	vUv = uv;
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D tDiffuse;
uniform vec3 defaultColor;
uniform float defaultOpacity;
uniform float luminosityThreshold;
uniform float smoothWidth;
varying vec2 vUv;
void main() {
	vec4 texel = texture2D( tDiffuse, vUv );
	vec3 luma = vec3( 0.299, 0.587, 0.114 );
	float v = dot( texel.xyz, luma );
	vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );
	float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );
	gl_FragColor = mix( outputColor, texel, alpha );
}`},Hv=function(e,r,a,u){ds.call(this),this.strength=r!==void 0?r:1,this.radius=a,this.threshold=u,this.resolution=e!==void 0?new ce(e.x,e.y):new ce(256,256),this.clearColor=new vt(0,0,0);var p={minFilter:1006,magFilter:1006,format:1023};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5,e=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2),this.renderTargetBright=new pt(e,a,p),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var y=0;y<this.nMips;y++){var C=new pt(e,a,p);C.texture.name="UnrealBloomPass.h"+y,C.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(C),C=new pt(e,a,p),C.texture.name="UnrealBloomPass.v"+y,C.texture.generateMipmaps=!1,this.renderTargetsVertical.push(C),e=Math.round(e/2),a=Math.round(a/2)}for(dA===void 0&&console.error("UnrealBloomPass relies on LuminosityHighPassShader"),this.highPassUniforms=Im.clone(dA.uniforms),this.highPassUniforms.luminosityThreshold.value=u,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new _i({uniforms:this.highPassUniforms,vertexShader:dA.vertexShader,fragmentShader:dA.fragmentShader,defines:{}}),this.separableBlurMaterials=[],u=[3,5,7,9,11],e=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2),y=0;y<this.nMips;y++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(u[y])),this.separableBlurMaterials[y].uniforms.texSize.value=new ce(e,a),e=Math.round(e/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0,this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new xe(1,1,1),new xe(1,1,1),new xe(1,1,1),new xe(1,1,1),new xe(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,Cy===void 0&&console.error("UnrealBloomPass relies on CopyShader"),this.copyUniforms=Im.clone(Cy.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new _i({uniforms:this.copyUniforms,vertexShader:Cy.vertexShader,fragmentShader:Cy.fragmentShader,blending:2,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new vt,this.oldClearAlpha=1,this.basic=new wr,this.fsQuad=new ds.FullScreenQuad(null)};Hv.prototype=Ce(me(ds.prototype),{constructor:Hv,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,r){e=Math.round(e/2),r=Math.round(r/2),this.renderTargetBright.setSize(e,r);for(var a=0;a<this.nMips;a++)this.renderTargetsHorizontal[a].setSize(e,r),this.renderTargetsVertical[a].setSize(e,r),this.separableBlurMaterials[a].uniforms.texSize.value=new ce(e,r),e=Math.round(e/2),r=Math.round(r/2)},render:function(e,r,a,u,p){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha(),r=e.autoClear,e.autoClear=!1,e.setClearColor(this.clearColor,0),p&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=a.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=a.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e),u=this.renderTargetBright;for(var y=0;y<this.nMips;y++)this.fsQuad.material=this.separableBlurMaterials[y],this.separableBlurMaterials[y].uniforms.colorTexture.value=u.texture,this.separableBlurMaterials[y].uniforms.direction.value=Hv.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[y]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[y].uniforms.colorTexture.value=this.renderTargetsHorizontal[y].texture,this.separableBlurMaterials[y].uniforms.direction.value=Hv.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[y]),e.clear(),this.fsQuad.render(e),u=this.renderTargetsVertical[y];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,p&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?e.setRenderTarget(null):e.setRenderTarget(a),this.fsQuad.render(e),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=r},getSeperableBlurMaterial:function(e){return new _i({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new ce(.5,.5)},direction:{value:new ce(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;				uniform vec2 direction;								float gaussianPdf(in float x, in float sigma) {					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;				}				void main() {
					vec2 invSize = 1.0 / texSize;					float fSigma = float(SIGMA);					float weightSum = gaussianPdf(0.0, fSigma);					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {						float x = float(i);						float w = gaussianPdf(x, fSigma);						vec2 uvOffset = direction * invSize * x;						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;						diffuseSum += (sample1 + sample2) * w;						weightSum += 2.0 * w;					}					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})},getCompositeMaterial:function(e){return new _i({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:"varying vec2 vUv;				uniform sampler2D blurTexture1;				uniform sampler2D blurTexture2;				uniform sampler2D blurTexture3;				uniform sampler2D blurTexture4;				uniform sampler2D blurTexture5;				uniform sampler2D dirtTexture;				uniform float bloomStrength;				uniform float bloomRadius;				uniform float bloomFactors[NUM_MIPS];				uniform vec3 bloomTintColors[NUM_MIPS];								float lerpBloomFactor(const in float factor) { 					float mirrorFactor = 1.2 - factor;					return mix(factor, mirrorFactor, bloomRadius);				}								void main() {					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + 													 lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + 													 lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + 													 lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + 													 lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );				}"})}}),Hv.BlurDirectionX=new ce(1,0),Hv.BlurDirectionY=new ce(0,1);var LM=function(n){function e(r){return yi(this,e),Aa(this,(e.__proto__||mo(e)).call(this,r))}return Ss(e,n),Vl(e,[{key:"initialize",value:function(a){var u=a.camera,p=a.renderer;if(!this._initialize){if(this.scene=a.scene,this.camera=u,this.renderer=p,a=this.options.passes,this._initialize=!0,this.renderScene=new k1(this.scene,this.camera),u=new Ew(this.renderer),u.addPass(this.renderScene),this.passes=[],a)for(var y=0;y<a.length;y++){var C=a[y],S=void 0;switch(C.name){case"unrealBloom":S=C.strength||1;var R=C.radius||0,N=C.threshold||.5;S=new Hv(new ea.Vector2(window.innerWidth,window.innerHeight),S,R,N);break;case"SMAA":S=new oC(window.innerWidth*p.getPixelRatio(),window.innerHeight*p.getPixelRatio())}if(S){for(var z in C)S[z]=C[z];u.addPass(S)}}this.composer=u}}},{key:"addRender",value:function(a){this.renderScene&&this.renderScene.addRender(a)}},{key:"render",value:function(){this.composer.render(this.scene,this.camera)}}]),e}(nC);Hv.prototype.getSeperableBlurMaterial=function(n){return new ea.ShaderMaterial({defines:{KERNEL_RADIUS:n,SIGMA:n},uniforms:{colorTexture:{value:null},texSize:{value:new ea.Vector2(.5,.5)},direction:{value:new ea.Vector2(.5,.5)}},vertexShader:`varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
            }`,fragmentShader:`#include <common>            varying vec2 vUv;
            uniform sampler2D colorTexture;
            uniform vec2 texSize;            uniform vec2 direction;                        float gaussianPdf(in float x, in float sigma) {                return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;            }            void main() {
                vec2 invSize = 1.0 / texSize;                float fSigma = float(SIGMA);                float weightSum = gaussianPdf(0.0, fSigma);                vec4 diffuseSum = texture2D( colorTexture, vUv).rgba * weightSum;                for( int i = 1; i < KERNEL_RADIUS; i ++ ) {                    float x = float(i);                    float w = gaussianPdf(x, fSigma);                    vec2 uvOffset = direction * invSize * x;                    vec4 sample1 = texture2D( colorTexture, vUv + uvOffset).rgba;                    vec4 sample2 = texture2D( colorTexture, vUv - uvOffset).rgba;                    diffuseSum += (sample1 + sample2) * w;                    weightSum += 2.0 * w;                }                gl_FragColor = vec4(diffuseSum/weightSum);
            }`})},k1.prototype.addRender=function(n){this.renderCbk=n},k1.prototype.render=function(n,e,r){if(e=n.autoClear,n.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor){var a=n.getClearColor().getHex(),u=n.getClearAlpha();n.setClearColor(this.clearColor,this.clearAlpha)}this.clearDepth&&n.clearDepth(),n.setRenderTarget(this.renderToScreen?null:r),this.clear&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),n.render(this.scene,this.camera),this.renderCbk&&this.renderCbk(),this.clearColor&&n.setClearColor(a,u),this.scene.overrideMaterial=null,n.autoClear=e};var PM=function(n){function e(r){return yi(this,e),r=Aa(this,(e.__proto__||mo(e)).call(this,r)),r.time=0,r.autoUpdate=!0,r}return Ss(e,n),Vl(e,[{key:"getDefaultOptions",value:function(){return{totalRadian:Math.PI,color:16711680,radius:50,step:.1}}},{key:"initialize",value:function(a){this.threeLayer=a,this.addOverlay()}},{key:"onChanged",value:function(a,u){this.threeLayer&&(this.removeOverlay(),this.addOverlay())}},{key:"onDestroy",value:function(){this.removeOverlay()}},{key:"render",value:function(){this.time+=this.options.step/10,1<this.time&&(this.time=0);for(var a=this.shapeMarker.children,u=0;u<a.length;u++)a[u].material.uniforms.periodRatio.value=this.time}},{key:"removeOverlay",value:function(){this.threeLayer.remove(this.shapeMarker)}},{key:"addOverlay",value:function(){this.shapeMarker=new ea.Group;for(var a=this.threeLayer,u=this.getData(),p=0;p<u.length;p++){var y=a.normizedPoint(u[p].geometry.coordinates);y=this.create3dCanvasRipple({originalData:u[p],normizedData:y}),this.shapeMarker.add(y)}a.add(this.shapeMarker)}},{key:"create3dCanvasRipple",value:function(a){var u=this.options,p=u.totalRadian,y=u.color;u=u.size;var C=a.originalData;a=a.normizedData,Object.prototype.toString.call(y)==="[object Function]"&&(y=y(C)),u=Object.prototype.toString.call(u)==="[object Function]"?u(C):Number(u),C={totalRadian:{type:"f",value:p},glowColor:{type:"c",value:new ea.Color(y)},radius:{type:"f",value:u},periodRatio:{type:"f",value:0}},y=new ea.Geometry;for(var S=p/(u/2),R=S;R<=p;R+=S){var N=u*Math.sin(R),z=u*Math.cos(R);y.vertices.push(new ea.Vector3(0,0,R/p)),y.vertices.push(new ea.Vector3(z,N,R/p))}for(p=0,u=y.vertices.length;p<u-2;++p)y.faces.push(new ea.Face3(p,p+1,p+3));return p=new ea.ShaderMaterial({uniforms:C,vertexShader:"varying vec4 vFragColor;varying vec4 vPosition;uniform float radius;uniform float totalRadian;uniform float periodRatio;uniform vec3 glowColor;void main(){float radian=radians(360.0*periodRatio);float s=sin(radian);float c=cos(radian);vec2 rotatedPostion=vec2(position.x*s+position.y*c,position.y*s-position.x*c);gl_Position=projectionMatrix*modelViewMatrix*vec4(rotatedPostion,0,1.0);vFragColor=vec4(glowColor,pow(position.z,1.3));}",fragmentShader:"varying vec4 vFragColor;void main(){gl_FragColor=vFragColor;}",blending:ea.NormalBlending,transparent:!0,depthWrite:!1}),p=new ea.Mesh(y,p),p.position.set(a[0],a[1],a[2]||0),p}}]),e}(nC),Lw=Ye(function(n,e){(function(){function r(){this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this.geometry=new p.BufferGeometry,this.widthCallback=null,this.matrixWorld=new p.Matrix4}function a(y,C,S,R,N){if(y=y.subarray||y.slice?y:y.buffer,S=S.subarray||S.slice?S:S.buffer,y=C?y.subarray?y.subarray(C,N&&C+N):y.slice(C,N&&C+N):y,S.set)S.set(y,R);else for(C=0;C<y.length;C++)S[C+R]=y[C];return S}function u(y){p.ShaderMaterial.call(this,{uniforms:Ce({},p.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new p.Color(16777215)},opacity:{value:1},resolution:{value:new p.Vector2(1,1)},sizeAttenuation:{value:1},near:{value:1},far:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new p.Vector2(1,1)}}),vertexShader:p.ShaderChunk.meshline_vert,fragmentShader:p.ShaderChunk.meshline_frag}),this.type="MeshLineMaterial",Zr(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(S){this.uniforms.lineWidth.value=S}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(S){this.uniforms.map.value=S}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(S){this.uniforms.useMap.value=S}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(S){this.uniforms.alphaMap.value=S}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(S){this.uniforms.useAlphaMap.value=S}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(S){this.uniforms.color.value=S}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(S){this.uniforms.opacity.value=S}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(S){this.uniforms.resolution.value.copy(S)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(S){this.uniforms.sizeAttenuation.value=S}},near:{enumerable:!0,get:function(){return this.uniforms.near.value},set:function(S){this.uniforms.near.value=S}},far:{enumerable:!0,get:function(){return this.uniforms.far.value},set:function(S){this.uniforms.far.value=S}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(S){this.uniforms.dashArray.value=S,this.useDash=S!==0?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(S){this.uniforms.dashOffset.value=S}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(S){this.uniforms.dashRatio.value=S}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(S){this.uniforms.useDash.value=S}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(S){this.uniforms.visibility.value=S}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(S){this.uniforms.alphaTest.value=S}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(S){this.uniforms.repeat.value.copy(S)}}}),this.setValues(y)}var p=typeof ye!="undefined"&&Ou||this.THREE;if(!p)throw Error("MeshLine requires three.js");r.prototype.setMatrixWorld=function(y){this.matrixWorld=y},r.prototype.setGeometry=function(y,C){if(this.widthCallback=C,this.positions=[],this.counters=[],y instanceof p.Geometry)for(var S=0;S<y.vertices.length;S++){var R=y.vertices[S];C=S/y.vertices.length,this.positions.push(R.x,R.y,R.z),this.positions.push(R.x,R.y,R.z),this.counters.push(C),this.counters.push(C)}if(y instanceof Float32Array||y instanceof Array)for(S=0;S<y.length;S+=3)C=S/y.length,this.positions.push(y[S],y[S+1],y[S+2]),this.positions.push(y[S],y[S+1],y[S+2]),this.counters.push(C),this.counters.push(C);this.process()},r.prototype.raycast=function(){var y=new p.Matrix4,C=new p.Ray,S=new p.Sphere;return function(R,N){var z=R.linePrecision;z*=z;var Z=this.geometry;if(Z.boundingSphere===null&&Z.computeBoundingSphere(),S.copy(Z.boundingSphere),S.applyMatrix4(this.matrixWorld),R.ray.intersectSphere(S)!==!1){y.getInverse(this.matrixWorld),C.copy(R.ray).applyMatrix4(y);var K=new p.Vector3,ne=new p.Vector3,oe=new p.Vector3,be=new p.Vector3,je=this instanceof p.LineSegments?2:1;if(Z instanceof p.BufferGeometry){var Ie=Z.index,ze=Z.attributes;if(Ie!==null){Z=Ie.array,ze=ze.position.array,Ie=0;for(var et=Z.length-1;Ie<et;Ie+=je){var xt=Z[Ie+1];K.fromArray(ze,3*Z[Ie]),ne.fromArray(ze,3*xt),xt=C.distanceSqToSegment(K,ne,be,oe),xt>z||(be.applyMatrix4(this.matrixWorld),xt=R.ray.origin.distanceTo(be),xt<R.near||xt>R.far||N.push({distance:xt,point:oe.clone().applyMatrix4(this.matrixWorld),index:Ie,face:null,faceIndex:null,object:this}))}}else for(ze=ze.position.array,Ie=0,et=ze.length/3-1;Ie<et;Ie+=je)K.fromArray(ze,3*Ie),ne.fromArray(ze,3*Ie+3),xt=C.distanceSqToSegment(K,ne,be,oe),xt>z||(be.applyMatrix4(this.matrixWorld),xt=R.ray.origin.distanceTo(be),xt<R.near||xt>R.far||N.push({distance:xt,point:oe.clone().applyMatrix4(this.matrixWorld),index:Ie,face:null,faceIndex:null,object:this}))}else if(Z instanceof p.Geometry)for(K=Z.vertices,ne=K.length,Ie=0;Ie<ne-1;Ie+=je)xt=C.distanceSqToSegment(K[Ie],K[Ie+1],be,oe),xt>z||(be.applyMatrix4(this.matrixWorld),xt=R.ray.origin.distanceTo(be),xt<R.near||xt>R.far||N.push({distance:xt,point:oe.clone().applyMatrix4(this.matrixWorld),index:Ie,face:null,faceIndex:null,object:this}))}}}(),r.prototype.compareV3=function(y,C){return y*=6,C*=6,this.positions[y]===this.positions[C]&&this.positions[y+1]===this.positions[C+1]&&this.positions[y+2]===this.positions[C+2]},r.prototype.copyV3=function(y){return y*=6,[this.positions[y],this.positions[y+1],this.positions[y+2]]},r.prototype.process=function(){var y=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];for(var C=0;C<y;C++)this.side.push(1),this.side.push(-1);for(C=0;C<y;C++){var S=this.widthCallback?this.widthCallback(C/(y-1)):1;this.width.push(S),this.width.push(S)}for(C=0;C<y;C++)this.uvs.push(C/(y-1),0),this.uvs.push(C/(y-1),1);for(S=this.compareV3(0,y-1)?this.copyV3(y-2):this.copyV3(0),this.previous.push(S[0],S[1],S[2]),this.previous.push(S[0],S[1],S[2]),C=0;C<y-1;C++)S=this.copyV3(C),this.previous.push(S[0],S[1],S[2]),this.previous.push(S[0],S[1],S[2]);for(C=1;C<y;C++)S=this.copyV3(C),this.next.push(S[0],S[1],S[2]),this.next.push(S[0],S[1],S[2]);for(S=this.compareV3(y-1,0)?this.copyV3(1):this.copyV3(y-1),this.next.push(S[0],S[1],S[2]),this.next.push(S[0],S[1],S[2]),C=0;C<y-1;C++)S=2*C,this.indices_array.push(S,S+1,S+2),this.indices_array.push(S+2,S+1,S+3);this.attributes?(this.attributes.position.copyArray(new Float32Array(this.positions)),this.attributes.position.needsUpdate=!0,this.attributes.previous.copyArray(new Float32Array(this.previous)),this.attributes.previous.needsUpdate=!0,this.attributes.next.copyArray(new Float32Array(this.next)),this.attributes.next.needsUpdate=!0,this.attributes.side.copyArray(new Float32Array(this.side)),this.attributes.side.needsUpdate=!0,this.attributes.width.copyArray(new Float32Array(this.width)),this.attributes.width.needsUpdate=!0,this.attributes.uv.copyArray(new Float32Array(this.uvs)),this.attributes.uv.needsUpdate=!0,this.attributes.index.copyArray(new Uint16Array(this.indices_array)),this.attributes.index.needsUpdate=!0):this.attributes={position:new p.BufferAttribute(new Float32Array(this.positions),3),previous:new p.BufferAttribute(new Float32Array(this.previous),3),next:new p.BufferAttribute(new Float32Array(this.next),3),side:new p.BufferAttribute(new Float32Array(this.side),1),width:new p.BufferAttribute(new Float32Array(this.width),1),uv:new p.BufferAttribute(new Float32Array(this.uvs),2),index:new p.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new p.BufferAttribute(new Float32Array(this.counters),1)},this.geometry.setAttribute("position",this.attributes.position),this.geometry.setAttribute("previous",this.attributes.previous),this.geometry.setAttribute("next",this.attributes.next),this.geometry.setAttribute("side",this.attributes.side),this.geometry.setAttribute("width",this.attributes.width),this.geometry.setAttribute("uv",this.attributes.uv),this.geometry.setAttribute("counters",this.attributes.counters),this.geometry.setIndex(this.attributes.index)},r.prototype.advance=function(y){var C=this.attributes.position.array,S=this.attributes.next.array,R=C.length;a(C,0,this.attributes.previous.array,0,R),a(C,6,C,0,R-6),C[R-6]=y.x,C[R-5]=y.y,C[R-4]=y.z,C[R-3]=y.x,C[R-2]=y.y,C[R-1]=y.z,a(C,6,S,0,R-6),S[R-6]=y.x,S[R-5]=y.y,S[R-4]=y.z,S[R-3]=y.x,S[R-2]=y.y,S[R-1]=y.z,this.attributes.position.needsUpdate=!0,this.attributes.previous.needsUpdate=!0,this.attributes.next.needsUpdate=!0},p.ShaderChunk.meshline_vert=["",p.ShaderChunk.logdepthbuf_pars_vertex,p.ShaderChunk.fog_pars_vertex,`\r
attribute vec3 previous;\r
attribute vec3 next;\r
attribute float side;\r
attribute float width;\r
attribute float counters;\r
\r
uniform vec2 resolution;\r
uniform float lineWidth;\r
uniform vec3 color;\r
uniform float opacity;\r
uniform float near;\r
uniform float far;\r
uniform float sizeAttenuation;\r
\r
varying vec2 vUV;\r
varying vec4 vColor;\r
varying float vCounters;\r
\r
vec2 fix( vec4 i, float aspect ) {\r
\r
    vec2 res = i.xy / i.w;\r
    res.x *= aspect;\r
	 vCounters = counters;\r
    return res;\r
\r
}\r
\r
void main() {\r
\r
    float aspect = resolution.x / resolution.y;\r
    float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);\r
\r
    vColor = vec4( color, opacity );\r
    vUV = uv;\r
\r
    mat4 m = projectionMatrix * modelViewMatrix;\r
    vec4 finalPosition = m * vec4( position, 1.0 );\r
    vec4 prevPos = m * vec4( previous, 1.0 );\r
    vec4 nextPos = m * vec4( next, 1.0 );\r
\r
    vec2 currentP = fix( finalPosition, aspect );\r
    vec2 prevP = fix( prevPos, aspect );\r
    vec2 nextP = fix( nextPos, aspect );\r
\r
    float pixelWidth = finalPosition.w * pixelWidthRatio;\r
    float w = 1.8 * pixelWidth * lineWidth * width;\r
\r
    if( sizeAttenuation == 1. ) {\r
        w = 1.8 * lineWidth * width;\r
    }\r
\r
    vec2 dir;\r
    if( nextP == currentP ) dir = normalize( currentP - prevP );\r
    else if( prevP == currentP ) dir = normalize( nextP - currentP );\r
    else {\r
        vec2 dir1 = normalize( currentP - prevP );\r
        vec2 dir2 = normalize( nextP - currentP );\r
        dir = normalize( dir1 + dir2 );\r
\r
        vec2 perp = vec2( -dir1.y, dir1.x );\r
        vec2 miter = vec2( -dir.y, dir.x );\r
        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );\r
\r
    }\r
\r
    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;\r
    vec2 normal = vec2( -dir.y, dir.x );\r
    normal.x /= aspect;\r
    normal *= .5 * w;\r
\r
    vec4 offset = vec4( normal * side, 0.0, 1.0 );\r
    finalPosition.xy += offset.xy;\r
\r
    gl_Position = finalPosition;\r
`,p.ShaderChunk.logdepthbuf_vertex,p.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",p.ShaderChunk.fog_vertex,"}"].join(`\r
`),p.ShaderChunk.meshline_frag=["",p.ShaderChunk.fog_pars_fragment,p.ShaderChunk.logdepthbuf_pars_fragment,`\r
uniform sampler2D map;\r
uniform sampler2D alphaMap;\r
uniform float useMap;\r
uniform float useAlphaMap;\r
uniform float useDash;\r
uniform float dashArray;\r
uniform float dashOffset;\r
uniform float dashRatio;\r
uniform float visibility;\r
uniform float alphaTest;\r
uniform vec2 repeat;\r
\r
varying vec2 vUV;\r
varying vec4 vColor;\r
varying float vCounters;\r
\r
void main() {\r
`,p.ShaderChunk.logdepthbuf_fragment,`\r
    vec4 c = vColor;\r
    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );\r
    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;\r
    if( c.a < alphaTest ) discard;\r
    if( useDash == 1. ){\r
        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));\r
    }\r
    gl_FragColor = c;\r
    gl_FragColor.a *= step(vCounters, visibility);\r
`,p.ShaderChunk.fog_fragment,"}"].join(`\r
`),u.prototype=me(p.ShaderMaterial.prototype),u.prototype.constructor=u,u.prototype.isMeshLineMaterial=!0,u.prototype.copy=function(y){return p.ShaderMaterial.prototype.copy.call(this,y),this.lineWidth=y.lineWidth,this.map=y.map,this.useMap=y.useMap,this.alphaMap=y.alphaMap,this.useAlphaMap=y.useAlphaMap,this.color.copy(y.color),this.opacity=y.opacity,this.resolution.copy(y.resolution),this.sizeAttenuation=y.sizeAttenuation,this.near=y.near,this.far=y.far,this.dashArray.copy(y.dashArray),this.dashOffset.copy(y.dashOffset),this.dashRatio.copy(y.dashRatio),this.useDash=y.useDash,this.visibility=y.visibility,this.alphaTest=y.alphaTest,this.repeat.copy(y.repeat),this},n.exports&&(e=n.exports={MeshLine:r,MeshLineMaterial:u}),e.MeshLine=r,e.MeshLineMaterial=u}).call(vl)}),RM=Lw.MeshLine,OM=Lw.MeshLineMaterial,DM=function(n){function e(r){return yi(this,e),r=Aa(this,(e.__proto__||mo(e)).call(this,r)),r.staticDashArray=2,r.time=0,r.autoUpdate=!0,r}return Ss(e,n),Vl(e,[{key:"getDefaultOptions",value:function(){return{color:16777215,textureColor:16777215,textureWidth:10,textureLength:30,step:.1}}},{key:"initialize",value:function(a){this.threeLayer=a,this.addOverlay()}},{key:"onChanged",value:function(a,u){this.threeLayer&&(this.removeOverlay(),this.addOverlay())}},{key:"onDestroy",value:function(){this.removeOverlay()}},{key:"render",value:function(){var a=this.getOptions(),u=a.textureWidth,p=a.style;a=a.step/10,this.time+=a,2<this.time&&(this.time=0);for(var y=this.flyLine.children,C=0;C<y.length;C++){var S=y[C],R=S.hash;S.children[0].material.uniforms.lineWidth.value=u*(1+.2*Math.sin(5*this.time)),S.children[0].material.uniforms.dashOffset.value=p==="chaos"?S.children[0].material.uniforms.dashOffset.value-a:(this.staticDashArray+R)*(1-this.time/2)}}},{key:"removeOverlay",value:function(){this.threeLayer.remove(this.flyLine)}},{key:"addOverlay",value:function(){var a=this;this.flyLine=new ea.Group;var u=this.threeLayer,p=new ea.TextureLoader,y=this.getData();p.load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAABZCAQAAAD/AkAkAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAOGtpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTktMDYtMjdUMTk6MzE6MTUrMDg6MDA8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxOS0wOC0xOVQxNjo1Nzo1MCswODowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMTktMDgtMTlUMTY6NTc6NTArMDg6MDA8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjE8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5Eb3QgR2FpbiAxNSU8L3Bob3Rvc2hvcDpJQ0NQcm9maWxlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjQ5MmI1NTQ1LWIwNmQtNGI0Yi1iMWExLTZiN2NiNzExNzA5MjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDo0OTJiNTU0NS1iMDZkLTRiNGItYjFhMS02YjdjYjcxMTcwOTI8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDo0OTJiNTU0NS1iMDZkLTRiNGItYjFhMS02YjdjYjcxMTcwOTI8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NDkyYjU1NDUtYjA2ZC00YjRiLWIxYTEtNmI3Y2I3MTE3MDkyPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE5LTA2LTI3VDE5OjMxOjE1KzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+ODk8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+ODk8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PnHlyVkAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAFaZJREFUeNp8W+1661prZAA5p2/v/1p7tgUz/cFakuzsNnkS24ktITR8DYD/GMxMBrP1KLPHKzOZ/frLvPp6Dwyw61+QYDJIZmaC7PF1n88M66yfx/ybJPOYsI9jmT0+Oh/EdaDPA5rJAJhBj9/rIzJgPqL1bskgm++Pc9jHGbDOa7/E3RLlp5DfmsRDxPvKr8/D3EwADGbA0rQM12ckmDBaltmIrP3q0qT+cgc+FXW/ys833B9+iq1vPWC+4QaDw8zcDJBtaDwv1wSTltCSTDAR0kPj+Dr/8yL2830P8hspf8PalxZ8C2uOLTw2kjFalwESYKPTEXppV0aDCTQTIdMH1L70igdE5yu//4Cv3/r4nxx+iXqLDvgCxbY/2KjepC32aBuUjJBRbgRsXunW5aft4Bdk8qlX/MWGb7sVLAzmdgmNuMR1wAwuAz6RtLyGJMwPIQnNQJtL1gaby3ic+xPlWGaw7sN/vozPHq7lcW23qG4OwOXucsAcwIVr4PtwkBYoTEYTZTSJRslaMhpF4/zXfsmCDyNcWH4CHr88r+YOY4nocAvAwoEA1gUMSC6RsR3FdnIyM1KQLeE4jzCpzY1Go8FofMaG572+Bc/9Qh9Af3pec/lo12FhjoCbu9tcwBL7FhmQ+fOeUTKTgqLJaVK7jGoCBESYINgtygXRbzdgpnFyf/vHdV+XuIjRsDncY/7isC24wy5obAuEli8esSXRpBYRaiM9SFob5WibyAMjOD7E/hoZH1r+hPuy38GqW8AtsAUNC3N3OOYCFrpH4AsaWwKN8ZlE0UQ3SnLRqXYKRrQMENQGg8x4h3d8uV6MlvEVPNYlALAwt4AjRmTM7/0Y5h5wwHxp3AwY32wmAXJRbiIFGkWESCLUbECSqwlAbfB9d2E9Tz+ThHmW9itzsB3htrhuYYGEeyAsPCzcEQh3C/fRuAHumOC9QspybyGZkbKmRCMJquVwBWvFTwikRvSRpudGfUbhlRb9zZkYLt0OJMIDgXS3hHuM8AgPuDsCMPgyQ8dHdjAYNm+lk9QSmKG2gqt7h6O+RJyUiib8cr0aJ4dHzjZeWBdSEQgkHIn0gHtauiMjlp7dw5fvcIfDAML3aWQmkSZSFJ2imsFGC3QvIiAQhkDvezOGC/WkrvhMPn+nHbLxt+YIpA0E0sID4Yn0hPsSGbEEjhiRxwQXtsa5mShRbJrUbAUazpCjCThdMCO0sOwmsxCs4Lch3v45n3nbupmh8b2xvEUiEUhkBA6Eh4cnwtMHGBHLCBFu8jBd2JCZSDNSTJLd3iTam0XQDYSD5mbY0fwKHCEz23C5DTHtKyWSL1Sm+QiGwAiYSE8PT2SEH+6eHhFwRDoC8Bhv4ZdzHz2LEkmqg+xuVTvc2qtg0Py4QHlZCjS7ywHciNadyd2Fy8oWYqKcBdLCEoEDgfTDM9IDGekRR4SHu4enuzvcHYA7VtSUzEyUtJBMdnd70629regBOGGYdHqlq6Nwn0TKzFp6Bpb8cnGwOxwvLxFpGYERNz3j8Mj0wyPSwyMGKg6PFVLCDBSwcwtRarLZHt7sdu8qoL2BGoO9sU9zSXdNKaEfr8b8LqHHXa0ot9xYWvrh6elHBI7MET7SM0fkDF8AWVJvxz5hz0i2ktUaHbd7lzkBx0TqJULLRVv1iplMoAA3gXfISz2Dx0ovcXuDGDNDDpbj8CMz0o/IyIzIiMgFEB+B4bi0IJoosilFNaNZ3eUInO04hS2JDHKj+bYByelwk7TqnOXT8i5Che3cDLaEHm/sGaPbIzKPyEw/MjPjiMjwjIhwj4CHb0+3Y99AuUgyqtUVKA+Uw88yQ8NMFps2EAWBCsgIV5hsMH1BJe9cHG4ud7cdhgOBiEB6IiLz8BH4yCMyjojjyPTMiMj0CIfHhBOs9GqULDLIZkd3R5dXAeeuHc1k1qsMkGxii4wWJsjcJIG70sKN5VUSjdm5uYeF5/qdcXh4+hHHCJxHHpl5RB6ZGbEBDXfE5MwTyKzFlpLd1dnVZ5nDDYKjtiu0pUWFkG2iO2Nr12Q0H++hncnJYOZT2K8kPnYm4TmojiMyMjIzM17HEZnHK/OIyDzS48gY/wy4G4Cdc7JJsburq70B93IAqB3QzQSdclq2QBA5gjp6qh2XRKxCJy+BAVhgR7wV/5AeEZE+ZnbEEUe88jgyXkceR+aRkXkc602DZphjDJ+kwGJ3dTDrbINX2MqrYcOCTb5Ho6iEnHQPUoQQlMkIN+oBDAiAlnoc22e4X143xkNkxnHkccRxHJmv10bIOI8jgHB3X/XfpEStYHd21+ko4HTAzl0ValyKgp2YtIlKEIQjnJyLc0k+BW1ePs6Hi5iEc+fEK+WMHUQiMyMHwT/HcRz5Oo7MjHxFhke6e2L5ZmsjpV5aPt0bqyIwrKKbkESGjLmqbRKNQJvDBbhgbpwS7Sa4lvu/yk/Il8COGCfnGeED5SOP15FHvn6OzNdxHEeMz8t4BZDuAGgwjrvQu7urw6sc70UjDKlIUQeVkhgtVzC85RYKJxshocUxaDl6ar/F+wDaNXP4VCCOxIJGhI9vyPHFR74yj9dxjLYj8xUZrwiECzE0kGRFMbv63e7nHH3oI711TMrEIMnw9NFvINBwjLtc3IloPjFwp/jbS47wq2r2cI/JHWJ9HbeWX0fmkT/Hz5HHT74y/Ge7Z5+kCGojqzPOPvqPT2B0mCgZqSS7GQwFgwFHOunuCrS5hTUgx7I1AZDSDDDIfQmNxbqtGmPgsUAxITojI+OVmcfxc/wcr/w5/skjjzgyPPyY9NXcWuLJiurw081g/06FRErsg8ruFNmd3h6RbLkHR8vAIBnyeZywOmwRVmWMuXFwwH1xFAFf+YNHICImVOdx5E8cmcdP/uTrOPIVR7wiw1c9ZZI1g2T3n45aJK/1oIEkg+HpjXR6RLT7VO2Ll1q1PAHaUDo7X8aDhbDNuWHy3yXs+omcZCKOmDTjyP+KV/7kz3HEP3nkMQkHHDCa6dSri2/fJzAjmaKioyKj82hGBr1HNYH2YacGRTcD5dYGc1PqpjHGJndyBKyE3d3DxkMvPx3pERlx5JGvfB3HkfHP8cpX/GTEy+FhhBmZOv2gD+xANZkSWQxmM8/2SQMjvFaR4E5350iyhBa07pEsr3YBFiJgbu5L4NH3KNknho+G4xUZR/xELLFf+U++BtFze0AjWz/xpwwOmcSUkcWMV3Qwu9PPVaEvNsTducC5uEBoSbcSVeRiDQbR0Lobi6ryGyaOjeqpU33iS2S84oifeOVPvo6fCH9FuLuZGUmdbQgsUo6lI4sDitPdERHtiEFEBAEX/BITO5++mb6V4m9OfneW1u3wpeNlj4jROOArIEasciV9BM945SvC5+Y1TwFmPoQcO1+shbBBbnjMkVEBmJk7Yun5EhaAAFeP0Dlk1BS5Uyn64wp9E8c+iam7Y1jQQI7GwyP9le6ZEf/kT8yFAKaTwQmzzWR7+BGHv90nrHvA4RFYDg1Y53b0k62eltZWLXJfyTxeNPzie9e1TtPpOuCUSz4AwcDkiMTg+zXe2doOnc02FSOS3enliKx0dyz9Yt3bUYsmNl4qG/F360iyCSXP5o92i8zcdlAEYIttm/QAudKROWQMvwiPQPhg29wQMoZS7YeXJ05f3K87Eg9q1zEeZXWH8GjE2ePZIr4spw36kPtJfq5i/bogzIVwHXtALnMD0sMcB2KVYgZTGLxVi+DYDmkljhftv06L3X/7e8vy4r6H79OSFZsv+W5hTfJxkdJbJZuyNAujfCU86z7FZSCr5IHFZdy7Gfs8C/RsdMs2IWP2aMzBzHGzqqabEMOjcfHRTVktUcOQ8uvfNJ+WiMF63tLrrcJql8h4t09sMUGP7iLtq521OnKXAhdpmFcTXA/qbxEJplUPaeozrdrSbJ1PXB2FVstkbLWCRrPpL5VqsolpklCCWty1rMYZzNH3swdAtUiyD3t7ElwPAnof0VaJK9JkEqlNC4qiJOP8sVQ66YwGrNwPtMiT1SebZMtIlVqQqdWi9crqqEsvsinxpKtJj6fUujtSl2o3QhYHeLcZNeXjCFuiyGLrVChVHVEsRp9QKYJttNabZxerTxaLRbV6Lo7klE27zSYZOefSOuMWZ2l0qTmxbooWCHRRrKsXOt1Qradzm2VkF0V1sbqrPPrtY9MMajiVU83qP3X2WWcXyWapmy3Otbe2klfXVVwiTwvZlr7Gw1Gme7jhmpDYGsbc9pXbSpKaPbVcd5NqvjsYxTgZ7YiFq2Z4AJBa50Cjz57f766ev3WTJdFGfo7sxrmzW88myGYQgpueSegGhNaboMuuuPHaHDqwSZI13E80m+8OnO4w0Mza2sPHpGmD5j911r/17ndVn11d3SRr+GZqHVQcYteoMZy5lN0Dt82l5uXJ1ryEVktxVZskxWZsRHR3d/WxhP5TCYdDZYt5r2ZMbKRRLXbxT737Xe86+11njc7fXV3VQzBeX2PVdtnPnjDQNkUzS9NMTNieS+FNh2C6+ZSa0Wyxu8nuPjv6LA/UCfhwglDrUMbZ6YBbG9QsVZ/97n/Ps99n97vO6q7uZnV3s2rfui01L3dEexjjaBXKzeJhT6XYoj/oNLKnK6MmR1DWGd5V5e5xBv7HrcZfkj/qzsir9psDNM9+19l/6l1/zj911nm+q+rskZnkxgnVTUnLkZsuYHNNzQwnZ9MWdNudZmE1b3XBdx41FEpXhZe7n+7l+NdMbtSLzYyjI9Y8iVHFJvnu7nef55/6t8466yzWWV3dVQvavdwHbVz2CD2a5vIcazomtbyFBA3wJbVCVIuaW9bdaB+Bq8JR7jPscAXbF5XdFetqJo1iS6o+eXbVu97979nnn/Ndf6r6rKqqrupmVxd7hB5gWLP1cLGXtVli+QvtMZqWy0msHhKaJWewu7vc345yR6OA90qwKLGz+Ipoj3SbxFRtI8J7HF2966z3edZ51nme1XVWn8PitorN7lJbs9kTBGzpeY2eDDBmLMwIiEZQAo3WCrELwWaQ3ajwdrh7Tda5CgOa5bRNKyoysk7ffWyJakrvLladfZ5nvavOd73rfZ7nAvRApBewx+mTJRnVo+UJxPMs70C9yEiaSCO6I8mGq7vgQgXaqxfpbYun5/KfFRkV4eHpWlpeHWCSZ1dXnd1V9T7f53n22edZ3X2yu7pY7LEXUW0t3t8bsLjNb/SsPXGyQOFNR9NZNmA4+64jxkUuQJHNiIx0D0c4sHLagYxGpu6qs6rfZ53vqrPOs/qcK2GxOXgme+VKrbYl8uWCd6tyD4StcTB3giLpzYIz0PRqOGrxgDi1+03U8D8e5Rnu4YZ0rjSgJYkn1c2zq7vOqgXj8+xzIL2/VSrOT2tFw0kgV0TcM5+rgymjiBYwV+iCoGCtAtD7rry12TFKZDa7IzJqdXjeU9+sONBNsavZZ/eYXJ1nnb1+94riA40BxuiYNKqtbfrxxG7vTOw2GkS4hDYX1XRra4COlncBsIbt0mYnzSGJHRGnD0ERfndXR881gZ7d3ed4tz7PlXCclwkuR8diT3ZrC9P2GJCyR0OYcBsnB7Wv3r1KoKMMZjUd8Z3tWcpEZZKd4RGIXETNbgtwZcHj2tndxd6BZFvkJB0nWxsYrakJOJndGm3l1wAlJtGeVGE1WawFeSMWVYqzH2OKE0ZJdgyrEhE1zIzv0nGC7OTETTZZVcWu4gSRc4Hi7OLJnjpgw2L5jdb2yruH/Si+OTWxj18GIGfHEAMFW6SH9rwQqWxmsDticWvYdMrMm9nOsMgmW6xJhqq7z64qVp1cJvdwc2W9vre4tOcIyWMMhoK7WnBY071sWkEQaG4NM1iNyBkyOplBZ/TQozdNdZWPU8JM6O/mFpm14kt18WT1ElulW8+3V37MF+XHCLkw/6baYKVFdNH2NIetxN8psvsIRjM8ejP9j/G+Paezq9spZap5pZ19srpHYI6oZa1Ws3TnzrwnyvE9dIaBx9AMvYpCOLipj5ndXPmgK6VgINLX8NlquQ+fDKNJEKf62klmTy5RrVrBo3SyVGyeavbWsvXyGbv4e45cP6aUqUl9DYY9ET2j0zZu3Q9Z7FAaMzqiQDgsws1W4+vXONTyAWQ1VexuTiq0DE/b9ErNtrLmwvFzmPICxp7J0BJ6QCtYY5rHtnl/SuZUBkmnh0dHOEfH6HgQmct1ThE3Kd3S9DKyFTpO9nJwrbZSkVZaI4BG8ZMI03Po7LoW3hsLMgPlBtHCSCTWaLrTyPDwNaKGxZ3vhYKlhB0CV4U0WZIukY1dap7iaJhtVNnkFz3ziPqY9sXXbNFGDC/Wy9ws2cO1IdxmstRaKaIVcsZw/Vy9lSd9uga4hmhaVc7ibqZ4alsA0XJuorXauByc9LEF8TGLj8eA3/jBx17ORTfRnCa2AmJ7gMLM2vIxeo01gI/LN+9Wn6jJ05o9RRMHu+TyFSt/611A4UFfXljGx1ztRSZyDY2NrsylcJl6WtQEEaKXwnpNjOPS8T2oKswgsMjhQ0T1ZKSDWbaNppd+t8jg9hPfO0SJ7xWiazzcekhlaQh5GAVCTdBH6FKA0663Nctx0c8SIK7CQTRT06wlEkU9wsWIv7XbIvre7nmOd9rnyPXvlRObdE+LrpZJ7iEhjGzEjGuir24sNPw+9uQSNsO30XxNXJA7fxgPbFdCb42VUfwet1/zGJ8O5GvwVpeLkZkEJxFGhbtRjT3UczVv71n8Ndp+i0wN57uL0Kk4JmjsNIxDMeE55fvtzzYwPveiHrtRspYgBWQutzCZGxlr2CTQM7lsV+9qxtqvPHxF1E1Qa1Eq4vTfd0Y8hekeaMdjOQdfC3Wpryn8z2lhTbI0qwQTzsIodwkIcQYcgXZA7qaZZ7Hd1ZdwM93CKokok/UIP+5MmtrDiC8Rn6s5q9/3n79un/3an1nDldPftpltXmtHPr2bq21jeGxPXATwVOOPzZ2pmvfuzipJv8/8uSR5TXDZx5Lg5z7j5UeknvE6iDMdOZdgFt0j/AxPb/PDpLh7FO6Kgqv8nDpee9VIF6/5+z5/ozmfzRN97d19LdPxGuXknq4iZsTbXPdILx5belrUju4Ghj1McUjL5yba54oZ7HvtzAz//X+sUX3uUD5S1Onir2GeGUPY3a61NfCx1DQdAU3nzO5a7lrk0u9lLvs/1+c+Fo5kn5b6uaH0EF97j3YXXuYyAQ5TC4+moi5k6OpxbSH3LOfXeuS3NN9Lt2b41LL+HwP8vaE2c1UDib0KamsrZAbbLye3auEb07haCb/vrv3l2ccm4H++vPG3cL/2Vr83AlcIkeBrTck+VLXjmO5+gX5tHeO5D/Crg/25Hpr4tVpsX3smf19ctAc7MHMR40rus16a0d7Ffu6ufK6c2od/+BtYbif3vwMADydd0XelVe4AAAAASUVORK5CYII=",function(C){for(var S=0;S<y.length;S++){var R=y[S].geometry.coordinates.map(function(N){return new(Function.prototype.bind.apply(ea.Vector3,[null].concat(Mw(u.normizedPoint(N)))))});R=a.createFlyLine({originalData:y[S],curveData:R,texture:C}),a.flyLine.add(R)}u.add(a.flyLine)})}},{key:"createFlyLine",value:function(a){var u=this.options,p=u.color,y=u.textureColor,C=u.textureWidth,S=a.originalData,R=a.curveData;a=a.texture;var N=Math.random();u=Math.min(1,1-u.textureLength/100),u=Math.max(0,u),Object.prototype.toString.call(p)==="[object Function]"&&(p=p(S)),Object.prototype.toString.call(y)==="[object Function]"&&(y=y(S)),S=new ea.Geometry,S.vertices=R,S.verticesNeedUpdate=!0,p=new ea.LineBasicMaterial({linewidth:1,color:new ea.Color(p),blending:ea.AdditiveBlending,depthTest:!0,depthWrite:!1,transparent:!0,opacity:.3,linecap:"round",linejoin:"round"}),p=new ea.Line(S,p),p.renderDepth=!1,p.hash=N,S=new RM;for(var z=new ea.Geometry,Z=0;Z<R.length;Z++){var K=R[Z];z.vertices.push(new ea.Vector3(K.x,K.y,K.z))}return S.setGeometry(z,function(ne){return 1-ne}),y=new OM({map:a,useMap:!0,color:new ea.Color(y),opacity:1,dashArray:this.staticDashArray+N,dashOffset:0,dashRatio:u,sizeAttenuation:!0,lineWidth:C,depthWrite:!1,depthTest:!0,alphaTest:!1,transparent:!0,blending:ea.AdditiveBlending,side:ea.DoubleSide}),y=new ea.Mesh(S.geometry,y),p.add(y),p}}]),e}(nC);st.THREE=ea,st.PostProcessing=LM,st.FanLayer=PM,st.FlyLineLayer=DM,st.ThreeLayer=Iw,Object.defineProperty(st,"__esModule",{value:!0})})}).call(this,Ae("IyRk"))},OujY:function(Dn,ft,Ae){Dn.exports={stepForm:"stepForm___26syq",stepFormText:"stepFormText___3xXDZ",result:"result___3gBKF",desc:"desc___3_cbl",information:"information___3DN7D",label:"label___3LM0j",uppercase:"uppercase___iGDjy"}},PKrl:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("4K7L"),st=Wt.__importDefault(Ae("Gytx")),ye=Ae("W1EI"),At="rgba(60, 50, 200, 0.9)",Ye=function(Ut){Wt.__extends(St,Ut);function St(ce){var Ne=Ut.call(this,ce)||this;return Ne._createLayer=!1,Ne}return St.prototype.componentDidMount=function(){this.initialize()},St.prototype.componentDidUpdate=function(ce){st.default(this.props,ce)||this.initialize()},St.prototype.componentWillUnmount=function(){this.destroy()},St.prototype.destroy=function(){this._createLayer=!1,this.view.destroy(),this.view=void 0,this.linelayer=void 0,this.arrowlayer=void 0,this.flowlayer=void 0,this.pointlayer=void 0,this.textlayer=void 0},St.prototype.initialize=function(){var ce=this,Ne=this.map=this.getMap();if(!!Ne){this._createLayer||this.createLayers();var Q=[],Oe=[],pt=new Map;if(this.props.data){var Lt=[],Er=new rr.OdCurve;this.props.data.forEach(function(xe){var Lr=xe.from.point||rr.utilCity.getCenterByCityName(xe.from.city),Hn=xe.to.point||rr.utilCity.getCenterByCityName(xe.to.city);Lr=new BMapGL.Point(Lr.lng,Lr.lat),Hn=new BMapGL.Point(Hn.lng,Hn.lat),Er.setOptions({points:[Lr,Hn]});var bo=Er.getPoints();ce.props.coordType==="bd09mc"?(Lt.push(BMapGL.Projection.convertMC2LL(Lr)),Lt.push(BMapGL.Projection.convertMC2LL(Hn))):(Lt.push(Lr),Lt.push(Hn)),Q.push({geometry:{type:"LineString",coordinates:bo},color:xe.color});var Cr=pt.get(xe.color)||[];Cr.push({geometry:{type:"LineString",coordinates:bo}}),pt.set(xe.color,Cr),ce.props.showEndPoint!==!1&&Oe.push({geometry:{type:"Point",coordinates:[Hn.lng,Hn.lat]},color:xe.color,properties:{text:xe.to.name||xe.to.city}}),ce.props.showStartPoint!==!1&&Oe.push({geometry:{type:"Point",coordinates:[Lr.lng,Lr.lat]},color:xe.color,properties:{text:xe.from.name||xe.from.city}}),Lt.length>0&&ce.props.autoViewport===!0&&Ne.setViewport(Lt,ce.props.viewportOptions||{})})}this.linelayer.setData(Q),this.props.lineOptions&&this.linelayer.setOptions(this.props.lineOptions),this.pointlayer.setData(Oe),this.props.pointOptions&&this.pointlayer.setOptions(this.props.pointOptions),this.textlayer.setData(Oe),this.props.textOptions&&this.textlayer.setOptions(this.props.textOptions),Array.from(pt.keys()).forEach(function(xe){if(xe===void 0)ce.arrowlayer.setData(pt.get(void 0)),ce.props.arrowOptions&&ce.arrowlayer.setOptions(ce.props.arrowOptions);else{var Lr=new rr.LineLayer(Wt.__assign(Wt.__assign({width:10},ce.props.arrowOptions),{style:"arrow",color:"rgba(255, 255, 255, 0)",styleOptions:{color:xe}}));ce.view.addLayer(Lr),Lr.setData(pt.get(xe))}}),this.props.enableAnimation&&(this.flowlayer.setData(Q),this.props.animationOptions&&this.flowlayer.setOptions(this.props.animationOptions))}},St.prototype.createLayers=function(){this._createLayer=!0;var ce=this.map,Ne=this.view=new rr.View({map:ce}),Q=this.linelayer=new rr.LineLayer({blend:"ligher",color:At,width:4});Ne.addLayer(Q);var Oe=this.arrowlayer=new rr.LineLayer({width:10,style:"arrow",color:"rgba(255, 255, 255, 0)",styleOptions:{color:At}});Ne.addLayer(Oe);var pt=this.pointlayer=new rr.PointLayer({blend:"ligher",depthTest:!1,color:At,size:10});Ne.addLayer(pt);var Lt=this.textlayer=new rr.TextLayer({offset:[0,15],depthTest:!1,color:"#333"});Ne.addLayer(Lt);var Er=this.flowlayer=new rr.LineFlowLayer({color:function(){return"rgb(240, 200, 200)"},polygonOffset:[-2,-2],interval:.4,duration:1,trailLength:.8});Ne.addLayer(Er)},St.prototype.render=function(){return null},St.defaultProps={enableAnimation:!0,showStartPoint:!0,showEndPoint:!0},St}(ye.Component);ft.default=Ye},RwCd:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("W1EI"),st=Wt.__importDefault(Ae("s+10")),ye=Wt.__importDefault(Ae("Gytx")),At=Ae("g8eg");function Ye(){for(var Ne="//mapopen.bj.bcebos.com/cms/react-bmap/markers_new2x_fbb9e99.png",Q={simple_red:new BMapGL.Icon(Ne,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(454/2,378/2),imageSize:new BMapGL.Size(600/2,600/2)}),simple_blue:new BMapGL.Icon(Ne,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(454/2,450/2),imageSize:new BMapGL.Size(600/2,600/2)}),loc_red:new BMapGL.Icon(Ne,new BMapGL.Size(46/2,70/2),{imageOffset:new BMapGL.Size(400/2,378/2),imageSize:new BMapGL.Size(600/2,600/2)}),loc_blue:new BMapGL.Icon(Ne,new BMapGL.Size(46/2,70/2),{imageOffset:new BMapGL.Size(400/2,450/2),imageSize:new BMapGL.Size(600/2,600/2)}),start:new BMapGL.Icon(Ne,new BMapGL.Size(50/2,80/2),{imageOffset:new BMapGL.Size(400/2,278/2),imageSize:new BMapGL.Size(600/2,600/2)}),end:new BMapGL.Icon(Ne,new BMapGL.Size(50/2,80/2),{imageOffset:new BMapGL.Size(450/2,278/2),imageSize:new BMapGL.Size(600/2,600/2)}),location:new BMapGL.Icon(Ne,new BMapGL.Size(28/2,40/2),{imageOffset:new BMapGL.Size(248/2,466/2),imageSize:new BMapGL.Size(600/2,600/2)})},Oe=1;Oe<=10;Oe++)Q["red"+Oe]=new BMapGL.Icon(Ne,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(42/2*(Oe-1),0),imageSize:new BMapGL.Size(600/2,600/2)});for(var Oe=1;Oe<=10;Oe++)Q["blue"+Oe]=new BMapGL.Icon(Ne,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(42/2*(Oe-1),132/2),imageSize:new BMapGL.Size(600/2,600/2)});return Q}var Ut=["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],St={enableMassClear:["enableMassClear","disableMassClear"],enableDragging:["enableDragging","disableDragging"]},ce=function(Ne){Wt.__extends(Q,Ne);function Q(Oe){var pt=Ne.call(this,Oe)||this;return pt.options=["offset","icon","enableMassClear","enableDragging","enableClicking","raiseOnDrag","draggingCursor","rotation","title"],pt.defaultIcons=Ye(),pt}return Q.prototype.componentDidUpdate=function(Oe){if(!this.map){this.initialize();return}var pt=this.props,Lt=pt.position,Er=pt.icon,xe=pt.autoViewport,Lr=pt.offset,Hn=pt.isTop,bo=Oe.position,Cr=Oe.icon,Lo=Oe.autoViewport,Ui=Oe.offset,mi=Oe.isTop,Ko=Lt&&!ye.default(Lt,bo),ro=!!(Er&&!ye.default(Er,Cr)),ia=!ye.default(xe,Lo),Xt=!!(Lr&&!ye.default(Lr,Ui)),vt=!ye.default(Hn,mi),Dr=this.parsePosition(Lt);if(Ko&&this.marker.setPosition(Dr),ro){var Br=this.parseIcon(Er);this.marker.setIcon(Br)}Xt&&this.marker.setOffset(Lr),vt&&this.marker.setTop(!!Hn),xe&&(Ko||ia)&&this.map.setCenter(Dr)},Q.prototype.componentDidMount=function(){this.initialize()},Q.prototype.componentWillUnmount=function(){this.destroy()},Q.prototype.destroy=function(){this.marker&&this.map&&(this.map.removeOverlay(this.marker),this.instance=this.marker=void 0)},Q.prototype.initialize=function(){var Oe=this.map=this.getMap();if(!!Oe){this.destroy();var pt=this.parseIcon(this.props.icon),Lt=this.parsePosition(this.props.position),Er=this.getOptions();Er.icon=pt,this.instance=this.marker=new BMapGL.Marker(Lt,Er),this.props.isTop&&this.marker.setTop(!0),Oe.addOverlay(this.marker),this.props.autoViewport&&Oe.setCenter(Lt)}},Q.prototype.parsePosition=function(Oe){var pt=this.props.coordType==="bd09mc",Lt;return Oe instanceof Array?Lt=new BMapGL.Point(Oe[0],Oe[1]):Oe instanceof BMapGL.Point?Lt=Oe:Lt=new BMapGL.Point(Oe.lng,Oe.lat),pt&&(Lt=BMapGL.Projection.convertMC2LL(Lt)),Lt},Q.prototype.parseIcon=function(Oe){var pt;return Oe&&Oe instanceof BMapGL.Icon?pt=Oe:Oe&&this.defaultIcons[Oe]?pt=this.defaultIcons[Oe]:pt=this.defaultIcons.simple_red,pt},Q.prototype.render=function(){return null},Q.contextType=At.MapContext,Q}(rr.Component);ce.defaultProps={icon:"simple_red"},ft.default=st.default(ce,Ut,St)},S76h:function(Dn,ft,Ae){},SbrR:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importDefault(Ae("0GZW")),st=Wt.__importDefault(Ae("Gytx")),ye=function(At){Wt.__extends(Ye,At);function Ye(Ut){var St=At.call(this,Ut)||this;return St.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","dashArray","enableMassClear","enableEditing"],St}return Ye.prototype.onDataUpdate=function(Ut){var St=this.props,ce=St.path,Ne=St.autoViewport,Q=Ut.path,Oe=Ut.autoViewport,pt=ce&&!st.default(ce,Q),Lt=!st.default(Ne,Oe);if(pt&&this.overlay.setPath(this.parsePath(ce)),Ne&&(pt||Lt)){var Er=this.overlay.getPath(),xe=this.props.map.getViewport(Er,this.props.viewportOptions||{});this.props.map.setViewport(xe)}},Ye.prototype.getOverlay=function(){var Ut=this.parsePath(this.props.path);return new BMapGL.Polyline(Ut,this.getOptions())},Ye.prototype.parsePath=function(Ut){var St=this.props.coordType==="bd09mc",ce=Ut.map(function(Ne){var Q;return Ne instanceof Array?Q=new BMapGL.Point(Ne[0],Ne[1]):Ne instanceof BMapGL.Point?Q=Ne:Q=new BMapGL.Point(Ne.lng,Ne.lat),St&&(Q=BMapGL.Projection.convertMC2LL(Q)),Q});return ce},Ye.prototype.render=function(){return null},Ye}(rr.default);ft.default=ye},ToZM:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importStar(Ae("4K7L")),st=Wt.__importStar(Ae("O8ob")),ye=Ae("W1EI"),At=Ae("3Ree"),Ye=function(Ut){Wt.__extends(St,Ut);function St(ce){var Ne=Ut.call(this,ce)||this;Ne._createLayer=!1;var Q=Ne;return Ne.props.getMethods&&Ne.props.getMethods({setViewport:Ne.setViewport.bind(Q)}),Ne}return St.prototype.componentDidMount=function(){this.initialize()},St.prototype.componentWillUnmount=function(){this.destroy()},St.prototype.componentDidUpdate=function(ce){var Ne=this.props,Q=Ne.type,Oe=Ne.data,pt=Ne.options,Lt=Ne.autoViewport,Er=ce.type,xe=ce.data,Lr=ce.options,Hn=ce.autoViewport;if(!this.map||!this.layer){this.initialize();return}if(Q!==Er){this.destroy(),this.initialize();return}JSON.stringify(Lr)!==JSON.stringify(pt)&&this.layer.setOptions(pt),JSON.stringify(xe)!==JSON.stringify(Oe)&&this.layer.setData(Oe),Lt&&(JSON.stringify(xe)!==JSON.stringify(Oe)||Lt!==Hn)&&this.setViewport()},St.prototype.destroy=function(){this.layer&&this.view&&(this._createLayer=!1,this.view.removeLayer(this.layer),this.layer.destroy(),this.layer=null)},St.prototype.initialize=function(){var ce=this.map=this.getMap(),Ne=this.view=this.props.view||this.context.view;!ce||!Ne||(this._createLayer||this.createLayers(),this.layer.setData(this.props.data),this.props.autoViewport&&this.setViewport())},St.prototype.setViewport=function(){var ce=this.props.coordType==="bd09mc",Ne=function(pt){var Lt=new BMapGL.Point(pt[0],pt[1]);return ce?BMapGL.Projection.convertMC2LL(Lt):Lt},Q=[];this.props.data.forEach(function(Oe){Oe.geometry.type==="Point"?Q.push(Ne(Oe.geometry.coordinates)):Oe.geometry.type==="LineString"?Oe.geometry.coordinates.forEach(function(pt){Q.push(Ne(pt))}):Oe.geometry.type==="Polygon"?Oe.geometry.coordinates[0].forEach(function(pt){Q.push(Ne(pt))}):Oe.geometry.type==="MultiPolygon"&&Oe.geometry.coordinates.forEach(function(pt){pt[0].forEach(function(Lt){Q.push(Ne(Lt))})})}),Q.length>0&&this.map.setViewport(Q,this.props.viewportOptions||{})},St.prototype.createLayers=function(){if(rr[this.props.type]||st[this.props.type]){this._createLayer=!0;var ce=rr[this.props.type]?rr:st;this.layer=new ce[this.props.type](this.props.options),this.view.addLayer(this.layer)}else console.error("mapvgl doesn't have layer "+this.props.type+"!")},St.prototype.render=function(){return null},St.contextType=At.ViewContext,St}(ye.Component);ft.default=Ye},Urep:function(Dn,ft,Ae){},VzZb:function(Dn,ft,Ae){},W1EI:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("s+10");Object.defineProperty(ft,"Wrapper",{enumerable:!0,get:function(){return Wt.default}});var rr=Ae("NRzi");Object.defineProperty(ft,"Component",{enumerable:!0,get:function(){return rr.default}})},WuJL:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importDefault(Ae("hODF")),st=function(ye){Wt.__extends(At,ye);function At(Ye){return ye.call(this,Ye)||this}return At.prototype.getControl=function(){return new BMapGL.ScaleControl(this.getOptions())},At.prototype.render=function(){return null},At}(rr.default);ft.default=st},WwoR:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("W1EI"),st=Wt.__importDefault(Ae("s+10")),ye=Wt.__importDefault(Ae("Gytx")),At=Ae("g8eg"),Ye=["click","dblclick","rightclick","mousedown","mouseup","mouseout","mouseover","mousemove","remove"],Ut={enableMassClear:["enableMassClear","disableMassClear"]},St=function(ce){Wt.__extends(Ne,ce);function Ne(Q){var Oe=ce.call(this,Q)||this;return Oe.options=["position","offset","enableMassClear"],Oe}return Ne.prototype.componentDidUpdate=function(Q){var Oe=this.props,pt=Oe.position,Lt=Oe.offset,Er=Oe.text,xe=Oe.style,Lr=Q.position,Hn=Q.offset,bo=Q.text,Cr=Q.style,Lo=pt&&!ye.default(pt,Lr),Ui=!!(Lt&&!ye.default(Lt,Hn)),mi=!ye.default(Er,bo),Ko=!!(xe&&!ye.default(xe,Cr)),ro=this.parsePosition(pt);Lo&&this.label.setPosition(ro),Ui&&this.label.setOffset(Lt),mi&&this.label.setContent(Er),Ko&&this.label.setStyle(xe)},Ne.prototype.componentDidMount=function(){this.initialize()},Ne.prototype.componentWillUnmount=function(){this.destroy()},Ne.prototype.destroy=function(){this.label&&(this.map.removeOverlay(this.label),this.instance=this.label=void 0)},Ne.prototype.initialize=function(){var Q=this.map=this.getMap();if(!!Q){this.destroy();var Oe=this.getOptions(),pt=this.parsePosition(this.props.position);Oe.position=pt,this.instance=this.label=new BMapGL.Label(this.props.text||"",Oe),Q.addOverlay(this.label),this.props.style&&this.label.setStyle(this.props.style)}},Ne.prototype.parsePosition=function(Q){var Oe=this.props.coordType==="bd09mc",pt;return Q instanceof Array?pt=new BMapGL.Point(Q[0],Q[1]):Q instanceof BMapGL.Point?pt=Q:pt=new BMapGL.Point(Q.lng,Q.lat),Oe&&(pt=BMapGL.Projection.convertMC2LL(pt)),pt},Ne.prototype.render=function(){return null},Ne.contextType=At.MapContext,Ne}(rr.Component);St.defaultProps={style:{color:"red"}},ft.default=st.default(St,Ye,Ut)},YNLO:function(Dn,ft,Ae){Dn.exports={card:"card___KCsQh",heading:"heading___Isyp6",steps:"steps___3fIFU",errorIcon:"errorIcon___2ndjy",anticon:"anticon___ClqxS",errorPopover:"errorPopover___1hcuK",errorListItem:"errorListItem___XPgOv",errorField:"errorField___C0qTe",editable:"editable___19IGK",advancedForm:"advancedForm___3wp9J",optional:"optional___9LBju"}},Z87X:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importDefault(Ae("q1tI")),st=Ae("W1EI"),ye=Ae("gI1Y"),At=Wt.__importStar(Ae("s+10")),Ye=Ae("g8eg"),Ut=["overlaycomplete","overlaycancel"],St={enableCalculate:["enableCalculate","disableCalculate"],enableSorption:["enableSorption","disableSorption"],enableGpc:["enableGpc","disableGpc"]},ce={strokeColor:"#5E87DB",fillColor:"#5E87DB",strokeWeight:2,strokeOpacity:1,fillOpacity:.2},Ne={borderRadius:"2px",background:"#FFFBCC",border:"1px solid #E1E1E1",color:"#703A04",fontSize:"12px",letterSpacing:"0",padding:"5px"},Q=function(Oe){Wt.__extends(pt,Oe);function pt(Lt){var Er=Oe.call(this,Lt)||this;return Er.el=rr.default.createRef(),Er.options=["isOpen","drawingMode","enableDrawingTool","enableCalculate","enableSorption","enableGpc","enableLimit","sorptionDistance","limitOptions","drawingToolOptions","markerOptions","circleOptions","polylineOptions","polygonOptions","rectangleOptions","labelOptions"],Er}return pt.prototype.componentDidMount=function(){this.initialize()},pt.prototype.componentWillUnmount=function(){this.destroy()},pt.prototype.destroy=function(){this.drawingmanager&&(this.drawingmanager.close(),this.instance=this.drawingmanager=void 0)},pt.prototype.initialize=function(){var Lt=this,Er=this.map=this.getMap();if(!!Er){this.destroy();for(var xe=this.getOptions(),Lr=["circleOptions","polylineOptions","polygonOptions","rectangleOptions"],Hn=0;Hn<Lr.length;Hn++){var bo=Lr[Hn];xe[bo]||(xe[bo]=ce)}if(xe.labelOptions||(xe.labelOptions=Ne),xe.drawingToolOptions.customContainer=this.el.current,window.BMapGLLib&&BMapGLLib.DrawingManager&&(this.instance=this.drawingmanager=new BMapGLLib.DrawingManager(Er,xe)),!window.BMapGLLib||!BMapGLLib.DrawingManager){var Cr=this.props.cssUrl||"//mapopen.bj.bcebos.com/github/BMapGLLib/DrawingManager/src/DrawingManager.min.css",Lo=this.props.scriptUrl||"//mapopen.bj.bcebos.com/github/BMapGLLib/DrawingManager/src/DrawingManager.min.js";ye.requireCss(Cr).then(function(){}),ye.requireScript(Lo).then(function(){Lt.instance=Lt.drawingmanager=new BMapGLLib.DrawingManager(Er,xe),At.registerEvents(Lt,Lt.getInstance(Lt),Ut),At.toggleMethods(Lt,Lt.getInstance(Lt),St)})}}},pt.prototype.render=function(){return rr.default.createElement("div",{className:"react-bmapgl-drawingmanager",ref:this.el,style:this.props.style})},pt.contextType=Ye.MapContext,pt}(st.Component);Q.defaultProps={isOpen:!1,enableDrawingTool:!0,enableCalculate:!1,enableSorption:!1,enableGpc:!1,enableLimit:!1,sorptionDistance:20,limitOptions:{area:5e7,distance:3e4},drawingToolOptions:{},style:{position:"absolute",left:0,top:0,width:360}},ft.default=At.default(Q,Ut,St)},"aK+R":function(Dn,ft,Ae){},aVhU:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importDefault(Ae("0GZW")),st=Wt.__importDefault(Ae("Gytx")),ye=function(At){Wt.__extends(Ye,At);function Ye(Ut){var St=At.call(this,Ut)||this;return St.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","enableMassClear","enableEditing"],St}return Ye.prototype.onDataUpdate=function(Ut){var St=this.props,ce=St.path,Ne=St.autoViewport,Q=Ut.path,Oe=Ut.autoViewport,pt=ce&&!st.default(ce,Q),Lt=!st.default(Ne,Oe);if(pt&&this.overlay.setPath(this.parsePath(ce)),Ne&&(pt||Lt)){var Er=this.overlay.getPath(),xe=this.props.map.getViewport(Er,this.props.viewportOptions||{});this.props.map.setViewport(xe)}},Ye.prototype.getOverlay=function(){var Ut=this.parsePath(this.props.path);return new BMapGL.Polygon(Ut,this.getOptions())},Ye.prototype.parsePath=function(Ut){var St=this.props.coordType==="bd09mc",ce=Ut.map(function(Ne){var Q;return Ne instanceof Array?Q=new BMapGL.Point(Ne[0],Ne[1]):Ne instanceof BMapGL.Point?Q=Ne:Q=new BMapGL.Point(Ne.lng,Ne.lat),St&&(Q=BMapGL.Projection.convertMC2LL(Q)),Q});return ce},Ye.prototype.render=function(){return null},Ye}(rr.default);ft.default=ye},bE4E:function(Dn,ft,Ae){},df8c:function(Dn,ft,Ae){},dj1d:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("W1EI"),st=Ae("gI1Y"),ye=Wt.__importStar(Ae("s+10")),At=Ae("g8eg"),Ye=["drawend","addpoint","removepolyline"],Ut={},St=function(ce){Wt.__extends(Ne,ce);function Ne(Q){var Oe=ce.call(this,Q)||this;return Oe.options=["tips","followText","unit","lineColor","lineStroke","opacity","lineStyle","cursor","secIcon","closeIcon"],Oe}return Ne.prototype.componentDidMount=function(){this.initialize()},Ne.prototype.componentWillUnmount=function(){this.destroy()},Ne.prototype.destroy=function(){this.distancetool&&(this.distancetool.close(),this.instance=this.distancetool=void 0)},Ne.prototype.initialize=function(){var Q=this,Oe=this.map=this.getMap();if(!!Oe){this.destroy();var pt=this.getOptions();if(window.BMapGLLib&&BMapGLLib.DistanceTool&&(this.instance=this.distancetool=new BMapGLLib.DistanceTool(Oe,pt),this.props.defaultOpen&&this.distancetool.open()),!window.BMapGLLib||!BMapGLLib.DistanceTool){var Lt=this.props.scriptUrl||"//mapopen.bj.bcebos.com/github/BMapGLLib/DistanceTool/src/DistanceTool.js";st.requireScript(Lt).then(function(){Q.instance=Q.distancetool=new BMapGLLib.DistanceTool(Oe,pt),ye.registerEvents(Q,Q.getInstance(Q),Ye),ye.toggleMethods(Q,Q.getInstance(Q),Ut),Q.props.defaultOpen&&Q.distancetool.open()})}}},Ne.prototype.render=function(){return null},Ne.contextType=At.MapContext,Ne}(rr.Component);St.defaultProps={defaultOpen:!0},ft.default=ye.default(St,Ye,Ut)},e8yt:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importStar(Ae("q1tI")),st=Ae("W1EI"),ye=Wt.__importDefault(Ae("s+10")),At=["confirm","highlight"],Ye={},Ut=function(St){Wt.__extends(ce,St);function ce(Ne){var Q=St.call(this,Ne)||this;return Q.el=rr.default.createRef(),Q.options=["location","onSearchComplete","input","types"],Q}return ce.prototype.componentDidMount=function(){this.initialize()},ce.prototype.componentWillUnmount=function(){this.destroy()},ce.prototype.destroy=function(){this.ac&&(this.ac.dispose(),this.instance=this.ac=void 0)},ce.prototype.initialize=function(){this.destroy();var Ne=this.getOptions();Ne.input||(Ne.input=this.el.current),this.ac=this.instance=new BMapGL.Autocomplete(Ne)},ce.prototype.render=function(){return rr.default.createElement(rr.Fragment,null,!this.props.input&&rr.default.createElement("input",{className:"react-bmapgl-autocomplete",ref:this.el,style:this.props.style}))},ce}(st.Component);Ut.defaultProps={},ft.default=ye.default(Ut,At,Ye)},exNA:function(Dn,ft,Ae){"use strict";Ae.r(ft),Ae.d(ft,"initialAlgoData",function(){return Lc}),Ae.d(ft,"initialPointData",function(){return xm});var Wt=Ae("cIOH"),rr=Ae("1GLa"),st=Ae("qrJ5"),ye=st.a,At=Ae("/kpp"),Ye=At.a,Ut=Ae("lnY3"),St=Ae("Znn+"),ce=Ae("rePB"),Ne=Ae("wx14"),Q=Ae("q1tI"),Oe=Ae.n(Q),pt=Ae("TSYQ"),Lt=Ae.n(pt),Er=Ae("bT9E"),xe=Ae("H84U"),Lr=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},Hn=function(J){var $=J.prefixCls,V=J.className,H=J.hoverable,te=H===void 0?!0:H,ie=Lr(J,["prefixCls","className","hoverable"]);return Q.createElement(xe.a,null,function(le){var ue=le.getPrefixCls,we=ue("card",$),Pe=Lt()("".concat(we,"-grid"),V,Object(ce.a)({},"".concat(we,"-grid-hoverable"),te));return Q.createElement("div",Object(Ne.a)({},ie,{className:Pe}))})},bo=Hn,Cr=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},Lo=function(J){return Q.createElement(xe.a,null,function($){var V=$.getPrefixCls,H=J.prefixCls,te=J.className,ie=J.avatar,le=J.title,ue=J.description,we=Cr(J,["prefixCls","className","avatar","title","description"]),Pe=V("card",H),Re=Lt()("".concat(Pe,"-meta"),te),Ue=ie?Q.createElement("div",{className:"".concat(Pe,"-meta-avatar")},ie):null,Ke=le?Q.createElement("div",{className:"".concat(Pe,"-meta-title")},le):null,it=ue?Q.createElement("div",{className:"".concat(Pe,"-meta-description")},ue):null,ut=Ke||it?Q.createElement("div",{className:"".concat(Pe,"-meta-detail")},Ke,it):null;return Q.createElement("div",Object(Ne.a)({},we,{className:Re}),Ue,ut)})},Ui=Lo,mi=Ae("ZTPi"),Ko=Ae("3Nzz"),ro=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $};function ia(j){var J=j.map(function($,V){return Q.createElement("li",{style:{width:"".concat(100/j.length,"%")},key:"action-".concat(V)},Q.createElement("span",null,$))});return J}var Xt=function(J){var $,V,H=Q.useContext(xe.b),te=H.getPrefixCls,ie=H.direction,le=Q.useContext(Ko.b),ue=function(Ti){var Co;(Co=J.onTabChange)===null||Co===void 0||Co.call(J,Ti)},we=function(){var Ti;return Q.Children.forEach(J.children,function(Co){Co&&Co.type&&Co.type===bo&&(Ti=!0)}),Ti},Pe=J.prefixCls,Re=J.className,Ue=J.extra,Ke=J.headStyle,it=Ke===void 0?{}:Ke,ut=J.bodyStyle,rt=ut===void 0?{}:ut,Ct=J.title,yt=J.loading,Kt=J.bordered,ar=Kt===void 0?!0:Kt,er=J.size,Yt=J.type,sr=J.cover,jt=J.actions,gr=J.tabList,ir=J.children,Pr=J.activeTabKey,Yr=J.defaultActiveTabKey,qt=J.tabBarExtraContent,xr=J.hoverable,cn=J.tabProps,Cn=cn===void 0?{}:cn,Gn=ro(J,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),Wr=te("card",Pe),Jn=rt.padding===0||rt.padding==="0px"?{padding:24}:void 0,jn=Q.createElement("div",{className:"".concat(Wr,"-loading-block")}),Xn=Q.createElement("div",{className:"".concat(Wr,"-loading-content"),style:Jn},Q.createElement(ye,{gutter:8},Q.createElement(Ye,{span:22},jn)),Q.createElement(ye,{gutter:8},Q.createElement(Ye,{span:8},jn),Q.createElement(Ye,{span:15},jn)),Q.createElement(ye,{gutter:8},Q.createElement(Ye,{span:6},jn),Q.createElement(Ye,{span:18},jn)),Q.createElement(ye,{gutter:8},Q.createElement(Ye,{span:13},jn),Q.createElement(Ye,{span:9},jn)),Q.createElement(ye,{gutter:8},Q.createElement(Ye,{span:4},jn),Q.createElement(Ye,{span:3},jn),Q.createElement(Ye,{span:16},jn))),Wi=Pr!==void 0,Ai=Object(Ne.a)(Object(Ne.a)({},Cn),($={},Object(ce.a)($,Wi?"activeKey":"defaultActiveKey",Wi?Pr:Yr),Object(ce.a)($,"tabBarExtraContent",qt),$)),Oi,Ji=gr&&gr.length?Q.createElement(mi.a,Object(Ne.a)({size:"large"},Ai,{className:"".concat(Wr,"-head-tabs"),onChange:ue}),gr.map(function(ii){return Q.createElement(mi.a.TabPane,{tab:ii.tab,disabled:ii.disabled,key:ii.key})})):null;(Ct||Ue||Ji)&&(Oi=Q.createElement("div",{className:"".concat(Wr,"-head"),style:it},Q.createElement("div",{className:"".concat(Wr,"-head-wrapper")},Ct&&Q.createElement("div",{className:"".concat(Wr,"-head-title")},Ct),Ue&&Q.createElement("div",{className:"".concat(Wr,"-extra")},Ue)),Ji));var En=sr?Q.createElement("div",{className:"".concat(Wr,"-cover")},sr):null,$i=Q.createElement("div",{className:"".concat(Wr,"-body"),style:rt},yt?Xn:ir),no=jt&&jt.length?Q.createElement("ul",{className:"".concat(Wr,"-actions")},ia(jt)):null,Ao=Object(Er.a)(Gn,["onTabChange"]),ua=er||le,ji=Lt()(Wr,(V={},Object(ce.a)(V,"".concat(Wr,"-loading"),yt),Object(ce.a)(V,"".concat(Wr,"-bordered"),ar),Object(ce.a)(V,"".concat(Wr,"-hoverable"),xr),Object(ce.a)(V,"".concat(Wr,"-contain-grid"),we()),Object(ce.a)(V,"".concat(Wr,"-contain-tabs"),gr&&gr.length),Object(ce.a)(V,"".concat(Wr,"-").concat(ua),ua),Object(ce.a)(V,"".concat(Wr,"-type-").concat(Yt),!!Yt),Object(ce.a)(V,"".concat(Wr,"-rtl"),ie==="rtl"),V),Re);return Q.createElement("div",Object(Ne.a)({},Ao,{className:ji}),Oi,En,$i,no)};Xt.Grid=bo,Xt.Meta=Ui;var vt=Xt,Dr=Ae("cWXX"),Br=Ae("/ezw"),Gr=Ae("tJVT"),kr=Ae("8txm"),Nr=Ae("MXD1"),wr=Ae("VTBJ"),Jr=Ae("Ff2n"),Tn=Ae("1OyB"),fa=Ae("vuIU"),Ja=Ae("Ji7U"),ki=Ae("LK+K"),vs=Ae("Zm9Q");function Bc(j){return typeof j=="string"}var fu=function(j){Object(Ja.a)($,j);var J=Object(ki.a)($);function $(){var V;return Object(Tn.a)(this,$),V=J.apply(this,arguments),V.onClick=function(){var H=V.props,te=H.onClick,ie=H.onStepClick,le=H.stepIndex;te&&te.apply(void 0,arguments),ie(le)},V}return Object(fa.a)($,[{key:"renderIconNode",value:function(){var H,te=this.props,ie=te.prefixCls,le=te.progressDot,ue=te.stepIcon,we=te.stepNumber,Pe=te.status,Re=te.title,Ue=te.description,Ke=te.icon,it=te.iconPrefix,ut=te.icons,rt,Ct=Lt()("".concat(ie,"-icon"),"".concat(it,"icon"),(H={},Object(ce.a)(H,"".concat(it,"icon-").concat(Ke),Ke&&Bc(Ke)),Object(ce.a)(H,"".concat(it,"icon-check"),!Ke&&Pe==="finish"&&(ut&&!ut.finish||!ut)),Object(ce.a)(H,"".concat(it,"icon-cross"),!Ke&&Pe==="error"&&(ut&&!ut.error||!ut)),H)),yt=Oe.a.createElement("span",{className:"".concat(ie,"-icon-dot")});return le?typeof le=="function"?rt=Oe.a.createElement("span",{className:"".concat(ie,"-icon")},le(yt,{index:we-1,status:Pe,title:Re,description:Ue})):rt=Oe.a.createElement("span",{className:"".concat(ie,"-icon")},yt):Ke&&!Bc(Ke)?rt=Oe.a.createElement("span",{className:"".concat(ie,"-icon")},Ke):ut&&ut.finish&&Pe==="finish"?rt=Oe.a.createElement("span",{className:"".concat(ie,"-icon")},ut.finish):ut&&ut.error&&Pe==="error"?rt=Oe.a.createElement("span",{className:"".concat(ie,"-icon")},ut.error):Ke||Pe==="finish"||Pe==="error"?rt=Oe.a.createElement("span",{className:Ct}):rt=Oe.a.createElement("span",{className:"".concat(ie,"-icon")},we),ue&&(rt=ue({index:we-1,status:Pe,title:Re,description:Ue,node:rt})),rt}},{key:"render",value:function(){var H,te=this.props,ie=te.className,le=te.prefixCls,ue=te.style,we=te.active,Pe=te.status,Re=Pe===void 0?"wait":Pe,Ue=te.iconPrefix,Ke=te.icon,it=te.wrapperStyle,ut=te.stepNumber,rt=te.disabled,Ct=te.description,yt=te.title,Kt=te.subTitle,ar=te.progressDot,er=te.stepIcon,Yt=te.tailContent,sr=te.icons,jt=te.stepIndex,gr=te.onStepClick,ir=te.onClick,Pr=Object(Jr.a)(te,["className","prefixCls","style","active","status","iconPrefix","icon","wrapperStyle","stepNumber","disabled","description","title","subTitle","progressDot","stepIcon","tailContent","icons","stepIndex","onStepClick","onClick"]),Yr=Lt()("".concat(le,"-item"),"".concat(le,"-item-").concat(Re),ie,(H={},Object(ce.a)(H,"".concat(le,"-item-custom"),Ke),Object(ce.a)(H,"".concat(le,"-item-active"),we),Object(ce.a)(H,"".concat(le,"-item-disabled"),rt===!0),H)),qt=Object(wr.a)({},ue),xr={};return gr&&!rt&&(xr.role="button",xr.tabIndex=0,xr.onClick=this.onClick),Oe.a.createElement("div",Object.assign({},Pr,{className:Yr,style:qt}),Oe.a.createElement("div",Object.assign({onClick:ir},xr,{className:"".concat(le,"-item-container")}),Oe.a.createElement("div",{className:"".concat(le,"-item-tail")},Yt),Oe.a.createElement("div",{className:"".concat(le,"-item-icon")},this.renderIconNode()),Oe.a.createElement("div",{className:"".concat(le,"-item-content")},Oe.a.createElement("div",{className:"".concat(le,"-item-title")},yt,Kt&&Oe.a.createElement("div",{title:typeof Kt=="string"?Kt:void 0,className:"".concat(le,"-item-subtitle")},Kt)),Ct&&Oe.a.createElement("div",{className:"".concat(le,"-item-description")},Ct))))}}]),$}(Oe.a.Component),Or=function(j){Object(Ja.a)($,j);var J=Object(ki.a)($);function $(){var V;return Object(Tn.a)(this,$),V=J.apply(this,arguments),V.onStepClick=function(H){var te=V.props,ie=te.onChange,le=te.current;ie&&le!==H&&ie(H)},V}return Object(fa.a)($,[{key:"render",value:function(){var H,te=this,ie=this.props,le=ie.prefixCls,ue=ie.style,we=ue===void 0?{}:ue,Pe=ie.className,Re=ie.children,Ue=ie.direction,Ke=ie.type,it=ie.labelPlacement,ut=ie.iconPrefix,rt=ie.status,Ct=ie.size,yt=ie.current,Kt=ie.progressDot,ar=ie.stepIcon,er=ie.initial,Yt=ie.icons,sr=ie.onChange,jt=Object(Jr.a)(ie,["prefixCls","style","className","children","direction","type","labelPlacement","iconPrefix","status","size","current","progressDot","stepIcon","initial","icons","onChange"]),gr=Ke==="navigation",ir=Kt?"vertical":it,Pr=Lt()(le,"".concat(le,"-").concat(Ue),Pe,(H={},Object(ce.a)(H,"".concat(le,"-").concat(Ct),Ct),Object(ce.a)(H,"".concat(le,"-label-").concat(ir),Ue==="horizontal"),Object(ce.a)(H,"".concat(le,"-dot"),!!Kt),Object(ce.a)(H,"".concat(le,"-navigation"),gr),H));return Oe.a.createElement("div",Object.assign({className:Pr,style:we},jt),Object(vs.a)(Re).map(function(Yr,qt){var xr=er+qt,cn=Object(wr.a)({stepNumber:"".concat(xr+1),stepIndex:xr,key:xr,prefixCls:le,iconPrefix:ut,wrapperStyle:we,progressDot:Kt,stepIcon:ar,icons:Yt,onStepClick:sr&&te.onStepClick},Yr.props);return rt==="error"&&qt===yt-1&&(cn.className="".concat(le,"-next-error")),Yr.props.status||(xr===yt?cn.status=rt:xr<yt?cn.status="finish":cn.status="wait"),cn.active=xr===yt,Object(Q.cloneElement)(Yr,cn)}))}}]),$}(Oe.a.Component);Or.Step=fu,Or.defaultProps={type:"default",prefixCls:"rc-steps",iconPrefix:"rc",direction:"horizontal",labelPlacement:"horizontal",initial:0,current:0,status:"process",size:"",progressDot:!1};var Sl=Or,Yp=Ae("bRQS"),Zl=Ae("4i/N"),$r=Ae("CFYs"),oa=Ae("5OYt"),Kh=function(J){var $,V=J.percent,H=J.size,te=J.className,ie=J.direction,le=J.responsive,ue=Object(oa.a)(),we=ue.xs,Pe=Q.useContext(xe.b),Re=Pe.getPrefixCls,Ue=Pe.direction,Ke=Q.useCallback(function(){return le&&we?"vertical":ie},[we,ie]),it=Re("steps",J.prefixCls),ut=Re("",J.iconPrefix),rt=Lt()(($={},Object(ce.a)($,"".concat(it,"-rtl"),Ue==="rtl"),Object(ce.a)($,"".concat(it,"-with-progress"),V!==void 0),$),te),Ct={finish:Q.createElement(Yp.a,{className:"".concat(it,"-finish-icon")}),error:Q.createElement(Zl.a,{className:"".concat(it,"-error-icon")})},yt=function(ar){var er=ar.node,Yt=ar.status;if(Yt==="process"&&V!==void 0){var sr=H==="small"?32:40,jt=Q.createElement("div",{className:"".concat(it,"-progress-icon")},Q.createElement($r.a,{type:"circle",percent:V,width:sr,strokeWidth:4,format:function(){return null}}),er);return jt}return er};return Q.createElement(Sl,Object(Ne.a)({icons:Ct},Object(Er.a)(J,["percent","responsive"]),{direction:Ke(),stepIcon:yt,prefixCls:it,iconPrefix:ut,className:rt}))};Kh.Step=Sl.Step,Kh.defaultProps={current:0};var wh=Kh,ei=Ae("Hx5s"),ul=Ae("+L6B"),ko=Ae("2/Rp"),_i=Ae("bE4E"),ss=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},qa=function(J){return Q.createElement(xe.a,null,function($){var V,H=$.getPrefixCls,te=$.direction,ie=J.prefixCls,le=J.type,ue=le===void 0?"horizontal":le,we=J.orientation,Pe=we===void 0?"center":we,Re=J.className,Ue=J.children,Ke=J.dashed,it=J.plain,ut=ss(J,["prefixCls","type","orientation","className","children","dashed","plain"]),rt=H("divider",ie),Ct=Pe.length>0?"-".concat(Pe):Pe,yt=!!Ue,Kt=Lt()(rt,"".concat(rt,"-").concat(ue),(V={},Object(ce.a)(V,"".concat(rt,"-with-text"),yt),Object(ce.a)(V,"".concat(rt,"-with-text").concat(Ct),yt),Object(ce.a)(V,"".concat(rt,"-dashed"),!!Ke),Object(ce.a)(V,"".concat(rt,"-plain"),!!it),Object(ce.a)(V,"".concat(rt,"-rtl"),te==="rtl"),V),Re);return Q.createElement("div",Object(Ne.a)({className:Kt},ut,{role:"separator"}),Ue&&Q.createElement("span",{className:"".concat(rt,"-inner-text")},Ue))})},zc=qa,Bu=Ae("giR+"),_a=Ae("fyUT"),Ia=Ae("k1fw"),Ud=Ae("miYZ"),zu=Ae("tsqr"),Kl=Ae("9og8"),Uc=Ae("y8nQ"),Qa=Ae("Vl3Y"),Uu=Ae("OaEy"),fc=Ae("2fM7"),dc=Ae("WmNS"),ku=Ae.n(dc),Gg=Ae("uNoE"),kc=Ae.n(Gg),Tr=Ae("nKUr"),kd=fc.a.Option,Jl={labelCol:{span:8},wrapperCol:{xxl:{span:4},xl:{span:8},lg:{span:8},md:{span:16},sm:{span:24},xs:{span:24}}},Ir=function(J){var $=J.rootAlgoData,V=J.setRootAlgoData,H=J.setCurrentStep,te=$.algorithm,ie=$.initialTemp,le=$.finalTemp,ue=$.coolingRate,we=$.chainLength,Pe=Object(Q.useState)(te),Re=Object(Gr.a)(Pe,2),Ue=Re[0],Ke=Re[1],it=Qa.a.useForm(),ut=Object(Gr.a)(it,1),rt=ut[0];if(!$)return null;var Ct=function(){var ar=Object(Kl.a)(ku.a.mark(function er(){var Yt;return ku.a.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.prev=0,jt.next=3,rt.validateFields();case 3:if(Yt=jt.sent,Ue!=="SA"){jt.next=10;break}if(!(Yt.initialTemp<=0||Yt.finalTemp<=0||Yt.initialTemp<=Yt.finalTemp||Yt.coolingRate<=0||Yt.coolingRate>=1||Yt.chainLength<=1)){jt.next=8;break}return zu.default.error("\u7B97\u6CD5\u7684\u4F20\u5165\u53C2\u6570\u6216\u5176\u7EC4\u5408\u4E0D\u5408\u6CD5\uFF01"),jt.abrupt("return");case 8:jt.next=12;break;case 10:return zu.default.error("\u9009\u4E2D\u7B97\u6CD5\u6CA1\u5199"),jt.abrupt("return");case 12:V(Object(Ia.a)(Object(Ia.a)({},$),Yt)),H("step2"),jt.next=19;break;case 16:jt.prev=16,jt.t0=jt.catch(0),console.log("Save failed:",jt.t0);case 19:case"end":return jt.stop()}},er,null,[[0,16]])}));return function(){return ar.apply(this,arguments)}}(),yt=function(er){Ke(er)},Kt=function(er){switch(er){case"SA":return Object(Tr.jsxs)(Tr.Fragment,{children:[Object(Tr.jsx)(Qa.a.Item,{"data-inspector-line":"64","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",label:"\u521D\u59CB\u6E29\u5EA6",name:"initialTemp",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u521D\u59CB\u6E29\u5EA6"}],children:Object(Tr.jsx)(_a.a,{"data-inspector-line":"69","data-inspector-column":"14","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",className:kc.a.numInput,initialValues:ie,min:1,step:1e3,formatter:function(sr){return"".concat(sr,"  'C")},parser:function(sr){return sr?sr.replace("  'C",""):ie}})}),Object(Tr.jsx)(Qa.a.Item,{"data-inspector-line":"78","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",label:"\u7EC8\u6B62\u6E29\u5EA6",name:"finalTemp",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC8\u6B62\u6E29\u5EA6"}],children:Object(Tr.jsx)(_a.a,{"data-inspector-line":"83","data-inspector-column":"14","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",className:kc.a.numInput,initialValues:le,min:1,step:1,formatter:function(sr){return"".concat(sr,"  'C")},parser:function(sr){return sr?sr.replace("  'C",""):le}})}),Object(Tr.jsx)(Qa.a.Item,{"data-inspector-line":"92","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",label:"\u964D\u6E29\u901F\u7387",name:"coolingRate",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u964D\u6E29\u901F\u7387"}],children:Object(Tr.jsx)(_a.a,{"data-inspector-line":"97","data-inspector-column":"14","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",className:kc.a.numInput,initialValues:ue,min:0,max:.99,step:.1})}),Object(Tr.jsx)(Qa.a.Item,{"data-inspector-line":"105","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",label:"Markov \u94FE\u957F",name:"chainLength",rules:[{required:!0,message:"\u8BF7\u8F93\u5165 Markov \u94FE\u957F"}],children:Object(Tr.jsx)(_a.a,{"data-inspector-line":"110","data-inspector-column":"14","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",className:kc.a.numInput,initialValues:we,min:1,max:500,step:10})})]});case"GA":return Object(Tr.jsx)(Qa.a.Item,{"data-inspector-line":"122","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",label:"\u6F14\u793A",name:"param",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],children:Object(Tr.jsx)(_a.a,{"data-inspector-line":"123","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",className:kc.a.numInput,initialValues:1})});default:return Object(Tr.jsx)(Tr.Fragment,{})}};return Object(Tr.jsxs)(Qa.a,Object(Ia.a)(Object(Ia.a)({"data-inspector-line":"132","data-inspector-column":"4","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx"},Jl),{},{form:rt,layout:"horizontal",className:kc.a.stepForm,hideRequiredMark:!0,initialValues:$,children:[Object(Tr.jsx)(zc,{"data-inspector-line":"140","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx"}),Object(Tr.jsx)(Qa.a.Item,{"data-inspector-line":"141","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",label:"\u7B97\u6CD5\u9009\u62E9",name:"algorithm",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7B97\u6CD5"}],children:Object(Tr.jsxs)(fc.a,{"data-inspector-line":"146","data-inspector-column":"8","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",placeholder:"\u8BF7\u9009\u62E9",onChange:yt,children:[Object(Tr.jsx)(kd,{"data-inspector-line":"147","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",value:"SA",children:"\u6A21\u62DF\u9000\u706B\u7B97\u6CD5"}),Object(Tr.jsx)(kd,{"data-inspector-line":"148","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",value:"GA",children:"\u9057\u4F20\u7B97\u6CD5"})]})}),Kt(Ue),Object(Tr.jsx)(Qa.a.Item,{"data-inspector-line":"152","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",wrapperCol:{xs:{span:24,offset:0},sm:{span:Jl.wrapperCol.span,offset:Jl.labelCol.span}},children:Object(Tr.jsx)(ko.a,{"data-inspector-line":"161","data-inspector-column":"8","data-inspector-relative-path":"src/pages/VRP/components/Step1Form/index.tsx",type:"primary",onClick:Ct,children:"\u4E0B\u4E00\u6B65"})})]}))},Hc=Ir,Hd=Ae("fOrg"),Jh=Ae("+KLJ"),_h=Ae("DYRE"),cl=Ae("zeV3"),Tl=Ae("/qDX"),pc=Ae("5Dmo"),s0=Ae("5NDa"),Zp=Ae("c+Xe"),$a=Ae("uaoM"),ev=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},tv=function(J,$){var V=J.prefixCls,H=J.component,te=H===void 0?"article":H,ie=J.className,le=J["aria-label"],ue=J.setContentRef,we=J.children,Pe=ev(J,["prefixCls","component","className","aria-label","setContentRef","children"]),Re=$;return ue&&(Object($a.a)(!1,"Typography","`setContentRef` is deprecated. Please use `ref` instead."),Re=Object(Zp.a)($,ue)),Q.createElement(xe.a,null,function(Ue){var Ke=Ue.getPrefixCls,it=Ue.direction,ut=te,rt=Ke("typography",V),Ct=Lt()(rt,Object(ce.a)({},"".concat(rt,"-rtl"),it==="rtl"),ie);return Q.createElement(ut,Object(Ne.a)({className:Ct,"aria-label":le,ref:Re},Pe),we)})},jg=Q.forwardRef(tv);jg.displayName="Typography";var ls=jg,hl=ls,va=Ae("U8pU"),Ho=Ae("KQm4"),rv=Ae("+QRC"),nv=Ae.n(rv),iv={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},Kp=iv,Gc=Ae("6VBw"),Vg=function(J,$){return Q.createElement(Gc.a,Object.assign({},J,{ref:$,icon:Kp}))};Vg.displayName="EditOutlined";var Gd=Q.forwardRef(Vg),Wg=Ae("lfch"),Il=Ae("t23M"),jd=Ae("wEI+"),Zf=Ae("YMnH"),Hu=Ae("gDlH"),Jp=Ae("oHiP"),Xg=Ae("R3zJ"),jc=Ae("3S7+"),Go=Ae("ODXe"),Fo=Ae("4IlW"),l0={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},u0=l0,ov=function(J,$){return Q.createElement(Gc.a,Object.assign({},J,{ref:$,icon:u0}))};ov.displayName="EnterOutlined";var av=Q.forwardRef(ov),Vd=Ae("whJP"),Yg=function(J){var $=J.prefixCls,V=J["aria-label"],H=J.className,te=J.style,ie=J.direction,le=J.maxLength,ue=J.autoSize,we=ue===void 0?!0:ue,Pe=J.value,Re=J.onSave,Ue=J.onCancel,Ke=J.onEnd,it=Q.useRef(),ut=Q.useRef(!1),rt=Q.useRef(),Ct=Q.useState(Pe),yt=Object(Go.a)(Ct,2),Kt=yt[0],ar=yt[1];Q.useEffect(function(){ar(Pe)},[Pe]),Q.useEffect(function(){if(it.current&&it.current.resizableTextArea){var qt=it.current.resizableTextArea.textArea;qt.focus();var xr=qt.value.length;qt.setSelectionRange(xr,xr)}},[]);var er=function(xr){var cn=xr.target;ar(cn.value.replace(/[\n\r]/g,""))},Yt=function(){ut.current=!0},sr=function(){ut.current=!1},jt=function(xr){var cn=xr.keyCode;ut.current||(rt.current=cn)},gr=function(){Re(Kt.trim())},ir=function(xr){var cn=xr.keyCode,Cn=xr.ctrlKey,Gn=xr.altKey,Wr=xr.metaKey,Jn=xr.shiftKey;rt.current===cn&&!ut.current&&!Cn&&!Gn&&!Wr&&!Jn&&(cn===Fo.a.ENTER?(gr(),Ke==null||Ke()):cn===Fo.a.ESC&&Ue())},Pr=function(){gr()},Yr=Lt()($,"".concat($,"-edit-content"),Object(ce.a)({},"".concat($,"-rtl"),ie==="rtl"),H);return Q.createElement("div",{className:Yr,style:te},Q.createElement(Vd.a,{ref:it,maxLength:le,value:Kt,onChange:er,onKeyDown:jt,onKeyUp:ir,onCompositionStart:Yt,onCompositionEnd:sr,onBlur:Pr,"aria-label":V,autoSize:we}),Q.createElement(av,{className:"".concat($,"-edit-content-confirm")}))},sv=Yg,gc=Ae("i8i4"),lv=1,uv=3,Da=8,ka,Kf={padding:0,margin:0,display:"inline",lineHeight:"inherit"};function Jf(j){if(!j)return 0;var J=j.match(/^\d*(\.\d*)?/);return J?Number(J[0]):0}function c0(j){var J=Array.prototype.slice.apply(j);return J.map(function($){return"".concat($,": ").concat(j.getPropertyValue($),";")}).join("")}function qr(j){var J=[];return j.forEach(function($){var V=J[J.length-1];typeof $=="string"&&typeof V=="string"?J[J.length-1]+=$:J.push($)}),J}function ql(j,J){j.setAttribute("aria-hidden","true");var $=window.getComputedStyle(J),V=c0($);j.setAttribute("style",V),j.style.position="fixed",j.style.left="0",j.style.height="auto",j.style.minHeight="auto",j.style.maxHeight="auto",j.style.top="-999999px",j.style.zIndex="-1000",j.style.textOverflow="clip",j.style.whiteSpace="normal",j.style.webkitLineClamp="none"}function Zg(j){var J=document.createElement("div");ql(J,j),J.appendChild(document.createTextNode("text")),document.body.appendChild(J);var $=J.offsetHeight,V=Jf(window.getComputedStyle(j).lineHeight);return document.body.removeChild(J),$>V?$:V}var ta=function(j,J,$,V,H){ka||(ka=document.createElement("div"),ka.setAttribute("aria-hidden","true")),ka.parentNode||document.body.appendChild(ka);var te=J.rows,ie=J.suffix,le=ie===void 0?"":ie,ue=window.getComputedStyle(j),we=Zg(j),Pe=Math.floor(we)*(te+1)+Jf(ue.paddingTop)+Jf(ue.paddingBottom);ql(ka,j);var Re=qr(Object(vs.a)($));Object(gc.render)(Q.createElement("div",{style:Kf},Q.createElement("span",{style:Kf},Re,le),Q.createElement("span",{style:Kf},V)),ka);function Ue(){return Math.ceil(ka.getBoundingClientRect().height)<Pe}if(Ue())return Object(gc.unmountComponentAtNode)(ka),{content:$,text:ka.innerHTML,ellipsis:!1};var Ke=Array.prototype.slice.apply(ka.childNodes[0].childNodes[0].cloneNode(!0).childNodes).filter(function(er){var Yt=er.nodeType;return Yt!==Da}),it=Array.prototype.slice.apply(ka.childNodes[0].childNodes[1].cloneNode(!0).childNodes);Object(gc.unmountComponentAtNode)(ka);var ut=[];ka.innerHTML="";var rt=document.createElement("span");ka.appendChild(rt);var Ct=document.createTextNode(H+le);rt.appendChild(Ct),it.forEach(function(er){ka.appendChild(er)});function yt(er){rt.insertBefore(er,Ct)}function Kt(er,Yt){var sr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,jt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Yt.length,gr=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,ir=Math.floor((sr+jt)/2),Pr=Yt.slice(0,ir);if(er.textContent=Pr,sr>=jt-1)for(var Yr=jt;Yr>=sr;Yr-=1){var qt=Yt.slice(0,Yr);if(er.textContent=qt,Ue()||!qt)return Yr===Yt.length?{finished:!1,reactNode:Yt}:{finished:!0,reactNode:qt}}return Ue()?Kt(er,Yt,ir,jt,ir):Kt(er,Yt,sr,ir,gr)}function ar(er,Yt){var sr=er.nodeType;if(sr===lv)return yt(er),Ue()?{finished:!1,reactNode:Re[Yt]}:(rt.removeChild(er),{finished:!0,reactNode:null});if(sr===uv){var jt=er.textContent||"",gr=document.createTextNode(jt);return yt(gr),Kt(gr,jt)}return{finished:!1,reactNode:null}}return Ke.some(function(er,Yt){var sr=ar(er,Yt),jt=sr.finished,gr=sr.reactNode;return gr&&ut.push(gr),jt}),{content:ut,text:ka.innerHTML,ellipsis:!0}},Kg=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},mc=Object(Xg.b)("webkitLineClamp"),qf=Object(Xg.b)("textOverflow");function vc(j,J){var $=j.mark,V=j.code,H=j.underline,te=j.delete,ie=j.strong,le=j.keyboard,ue=j.italic,we=J;function Pe(Re,Ue){!Re||(we=Q.createElement(Ue,{},we))}return Pe(ie,"strong"),Pe(H,"u"),Pe(te,"del"),Pe(V,"code"),Pe($,"mark"),Pe(le,"kbd"),Pe(ue,"i"),we}function Wd(j,J,$){return j===!0||j===void 0?J:j||$&&J}var qp="...",qh=function(j){Object(Ja.a)($,j);var J=Object(ki.a)($);function $(){var V;return Object(Tn.a)(this,$),V=J.apply(this,arguments),V.contentRef=Q.createRef(),V.state={edit:!1,copied:!1,ellipsisText:"",ellipsisContent:null,isEllipsis:!1,expanded:!1,clientRendered:!1},V.getPrefixCls=function(){var H=V.props.prefixCls,te=V.context.getPrefixCls;return te("typography",H)},V.onExpandClick=function(H){var te,ie=V.getEllipsis(),le=ie.onExpand;V.setState({expanded:!0}),(te=le)===null||te===void 0||te(H)},V.onEditClick=function(H){H.preventDefault(),V.triggerEdit(!0)},V.onEditChange=function(H){var te=V.getEditable(),ie=te.onChange;ie==null||ie(H),V.triggerEdit(!1)},V.onEditCancel=function(){var H,te;(te=(H=V.getEditable()).onCancel)===null||te===void 0||te.call(H),V.triggerEdit(!1)},V.onCopyClick=function(H){H.preventDefault();var te=V.props,ie=te.children,le=te.copyable,ue=Object(Ne.a)({},Object(va.a)(le)==="object"?le:null);ue.text===void 0&&(ue.text=String(ie)),nv()(ue.text||""),V.setState({copied:!0},function(){ue.onCopy&&ue.onCopy(),V.copyId=window.setTimeout(function(){V.setState({copied:!1})},3e3)})},V.setEditRef=function(H){V.editIcon=H},V.triggerEdit=function(H){var te=V.getEditable(),ie=te.onStart;H&&ie&&ie(),V.setState({edit:H},function(){!H&&V.editIcon&&V.editIcon.focus()})},V.resizeOnNextFrame=function(){Jp.a.cancel(V.rafId),V.rafId=Object(Jp.a)(function(){V.syncEllipsis()})},V}return Object(fa.a)($,[{key:"componentDidMount",value:function(){this.setState({clientRendered:!0}),this.resizeOnNextFrame()}},{key:"componentDidUpdate",value:function(H){var te=this.props.children,ie=this.getEllipsis(),le=this.getEllipsis(H);(te!==H.children||ie.rows!==le.rows)&&this.resizeOnNextFrame()}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.copyId),Jp.a.cancel(this.rafId)}},{key:"getEditable",value:function(H){var te=this.state.edit,ie=H||this.props,le=ie.editable;return le?Object(Ne.a)({editing:te},Object(va.a)(le)==="object"?le:null):{editing:te}}},{key:"getEllipsis",value:function(H){var te=H||this.props,ie=te.ellipsis;return ie?Object(Ne.a)({rows:1,expandable:!1},Object(va.a)(ie)==="object"?ie:null):{}}},{key:"canUseCSSEllipsis",value:function(){var H=this.state.clientRendered,te=this.props,ie=te.editable,le=te.copyable,ue=this.getEllipsis(),we=ue.rows,Pe=ue.expandable,Re=ue.suffix,Ue=ue.onEllipsis,Ke=ue.tooltip;return Re||Ke||ie||le||Pe||!H||Ue?!1:we===1?qf:mc}},{key:"syncEllipsis",value:function(){var H=this.state,te=H.ellipsisText,ie=H.isEllipsis,le=H.expanded,ue=this.getEllipsis(),we=ue.rows,Pe=ue.suffix,Re=ue.onEllipsis,Ue=this.props.children;if(!(!we||we<0||!this.contentRef.current||le)&&!this.canUseCSSEllipsis()){Object($a.a)(Object(vs.a)(Ue).every(function(Ct){return typeof Ct=="string"}),"Typography","`ellipsis` should use string as children only.");var Ke=ta(this.contentRef.current,{rows:we,suffix:Pe},Ue,this.renderOperations(!0),qp),it=Ke.content,ut=Ke.text,rt=Ke.ellipsis;(te!==ut||ie!==rt)&&(this.setState({ellipsisText:ut,ellipsisContent:it,isEllipsis:rt}),ie!==rt&&Re&&Re(rt))}}},{key:"renderExpand",value:function(H){var te=this.getEllipsis(),ie=te.expandable,le=te.symbol,ue=this.state,we=ue.expanded,Pe=ue.isEllipsis;if(!ie||!H&&(we||!Pe))return null;var Re;return le?Re=le:Re=this.expandStr,Q.createElement("a",{key:"expand",className:"".concat(this.getPrefixCls(),"-expand"),onClick:this.onExpandClick,"aria-label":this.expandStr},Re)}},{key:"renderEdit",value:function(){var H=this.props.editable;if(!!H){var te=H.icon,ie=H.tooltip,le=Object(vs.a)(ie)[0]||this.editStr,ue=typeof le=="string"?le:"";return Q.createElement(jc.a,{key:"edit",title:ie===!1?"":le},Q.createElement(Hu.a,{ref:this.setEditRef,className:"".concat(this.getPrefixCls(),"-edit"),onClick:this.onEditClick,"aria-label":ue},te||Q.createElement(Gd,{role:"button"})))}}},{key:"renderCopy",value:function(){var H=this.state.copied,te=this.props.copyable;if(!!te){var ie=this.getPrefixCls(),le=te.tooltips,ue=te.icon,we=Array.isArray(le)?le:[le],Pe=Array.isArray(ue)?ue:[ue],Re=H?Wd(we[1],this.copiedStr):Wd(we[0],this.copyStr),Ue=H?this.copiedStr:this.copyStr,Ke=typeof Re=="string"?Re:Ue;return Q.createElement(jc.a,{key:"copy",title:Re},Q.createElement(Hu.a,{className:Lt()("".concat(ie,"-copy"),H&&"".concat(ie,"-copy-success")),onClick:this.onCopyClick,"aria-label":Ke},H?Wd(Pe[1],Q.createElement(Yp.a,null),!0):Wd(Pe[0],Q.createElement(Wg.a,null),!0)))}}},{key:"renderEditInput",value:function(){var H=this.props,te=H.children,ie=H.className,le=H.style,ue=this.context.direction,we=this.getEditable(),Pe=we.maxLength,Re=we.autoSize,Ue=we.onEnd;return Q.createElement(sv,{value:typeof te=="string"?te:"",onSave:this.onEditChange,onCancel:this.onEditCancel,onEnd:Ue,prefixCls:this.getPrefixCls(),className:ie,style:le,direction:ue,maxLength:Pe,autoSize:Re})}},{key:"renderOperations",value:function(H){return[this.renderExpand(H),this.renderEdit(),this.renderCopy()].filter(function(te){return te})}},{key:"renderContent",value:function(){var H=this,te=this.state,ie=te.ellipsisContent,le=te.isEllipsis,ue=te.expanded,we=this.props,Pe=we.component,Re=we.children,Ue=we.className,Ke=we.type,it=we.disabled,ut=we.style,rt=Kg(we,["component","children","className","type","disabled","style"]),Ct=this.context.direction,yt=this.getEllipsis(),Kt=yt.rows,ar=yt.suffix,er=yt.tooltip,Yt=this.getPrefixCls(),sr=Object(Er.a)(rt,["prefixCls","editable","copyable","ellipsis","mark","code","delete","underline","strong","keyboard","italic"].concat(Object(Ho.a)(jd.a))),jt=this.canUseCSSEllipsis(),gr=Kt===1&&jt,ir=Kt&&Kt>1&&jt,Pr=Re;if(Kt&&le&&!ue&&!jt){var Yr=rt.title,qt=Yr||"";!Yr&&(typeof Re=="string"||typeof Re=="number")&&(qt=String(Re)),qt=qt.slice(String(ie||"").length),Pr=Q.createElement(Q.Fragment,null,ie,Q.createElement("span",{title:qt,"aria-hidden":"true"},qp),ar),er&&(Pr=Q.createElement(jc.a,{title:er===!0?Re:er},Q.createElement("span",null,Pr)))}else Pr=Q.createElement(Q.Fragment,null,Re,ar);return Pr=vc(this.props,Pr),Q.createElement(Zf.a,{componentName:"Text"},function(xr){var cn,Cn=xr.edit,Gn=xr.copy,Wr=xr.copied,Jn=xr.expand;return H.editStr=Cn,H.copyStr=Gn,H.copiedStr=Wr,H.expandStr=Jn,Q.createElement(Il.a,{onResize:H.resizeOnNextFrame,disabled:jt},Q.createElement(hl,Object(Ne.a)({className:Lt()((cn={},Object(ce.a)(cn,"".concat(Yt,"-").concat(Ke),Ke),Object(ce.a)(cn,"".concat(Yt,"-disabled"),it),Object(ce.a)(cn,"".concat(Yt,"-ellipsis"),Kt),Object(ce.a)(cn,"".concat(Yt,"-single-line"),Kt===1),Object(ce.a)(cn,"".concat(Yt,"-ellipsis-single-line"),gr),Object(ce.a)(cn,"".concat(Yt,"-ellipsis-multiple-line"),ir),cn),Ue),style:Object(Ne.a)(Object(Ne.a)({},ut),{WebkitLineClamp:ir?Kt:void 0}),component:Pe,ref:H.contentRef,direction:Ct},sr),Pr,H.renderOperations()))})}},{key:"render",value:function(){var H=this.getEditable(),te=H.editing;return te?this.renderEditInput():this.renderContent()}}],[{key:"getDerivedStateFromProps",value:function(H){var te=H.children,ie=H.editable;return Object($a.a)(!ie||typeof te=="string","Typography","When `editable` is enabled, the `children` should use string."),{}}}]),$}(Q.Component);qh.contextType=xe.b,qh.defaultProps={children:""};var Vc=qh,Xd=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},cv=function(J){var $=J.ellipsis,V=Xd(J,["ellipsis"]),H=Q.useMemo(function(){return $&&Object(va.a)($)==="object"?Object(Er.a)($,["expandable","rows"]):$},[$]);return Object($a.a)(Object(va.a)($)!=="object"||!$||!("expandable"in $)&&!("rows"in $),"Typography.Text","`ellipsis` do not support `expandable` or `rows` props."),Q.createElement(Vc,Object(Ne.a)({},V,{ellipsis:H,component:"span"}))},h0=cv,ra=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},Mi=function(J,$){var V=J.ellipsis,H=J.rel,te=ra(J,["ellipsis","rel"]);Object($a.a)(Object(va.a)(V)!=="object","Typography.Link","`ellipsis` only supports boolean value.");var ie=Q.useRef(null);Q.useImperativeHandle($,function(){var ue;return(ue=ie.current)===null||ue===void 0?void 0:ue.contentRef.current});var le=Object(Ne.a)(Object(Ne.a)({},te),{rel:H===void 0&&te.target==="_blank"?"noopener noreferrer":H});return delete le.navigate,Q.createElement(Vc,Object(Ne.a)({},le,{ref:ie,ellipsis:!!V,component:"a"}))},Qf=Q.forwardRef(Mi),hv=Ae("CWQg"),f0=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},Qp=Object(hv.b)(1,2,3,4,5),fv=function(J){var $=J.level,V=$===void 0?1:$,H=f0(J,["level"]),te;return Qp.indexOf(V)!==-1?te="h".concat(V):(Object($a.a)(!1,"Typography.Title","Title only accept `1 | 2 | 3 | 4 | 5` as `level` value. And `5` need 4.6.0+ version."),te="h1"),Q.createElement(Vc,Object(Ne.a)({},H,{component:te}))},Yd=fv,d0=function(J){return Q.createElement(Vc,Object(Ne.a)({},J,{component:"div"}))},Qh=d0,du=hl;du.Text=h0,du.Link=Qf,du.Title=Yd,du.Paragraph=Qh;var $f=du,$h=Ae("pED+"),ed=Ae("R9oj"),Bs=Ae("7Kak"),zs=Ae("sRBo"),Ha=Ae("qVdP"),yc=Ae("T2oS"),so=Ae("DjyN"),jo=Ae("x/xZ"),Zd=Ae("Gytx"),$p=Ae.n(Zd),fl=Ae("Kwbf"),Gu=Ae("qx4F");function Us(j){return null}var El=Us;function pu(j){return null}var gu=pu,Xr="RC_TABLE_KEY";function Wc(j){return j==null?[]:Array.isArray(j)?j:[j]}function Xc(j,J){if(!J&&typeof J!="number")return j;for(var $=Wc(J),V=j,H=0;H<$.length;H+=1){if(!V)return null;var te=$[H];V=V[te]}return V}function ef(j){var J=[],$={};return j.forEach(function(V){for(var H=V||{},te=H.key,ie=H.dataIndex,le=te||Wc(ie).join("-")||Xr;$[le];)le="".concat(le,"_next");$[le]=!0,J.push(le)}),J}function Fa(){var j={};function J(te,ie){ie&&Object.keys(ie).forEach(function(le){var ue=ie[le];ue&&Object(va.a)(ue)==="object"?(te[le]=te[le]||{},J(te[le],ue)):te[le]=ue})}for(var $=arguments.length,V=new Array($),H=0;H<$;H++)V[H]=arguments[H];return V.forEach(function(te){J(j,te)}),j}function Yi(j){return j!=null}var ks=["colSpan","rowSpan","style","className"];function da(j){return j&&Object(va.a)(j)==="object"&&!Array.isArray(j)&&!Q.isValidElement(j)}function Kd(j){return typeof j=="string"?!0:Object(Zp.c)(j)}function mu(j,J){var $,V=j.prefixCls,H=j.className,te=j.record,ie=j.index,le=j.dataIndex,ue=j.render,we=j.children,Pe=j.component,Re=Pe===void 0?"td":Pe,Ue=j.colSpan,Ke=j.rowSpan,it=j.fixLeft,ut=j.fixRight,rt=j.firstFixLeft,Ct=j.lastFixLeft,yt=j.firstFixRight,Kt=j.lastFixRight,ar=j.appendNode,er=j.additionalProps,Yt=er===void 0?{}:er,sr=j.ellipsis,jt=j.align,gr=j.rowType,ir=j.isSticky,Pr="".concat(V,"-cell"),Yr,qt;if(we)qt=we;else{var xr=Xc(te,le);if(qt=xr,ue){var cn=ue(xr,te,ie);da(cn)?(qt=cn.children,Yr=cn.props):qt=cn}}Object(va.a)(qt)==="object"&&!Array.isArray(qt)&&!Q.isValidElement(qt)&&(qt=null),sr&&(Ct||yt)&&(qt=Q.createElement("span",{className:"".concat(Pr,"-content")},qt));var Cn=Yr||{},Gn=Cn.colSpan,Wr=Cn.rowSpan,Jn=Cn.style,jn=Cn.className,Xn=Object(Jr.a)(Cn,ks),Wi=Gn!==void 0?Gn:Ue,Ai=Wr!==void 0?Wr:Ke;if(Wi===0||Ai===0)return null;var Oi={},Ji=typeof it=="number",En=typeof ut=="number";Ji&&(Oi.position="sticky",Oi.left=it),En&&(Oi.position="sticky",Oi.right=ut);var $i={};jt&&($i.textAlign=jt);var no,Ao=sr===!0?{showTitle:!0}:sr;Ao&&(Ao.showTitle||gr==="header")&&(typeof qt=="string"||typeof qt=="number"?no=qt.toString():Q.isValidElement(qt)&&typeof qt.props.children=="string"&&(no=qt.props.children));var ua=Object(wr.a)(Object(wr.a)(Object(wr.a)({title:no},Xn),Yt),{},{colSpan:Wi&&Wi!==1?Wi:null,rowSpan:Ai&&Ai!==1?Ai:null,className:Lt()(Pr,H,($={},Object(ce.a)($,"".concat(Pr,"-fix-left"),Ji),Object(ce.a)($,"".concat(Pr,"-fix-left-first"),rt),Object(ce.a)($,"".concat(Pr,"-fix-left-last"),Ct),Object(ce.a)($,"".concat(Pr,"-fix-right"),En),Object(ce.a)($,"".concat(Pr,"-fix-right-first"),yt),Object(ce.a)($,"".concat(Pr,"-fix-right-last"),Kt),Object(ce.a)($,"".concat(Pr,"-ellipsis"),sr),Object(ce.a)($,"".concat(Pr,"-with-append"),ar),Object(ce.a)($,"".concat(Pr,"-fix-sticky"),(Ji||En)&&ir),$),Yt.className,jn),style:Object(wr.a)(Object(wr.a)(Object(wr.a)(Object(wr.a)({},Yt.style),$i),Oi),Jn),ref:Kd(Re)?J:null});return Q.createElement(Re,ua,ar,qt)}var Mh=Q.forwardRef(mu);Mh.displayName="Cell";var vi=Q.memo(Mh,function(j,J){return J.shouldCellUpdate?!J.shouldCellUpdate(J.record,j.record):!1}),Ps=vi,Jd=Q.createContext(null),Ma=Jd;function td(j,J,$,V,H){var te=$[j]||{},ie=$[J]||{},le,ue;te.fixed==="left"?le=V.left[j]:ie.fixed==="right"&&(ue=V.right[J]);var we=!1,Pe=!1,Re=!1,Ue=!1,Ke=$[J+1],it=$[j-1];if(H==="rtl"){if(le!==void 0){var ut=it&&it.fixed==="left";Ue=!ut}else if(ue!==void 0){var rt=Ke&&Ke.fixed==="right";Re=!rt}}else if(le!==void 0){var Ct=Ke&&Ke.fixed==="left";we=!Ct}else if(ue!==void 0){var yt=it&&it.fixed==="right";Pe=!yt}return{fixLeft:le,fixRight:ue,lastFixLeft:we,firstFixRight:Pe,lastFixRight:Re,firstFixLeft:Ue,isSticky:V.isSticky}}function xc(j){var J=j.cells,$=j.stickyOffsets,V=j.flattenColumns,H=j.rowComponent,te=j.cellComponent,ie=j.onHeaderRow,le=j.index,ue=Q.useContext(Ma),we=ue.prefixCls,Pe=ue.direction,Re;ie&&(Re=ie(J.map(function(Ke){return Ke.column}),le));var Ue=ef(J.map(function(Ke){return Ke.column}));return Q.createElement(H,Re,J.map(function(Ke,it){var ut=Ke.column,rt=td(Ke.colStart,Ke.colEnd,V,$,Pe),Ct;return ut&&ut.onHeaderCell&&(Ct=Ke.column.onHeaderCell(ut)),Q.createElement(Ps,Object(Ne.a)({},Ke,{ellipsis:ut.ellipsis,align:ut.align,component:te,prefixCls:we,key:Ue[it]},rt,{additionalProps:Ct,rowType:"header"}))}))}xc.displayName="HeaderRow";var nn=xc;function Sh(j){var J=[];function $(ie,le){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;J[ue]=J[ue]||[];var we=le,Pe=ie.filter(Boolean).map(function(Re){var Ue={key:Re.key,className:Re.className||"",children:Re.title,column:Re,colStart:we},Ke=1,it=Re.children;return it&&it.length>0&&(Ke=$(it,we,ue+1).reduce(function(ut,rt){return ut+rt},0),Ue.hasSubColumns=!0),"colSpan"in Re&&(Ke=Re.colSpan),"rowSpan"in Re&&(Ue.rowSpan=Re.rowSpan),Ue.colSpan=Ke,Ue.colEnd=Ue.colStart+Ke-1,J[ue].push(Ue),we+=Ke,Ke});return Pe}$(j,0);for(var V=J.length,H=function(le){J[le].forEach(function(ue){!("rowSpan"in ue)&&!ue.hasSubColumns&&(ue.rowSpan=V-le)})},te=0;te<V;te+=1)H(te);return J}function rd(j){var J=j.stickyOffsets,$=j.columns,V=j.flattenColumns,H=j.onHeaderRow,te=Q.useContext(Ma),ie=te.prefixCls,le=te.getComponent,ue=Q.useMemo(function(){return Sh($)},[$]),we=le(["header","wrapper"],"thead"),Pe=le(["header","row"],"tr"),Re=le(["header","cell"],"th");return Q.createElement(we,{className:"".concat(ie,"-thead")},ue.map(function(Ue,Ke){var it=Q.createElement(nn,{key:Ke,flattenColumns:V,cells:Ue,stickyOffsets:J,rowComponent:Pe,cellComponent:Re,onHeaderRow:H,index:Ke});return it}))}var Ci=rd,Jo=Q.createContext(null),Yc=Jo;function on(j){var J=j.prefixCls,$=j.children,V=j.component,H=j.cellComponent,te=j.fixHeader,ie=j.fixColumn,le=j.horizonScroll,ue=j.className,we=j.expanded,Pe=j.componentWidth,Re=j.colSpan,Ue=Q.useContext(Ma),Ke=Ue.scrollbarSize;return Q.useMemo(function(){var it=$;return ie&&(it=Q.createElement("div",{style:{width:Pe-(te?Ke:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(J,"-expanded-row-fixed")},it)),Q.createElement(V,{className:ue,style:{display:we?null:"none"}},Q.createElement(Ps,{component:H,prefixCls:J,colSpan:Re},it))},[$,V,te,le,ue,we,Pe,Re,Ke])}var Rs=on;function nd(j){var J=j.className,$=j.style,V=j.record,H=j.index,te=j.rowKey,ie=j.getRowKey,le=j.rowExpandable,ue=j.expandedKeys,we=j.onRow,Pe=j.indent,Re=Pe===void 0?0:Pe,Ue=j.rowComponent,Ke=j.cellComponent,it=j.childrenColumnName,ut=Q.useContext(Ma),rt=ut.prefixCls,Ct=ut.fixedInfoList,yt=Q.useContext(Yc),Kt=yt.fixHeader,ar=yt.fixColumn,er=yt.horizonScroll,Yt=yt.componentWidth,sr=yt.flattenColumns,jt=yt.expandableType,gr=yt.expandRowByClick,ir=yt.onTriggerExpand,Pr=yt.rowClassName,Yr=yt.expandedRowClassName,qt=yt.indentSize,xr=yt.expandIcon,cn=yt.expandedRowRender,Cn=yt.expandIconColumnIndex,Gn=Q.useState(!1),Wr=Object(Go.a)(Gn,2),Jn=Wr[0],jn=Wr[1],Xn=ue&&ue.has(j.recordKey);Q.useEffect(function(){Xn&&jn(!0)},[Xn]);var Wi=jt==="row"&&(!le||le(V)),Ai=jt==="nest",Oi=it&&V&&V[it],Ji=Wi||Ai,En;we&&(En=we(V,H));var $i=function(Po){if(gr&&Ji&&ir(V,Po),En&&En.onClick){for(var _o,Ii=arguments.length,qn=new Array(Ii>1?Ii-1:0),Di=1;Di<Ii;Di++)qn[Di-1]=arguments[Di];(_o=En).onClick.apply(_o,[Po].concat(qn))}},no;typeof Pr=="string"?no=Pr:typeof Pr=="function"&&(no=Pr(V,H,Re));var Ao=ef(sr),ua=Q.createElement(Ue,Object(Ne.a)({},En,{"data-row-key":te,className:Lt()(J,"".concat(rt,"-row"),"".concat(rt,"-row-level-").concat(Re),no,En&&En.className),style:Object(wr.a)(Object(wr.a)({},$),En?En.style:null),onClick:$i}),sr.map(function(wo,Po){var _o=wo.render,Ii=wo.dataIndex,qn=wo.className,Di=Ao[Po],Vn=Ct[Po],Yn;Po===(Cn||0)&&Ai&&(Yn=Q.createElement(Q.Fragment,null,Q.createElement("span",{style:{paddingLeft:"".concat(qt*Re,"px")},className:"".concat(rt,"-row-indent indent-level-").concat(Re)}),xr({prefixCls:rt,expanded:Xn,expandable:Oi,record:V,onExpand:ir})));var fn;return wo.onCell&&(fn=wo.onCell(V,H)),Q.createElement(Ps,Object(Ne.a)({className:qn,ellipsis:wo.ellipsis,align:wo.align,component:Ke,prefixCls:rt,key:Di,record:V,index:H,dataIndex:Ii,render:_o,shouldCellUpdate:wo.shouldCellUpdate},Vn,{appendNode:Yn,additionalProps:fn}))})),ji;if(Wi&&(Jn||Xn)){var ii=cn(V,H,Re+1,Xn),Ti=Yr&&Yr(V,H,Re);ji=Q.createElement(Rs,{expanded:Xn,className:Lt()("".concat(rt,"-expanded-row"),"".concat(rt,"-expanded-row-level-").concat(Re+1),Ti),prefixCls:rt,fixHeader:Kt,fixColumn:ar,horizonScroll:er,component:Ue,componentWidth:Yt,cellComponent:Ke,colSpan:sr.length},ii)}var Co;return Oi&&Xn&&(Co=(V[it]||[]).map(function(wo,Po){var _o=ie(wo,Po);return Q.createElement(nd,Object(Ne.a)({},j,{key:_o,rowKey:_o,record:wo,recordKey:_o,index:Po,indent:Re+1}))})),Q.createElement(Q.Fragment,null,ua,ji,Co)}nd.displayName="BodyRow";var id=nd,od=Q.createContext(null),tf=od;function Zc(j){var J=j.columnKey,$=j.onColumnResize,V=Q.useRef();return Q.useEffect(function(){V.current&&$(J,V.current.offsetWidth)},[]),Q.createElement(Il.a,{onResize:function(te){var ie=te.offsetWidth;$(J,ie)}},Q.createElement("td",{ref:V,style:{padding:0,border:0,height:0}},Q.createElement("div",{style:{height:0,overflow:"hidden"}},"\xA0")))}function bl(j){var J=j.data,$=j.getRowKey,V=j.measureColumnWidth,H=j.expandedKeys,te=j.onRow,ie=j.rowExpandable,le=j.emptyNode,ue=j.childrenColumnName,we=Q.useContext(tf),Pe=we.onColumnResize,Re=Q.useContext(Ma),Ue=Re.prefixCls,Ke=Re.getComponent,it=Q.useContext(Yc),ut=it.fixHeader,rt=it.horizonScroll,Ct=it.flattenColumns,yt=it.componentWidth;return Q.useMemo(function(){var Kt=Ke(["body","wrapper"],"tbody"),ar=Ke(["body","row"],"tr"),er=Ke(["body","cell"],"td"),Yt;J.length?Yt=J.map(function(jt,gr){var ir=$(jt,gr);return Q.createElement(id,{key:ir,rowKey:ir,record:jt,recordKey:ir,index:gr,rowComponent:ar,cellComponent:er,expandedKeys:H,onRow:te,getRowKey:$,rowExpandable:ie,childrenColumnName:ue})}):Yt=Q.createElement(Rs,{expanded:!0,className:"".concat(Ue,"-placeholder"),prefixCls:Ue,fixHeader:ut,fixColumn:rt,horizonScroll:rt,component:ar,componentWidth:yt,cellComponent:er,colSpan:Ct.length},le);var sr=ef(Ct);return Q.createElement(Kt,{className:"".concat(Ue,"-tbody")},V&&Q.createElement("tr",{"aria-hidden":"true",className:"".concat(Ue,"-measure-row"),style:{height:0,fontSize:0}},sr.map(function(jt){return Q.createElement(Zc,{key:jt,columnKey:jt,onColumnResize:Pe})})),Yt)},[J,Ue,te,V,H,$,Ke,yt,le,Ct])}var vu=Q.memo(bl);vu.displayName="Body";var Ea=vu,qd=["expandable"],Ac="RC_TABLE_INTERNAL_COL_DEFINE";function Cc(j){var J=j.expandable,$=Object(Jr.a)(j,qd);return"expandable"in j?Object(wr.a)(Object(wr.a)({},$),J):$}function wc(j){return Object.keys(j).reduce(function(J,$){return($.substr(0,5)==="data-"||$.substr(0,5)==="aria-")&&(J[$]=j[$]),J},{})}var Qd=["children"],$d=["fixed"];function rf(j){return Object(vs.a)(j).filter(function(J){return Q.isValidElement(J)}).map(function(J){var $=J.key,V=J.props,H=V.children,te=Object(Jr.a)(V,Qd),ie=Object(wr.a)({key:$},te);return H&&(ie.children=rf(H)),ie})}function Jg(j){return j.reduce(function(J,$){var V=$.fixed,H=V===!0?"left":V,te=$.children;return te&&te.length>0?[].concat(Object(Ho.a)(J),Object(Ho.a)(Jg(te).map(function(ie){return Object(wr.a)({fixed:H},ie)}))):[].concat(Object(Ho.a)(J),[Object(wr.a)(Object(wr.a)({},$),{},{fixed:H})])},[])}function ep(j){for(var J=!0,$=0;$<j.length;$+=1){var V=j[$];if(J&&V.fixed!=="left")J=!1;else if(!J&&V.fixed==="left"){Object(fl.a)(!1,"Index ".concat($-1," of `columns` missing `fixed='left'` prop."));break}}for(var H=!0,te=j.length-1;te>=0;te-=1){var ie=j[te];if(H&&ie.fixed!=="right")H=!1;else if(!H&&ie.fixed==="right"){Object(fl.a)(!1,"Index ".concat(te+1," of `columns` missing `fixed='right'` prop."));break}}}function Ql(j){return j.map(function(J){var $=J.fixed,V=Object(Jr.a)(J,$d),H=$;return $==="left"?H="right":$==="right"&&(H="left"),Object(wr.a)({fixed:H},V)})}function dl(j,J){var $=j.prefixCls,V=j.columns,H=j.children,te=j.expandable,ie=j.expandedKeys,le=j.getRowKey,ue=j.onTriggerExpand,we=j.expandIcon,Pe=j.rowExpandable,Re=j.expandIconColumnIndex,Ue=j.direction,Ke=j.expandRowByClick,it=j.columnWidth,ut=j.fixed,rt=Q.useMemo(function(){return V||rf(H)},[V,H]),Ct=Q.useMemo(function(){if(te){var ar,er=Re||0,Yt=rt[er],sr;(ut==="left"||ut)&&!Re?sr="left":(ut==="right"||ut)&&Re===rt.length?sr="right":sr=Yt?Yt.fixed:null;var jt=(ar={},Object(ce.a)(ar,Ac,{className:"".concat($,"-expand-icon-col")}),Object(ce.a)(ar,"title",""),Object(ce.a)(ar,"fixed",sr),Object(ce.a)(ar,"className","".concat($,"-row-expand-icon-cell")),Object(ce.a)(ar,"width",it),Object(ce.a)(ar,"render",function(Pr,Yr,qt){var xr=le(Yr,qt),cn=ie.has(xr),Cn=Pe?Pe(Yr):!0,Gn=we({prefixCls:$,expanded:cn,expandable:Cn,record:Yr,onExpand:ue});return Ke?Q.createElement("span",{onClick:function(Jn){return Jn.stopPropagation()}},Gn):Gn}),ar),gr=rt.slice();return er>=0&&gr.splice(er,0,jt),gr}return rt},[te,rt,le,ie,we,Ue]),yt=Q.useMemo(function(){var ar=Ct;return J&&(ar=J(ar)),ar.length||(ar=[{render:function(){return null}}]),ar},[J,Ct,Ue]),Kt=Q.useMemo(function(){return Ue==="rtl"?Ql(Jg(yt)):Jg(yt)},[yt,Ue]);return[yt,Kt]}var aa=dl;function nf(j){var J=Object(Q.useRef)(j),$=Object(Q.useState)({}),V=Object(Go.a)($,2),H=V[1],te=Object(Q.useRef)(null),ie=Object(Q.useRef)([]);function le(ue){ie.current.push(ue);var we=Promise.resolve();te.current=we,we.then(function(){if(te.current===we){var Pe=ie.current,Re=J.current;ie.current=[],Pe.forEach(function(Ue){J.current=Ue(J.current)}),te.current=null,Re!==J.current&&H({})}})}return Object(Q.useEffect)(function(){return function(){te.current=null}},[]),[J.current,le]}function tp(j){var J=Object(Q.useRef)(j||null),$=Object(Q.useRef)();function V(){window.clearTimeout($.current)}function H(ie){J.current=ie,V(),$.current=window.setTimeout(function(){J.current=null,$.current=void 0},100)}function te(){return J.current}return Object(Q.useEffect)(function(){return V},[]),[H,te]}function ad(j,J,$){var V=Object(Q.useMemo)(function(){for(var H=[],te=[],ie=0,le=0,ue=0;ue<J;ue+=1)if($==="rtl"){te[ue]=le,le+=j[ue]||0;var we=J-ue-1;H[we]=ie,ie+=j[we]||0}else{H[ue]=ie,ie+=j[ue]||0;var Pe=J-ue-1;te[Pe]=le,le+=j[Pe]||0}return{left:H,right:te}},[j,J,$]);return V}var rp=ad;function of(j){for(var J=j.colWidths,$=j.columns,V=j.columCount,H=[],te=V||$.length,ie=!1,le=te-1;le>=0;le-=1){var ue=J[le],we=$&&$[le],Pe=we&&we[Ac];(ue||Pe||ie)&&(H.unshift(Q.createElement("col",Object(Ne.a)({key:le,style:{width:ue}},Pe))),ie=!0)}return Q.createElement("colgroup",null,H)}var sd=of;function dv(j){var J=j.className,$=j.children;return Q.createElement("div",{className:J},$)}var pl=dv;function ld(j){var J=j.className,$=j.index,V=j.children,H=j.colSpan,te=H===void 0?1:H,ie=j.rowSpan,le=j.align,ue=Q.useContext(Ma),we=ue.prefixCls,Pe=ue.direction,Re=Q.useContext(af),Ue=Re.scrollColumnIndex,Ke=Re.stickyOffsets,it=Re.flattenColumns,ut=$+te-1,rt=ut+1===Ue?te+1:te,Ct=td($,$+rt-1,it,Ke,Pe);return Q.createElement(Ps,Object(Ne.a)({className:J,index:$,component:"td",prefixCls:we,record:null,dataIndex:null,align:le,render:function(){return{children:V,props:{colSpan:rt,rowSpan:ie}}}},Ct))}var pv=["children"];function ud(j){var J=j.children,$=Object(Jr.a)(j,pv);return Q.createElement("tr",$,J)}function ju(j){var J=j.children;return J}ju.Row=ud,ju.Cell=ld;var Hs=ju,af=Q.createContext({});function np(j){var J=j.children,$=j.stickyOffsets,V=j.flattenColumns,H=Q.useContext(Ma),te=H.prefixCls,ie=V.length-1,le=V[ie],ue=Q.useMemo(function(){return{stickyOffsets:$,flattenColumns:V,scrollColumnIndex:(le==null?void 0:le.scrollbar)?ie:null}},[le,V,ie,$]);return Q.createElement(af.Provider,{value:ue},Q.createElement("tfoot",{className:"".concat(te,"-summary")},J))}var sf=np,cd=Hs;function yu(j){var J,$=j.prefixCls,V=j.record,H=j.onExpand,te=j.expanded,ie=j.expandable,le="".concat($,"-row-expand-icon");if(!ie)return Q.createElement("span",{className:Lt()(le,"".concat($,"-row-spaced"))});var ue=function(Pe){H(V,Pe),Pe.stopPropagation()};return Q.createElement("span",{className:Lt()(le,(J={},Object(ce.a)(J,"".concat($,"-row-expanded"),te),Object(ce.a)(J,"".concat($,"-row-collapsed"),!te),J)),onClick:ue})}function gl(j,J,$){var V=[];function H(te){(te||[]).forEach(function(ie,le){V.push(J(ie,le)),H(ie[$])})}return H(j),V}var xu=Ae("zT1h"),ip=Ae("y0+3"),hd=function(J,$){var V,H,te=J.scrollBodyRef,ie=J.onScroll,le=J.offsetScroll,ue=J.container,we=Q.useContext(Ma),Pe=we.prefixCls,Re=((V=te.current)===null||V===void 0?void 0:V.scrollWidth)||0,Ue=((H=te.current)===null||H===void 0?void 0:H.clientWidth)||0,Ke=Re&&Ue*(Ue/Re),it=Q.useRef(),ut=nf({scrollLeft:0,isHiddenScrollBar:!1}),rt=Object(Go.a)(ut,2),Ct=rt[0],yt=rt[1],Kt=Q.useRef({delta:0,x:0}),ar=Q.useState(!1),er=Object(Go.a)(ar,2),Yt=er[0],sr=er[1],jt=function(){sr(!1)},gr=function(xr){xr.persist(),Kt.current.delta=xr.pageX-Ct.scrollLeft,Kt.current.x=0,sr(!0),xr.preventDefault()},ir=function(xr){var cn,Cn=xr||((cn=window)===null||cn===void 0?void 0:cn.event),Gn=Cn.buttons;if(!Yt||Gn===0){Yt&&sr(!1);return}var Wr=Kt.current.x+xr.pageX-Kt.current.x-Kt.current.delta;Wr<=0&&(Wr=0),Wr+Ke>=Ue&&(Wr=Ue-Ke),ie({scrollLeft:Wr/Ue*(Re+2)}),Kt.current.x=xr.pageX},Pr=function(){var xr=Object(ip.b)(te.current).top,cn=xr+te.current.offsetHeight,Cn=ue===window?document.documentElement.scrollTop+window.innerHeight:Object(ip.b)(ue).top+ue.clientHeight;cn-Object(Gu.a)()<=Cn||xr>=Cn-le?yt(function(Gn){return Object(wr.a)(Object(wr.a)({},Gn),{},{isHiddenScrollBar:!0})}):yt(function(Gn){return Object(wr.a)(Object(wr.a)({},Gn),{},{isHiddenScrollBar:!1})})},Yr=function(xr){yt(function(cn){return Object(wr.a)(Object(wr.a)({},cn),{},{scrollLeft:xr/Re*Ue||0})})};return Q.useImperativeHandle($,function(){return{setScrollLeft:Yr}}),Q.useEffect(function(){var qt=Object(xu.a)(document.body,"mouseup",jt,!1),xr=Object(xu.a)(document.body,"mousemove",ir,!1);return Pr(),function(){qt.remove(),xr.remove()}},[Ke,Yt]),Q.useEffect(function(){var qt=Object(xu.a)(ue,"scroll",Pr,!1),xr=Object(xu.a)(window,"resize",Pr,!1);return function(){qt.remove(),xr.remove()}},[ue]),Q.useEffect(function(){Ct.isHiddenScrollBar||yt(function(qt){var xr=te.current;return xr?Object(wr.a)(Object(wr.a)({},qt),{},{scrollLeft:xr.scrollLeft/xr.scrollWidth*xr.clientWidth}):qt})},[Ct.isHiddenScrollBar]),Re<=Ue||!Ke||Ct.isHiddenScrollBar?null:Q.createElement("div",{style:{height:Object(Gu.a)(),width:Ue,bottom:le},className:"".concat(Pe,"-sticky-scroll")},Q.createElement("div",{onMouseDown:gr,ref:it,className:Lt()("".concat(Pe,"-sticky-scroll-bar"),Object(ce.a)({},"".concat(Pe,"-sticky-scroll-bar-active"),Yt)),style:{width:"".concat(Ke,"px"),transform:"translate3d(".concat(Ct.scrollLeft,"px, 0, 0)")}}))},Au=Q.forwardRef(hd),lf=Ae("MNnm"),Qs=Object(lf.a)()?window:null;function _c(j,J){var $=Object(va.a)(j)==="object"?j:{},V=$.offsetHeader,H=V===void 0?0:V,te=$.offsetSummary,ie=te===void 0?0:te,le=$.offsetScroll,ue=le===void 0?0:le,we=$.getContainer,Pe=we===void 0?function(){return Qs}:we,Re=Pe()||Qs;return Q.useMemo(function(){var Ue=!!j;return{isSticky:Ue,stickyClassName:Ue?"".concat(J,"-sticky-holder"):"",offsetHeader:H,offsetSummary:ie,offsetScroll:ue,container:Re}},[ue,H,ie,J,Re])}var dt=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];function zt(j,J){return Object(Q.useMemo)(function(){for(var $=[],V=0;V<J;V+=1){var H=j[V];if(H!==void 0)$[V]=H;else return null}return $},[j.join("_"),J])}var Nt=Q.forwardRef(function(j,J){var $=j.className,V=j.noData,H=j.columns,te=j.flattenColumns,ie=j.colWidths,le=j.columCount,ue=j.stickyOffsets,we=j.direction,Pe=j.fixHeader,Re=j.stickyTopOffset,Ue=j.stickyBottomOffset,Ke=j.stickyClassName,it=j.onScroll,ut=j.maxContentScroll,rt=j.children,Ct=Object(Jr.a)(j,dt),yt=Q.useContext(Ma),Kt=yt.prefixCls,ar=yt.scrollbarSize,er=yt.isSticky,Yt=er&&!Pe?0:ar,sr=Q.useRef(null),jt=Q.useCallback(function(Cn){Object(Zp.b)(J,Cn),Object(Zp.b)(sr,Cn)},[]);Q.useEffect(function(){var Cn;function Gn(Wr){var Jn=Wr.currentTarget,jn=Wr.deltaX;jn&&(it({currentTarget:Jn,scrollLeft:Jn.scrollLeft+jn}),Wr.preventDefault())}return(Cn=sr.current)===null||Cn===void 0||Cn.addEventListener("wheel",Gn),function(){var Wr;(Wr=sr.current)===null||Wr===void 0||Wr.removeEventListener("wheel",Gn)}},[]);var gr=Q.useMemo(function(){return te.every(function(Cn){return Cn.width>=0})},[te]),ir=te[te.length-1],Pr={fixed:ir?ir.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(Kt,"-cell-scrollbar")}}},Yr=Object(Q.useMemo)(function(){return Yt?[].concat(Object(Ho.a)(H),[Pr]):H},[Yt,H]),qt=Object(Q.useMemo)(function(){return Yt?[].concat(Object(Ho.a)(te),[Pr]):te},[Yt,te]),xr=Object(Q.useMemo)(function(){var Cn=ue.right,Gn=ue.left;return Object(wr.a)(Object(wr.a)({},ue),{},{left:we==="rtl"?[].concat(Object(Ho.a)(Gn.map(function(Wr){return Wr+Yt})),[0]):Gn,right:we==="rtl"?Cn:[].concat(Object(Ho.a)(Cn.map(function(Wr){return Wr+Yt})),[0]),isSticky:er})},[Yt,ue,er]),cn=zt(ie,le);return Q.createElement("div",{style:Object(wr.a)({overflow:"hidden"},er?{top:Re,bottom:Ue}:{}),ref:jt,className:Lt()($,Object(ce.a)({},Ke,!!Ke))},Q.createElement("table",{style:{tableLayout:"fixed",visibility:V||cn?null:"hidden"}},(!V||!ut||gr)&&Q.createElement(sd,{colWidths:cn?[].concat(Object(Ho.a)(cn),[Yt]):[],columCount:le+1,columns:qt}),rt(Object(wr.a)(Object(wr.a)({},Ct),{},{stickyOffsets:xr,columns:Yr,flattenColumns:qt}))))});Nt.displayName="FixedHolder";var un=Nt,Kn=[],Ri={},lo="rc-table-internal-hook",wi=Q.memo(function(j){var J=j.children;return J},function(j,J){return $p()(j.props,J.props)?j.pingLeft!==J.pingLeft||j.pingRight!==J.pingRight:!1});function Sa(j){var J,$=j.prefixCls,V=j.className,H=j.rowClassName,te=j.style,ie=j.data,le=j.rowKey,ue=j.scroll,we=j.tableLayout,Pe=j.direction,Re=j.title,Ue=j.footer,Ke=j.summary,it=j.id,ut=j.showHeader,rt=j.components,Ct=j.emptyText,yt=j.onRow,Kt=j.onHeaderRow,ar=j.internalHooks,er=j.transformColumns,Yt=j.internalRefs,sr=j.sticky,jt=ie||Kn,gr=!!jt.length,ir=Q.useMemo(function(){return Fa(rt,{})},[rt]),Pr=Q.useCallback(function(bi,vo){return Xc(ir,bi)||vo},[ir]),Yr=Q.useMemo(function(){return typeof le=="function"?le:function(bi){var vo=bi&&bi[le];return vo}},[le]),qt=Cc(j),xr=qt.expandIcon,cn=qt.expandedRowKeys,Cn=qt.defaultExpandedRowKeys,Gn=qt.defaultExpandAllRows,Wr=qt.expandedRowRender,Jn=qt.onExpand,jn=qt.onExpandedRowsChange,Xn=qt.expandRowByClick,Wi=qt.rowExpandable,Ai=qt.expandIconColumnIndex,Oi=qt.expandedRowClassName,Ji=qt.childrenColumnName,En=qt.indentSize,$i=xr||yu,no=Ji||"children",Ao=Q.useMemo(function(){return Wr?"row":j.expandable&&ar===lo&&j.expandable.__PARENT_RENDER_ICON__||jt.some(function(bi){return bi&&Object(va.a)(bi)==="object"&&bi[no]})?"nest":!1},[!!Wr,jt]),ua=Q.useState(function(){return Cn||(Gn?gl(jt,Yr,no):[])}),ji=Object(Go.a)(ua,2),ii=ji[0],Ti=ji[1],Co=Q.useMemo(function(){return new Set(cn||ii||[])},[cn,ii]),wo=Q.useCallback(function(bi){var vo=Yr(bi,jt.indexOf(bi)),Bo,jl=Co.has(vo);jl?(Co.delete(vo),Bo=Object(Ho.a)(Co)):Bo=[].concat(Object(Ho.a)(Co),[vo]),Ti(Bo),Jn&&Jn(!jl,bi),jn&&jn(Bo)},[Yr,Co,jt,Jn,jn]),Po=Q.useState(0),_o=Object(Go.a)(Po,2),Ii=_o[0],qn=_o[1],Di=aa(Object(wr.a)(Object(wr.a)(Object(wr.a)({},j),qt),{},{expandable:!!Wr,expandedKeys:Co,getRowKey:Yr,onTriggerExpand:wo,expandIcon:$i,expandIconColumnIndex:Ai,direction:Pe}),ar===lo?er:null),Vn=Object(Go.a)(Di,2),Yn=Vn[0],fn=Vn[1],Vo=Q.useMemo(function(){return{columns:Yn,flattenColumns:fn}},[Yn,fn]),rs=Q.useRef(),_s=Q.useRef(),ns=Q.useRef(),Uh=Q.useRef(),Xi=Q.useState(!1),wl=Object(Go.a)(Xi,2),gs=wl[0],Ei=wl[1],ca=Q.useState(!1),Mo=Object(Go.a)(ca,2),Na=Mo[0],ha=Mo[1],kl=nf(new Map),Ya=Object(Go.a)(kl,2),Hl=Ya[0],me=Ya[1],Za=ef(fn),co=Za.map(function(bi){return Hl.get(bi)}),xa=Q.useMemo(function(){return co},[co.join("_")]),Zr=rp(xa,fn.length,Pe),No=ue&&Yi(ue.y),Wo=ue&&Yi(ue.x)||Boolean(qt.fixed),Ce=Wo&&fn.some(function(bi){var vo=bi.fixed;return vo}),Pu=Q.useRef(),Ru=_c(sr,$),Ms=Ru.isSticky,kh=Ru.offsetHeader,Gl=Ru.offsetSummary,nc=Ru.offsetScroll,ol=Ru.stickyClassName,ph=Ru.container,al=Ke==null?void 0:Ke(jt),Ro=(No||Ms)&&Q.isValidElement(al)&&al.type===Hs&&al.props.fixed,Ou,gh,ic;No&&(gh={overflowY:"scroll",maxHeight:ue.y}),Wo&&(Ou={overflowX:"auto"},No||(gh={overflowY:"hidden"}),ic={width:ue.x===!0?"auto":ue.x,minWidth:"100%"});var Nf=Q.useCallback(function(bi,vo){Object(jo.a)(rs.current)&&me(function(Bo){if(Bo.get(bi)!==vo){var jl=new Map(Bo);return jl.set(bi,vo),jl}return Bo})},[]),go=tp(null),io=Object(Go.a)(go,2),oi=io[0],uu=io[1];function pa(bi,vo){!vo||(typeof vo=="function"?vo(bi):vo.scrollLeft!==bi&&(vo.scrollLeft=bi))}var mo=function(vo){var Bo=vo.currentTarget,jl=vo.scrollLeft,wm=Pe==="rtl",Ts=typeof jl=="number"?jl:Bo.scrollLeft,_m=Bo||Ri;if(!uu()||uu()===_m){var jh;oi(_m),pa(Ts,_s.current),pa(Ts,ns.current),pa(Ts,Uh.current),pa(Ts,(jh=Pu.current)===null||jh===void 0?void 0:jh.setScrollLeft)}if(Bo){var is=Bo.scrollWidth,ci=Bo.clientWidth;wm?(Ei(-Ts<is-ci),ha(-Ts>0)):(Ei(Ts>0),ha(Ts<is-ci))}},Hh=function(){ns.current&&mo({currentTarget:ns.current})},yi=function(vo){var Bo=vo.width;Bo!==Ii&&(Hh(),qn(rs.current?rs.current.offsetWidth:Bo))};Q.useEffect(function(){return Hh},[]),Q.useEffect(function(){Wo&&Hh()},[Wo]);var Am=Q.useState(0),Aa=Object(Go.a)(Am,2),bp=Aa[0],mh=Aa[1];Q.useEffect(function(){mh(Object(Gu.b)(ns.current).width)},[]),Q.useEffect(function(){ar===lo&&Yt&&(Yt.body.current=ns.current)});var Cg=Pr(["table"],"table"),Ed=Q.useMemo(function(){return we||(Ce?ue.x==="max-content"?"auto":"fixed":No||Ms||fn.some(function(bi){var vo=bi.ellipsis;return vo})?"fixed":"auto")},[No,Ce,fn,we,Ms]),Ss,ga={colWidths:xa,columCount:fn.length,stickyOffsets:Zr,onHeaderRow:Kt,fixHeader:No,scroll:ue},bd=Q.useMemo(function(){return gr?null:typeof Ct=="function"?Ct():Ct},[gr,Ct]),Bi=Q.createElement(Ea,{data:jt,measureColumnWidth:No||Wo||Ms,expandedKeys:Co,rowExpandable:Wi,getRowKey:Yr,onRow:yt,emptyNode:bd,childrenColumnName:no}),vh=Q.createElement(sd,{colWidths:fn.map(function(bi){var vo=bi.width;return vo}),columns:fn}),Pc=Pr(["body"]);if(No||Ms){var wg;typeof Pc=="function"?(wg=Pc(jt,{scrollbarSize:bp,ref:ns,onScroll:mo}),ga.colWidths=fn.map(function(bi,vo){var Bo=bi.width,jl=vo===Yn.length-1?Bo-bp:Bo;return typeof jl=="number"&&!Number.isNaN(jl)?jl:(Object(fl.a)(!1,"When use `components.body` with render props. Each column should have a fixed `width` value."),0)})):wg=Q.createElement("div",{style:Object(wr.a)(Object(wr.a)({},Ou),gh),onScroll:mo,ref:ns,className:Lt()("".concat($,"-body"))},Q.createElement(Cg,{style:Object(wr.a)(Object(wr.a)({},ic),{},{tableLayout:Ed})},vh,Bi,!Ro&&al&&Q.createElement(sf,{stickyOffsets:Zr,flattenColumns:fn},al)));var Ld=Object(wr.a)(Object(wr.a)(Object(wr.a)({noData:!jt.length,maxContentScroll:Wo&&ue.x==="max-content"},ga),Vo),{},{direction:Pe,stickyClassName:ol,onScroll:mo});Ss=Q.createElement(Q.Fragment,null,ut!==!1&&Q.createElement(un,Object(Ne.a)({},Ld,{stickyTopOffset:kh,className:"".concat($,"-header"),ref:_s}),function(bi){return Q.createElement(Ci,bi)}),wg,Ro&&Q.createElement(un,Object(Ne.a)({},Ld,{stickyBottomOffset:Gl,className:"".concat($,"-summary"),ref:Uh}),function(bi){return Q.createElement(sf,bi,al)}),Ms&&Q.createElement(Au,{ref:Pu,offsetScroll:nc,scrollBodyRef:ns,onScroll:mo,container:ph}))}else Ss=Q.createElement("div",{style:Object(wr.a)(Object(wr.a)({},Ou),gh),className:Lt()("".concat($,"-content")),onScroll:mo,ref:ns},Q.createElement(Cg,{style:Object(wr.a)(Object(wr.a)({},ic),{},{tableLayout:Ed})},vh,ut!==!1&&Q.createElement(Ci,Object(Ne.a)({},ga,Vo)),Bi,al&&Q.createElement(sf,{stickyOffsets:Zr,flattenColumns:fn},al)));var Cm=wc(j),Gh=Q.createElement("div",Object(Ne.a)({className:Lt()($,V,(J={},Object(ce.a)(J,"".concat($,"-rtl"),Pe==="rtl"),Object(ce.a)(J,"".concat($,"-ping-left"),gs),Object(ce.a)(J,"".concat($,"-ping-right"),Na),Object(ce.a)(J,"".concat($,"-layout-fixed"),we==="fixed"),Object(ce.a)(J,"".concat($,"-fixed-header"),No),Object(ce.a)(J,"".concat($,"-fixed-column"),Ce),Object(ce.a)(J,"".concat($,"-scroll-horizontal"),Wo),Object(ce.a)(J,"".concat($,"-has-fix-left"),fn[0]&&fn[0].fixed),Object(ce.a)(J,"".concat($,"-has-fix-right"),fn[fn.length-1]&&fn[fn.length-1].fixed==="right"),J)),style:te,id:it,ref:rs},Cm),Q.createElement(wi,{pingLeft:gs,pingRight:Na,props:Object(wr.a)(Object(wr.a)({},j),{},{stickyOffsets:Zr,mergedExpandedKeys:Co})},Re&&Q.createElement(pl,{className:"".concat($,"-title")},Re(jt)),Q.createElement("div",{className:"".concat($,"-container")},Ss),Ue&&Q.createElement(pl,{className:"".concat($,"-footer")},Ue(jt))));Wo&&(Gh=Q.createElement(Il.a,{onResize:yi},Gh));var oc=Q.useMemo(function(){return{prefixCls:$,getComponent:Pr,scrollbarSize:bp,direction:Pe,fixedInfoList:fn.map(function(bi,vo){return td(vo,vo,fn,Zr,Pe)}),isSticky:Ms}},[$,Pr,bp,Pe,fn,Zr,Pe,Ms]),v0=Q.useMemo(function(){return Object(wr.a)(Object(wr.a)({},Vo),{},{tableLayout:Ed,rowClassName:H,expandedRowClassName:Oi,componentWidth:Ii,fixHeader:No,fixColumn:Ce,horizonScroll:Wo,expandIcon:$i,expandableType:Ao,expandRowByClick:Xn,expandedRowRender:Wr,onTriggerExpand:wo,expandIconColumnIndex:Ai,indentSize:En})},[Vo,Ed,H,Oi,Ii,No,Ce,Wo,$i,Ao,Xn,Wr,wo,Ai,En]),y0=Q.useMemo(function(){return{onColumnResize:Nf}},[Nf]);return Q.createElement(Ma.Provider,{value:oc},Q.createElement(Yc.Provider,{value:v0},Q.createElement(tf.Provider,{value:y0},Gh)))}Sa.Column=gu,Sa.ColumnGroup=El,Sa.Summary=cd,Sa.defaultProps={rowKey:"key",prefixCls:"rc-table",emptyText:function(){return"No Data"}};var Kc=Sa,Ga=Kc,Vu=Ae("W9HT"),uf=function(J){var $,V="".concat(J.rootPrefixCls,"-item"),H=Lt()(V,"".concat(V,"-").concat(J.page),($={},Object(ce.a)($,"".concat(V,"-active"),J.active),Object(ce.a)($,J.className,!!J.className),Object(ce.a)($,"".concat(V,"-disabled"),!J.page),$)),te=function(){J.onClick(J.page)},ie=function(ue){J.onKeyPress(ue,J.onClick,J.page)};return Oe.a.createElement("li",{title:J.showTitle?J.page:null,className:H,onClick:te,onKeyPress:ie,tabIndex:"0"},J.itemRender(J.page,"page",Oe.a.createElement("a",{rel:"nofollow"},J.page)))},Gs=uf,js={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},Wu=function(j){Object(Ja.a)($,j);var J=Object(ki.a)($);function $(){var V;Object(Tn.a)(this,$);for(var H=arguments.length,te=new Array(H),ie=0;ie<H;ie++)te[ie]=arguments[ie];return V=J.call.apply(J,[this].concat(te)),V.state={goInputText:""},V.buildOptionText=function(le){return"".concat(le," ").concat(V.props.locale.items_per_page)},V.changeSize=function(le){V.props.changeSize(Number(le))},V.handleChange=function(le){V.setState({goInputText:le.target.value})},V.handleBlur=function(le){var ue=V.props,we=ue.goButton,Pe=ue.quickGo,Re=ue.rootPrefixCls,Ue=V.state.goInputText;we||Ue===""||(V.setState({goInputText:""}),!(le.relatedTarget&&(le.relatedTarget.className.indexOf("".concat(Re,"-item-link"))>=0||le.relatedTarget.className.indexOf("".concat(Re,"-item"))>=0))&&Pe(V.getValidValue()))},V.go=function(le){var ue=V.state.goInputText;ue!==""&&(le.keyCode===js.ENTER||le.type==="click")&&(V.setState({goInputText:""}),V.props.quickGo(V.getValidValue()))},V}return Object(fa.a)($,[{key:"getValidValue",value:function(){var H=this.state.goInputText;return!H||isNaN(H)?void 0:Number(H)}},{key:"getPageSizeOptions",value:function(){var H=this.props,te=H.pageSize,ie=H.pageSizeOptions;return ie.some(function(le){return le.toString()===te.toString()})?ie:ie.concat([te.toString()]).sort(function(le,ue){var we=isNaN(Number(le))?0:Number(le),Pe=isNaN(Number(ue))?0:Number(ue);return we-Pe})}},{key:"render",value:function(){var H=this,te=this.props,ie=te.pageSize,le=te.locale,ue=te.rootPrefixCls,we=te.changeSize,Pe=te.quickGo,Re=te.goButton,Ue=te.selectComponentClass,Ke=te.buildOptionText,it=te.selectPrefixCls,ut=te.disabled,rt=this.state.goInputText,Ct="".concat(ue,"-options"),yt=Ue,Kt=null,ar=null,er=null;if(!we&&!Pe)return null;var Yt=this.getPageSizeOptions();if(we&&yt){var sr=Yt.map(function(jt,gr){return Oe.a.createElement(yt.Option,{key:gr,value:jt.toString()},(Ke||H.buildOptionText)(jt))});Kt=Oe.a.createElement(yt,{disabled:ut,prefixCls:it,showSearch:!1,className:"".concat(Ct,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(ie||Yt[0]).toString(),onChange:this.changeSize,getPopupContainer:function(gr){return gr.parentNode}},sr)}return Pe&&(Re&&(er=typeof Re=="boolean"?Oe.a.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:ut,className:"".concat(Ct,"-quick-jumper-button")},le.jump_to_confirm):Oe.a.createElement("span",{onClick:this.go,onKeyUp:this.go},Re)),ar=Oe.a.createElement("div",{className:"".concat(Ct,"-quick-jumper")},le.jump_to,Oe.a.createElement("input",{disabled:ut,type:"text",value:rt,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur}),le.page,er)),Oe.a.createElement("li",{className:"".concat(Ct)},Kt,ar)}}]),$}(Oe.a.Component);Wu.defaultProps={pageSizeOptions:["10","20","50","100"]};var Ni=Wu,eg=Ae("N2Kk");function Th(){}function cf(j){return typeof j=="number"&&isFinite(j)&&Math.floor(j)===j}function Vs(j,J,$){return $}function Xu(j,J,$){var V=typeof j=="undefined"?J.pageSize:j;return Math.floor(($.total-1)/V)+1}var op=function(j){Object(Ja.a)($,j);var J=Object(ki.a)($);function $(V){var H;Object(Tn.a)(this,$),H=J.call(this,V),H.getJumpPrevPage=function(){return Math.max(1,H.state.current-(H.props.showLessItems?3:5))},H.getJumpNextPage=function(){return Math.min(Xu(void 0,H.state,H.props),H.state.current+(H.props.showLessItems?3:5))},H.getItemIcon=function(we,Pe){var Re=H.props.prefixCls,Ue=we||Oe.a.createElement("button",{type:"button","aria-label":Pe,className:"".concat(Re,"-item-link")});return typeof we=="function"&&(Ue=Oe.a.createElement(we,Object(wr.a)({},H.props))),Ue},H.savePaginationNode=function(we){H.paginationNode=we},H.isValid=function(we){return cf(we)&&we!==H.state.current},H.shouldDisplayQuickJumper=function(){var we=H.props,Pe=we.showQuickJumper,Re=we.pageSize,Ue=we.total;return Ue<=Re?!1:Pe},H.handleKeyDown=function(we){(we.keyCode===js.ARROW_UP||we.keyCode===js.ARROW_DOWN)&&we.preventDefault()},H.handleKeyUp=function(we){var Pe=H.getValidValue(we),Re=H.state.currentInputValue;Pe!==Re&&H.setState({currentInputValue:Pe}),we.keyCode===js.ENTER?H.handleChange(Pe):we.keyCode===js.ARROW_UP?H.handleChange(Pe-1):we.keyCode===js.ARROW_DOWN&&H.handleChange(Pe+1)},H.changePageSize=function(we){var Pe=H.state.current,Re=Xu(we,H.state,H.props);Pe=Pe>Re?Re:Pe,Re===0&&(Pe=H.state.current),typeof we=="number"&&("pageSize"in H.props||H.setState({pageSize:we}),"current"in H.props||H.setState({current:Pe,currentInputValue:Pe})),H.props.onShowSizeChange(Pe,we),"onChange"in H.props&&H.props.onChange&&H.props.onChange(Pe,we)},H.handleChange=function(we){var Pe=H.props.disabled,Re=we;if(H.isValid(Re)&&!Pe){var Ue=Xu(void 0,H.state,H.props);Re>Ue?Re=Ue:Re<1&&(Re=1),"current"in H.props||H.setState({current:Re,currentInputValue:Re});var Ke=H.state.pageSize;return H.props.onChange(Re,Ke),Re}return H.state.current},H.prev=function(){H.hasPrev()&&H.handleChange(H.state.current-1)},H.next=function(){H.hasNext()&&H.handleChange(H.state.current+1)},H.jumpPrev=function(){H.handleChange(H.getJumpPrevPage())},H.jumpNext=function(){H.handleChange(H.getJumpNextPage())},H.hasPrev=function(){return H.state.current>1},H.hasNext=function(){return H.state.current<Xu(void 0,H.state,H.props)},H.runIfEnter=function(we,Pe){if(we.key==="Enter"||we.charCode===13){for(var Re=arguments.length,Ue=new Array(Re>2?Re-2:0),Ke=2;Ke<Re;Ke++)Ue[Ke-2]=arguments[Ke];Pe.apply(void 0,Ue)}},H.runIfEnterPrev=function(we){H.runIfEnter(we,H.prev)},H.runIfEnterNext=function(we){H.runIfEnter(we,H.next)},H.runIfEnterJumpPrev=function(we){H.runIfEnter(we,H.jumpPrev)},H.runIfEnterJumpNext=function(we){H.runIfEnter(we,H.jumpNext)},H.handleGoTO=function(we){(we.keyCode===js.ENTER||we.type==="click")&&H.handleChange(H.state.currentInputValue)};var te=V.onChange!==Th,ie="current"in V;ie&&!te&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var le=V.defaultCurrent;"current"in V&&(le=V.current);var ue=V.defaultPageSize;return"pageSize"in V&&(ue=V.pageSize),le=Math.min(le,Xu(ue,void 0,V)),H.state={current:le,currentInputValue:le,pageSize:ue},H}return Object(fa.a)($,[{key:"componentDidUpdate",value:function(H,te){var ie=this.props.prefixCls;if(te.current!==this.state.current&&this.paginationNode){var le=this.paginationNode.querySelector(".".concat(ie,"-item-").concat(te.current));le&&document.activeElement===le&&le.blur()}}},{key:"getValidValue",value:function(H){var te=H.target.value,ie=Xu(void 0,this.state,this.props),le=this.state.currentInputValue,ue;return te===""?ue=te:isNaN(Number(te))?ue=le:te>=ie?ue=ie:ue=Number(te),ue}},{key:"getShowSizeChanger",value:function(){var H=this.props,te=H.showSizeChanger,ie=H.total,le=H.totalBoundaryShowSizeChanger;return typeof te!="undefined"?te:ie>le}},{key:"renderPrev",value:function(H){var te=this.props,ie=te.prevIcon,le=te.itemRender,ue=le(H,"prev",this.getItemIcon(ie,"prev page")),we=!this.hasPrev();return Object(Q.isValidElement)(ue)?Object(Q.cloneElement)(ue,{disabled:we}):ue}},{key:"renderNext",value:function(H){var te=this.props,ie=te.nextIcon,le=te.itemRender,ue=le(H,"next",this.getItemIcon(ie,"next page")),we=!this.hasNext();return Object(Q.isValidElement)(ue)?Object(Q.cloneElement)(ue,{disabled:we}):ue}},{key:"render",value:function(){var H=this,te=this.props,ie=te.prefixCls,le=te.className,ue=te.style,we=te.disabled,Pe=te.hideOnSinglePage,Re=te.total,Ue=te.locale,Ke=te.showQuickJumper,it=te.showLessItems,ut=te.showTitle,rt=te.showTotal,Ct=te.simple,yt=te.itemRender,Kt=te.showPrevNextJumpers,ar=te.jumpPrevIcon,er=te.jumpNextIcon,Yt=te.selectComponentClass,sr=te.selectPrefixCls,jt=te.pageSizeOptions,gr=this.state,ir=gr.current,Pr=gr.pageSize,Yr=gr.currentInputValue;if(Pe===!0&&Re<=Pr)return null;var qt=Xu(void 0,this.state,this.props),xr=[],cn=null,Cn=null,Gn=null,Wr=null,Jn=null,jn=Ke&&Ke.goButton,Xn=it?1:2,Wi=ir-1>0?ir-1:0,Ai=ir+1<qt?ir+1:qt,Oi=Object.keys(this.props).reduce(function(_o,Ii){return(Ii.substr(0,5)==="data-"||Ii.substr(0,5)==="aria-"||Ii==="role")&&(_o[Ii]=H.props[Ii]),_o},{});if(Ct)return jn&&(typeof jn=="boolean"?Jn=Oe.a.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},Ue.jump_to_confirm):Jn=Oe.a.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},jn),Jn=Oe.a.createElement("li",{title:ut?"".concat(Ue.jump_to).concat(ir,"/").concat(qt):null,className:"".concat(ie,"-simple-pager")},Jn)),Oe.a.createElement("ul",Object(Ne.a)({className:Lt()(ie,"".concat(ie,"-simple"),Object(ce.a)({},"".concat(ie,"-disabled"),we),le),style:ue,ref:this.savePaginationNode},Oi),Oe.a.createElement("li",{title:ut?Ue.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:Lt()("".concat(ie,"-prev"),Object(ce.a)({},"".concat(ie,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},this.renderPrev(Wi)),Oe.a.createElement("li",{title:ut?"".concat(ir,"/").concat(qt):null,className:"".concat(ie,"-simple-pager")},Oe.a.createElement("input",{type:"text",value:Yr,disabled:we,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,size:"3"}),Oe.a.createElement("span",{className:"".concat(ie,"-slash")},"/"),qt),Oe.a.createElement("li",{title:ut?Ue.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:Lt()("".concat(ie,"-next"),Object(ce.a)({},"".concat(ie,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(Ai)),Jn);if(qt<=3+Xn*2){var Ji={locale:Ue,rootPrefixCls:ie,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:ut,itemRender:yt};qt||xr.push(Oe.a.createElement(Gs,Object(Ne.a)({},Ji,{key:"noPager",page:qt,className:"".concat(ie,"-disabled")})));for(var En=1;En<=qt;En+=1){var $i=ir===En;xr.push(Oe.a.createElement(Gs,Object(Ne.a)({},Ji,{key:En,page:En,active:$i})))}}else{var no=it?Ue.prev_3:Ue.prev_5,Ao=it?Ue.next_3:Ue.next_5;Kt&&(cn=Oe.a.createElement("li",{title:ut?no:null,key:"prev",onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:Lt()("".concat(ie,"-jump-prev"),Object(ce.a)({},"".concat(ie,"-jump-prev-custom-icon"),!!ar))},yt(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(ar,"prev page"))),Cn=Oe.a.createElement("li",{title:ut?Ao:null,key:"next",tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:Lt()("".concat(ie,"-jump-next"),Object(ce.a)({},"".concat(ie,"-jump-next-custom-icon"),!!er))},yt(this.getJumpNextPage(),"jump-next",this.getItemIcon(er,"next page")))),Wr=Oe.a.createElement(Gs,{locale:Ue,last:!0,rootPrefixCls:ie,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:qt,page:qt,active:!1,showTitle:ut,itemRender:yt}),Gn=Oe.a.createElement(Gs,{locale:Ue,rootPrefixCls:ie,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:ut,itemRender:yt});var ua=Math.max(1,ir-Xn),ji=Math.min(ir+Xn,qt);ir-1<=Xn&&(ji=1+Xn*2),qt-ir<=Xn&&(ua=qt-Xn*2);for(var ii=ua;ii<=ji;ii+=1){var Ti=ir===ii;xr.push(Oe.a.createElement(Gs,{locale:Ue,rootPrefixCls:ie,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:ii,page:ii,active:Ti,showTitle:ut,itemRender:yt}))}ir-1>=Xn*2&&ir!==1+2&&(xr[0]=Object(Q.cloneElement)(xr[0],{className:"".concat(ie,"-item-after-jump-prev")}),xr.unshift(cn)),qt-ir>=Xn*2&&ir!==qt-2&&(xr[xr.length-1]=Object(Q.cloneElement)(xr[xr.length-1],{className:"".concat(ie,"-item-before-jump-next")}),xr.push(Cn)),ua!==1&&xr.unshift(Gn),ji!==qt&&xr.push(Wr)}var Co=null;rt&&(Co=Oe.a.createElement("li",{className:"".concat(ie,"-total-text")},rt(Re,[Re===0?0:(ir-1)*Pr+1,ir*Pr>Re?Re:ir*Pr])));var wo=!this.hasPrev()||!qt,Po=!this.hasNext()||!qt;return Oe.a.createElement("ul",Object(Ne.a)({className:Lt()(ie,le,Object(ce.a)({},"".concat(ie,"-disabled"),we)),style:ue,unselectable:"unselectable",ref:this.savePaginationNode},Oi),Co,Oe.a.createElement("li",{title:ut?Ue.prev_page:null,onClick:this.prev,tabIndex:wo?null:0,onKeyPress:this.runIfEnterPrev,className:Lt()("".concat(ie,"-prev"),Object(ce.a)({},"".concat(ie,"-disabled"),wo)),"aria-disabled":wo},this.renderPrev(Wi)),xr,Oe.a.createElement("li",{title:ut?Ue.next_page:null,onClick:this.next,tabIndex:Po?null:0,onKeyPress:this.runIfEnterNext,className:Lt()("".concat(ie,"-next"),Object(ce.a)({},"".concat(ie,"-disabled"),Po)),"aria-disabled":Po},this.renderNext(Ai)),Oe.a.createElement(Ni,{disabled:we,locale:Ue,rootPrefixCls:ie,selectComponentClass:Yt,selectPrefixCls:sr,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:ir,pageSize:Pr,pageSizeOptions:jt,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:jn}))}}],[{key:"getDerivedStateFromProps",value:function(H,te){var ie={};if("current"in H&&(ie.current=H.current,H.current!==te.current&&(ie.currentInputValue=ie.current)),"pageSize"in H&&H.pageSize!==te.pageSize){var le=te.current,ue=Xu(H.pageSize,te,H);le=le>ue?ue:le,"current"in H||(ie.current=le,ie.currentInputValue=le),ie.pageSize=H.pageSize}return ie}}]),$}(Oe.a.Component);op.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:Th,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:Th,locale:eg.a,style:{},itemRender:Vs,totalBoundaryShowSizeChanger:50};var Mc=op,Sc=Ae("H4fg"),$l=Ae("5bA4"),hf=Ae("UESt"),Ll={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},Ta=Ll,qg=function(J,$){return Q.createElement(Gc.a,Object.assign({},J,{ref:$,icon:Ta}))};qg.displayName="DoubleLeftOutlined";var Fn=Q.forwardRef(qg),Qg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},Zi=Qg,ja=function(J,$){return Q.createElement(Gc.a,Object.assign({},J,{ref:$,icon:Zi}))};ja.displayName="DoubleRightOutlined";var ap=Q.forwardRef(ja),$g=function(J){return Q.createElement(fc.a,Object(Ne.a)({size:"small"},J))};$g.Option=fc.a.Option;var em=$g,sp=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},fd=function(J){var $=J.prefixCls,V=J.selectPrefixCls,H=J.className,te=J.size,ie=J.locale,le=sp(J,["prefixCls","selectPrefixCls","className","size","locale"]),ue=Object(oa.a)(),we=ue.xs,Pe=Q.useContext(xe.b),Re=Pe.getPrefixCls,Ue=Pe.direction,Ke=Re("pagination",$),it=function(){var Ct=Q.createElement("span",{className:"".concat(Ke,"-item-ellipsis")},"\u2022\u2022\u2022"),yt=Q.createElement("button",{className:"".concat(Ke,"-item-link"),type:"button",tabIndex:-1},Q.createElement($l.a,null)),Kt=Q.createElement("button",{className:"".concat(Ke,"-item-link"),type:"button",tabIndex:-1},Q.createElement(hf.a,null)),ar=Q.createElement("a",{className:"".concat(Ke,"-item-link")},Q.createElement("div",{className:"".concat(Ke,"-item-container")},Q.createElement(Fn,{className:"".concat(Ke,"-item-link-icon")}),Ct)),er=Q.createElement("a",{className:"".concat(Ke,"-item-link")},Q.createElement("div",{className:"".concat(Ke,"-item-container")},Q.createElement(ap,{className:"".concat(Ke,"-item-link-icon")}),Ct));if(Ue==="rtl"){var Yt=[Kt,yt];yt=Yt[0],Kt=Yt[1];var sr=[er,ar];ar=sr[0],er=sr[1]}return{prevIcon:yt,nextIcon:Kt,jumpPrevIcon:ar,jumpNextIcon:er}},ut=function(Ct){var yt=Object(Ne.a)(Object(Ne.a)({},Ct),ie),Kt=te==="small"||!!(we&&!te&&le.responsive),ar=Re("select",V),er=Lt()(Object(ce.a)({mini:Kt},"".concat(Ke,"-rtl"),Ue==="rtl"),H);return Q.createElement(Mc,Object(Ne.a)({},le,{prefixCls:Ke,selectPrefixCls:ar},it(),{className:er,selectComponentClass:Kt?em:fc.a,locale:yt}))};return Q.createElement(Zf.a,{componentName:"Pagination",defaultLocale:Sc.a},ut)},_n=fd,zn=_n,Cu=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},Tc=10;function tm(j,J){var $={current:J.current,pageSize:J.pageSize},V=j&&Object(va.a)(j)==="object"?j:{};return Object.keys(V).forEach(function(H){var te=J[H];typeof te!="function"&&($[H]=te)}),$}function ml(){for(var j={},J=arguments.length,$=new Array(J),V=0;V<J;V++)$[V]=arguments[V];return $.forEach(function(H){H&&Object.keys(H).forEach(function(te){var ie=H[te];ie!==void 0&&(j[te]=ie)})}),j}function ba(j,J,$){var V=J&&Object(va.a)(J)==="object"?J:{},H=V.total,te=H===void 0?0:H,ie=Cu(V,["total"]),le=Object(Q.useState)(function(){return{current:"defaultCurrent"in ie?ie.defaultCurrent:1,pageSize:"defaultPageSize"in ie?ie.defaultPageSize:Tc}}),ue=Object(Go.a)(le,2),we=ue[0],Pe=ue[1],Re=ml(we,ie,{total:te>0?te:j}),Ue=Math.ceil((te||j)/Re.pageSize);Re.current>Ue&&(Re.current=Ue||1);var Ke=function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,Ct=arguments.length>1?arguments[1]:void 0;Pe({current:rt,pageSize:Ct||Re.pageSize})},it=function(rt,Ct){var yt;J&&((yt=J.onChange)===null||yt===void 0||yt.call(J,rt,Ct)),Ke(rt,Ct),$(rt,Ct||(Re==null?void 0:Re.pageSize))};return J===!1?[{},function(){}]:[Object(Ne.a)(Object(Ne.a)({},Re),{onChange:it}),Ke]}function us(j,J,$){var V=Q.useRef({});function H(te){if(!V.current||V.current.data!==j||V.current.childrenColumnName!==J||V.current.getRowKey!==$){var ie=function ue(we){we.forEach(function(Pe,Re){var Ue=$(Pe,Re);le.set(Ue,Pe),Pe&&Object(va.a)(Pe)==="object"&&J in Pe&&ue(Pe[J]||[])})},le=new Map;ie(j),V.current={data:j,childrenColumnName:J,kvMap:le,getRowKey:$}}return V.current.kvMap.get(te)}return[H]}var ff=Ae("T5bk"),Yu=Ae("8Skl"),cs=Ae("JX7q"),Os=Q.createContext(null),wu=function(J){for(var $=J.prefixCls,V=J.level,H=J.isStart,te=J.isEnd,ie="".concat($,"-indent-unit"),le=[],ue=0;ue<V;ue+=1){var we;le.push(Q.createElement("span",{key:ue,className:Lt()(ie,(we={},Object(ce.a)(we,"".concat(ie,"-start"),H[ue]),Object(ce.a)(we,"".concat(ie,"-end"),te[ue]),we))}))}return Q.createElement("span",{"aria-hidden":"true",className:"".concat($,"-indent")},le)},Hi=wu,_u=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove"],Ws="open",Pl="close",$s="---",Zu=function(j){Object(Ja.a)($,j);var J=Object(ki.a)($);function $(){var V;Object(Tn.a)(this,$);for(var H=arguments.length,te=new Array(H),ie=0;ie<H;ie++)te[ie]=arguments[ie];return V=J.call.apply(J,[this].concat(te)),V.state={dragNodeHighlight:!1},V.selectHandle=void 0,V.onSelectorClick=function(le){var ue=V.props.context.onNodeClick;ue(le,Rl(V.props)),V.isSelectable()?V.onSelect(le):V.onCheck(le)},V.onSelectorDoubleClick=function(le){var ue=V.props.context.onNodeDoubleClick;ue(le,Rl(V.props))},V.onSelect=function(le){if(!V.isDisabled()){var ue=V.props.context.onNodeSelect;le.preventDefault(),ue(le,Rl(V.props))}},V.onCheck=function(le){if(!V.isDisabled()){var ue=V.props,we=ue.disableCheckbox,Pe=ue.checked,Re=V.props.context.onNodeCheck;if(!(!V.isCheckable()||we)){le.preventDefault();var Ue=!Pe;Re(le,Rl(V.props),Ue)}}},V.onMouseEnter=function(le){var ue=V.props.context.onNodeMouseEnter;ue(le,Rl(V.props))},V.onMouseLeave=function(le){var ue=V.props.context.onNodeMouseLeave;ue(le,Rl(V.props))},V.onContextMenu=function(le){var ue=V.props.context.onNodeContextMenu;ue(le,Rl(V.props))},V.onDragStart=function(le){var ue=V.props.context.onNodeDragStart;le.stopPropagation(),V.setState({dragNodeHighlight:!0}),ue(le,Object(cs.a)(V));try{le.dataTransfer.setData("text/plain","")}catch(we){}},V.onDragEnter=function(le){var ue=V.props.context.onNodeDragEnter;le.preventDefault(),le.stopPropagation(),ue(le,Object(cs.a)(V))},V.onDragOver=function(le){var ue=V.props.context.onNodeDragOver;le.preventDefault(),le.stopPropagation(),ue(le,Object(cs.a)(V))},V.onDragLeave=function(le){var ue=V.props.context.onNodeDragLeave;le.stopPropagation(),ue(le,Object(cs.a)(V))},V.onDragEnd=function(le){var ue=V.props.context.onNodeDragEnd;le.stopPropagation(),V.setState({dragNodeHighlight:!1}),ue(le,Object(cs.a)(V))},V.onDrop=function(le){var ue=V.props.context.onNodeDrop;le.preventDefault(),le.stopPropagation(),V.setState({dragNodeHighlight:!1}),ue(le,Object(cs.a)(V))},V.onExpand=function(le){var ue=V.props,we=ue.loading,Pe=ue.context.onNodeExpand;we||Pe(le,Rl(V.props))},V.setSelectHandle=function(le){V.selectHandle=le},V.getNodeState=function(){var le=V.props.expanded;return V.isLeaf()?null:le?Ws:Pl},V.hasChildren=function(){var le=V.props.eventKey,ue=V.props.context.keyEntities,we=ue[le]||{},Pe=we.children;return!!(Pe||[]).length},V.isLeaf=function(){var le=V.props,ue=le.isLeaf,we=le.loaded,Pe=V.props.context.loadData,Re=V.hasChildren();return ue===!1?!1:ue||!Pe&&!Re||Pe&&we&&!Re},V.isDisabled=function(){var le=V.props.disabled,ue=V.props.context.disabled;return!!(ue||le)},V.isCheckable=function(){var le=V.props.checkable,ue=V.props.context.checkable;return!ue||le===!1?!1:ue},V.syncLoadData=function(le){var ue=le.expanded,we=le.loading,Pe=le.loaded,Re=V.props.context,Ue=Re.loadData,Ke=Re.onNodeLoad;we||Ue&&ue&&!V.isLeaf()&&!V.hasChildren()&&!Pe&&Ke(Rl(V.props))},V.renderSwitcherIconDom=function(le){var ue=V.props.switcherIcon,we=V.props.context.switcherIcon,Pe=ue||we;return typeof Pe=="function"?Pe(Object(wr.a)(Object(wr.a)({},V.props),{},{isLeaf:le})):Pe},V.renderSwitcher=function(){var le=V.props.expanded,ue=V.props.context.prefixCls;if(V.isLeaf()){var we=V.renderSwitcherIconDom(!0);return we!==!1?Q.createElement("span",{className:Lt()("".concat(ue,"-switcher"),"".concat(ue,"-switcher-noop"))},we):null}var Pe=Lt()("".concat(ue,"-switcher"),"".concat(ue,"-switcher_").concat(le?Ws:Pl)),Re=V.renderSwitcherIconDom(!1);return Re!==!1?Q.createElement("span",{onClick:V.onExpand,className:Pe},Re):null},V.renderCheckbox=function(){var le=V.props,ue=le.checked,we=le.halfChecked,Pe=le.disableCheckbox,Re=V.props.context.prefixCls,Ue=V.isDisabled(),Ke=V.isCheckable();if(!Ke)return null;var it=typeof Ke!="boolean"?Ke:null;return Q.createElement("span",{className:Lt()("".concat(Re,"-checkbox"),ue&&"".concat(Re,"-checkbox-checked"),!ue&&we&&"".concat(Re,"-checkbox-indeterminate"),(Ue||Pe)&&"".concat(Re,"-checkbox-disabled")),onClick:V.onCheck},it)},V.renderIcon=function(){var le=V.props.loading,ue=V.props.context.prefixCls;return Q.createElement("span",{className:Lt()("".concat(ue,"-iconEle"),"".concat(ue,"-icon__").concat(V.getNodeState()||"docu"),le&&"".concat(ue,"-icon_loading"))})},V.renderSelector=function(){var le=V.state.dragNodeHighlight,ue=V.props,we=ue.title,Pe=ue.selected,Re=ue.icon,Ue=ue.loading,Ke=ue.data,it=V.props.context,ut=it.prefixCls,rt=it.showIcon,Ct=it.icon,yt=it.draggable,Kt=it.loadData,ar=it.titleRender,er=V.isDisabled(),Yt=typeof yt=="function"?yt(Ke):yt,sr="".concat(ut,"-node-content-wrapper"),jt;if(rt){var gr=Re||Ct;jt=gr?Q.createElement("span",{className:Lt()("".concat(ut,"-iconEle"),"".concat(ut,"-icon__customize"))},typeof gr=="function"?gr(V.props):gr):V.renderIcon()}else Kt&&Ue&&(jt=V.renderIcon());var ir;typeof we=="function"?ir=we(Ke):ar?ir=ar(Ke):ir=we;var Pr=Q.createElement("span",{className:"".concat(ut,"-title")},ir);return Q.createElement("span",{ref:V.setSelectHandle,title:typeof we=="string"?we:"",className:Lt()("".concat(sr),"".concat(sr,"-").concat(V.getNodeState()||"normal"),!er&&(Pe||le)&&"".concat(ut,"-node-selected"),!er&&Yt&&"draggable"),draggable:!er&&Yt||void 0,"aria-grabbed":!er&&Yt||void 0,onMouseEnter:V.onMouseEnter,onMouseLeave:V.onMouseLeave,onContextMenu:V.onContextMenu,onClick:V.onSelectorClick,onDoubleClick:V.onSelectorDoubleClick,onDragStart:Yt?V.onDragStart:void 0},jt,Pr,V.renderDropIndicator())},V.renderDropIndicator=function(){var le=V.props,ue=le.disabled,we=le.eventKey,Pe=V.props.context,Re=Pe.draggable,Ue=Pe.dropLevelOffset,Ke=Pe.dropPosition,it=Pe.prefixCls,ut=Pe.indent,rt=Pe.dropIndicatorRender,Ct=Pe.dragOverNodeKey,yt=Pe.direction,Kt=Re!==!1,ar=!ue&&Kt&&Ct===we;return ar?rt({dropPosition:Ke,dropLevelOffset:Ue,indent:ut,prefixCls:it,direction:yt}):null},V}return Object(fa.a)($,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var H=this.props.selectable,te=this.props.context.selectable;return typeof H=="boolean"?H:te}},{key:"render",value:function(){var H,te=this.props,ie=te.eventKey,le=te.className,ue=te.style,we=te.dragOver,Pe=te.dragOverGapTop,Re=te.dragOverGapBottom,Ue=te.isLeaf,Ke=te.isStart,it=te.isEnd,ut=te.expanded,rt=te.selected,Ct=te.checked,yt=te.halfChecked,Kt=te.loading,ar=te.domRef,er=te.active,Yt=te.data,sr=te.onMouseMove,jt=Object(Jr.a)(te,_u),gr=this.props.context,ir=gr.prefixCls,Pr=gr.filterTreeNode,Yr=gr.draggable,qt=gr.keyEntities,xr=gr.dropContainerKey,cn=gr.dropTargetKey,Cn=this.isDisabled(),Gn=qc(jt),Wr=qt[ie]||{},Jn=Wr.level,jn=it[it.length-1],Xn=typeof Yr=="function"?Yr(Yt):Yr;return Q.createElement("div",Object(Ne.a)({ref:ar,className:Lt()(le,"".concat(ir,"-treenode"),(H={},Object(ce.a)(H,"".concat(ir,"-treenode-disabled"),Cn),Object(ce.a)(H,"".concat(ir,"-treenode-switcher-").concat(ut?"open":"close"),!Ue),Object(ce.a)(H,"".concat(ir,"-treenode-checkbox-checked"),Ct),Object(ce.a)(H,"".concat(ir,"-treenode-checkbox-indeterminate"),yt),Object(ce.a)(H,"".concat(ir,"-treenode-selected"),rt),Object(ce.a)(H,"".concat(ir,"-treenode-loading"),Kt),Object(ce.a)(H,"".concat(ir,"-treenode-active"),er),Object(ce.a)(H,"".concat(ir,"-treenode-leaf-last"),jn),Object(ce.a)(H,"drop-target",cn===ie),Object(ce.a)(H,"drop-container",xr===ie),Object(ce.a)(H,"drag-over",!Cn&&we),Object(ce.a)(H,"drag-over-gap-top",!Cn&&Pe),Object(ce.a)(H,"drag-over-gap-bottom",!Cn&&Re),Object(ce.a)(H,"filter-node",Pr&&Pr(Rl(this.props))),H)),style:ue,onDragEnter:Xn?this.onDragEnter:void 0,onDragOver:Xn?this.onDragOver:void 0,onDragLeave:Xn?this.onDragLeave:void 0,onDrop:Xn?this.onDrop:void 0,onDragEnd:Xn?this.onDragEnd:void 0,onMouseMove:sr},Gn),Q.createElement(Hi,{prefixCls:ir,level:Jn,isStart:Ke,isEnd:it}),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),$}(Q.Component),yo=function(J){return Q.createElement(Os.Consumer,null,function($){return Q.createElement(Zu,Object(Ne.a)({},J,{context:$}))})};yo.displayName="TreeNode",yo.defaultProps={title:$s},yo.isTreeNode=1;var rm=yo,eu=["children"];function dd(j,J){var $=j.slice(),V=$.indexOf(J);return V>=0&&$.splice(V,1),$}function tg(j,J){var $=j.slice();return $.indexOf(J)===-1&&$.push(J),$}function Vi(j){return j.split("-")}function Ih(j,J){return"".concat(j,"-").concat(J)}function Mu(j){return j&&j.type&&j.type.isTreeNode}function nm(j,J){var $=[],V=J[j];function H(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];te.forEach(function(ie){var le=ie.key,ue=ie.children;$.push(le),H(ue)})}return H(V.children),$}function Ee(j){if(j.parent){var J=Vi(j.pos);return Number(J[J.length-1])===j.parent.children.length-1}return!1}function Jc(j){var J=Vi(j.pos);return Number(J[J.length-1])===0}function lp(j,J,$,V,H,te,ie,le,ue,we){var Pe,Re=j.clientX,Ue=j.clientY,Ke=j.target.getBoundingClientRect(),it=Ke.top,ut=Ke.height,rt=(we==="rtl"?-1:1)*(((H==null?void 0:H.x)||0)-Re),Ct=(rt-12)/V,yt=le[$.props.eventKey];if(Ue<it+ut/2){var Kt=ie.findIndex(function(xr){return xr.data.key===yt.key}),ar=Kt<=0?0:Kt-1,er=ie[ar].data.key;yt=le[er]}var Yt=yt.key,sr=yt,jt=yt.key,gr=0,ir=0;if(!ue.includes(Yt))for(var Pr=0;Pr<Ct&&Ee(yt);Pr+=1)yt=yt.parent,ir+=1;var Yr=yt.node,qt=!0;return Jc(yt)&&yt.level===0&&Ue<it+ut/2&&te({dropNode:Yr,dropPosition:-1})&&yt.key===$.props.eventKey?gr=-1:(sr.children||[]).length&&ue.includes(jt)?te({dropNode:Yr,dropPosition:0})?gr=0:qt=!1:ir===0?Ct>-1.5?te({dropNode:Yr,dropPosition:1})?gr=1:qt=!1:te({dropNode:Yr,dropPosition:0})?gr=0:te({dropNode:Yr,dropPosition:1})?gr=1:qt=!1:te({dropNode:Yr,dropPosition:1})?gr=1:qt=!1,{dropPosition:gr,dropLevelOffset:ir,dropTargetKey:yt.key,dropTargetPos:yt.pos,dragOverNodeKey:jt,dropContainerKey:gr===0?null:((Pe=yt.parent)===null||Pe===void 0?void 0:Pe.key)||null,dropAllowed:qt}}function tu(j,J){if(!!j){var $=J.multiple;return $?j.slice():j.length?[j[0]]:j}}var ti=function(J){return J};function ru(j,J){if(!j)return[];var $=J||{},V=$.processProps,H=V===void 0?ti:V,te=Array.isArray(j)?j:[j];return te.map(function(ie){var le=ie.children,ue=Object(Jr.a)(ie,eu),we=ru(le,J);return Oe.a.createElement(rm,H(ue),we)})}function im(j){if(!j)return null;var J;if(Array.isArray(j))J={checkedKeys:j,halfCheckedKeys:void 0};else if(Object(va.a)(j)==="object")J={checkedKeys:j.checked||void 0,halfCheckedKeys:j.halfChecked||void 0};else return Object(fl.a)(!1,"`checkedKeys` is not an array or an object"),null;return J}function gv(j,J){var $=new Set;function V(H){if(!$.has(H)){var te=J[H];if(!!te){$.add(H);var ie=te.parent,le=te.node;le.disabled||ie&&V(ie.key)}}}return(j||[]).forEach(function(H){V(H)}),Object(Ho.a)($)}function qc(j){var J={};return Object.keys(j).forEach(function($){($.startsWith("data-")||$.startsWith("aria-"))&&(J[$]=j[$])}),J}var df=["children"];function La(j,J){return j!=null?j:J}function up(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],J=new Map;function $(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(V||[]).forEach(function(te){var ie=te.key,le=te.children;Object(fl.a)(ie!=null,"Tree node must have a certain key: [".concat(H).concat(ie,"]"));var ue=String(ie);Object(fl.a)(!J.has(ue)||ie===null||ie===void 0,"Same 'key' exist in the Tree: ".concat(ue)),J.set(ue,!0),$(le,"".concat(H).concat(ue," > "))})}$(j)}function cp(j){function J($){var V=Object(vs.a)($);return V.map(function(H){if(!Mu(H))return Object(fl.a)(!H,"Tree/TreeNode can only accept TreeNode as children."),null;var te=H.key,ie=H.props,le=ie.children,ue=Object(Jr.a)(ie,df),we=Object(wr.a)({key:te},ue),Pe=J(le);return Pe.length&&(we.children=Pe),we}).filter(function(H){return H})}return J(j)}function pf(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],$=new Set(J===!0?[]:J),V=[];function H(te){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return te.map(function(le,ue){var we=Ih(ie?ie.pos:"0",ue),Pe=La(le.key,we),Re=Object(wr.a)(Object(wr.a)({},le),{},{parent:ie,pos:we,children:null,data:le,isStart:[].concat(Object(Ho.a)(ie?ie.isStart:[]),[ue===0]),isEnd:[].concat(Object(Ho.a)(ie?ie.isEnd:[]),[ue===te.length-1])});return V.push(Re),J===!0||$.has(Pe)?Re.children=H(le.children||[],Re):Re.children=[],Re})}return H(j),V}function Ku(j,J,$){var V=null,H,te=Object(va.a)($);te==="function"||te==="string"?V=$:$&&te==="object"&&(H=$.childrenPropName,V=$.externalGetKey),H=H||"children";var ie;V?typeof V=="string"?ie=function(we){return we[V]}:typeof V=="function"&&(ie=function(we){return V(we)}):ie=function(we,Pe){return La(we.key,Pe)};function le(ue,we,Pe){var Re=ue?ue[H]:j,Ue=ue?Ih(Pe.pos,we):"0";if(ue){var Ke=ie(ue,Ue),it={node:ue,index:we,pos:Ue,key:Ke,parentPos:Pe.node?Pe.pos:null,level:Pe.level+1};J(it)}Re&&Re.forEach(function(ut,rt){le(ut,rt,{node:ue,pos:Ue,level:Pe?Pe.level+1:-1})})}le(null)}function gf(j){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=J.initWrapper,V=J.processEntity,H=J.onProcessFinished,te=J.externalGetKey,ie=J.childrenPropName,le=arguments.length>2?arguments[2]:void 0,ue=te||le,we={},Pe={},Re={posEntities:we,keyEntities:Pe};return $&&(Re=$(Re)||Re),Ku(j,function(Ue){var Ke=Ue.node,it=Ue.index,ut=Ue.pos,rt=Ue.key,Ct=Ue.parentPos,yt=Ue.level,Kt={node:Ke,index:it,key:rt,pos:ut,level:yt},ar=La(rt,ut);we[ut]=Kt,Pe[ar]=Kt,Kt.parent=we[Ct],Kt.parent&&(Kt.parent.children=Kt.parent.children||[],Kt.parent.children.push(Kt)),V&&V(Kt,Re)},{externalGetKey:ue,childrenPropName:ie}),H&&H(Re),Re}function nu(j,J){var $=J.expandedKeys,V=J.selectedKeys,H=J.loadedKeys,te=J.loadingKeys,ie=J.checkedKeys,le=J.halfCheckedKeys,ue=J.dragOverNodeKey,we=J.dropPosition,Pe=J.keyEntities,Re=Pe[j],Ue={eventKey:j,expanded:$.indexOf(j)!==-1,selected:V.indexOf(j)!==-1,loaded:H.indexOf(j)!==-1,loading:te.indexOf(j)!==-1,checked:ie.indexOf(j)!==-1,halfChecked:le.indexOf(j)!==-1,pos:String(Re?Re.pos:""),dragOver:ue===j&&we===0,dragOverGapTop:ue===j&&we===-1,dragOverGapBottom:ue===j&&we===1};return Ue}function Rl(j){var J=j.data,$=j.expanded,V=j.selected,H=j.checked,te=j.loaded,ie=j.loading,le=j.halfChecked,ue=j.dragOver,we=j.dragOverGapTop,Pe=j.dragOverGapBottom,Re=j.pos,Ue=j.active,Ke=Object(wr.a)(Object(wr.a)({},J),{},{expanded:$,selected:V,checked:H,loaded:te,loading:ie,halfChecked:le,dragOver:ue,dragOverGapTop:we,dragOverGapBottom:Pe,pos:Re,active:Ue});return"props"in Ke||Object.defineProperty(Ke,"props",{get:function(){return Object(fl.a)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),j}}),Ke}function rg(j,J){var $=new Set;return j.forEach(function(V){J.has(V)||$.add(V)}),$}function mf(j){var J=j||{},$=J.disabled,V=J.disableCheckbox,H=J.checkable;return!!($||V)||H===!1}function iu(j,J,$,V){for(var H=new Set(j),te=new Set,ie=0;ie<=$;ie+=1){var le=J.get(ie)||new Set;le.forEach(function(Re){var Ue=Re.key,Ke=Re.node,it=Re.children,ut=it===void 0?[]:it;H.has(Ue)&&!V(Ke)&&ut.filter(function(rt){return!V(rt.node)}).forEach(function(rt){H.add(rt.key)})})}for(var ue=new Set,we=$;we>=0;we-=1){var Pe=J.get(we)||new Set;Pe.forEach(function(Re){var Ue=Re.parent,Ke=Re.node;if(!(V(Ke)||!Re.parent||ue.has(Re.parent.key))){if(V(Re.parent.node)){ue.add(Ue.key);return}var it=!0,ut=!1;(Ue.children||[]).filter(function(rt){return!V(rt.node)}).forEach(function(rt){var Ct=rt.key,yt=H.has(Ct);it&&!yt&&(it=!1),!ut&&(yt||te.has(Ct))&&(ut=!0)}),it&&H.add(Ue.key),ut&&te.add(Ue.key),ue.add(Ue.key)}})}return{checkedKeys:Array.from(H),halfCheckedKeys:Array.from(rg(te,H))}}function mv(j,J,$,V,H){for(var te=new Set(j),ie=new Set(J),le=0;le<=V;le+=1){var ue=$.get(le)||new Set;ue.forEach(function(Ue){var Ke=Ue.key,it=Ue.node,ut=Ue.children,rt=ut===void 0?[]:ut;!te.has(Ke)&&!ie.has(Ke)&&!H(it)&&rt.filter(function(Ct){return!H(Ct.node)}).forEach(function(Ct){te.delete(Ct.key)})})}ie=new Set;for(var we=new Set,Pe=V;Pe>=0;Pe-=1){var Re=$.get(Pe)||new Set;Re.forEach(function(Ue){var Ke=Ue.parent,it=Ue.node;if(!(H(it)||!Ue.parent||we.has(Ue.parent.key))){if(H(Ue.parent.node)){we.add(Ke.key);return}var ut=!0,rt=!1;(Ke.children||[]).filter(function(Ct){return!H(Ct.node)}).forEach(function(Ct){var yt=Ct.key,Kt=te.has(yt);ut&&!Kt&&(ut=!1),!rt&&(Kt||ie.has(yt))&&(rt=!0)}),ut||te.delete(Ke.key),rt&&ie.add(Ke.key),we.add(Ke.key)}})}return{checkedKeys:Array.from(te),halfCheckedKeys:Array.from(rg(ie,te))}}function pd(j,J,$,V){var H=[],te;V?te=V:te=mf;var ie=new Set(j.filter(function(Pe){var Re=!!$[Pe];return Re||H.push(Pe),Re})),le=new Map,ue=0;Object.keys($).forEach(function(Pe){var Re=$[Pe],Ue=Re.level,Ke=le.get(Ue);Ke||(Ke=new Set,le.set(Ue,Ke)),Ke.add(Re),ue=Math.max(ue,Ue)}),Object(fl.a)(!H.length,"Tree missing follow keys: ".concat(H.slice(0,100).map(function(Pe){return"'".concat(Pe,"'")}).join(", ")));var we;return J===!0?we=iu(ie,le,ue,te):we=mv(ie,J.halfCheckedKeys,le,ue,te),we}var Qc=Ae("6cGi"),hs=Ae("kaz8"),vf=Ae("jsC+"),ou=Ae("BvKs"),gd=Ae("9yH6"),yf="SELECT_ALL",Ol="SELECT_INVERT",hp="SELECT_NONE";function Su(j){return j&&j.fixed}function xf(j,J){var $=[];return(j||[]).forEach(function(V){$.push(V),V&&Object(va.a)(V)==="object"&&J in V&&($=[].concat(Object(Ho.a)($),Object(Ho.a)(xf(V[J],J))))}),$}function Eh(j,J){var $=j||{},V=$.preserveSelectedRowKeys,H=$.selectedRowKeys,te=$.defaultSelectedRowKeys,ie=$.getCheckboxProps,le=$.onChange,ue=$.onSelect,we=$.onSelectAll,Pe=$.onSelectInvert,Re=$.onSelectNone,Ue=$.onSelectMultiple,Ke=$.columnWidth,it=$.type,ut=$.selections,rt=$.fixed,Ct=$.renderCell,yt=$.hideSelectAll,Kt=$.checkStrictly,ar=Kt===void 0?!0:Kt,er=J.prefixCls,Yt=J.data,sr=J.pageData,jt=J.getRecordByKey,gr=J.getRowKey,ir=J.expandType,Pr=J.childrenColumnName,Yr=J.locale,qt=J.expandIconColumnIndex,xr=J.getPopupContainer,cn=Object(Qc.a)(H||te||[],{value:H}),Cn=Object(Go.a)(cn,2),Gn=Cn[0],Wr=Cn[1],Jn=Q.useRef(new Map),jn=Object(Q.useCallback)(function(Di){if(V){var Vn=new Map;Di.forEach(function(Yn){var fn=jt(Yn);!fn&&Jn.current.has(Yn)&&(fn=Jn.current.get(Yn)),Vn.set(Yn,fn)}),Jn.current=Vn}},[jt,V]);Q.useEffect(function(){jn(Gn)},[Gn]);var Xn=Object(Q.useMemo)(function(){return ar?{keyEntities:null}:gf(Yt,{externalGetKey:gr,childrenPropName:Pr})},[Yt,gr,ar,Pr]),Wi=Xn.keyEntities,Ai=Object(Q.useMemo)(function(){return xf(sr,Pr)},[sr,Pr]),Oi=Object(Q.useMemo)(function(){var Di=new Map;return Ai.forEach(function(Vn,Yn){var fn=gr(Vn,Yn),Vo=(ie?ie(Vn):null)||{};Di.set(fn,Vo)}),Di},[Ai,gr,ie]),Ji=Object(Q.useCallback)(function(Di){var Vn;return!!((Vn=Oi.get(gr(Di)))===null||Vn===void 0?void 0:Vn.disabled)},[Oi,gr]),En=Object(Q.useMemo)(function(){if(ar)return[Gn||[],[]];var Di=pd(Gn,!0,Wi,Ji),Vn=Di.checkedKeys,Yn=Di.halfCheckedKeys;return[Vn||[],Yn]},[Gn,ar,Wi,Ji]),$i=Object(Go.a)(En,2),no=$i[0],Ao=$i[1],ua=Object(Q.useMemo)(function(){var Di=it==="radio"?no.slice(0,1):no;return new Set(Di)},[no,it]),ji=Object(Q.useMemo)(function(){return it==="radio"?new Set:new Set(Ao)},[Ao,it]),ii=Object(Q.useState)(null),Ti=Object(Go.a)(ii,2),Co=Ti[0],wo=Ti[1];Q.useEffect(function(){j||Wr([])},[!!j]);var Po=Object(Q.useCallback)(function(Di){var Vn,Yn;jn(Di),V?(Vn=Di,Yn=Di.map(function(fn){return Jn.current.get(fn)})):(Vn=[],Yn=[],Di.forEach(function(fn){var Vo=jt(fn);Vo!==void 0&&(Vn.push(fn),Yn.push(Vo))})),Wr(Vn),le==null||le(Vn,Yn)},[Wr,jt,le,V]),_o=Object(Q.useCallback)(function(Di,Vn,Yn,fn){if(ue){var Vo=Yn.map(function(rs){return jt(rs)});ue(jt(Di),Vn,Vo,fn)}Po(Yn)},[ue,jt,Po]),Ii=Object(Q.useMemo)(function(){if(!ut||yt)return null;var Di=ut===!0?[yf,Ol,hp]:ut;return Di.map(function(Vn){return Vn===yf?{key:"all",text:Yr.selectionAll,onSelect:function(){Po(Yt.map(function(fn,Vo){return gr(fn,Vo)}))}}:Vn===Ol?{key:"invert",text:Yr.selectInvert,onSelect:function(){var fn=new Set(ua);sr.forEach(function(rs,_s){var ns=gr(rs,_s);fn.has(ns)?fn.delete(ns):fn.add(ns)});var Vo=Array.from(fn);Pe&&(Object($a.a)(!1,"Table","`onSelectInvert` will be removed in future. Please use `onChange` instead."),Pe(Vo)),Po(Vo)}}:Vn===hp?{key:"none",text:Yr.selectNone,onSelect:function(){Re==null||Re(),Po([])}}:Vn})},[ut,ua,sr,gr,Pe,Po]),qn=Object(Q.useCallback)(function(Di){if(!j)return Di;var Vn=new Set(ua),Yn=Ai.map(gr).filter(function(me){return!Oi.get(me).disabled}),fn=Yn.every(function(me){return Vn.has(me)}),Vo=Yn.some(function(me){return Vn.has(me)}),rs=function(){var Za=[];fn?Yn.forEach(function(xa){Vn.delete(xa),Za.push(xa)}):Yn.forEach(function(xa){Vn.has(xa)||(Vn.add(xa),Za.push(xa))});var co=Array.from(Vn);we==null||we(!fn,co.map(function(xa){return jt(xa)}),Za.map(function(xa){return jt(xa)})),Po(co)},_s;if(it!=="radio"){var ns;if(Ii){var Uh=Q.createElement(ou.a,{getPopupContainer:xr},Ii.map(function(me,Za){var co=me.key,xa=me.text,Zr=me.onSelect;return Q.createElement(ou.a.Item,{key:co||Za,onClick:function(){Zr==null||Zr(Yn)}},xa)}));ns=Q.createElement("div",{className:"".concat(er,"-selection-extra")},Q.createElement(vf.a,{overlay:Uh,getPopupContainer:xr},Q.createElement("span",null,Q.createElement(Yu.a,null))))}var Xi=Ai.map(function(me,Za){var co=gr(me,Za),xa=Oi.get(co)||{};return Object(Ne.a)({checked:Vn.has(co)},xa)}).filter(function(me){var Za=me.disabled;return Za}),wl=!!Xi.length&&Xi.length===Ai.length,gs=wl&&Xi.every(function(me){var Za=me.checked;return Za}),Ei=wl&&Xi.some(function(me){var Za=me.checked;return Za});_s=!yt&&Q.createElement("div",{className:"".concat(er,"-selection")},Q.createElement(hs.a,{checked:wl?gs:!!Ai.length&&fn,indeterminate:wl?!gs&&Ei:!fn&&Vo,onChange:rs,disabled:Ai.length===0||wl,skipGroup:!0}),ns)}var ca;it==="radio"?ca=function(Za,co,xa){var Zr=gr(co,xa),No=Vn.has(Zr);return{node:Q.createElement(gd.a,Object(Ne.a)({},Oi.get(Zr),{checked:No,onClick:function(Ce){return Ce.stopPropagation()},onChange:function(Ce){Vn.has(Zr)||_o(Zr,!0,[Zr],Ce.nativeEvent)}})),checked:No}}:ca=function(Za,co,xa){var Zr,No=gr(co,xa),Wo=Vn.has(No),Ce=ji.has(No),Pu=Oi.get(No),Ru;return ir==="nest"?(Ru=Ce,Object($a.a)(typeof(Pu==null?void 0:Pu.indeterminate)!="boolean","Table","set `indeterminate` using `rowSelection.getCheckboxProps` is not allowed with tree structured dataSource.")):Ru=(Zr=Pu==null?void 0:Pu.indeterminate)!==null&&Zr!==void 0?Zr:Ce,{node:Q.createElement(hs.a,Object(Ne.a)({},Pu,{indeterminate:Ru,checked:Wo,skipGroup:!0,onClick:function(kh){return kh.stopPropagation()},onChange:function(kh){var Gl=kh.nativeEvent,nc=Gl.shiftKey,ol=-1,ph=-1;if(nc&&ar){var al=new Set([Co,No]);Yn.some(function(mo,Hh){if(al.has(mo))if(ol===-1)ol=Hh;else return ph=Hh,!0;return!1})}if(ph!==-1&&ol!==ph&&ar){var Ro=Yn.slice(ol,ph+1),Ou=[];Wo?Ro.forEach(function(mo){Vn.has(mo)&&(Ou.push(mo),Vn.delete(mo))}):Ro.forEach(function(mo){Vn.has(mo)||(Ou.push(mo),Vn.add(mo))});var gh=Array.from(Vn);Ue==null||Ue(!Wo,gh.map(function(mo){return jt(mo)}),Ou.map(function(mo){return jt(mo)})),Po(gh)}else{var ic=no;if(ar){var Nf=Wo?dd(ic,No):tg(ic,No);_o(No,!Wo,Nf,Gl)}else{var go=pd([].concat(Object(Ho.a)(ic),[No]),!0,Wi,Ji),io=go.checkedKeys,oi=go.halfCheckedKeys,uu=io;if(Wo){var pa=new Set(io);pa.delete(No),uu=pd(Array.from(pa),{checked:!1,halfCheckedKeys:oi},Wi,Ji).checkedKeys}_o(No,!Wo,uu,Gl)}}wo(No)}})),checked:Wo}};var Mo=function(Za,co,xa){var Zr=ca(Za,co,xa),No=Zr.node,Wo=Zr.checked;return Ct?Ct(Wo,co,xa,No):No},Na=Object(ce.a)({width:Ke,className:"".concat(er,"-selection-column"),title:j.columnTitle||_s,render:Mo},Ac,{className:"".concat(er,"-selection-col")});if(ir==="row"&&Di.length&&!qt){var ha=Object(ff.a)(Di),kl=ha[0],Ya=ha.slice(1),Hl=rt||Su(Ya[0]);return Hl&&(kl.fixed=Hl),[kl,Object(Ne.a)(Object(Ne.a)({},Na),{fixed:Hl})].concat(Object(Ho.a)(Ya))}return[Object(Ne.a)(Object(Ne.a)({},Na),{fixed:rt||Su(Di[0])})].concat(Object(Ho.a)(Di))},[gr,Ai,j,no,ua,ji,Ke,Ii,ir,Co,Oi,Ue,_o,Ji]);return[qn,ua]}var bh={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},Lh=bh,Af=function(J,$){return Q.createElement(Gc.a,Object.assign({},J,{ref:$,icon:Lh}))};Af.displayName="CaretDownOutlined";var Cf=Q.forwardRef(Af),md={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},Ph=md,Tu=function(J,$){return Q.createElement(Gc.a,Object.assign({},J,{ref:$,icon:Ph}))};Tu.displayName="CaretUpOutlined";var ys=Q.forwardRef(Tu);function xs(j,J){return"key"in j&&j.key!==void 0&&j.key!==null?j.key:j.dataIndex?Array.isArray(j.dataIndex)?j.dataIndex.join("."):j.dataIndex:J}function $c(j,J){return J?"".concat(J,"-").concat(j):"".concat(j)}function Pa(j,J){return typeof j=="function"?j(J):j}var As="ascend",eh="descend";function au(j){return Object(va.a)(j.sorter)==="object"&&typeof j.sorter.multiple=="number"?j.sorter.multiple:!1}function Va(j){return typeof j=="function"?j:j&&Object(va.a)(j)==="object"&&j.compare?j.compare:!1}function ng(j,J){return J?j[j.indexOf(J)+1]:j[0]}function wf(j,J,$){var V=[];function H(te,ie){V.push({column:te,key:xs(te,ie),multiplePriority:au(te),sortOrder:te.sortOrder})}return(j||[]).forEach(function(te,ie){var le=$c(ie,$);te.children?("sortOrder"in te&&H(te,le),V=[].concat(Object(Ho.a)(V),Object(Ho.a)(wf(te.children,J,le)))):te.sorter&&("sortOrder"in te?H(te,le):J&&te.defaultSortOrder&&V.push({column:te,key:xs(te,le),multiplePriority:au(te),sortOrder:te.defaultSortOrder}))}),V}function Ic(j,J,$,V,H,te,ie,le){return(J||[]).map(function(ue,we){var Pe=$c(we,le),Re=ue;if(Re.sorter){var Ue=Re.sortDirections||H,Ke=Re.showSorterTooltip===void 0?ie:Re.showSorterTooltip,it=xs(Re,Pe),ut=$.find(function(ir){var Pr=ir.key;return Pr===it}),rt=ut?ut.sortOrder:null,Ct=ng(Ue,rt),yt=Ue.includes(As)&&Q.createElement(ys,{className:Lt()("".concat(j,"-column-sorter-up"),{active:rt===As})}),Kt=Ue.includes(eh)&&Q.createElement(Cf,{className:Lt()("".concat(j,"-column-sorter-down"),{active:rt===eh})}),ar=te||{},er=ar.cancelSort,Yt=ar.triggerAsc,sr=ar.triggerDesc,jt=er;Ct===eh?jt=sr:Ct===As&&(jt=Yt);var gr=Object(va.a)(Ke)==="object"?Ke:{title:jt};Re=Object(Ne.a)(Object(Ne.a)({},Re),{className:Lt()(Re.className,Object(ce.a)({},"".concat(j,"-column-sort"),rt)),title:function(Pr){var Yr=Q.createElement("div",{className:"".concat(j,"-column-sorters")},Q.createElement("span",{className:"".concat(j,"-column-title")},Pa(ue.title,Pr)),Q.createElement("span",{className:Lt()("".concat(j,"-column-sorter"),Object(ce.a)({},"".concat(j,"-column-sorter-full"),!!(yt&&Kt)))},Q.createElement("span",{className:"".concat(j,"-column-sorter-inner")},yt,Kt)));return Ke?Q.createElement(jc.a,gr,Yr):Yr},onHeaderCell:function(Pr){var Yr=ue.onHeaderCell&&ue.onHeaderCell(Pr)||{},qt=Yr.onClick;return Yr.onClick=function(xr){V({column:ue,key:it,sortOrder:Ct,multiplePriority:au(ue)}),qt&&qt(xr)},Yr.className=Lt()(Yr.className,"".concat(j,"-column-has-sorters")),Yr}})}return"children"in Re&&(Re=Object(Ne.a)(Object(Ne.a)({},Re),{children:Ic(j,Re.children,$,V,H,te,ie,Pe)})),Re})}function th(j){var J=j.column,$=j.sortOrder;return{column:J,order:$,field:J.dataIndex,columnKey:J.key}}function fs(j){var J=j.filter(function($){var V=$.sortOrder;return V}).map(th);return J.length===0&&j.length?Object(Ne.a)(Object(Ne.a)({},th(j[j.length-1])),{column:void 0}):J.length<=1?J[0]||{}:J}function vd(j,J,$){var V=J.slice().sort(function(ie,le){return le.multiplePriority-ie.multiplePriority}),H=j.slice(),te=V.filter(function(ie){var le=ie.column.sorter,ue=ie.sortOrder;return Va(le)&&ue});return te.length?H.sort(function(ie,le){for(var ue=0;ue<te.length;ue+=1){var we=te[ue],Pe=we.column.sorter,Re=we.sortOrder,Ue=Va(Pe);if(Ue&&Re){var Ke=Ue(ie,le,Re);if(Ke!==0)return Re===As?Ke:-Ke}}return 0}).map(function(ie){var le=ie[$];return le?Object(Ne.a)(Object(Ne.a)({},ie),Object(ce.a)({},$,vd(le,J,$))):ie}):H}function _f(j){var J=j.prefixCls,$=j.mergedColumns,V=j.onSorterChange,H=j.sortDirections,te=j.tableLocale,ie=j.showSorterTooltip,le=Q.useState(wf($,!0)),ue=Object(Go.a)(le,2),we=ue[0],Pe=ue[1],Re=Q.useMemo(function(){var rt=!0,Ct=wf($,!1);if(!Ct.length)return we;var yt=[];function Kt(er){rt?yt.push(er):yt.push(Object(Ne.a)(Object(Ne.a)({},er),{sortOrder:null}))}var ar=null;return Ct.forEach(function(er){ar===null?(Kt(er),er.sortOrder&&(er.multiplePriority===!1?rt=!1:ar=!0)):(ar&&er.multiplePriority!==!1||(rt=!1),Kt(er))}),yt},[$,we]),Ue=Q.useMemo(function(){var rt=Re.map(function(Ct){var yt=Ct.column,Kt=Ct.sortOrder;return{column:yt,order:Kt}});return{sortColumns:rt,sortColumn:rt[0]&&rt[0].column,sortOrder:rt[0]&&rt[0].order}},[Re]);function Ke(rt){var Ct;rt.multiplePriority===!1||!Re.length||Re[0].multiplePriority===!1?Ct=[rt]:Ct=[].concat(Object(Ho.a)(Re.filter(function(yt){var Kt=yt.key;return Kt!==rt.key})),[rt]),Pe(Ct),V(fs(Ct),Ct)}var it=function(Ct){return Ic(J,Ct,Re,Ke,H,te,ie)},ut=function(){return fs(Re)};return[it,Re,Ue,ut]}var Rh=Ae("Y+p1"),p0=Ae.n(Rh),Cs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"},Ki=Cs,ri=function(J,$){return Q.createElement(Gc.a,Object.assign({},J,{ref:$,icon:Ki}))};ri.displayName="FilterFilled";var qo=Q.forwardRef(ri),po=Ae("ECub"),fp=function(J){return Q.createElement("div",{className:J.className,onClick:function(V){return V.stopPropagation()}},J.children)},ds=fp,vl=Ae("hkKa");function xi(j){var J=Q.useRef(j),$=Object(vl.a)();return[function(){return J.current},function(V){J.current=V,$()}]}var Un=ou.a.SubMenu,Ju=ou.a.Item;function sa(j){return j.some(function(J){var $=J.children;return $})}function Wa(j){var J=j.filters,$=j.prefixCls,V=j.filteredKeys,H=j.filterMultiple,te=j.locale;return J.length===0?Q.createElement(Ju,{key:"empty"},Q.createElement("div",{style:{margin:"16px 0"}},Q.createElement(po.a,{image:po.a.PRESENTED_IMAGE_SIMPLE,description:te.filterEmptyText,imageStyle:{height:24}}))):J.map(function(ie,le){var ue=String(ie.value);if(ie.children)return Q.createElement(Un,{key:ue||le,title:ie.text,popupClassName:"".concat($,"-dropdown-submenu")},Wa({filters:ie.children,prefixCls:$,filteredKeys:V,filterMultiple:H,locale:te}));var we=H?hs.a:gd.a;return Q.createElement(Ju,{key:ie.value!==void 0?ue:le},Q.createElement(we,{checked:V.includes(ue)}),Q.createElement("span",null,ie.text))})}function Ds(j){var J,$=j.tablePrefixCls,V=j.prefixCls,H=j.column,te=j.dropdownPrefixCls,ie=j.columnKey,le=j.filterMultiple,ue=j.filterState,we=j.triggerFilter,Pe=j.locale,Re=j.children,Ue=j.getPopupContainer,Ke=H.filterDropdownVisible,it=H.onFilterDropdownVisibleChange,ut=Q.useState(!1),rt=Object(Go.a)(ut,2),Ct=rt[0],yt=rt[1],Kt=!!(ue&&(((J=ue.filteredKeys)===null||J===void 0?void 0:J.length)||ue.forceFiltered)),ar=function(ii){yt(ii),it==null||it(ii)},er=typeof Ke=="boolean"?Ke:Ct,Yt=ue==null?void 0:ue.filteredKeys,sr=xi(Yt||[]),jt=Object(Go.a)(sr,2),gr=jt[0],ir=jt[1],Pr=function(ii){var Ti=ii.selectedKeys;ir(Ti)};Q.useEffect(function(){Pr({selectedKeys:Yt||[]})},[Yt]);var Yr=Q.useState([]),qt=Object(Go.a)(Yr,2),xr=qt[0],cn=qt[1],Cn=Q.useRef(),Gn=function(ii){Cn.current=window.setTimeout(function(){cn(ii)})},Wr=function(){window.clearTimeout(Cn.current)};Q.useEffect(function(){return function(){window.clearTimeout(Cn.current)}},[]);var Jn=function(ii){var Ti=ii&&ii.length?ii:null;if(Ti===null&&(!ue||!ue.filteredKeys)||p0()(Ti,ue==null?void 0:ue.filteredKeys))return null;we({column:H,key:ie,filteredKeys:Ti})},jn=function(){ar(!1),Jn(gr())},Xn=function(){ir([]),ar(!1),Jn([])},Wi=function(){var ii=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{closeDropdown:!0},Ti=ii.closeDropdown;Ti&&ar(!1),Jn(gr())},Ai=function(ii){ii&&Yt!==void 0&&ir(Yt||[]),ar(ii),!ii&&!H.filterDropdown&&jn()},Oi=Lt()(Object(ce.a)({},"".concat(te,"-menu-without-submenu"),!sa(H.filters||[]))),Ji;if(typeof H.filterDropdown=="function")Ji=H.filterDropdown({prefixCls:"".concat(te,"-custom"),setSelectedKeys:function(ii){return Pr({selectedKeys:ii})},selectedKeys:gr(),confirm:Wi,clearFilters:Xn,filters:H.filters,visible:er});else if(H.filterDropdown)Ji=H.filterDropdown;else{var En=gr()||[];Ji=Q.createElement(Q.Fragment,null,Q.createElement(ou.a,{multiple:le,prefixCls:"".concat(te,"-menu"),className:Oi,onClick:Wr,onSelect:Pr,onDeselect:Pr,selectedKeys:En,getPopupContainer:Ue,openKeys:xr,onOpenChange:Gn},Wa({filters:H.filters||[],prefixCls:V,filteredKeys:gr(),filterMultiple:le,locale:Pe})),Q.createElement("div",{className:"".concat(V,"-dropdown-btns")},Q.createElement(ko.a,{type:"link",size:"small",disabled:En.length===0,onClick:Xn},Pe.filterReset),Q.createElement(ko.a,{type:"primary",size:"small",onClick:jn},Pe.filterConfirm)))}var $i=Q.createElement(ds,{className:"".concat(V,"-dropdown")},Ji),no;typeof H.filterIcon=="function"?no=H.filterIcon(Kt):H.filterIcon?no=H.filterIcon:no=Q.createElement(qo,null);var Ao=Q.useContext(xe.b),ua=Ao.direction;return Q.createElement("div",{className:"".concat(V,"-column")},Q.createElement("span",{className:"".concat($,"-column-title")},Re),Q.createElement(vf.a,{overlay:$i,trigger:["click"],visible:er,onVisibleChange:Ai,getPopupContainer:Ue,placement:ua==="rtl"?"bottomLeft":"bottomRight"},Q.createElement("span",{role:"button",tabIndex:-1,className:Lt()("".concat(V,"-trigger"),{active:Kt}),onClick:function(ii){ii.stopPropagation()}},no)))}var Ec=Ds;function yl(j,J,$){var V=[];return(j||[]).forEach(function(H,te){var ie,le=$c(te,$);if(H.filters||"filterDropdown"in H||"onFilter"in H)if("filteredValue"in H){var ue=H.filteredValue;"filterDropdown"in H||(ue=(ie=ue==null?void 0:ue.map(String))!==null&&ie!==void 0?ie:ue),V.push({column:H,key:xs(H,le),filteredKeys:ue,forceFiltered:H.filtered})}else V.push({column:H,key:xs(H,le),filteredKeys:J&&H.defaultFilteredValue?H.defaultFilteredValue:void 0,forceFiltered:H.filtered});"children"in H&&(V=[].concat(Object(Ho.a)(V),Object(Ho.a)(yl(H.children,J,le))))}),V}function Dl(j,J,$,V,H,te,ie,le){return $.map(function(ue,we){var Pe=$c(we,le),Re=ue.filterMultiple,Ue=Re===void 0?!0:Re,Ke=ue;if(Ke.filters||Ke.filterDropdown){var it=xs(Ke,Pe),ut=V.find(function(rt){var Ct=rt.key;return it===Ct});Ke=Object(Ne.a)(Object(Ne.a)({},Ke),{title:function(Ct){return Q.createElement(Ec,{tablePrefixCls:j,prefixCls:"".concat(j,"-filter"),dropdownPrefixCls:J,column:Ke,columnKey:it,filterState:ut,filterMultiple:Ue,triggerFilter:H,locale:ie,getPopupContainer:te},Pa(ue.title,Ct))}})}return"children"in Ke&&(Ke=Object(Ne.a)(Object(Ne.a)({},Ke),{children:Dl(j,J,Ke.children,V,H,te,ie,Pe)})),Ke})}function Mf(j){var J=[];return(j||[]).forEach(function($){var V=$.value,H=$.children;J.push(V),H&&(J=[].concat(Object(Ho.a)(J),Object(Ho.a)(Mf(H))))}),J}function om(j){var J={};return j.forEach(function($){var V=$.key,H=$.filteredKeys,te=$.column,ie=te.filters,le=te.filterDropdown;if(le)J[V]=H||null;else if(Array.isArray(H)){var ue=Mf(ie);J[V]=ue.filter(function(we){return H.includes(String(we))})}else J[V]=null}),J}function yd(j,J){return J.reduce(function($,V){var H=V.column,te=H.onFilter,ie=H.filters,le=V.filteredKeys;return te&&le&&le.length?$.filter(function(ue){return le.some(function(we){var Pe=Mf(ie),Re=Pe.findIndex(function(Ke){return String(Ke)===String(we)}),Ue=Re!==-1?Pe[Re]:we;return te(Ue,ue)})}):$},j)}function dp(j){var J=j.prefixCls,$=j.dropdownPrefixCls,V=j.mergedColumns,H=j.onFilterChange,te=j.getPopupContainer,ie=j.locale,le=Q.useState(yl(V,!0)),ue=Object(Go.a)(le,2),we=ue[0],Pe=ue[1],Re=Q.useMemo(function(){var ut=yl(V,!1),rt=ut.every(function(yt){var Kt=yt.filteredKeys;return Kt===void 0});if(rt)return we;var Ct=ut.every(function(yt){var Kt=yt.filteredKeys;return Kt!==void 0});return Object($a.a)(rt||Ct,"Table","`FilteredKeys` should all be controlled or not controlled."),ut},[V,we]),Ue=Q.useCallback(function(){return om(Re)},[Re]),Ke=function(rt){var Ct=Re.filter(function(yt){var Kt=yt.key;return Kt!==rt.key});Ct.push(rt),Pe(Ct),H(om(Ct),Ct)},it=function(rt){return Dl(J,$,rt,Re,Ke,te,ie)};return[it,Re,Ue]}var el=dp;function tl(j,J){return j.map(function($){var V=Object(Ne.a)({},$);return V.title=Pa($.title,J),"children"in V&&(V.children=tl(V.children,J)),V})}function ws(j){var J=Q.useCallback(function($){return tl($,j)},[j]);return[J]}function rh(j){return function($){var V,H=$.prefixCls,te=$.onExpand,ie=$.record,le=$.expanded,ue=$.expandable,we="".concat(H,"-row-expand-icon");return Q.createElement("button",{type:"button",onClick:function(Re){te(ie,Re),Re.stopPropagation()},className:Lt()(we,(V={},Object(ce.a)(V,"".concat(we,"-spaced"),!ue),Object(ce.a)(V,"".concat(we,"-expanded"),ue&&le),Object(ce.a)(V,"".concat(we,"-collapsed"),ue&&!le),V)),"aria-label":le?j.collapse:j.expand})}}var uo=rh,ya=Ae("wgJM");function _r(j){return j!=null&&j===j.window}function xd(j,J){var $;if(typeof window=="undefined")return 0;var V=J?"scrollTop":"scrollLeft",H=0;return _r(j)?H=j[J?"pageYOffset":"pageXOffset"]:j instanceof Document?H=j.documentElement[V]:j&&(H=j[V]),j&&!_r(j)&&typeof H!="number"&&(H=($=(j.ownerDocument||j).documentElement)===null||$===void 0?void 0:$[V]),H}function ig(j,J,$,V){var H=$-J;return j/=V/2,j<1?H/2*j*j*j+J:H/2*((j-=2)*j*j+2)+J}function Sf(j){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=J.getContainer,V=$===void 0?function(){return window}:$,H=J.callback,te=J.duration,ie=te===void 0?450:te,le=V(),ue=xd(le,!0),we=Date.now(),Pe=function Re(){var Ue=Date.now(),Ke=Ue-we,it=ig(Ke>ie?ie:Ke,ue,j,ie);_r(le)?le.scrollTo(window.pageXOffset,it):le instanceof HTMLDocument||le.constructor.name==="HTMLDocument"?le.documentElement.scrollTop=it:le.scrollTop=it,Ke<ie?Object(ya.a)(Re):typeof H=="function"&&H()};Object(ya.a)(Pe)}var pp=Ae("D7Yy");function Tf(j){return null}var og=Tf;function nh(j){return null}var Xs=nh,vv=[];function rl(j){var J,$=j.prefixCls,V=j.className,H=j.style,te=j.size,ie=j.bordered,le=j.dropdownPrefixCls,ue=j.dataSource,we=j.pagination,Pe=j.rowSelection,Re=j.rowKey,Ue=j.rowClassName,Ke=j.columns,it=j.children,ut=j.childrenColumnName,rt=j.onChange,Ct=j.getPopupContainer,yt=j.loading,Kt=j.expandIcon,ar=j.expandable,er=j.expandedRowRender,Yt=j.expandIconColumnIndex,sr=j.indentSize,jt=j.scroll,gr=j.sortDirections,ir=j.locale,Pr=j.showSorterTooltip,Yr=Pr===void 0?!0:Pr;Object($a.a)(!(typeof Re=="function"&&Re.length>1),"Table","`index` parameter of `rowKey` function is deprecated. There is no guarantee that it will work as expected.");var qt=Object(oa.a)(),xr=Q.useMemo(function(){var go=new Set(Object.keys(qt).filter(function(io){return qt[io]}));return(Ke||rf(it)).filter(function(io){return!io.responsive||io.responsive.some(function(oi){return go.has(oi)})})},[it,Ke,qt]),cn=Object(Er.a)(j,["className","style","columns"]),Cn=Q.useContext(Ko.b),Gn=Q.useContext(xe.b),Wr=Gn.locale,Jn=Wr===void 0?pp.a:Wr,jn=Gn.renderEmpty,Xn=Gn.direction,Wi=te||Cn,Ai=Object(Ne.a)(Object(Ne.a)({},Jn.Table),ir),Oi=ue||vv,Ji=Q.useContext(xe.b),En=Ji.getPrefixCls,$i=En("table",$),no=En("dropdown",le),Ao=Object(Ne.a)({childrenColumnName:ut,expandIconColumnIndex:Yt},ar),ua=Ao.childrenColumnName,ji=ua===void 0?"children":ua,ii=Q.useMemo(function(){return Oi.some(function(go){var io;return(io=go)===null||io===void 0?void 0:io[ji]})?"nest":er||ar&&ar.expandedRowRender?"row":null},[Oi]),Ti={body:Q.useRef()},Co=Q.useMemo(function(){return typeof Re=="function"?Re:function(go){var io;return(io=go)===null||io===void 0?void 0:io[Re]}},[Re]),wo=us(Oi,ji,Co),Po=Object(Go.a)(wo,1),_o=Po[0],Ii={},qn=function(io,oi){var uu=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,pa=Object(Ne.a)(Object(Ne.a)({},Ii),io);uu&&(Ii.resetPagination(),pa.pagination.current&&(pa.pagination.current=1),we&&we.onChange&&we.onChange(1,pa.pagination.pageSize)),jt&&jt.scrollToFirstRowOnChange!==!1&&Ti.body.current&&Sf(0,{getContainer:function(){return Ti.body.current}}),rt==null||rt(pa.pagination,pa.filters,pa.sorter,{currentDataSource:yd(vd(Oi,pa.sorterStates,ji),pa.filterStates),action:oi})},Di=function(io,oi){qn({sorter:io,sorterStates:oi},"sort",!1)},Vn=_f({prefixCls:$i,mergedColumns:xr,onSorterChange:Di,sortDirections:gr||["ascend","descend"],tableLocale:Ai,showSorterTooltip:Yr}),Yn=Object(Go.a)(Vn,4),fn=Yn[0],Vo=Yn[1],rs=Yn[2],_s=Yn[3],ns=Q.useMemo(function(){return vd(Oi,Vo,ji)},[Oi,Vo]);Ii.sorter=_s(),Ii.sorterStates=Vo;var Uh=function(io,oi){qn({filters:io,filterStates:oi},"filter",!0)},Xi=el({prefixCls:$i,locale:Ai,dropdownPrefixCls:no,mergedColumns:xr,onFilterChange:Uh,getPopupContainer:Ct}),wl=Object(Go.a)(Xi,3),gs=wl[0],Ei=wl[1],ca=wl[2],Mo=yd(ns,Ei);Ii.filters=ca(),Ii.filterStates=Ei;var Na=Q.useMemo(function(){return Object(Ne.a)({},rs)},[rs]),ha=ws(Na),kl=Object(Go.a)(ha,1),Ya=kl[0],Hl=function(io,oi){qn({pagination:Object(Ne.a)(Object(Ne.a)({},Ii.pagination),{current:io,pageSize:oi})},"paginate")},me=ba(Mo.length,we,Hl),Za=Object(Go.a)(me,2),co=Za[0],xa=Za[1];Ii.pagination=we===!1?{}:tm(we,co),Ii.resetPagination=xa;var Zr=Q.useMemo(function(){if(we===!1||!co.pageSize)return Mo;var go=co.current,io=go===void 0?1:go,oi=co.total,uu=co.pageSize,pa=uu===void 0?Tc:uu;return Object($a.a)(io>0,"Table","`current` should be positive number."),Mo.length<oi?Mo.length>pa?(Object($a.a)(!1,"Table","`dataSource` length is less than `pagination.total` but large than `pagination.pageSize`. Please make sure your config correct data with async mode."),Mo.slice((io-1)*pa,io*pa)):Mo:Mo.slice((io-1)*pa,io*pa)},[!!we,Mo,co&&co.current,co&&co.pageSize,co&&co.total]),No=Eh(Pe,{prefixCls:$i,data:Mo,pageData:Zr,getRowKey:Co,getRecordByKey:_o,expandType:ii,childrenColumnName:ji,locale:Ai,expandIconColumnIndex:Ao.expandIconColumnIndex,getPopupContainer:Ct}),Wo=Object(Go.a)(No,2),Ce=Wo[0],Pu=Wo[1],Ru=function(io,oi,uu){var pa;return typeof Ue=="function"?pa=Lt()(Ue(io,oi,uu)):pa=Lt()(Ue),Lt()(Object(ce.a)({},"".concat($i,"-row-selected"),Pu.has(Co(io,oi))),pa)};Ao.__PARENT_RENDER_ICON__=Ao.expandIcon,Ao.expandIcon=Ao.expandIcon||Kt||uo(Ai),ii==="nest"&&Ao.expandIconColumnIndex===void 0?Ao.expandIconColumnIndex=Pe?1:0:Ao.expandIconColumnIndex>0&&Pe&&(Ao.expandIconColumnIndex-=1),typeof Ao.indentSize!="number"&&(Ao.indentSize=typeof sr=="number"?sr:15);var Ms=Q.useCallback(function(go){return Ya(Ce(gs(fn(go))))},[fn,gs,Ce]),kh,Gl;if(we!==!1&&(co==null?void 0:co.total)){var nc;co.size?nc=co.size:nc=Wi==="small"||Wi==="middle"?"small":void 0;var ol=function(io){return Q.createElement(zn,Object(Ne.a)({className:"".concat($i,"-pagination ").concat($i,"-pagination-").concat(io)},co,{size:nc}))},ph=Xn==="rtl"?"left":"right",al=co.position;if(al!==null&&Array.isArray(al)){var Ro=al.find(function(go){return go.indexOf("top")!==-1}),Ou=al.find(function(go){return go.indexOf("bottom")!==-1}),gh=al.every(function(go){return"".concat(go)==="none"});!Ro&&!Ou&&!gh&&(Gl=ol(ph)),Ro&&(kh=ol(Ro.toLowerCase().replace("top",""))),Ou&&(Gl=ol(Ou.toLowerCase().replace("bottom","")))}else Gl=ol(ph)}var ic;typeof yt=="boolean"?ic={spinning:yt}:Object(va.a)(yt)==="object"&&(ic=Object(Ne.a)({spinning:!0},yt));var Nf=Lt()("".concat($i,"-wrapper"),Object(ce.a)({},"".concat($i,"-wrapper-rtl"),Xn==="rtl"),V);return Q.createElement("div",{className:Nf,style:H},Q.createElement(Vu.a,Object(Ne.a)({spinning:!1},ic),kh,Q.createElement(Ga,Object(Ne.a)({},cn,{columns:xr,direction:Xn,expandable:Ao,prefixCls:$i,className:Lt()((J={},Object(ce.a)(J,"".concat($i,"-middle"),Wi==="middle"),Object(ce.a)(J,"".concat($i,"-small"),Wi==="small"),Object(ce.a)(J,"".concat($i,"-bordered"),ie),Object(ce.a)(J,"".concat($i,"-empty"),Oi.length===0),J)),data:Zr,rowKey:Co,rowClassName:Ru,emptyText:ir&&ir.emptyText||jn("Table"),internalHooks:lo,internalRefs:Ti,transformColumns:Ms})),Gl))}rl.defaultProps={rowKey:"key"},rl.SELECTION_ALL=yf,rl.SELECTION_INVERT=Ol,rl.SELECTION_NONE=hp,rl.Column=og,rl.ColumnGroup=Xs,rl.Summary=cd;var gp=rl,xl=gp,ih=Ae("oBTY"),If=Ae("fWQN"),oh=Ae("mtLc"),qu=Ae("yKVA"),su=Ae("879j"),yv=Ae("jrin"),Ef=Ae("PpiC"),Gi=Ae("GNNt"),xv={useBreakpoint:oa.a},am=Ae("YSkC"),mp=Ae("BGR+"),ag=Ae("aK+R"),Av=function(J){var $=J.style,V=J.prefix;return Oe.a.createElement("div",{className:"".concat(V,"-loading-content"),style:$},Oe.a.createElement(ye,{gutter:8},Oe.a.createElement(Ye,{span:22},Oe.a.createElement("div",{className:"".concat(V,"-loading-block")}))),Oe.a.createElement(ye,{gutter:8},Oe.a.createElement(Ye,{span:8},Oe.a.createElement("div",{className:"".concat(V,"-loading-block")})),Oe.a.createElement(Ye,{span:15},Oe.a.createElement("div",{className:"".concat(V,"-loading-block")}))),Oe.a.createElement(ye,{gutter:8},Oe.a.createElement(Ye,{span:6},Oe.a.createElement("div",{className:"".concat(V,"-loading-block")})),Oe.a.createElement(Ye,{span:18},Oe.a.createElement("div",{className:"".concat(V,"-loading-block")}))),Oe.a.createElement(ye,{gutter:8},Oe.a.createElement(Ye,{span:13},Oe.a.createElement("div",{className:"".concat(V,"-loading-block")})),Oe.a.createElement(Ye,{span:9},Oe.a.createElement("div",{className:"".concat(V,"-loading-block")}))),Oe.a.createElement(ye,{gutter:8},Oe.a.createElement(Ye,{span:4},Oe.a.createElement("div",{className:"".concat(V,"-loading-block")})),Oe.a.createElement(Ye,{span:3},Oe.a.createElement("div",{className:"".concat(V,"-loading-block")})),Oe.a.createElement(Ye,{span:16},Oe.a.createElement("div",{className:"".concat(V,"-loading-block")}))))},sg=Av,nl=Ae("S76h"),Cv=function(J){var $=J.actions,V=J.prefixCls;return $&&$.length?Oe.a.createElement("ul",{className:"".concat(V,"-actions")},$.map(function(H,te){return Oe.a.createElement("li",{style:{width:"".concat(100/$.length,"%")},key:"action-".concat(te)},Oe.a.createElement("span",null,H))})):null},vp=Cv,lg=Ae("df8c"),wv=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","defaultCollapsed","onCollapse","tabs","type"];function bf(){return bf=Object.assign||function(j){for(var J=1;J<arguments.length;J++){var $=arguments[J];for(var V in $)Object.prototype.hasOwnProperty.call($,V)&&(j[V]=$[V])}return j},bf.apply(this,arguments)}function es(j,J){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(j);J&&(V=V.filter(function(H){return Object.getOwnPropertyDescriptor(j,H).enumerable})),$.push.apply($,V)}return $}function ts(j){for(var J=1;J<arguments.length;J++){var $=arguments[J]!=null?arguments[J]:{};J%2?es(Object($),!0).forEach(function(V){Qi(j,V,$[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):es(Object($)).forEach(function(V){Object.defineProperty(j,V,Object.getOwnPropertyDescriptor($,V))})}return j}function Qi(j,J,$){return J in j?Object.defineProperty(j,J,{value:$,enumerable:!0,configurable:!0,writable:!0}):j[J]=$,j}function ah(j){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ah=function($){return typeof $}:ah=function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},ah(j)}function Iu(j,J){return cg(j)||yp(j,J)||ug(j,J)||Oh()}function Oh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ug(j,J){if(!!j){if(typeof j=="string")return Fl(j,J);var $=Object.prototype.toString.call(j).slice(8,-1);if($==="Object"&&j.constructor&&($=j.constructor.name),$==="Map"||$==="Set")return Array.from(j);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return Fl(j,J)}}function Fl(j,J){(J==null||J>j.length)&&(J=j.length);for(var $=0,V=new Array(J);$<J;$++)V[$]=j[$];return V}function yp(j,J){var $=j==null?null:typeof Symbol!="undefined"&&j[Symbol.iterator]||j["@@iterator"];if($!=null){var V=[],H=!0,te=!1,ie,le;try{for($=$.call(j);!(H=(ie=$.next()).done)&&(V.push(ie.value),!(J&&V.length===J));H=!0);}catch(ue){te=!0,le=ue}finally{try{!H&&$.return!=null&&$.return()}finally{if(te)throw le}}return V}}function cg(j){if(Array.isArray(j))return j}function sh(j,J){if(j==null)return{};var $=hg(j,J),V,H;if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(j);for(H=0;H<te.length;H++)V=te[H],!(J.indexOf(V)>=0)&&(!Object.prototype.propertyIsEnumerable.call(j,V)||($[V]=j[V]))}return $}function hg(j,J){if(j==null)return{};var $={},V=Object.keys(j),H,te;for(te=0;te<V.length;te++)H=V[te],!(J.indexOf(H)>=0)&&($[H]=j[H]);return $}var Qu=xv.useBreakpoint,sm=Oe.a.forwardRef(function(j,J){var $,V,H,te=j.className,ie=j.style,le=j.bodyStyle,ue=le===void 0?{}:le,we=j.headStyle,Pe=we===void 0?{}:we,Re=j.title,Ue=j.subTitle,Ke=j.extra,it=j.tip,ut=j.wrap,rt=ut===void 0?!1:ut,Ct=j.layout,yt=j.loading,Kt=j.gutter,ar=Kt===void 0?0:Kt,er=j.tooltip,Yt=j.split,sr=j.headerBordered,jt=sr===void 0?!1:sr,gr=j.bordered,ir=gr===void 0?!1:gr,Pr=j.children,Yr=j.size,qt=j.actions,xr=j.ghost,cn=xr===void 0?!1:xr,Cn=j.hoverable,Gn=Cn===void 0?!1:Cn,Wr=j.direction,Jn=j.collapsed,jn=j.collapsible,Xn=jn===void 0?!1:jn,Wi=j.defaultCollapsed,Ai=Wi===void 0?!1:Wi,Oi=j.onCollapse,Ji=j.tabs,En=j.type,$i=sh(j,wv),no=Object(Q.useContext)(jd.b.ConfigContext),Ao=no.getPrefixCls,ua=Qu(),ji=Object(Qc.a)(Ai,{value:Jn,onChange:Oi}),ii=Iu(ji,2),Ti=ii[0],Co=ii[1],wo=["xxl","xl","lg","md","sm","xs"],Po=function(ca){var Mo=[0,0],Na=Array.isArray(ca)?ca:[ca,0];return Na.forEach(function(ha,kl){if(ah(ha)==="object")for(var Ya=0;Ya<wo.length;Ya+=1){var Hl=wo[Ya];if(ua[Hl]&&ha[Hl]!==void 0){Mo[kl]=ha[Hl];break}}else Mo[kl]=ha||0}),Mo},_o=function(ca,Mo){return ca?Mo:{}},Ii=function(ca){var Mo=ca;if(ah(ca)==="object")for(var Na=0;Na<wo.length;Na+=1){var ha=wo[Na];if(ua[ha]&&ca[ha]!==void 0){Mo=ca[ha];break}}var kl=_o(typeof Mo=="string"&&/\d%|\dpx/i.test(Mo),{width:Mo,flexShrink:0});return{span:Mo,colSpanStyle:kl}},qn=Ao("pro-card"),Di=Po(ar),Vn=Iu(Di,2),Yn=Vn[0],fn=Vn[1],Vo=!1,rs=Oe.a.Children.toArray(Pr),_s=rs.map(function(Ei,ca){var Mo;if(Ei==null||(Mo=Ei.type)===null||Mo===void 0?void 0:Mo.isProCard){var Na;Vo=!0;var ha=Ei.props.colSpan,kl=Ii(ha),Ya=kl.span,Hl=kl.colSpanStyle,me=Lt()(["".concat(qn,"-col")],(Na={},Qi(Na,"".concat(qn,"-split-vertical"),Yt==="vertical"&&ca!==rs.length-1),Qi(Na,"".concat(qn,"-split-horizontal"),Yt==="horizontal"&&ca!==rs.length-1),Qi(Na,"".concat(qn,"-col-").concat(Ya),typeof Ya=="number"&&Ya>=0&&Ya<=24),Na));return Oe.a.createElement("div",{style:ts(ts(ts({},Hl),_o(Yn>0,{paddingRight:Yn/2,paddingLeft:Yn/2})),_o(fn>0,{paddingTop:fn/2,paddingBottom:fn/2})),key:"pro-card-col-".concat(ca),className:me},Oe.a.cloneElement(Ei))}return Ei}),ns=Lt()("".concat(qn),te,($={},Qi($,"".concat(qn,"-border"),ir),Qi($,"".concat(qn,"-contain-card"),Vo),Qi($,"".concat(qn,"-loading"),yt),Qi($,"".concat(qn,"-split"),Yt==="vertical"||Yt==="horizontal"),Qi($,"".concat(qn,"-ghost"),cn),Qi($,"".concat(qn,"-hoverable"),Gn),Qi($,"".concat(qn,"-size-").concat(Yr),Yr),Qi($,"".concat(qn,"-type-").concat(En),En),Qi($,"".concat(qn,"-collapse"),Ti),$)),Uh=Lt()("".concat(qn,"-body"),(V={},Qi(V,"".concat(qn,"-body-center"),Ct==="center"),Qi(V,"".concat(qn,"-body-direction-column"),Yt==="horizontal"||Wr==="column"),Qi(V,"".concat(qn,"-body-wrap"),rt&&Vo),V)),Xi=ts(ts(ts({},_o(Yn>0,{marginRight:-Yn/2,marginLeft:-Yn/2})),_o(fn>0,{marginTop:-fn/2,marginBottom:-fn/2})),ue),wl=Oe.a.isValidElement(yt)?yt:Oe.a.createElement(sg,{prefix:qn,style:ue.padding===0||ue.padding==="0px"?{padding:24}:void 0}),gs=Xn&&Jn===void 0&&Oe.a.createElement(hf.a,{rotate:Ti?void 0:90,className:"".concat(qn,"-collapsible-icon")});return Oe.a.createElement("div",bf({className:ns,style:ie,ref:J},Object(mp.a)($i,["id","prefixCls","colSpan"])),(Re||Ke||gs)&&Oe.a.createElement("div",{className:Lt()("".concat(qn,"-header"),(H={},Qi(H,"".concat(qn,"-header-border"),jt||En==="inner"),Qi(H,"".concat(qn,"-header-collapsible"),gs),H)),style:Pe,onClick:function(){gs&&Co(!Ti)}},Oe.a.createElement("div",{className:"".concat(qn,"-title")},gs,Oe.a.createElement(am.a,{label:Re,tooltip:er||it,subTitle:Ue})),Oe.a.createElement("div",{className:"".concat(qn,"-extra")},Ke)),Ji?Oe.a.createElement("div",{className:"".concat(qn,"-tabs")},Oe.a.createElement(mi.a,bf({onChange:Ji.onChange},Ji),yt?wl:Pr)):Oe.a.createElement("div",{className:Uh,style:Xi},yt?wl:_s),Oe.a.createElement(vp,{actions:qt,prefixCls:qn}))}),Lf=sm,lm=Ae("VzZb"),um=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"];function xp(){return xp=Object.assign||function(j){for(var J=1;J<arguments.length;J++){var $=arguments[J];for(var V in $)Object.prototype.hasOwnProperty.call($,V)&&(j[V]=$[V])}return j},xp.apply(this,arguments)}function fg(j,J){if(j==null)return{};var $=dg(j,J),V,H;if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(j);for(H=0;H<te.length;H++)V=te[H],!(J.indexOf(V)>=0)&&(!Object.prototype.propertyIsEnumerable.call(j,V)||($[V]=j[V]))}return $}function dg(j,J){if(j==null)return{};var $={},V=Object.keys(j),H,te;for(te=0;te<V.length;te++)H=V[te],!(J.indexOf(H)>=0)&&($[H]=j[H]);return $}var cm=function(J){var $=J.key,V=J.tab,H=J.tabKey,te=J.disabled,ie=J.destroyInactiveTabPane,le=J.children,ue=J.className,we=J.style,Pe=J.cardProps,Re=fg(J,um),Ue=Object(Q.useContext)(jd.b.ConfigContext),Ke=Ue.getPrefixCls,it=Ke("pro-card-tabpane"),ut=Lt()(it,ue);return Oe.a.createElement(mi.a.TabPane,xp({key:$,tabKey:H,tab:V,className:ut,style:we,disabled:te,destroyInactiveTabPane:ie},Re),Oe.a.createElement(Lf,Pe,le))},Eu=cm,g0=Ae("u1OI");function Ap(j,J,$){return J in j?Object.defineProperty(j,J,{value:$,enumerable:!0,configurable:!0,writable:!0}):j[J]=$,j}var il=function(J){var $=Object(Q.useContext)(jd.b.ConfigContext),V=$.getPrefixCls,H=V("pro-card-divider"),te=J.className,ie=J.style,le=ie===void 0?{}:ie,ue=J.type,we=Lt()(H,te,Ap({},"".concat(H,"-").concat(ue),ue));return Oe.a.createElement("div",{className:we,style:le})},$u=il;function Dh(){return Dh=Object.assign||function(j){for(var J=1;J<arguments.length;J++){var $=arguments[J];for(var V in $)Object.prototype.hasOwnProperty.call($,V)&&(j[V]=$[V])}return j},Dh.apply(this,arguments)}var hm=function(J){return Oe.a.createElement(Lf,Dh({bodyStyle:{padding:0}},J))},Nl=Lf;Nl.isProCard=!0,Nl.Divider=$u,Nl.TabPane=Eu,Nl.Group=hm;var lh=Nl,ec=lh,Cp=Ae("/s86"),fm=Ae("/MfK"),Ad=Ae("Lyp1"),ui=Ae("LvDl");function Bl(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"\u5317\u4EAC",J=arguments.length>1?arguments[1]:void 0,$=arguments.length>2?arguments[2]:void 0,V=new BMapGL.LocalSearch(j,$);V.search(J)}function pg(j,J,$){function V(H){var te=H._pois,ie=[];te.forEach(function(le){ie.push({key:le.uid,name:le.title,lng:le.point.lng,lat:le.point.lat})}),$(ie)}Bl(j,J,{onSearchComplete:V})}function Qr(){return Math.random().toString(36).slice(-8)}var uh=fc.a.Option,la=function(j){Object(qu.a)($,j);var J=Object(su.a)($);function $(V){var H;Object(If.a)(this,$),H=J.call(this,V),H.handleSearch=function(ue){if(ue)try{var we=H.props.priorSearchCity.arr,Pe=we[we.length-1];pg(Pe,ue,function(Re){Re.length>0&&H.setState({searchResult:Re})})}catch(Re){console.log("Search failed:",Re)}else H.setState({searchResult:[]})},H.debouncedSearch=Object(ui.debounce)(H.handleSearch,800,{leading:!1,trailing:!0}),H.handleChange=function(ue,we){for(var Pe=Object(ih.a)(H.state.searchResult),Re=0;Re<Pe.length;Re+=1){var Ue=Pe[Re];if(Ue.key===we.key){H.setState({pointData:Ue});return}}},H.handleBlur=Object(Kl.a)(ku.a.mark(function ue(){return ku.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,H.props.saveSearchResult(H.state.pointData);case 2:case"end":return Pe.stop()}},ue)}));var te=H.props.record,ie=te.demand,le=Object(Ef.a)(te,["demand"]);return H.state={pointData:le,searchResult:[]},H}return Object(oh.a)($,[{key:"componentWillUnmount",value:function(){this.debouncedSearch.cancel()}},{key:"render",value:function(){var H=this.state.searchResult.map(function(te){return Object(Tr.jsx)(uh,{"data-inspector-line":"76","data-inspector-column":"74","data-inspector-relative-path":"src/components/SearchInput/index.tsx",value:te.name,children:te.name},te.key)});return Object(Tr.jsx)(fc.a,{"data-inspector-line":"79","data-inspector-column":"6","data-inspector-relative-path":"src/components/SearchInput/index.tsx",showSearch:!0,autoFocus:!0,value:this.state.pointData.name,placeholder:"input search text",style:{width:"100%"},defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:this.debouncedSearch,onChange:this.handleChange,onBlur:this.handleBlur,children:H})}}]),$}(Oe.a.Component),ps=la,Fh=Ae("v56E"),gg=Ae("uciX"),Cd=Ae("2W6z"),_v=Ae.n(Cd),dm=Ae("uK0f"),ch=Ae.n(dm);function mg(j,J){if(j===J)return!0;if(!j||!J)return!1;var $=j.length;if(J.length!==$)return!1;for(var V=0;V<$;V++)if(j[V]!==J[V])return!1;return!0}var hh=function(j){Object(Ja.a)($,j);var J=Object(ki.a)($);function $(){var V;return Object(Tn.a)(this,$),V=J.apply(this,arguments),V.menuItems={},V.saveMenuItem=function(H){return function(te){V.menuItems[H]=te}},V}return Object(fa.a)($,[{key:"componentDidMount",value:function(){this.scrollActiveItemToView()}},{key:"componentDidUpdate",value:function(H){!H.visible&&this.props.visible&&this.scrollActiveItemToView()}},{key:"getFieldName",value:function(H){var te=this.props,ie=te.fieldNames,le=te.defaultFieldNames;return ie[H]||le[H]}},{key:"getOption",value:function(H,te){var ie=this.props,le=ie.prefixCls,ue=ie.expandTrigger,we=ie.expandIcon,Pe=ie.loadingIcon,Re=this.props.onSelect.bind(this,H,te),Ue=this.props.onItemDoubleClick.bind(this,H,te),Ke={onClick:Re,onDoubleClick:Ue},it="".concat(le,"-menu-item"),ut=null,rt=H[this.getFieldName("children")]&&H[this.getFieldName("children")].length>0;(rt||H.isLeaf===!1)&&(it+=" ".concat(le,"-menu-item-expand"),H.loading||(ut=Q.createElement("span",{className:"".concat(le,"-menu-item-expand-icon")},we))),ue==="hover"&&(rt||H.isLeaf===!1)&&(Ke={onMouseEnter:this.delayOnSelect.bind(this,Re),onMouseLeave:this.delayOnSelect.bind(this),onClick:Re}),this.isActiveOption(H,te)&&(it+=" ".concat(le,"-menu-item-active"),Ke.ref=this.saveMenuItem(te)),H.disabled&&(it+=" ".concat(le,"-menu-item-disabled"));var Ct=null;H.loading&&(it+=" ".concat(le,"-menu-item-loading"),Ct=Pe||null);var yt="";return"title"in H?yt=H.title:typeof H[this.getFieldName("label")]=="string"&&(yt=H[this.getFieldName("label")]),Q.createElement("li",Object(Ne.a)({key:H[this.getFieldName("value")],className:it,title:yt},Ke,{role:"menuitem",onMouseDown:function(ar){return ar.preventDefault()}}),H[this.getFieldName("label")],ut,Ct)}},{key:"getActiveOptions",value:function(H){var te=this,ie=this.props.options,le=H||this.props.activeValue;return ch()(ie,function(ue,we){return ue[te.getFieldName("value")]===le[we]},{childrenKeyName:this.getFieldName("children")})}},{key:"getShowOptions",value:function(){var H=this,te=this.props.options,ie=this.getActiveOptions().map(function(le){return le[H.getFieldName("children")]}).filter(function(le){return!!le&&le.length>0});return ie.unshift(te),ie}},{key:"delayOnSelect",value:function(H){for(var te=this,ie=arguments.length,le=new Array(ie>1?ie-1:0),ue=1;ue<ie;ue++)le[ue-1]=arguments[ue];this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),typeof H=="function"&&(this.delayTimer=window.setTimeout(function(){H(le),te.delayTimer=null},150))}},{key:"scrollActiveItemToView",value:function(){for(var H=this.getShowOptions().length,te=0;te<H;te++){var ie=this.menuItems[te];ie&&ie.parentElement&&(ie.parentElement.scrollTop=ie.offsetTop)}}},{key:"isActiveOption",value:function(H,te){var ie=this.props.activeValue,le=ie===void 0?[]:ie;return le[te]===H[this.getFieldName("value")]}},{key:"render",value:function(){var H=this,te=this.props,ie=te.prefixCls,le=te.dropdownMenuColumnStyle;return Q.createElement("div",null,this.getShowOptions().map(function(ue,we){return Q.createElement("ul",{className:"".concat(ie,"-menu"),key:we,style:le},ue.map(function(Pe){return H.getOption(Pe,we)}))}))}}]),$}(Q.Component);hh.defaultProps={options:[],value:[],activeValue:[],onSelect:function(){},prefixCls:"rc-cascader-menus",visible:!1,expandTrigger:"click"};var xo=hh,pm={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}}},zl=pm,vg=function(j){Object(Ja.a)($,j);var J=Object(ki.a)($);function $(V){var H;Object(Tn.a)(this,$),H=J.call(this,V),H.setPopupVisible=function(ie){var le=H.state.value;"popupVisible"in H.props||H.setState({popupVisible:ie}),ie&&!H.state.popupVisible&&H.setState({activeValue:le}),H.props.onPopupVisibleChange(ie)},H.handleChange=function(ie,le,ue){var we=le.visible;(ue.type!=="keydown"||ue.keyCode===Fo.a.ENTER)&&(H.props.onChange(ie.map(function(Pe){return Pe[H.getFieldName("value")]}),ie),H.setPopupVisible(we))},H.handlePopupVisibleChange=function(ie){H.setPopupVisible(ie)},H.handleMenuSelect=function(ie,le,ue){var we=H.trigger.getRootDomNode();we&&we.focus&&we.focus();var Pe=H.props,Re=Pe.changeOnSelect,Ue=Pe.loadData,Ke=Pe.expandTrigger;if(!(!ie||ie.disabled)){var it=H.state.activeValue;it=it.slice(0,le+1),it[le]=ie[H.getFieldName("value")];var ut=H.getActiveOptions(it);if(ie.isLeaf===!1&&!ie[H.getFieldName("children")]&&Ue){Re&&H.handleChange(ut,{visible:!0},ue),H.setState({activeValue:it}),Ue(ut);return}var rt={};!ie[H.getFieldName("children")]||!ie[H.getFieldName("children")].length?(H.handleChange(ut,{visible:!1},ue),rt.value=it):Re&&(ue.type==="click"||ue.type==="keydown")&&(Ke==="hover"?H.handleChange(ut,{visible:!1},ue):H.handleChange(ut,{visible:!0},ue),rt.value=it),rt.activeValue=it,("value"in H.props||ue.type==="keydown"&&ue.keyCode!==Fo.a.ENTER)&&delete rt.value,H.setState(rt)}},H.handleItemDoubleClick=function(){var ie=H.props.changeOnSelect;ie&&H.setPopupVisible(!1)},H.handleKeyDown=function(ie){var le=H.props.children;if(le&&le.props.onKeyDown){le.props.onKeyDown(ie);return}var ue=Object(Ho.a)(H.state.activeValue),we=ue.length-1<0?0:ue.length-1,Pe=H.getCurrentLevelOptions(),Re=Pe.map(function(ut){return ut[H.getFieldName("value")]}).indexOf(ue[we]);if(!(ie.keyCode!==Fo.a.DOWN&&ie.keyCode!==Fo.a.UP&&ie.keyCode!==Fo.a.LEFT&&ie.keyCode!==Fo.a.RIGHT&&ie.keyCode!==Fo.a.ENTER&&ie.keyCode!==Fo.a.SPACE&&ie.keyCode!==Fo.a.BACKSPACE&&ie.keyCode!==Fo.a.ESC&&ie.keyCode!==Fo.a.TAB)){if(!H.state.popupVisible&&ie.keyCode!==Fo.a.BACKSPACE&&ie.keyCode!==Fo.a.LEFT&&ie.keyCode!==Fo.a.RIGHT&&ie.keyCode!==Fo.a.ESC&&ie.keyCode!==Fo.a.TAB){H.setPopupVisible(!0),H.props.onKeyDown&&H.props.onKeyDown(ie);return}if(ie.keyCode===Fo.a.DOWN||ie.keyCode===Fo.a.UP){ie.preventDefault();var Ue=Re;Ue!==-1?ie.keyCode===Fo.a.DOWN?(Ue+=1,Ue=Ue>=Pe.length?0:Ue):(Ue-=1,Ue=Ue<0?Pe.length-1:Ue):Ue=0,ue[we]=Pe[Ue][H.getFieldName("value")]}else if(ie.keyCode===Fo.a.LEFT||ie.keyCode===Fo.a.BACKSPACE)ie.preventDefault(),ue.splice(ue.length-1,1);else if(ie.keyCode===Fo.a.RIGHT)ie.preventDefault(),Pe[Re]&&Pe[Re][H.getFieldName("children")]&&ue.push(Pe[Re][H.getFieldName("children")][0][H.getFieldName("value")]);else if(ie.keyCode===Fo.a.ESC||ie.keyCode===Fo.a.TAB){H.setPopupVisible(!1),H.props.onKeyDown&&H.props.onKeyDown(ie);return}(!ue||ue.length===0)&&H.setPopupVisible(!1);var Ke=H.getActiveOptions(ue),it=Ke[Ke.length-1];H.handleMenuSelect(it,Ke.length-1,ie),H.props.onKeyDown&&H.props.onKeyDown(ie)}},H.saveTrigger=function(ie){H.trigger=ie};var te=[];return"value"in V?te=V.value||[]:"defaultValue"in V&&(te=V.defaultValue||[]),_v()(!("filedNames"in V),"`filedNames` of Cascader is a typo usage and deprecated, please use `fieldNames` instead."),H.state={popupVisible:V.popupVisible,activeValue:te,value:te,prevProps:V},H.defaultFieldNames={label:"label",value:"value",children:"children"},H}return Object(fa.a)($,[{key:"getPopupDOMNode",value:function(){return this.trigger.getPopupDomNode()}},{key:"getFieldName",value:function(H){var te=this.defaultFieldNames,ie=this.props,le=ie.fieldNames,ue=ie.filedNames;return"filedNames"in this.props?ue[H]||te[H]:le[H]||te[H]}},{key:"getFieldNames",value:function(){var H=this.props,te=H.fieldNames,ie=H.filedNames;return"filedNames"in this.props?ie:te}},{key:"getCurrentLevelOptions",value:function(){var H=this,te=this.props.options,ie=te===void 0?[]:te,le=this.state.activeValue,ue=le===void 0?[]:le,we=ch()(ie,function(Pe,Re){return Pe[H.getFieldName("value")]===ue[Re]},{childrenKeyName:this.getFieldName("children")});return we[we.length-2]?we[we.length-2][this.getFieldName("children")]:Object(Ho.a)(ie).filter(function(Pe){return!Pe.disabled})}},{key:"getActiveOptions",value:function(H){var te=this;return ch()(this.props.options||[],function(ie,le){return ie[te.getFieldName("value")]===H[le]},{childrenKeyName:this.getFieldName("children")})}},{key:"render",value:function(){var H=this.props,te=H.prefixCls,ie=H.transitionName,le=H.popupClassName,ue=H.options,we=ue===void 0?[]:ue,Pe=H.disabled,Re=H.builtinPlacements,Ue=H.popupPlacement,Ke=H.children,it=H.dropdownRender,ut=Object(Jr.a)(H,["prefixCls","transitionName","popupClassName","options","disabled","builtinPlacements","popupPlacement","children","dropdownRender"]),rt=Q.createElement("div",null),Ct="";we&&we.length>0?rt=Q.createElement(xo,Object(Ne.a)({},this.props,{fieldNames:this.getFieldNames(),defaultFieldNames:this.defaultFieldNames,activeValue:this.state.activeValue,onSelect:this.handleMenuSelect,onItemDoubleClick:this.handleItemDoubleClick,visible:this.state.popupVisible})):Ct=" ".concat(te,"-menus-empty");var yt=rt;return it&&(yt=it(rt)),Q.createElement(gg.a,Object(Ne.a)({ref:this.saveTrigger},ut,{popupPlacement:Ue,builtinPlacements:Re,popupTransitionName:ie,action:Pe?[]:["click"],popupVisible:Pe?!1:this.state.popupVisible,onPopupVisibleChange:this.handlePopupVisibleChange,prefixCls:"".concat(te,"-menus"),popupClassName:le+Ct,popup:yt}),Q.cloneElement(Ke,{onKeyDown:this.handleKeyDown,tabIndex:Pe?void 0:0}))}}],[{key:"getDerivedStateFromProps",value:function(H,te){var ie=te.prevProps,le=ie===void 0?{}:ie,ue={prevProps:H};return"value"in H&&!mg(le.value,H.value)&&(ue.value=H.value||[],"loadData"in H||(ue.activeValue=H.value||[])),"popupVisible"in H&&(ue.popupVisible=H.popupVisible),ue}}]),$}(Q.Component);vg.defaultProps={onChange:function(){},onPopupVisibleChange:function(){},disabled:!1,transitionName:"",prefixCls:"rc-cascader",popupClassName:"",popupPlacement:"bottomLeft",builtinPlacements:zl,expandTrigger:"click",fieldNames:{label:"label",value:"value",children:"children"},expandIcon:">"};var gm=vg,mm=gm,tc=Ae("jN4g"),lu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},yg=lu,bu=function(J,$){return Q.createElement(Gc.a,Object.assign({},J,{ref:$,icon:yg}))};bu.displayName="RedoOutlined";var Nh=Q.forwardRef(bu),Bh=Ae("5rEg"),wd=Ae("0n0R"),_d=Ae("EXcs"),bc=function(j,J){var $={};for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&J.indexOf(V)<0&&($[V]=j[V]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,V=Object.getOwnPropertySymbols(j);H<V.length;H++)J.indexOf(V[H])<0&&Object.prototype.propertyIsEnumerable.call(j,V[H])&&($[V[H]]=j[V[H]]);return $},kn=50,zh="__KEEP_FILTERED_OPTION_VALUE";function Al(j,J,$){return j.split(J).map(function(V,H){return H===0?V:[Q.createElement("span",{className:"".concat($,"-menu-item-keyword"),key:"seperator"},J),V]})}function Qo(j,J,$){return J.some(function(V){return V[$.label].indexOf(j)>-1})}function In(j,J,$,V){return J.map(function(H,te){var ie=H[V.label],le=ie.indexOf(j)>-1?Al(ie,j,$):ie;return te===0?le:[" / ",le]})}function ni(j,J,$,V){function H(te){return te[V.label].indexOf($)>-1}return j.findIndex(H)-J.findIndex(H)}function vm(j){var J=j.fieldNames;return J}function Xa(j){var J=vm(j)||{},$={children:J.children||"children",label:J.label||"label",value:J.value||"value"};return $}function jr(j,J){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],V=Xa(J),H=[],te=V.children;return j.forEach(function(ie){var le=$.concat(ie);(J.changeOnSelect||!ie[te]||!ie[te].length)&&H.push(le),ie[te]&&(H=H.concat(jr(ie[te],J,le)))}),H}var wp=function(J){return J.join(" / ")};function _p(j){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(j||[]).forEach(function($){var V=J.value||"value";Object($a.a)(V in $,"Cascader","Not found `value` in `options`."),_p($[J.children||"children"],J)})}function ym(j,J,$){var V;return V={},Object(ce.a)(V,J.value,"ANT_CASCADER_NOT_FOUND"),Object(ce.a)(V,J.label,$||j("Cascader")),Object(ce.a)(V,"disabled",!0),Object(ce.a)(V,"isEmptyNode",!0),V}var Pf=function(j){Object(Ja.a)($,j);var J=Object(ki.a)($);function $(V){var H;return Object(Tn.a)(this,$),H=J.call(this,V),H.cachedOptions=[],H.setValue=function(te){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];"value"in H.props||H.setState({value:te});var le=H.props.onChange;le==null||le(te,ie)},H.saveInput=function(te){H.input=te},H.handleChange=function(te,ie){if(H.setState({inputValue:""}),ie[0].__IS_FILTERED_OPTION){var le=ie[0][zh]===void 0?te[0]:ie[0][zh],ue=ie[0].path;H.setValue(le,ue);return}H.setValue(te,ie)},H.handlePopupVisibleChange=function(te){"popupVisible"in H.props||H.setState(function(le){return{popupVisible:te,inputFocused:te,inputValue:te?le.inputValue:""}});var ie=H.props.onPopupVisibleChange;ie==null||ie(te)},H.handleInputBlur=function(){H.setState({inputFocused:!1})},H.handleInputClick=function(te){var ie=H.state,le=ie.inputFocused,ue=ie.popupVisible;(le||ue)&&te.stopPropagation()},H.handleKeyDown=function(te){(te.keyCode===Fo.a.BACKSPACE||te.keyCode===Fo.a.SPACE)&&te.stopPropagation()},H.handleInputChange=function(te){var ie=H.state.popupVisible,le=te.target.value;ie||H.handlePopupVisibleChange(!0),H.setState({inputValue:le})},H.clearSelection=function(te){var ie=H.state.inputValue;te.preventDefault(),te.stopPropagation(),ie?H.setState({inputValue:""}):(H.handlePopupVisibleChange(!1),H.clearSelectionTimeout=setTimeout(function(){H.setValue([])},200))},H.renderCascader=function(te,ie){var le=te.getPopupContainer,ue=te.getPrefixCls,we=te.renderEmpty,Pe=te.direction;return Q.createElement(Ko.b.Consumer,null,function(Re){var Ue,Ke,it,ut,rt=Object(cs.a)(H),Ct=rt.props,yt=rt.state,Kt=Ct.prefixCls,ar=Ct.inputPrefixCls,er=Ct.children,Yt=Ct.placeholder,sr=Yt===void 0?ie.placeholder||"Please select":Yt,jt=Ct.size,gr=Ct.disabled,ir=Ct.className,Pr=Ct.style,Yr=Ct.allowClear,qt=Ct.showSearch,xr=qt===void 0?!1:qt,cn=Ct.suffixIcon,Cn=Ct.expandIcon,Gn=Ct.notFoundContent,Wr=Ct.popupClassName,Jn=Ct.bordered,jn=Ct.dropdownRender,Xn=bc(Ct,["prefixCls","inputPrefixCls","children","placeholder","size","disabled","className","style","allowClear","showSearch","suffixIcon","expandIcon","notFoundContent","popupClassName","bordered","dropdownRender"]),Wi=jt||Re,Ai=yt.value,Oi=yt.inputFocused,Ji=Pe==="rtl",En=ue("cascader",Kt),$i=ue("input",ar),no=Lt()((Ue={},Object(ce.a)(Ue,"".concat($i,"-lg"),Wi==="large"),Object(ce.a)(Ue,"".concat($i,"-sm"),Wi==="small"),Ue)),Ao=Yr&&!gr&&Ai.length>0||yt.inputValue?Q.createElement(tc.a,{className:"".concat(En,"-picker-clear"),onClick:H.clearSelection}):null,ua=Lt()((Ke={},Object(ce.a)(Ke,"".concat(En,"-picker-arrow"),!0),Object(ce.a)(Ke,"".concat(En,"-picker-arrow-expand"),yt.popupVisible),Ke)),ji=Lt()("".concat(En,"-picker"),(it={},Object(ce.a)(it,"".concat(En,"-picker-rtl"),Ji),Object(ce.a)(it,"".concat(En,"-picker-with-value"),yt.inputValue),Object(ce.a)(it,"".concat(En,"-picker-disabled"),gr),Object(ce.a)(it,"".concat(En,"-picker-").concat(Wi),!!Wi),Object(ce.a)(it,"".concat(En,"-picker-show-search"),!!xr),Object(ce.a)(it,"".concat(En,"-picker-focused"),Oi),Object(ce.a)(it,"".concat(En,"-picker-borderless"),!Jn),it),ir),ii=Object(Er.a)(Xn,["onChange","options","popupPlacement","transitionName","displayRender","onPopupVisibleChange","changeOnSelect","expandTrigger","popupVisible","getPopupContainer","loadData","filterOption","renderFilteredOption","sortFilteredOption","fieldNames"]),Ti=Ct.options,Co=Xa(H.props);Ti&&Ti.length>0?yt.inputValue&&(Ti=H.generateFilteredOptions(En,we)):Ti=[ym(we,Co,Gn)],yt.popupVisible?H.cachedOptions=Ti:Ti=H.cachedOptions;var wo={},Po=(Ti||[]).length===1&&Ti[0].isEmptyNode;Po&&(wo.height="auto");var _o=xr.matchInputWidth!==!1;_o&&(yt.inputValue||Po)&&H.input&&(wo.width=H.input.input.offsetWidth);var Ii;cn?Ii=Object(wd.c)(cn,Q.createElement("span",{className:"".concat(En,"-picker-arrow")},cn),function(){var _s;return{className:Lt()((_s={},Object(ce.a)(_s,cn.props.className,cn.props.className),Object(ce.a)(_s,"".concat(En,"-picker-arrow"),!0),_s))}}):Ii=Q.createElement(Yu.a,{className:ua});var qn=er||Q.createElement("span",{style:Pr,className:ji},Q.createElement("span",{className:"".concat(En,"-picker-label")},H.getLabel()),Q.createElement(Bh.a,Object(Ne.a)({},ii,{tabIndex:-1,ref:H.saveInput,prefixCls:$i,placeholder:Ai&&Ai.length>0?void 0:sr,className:"".concat(En,"-input ").concat(no),value:yt.inputValue,disabled:gr,readOnly:!xr,autoComplete:ii.autoComplete||"off",onClick:xr?H.handleInputClick:void 0,onBlur:xr?H.handleInputBlur:void 0,onKeyDown:H.handleKeyDown,onChange:xr?H.handleInputChange:void 0})),Ao,Ii),Di;Cn?Di=Cn:Di=Ji?Q.createElement($l.a,null):Q.createElement(hf.a,null);var Vn=Q.createElement("span",{className:"".concat(En,"-menu-item-loading-icon")},Q.createElement(Nh,{spin:!0})),Yn=Ct.getPopupContainer||le,fn=Object(Er.a)(Ct,["inputIcon","expandIcon","loadingIcon","bordered","className"]),Vo=Lt()(Wr,(ut={},Object(ce.a)(ut,"".concat(En,"-menu-").concat(Pe),Pe==="rtl"),Object(ce.a)(ut,"".concat(En,"-menu-empty"),Ti.length===1&&Ti[0].value==="ANT_CASCADER_NOT_FOUND"),ut)),rs=ue();return Q.createElement(mm,Object(Ne.a)({},fn,{prefixCls:En,getPopupContainer:Yn,options:Ti,value:Ai,popupVisible:yt.popupVisible,onPopupVisibleChange:H.handlePopupVisibleChange,onChange:H.handleChange,dropdownMenuColumnStyle:wo,expandIcon:Di,loadingIcon:Vn,popupClassName:Vo,popupPlacement:H.getPopupPlacement(Pe),dropdownRender:jn,transitionName:Object(_d.b)(rs,"slide-up",Ct.transitionName)}),qn)})},H.state={value:V.value||V.defaultValue||[],inputValue:"",inputFocused:!1,popupVisible:V.popupVisible,flattenOptions:V.showSearch?jr(V.options,V):void 0,prevProps:V},H}return Object(fa.a)($,[{key:"componentWillUnmount",value:function(){this.clearSelectionTimeout&&clearTimeout(this.clearSelectionTimeout)}},{key:"getLabel",value:function(){var H=this.props,te=H.options,ie=H.displayRender,le=ie===void 0?wp:ie,ue=Xa(this.props),we=this.state.value,Pe=Array.isArray(we[0])?we[0]:we,Re=ch()(te,function(Ke,it){return Ke[ue.value]===Pe[it]},{childrenKeyName:ue.children}),Ue=Re.length?Re.map(function(Ke){return Ke[ue.label]}):we;return le(Ue,Re)}},{key:"generateFilteredOptions",value:function(H,te){var ie=this,le=this.props,ue=le.showSearch,we=le.notFoundContent,Pe=Xa(this.props),Re=ue.filter,Ue=Re===void 0?Qo:Re,Ke=ue.render,it=Ke===void 0?In:Ke,ut=ue.sort,rt=ut===void 0?ni:ut,Ct=ue.limit,yt=Ct===void 0?kn:Ct,Kt=this.state,ar=Kt.flattenOptions,er=ar===void 0?[]:ar,Yt=Kt.inputValue,sr;if(yt>0){sr=[];var jt=0;er.some(function(ir){var Pr=Ue(ie.state.inputValue,ir,Pe);return Pr&&(sr.push(ir),jt+=1),jt>=yt})}else Object($a.a)(typeof yt!="number","Cascader","'limit' of showSearch should be positive number or false."),sr=er.filter(function(ir){return Ue(ie.state.inputValue,ir,Pe)});if(sr=sr.sort(function(ir,Pr){return rt(ir,Pr,Yt,Pe)}),sr.length>0){var gr=Pe.value===Pe.label?zh:Pe.value;return sr.map(function(ir){var Pr;return Pr={__IS_FILTERED_OPTION:!0,path:ir},Object(ce.a)(Pr,gr,ir.map(function(Yr){return Yr[Pe.value]})),Object(ce.a)(Pr,Pe.label,it(Yt,ir,H,Pe)),Object(ce.a)(Pr,"disabled",ir.some(function(Yr){return!!Yr.disabled})),Object(ce.a)(Pr,"isEmptyNode",!0),Pr})}return[ym(te,Pe,we)]}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"getPopupPlacement",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ltr",te=this.props.popupPlacement;return te!==void 0?te:H==="rtl"?"bottomRight":"bottomLeft"}},{key:"render",value:function(){var H=this;return Q.createElement(xe.a,null,function(te){return Q.createElement(Zf.a,null,function(ie){return H.renderCascader(te,ie)})})}}],[{key:"getDerivedStateFromProps",value:function(H,te){var ie=te.prevProps,le={prevProps:H};return"value"in H&&(le.value=H.value||[]),"popupVisible"in H&&(le.popupVisible=H.popupVisible),H.showSearch&&ie.options!==H.options&&(le.flattenOptions=jr(H.options,H)),le}}]),$}(Q.Component);Pf.defaultProps={options:[],disabled:!1,allowClear:!0,bordered:!0};var Mp=Pf,Mv=[{code:"110000",value:"\u5317\u4EAC\u5E02",label:"\u5317\u4EAC\u5E02"},{code:"120000",value:"\u5929\u6D25\u5E02",label:"\u5929\u6D25\u5E02"},{code:"130000",value:"\u6CB3\u5317\u7701",label:"\u6CB3\u5317\u7701",children:[{code:"130100",value:"\u77F3\u5BB6\u5E84\u5E02",label:"\u77F3\u5BB6\u5E84\u5E02"},{code:"130200",value:"\u5510\u5C71\u5E02",label:"\u5510\u5C71\u5E02"},{code:"130300",value:"\u79E6\u7687\u5C9B\u5E02",label:"\u79E6\u7687\u5C9B\u5E02"},{code:"130400",value:"\u90AF\u90F8\u5E02",label:"\u90AF\u90F8\u5E02"},{code:"130500",value:"\u90A2\u53F0\u5E02",label:"\u90A2\u53F0\u5E02"},{code:"130600",value:"\u4FDD\u5B9A\u5E02",label:"\u4FDD\u5B9A\u5E02"},{code:"130700",value:"\u5F20\u5BB6\u53E3\u5E02",label:"\u5F20\u5BB6\u53E3\u5E02"},{code:"130800",value:"\u627F\u5FB7\u5E02",label:"\u627F\u5FB7\u5E02"},{code:"130900",value:"\u6CA7\u5DDE\u5E02",label:"\u6CA7\u5DDE\u5E02"},{code:"131000",value:"\u5ECA\u574A\u5E02",label:"\u5ECA\u574A\u5E02"},{code:"131100",value:"\u8861\u6C34\u5E02",label:"\u8861\u6C34\u5E02"}]},{code:"140000",value:"\u5C71\u897F\u7701",label:"\u5C71\u897F\u7701",children:[{code:"140100",value:"\u592A\u539F\u5E02",label:"\u592A\u539F\u5E02"},{code:"140200",value:"\u5927\u540C\u5E02",label:"\u5927\u540C\u5E02"},{code:"140300",value:"\u9633\u6CC9\u5E02",label:"\u9633\u6CC9\u5E02"},{code:"140400",value:"\u957F\u6CBB\u5E02",label:"\u957F\u6CBB\u5E02"},{code:"140500",value:"\u664B\u57CE\u5E02",label:"\u664B\u57CE\u5E02"},{code:"140600",value:"\u6714\u5DDE\u5E02",label:"\u6714\u5DDE\u5E02"},{code:"140700",value:"\u664B\u4E2D\u5E02",label:"\u664B\u4E2D\u5E02"},{code:"140800",value:"\u8FD0\u57CE\u5E02",label:"\u8FD0\u57CE\u5E02"},{code:"140900",value:"\u5FFB\u5DDE\u5E02",label:"\u5FFB\u5DDE\u5E02"},{code:"141000",value:"\u4E34\u6C7E\u5E02",label:"\u4E34\u6C7E\u5E02"},{code:"141100",value:"\u5415\u6881\u5E02",label:"\u5415\u6881\u5E02"}]},{code:"150000",value:"\u5185\u8499\u53E4\u81EA\u6CBB\u533A",label:"\u5185\u8499\u53E4\u81EA\u6CBB\u533A",children:[{code:"150100",value:"\u547C\u548C\u6D69\u7279\u5E02",label:"\u547C\u548C\u6D69\u7279\u5E02"},{code:"150200",value:"\u5305\u5934\u5E02",label:"\u5305\u5934\u5E02"},{code:"150300",value:"\u4E4C\u6D77\u5E02",label:"\u4E4C\u6D77\u5E02"},{code:"150400",value:"\u8D64\u5CF0\u5E02",label:"\u8D64\u5CF0\u5E02"},{code:"150500",value:"\u901A\u8FBD\u5E02",label:"\u901A\u8FBD\u5E02"},{code:"150600",value:"\u9102\u5C14\u591A\u65AF\u5E02",label:"\u9102\u5C14\u591A\u65AF\u5E02"},{code:"150700",value:"\u547C\u4F26\u8D1D\u5C14\u5E02",label:"\u547C\u4F26\u8D1D\u5C14\u5E02"},{code:"150800",value:"\u5DF4\u5F66\u6DD6\u5C14\u5E02",label:"\u5DF4\u5F66\u6DD6\u5C14\u5E02"},{code:"150900",value:"\u4E4C\u5170\u5BDF\u5E03\u5E02",label:"\u4E4C\u5170\u5BDF\u5E03\u5E02"},{code:"152200",value:"\u5174\u5B89\u76DF",label:"\u5174\u5B89\u76DF"},{code:"152500",value:"\u9521\u6797\u90ED\u52D2\u76DF",label:"\u9521\u6797\u90ED\u52D2\u76DF"},{code:"152900",value:"\u963F\u62C9\u5584\u76DF",label:"\u963F\u62C9\u5584\u76DF"}]},{code:"210000",value:"\u8FBD\u5B81\u7701",label:"\u8FBD\u5B81\u7701",children:[{code:"210100",value:"\u6C88\u9633\u5E02",label:"\u6C88\u9633\u5E02"},{code:"210200",value:"\u5927\u8FDE\u5E02",label:"\u5927\u8FDE\u5E02"},{code:"210300",value:"\u978D\u5C71\u5E02",label:"\u978D\u5C71\u5E02"},{code:"210400",value:"\u629A\u987A\u5E02",label:"\u629A\u987A\u5E02"},{code:"210500",value:"\u672C\u6EAA\u5E02",label:"\u672C\u6EAA\u5E02"},{code:"210600",value:"\u4E39\u4E1C\u5E02",label:"\u4E39\u4E1C\u5E02"},{code:"210700",value:"\u9526\u5DDE\u5E02",label:"\u9526\u5DDE\u5E02"},{code:"210800",value:"\u8425\u53E3\u5E02",label:"\u8425\u53E3\u5E02"},{code:"210900",value:"\u961C\u65B0\u5E02",label:"\u961C\u65B0\u5E02"},{code:"211000",value:"\u8FBD\u9633\u5E02",label:"\u8FBD\u9633\u5E02"},{code:"211100",value:"\u76D8\u9526\u5E02",label:"\u76D8\u9526\u5E02"},{code:"211200",value:"\u94C1\u5CAD\u5E02",label:"\u94C1\u5CAD\u5E02"},{code:"211300",value:"\u671D\u9633\u5E02",label:"\u671D\u9633\u5E02"},{code:"211400",value:"\u846B\u82A6\u5C9B\u5E02",label:"\u846B\u82A6\u5C9B\u5E02"}]},{code:"220000",value:"\u5409\u6797\u7701",label:"\u5409\u6797\u7701",children:[{code:"220100",value:"\u957F\u6625\u5E02",label:"\u957F\u6625\u5E02"},{code:"220200",value:"\u5409\u6797\u5E02",label:"\u5409\u6797\u5E02"},{code:"220300",value:"\u56DB\u5E73\u5E02",label:"\u56DB\u5E73\u5E02"},{code:"220400",value:"\u8FBD\u6E90\u5E02",label:"\u8FBD\u6E90\u5E02"},{code:"220500",value:"\u901A\u5316\u5E02",label:"\u901A\u5316\u5E02"},{code:"220600",value:"\u767D\u5C71\u5E02",label:"\u767D\u5C71\u5E02"},{code:"220700",value:"\u677E\u539F\u5E02",label:"\u677E\u539F\u5E02"},{code:"220800",value:"\u767D\u57CE\u5E02",label:"\u767D\u57CE\u5E02"},{code:"222400",value:"\u5EF6\u8FB9\u671D\u9C9C\u65CF\u81EA\u6CBB\u5DDE",label:"\u5EF6\u8FB9\u671D\u9C9C\u65CF\u81EA\u6CBB\u5DDE"}]},{code:"230000",value:"\u9ED1\u9F99\u6C5F\u7701",label:"\u9ED1\u9F99\u6C5F\u7701",children:[{code:"230100",value:"\u54C8\u5C14\u6EE8\u5E02",label:"\u54C8\u5C14\u6EE8\u5E02"},{code:"230200",value:"\u9F50\u9F50\u54C8\u5C14\u5E02",label:"\u9F50\u9F50\u54C8\u5C14\u5E02"},{code:"230300",value:"\u9E21\u897F\u5E02",label:"\u9E21\u897F\u5E02"},{code:"230400",value:"\u9E64\u5C97\u5E02",label:"\u9E64\u5C97\u5E02"},{code:"230500",value:"\u53CC\u9E2D\u5C71\u5E02",label:"\u53CC\u9E2D\u5C71\u5E02"},{code:"230600",value:"\u5927\u5E86\u5E02",label:"\u5927\u5E86\u5E02"},{code:"230700",value:"\u4F0A\u6625\u5E02",label:"\u4F0A\u6625\u5E02"},{code:"230800",value:"\u4F73\u6728\u65AF\u5E02",label:"\u4F73\u6728\u65AF\u5E02"},{code:"230900",value:"\u4E03\u53F0\u6CB3\u5E02",label:"\u4E03\u53F0\u6CB3\u5E02"},{code:"231000",value:"\u7261\u4E39\u6C5F\u5E02",label:"\u7261\u4E39\u6C5F\u5E02"},{code:"231100",value:"\u9ED1\u6CB3\u5E02",label:"\u9ED1\u6CB3\u5E02"},{code:"231200",value:"\u7EE5\u5316\u5E02",label:"\u7EE5\u5316\u5E02"},{code:"232700",value:"\u5927\u5174\u5B89\u5CAD\u5730\u533A",label:"\u5927\u5174\u5B89\u5CAD\u5730\u533A"}]},{code:"310000",value:"\u4E0A\u6D77\u5E02",label:"\u4E0A\u6D77\u5E02"},{code:"320000",value:"\u6C5F\u82CF\u7701",label:"\u6C5F\u82CF\u7701",children:[{code:"320100",value:"\u5357\u4EAC\u5E02",label:"\u5357\u4EAC\u5E02"},{code:"320200",value:"\u65E0\u9521\u5E02",label:"\u65E0\u9521\u5E02"},{code:"320300",value:"\u5F90\u5DDE\u5E02",label:"\u5F90\u5DDE\u5E02"},{code:"320400",value:"\u5E38\u5DDE\u5E02",label:"\u5E38\u5DDE\u5E02"},{code:"320500",value:"\u82CF\u5DDE\u5E02",label:"\u82CF\u5DDE\u5E02"},{code:"320600",value:"\u5357\u901A\u5E02",label:"\u5357\u901A\u5E02"},{code:"320700",value:"\u8FDE\u4E91\u6E2F\u5E02",label:"\u8FDE\u4E91\u6E2F\u5E02"},{code:"320800",value:"\u6DEE\u5B89\u5E02",label:"\u6DEE\u5B89\u5E02"},{code:"320900",value:"\u76D0\u57CE\u5E02",label:"\u76D0\u57CE\u5E02"},{code:"321000",value:"\u626C\u5DDE\u5E02",label:"\u626C\u5DDE\u5E02"},{code:"321100",value:"\u9547\u6C5F\u5E02",label:"\u9547\u6C5F\u5E02"},{code:"321200",value:"\u6CF0\u5DDE\u5E02",label:"\u6CF0\u5DDE\u5E02"},{code:"321300",value:"\u5BBF\u8FC1\u5E02",label:"\u5BBF\u8FC1\u5E02"}]},{code:"330000",value:"\u6D59\u6C5F\u7701",label:"\u6D59\u6C5F\u7701",children:[{code:"330100",value:"\u676D\u5DDE\u5E02",label:"\u676D\u5DDE\u5E02"},{code:"330200",value:"\u5B81\u6CE2\u5E02",label:"\u5B81\u6CE2\u5E02"},{code:"330300",value:"\u6E29\u5DDE\u5E02",label:"\u6E29\u5DDE\u5E02"},{code:"330400",value:"\u5609\u5174\u5E02",label:"\u5609\u5174\u5E02"},{code:"330500",value:"\u6E56\u5DDE\u5E02",label:"\u6E56\u5DDE\u5E02"},{code:"330600",value:"\u7ECD\u5174\u5E02",label:"\u7ECD\u5174\u5E02"},{code:"330700",value:"\u91D1\u534E\u5E02",label:"\u91D1\u534E\u5E02"},{code:"330800",value:"\u8862\u5DDE\u5E02",label:"\u8862\u5DDE\u5E02"},{code:"330900",value:"\u821F\u5C71\u5E02",label:"\u821F\u5C71\u5E02"},{code:"331000",value:"\u53F0\u5DDE\u5E02",label:"\u53F0\u5DDE\u5E02"},{code:"331100",value:"\u4E3D\u6C34\u5E02",label:"\u4E3D\u6C34\u5E02"}]},{code:"340000",value:"\u5B89\u5FBD\u7701",label:"\u5B89\u5FBD\u7701",children:[{code:"340100",value:"\u5408\u80A5\u5E02",label:"\u5408\u80A5\u5E02"},{code:"340200",value:"\u829C\u6E56\u5E02",label:"\u829C\u6E56\u5E02"},{code:"340300",value:"\u868C\u57E0\u5E02",label:"\u868C\u57E0\u5E02"},{code:"340400",value:"\u6DEE\u5357\u5E02",label:"\u6DEE\u5357\u5E02"},{code:"340500",value:"\u9A6C\u978D\u5C71\u5E02",label:"\u9A6C\u978D\u5C71\u5E02"},{code:"340600",value:"\u6DEE\u5317\u5E02",label:"\u6DEE\u5317\u5E02"},{code:"340700",value:"\u94DC\u9675\u5E02",label:"\u94DC\u9675\u5E02"},{code:"340800",value:"\u5B89\u5E86\u5E02",label:"\u5B89\u5E86\u5E02"},{code:"341000",value:"\u9EC4\u5C71\u5E02",label:"\u9EC4\u5C71\u5E02"},{code:"341100",value:"\u6EC1\u5DDE\u5E02",label:"\u6EC1\u5DDE\u5E02"},{code:"341200",value:"\u961C\u9633\u5E02",label:"\u961C\u9633\u5E02"},{code:"341300",value:"\u5BBF\u5DDE\u5E02",label:"\u5BBF\u5DDE\u5E02"},{code:"341500",value:"\u516D\u5B89\u5E02",label:"\u516D\u5B89\u5E02"},{code:"341600",value:"\u4EB3\u5DDE\u5E02",label:"\u4EB3\u5DDE\u5E02"},{code:"341700",value:"\u6C60\u5DDE\u5E02",label:"\u6C60\u5DDE\u5E02"},{code:"341800",value:"\u5BA3\u57CE\u5E02",label:"\u5BA3\u57CE\u5E02"}]},{code:"350000",value:"\u798F\u5EFA\u7701",label:"\u798F\u5EFA\u7701",children:[{code:"350100",value:"\u798F\u5DDE\u5E02",label:"\u798F\u5DDE\u5E02"},{code:"350200",value:"\u53A6\u95E8\u5E02",label:"\u53A6\u95E8\u5E02"},{code:"350300",value:"\u8386\u7530\u5E02",label:"\u8386\u7530\u5E02"},{code:"350400",value:"\u4E09\u660E\u5E02",label:"\u4E09\u660E\u5E02"},{code:"350500",value:"\u6CC9\u5DDE\u5E02",label:"\u6CC9\u5DDE\u5E02"},{code:"350600",value:"\u6F33\u5DDE\u5E02",label:"\u6F33\u5DDE\u5E02"},{code:"350700",value:"\u5357\u5E73\u5E02",label:"\u5357\u5E73\u5E02"},{code:"350800",value:"\u9F99\u5CA9\u5E02",label:"\u9F99\u5CA9\u5E02"},{code:"350900",value:"\u5B81\u5FB7\u5E02",label:"\u5B81\u5FB7\u5E02"}]},{code:"360000",value:"\u6C5F\u897F\u7701",label:"\u6C5F\u897F\u7701",children:[{code:"360100",value:"\u5357\u660C\u5E02",label:"\u5357\u660C\u5E02"},{code:"360200",value:"\u666F\u5FB7\u9547\u5E02",label:"\u666F\u5FB7\u9547\u5E02"},{code:"360300",value:"\u840D\u4E61\u5E02",label:"\u840D\u4E61\u5E02"},{code:"360400",value:"\u4E5D\u6C5F\u5E02",label:"\u4E5D\u6C5F\u5E02"},{code:"360500",value:"\u65B0\u4F59\u5E02",label:"\u65B0\u4F59\u5E02"},{code:"360600",value:"\u9E70\u6F6D\u5E02",label:"\u9E70\u6F6D\u5E02"},{code:"360700",value:"\u8D63\u5DDE\u5E02",label:"\u8D63\u5DDE\u5E02"},{code:"360800",value:"\u5409\u5B89\u5E02",label:"\u5409\u5B89\u5E02"},{code:"360900",value:"\u5B9C\u6625\u5E02",label:"\u5B9C\u6625\u5E02"},{code:"361000",value:"\u629A\u5DDE\u5E02",label:"\u629A\u5DDE\u5E02"},{code:"361100",value:"\u4E0A\u9976\u5E02",label:"\u4E0A\u9976\u5E02"}]},{code:"370000",value:"\u5C71\u4E1C\u7701",label:"\u5C71\u4E1C\u7701",children:[{code:"370100",value:"\u6D4E\u5357\u5E02",label:"\u6D4E\u5357\u5E02"},{code:"370200",value:"\u9752\u5C9B\u5E02",label:"\u9752\u5C9B\u5E02"},{code:"370300",value:"\u6DC4\u535A\u5E02",label:"\u6DC4\u535A\u5E02"},{code:"370400",value:"\u67A3\u5E84\u5E02",label:"\u67A3\u5E84\u5E02"},{code:"370500",value:"\u4E1C\u8425\u5E02",label:"\u4E1C\u8425\u5E02"},{code:"370600",value:"\u70DF\u53F0\u5E02",label:"\u70DF\u53F0\u5E02"},{code:"370700",value:"\u6F4D\u574A\u5E02",label:"\u6F4D\u574A\u5E02"},{code:"370800",value:"\u6D4E\u5B81\u5E02",label:"\u6D4E\u5B81\u5E02"},{code:"370900",value:"\u6CF0\u5B89\u5E02",label:"\u6CF0\u5B89\u5E02"},{code:"371000",value:"\u5A01\u6D77\u5E02",label:"\u5A01\u6D77\u5E02"},{code:"371100",value:"\u65E5\u7167\u5E02",label:"\u65E5\u7167\u5E02"},{code:"371300",value:"\u4E34\u6C82\u5E02",label:"\u4E34\u6C82\u5E02"},{code:"371400",value:"\u5FB7\u5DDE\u5E02",label:"\u5FB7\u5DDE\u5E02"},{code:"371500",value:"\u804A\u57CE\u5E02",label:"\u804A\u57CE\u5E02"},{code:"371600",value:"\u6EE8\u5DDE\u5E02",label:"\u6EE8\u5DDE\u5E02"},{code:"371700",value:"\u83CF\u6CFD\u5E02",label:"\u83CF\u6CFD\u5E02"}]},{code:"410000",value:"\u6CB3\u5357\u7701",label:"\u6CB3\u5357\u7701",children:[{code:"410100",value:"\u90D1\u5DDE\u5E02",label:"\u90D1\u5DDE\u5E02"},{code:"410200",value:"\u5F00\u5C01\u5E02",label:"\u5F00\u5C01\u5E02"},{code:"410300",value:"\u6D1B\u9633\u5E02",label:"\u6D1B\u9633\u5E02"},{code:"410400",value:"\u5E73\u9876\u5C71\u5E02",label:"\u5E73\u9876\u5C71\u5E02"},{code:"410500",value:"\u5B89\u9633\u5E02",label:"\u5B89\u9633\u5E02"},{code:"410600",value:"\u9E64\u58C1\u5E02",label:"\u9E64\u58C1\u5E02"},{code:"410700",value:"\u65B0\u4E61\u5E02",label:"\u65B0\u4E61\u5E02"},{code:"410800",value:"\u7126\u4F5C\u5E02",label:"\u7126\u4F5C\u5E02"},{code:"410900",value:"\u6FEE\u9633\u5E02",label:"\u6FEE\u9633\u5E02"},{code:"411000",value:"\u8BB8\u660C\u5E02",label:"\u8BB8\u660C\u5E02"},{code:"411100",value:"\u6F2F\u6CB3\u5E02",label:"\u6F2F\u6CB3\u5E02"},{code:"411200",value:"\u4E09\u95E8\u5CE1\u5E02",label:"\u4E09\u95E8\u5CE1\u5E02"},{code:"411300",value:"\u5357\u9633\u5E02",label:"\u5357\u9633\u5E02"},{code:"411400",value:"\u5546\u4E18\u5E02",label:"\u5546\u4E18\u5E02"},{code:"411500",value:"\u4FE1\u9633\u5E02",label:"\u4FE1\u9633\u5E02"},{code:"411600",value:"\u5468\u53E3\u5E02",label:"\u5468\u53E3\u5E02"},{code:"411700",value:"\u9A7B\u9A6C\u5E97\u5E02",label:"\u9A7B\u9A6C\u5E97\u5E02"},{code:"419001",value:"\u6D4E\u6E90\u5E02",label:"\u6D4E\u6E90\u5E02"}]},{code:"420000",value:"\u6E56\u5317\u7701",label:"\u6E56\u5317\u7701",children:[{code:"420100",value:"\u6B66\u6C49\u5E02",label:"\u6B66\u6C49\u5E02"},{code:"420200",value:"\u9EC4\u77F3\u5E02",label:"\u9EC4\u77F3\u5E02"},{code:"420300",value:"\u5341\u5830\u5E02",label:"\u5341\u5830\u5E02"},{code:"420500",value:"\u5B9C\u660C\u5E02",label:"\u5B9C\u660C\u5E02"},{code:"420600",value:"\u8944\u9633\u5E02",label:"\u8944\u9633\u5E02"},{code:"420700",value:"\u9102\u5DDE\u5E02",label:"\u9102\u5DDE\u5E02"},{code:"420800",value:"\u8346\u95E8\u5E02",label:"\u8346\u95E8\u5E02"},{code:"420900",value:"\u5B5D\u611F\u5E02",label:"\u5B5D\u611F\u5E02"},{code:"421000",value:"\u8346\u5DDE\u5E02",label:"\u8346\u5DDE\u5E02"},{code:"421100",value:"\u9EC4\u5188\u5E02",label:"\u9EC4\u5188\u5E02"},{code:"421200",value:"\u54B8\u5B81\u5E02",label:"\u54B8\u5B81\u5E02"},{code:"421300",value:"\u968F\u5DDE\u5E02",label:"\u968F\u5DDE\u5E02"},{code:"422800",value:"\u6069\u65BD\u571F\u5BB6\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE",label:"\u6069\u65BD\u571F\u5BB6\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE"},{code:"429004",value:"\u4ED9\u6843\u5E02",label:"\u4ED9\u6843\u5E02"},{code:"429005",value:"\u6F5C\u6C5F\u5E02",label:"\u6F5C\u6C5F\u5E02"},{code:"429006",value:"\u5929\u95E8\u5E02",label:"\u5929\u95E8\u5E02"},{code:"429021",value:"\u795E\u519C\u67B6\u6797\u533A",label:"\u795E\u519C\u67B6\u6797\u533A"}]},{code:"430000",value:"\u6E56\u5357\u7701",label:"\u6E56\u5357\u7701",children:[{code:"430100",value:"\u957F\u6C99\u5E02",label:"\u957F\u6C99\u5E02"},{code:"430200",value:"\u682A\u6D32\u5E02",label:"\u682A\u6D32\u5E02"},{code:"430300",value:"\u6E58\u6F6D\u5E02",label:"\u6E58\u6F6D\u5E02"},{code:"430400",value:"\u8861\u9633\u5E02",label:"\u8861\u9633\u5E02"},{code:"430500",value:"\u90B5\u9633\u5E02",label:"\u90B5\u9633\u5E02"},{code:"430600",value:"\u5CB3\u9633\u5E02",label:"\u5CB3\u9633\u5E02"},{code:"430700",value:"\u5E38\u5FB7\u5E02",label:"\u5E38\u5FB7\u5E02"},{code:"430800",value:"\u5F20\u5BB6\u754C\u5E02",label:"\u5F20\u5BB6\u754C\u5E02"},{code:"430900",value:"\u76CA\u9633\u5E02",label:"\u76CA\u9633\u5E02"},{code:"431000",value:"\u90F4\u5DDE\u5E02",label:"\u90F4\u5DDE\u5E02"},{code:"431100",value:"\u6C38\u5DDE\u5E02",label:"\u6C38\u5DDE\u5E02"},{code:"431200",value:"\u6000\u5316\u5E02",label:"\u6000\u5316\u5E02"},{code:"431300",value:"\u5A04\u5E95\u5E02",label:"\u5A04\u5E95\u5E02"},{code:"433100",value:"\u6E58\u897F\u571F\u5BB6\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE",label:"\u6E58\u897F\u571F\u5BB6\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE"}]},{code:"440000",value:"\u5E7F\u4E1C\u7701",label:"\u5E7F\u4E1C\u7701",children:[{code:"440100",value:"\u5E7F\u5DDE\u5E02",label:"\u5E7F\u5DDE\u5E02"},{code:"440200",value:"\u97F6\u5173\u5E02",label:"\u97F6\u5173\u5E02"},{code:"440300",value:"\u6DF1\u5733\u5E02",label:"\u6DF1\u5733\u5E02"},{code:"440400",value:"\u73E0\u6D77\u5E02",label:"\u73E0\u6D77\u5E02"},{code:"440500",value:"\u6C55\u5934\u5E02",label:"\u6C55\u5934\u5E02"},{code:"440600",value:"\u4F5B\u5C71\u5E02",label:"\u4F5B\u5C71\u5E02"},{code:"440700",value:"\u6C5F\u95E8\u5E02",label:"\u6C5F\u95E8\u5E02"},{code:"440800",value:"\u6E5B\u6C5F\u5E02",label:"\u6E5B\u6C5F\u5E02"},{code:"440900",value:"\u8302\u540D\u5E02",label:"\u8302\u540D\u5E02"},{code:"441200",value:"\u8087\u5E86\u5E02",label:"\u8087\u5E86\u5E02"},{code:"441300",value:"\u60E0\u5DDE\u5E02",label:"\u60E0\u5DDE\u5E02"},{code:"441400",value:"\u6885\u5DDE\u5E02",label:"\u6885\u5DDE\u5E02"},{code:"441500",value:"\u6C55\u5C3E\u5E02",label:"\u6C55\u5C3E\u5E02"},{code:"441600",value:"\u6CB3\u6E90\u5E02",label:"\u6CB3\u6E90\u5E02"},{code:"441700",value:"\u9633\u6C5F\u5E02",label:"\u9633\u6C5F\u5E02"},{code:"441800",value:"\u6E05\u8FDC\u5E02",label:"\u6E05\u8FDC\u5E02"},{code:"441900",value:"\u4E1C\u839E\u5E02",label:"\u4E1C\u839E\u5E02"},{code:"442000",value:"\u4E2D\u5C71\u5E02",label:"\u4E2D\u5C71\u5E02"},{code:"445100",value:"\u6F6E\u5DDE\u5E02",label:"\u6F6E\u5DDE\u5E02"},{code:"445200",value:"\u63ED\u9633\u5E02",label:"\u63ED\u9633\u5E02"},{code:"445300",value:"\u4E91\u6D6E\u5E02",label:"\u4E91\u6D6E\u5E02"}]},{code:"450000",value:"\u5E7F\u897F\u58EE\u65CF\u81EA\u6CBB\u533A",label:"\u5E7F\u897F\u58EE\u65CF\u81EA\u6CBB\u533A",children:[{code:"450100",value:"\u5357\u5B81\u5E02",label:"\u5357\u5B81\u5E02"},{code:"450200",value:"\u67F3\u5DDE\u5E02",label:"\u67F3\u5DDE\u5E02"},{code:"450300",value:"\u6842\u6797\u5E02",label:"\u6842\u6797\u5E02"},{code:"450400",value:"\u68A7\u5DDE\u5E02",label:"\u68A7\u5DDE\u5E02"},{code:"450500",value:"\u5317\u6D77\u5E02",label:"\u5317\u6D77\u5E02"},{code:"450600",value:"\u9632\u57CE\u6E2F\u5E02",label:"\u9632\u57CE\u6E2F\u5E02"},{code:"450700",value:"\u94A6\u5DDE\u5E02",label:"\u94A6\u5DDE\u5E02"},{code:"450800",value:"\u8D35\u6E2F\u5E02",label:"\u8D35\u6E2F\u5E02"},{code:"450900",value:"\u7389\u6797\u5E02",label:"\u7389\u6797\u5E02"},{code:"451000",value:"\u767E\u8272\u5E02",label:"\u767E\u8272\u5E02"},{code:"451100",value:"\u8D3A\u5DDE\u5E02",label:"\u8D3A\u5DDE\u5E02"},{code:"451200",value:"\u6CB3\u6C60\u5E02",label:"\u6CB3\u6C60\u5E02"},{code:"451300",value:"\u6765\u5BBE\u5E02",label:"\u6765\u5BBE\u5E02"},{code:"451400",value:"\u5D07\u5DE6\u5E02",label:"\u5D07\u5DE6\u5E02"}]},{code:"460000",value:"\u6D77\u5357\u7701",label:"\u6D77\u5357\u7701",children:[{code:"460100",value:"\u6D77\u53E3\u5E02",label:"\u6D77\u53E3\u5E02"},{code:"460200",value:"\u4E09\u4E9A\u5E02",label:"\u4E09\u4E9A\u5E02"},{code:"460300",value:"\u4E09\u6C99\u5E02",label:"\u4E09\u6C99\u5E02"},{code:"460400",value:"\u510B\u5DDE\u5E02",label:"\u510B\u5DDE\u5E02"},{code:"469001",value:"\u4E94\u6307\u5C71\u5E02",label:"\u4E94\u6307\u5C71\u5E02"},{code:"469002",value:"\u743C\u6D77\u5E02",label:"\u743C\u6D77\u5E02"},{code:"469005",value:"\u6587\u660C\u5E02",label:"\u6587\u660C\u5E02"},{code:"469006",value:"\u4E07\u5B81\u5E02",label:"\u4E07\u5B81\u5E02"},{code:"469007",value:"\u4E1C\u65B9\u5E02",label:"\u4E1C\u65B9\u5E02"},{code:"469021",value:"\u5B9A\u5B89\u53BF",label:"\u5B9A\u5B89\u53BF"},{code:"469022",value:"\u5C6F\u660C\u53BF",label:"\u5C6F\u660C\u53BF"},{code:"469023",value:"\u6F84\u8FC8\u53BF",label:"\u6F84\u8FC8\u53BF"},{code:"469024",value:"\u4E34\u9AD8\u53BF",label:"\u4E34\u9AD8\u53BF"},{code:"469025",value:"\u767D\u6C99\u9ECE\u65CF\u81EA\u6CBB\u53BF",label:"\u767D\u6C99\u9ECE\u65CF\u81EA\u6CBB\u53BF"},{code:"469026",value:"\u660C\u6C5F\u9ECE\u65CF\u81EA\u6CBB\u53BF",label:"\u660C\u6C5F\u9ECE\u65CF\u81EA\u6CBB\u53BF"},{code:"469027",value:"\u4E50\u4E1C\u9ECE\u65CF\u81EA\u6CBB\u53BF",label:"\u4E50\u4E1C\u9ECE\u65CF\u81EA\u6CBB\u53BF"},{code:"469028",value:"\u9675\u6C34\u9ECE\u65CF\u81EA\u6CBB\u53BF",label:"\u9675\u6C34\u9ECE\u65CF\u81EA\u6CBB\u53BF"},{code:"469029",value:"\u4FDD\u4EAD\u9ECE\u65CF\u82D7\u65CF\u81EA\u6CBB\u53BF",label:"\u4FDD\u4EAD\u9ECE\u65CF\u82D7\u65CF\u81EA\u6CBB\u53BF"},{code:"469030",value:"\u743C\u4E2D\u9ECE\u65CF\u82D7\u65CF\u81EA\u6CBB\u53BF",label:"\u743C\u4E2D\u9ECE\u65CF\u82D7\u65CF\u81EA\u6CBB\u53BF"}]},{code:"500000",value:"\u91CD\u5E86\u5E02",label:"\u91CD\u5E86\u5E02"},{code:"510000",value:"\u56DB\u5DDD\u7701",label:"\u56DB\u5DDD\u7701",children:[{code:"510100",value:"\u6210\u90FD\u5E02",label:"\u6210\u90FD\u5E02"},{code:"510300",value:"\u81EA\u8D21\u5E02",label:"\u81EA\u8D21\u5E02"},{code:"510400",value:"\u6500\u679D\u82B1\u5E02",label:"\u6500\u679D\u82B1\u5E02"},{code:"510500",value:"\u6CF8\u5DDE\u5E02",label:"\u6CF8\u5DDE\u5E02"},{code:"510600",value:"\u5FB7\u9633\u5E02",label:"\u5FB7\u9633\u5E02"},{code:"510700",value:"\u7EF5\u9633\u5E02",label:"\u7EF5\u9633\u5E02"},{code:"510800",value:"\u5E7F\u5143\u5E02",label:"\u5E7F\u5143\u5E02"},{code:"510900",value:"\u9042\u5B81\u5E02",label:"\u9042\u5B81\u5E02"},{code:"511000",value:"\u5185\u6C5F\u5E02",label:"\u5185\u6C5F\u5E02"},{code:"511100",value:"\u4E50\u5C71\u5E02",label:"\u4E50\u5C71\u5E02"},{code:"511300",value:"\u5357\u5145\u5E02",label:"\u5357\u5145\u5E02"},{code:"511400",value:"\u7709\u5C71\u5E02",label:"\u7709\u5C71\u5E02"},{code:"511500",value:"\u5B9C\u5BBE\u5E02",label:"\u5B9C\u5BBE\u5E02"},{code:"511600",value:"\u5E7F\u5B89\u5E02",label:"\u5E7F\u5B89\u5E02"},{code:"511700",value:"\u8FBE\u5DDE\u5E02",label:"\u8FBE\u5DDE\u5E02"},{code:"511800",value:"\u96C5\u5B89\u5E02",label:"\u96C5\u5B89\u5E02"},{code:"511900",value:"\u5DF4\u4E2D\u5E02",label:"\u5DF4\u4E2D\u5E02"},{code:"512000",value:"\u8D44\u9633\u5E02",label:"\u8D44\u9633\u5E02"},{code:"513200",value:"\u963F\u575D\u85CF\u65CF\u7F8C\u65CF\u81EA\u6CBB\u5DDE",label:"\u963F\u575D\u85CF\u65CF\u7F8C\u65CF\u81EA\u6CBB\u5DDE"},{code:"513300",value:"\u7518\u5B5C\u85CF\u65CF\u81EA\u6CBB\u5DDE",label:"\u7518\u5B5C\u85CF\u65CF\u81EA\u6CBB\u5DDE"},{code:"513400",value:"\u51C9\u5C71\u5F5D\u65CF\u81EA\u6CBB\u5DDE",label:"\u51C9\u5C71\u5F5D\u65CF\u81EA\u6CBB\u5DDE"}]},{code:"520000",value:"\u8D35\u5DDE\u7701",label:"\u8D35\u5DDE\u7701",children:[{code:"520100",value:"\u8D35\u9633\u5E02",label:"\u8D35\u9633\u5E02"},{code:"520200",value:"\u516D\u76D8\u6C34\u5E02",label:"\u516D\u76D8\u6C34\u5E02"},{code:"520300",value:"\u9075\u4E49\u5E02",label:"\u9075\u4E49\u5E02"},{code:"520400",value:"\u5B89\u987A\u5E02",label:"\u5B89\u987A\u5E02"},{code:"520500",value:"\u6BD5\u8282\u5E02",label:"\u6BD5\u8282\u5E02"},{code:"520600",value:"\u94DC\u4EC1\u5E02",label:"\u94DC\u4EC1\u5E02"},{code:"522300",value:"\u9ED4\u897F\u5357\u5E03\u4F9D\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE",label:"\u9ED4\u897F\u5357\u5E03\u4F9D\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE"},{code:"522600",value:"\u9ED4\u4E1C\u5357\u82D7\u65CF\u4F97\u65CF\u81EA\u6CBB\u5DDE",label:"\u9ED4\u4E1C\u5357\u82D7\u65CF\u4F97\u65CF\u81EA\u6CBB\u5DDE"},{code:"522700",value:"\u9ED4\u5357\u5E03\u4F9D\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE",label:"\u9ED4\u5357\u5E03\u4F9D\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE"}]},{code:"530000",value:"\u4E91\u5357\u7701",label:"\u4E91\u5357\u7701",children:[{code:"530100",value:"\u6606\u660E\u5E02",label:"\u6606\u660E\u5E02"},{code:"530300",value:"\u66F2\u9756\u5E02",label:"\u66F2\u9756\u5E02"},{code:"530400",value:"\u7389\u6EAA\u5E02",label:"\u7389\u6EAA\u5E02"},{code:"530500",value:"\u4FDD\u5C71\u5E02",label:"\u4FDD\u5C71\u5E02"},{code:"530600",value:"\u662D\u901A\u5E02",label:"\u662D\u901A\u5E02"},{code:"530700",value:"\u4E3D\u6C5F\u5E02",label:"\u4E3D\u6C5F\u5E02"},{code:"530800",value:"\u666E\u6D31\u5E02",label:"\u666E\u6D31\u5E02"},{code:"530900",value:"\u4E34\u6CA7\u5E02",label:"\u4E34\u6CA7\u5E02"},{code:"532300",value:"\u695A\u96C4\u5F5D\u65CF\u81EA\u6CBB\u5DDE",label:"\u695A\u96C4\u5F5D\u65CF\u81EA\u6CBB\u5DDE"},{code:"532500",value:"\u7EA2\u6CB3\u54C8\u5C3C\u65CF\u5F5D\u65CF\u81EA\u6CBB\u5DDE",label:"\u7EA2\u6CB3\u54C8\u5C3C\u65CF\u5F5D\u65CF\u81EA\u6CBB\u5DDE"},{code:"532600",value:"\u6587\u5C71\u58EE\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE",label:"\u6587\u5C71\u58EE\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE"},{code:"532800",value:"\u897F\u53CC\u7248\u7EB3\u50A3\u65CF\u81EA\u6CBB\u5DDE",label:"\u897F\u53CC\u7248\u7EB3\u50A3\u65CF\u81EA\u6CBB\u5DDE"},{code:"532900",value:"\u5927\u7406\u767D\u65CF\u81EA\u6CBB\u5DDE",label:"\u5927\u7406\u767D\u65CF\u81EA\u6CBB\u5DDE"},{code:"533100",value:"\u5FB7\u5B8F\u50A3\u65CF\u666F\u9887\u65CF\u81EA\u6CBB\u5DDE",label:"\u5FB7\u5B8F\u50A3\u65CF\u666F\u9887\u65CF\u81EA\u6CBB\u5DDE"},{code:"533300",value:"\u6012\u6C5F\u5088\u50F3\u65CF\u81EA\u6CBB\u5DDE",label:"\u6012\u6C5F\u5088\u50F3\u65CF\u81EA\u6CBB\u5DDE"},{code:"533400",value:"\u8FEA\u5E86\u85CF\u65CF\u81EA\u6CBB\u5DDE",label:"\u8FEA\u5E86\u85CF\u65CF\u81EA\u6CBB\u5DDE"}]},{code:"540000",value:"\u897F\u85CF\u81EA\u6CBB\u533A",label:"\u897F\u85CF\u81EA\u6CBB\u533A",children:[{code:"540100",value:"\u62C9\u8428\u5E02",label:"\u62C9\u8428\u5E02"},{code:"540200",value:"\u65E5\u5580\u5219\u5E02",label:"\u65E5\u5580\u5219\u5E02"},{code:"540300",value:"\u660C\u90FD\u5E02",label:"\u660C\u90FD\u5E02"},{code:"540400",value:"\u6797\u829D\u5E02",label:"\u6797\u829D\u5E02"},{code:"540500",value:"\u5C71\u5357\u5E02",label:"\u5C71\u5357\u5E02"},{code:"540600",value:"\u90A3\u66F2\u5E02",label:"\u90A3\u66F2\u5E02"},{code:"542500",value:"\u963F\u91CC\u5730\u533A",label:"\u963F\u91CC\u5730\u533A"}]},{code:"610000",value:"\u9655\u897F\u7701",label:"\u9655\u897F\u7701",children:[{code:"610100",value:"\u897F\u5B89\u5E02",label:"\u897F\u5B89\u5E02"},{code:"610200",value:"\u94DC\u5DDD\u5E02",label:"\u94DC\u5DDD\u5E02"},{code:"610300",value:"\u5B9D\u9E21\u5E02",label:"\u5B9D\u9E21\u5E02"},{code:"610400",value:"\u54B8\u9633\u5E02",label:"\u54B8\u9633\u5E02"},{code:"610500",value:"\u6E2D\u5357\u5E02",label:"\u6E2D\u5357\u5E02"},{code:"610600",value:"\u5EF6\u5B89\u5E02",label:"\u5EF6\u5B89\u5E02"},{code:"610700",value:"\u6C49\u4E2D\u5E02",label:"\u6C49\u4E2D\u5E02"},{code:"610800",value:"\u6986\u6797\u5E02",label:"\u6986\u6797\u5E02"},{code:"610900",value:"\u5B89\u5EB7\u5E02",label:"\u5B89\u5EB7\u5E02"},{code:"611000",value:"\u5546\u6D1B\u5E02",label:"\u5546\u6D1B\u5E02"}]},{code:"620000",value:"\u7518\u8083\u7701",label:"\u7518\u8083\u7701",children:[{code:"620100",value:"\u5170\u5DDE\u5E02",label:"\u5170\u5DDE\u5E02"},{code:"620200",value:"\u5609\u5CEA\u5173\u5E02",label:"\u5609\u5CEA\u5173\u5E02"},{code:"620300",value:"\u91D1\u660C\u5E02",label:"\u91D1\u660C\u5E02"},{code:"620400",value:"\u767D\u94F6\u5E02",label:"\u767D\u94F6\u5E02"},{code:"620500",value:"\u5929\u6C34\u5E02",label:"\u5929\u6C34\u5E02"},{code:"620600",value:"\u6B66\u5A01\u5E02",label:"\u6B66\u5A01\u5E02"},{code:"620700",value:"\u5F20\u6396\u5E02",label:"\u5F20\u6396\u5E02"},{code:"620800",value:"\u5E73\u51C9\u5E02",label:"\u5E73\u51C9\u5E02"},{code:"620900",value:"\u9152\u6CC9\u5E02",label:"\u9152\u6CC9\u5E02"},{code:"621000",value:"\u5E86\u9633\u5E02",label:"\u5E86\u9633\u5E02"},{code:"621100",value:"\u5B9A\u897F\u5E02",label:"\u5B9A\u897F\u5E02"},{code:"621200",value:"\u9647\u5357\u5E02",label:"\u9647\u5357\u5E02"},{code:"622900",value:"\u4E34\u590F\u56DE\u65CF\u81EA\u6CBB\u5DDE",label:"\u4E34\u590F\u56DE\u65CF\u81EA\u6CBB\u5DDE"},{code:"623000",value:"\u7518\u5357\u85CF\u65CF\u81EA\u6CBB\u5DDE",label:"\u7518\u5357\u85CF\u65CF\u81EA\u6CBB\u5DDE"}]},{code:"630000",value:"\u9752\u6D77\u7701",label:"\u9752\u6D77\u7701",children:[{code:"630100",value:"\u897F\u5B81\u5E02",label:"\u897F\u5B81\u5E02"},{code:"630200",value:"\u6D77\u4E1C\u5E02",label:"\u6D77\u4E1C\u5E02"},{code:"632200",value:"\u6D77\u5317\u85CF\u65CF\u81EA\u6CBB\u5DDE",label:"\u6D77\u5317\u85CF\u65CF\u81EA\u6CBB\u5DDE"},{code:"632300",value:"\u9EC4\u5357\u85CF\u65CF\u81EA\u6CBB\u5DDE",label:"\u9EC4\u5357\u85CF\u65CF\u81EA\u6CBB\u5DDE"},{code:"632500",value:"\u6D77\u5357\u85CF\u65CF\u81EA\u6CBB\u5DDE",label:"\u6D77\u5357\u85CF\u65CF\u81EA\u6CBB\u5DDE"},{code:"632600",value:"\u679C\u6D1B\u85CF\u65CF\u81EA\u6CBB\u5DDE",label:"\u679C\u6D1B\u85CF\u65CF\u81EA\u6CBB\u5DDE"},{code:"632700",value:"\u7389\u6811\u85CF\u65CF\u81EA\u6CBB\u5DDE",label:"\u7389\u6811\u85CF\u65CF\u81EA\u6CBB\u5DDE"},{code:"632800",value:"\u6D77\u897F\u8499\u53E4\u65CF\u85CF\u65CF\u81EA\u6CBB\u5DDE",label:"\u6D77\u897F\u8499\u53E4\u65CF\u85CF\u65CF\u81EA\u6CBB\u5DDE"}]},{code:"640000",value:"\u5B81\u590F\u56DE\u65CF\u81EA\u6CBB\u533A",label:"\u5B81\u590F\u56DE\u65CF\u81EA\u6CBB\u533A",children:[{code:"640100",value:"\u94F6\u5DDD\u5E02",label:"\u94F6\u5DDD\u5E02"},{code:"640200",value:"\u77F3\u5634\u5C71\u5E02",label:"\u77F3\u5634\u5C71\u5E02"},{code:"640300",value:"\u5434\u5FE0\u5E02",label:"\u5434\u5FE0\u5E02"},{code:"640400",value:"\u56FA\u539F\u5E02",label:"\u56FA\u539F\u5E02"},{code:"640500",value:"\u4E2D\u536B\u5E02",label:"\u4E2D\u536B\u5E02"}]},{code:"650000",value:"\u65B0\u7586\u7EF4\u543E\u5C14\u81EA\u6CBB\u533A",label:"\u65B0\u7586\u7EF4\u543E\u5C14\u81EA\u6CBB\u533A",children:[{code:"650100",value:"\u4E4C\u9C81\u6728\u9F50\u5E02",label:"\u4E4C\u9C81\u6728\u9F50\u5E02"},{code:"650200",value:"\u514B\u62C9\u739B\u4F9D\u5E02",label:"\u514B\u62C9\u739B\u4F9D\u5E02"},{code:"650400",value:"\u5410\u9C81\u756A\u5E02",label:"\u5410\u9C81\u756A\u5E02"},{code:"650500",value:"\u54C8\u5BC6\u5E02",label:"\u54C8\u5BC6\u5E02"},{code:"652300",value:"\u660C\u5409\u56DE\u65CF\u81EA\u6CBB\u5DDE",label:"\u660C\u5409\u56DE\u65CF\u81EA\u6CBB\u5DDE"},{code:"652700",value:"\u535A\u5C14\u5854\u62C9\u8499\u53E4\u81EA\u6CBB\u5DDE",label:"\u535A\u5C14\u5854\u62C9\u8499\u53E4\u81EA\u6CBB\u5DDE"},{code:"652800",value:"\u5DF4\u97F3\u90ED\u695E\u8499\u53E4\u81EA\u6CBB\u5DDE",label:"\u5DF4\u97F3\u90ED\u695E\u8499\u53E4\u81EA\u6CBB\u5DDE"},{code:"652900",value:"\u963F\u514B\u82CF\u5730\u533A",label:"\u963F\u514B\u82CF\u5730\u533A"},{code:"653000",value:"\u514B\u5B5C\u52D2\u82CF\u67EF\u5C14\u514B\u5B5C\u81EA\u6CBB\u5DDE",label:"\u514B\u5B5C\u52D2\u82CF\u67EF\u5C14\u514B\u5B5C\u81EA\u6CBB\u5DDE"},{code:"653100",value:"\u5580\u4EC0\u5730\u533A",label:"\u5580\u4EC0\u5730\u533A"},{code:"653200",value:"\u548C\u7530\u5730\u533A",label:"\u548C\u7530\u5730\u533A"},{code:"654000",value:"\u4F0A\u7281\u54C8\u8428\u514B\u81EA\u6CBB\u5DDE",label:"\u4F0A\u7281\u54C8\u8428\u514B\u81EA\u6CBB\u5DDE"},{code:"654200",value:"\u5854\u57CE\u5730\u533A",label:"\u5854\u57CE\u5730\u533A"},{code:"654300",value:"\u963F\u52D2\u6CF0\u5730\u533A",label:"\u963F\u52D2\u6CF0\u5730\u533A"},{code:"659001",value:"\u77F3\u6CB3\u5B50\u5E02",label:"\u77F3\u6CB3\u5B50\u5E02"},{code:"659002",value:"\u963F\u62C9\u5C14\u5E02",label:"\u963F\u62C9\u5C14\u5E02"},{code:"659003",value:"\u56FE\u6728\u8212\u514B\u5E02",label:"\u56FE\u6728\u8212\u514B\u5E02"},{code:"659004",value:"\u4E94\u5BB6\u6E20\u5E02",label:"\u4E94\u5BB6\u6E20\u5E02"},{code:"659005",value:"\u5317\u5C6F\u5E02",label:"\u5317\u5C6F\u5E02"},{code:"659006",value:"\u94C1\u95E8\u5173\u5E02",label:"\u94C1\u95E8\u5173\u5E02"},{code:"659007",value:"\u53CC\u6CB3\u5E02",label:"\u53CC\u6CB3\u5E02"},{code:"659008",value:"\u53EF\u514B\u8FBE\u62C9\u5E02",label:"\u53EF\u514B\u8FBE\u62C9\u5E02"}]},{code:"659009",value:"\u6606\u7389\u5E02",label:"\u6606\u7389\u5E02"},{code:"710000",value:"\u53F0\u6E7E\u7701",label:"\u53F0\u6E7E\u7701"},{code:"810000",value:"\u9999\u6E2F\u7279\u522B\u884C\u653F\u533A",label:"\u9999\u6E2F\u7279\u522B\u884C\u653F\u533A"},{code:"820000",value:"\u6FB3\u95E8\u7279\u522B\u884C\u653F\u533A",label:"\u6FB3\u95E8\u7279\u522B\u884C\u653F\u533A"}],Md=function(j){Object(qu.a)($,j);var J=Object(su.a)($);function $(){var V;Object(If.a)(this,$);for(var H=arguments.length,te=new Array(H),ie=0;ie<H;ie++)te[ie]=arguments[ie];return V=J.call.apply(J,[this].concat(te)),V.onChange=function(le){V.props.handleDefaultCity(le)},V}return Object(oh.a)($,[{key:"render",value:function(){return Object(Tr.jsx)(Mp,{"data-inspector-line":"20","data-inspector-column":"6","data-inspector-relative-path":"src/components/CitySelector/index.tsx",allowClear:!1,defaultValue:this.props.priorSearchCity.arr,options:Mv,expandTrigger:"hover",placeholder:"\u9009\u62E9\u4F18\u5148\u641C\u7D22\u5730\u533A",onChange:this.onChange,style:{width:200}})}}]),$}(Oe.a.Component),Ul=$f.Text,Ys=Oe.a.createContext(null),fh=function(J){var $=J.index,V=Object(Ef.a)(J,["index"]),H=Qa.a.useForm(),te=Object(Gr.a)(H,1),ie=te[0];return Object(Tr.jsx)(Qa.a,{"data-inspector-line":"28","data-inspector-column":"4","data-inspector-relative-path":"src/components/EditableTable/index.tsx",form:ie,component:!1,children:Object(Tr.jsx)(Ys.Provider,{"data-inspector-line":"29","data-inspector-column":"6","data-inspector-relative-path":"src/components/EditableTable/index.tsx",value:ie,children:Object(Tr.jsx)("tr",Object(Ia.a)({"data-inspector-line":"30","data-inspector-column":"8","data-inspector-relative-path":"src/components/EditableTable/index.tsx"},V))})})},xg=function(J){var $=J.title,V=J.editable,H=J.children,te=J.dataIndex,ie=J.record,le=J.priorSearchCity,ue=J.handleSave,we=Object(Ef.a)(J,["title","editable","children","dataIndex","record","priorSearchCity","handleSave"]),Pe=Object(Q.useState)(!1),Re=Object(Gr.a)(Pe,2),Ue=Re[0],Ke=Re[1],it=Object(Q.useContext)(Ys),ut=function(){Ke(!Ue),it.setFieldsValue(Object(yv.a)({},te,ie[te]))},rt=function(){var ar=Object(Kl.a)(ku.a.mark(function er(Yt){var sr,jt;return ku.a.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.prev=0,sr=Yt.key,jt=Object(Ef.a)(Yt,["key"]),ir.next=4,it.validateFields();case 4:ut(),ue(Object(Ia.a)(Object(Ia.a)({},ie),jt)),ir.next=11;break;case 8:ir.prev=8,ir.t0=ir.catch(0),console.log("Save failed:",ir.t0);case 11:case"end":return ir.stop()}},er,null,[[0,8]])}));return function(Yt){return ar.apply(this,arguments)}}(),Ct=function(){var ar=Object(Kl.a)(ku.a.mark(function er(){var Yt;return ku.a.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.prev=0,jt.next=3,it.validateFields();case 3:Yt=jt.sent,ut(),ue(Object(Ia.a)(Object(Ia.a)({},ie),Yt)),jt.next=11;break;case 8:jt.prev=8,jt.t0=jt.catch(0),console.log("Save failed:",jt.t0);case 11:case"end":return jt.stop()}},er,null,[[0,8]])}));return function(){return ar.apply(this,arguments)}}(),yt=function(er){switch(er){case"name":return Object(Tr.jsx)(ps,{"data-inspector-line":"101","data-inspector-column":"10","data-inspector-relative-path":"src/components/EditableTable/index.tsx",record:ie,saveSearchResult:rt,priorSearchCity:le});case"demand":return Object(Tr.jsx)(_a.a,{"data-inspector-line":"109","data-inspector-column":"10","data-inspector-relative-path":"src/components/EditableTable/index.tsx",autoFocus:!0,onPressEnter:Ct,onBlur:Ct,min:0,step:1,style:{width:"100%"}});default:return Object(Tr.jsx)(Tr.Fragment,{})}},Kt=H;return V&&(Kt=Ue?Object(Tr.jsx)(Qa.a.Item,{"data-inspector-line":"127","data-inspector-column":"6","data-inspector-relative-path":"src/components/EditableTable/index.tsx",style:{margin:0},name:te,rules:[{required:!0,message:"".concat($," is required.")}],children:yt(te)}):Object(Tr.jsx)("div",{"data-inspector-line":"140","data-inspector-column":"6","data-inspector-relative-path":"src/components/EditableTable/index.tsx",className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:ut,children:H})),Object(Tr.jsx)("td",Object(Ia.a)(Object(Ia.a)({"data-inspector-line":"146","data-inspector-column":"9","data-inspector-relative-path":"src/components/EditableTable/index.tsx"},we),{},{children:Kt}))},Sp=function(j){Object(qu.a)($,j);var J=Object(su.a)($);function $(V){var H;return Object(If.a)(this,$),H=J.call(this,V),H.columns=void 0,H.priorSearchCity={arr:["\u5317\u4EAC\u5E02"]},H.handleDefaultCity=function(te){H.priorSearchCity.arr=te},H.handleDelete=function(te){try{var ie=Object(ih.a)(H.props.step2POIData);H.props.setStep2POIData(ie.filter(function(le){return le.key!==te})),zu.default.success("\u5220\u9664\u5730\u70B9\u6210\u529F\uFF01")}catch(le){zu.default.error("\u5220\u9664\u5730\u70B9\u5931\u8D25\uFF0C".concat(le.message," !"))}},H.handleAdd=function(){var te=Object(ih.a)(H.props.step2POIData),ie={key:Qr(),name:"[\u65B0\u5730\u70B9]",lng:0,lat:0,demand:1};H.props.setStep2POIData([].concat(Object(ih.a)(te),[ie])),zu.default.success("\u5DF2\u5728\u5E95\u90E8\u6DFB\u52A0\u4E00\u884C\uFF01")},H.handleSave=function(te){var ie=Object(ih.a)(H.props.step2POIData),le=ie.findIndex(function(we){return te.key===we.key}),ue=ie[le];ie.splice(le,1,Object(Ia.a)(Object(Ia.a)({},ue),te)),H.props.setStep2POIData(ie)},H.columns=[{title:"\u5730\u70B9",dataIndex:"name",editable:!0},{title:"\u9700\u6C42",dataIndex:"demand",width:"25%",editable:!0},{title:"\u64CD\u4F5C",dataIndex:"operation",width:65,render:function(ie,le){return H.props.step2POIData.length>=1?Object(Tr.jsx)(fm.a,{"data-inspector-line":"184","data-inspector-column":"12","data-inspector-relative-path":"src/components/EditableTable/index.tsx",disabled:!0,onClick:function(){return H.handleDelete(le.key)}}):null}}],H}return Object(oh.a)($,[{key:"render",value:function(){var H=this,te=this.props.step2POIData,ie={body:{row:fh,cell:xg}},le=this.columns.map(function(ue){return ue.editable?Object(Ia.a)(Object(Ia.a)({},ue),{},{onCell:function(Pe){return{record:Pe,editable:ue.editable,dataIndex:ue.dataIndex,title:ue.title,priorSearchCity:H.priorSearchCity,handleSave:H.handleSave}}}):ue});return Object(Tr.jsxs)(Tr.Fragment,{children:[Object(Tr.jsx)(ko.a,{"data-inspector-line":"260","data-inspector-column":"8","data-inspector-relative-path":"src/components/EditableTable/index.tsx",onClick:this.handleAdd,type:"primary",style:{marginBottom:20},children:"Add a row"}),Object(Tr.jsxs)(cl.b,{"data-inspector-line":"267","data-inspector-column":"8","data-inspector-relative-path":"src/components/EditableTable/index.tsx",style:{float:"right"},children:[Object(Tr.jsxs)(Ul,{"data-inspector-line":"268","data-inspector-column":"10","data-inspector-relative-path":"src/components/EditableTable/index.tsx",children:["\u4F18\u5148\u641C\u7D22\u57CE\u5E02\uFF1A",Object(Tr.jsx)(jc.a,{"data-inspector-line":"270","data-inspector-column":"12","data-inspector-relative-path":"src/components/EditableTable/index.tsx",title:"\u4F18\u5148\u662F\u6307\u8F93\u5165\u5730\u70B9\u65F6\u65E0\u9700\u8F93\u5165\u57CE\u5E02\u540D\u4E5F\u4F18\u5148\u5728\u8BE5\u57CE\u5E02\u5185\u67E5\u627E\u3002\u4F46\u82E5\u8F93\u5165\u57CE\u5E02+\u5730\u5740\uFF0C\u5219\u5C1D\u8BD5\u5728\u5168\u56FD\u8303\u56F4\u5185\u67E5\u627E\u3002",children:Object(Tr.jsx)(Ad.a,{"data-inspector-line":"271","data-inspector-column":"14","data-inspector-relative-path":"src/components/EditableTable/index.tsx"})})]}),Object(Tr.jsx)(Md,{"data-inspector-line":"274","data-inspector-column":"10","data-inspector-relative-path":"src/components/EditableTable/index.tsx",priorSearchCity:this.priorSearchCity,handleDefaultCity:this.handleDefaultCity})]}),Object(Tr.jsx)(xl,{"data-inspector-line":"279","data-inspector-column":"8","data-inspector-relative-path":"src/components/EditableTable/index.tsx",components:ie,rowClassName:"editable-row",bordered:!0,sticky:!0,dataSource:te,columns:le,pagination:!1,scroll:{y:300}}),Object(Tr.jsx)(ec,{"data-inspector-line":"289","data-inspector-column":"8","data-inspector-relative-path":"src/components/EditableTable/index.tsx",title:"\u8868\u683C\u6570\u636E",collapsible:!0,defaultCollapsed:!0,children:Object(Tr.jsx)(Cp.a,{"data-inspector-line":"290","data-inspector-column":"10","data-inspector-relative-path":"src/components/EditableTable/index.tsx",fieldProps:{style:{width:"100%"}},mode:"read",valueType:"jsonCode",text:JSON.stringify(te)})})]})}}]),$}(Oe.a.Component),Sv=Sp,Rf=$f.Text,rc=function(J){var $=J.length;if($<3)throw new Error("\u53EA\u8F93\u5165\u4E86 ".concat($," \u5904\u5730\u70B9\uFF0C\u8BA1\u7B97\u91CF\u8FC7\u5C11\u3002"));for(var V=J[0].demand,H=0;H<$;H+=1){var te=J[H];if(te.lng===0||te.lat===0)throw new Error("\u7B2C ".concat(H+1," \u884C\u7684 ").concat(te.name," \u4E3A\u65E0\u6548\u5730\u70B9\uFF01"));if(te.demand<=0)throw new Error("\u7B2C ".concat(H+1," \u884C\u7684 ").concat(te.name," \u7684\u9700\u6C42\u91CF\u4E0D\u5408\u6CD5\uFF01"));if(V<te.demand)throw new Error("\u8F66\u8F86\u8F7D\u91CD\u91CF\u8FC7\u5C0F\uFF0C\u4E0D\u8DB3\u4EE5\u88C5\u8F7D\u7B2C ".concat(H+1," \u884C\u7684 ").concat(te.name," \u5904\u8D27\u7269\uFF01"))}},Sd=function(J){var $=J.rootPOIData,V=J.setRootPOIData,H=J.setCurrentStep,te=Object(Q.useState)($),ie=Object(Gr.a)(te,2),le=ie[0],ue=ie[1],we=Qa.a.useForm(),Pe=Object(Gr.a)(we,1),Re=Pe[0];if(!$)return null;var Ue=function(){try{rc(le),V(le),H("step1")}catch(ut){zu.default.error(ut.message)}},Ke=function(){try{rc(le),V(le),H("result")}catch(ut){zu.default.error(ut.message)}};return Object(Tr.jsxs)(Qa.a,{"data-inspector-line":"74","data-inspector-column":"4","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",form:Re,layout:"horizontal",children:[Object(Tr.jsx)(zc,{"data-inspector-line":"78","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx"}),Object(Tr.jsx)(Jh.a,{"data-inspector-line":"79","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",message:Object(Tr.jsxs)(cl.b,{"data-inspector-line":"81","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",direction:"vertical",children:[Object(Tr.jsx)(Rf,{"data-inspector-line":"82","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",children:"1. \u70B9\u51FB\u5730\u70B9\u53EF\u4EE5\u76F4\u63A5\u5728\u7EBF\u641C\u7D22\u5E76\u4FEE\u6539\uFF1B"}),Object(Tr.jsx)(Rf,{"data-inspector-line":"83","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",children:"2. \u9996\u884C\u5730\u70B9\u4E3A\u914D\u9001\u70B9\uFF0C\u5176\u9700\u6C42\u91CF\u4E3A\u6BCF\u8F86\u8F66\u7684\u8F7D\u91CD\uFF1B\u5176\u4F59\u884C\u5730\u70B9\u4E3A\u9700\u6C42\u70B9\u3002"}),Object(Tr.jsx)(Rf,{"data-inspector-line":"84","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",children:"3. \u914D\u9001\u81F3\u9700\u6C42\u70B9\u7684\u8F66\u8F86\u6570\u4E0D\u9700\u8981\u8BBE\u7F6E\uFF0C\u7531\u8BA1\u7B97\u5F97\u51FA\u7ED3\u679C\u3002"})]}),type:"info",showIcon:!0,closable:!0,style:{marginBottom:20}}),Object(Tr.jsx)(Qa.a.Item,{"data-inspector-line":"91","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",children:Object(Tr.jsx)(Sv,{"data-inspector-line":"92","data-inspector-column":"8","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",step2POIData:le,setStep2POIData:ue})}),Object(Tr.jsx)(Qa.a.Item,{"data-inspector-line":"97","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",style:{width:200,margin:"0 auto"},children:Object(Tr.jsxs)(cl.b,{"data-inspector-line":"98","data-inspector-column":"8","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",size:"large",children:[Object(Tr.jsx)(ko.a,{"data-inspector-line":"101","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",onClick:Ue,children:"\u4E0A\u4E00\u6B65"}),Object(Tr.jsx)(ko.a,{"data-inspector-line":"104","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/components/Step2Form/index.tsx",type:"primary",onClick:Ke,children:"\u63D0\u4EA4"})]})})]})},Si=Sd,Td=Ae("J+/v"),Tp=Ae("MoRW"),m0=Ae("OujY"),Tv=Ae.n(m0),Iv=function(J){var $=J.setCurrentStep,V=J.rootAlgoData,H=J.setRootAlgoData,te=J.rootPOIData,ie=J.setRootPOIData,le=J.setCalcStatus;if(Object(Q.useEffect)(function(){le(1);var Pe=setTimeout(function(){return le(2)},3e3);return function(){return clearTimeout(Pe)}}),!V)return null;var ue=function(){H(Lc),ie(xm),$("step1"),le(0)},we=Object(Tr.jsx)(ko.a,{"data-inspector-line":"33","data-inspector-column":"4","data-inspector-relative-path":"src/pages/VRP/components/StepResult/index.tsx",type:"primary",onClick:ue,children:"\u91CD\u65B0\u5F00\u59CB"});return Object(Tr.jsxs)(Tr.Fragment,{children:[Object(Tr.jsx)(Tp.a,{"data-inspector-line":"42","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/components/StepResult/index.tsx",status:"success",title:"\u8BA1\u7B97\u4E2D",extra:we,className:Tv.a.result}),Object(Tr.jsxs)(ec,{"data-inspector-line":"50","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/components/StepResult/index.tsx",title:"\u8868\u5355\u6570\u636E",collapsible:!0,defaultCollapsed:!0,style:{width:"100%"},children:[Object(Tr.jsx)(Cp.a,{"data-inspector-line":"57","data-inspector-column":"8","data-inspector-relative-path":"src/pages/VRP/components/StepResult/index.tsx",fieldProps:{style:{width:"48%",float:"left"}},mode:"read",valueType:"jsonCode",text:JSON.stringify(V)}),Object(Tr.jsx)(Cp.a,{"data-inspector-line":"68","data-inspector-column":"8","data-inspector-relative-path":"src/pages/VRP/components/StepResult/index.tsx",fieldProps:{style:{width:"48%",float:"right"}},mode:"read",valueType:"jsonCode",text:JSON.stringify(te)})]})]})},dh=Iv,Of=Ae("NHCu"),Lu=function(){return Object(Tr.jsxs)(Of.Map,{"data-inspector-line":"11","data-inspector-column":"4","data-inspector-relative-path":"src/components/BaiduMap/index.tsx",style:{height:700},center:new BMapGL.Point(116.4,39.91),zoom:11,children:[Object(Tr.jsx)(Of.Marker,{"data-inspector-line":"18","data-inspector-column":"6","data-inspector-relative-path":"src/components/BaiduMap/index.tsx",position:new BMapGL.Point(116.4,39.91),icon:"start"}),Object(Tr.jsx)(Of.NavigationControl,{"data-inspector-line":"19","data-inspector-column":"6","data-inspector-relative-path":"src/components/BaiduMap/index.tsx"})]})},Zs=Object(Of.MapApiLoaderHOC)({ak:"OalRnqTPhFKA9F4CwPQwCtprspgDqGG3"})(Lu),Ip=[{key:"1",carIndex:"1",route:"\u56DB\u5B63\u9752\u9633\u5149\u79D1\u6280\u56ED\u533A-\u4E1C1\u95E8 (@ 0 min) -> \u5BF9\u5916\u7ECF\u6D4E\u8D38\u6613\u5927\u5B66-\u897F\u95E8 (@ 29 min) -> \u5317\u4EAC\u5E08\u8303\u5927\u5B66\u5317\u9662-\u897F3\u95E8 (@ 46 min) -> \u56DB\u5B63\u9752\u9633\u5149\u79D1\u6280\u56ED\u533A-\u4E1C1\u95E8 (@ 63 min)",distance:"43",loadRate:"100%"},{key:"2",carIndex:"2",route:"\u56DB\u5B63\u9752\u9633\u5149\u79D1\u6280\u56ED\u533A-\u4E1C1\u95E8 (@ 0 min) -> \u4E2D\u592E\u7F8E\u672F\u5B66\u9662-\u4E1C\u95E8 (@ 26 min) -> \u56DB\u5B63\u9752\u9633\u5149\u79D1\u6280\u56ED\u533A-\u4E1C1\u95E8 (@ 51 min)",distance:"31",loadRate:"66%"}],Df=[{title:"\u8F66\u8F86\u5E8F\u53F7",dataIndex:"carIndex",key:"carIndex"},{title:"\u8DEF\u5F84\uFF08\u5230\u8FBE\u5404\u70B9\u65F6\u95F4\uFF09",dataIndex:"route",key:"route"},{title:"\u884C\u9A76\u8DEF\u7A0B\uFF08km\uFF09",dataIndex:"distance",key:"distance"},{title:"\u6EE1\u8F7D\u7387",dataIndex:"loadRate",key:"loadRate"}],Ag=function(){return Object(Tr.jsx)(xl,{"data-inspector-line":"48","data-inspector-column":"4","data-inspector-relative-path":"src/components/ResultTable/index.tsx",dataSource:Ip,columns:Df})},Id=Ag,Ff=Ae("YNLO"),Ev=Ae.n(Ff),Cl=wh.Step,Lc={algorithm:"SA",initialTemp:1e3,finalTemp:1,coolingRate:.9,chainLength:10},xm=[{key:Qr(),name:"\u56DB\u5B63\u9752\u9633\u5149\u79D1\u6280\u56ED\u533A-\u4E1C1\u95E8\uFF08\u914D\u9001\u70B9\uFF09",lng:116.426549,lat:39.779675,demand:3},{key:Qr(),name:"\u5317\u4EAC\u5E08\u8303\u5927\u5B66\u5317\u9662-\u897F3\u95E8",lng:116.409614,lat:39.942402,demand:1},{key:Qr(),name:"\u5BF9\u5916\u7ECF\u6D4E\u8D38\u6613\u5927\u5B66-\u897F\u95E8",lng:116.431244,lat:39.986622,demand:2},{key:Qr(),name:"\u4E2D\u592E\u7F8E\u672F\u5B66\u9662-\u4E1C\u95E8",lng:116.472828,lat:39.988674,demand:2}],Ep=function(){var J=Object(Q.useState)("step1"),$=Object(Gr.a)(J,2),V=$[0],H=$[1],te=Object(Q.useState)(Lc),ie=Object(Gr.a)(te,2),le=ie[0],ue=ie[1],we=Object(Q.useState)(xm),Pe=Object(Gr.a)(we,2),Re=Pe[0],Ue=Pe[1],Ke=Object(Q.useState)(0),it=Object(Gr.a)(Ke,2),ut=it[0],rt=it[1],Ct={currentStep:V,setCurrentStep:H,rootAlgoData:le,setRootAlgoData:ue,rootPOIData:Re,setRootPOIData:Ue},yt=function(sr){switch(sr){case 1:return Object(Tr.jsxs)(vt,{"data-inspector-line":"87","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/index.tsx",children:[Object(Tr.jsx)("h3",{"data-inspector-line":"88","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/index.tsx",children:"\u8BA1\u7B97\u7ED3\u679C\uFF1A"}),Object(Tr.jsx)(Br.a,{"data-inspector-line":"89","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/index.tsx",active:!0})]});case 2:return Object(Tr.jsxs)(vt,{"data-inspector-line":"94","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/index.tsx",children:[Object(Tr.jsx)("h3",{"data-inspector-line":"95","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/index.tsx",children:"\u8BA1\u7B97\u7ED3\u679C\uFF1A"}),Object(Tr.jsx)(Id,{"data-inspector-line":"96","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/index.tsx"})]});case 0:default:return Object(Tr.jsx)(Tr.Fragment,{})}},Kt=Object(Q.useMemo)(function(){var Yt=function(){var jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"step1",gr={step1:{step:0,component:Object(Tr.jsx)(Hc,{"data-inspector-line":"112","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/index.tsx",currentStep:V,setCurrentStep:H,rootAlgoData:le,setRootAlgoData:ue})},step2:{step:1,component:Object(Tr.jsx)(Si,{"data-inspector-line":"123","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/index.tsx",currentStep:V,setCurrentStep:H,rootPOIData:Re,setRootPOIData:Ue})},result:{step:2,component:Object(Tr.jsx)(dh,{"data-inspector-line":"134","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/index.tsx",currentStep:V,setCurrentStep:H,rootAlgoData:le,setRootAlgoData:ue,rootPOIData:Re,setRootPOIData:Ue,calcStatus:ut,setCalcStatus:rt})}};return gr[jt]};return Yt(V)},[V]),ar=Kt.step,er=Kt.component;return Object(Tr.jsxs)(Tr.Fragment,{children:[Object(Tr.jsx)(ye,{"data-inspector-line":"155","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/index.tsx",gutter:[16,16],children:Object(Tr.jsx)(Ye,{"data-inspector-line":"156","data-inspector-column":"8","data-inspector-relative-path":"src/pages/VRP/index.tsx",span:24,children:Object(Tr.jsx)(ei.a,{"data-inspector-line":"157","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/index.tsx",content:"\u6C42\u89E3\u591A\u8F66\u8F86\u8DEF\u5F84\u95EE\u9898 (VRP)"})})}),Object(Tr.jsxs)(ye,{"data-inspector-line":"160","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/index.tsx",gutter:[16,16],style:{marginTop:20},children:[Object(Tr.jsx)(Ye,{"data-inspector-line":"161","data-inspector-column":"8","data-inspector-relative-path":"src/pages/VRP/index.tsx",span:12,children:Object(Tr.jsxs)(vt,{"data-inspector-line":"162","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/index.tsx",children:[Object(Tr.jsxs)(wh,{"data-inspector-line":"163","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/index.tsx",size:"small",current:ar,className:Ev.a.steps,children:[Object(Tr.jsx)(Cl,{"data-inspector-line":"164","data-inspector-column":"14","data-inspector-relative-path":"src/pages/VRP/index.tsx",title:"\u7B97\u6CD5"}),Object(Tr.jsx)(Cl,{"data-inspector-line":"165","data-inspector-column":"14","data-inspector-relative-path":"src/pages/VRP/index.tsx",title:"\u9009\u70B9"}),Object(Tr.jsx)(Cl,{"data-inspector-line":"166","data-inspector-column":"14","data-inspector-relative-path":"src/pages/VRP/index.tsx",title:"\u8BA1\u7B97"})]}),er]})}),Object(Tr.jsx)(Ye,{"data-inspector-line":"171","data-inspector-column":"8","data-inspector-relative-path":"src/pages/VRP/index.tsx",span:12,children:Object(Tr.jsx)(vt,{"data-inspector-line":"172","data-inspector-column":"10","data-inspector-relative-path":"src/pages/VRP/index.tsx",children:Object(Tr.jsx)(Zs,{"data-inspector-line":"173","data-inspector-column":"12","data-inspector-relative-path":"src/pages/VRP/index.tsx"})})})]}),Object(Tr.jsx)(ye,{"data-inspector-line":"177","data-inspector-column":"6","data-inspector-relative-path":"src/pages/VRP/index.tsx",gutter:[16,16],children:Object(Tr.jsx)(Ye,{"data-inspector-line":"178","data-inspector-column":"8","data-inspector-relative-path":"src/pages/VRP/index.tsx",span:24,children:yt(ut)})})]})},bv=ft.default=Ep},g8eg:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.MapContext=void 0;var Wt=Ae("mrSG"),rr=Wt.__importDefault(Ae("q1tI")),st=Ae("W1EI"),ye=Wt.__importDefault(Ae("s+10")),At=Wt.__importDefault(Ae("Gytx")),Ye=Wt.__importDefault(Ae("gOxR")),Ut=["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],St={enableScrollWheelZoom:["enableScrollWheelZoom","disableScrollWheelZoom"],enableDragging:["enableDragging","disableDragging"],enableDoubleClickZoom:["enableDoubleClickZoom","disableDoubleClickZoom"],enableKeyboard:["enableKeyboard","disableKeyboard"],enableInertialDragging:["enableInertialDragging","disableInertialDragging"],enableContinuousZoom:["enableContinuousZoom","disableContinuousZoom"],enablePinchToZoom:["enablePinchToZoom","disablePinchToZoom"],enableRotate:["enableRotate","disableRotate"],enableTilt:["enableTilt","disableTilt"],enableAutoResize:["enableAutoResize","disableAutoResize"]};ft.MapContext=rr.default.createContext({map:void 0});var ce=function(Q){Wt.__extends(Oe,Q);function Oe(pt){var Lt=Q.call(this,pt)||this;return Lt.el=rr.default.createRef(),Lt.options=["minZoom","maxZoom","mapType"],Lt}return Oe.prototype.componentDidMount=function(){this.initialize(),this.forceUpdate()},Oe.prototype.componentDidUpdate=function(pt){var Lt=pt.center,Er=pt.zoom,xe=this.props,Lr=xe.center,Hn=xe.zoom,bo=!!Lr&&!At.default(Lt,Lr),Cr=!!(Hn&&!At.default(Er,Hn)),Lo;if(Ye.default(Lr))Lo=Lr;else{var Ui=Lr,mi=Ui.lng,Ko=Ui.lat;Lo=new BMapGL.Point(mi,Ko)}bo&&Cr?this.map.centerAndZoom(Lo,Hn):bo?this.map.setCenter(Lo):Cr&&this.map.setZoom(Hn)},Oe.prototype.componentWillUnmount=function(){this.map&&this.map.destroy()},Oe.prototype.initialize=function(){if(!this.map){var pt=Object.assign({},this.props.defaultOptions,this.getOptions());pt.mapType&&(pt.mapType=pt.mapType==="normal"?BMAP_NORMAL_MAP:pt.mapType,pt.mapType=pt.mapType==="earth"?BMAP_EARTH_MAP:pt.mapType),this.props.mapStyleV2&&(pt.style=this.props.mapStyleV2);var Lt=new BMapGL.Map(this.el.current,pt);if(this.map=Lt,this.instance=Lt,Ye.default(this.props.center))Lt.centerAndZoom(this.props.center,this.props.zoom);else{var Er=this.props.center,xe=Er.lng,Lr=Er.lat,Hn=new BMapGL.Point(xe,Lr);Lt.centerAndZoom(Hn,this.props.zoom)}this.props.heading&&Lt.setHeading(this.props.heading),this.props.tilt&&Lt.setTilt(this.props.tilt)}},Oe.prototype.renderChildren=function(pt,Lt){var Er=this;if(!(!pt||!Lt))return rr.default.Children.map(pt,function(xe){return xe?typeof xe.type=="string"||!xe.props?xe:rr.default.cloneElement(xe,{map:Lt},Er.renderChildren(xe.props.children,Lt)):null})},Oe.prototype.render=function(){return rr.default.createElement("div",{style:this.props.style},rr.default.createElement("div",{ref:this.el,className:this.props.className,style:{height:"100%"}},"\u52A0\u8F7D\u5730\u56FE\u4E2D..."),rr.default.createElement(ft.MapContext.Provider,{value:{map:this.map}},this.renderChildren(this.props.children,this.map)))},Oe}(st.Component);ce.defaultProps={center:{lng:116.404449,lat:39.914889},zoom:12,defaultOptions:{},style:{position:"relative",height:"350px"}},ft.default=ye.default(ce,Ut,St);var Ne=Ae("q8ti");Object.defineProperty(ft,"MapApiLoaderHOC",{enumerable:!0,get:function(){return Ne.default}})},gI1Y:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.requireScript=ft.requireCss=void 0;var Wt=document.head||document.getElementsByTagName("head")[0],rr={};function st(Ye){return new Promise(function(Ut,St){if(Ye in rr){Ut();return}var ce=document.createElement("link");ce.type="text/css",ce.rel="stylesheet",ce.href=Ye,ce.onerror=function(Ne){Wt.removeChild(ce),St(new URIError("The css "+Ye+" is no accessible."))},ce.onload=function(){rr[Ye]=!0,Ut()},Wt.appendChild(ce)})}ft.requireCss=st;function ye(Ye){return new Promise(function(Ut,St){if(Ye in rr){Ut();return}var ce=document.createElement("script");ce.type="text/javascript",ce.src=Ye,ce.onerror=function(Ne){Wt.removeChild(ce),St(new URIError("The Script "+Ye+" is no accessible."))},At(ce)?ce.onload=function(){rr[Ye]=!0,Ut()}:ce.onreadystatechange=function(){(ce.readyState=="loaded"||ce.readyState=="complete")&&(ce.onreadystatechange=null,rr[Ye]=!0,Ut())},Wt.appendChild(ce)})}ft.requireScript=ye;function At(Ye){return Ye=Ye||document.createElement("script"),"onload"in Ye?!0:(Ye.setAttribute("onload",""),typeof Ye.onload=="function")}},gOxR:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});function Wt(rr){return Object.prototype.toString.call(rr)==="[object String]"}ft.default=Wt},hODF:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("W1EI"),st=Wt.__importDefault(Ae("Gytx")),ye=Ae("g8eg"),At=function(Ye){Wt.__extends(Ut,Ye);function Ut(St){var ce=Ye.call(this,St)||this;return ce.options=["anchor","offset"],ce}return Ut.prototype.componentDidUpdate=function(St){if(!this.map){this.initialize();return}var ce=this.props,Ne=ce.anchor,Q=ce.offset,Oe=St.anchor,pt=St.offset,Lt=!st.default(Ne,Oe),Er=!st.default(Q,pt);Ne&&Lt&&this.control.setAnchor(Ne),Q&&Er&&this.control.setOffset(Q)},Ut.prototype.componentDidMount=function(){this.initialize()},Ut.prototype.componentWillUnmount=function(){this.destroy()},Ut.prototype.destroy=function(){this.control&&this.map&&(this.map.removeControl(this.control),this.control=null)},Ut.prototype.initialize=function(){var St=this.map=this.getMap();!St||(this.destroy(),this.control=this.getControl(),St.addControl(this.control))},Ut.prototype.getControl=function(){throw new Error("Method getControl not implemented.")},Ut.contextType=ye.MapContext,Ut}(rr.Component);ft.default=At},i5tv:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("W1EI"),st=Wt.__importDefault(Ae("s+10")),ye=Ae("i8i4"),At=Ae("g8eg"),Ye=["close","open","maximize","restore","clickclose"],Ut={enableMaximize:["enableMaximize","disableMaximize"],enableAutoPan:["enableAutoPan","disableAutoPan"],enableCloseOnClick:["enableCloseOnClick","disableCloseOnClick"]},St=function(ce){Wt.__extends(Ne,ce);function Ne(Q){var Oe=ce.call(this,Q)||this;return Oe.options=["width","height","maxWidth","offset","title","enableMassClear"],Oe}return Ne.prototype.componentDidUpdate=function(Q){this.initialize()},Ne.prototype.componentDidMount=function(){this.initialize()},Ne.prototype.componentWillUnmount=function(){this.destroy()},Ne.prototype.destroy=function(){this.content&&ye.unmountComponentAtNode(this.content),this.infoWindow&&(this.map.closeInfoWindow(),this.instance=this.infoWindow=void 0)},Ne.prototype.initialize=function(){var Q=this.map=this.getMap();if(!!Q){this.destroy();var Oe=this.getOptions(),pt=this.parsePosition(this.props.position);if(this.instance=this.infoWindow=new BMapGL.InfoWindow(this.props.text||"",Oe),Q.openInfoWindow(this.infoWindow,pt),this.props.children!==void 0){var Lt=this.content=document.createElement("div");ye.render(this.props.children,Lt),this.infoWindow.setContent(Lt)}}},Ne.prototype.parsePosition=function(Q){var Oe=this.props.coordType==="bd09mc",pt;return Q instanceof Array?pt=new BMapGL.Point(Q[0],Q[1]):Q instanceof BMapGL.Point?pt=Q:pt=new BMapGL.Point(Q.lng,Q.lat),Oe&&(pt=BMapGL.Projection.convertMC2LL(pt)),pt},Ne.prototype.render=function(){return null},Ne.contextType=At.MapContext,Ne}(rr.Component);St.defaultProps={},ft.default=st.default(St,Ye,Ut)},j9lq:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("W1EI"),st=Wt.__importDefault(Ae("Gytx")),ye=Wt.__importDefault(Ae("5zFI")),At=Ae("g8eg"),Ye=function(Ut){Wt.__extends(St,Ut);function St(ce){var Ne=Ut.call(this,ce)||this;return Ne.options=["zIndex","offset","unit"],Ne}return St.prototype.componentDidUpdate=function(ce){st.default(this.props,ce)||this.initialize()},St.prototype.componentDidMount=function(){this.initialize()},St.prototype.componentWillUnmount=function(){this.destroy()},St.prototype.destroy=function(){this.overlay&&this.map&&(this.overlay.destroy(),this.map.removeOverlay(this.overlay),this.instance=this.overlay=void 0)},St.prototype.initialize=function(){var ce=this.map=this.getMap();if(!!ce){this.destroy();var Ne=this.getOptions();Ne.html=this.props.children;var Q=this.parsePosition(this.props.position);this.instance=this.overlay=new ye.default(Q,Ne),ce.addOverlay(this.overlay),this.props.autoViewport&&ce.setCenter(Q)}},St.prototype.parsePosition=function(ce){var Ne=this.props.coordType==="bd09mc",Q;return ce instanceof Array?Q=new BMapGL.Point(ce[0],ce[1]):ce instanceof BMapGL.Point?Q=ce:Q=new BMapGL.Point(ce.lng,ce.lat),Ne&&(Q=BMapGL.Projection.convertMC2LL(Q)),Q},St.prototype.render=function(){return null},St.contextType=At.MapContext,St}(rr.Component);ft.default=Ye},lnY3:function(Dn,ft,Ae){},mEKJ:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("g8eg"),st=Ae("W1EI"),ye=function(At){Wt.__extends(Ye,At);function Ye(Ut){var St=At.call(this,Ut)||this;return St._showLayer=!1,St}return Ye.prototype.componentDidMount=function(){this.initialize()},Ye.prototype.componentDidUpdate=function(Ut){this.initialize()},Ye.prototype.componentWillUnmount=function(){this._showLayer&&(this.map.setTrafficOff(),this._showLayer=!1)},Ye.prototype.initialize=function(){var Ut=this.map=this.getMap();!Ut||this._showLayer||(Ut.setTrafficOn(),this._showLayer=!0)},Ye.prototype.render=function(){return null},Ye.contextType=rr.MapContext,Ye}(st.Component);ft.default=ye},mrSG:function(Dn,ft,Ae){"use strict";Ae.r(ft),Ae.d(ft,"__extends",function(){return rr}),Ae.d(ft,"__assign",function(){return st}),Ae.d(ft,"__rest",function(){return ye}),Ae.d(ft,"__decorate",function(){return At}),Ae.d(ft,"__param",function(){return Ye}),Ae.d(ft,"__metadata",function(){return Ut}),Ae.d(ft,"__awaiter",function(){return St}),Ae.d(ft,"__generator",function(){return ce}),Ae.d(ft,"__createBinding",function(){return Ne}),Ae.d(ft,"__exportStar",function(){return Q}),Ae.d(ft,"__values",function(){return Oe}),Ae.d(ft,"__read",function(){return pt}),Ae.d(ft,"__spread",function(){return Lt}),Ae.d(ft,"__spreadArrays",function(){return Er}),Ae.d(ft,"__spreadArray",function(){return xe}),Ae.d(ft,"__await",function(){return Lr}),Ae.d(ft,"__asyncGenerator",function(){return Hn}),Ae.d(ft,"__asyncDelegator",function(){return bo}),Ae.d(ft,"__asyncValues",function(){return Cr}),Ae.d(ft,"__makeTemplateObject",function(){return Lo}),Ae.d(ft,"__importStar",function(){return mi}),Ae.d(ft,"__importDefault",function(){return Ko}),Ae.d(ft,"__classPrivateFieldGet",function(){return ro}),Ae.d(ft,"__classPrivateFieldSet",function(){return ia});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wt=function(vt,Dr){return Wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Br,Gr){Br.__proto__=Gr}||function(Br,Gr){for(var kr in Gr)Object.prototype.hasOwnProperty.call(Gr,kr)&&(Br[kr]=Gr[kr])},Wt(vt,Dr)};function rr(Xt,vt){if(typeof vt!="function"&&vt!==null)throw new TypeError("Class extends value "+String(vt)+" is not a constructor or null");Wt(Xt,vt);function Dr(){this.constructor=Xt}Xt.prototype=vt===null?Object.create(vt):(Dr.prototype=vt.prototype,new Dr)}var st=function(){return st=Object.assign||function(Dr){for(var Br,Gr=1,kr=arguments.length;Gr<kr;Gr++){Br=arguments[Gr];for(var Nr in Br)Object.prototype.hasOwnProperty.call(Br,Nr)&&(Dr[Nr]=Br[Nr])}return Dr},st.apply(this,arguments)};function ye(Xt,vt){var Dr={};for(var Br in Xt)Object.prototype.hasOwnProperty.call(Xt,Br)&&vt.indexOf(Br)<0&&(Dr[Br]=Xt[Br]);if(Xt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Gr=0,Br=Object.getOwnPropertySymbols(Xt);Gr<Br.length;Gr++)vt.indexOf(Br[Gr])<0&&Object.prototype.propertyIsEnumerable.call(Xt,Br[Gr])&&(Dr[Br[Gr]]=Xt[Br[Gr]]);return Dr}function At(Xt,vt,Dr,Br){var Gr=arguments.length,kr=Gr<3?vt:Br===null?Br=Object.getOwnPropertyDescriptor(vt,Dr):Br,Nr;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")kr=Reflect.decorate(Xt,vt,Dr,Br);else for(var wr=Xt.length-1;wr>=0;wr--)(Nr=Xt[wr])&&(kr=(Gr<3?Nr(kr):Gr>3?Nr(vt,Dr,kr):Nr(vt,Dr))||kr);return Gr>3&&kr&&Object.defineProperty(vt,Dr,kr),kr}function Ye(Xt,vt){return function(Dr,Br){vt(Dr,Br,Xt)}}function Ut(Xt,vt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Xt,vt)}function St(Xt,vt,Dr,Br){function Gr(kr){return kr instanceof Dr?kr:new Dr(function(Nr){Nr(kr)})}return new(Dr||(Dr=Promise))(function(kr,Nr){function wr(fa){try{Tn(Br.next(fa))}catch(Ja){Nr(Ja)}}function Jr(fa){try{Tn(Br.throw(fa))}catch(Ja){Nr(Ja)}}function Tn(fa){fa.done?kr(fa.value):Gr(fa.value).then(wr,Jr)}Tn((Br=Br.apply(Xt,vt||[])).next())})}function ce(Xt,vt){var Dr={label:0,sent:function(){if(kr[0]&1)throw kr[1];return kr[1]},trys:[],ops:[]},Br,Gr,kr,Nr;return Nr={next:wr(0),throw:wr(1),return:wr(2)},typeof Symbol=="function"&&(Nr[Symbol.iterator]=function(){return this}),Nr;function wr(Tn){return function(fa){return Jr([Tn,fa])}}function Jr(Tn){if(Br)throw new TypeError("Generator is already executing.");for(;Dr;)try{if(Br=1,Gr&&(kr=Tn[0]&2?Gr.return:Tn[0]?Gr.throw||((kr=Gr.return)&&kr.call(Gr),0):Gr.next)&&!(kr=kr.call(Gr,Tn[1])).done)return kr;switch(Gr=0,kr&&(Tn=[Tn[0]&2,kr.value]),Tn[0]){case 0:case 1:kr=Tn;break;case 4:return Dr.label++,{value:Tn[1],done:!1};case 5:Dr.label++,Gr=Tn[1],Tn=[0];continue;case 7:Tn=Dr.ops.pop(),Dr.trys.pop();continue;default:if(kr=Dr.trys,!(kr=kr.length>0&&kr[kr.length-1])&&(Tn[0]===6||Tn[0]===2)){Dr=0;continue}if(Tn[0]===3&&(!kr||Tn[1]>kr[0]&&Tn[1]<kr[3])){Dr.label=Tn[1];break}if(Tn[0]===6&&Dr.label<kr[1]){Dr.label=kr[1],kr=Tn;break}if(kr&&Dr.label<kr[2]){Dr.label=kr[2],Dr.ops.push(Tn);break}kr[2]&&Dr.ops.pop(),Dr.trys.pop();continue}Tn=vt.call(Xt,Dr)}catch(fa){Tn=[6,fa],Gr=0}finally{Br=kr=0}if(Tn[0]&5)throw Tn[1];return{value:Tn[0]?Tn[1]:void 0,done:!0}}}var Ne=Object.create?function(Xt,vt,Dr,Br){Br===void 0&&(Br=Dr),Object.defineProperty(Xt,Br,{enumerable:!0,get:function(){return vt[Dr]}})}:function(Xt,vt,Dr,Br){Br===void 0&&(Br=Dr),Xt[Br]=vt[Dr]};function Q(Xt,vt){for(var Dr in Xt)Dr!=="default"&&!Object.prototype.hasOwnProperty.call(vt,Dr)&&Ne(vt,Xt,Dr)}function Oe(Xt){var vt=typeof Symbol=="function"&&Symbol.iterator,Dr=vt&&Xt[vt],Br=0;if(Dr)return Dr.call(Xt);if(Xt&&typeof Xt.length=="number")return{next:function(){return Xt&&Br>=Xt.length&&(Xt=void 0),{value:Xt&&Xt[Br++],done:!Xt}}};throw new TypeError(vt?"Object is not iterable.":"Symbol.iterator is not defined.")}function pt(Xt,vt){var Dr=typeof Symbol=="function"&&Xt[Symbol.iterator];if(!Dr)return Xt;var Br=Dr.call(Xt),Gr,kr=[],Nr;try{for(;(vt===void 0||vt-- >0)&&!(Gr=Br.next()).done;)kr.push(Gr.value)}catch(wr){Nr={error:wr}}finally{try{Gr&&!Gr.done&&(Dr=Br.return)&&Dr.call(Br)}finally{if(Nr)throw Nr.error}}return kr}function Lt(){for(var Xt=[],vt=0;vt<arguments.length;vt++)Xt=Xt.concat(pt(arguments[vt]));return Xt}function Er(){for(var Xt=0,vt=0,Dr=arguments.length;vt<Dr;vt++)Xt+=arguments[vt].length;for(var Br=Array(Xt),Gr=0,vt=0;vt<Dr;vt++)for(var kr=arguments[vt],Nr=0,wr=kr.length;Nr<wr;Nr++,Gr++)Br[Gr]=kr[Nr];return Br}function xe(Xt,vt,Dr){if(Dr||arguments.length===2)for(var Br=0,Gr=vt.length,kr;Br<Gr;Br++)(kr||!(Br in vt))&&(kr||(kr=Array.prototype.slice.call(vt,0,Br)),kr[Br]=vt[Br]);return Xt.concat(kr||vt)}function Lr(Xt){return this instanceof Lr?(this.v=Xt,this):new Lr(Xt)}function Hn(Xt,vt,Dr){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Br=Dr.apply(Xt,vt||[]),Gr,kr=[];return Gr={},Nr("next"),Nr("throw"),Nr("return"),Gr[Symbol.asyncIterator]=function(){return this},Gr;function Nr(ki){Br[ki]&&(Gr[ki]=function(vs){return new Promise(function(Bc,fu){kr.push([ki,vs,Bc,fu])>1||wr(ki,vs)})})}function wr(ki,vs){try{Jr(Br[ki](vs))}catch(Bc){Ja(kr[0][3],Bc)}}function Jr(ki){ki.value instanceof Lr?Promise.resolve(ki.value.v).then(Tn,fa):Ja(kr[0][2],ki)}function Tn(ki){wr("next",ki)}function fa(ki){wr("throw",ki)}function Ja(ki,vs){ki(vs),kr.shift(),kr.length&&wr(kr[0][0],kr[0][1])}}function bo(Xt){var vt,Dr;return vt={},Br("next"),Br("throw",function(Gr){throw Gr}),Br("return"),vt[Symbol.iterator]=function(){return this},vt;function Br(Gr,kr){vt[Gr]=Xt[Gr]?function(Nr){return(Dr=!Dr)?{value:Lr(Xt[Gr](Nr)),done:Gr==="return"}:kr?kr(Nr):Nr}:kr}}function Cr(Xt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt=Xt[Symbol.asyncIterator],Dr;return vt?vt.call(Xt):(Xt=typeof Oe=="function"?Oe(Xt):Xt[Symbol.iterator](),Dr={},Br("next"),Br("throw"),Br("return"),Dr[Symbol.asyncIterator]=function(){return this},Dr);function Br(kr){Dr[kr]=Xt[kr]&&function(Nr){return new Promise(function(wr,Jr){Nr=Xt[kr](Nr),Gr(wr,Jr,Nr.done,Nr.value)})}}function Gr(kr,Nr,wr,Jr){Promise.resolve(Jr).then(function(Tn){kr({value:Tn,done:wr})},Nr)}}function Lo(Xt,vt){return Object.defineProperty?Object.defineProperty(Xt,"raw",{value:vt}):Xt.raw=vt,Xt}var Ui=Object.create?function(Xt,vt){Object.defineProperty(Xt,"default",{enumerable:!0,value:vt})}:function(Xt,vt){Xt.default=vt};function mi(Xt){if(Xt&&Xt.__esModule)return Xt;var vt={};if(Xt!=null)for(var Dr in Xt)Dr!=="default"&&Object.prototype.hasOwnProperty.call(Xt,Dr)&&Ne(vt,Xt,Dr);return Ui(vt,Xt),vt}function Ko(Xt){return Xt&&Xt.__esModule?Xt:{default:Xt}}function ro(Xt,vt,Dr,Br){if(Dr==="a"&&!Br)throw new TypeError("Private accessor was defined without a getter");if(typeof vt=="function"?Xt!==vt||!Br:!vt.has(Xt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Dr==="m"?Br:Dr==="a"?Br.call(Xt):Br?Br.value:vt.get(Xt)}function ia(Xt,vt,Dr,Br,Gr){if(Br==="m")throw new TypeError("Private method is not writable");if(Br==="a"&&!Gr)throw new TypeError("Private accessor was defined without a setter");if(typeof vt=="function"?Xt!==vt||!Gr:!vt.has(Xt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Br==="a"?Gr.call(Xt,Dr):Gr?Gr.value=Dr:vt.set(Xt,Dr),Dr}},oBiK:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Ae("g8eg"),st=Ae("W1EI"),ye=function(At){Wt.__extends(Ye,At);function Ye(Ut){return At.call(this,Ut)||this}return Ye.prototype.componentDidMount=function(){this.initialize()},Ye.prototype.componentDidUpdate=function(Ut){this.initialize()},Ye.prototype.componentWillUnmount=function(){this.destroy()},Ye.prototype.destroy=function(){this.tilelayer&&(this.map.removeTileLayer(this.tilelayer),this.tilelayer=void 0)},Ye.prototype.initialize=function(){var Ut=this.map=this.getMap();if(!!Ut){this.destroy();var St="pl",ce="20190102",Ne=this.tilelayer=new BMapGL.TileLayer({transparentPng:!0});Ne.zIndex=110,Ne.getTilesUrl=function(Q,Oe){if(!Q||Oe<0)return"";var pt=Q.x,Lt=Q.y,Er="//mapsv0.bdimg.com/tile/?udt="+ce+"&qt=tile&styles="+St+"&x="+pt+"&y="+Lt+"&z="+Oe;return Er},Ut.addTileLayer(this.tilelayer)}},Ye.prototype.render=function(){return null},Ye.contextType=rr.MapContext,Ye}(st.Component);ft.default=ye},"pED+":function(Dn,ft,Ae){},q8ti:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importStar(Ae("q1tI")),st=Wt.__importDefault(Ae("3RkO"));ft.default=function(ye){return function(At){var Ye;return Ye=function(Ut){Wt.__extends(St,Ut);function St(ce){var Ne=Ut.call(this,ce)||this;return Ne.state={loaded:Ne.isLoadReady()},Ne.loadJSAPI=Ne.loadJSAPI.bind(Ne),Ne.handleLoaded=Ne.handleLoaded.bind(Ne),Ne}return St.prototype.isLoadReady=function(){return!!(window.BMapGL&&window.BMapGL.Map)},St.prototype.componentDidMount=function(){if(!this.isLoadReady()){if(!ye.ak)throw new TypeError("MapApiLoaderHOC: ak is required");this.loadJSAPI()}},St.prototype.componentWillUnmount=function(){this.apiTimer&&clearTimeout(this.apiTimer),this.loadedTimer&&clearTimeout(this.loadedTimer)},St.prototype.loadJSAPI=function(){var ce=this;if(this.isLoadReady()){this.handleLoaded();return}if(window.loadingMap)this.apiTimer=window.setTimeout(function(){ce.loadJSAPI()},300);else if(!window.MapApiLoaderCallback){window.loadingMap=!0,window.MapApiLoaderCallback=function(){delete window.loadingMap,delete window.MapApiLoaderCallback};var Ne=ye.ak,Q=document.createElement("script");Q.type="text/javascript",Q.src="//api.map.baidu.com/api?type=webgl&v=1.0&ak="+Ne+"&callback=MapApiLoaderCallback",document.body.appendChild(Q),this.loadedTimer=window.setTimeout(function(){ce.handleLoaded()},300)}},St.prototype.handleLoaded=function(){var ce=this;if(!this.isLoadReady()){this.loadedTimer=window.setTimeout(function(){ce.handleLoaded()},300);return}this.setState({loaded:!0})},St.prototype.render=function(){var ce=this.state.loaded;return ce?rr.default.createElement(At,Wt.__assign({},this.props)):rr.default.createElement("div",null,"loading...")},St}(rr.Component),Ye.displayName="MapApiLoaderHOC("+st.default(At)+")",Ye}}},"s+10":function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.toggleMethods=ft.unregisterEvents=ft.registerEvents=void 0;var Wt=Ae("mrSG"),rr=Wt.__importDefault(Ae("Gytx"));function st(ce,Ne,Q){Q&&Ne&&Ne.addEventListener&&(ce.registeredEvents={},Q.forEach(function(Oe){var pt="on"+Oe.substr(0,1).toUpperCase()+Oe.substr(1);ce.props[pt]&&typeof ce.props[pt]=="function"&&(Ne.addEventListener(Oe,ce.props[pt]),ce.registeredEvents[Oe]=ce.props[pt])}))}ft.registerEvents=st;function ye(ce,Ne){ce.registeredEvents&&Ne&&Ne.removeEventListener&&(Object.keys(ce.registeredEvents).forEach(function(Q){Ne.removeEventListener(Q,ce.registeredEvents[Q])}),ce.registeredEvents=null)}ft.unregisterEvents=ye;function At(ce,Ne,Q,Oe){Q&&Ne&&Object.keys(Q).forEach(function(pt){(Oe===void 0&&ce.props[pt]!==void 0||Oe!==void 0&&!rr.default(ce.props[pt],Oe[pt]))&&(ce.props[pt]?Ne&&Ne[Q[pt][0]]():Ne&&Ne[Q[pt][1]]())})}ft.toggleMethods=At;function Ye(ce,Ne){var Q=ce.prototype.getInstance,Oe=ce.prototype.componentDidMount,pt=ce.prototype.componentDidUpdate;return Q&&Ne&&Object.keys(Ne).length>0&&(ce.prototype.componentDidMount=function(){Oe&&Oe.call(this),At(this,Q(this),Ne)},ce.prototype.componentDidUpdate=function(Lt,Er){At(this,Q(this),Ne,Lt),pt&&pt.call(this,Lt,Er)}),ce}function Ut(ce,Ne){var Q=ce.prototype.getInstance,Oe=ce.prototype.componentDidUpdate,pt=ce.prototype.componentDidMount,Lt=ce.prototype.componentWillUnmount;return Ne&&Ne.length>0&&(ce.prototype.componentDidMount=function(){pt&&pt.call(this),st(this,Q(this),Ne)},ce.prototype.componentDidUpdate=function(Er,xe){rr.default(this.props,Er)||ye(this,Q(this)),Oe&&Oe.call(this,Er,xe),rr.default(this.props,Er)||st(this,Q(this),Ne)},ce.prototype.componentWillUnmount=function(){ye(this,Q(this)),Lt&&Lt.call(this)}),ce}function St(ce,Ne,Q){var Oe=Ye(ce,Q);return Oe=Ut(Oe,Ne),Oe}ft.default=St},sxwG:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importDefault(Ae("hODF")),st=function(ye){Wt.__extends(At,ye);function At(Ye){return ye.call(this,Ye)||this}return At.prototype.getControl=function(){return new BMapGL.MapTypeControl(this.getOptions())},At.prototype.render=function(){return null},At}(rr.default);ft.default=st},u1OI:function(Dn,ft,Ae){},uK0f:function(Dn,ft,Ae){(function(Wt,rr){Dn.exports=rr()})(this,function(){"use strict";function Wt(rr,st,ye){ye=ye||{},ye.childrenKeyName=ye.childrenKeyName||"children";var At=rr||[],Ye=[],Ut=0;do{var St=At.filter(function(ce){return st(ce,Ut)})[0];if(!St)break;Ye.push(St),At=St[ye.childrenKeyName]||[],Ut+=1}while(At.length>0);return Ye}return Wt})},uNoE:function(Dn,ft,Ae){Dn.exports={stepForm:"stepForm___2j1kv",stepFormText:"stepFormText___175Da",result:"result___2CRdD",desc:"desc___2edD4",information:"information___KXNhG",label:"label___3CcgB",money:"money___WHBQ1",uppercase:"uppercase___3_cs6",numInput:"numInput___1LEyY"}},v56E:function(Dn,ft,Ae){},zATX:function(Dn,ft,Ae){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var Wt=Ae("mrSG"),rr=Wt.__importDefault(Ae("0GZW")),st=Wt.__importDefault(Ae("Gytx")),ye=function(At){Wt.__extends(Ye,At);function Ye(Ut){var St=At.call(this,Ut)||this;return St.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","enableMassClear","enableEditing"],St}return Ye.prototype.onDataUpdate=function(Ut){var St=this.props,ce=St.center,Ne=St.radius,Q=St.autoViewport,Oe=Ut.center,pt=Ut.radius,Lt=Ut.autoViewport,Er=ce&&!st.default(ce,Oe),xe=!!(Ne&&!st.default(Ne,pt)),Lr=!st.default(Q,Lt);if(Er&&this.overlay.setCenter(this.parseCenter(ce)),xe&&this.overlay.setRadius(Ne),Q&&(Er||xe||Lr)){var Hn=this.overlay.getBounds(),bo=this.props.map.getViewport(Hn,this.props.viewportOptions||{});this.props.map.setViewport(bo)}},Ye.prototype.getOverlay=function(){var Ut=this.props,St=Ut.center,ce=Ut.radius;return new BMapGL.Circle(this.parseCenter(St),ce,this.getOptions())},Ye.prototype.parseCenter=function(Ut){var St=this.props.coordType==="bd09mc",ce;return Ut instanceof Array?ce=new BMapGL.Point(Ut[0],Ut[1]):Ut instanceof BMapGL.Point?ce=Ut:ce=new BMapGL.Point(Ut.lng,Ut.lat),St&&(ce=BMapGL.Projection.convertMC2LL(ce)),ce},Ye.prototype.render=function(){return null},Ye}(rr.default);ft.default=ye}}]);
